[{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269173682","html_url":"https://github.com/apache/mxnet/issues/4376#issuecomment-269173682","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4376","id":269173682,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE3MzY4Mg==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T07:03:12Z","updated_at":"2016-12-26T07:03:12Z","author_association":"CONTRIBUTOR","body":"yeah pretty much all cudnn functions have restrictions.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269173682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269175775","html_url":"https://github.com/apache/mxnet/issues/4376#issuecomment-269175775","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4376","id":269175775,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE3NTc3NQ==","user":{"login":"WarBean","id":5501392,"node_id":"MDQ6VXNlcjU1MDEzOTI=","avatar_url":"https://avatars.githubusercontent.com/u/5501392?v=4","gravatar_id":"","url":"https://api.github.com/users/WarBean","html_url":"https://github.com/WarBean","followers_url":"https://api.github.com/users/WarBean/followers","following_url":"https://api.github.com/users/WarBean/following{/other_user}","gists_url":"https://api.github.com/users/WarBean/gists{/gist_id}","starred_url":"https://api.github.com/users/WarBean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WarBean/subscriptions","organizations_url":"https://api.github.com/users/WarBean/orgs","repos_url":"https://api.github.com/users/WarBean/repos","events_url":"https://api.github.com/users/WarBean/events{/privacy}","received_events_url":"https://api.github.com/users/WarBean/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T07:22:17Z","updated_at":"2016-12-26T07:22:17Z","author_association":"CONTRIBUTOR","body":"@piiswrong Any suggestion to work around? What I can only come up is to write a CustomOp.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269175775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269177687","html_url":"https://github.com/apache/mxnet/issues/3441#issuecomment-269177687","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3441","id":269177687,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE3NzY4Nw==","user":{"login":"RogerBorras","id":10898777,"node_id":"MDQ6VXNlcjEwODk4Nzc3","avatar_url":"https://avatars.githubusercontent.com/u/10898777?v=4","gravatar_id":"","url":"https://api.github.com/users/RogerBorras","html_url":"https://github.com/RogerBorras","followers_url":"https://api.github.com/users/RogerBorras/followers","following_url":"https://api.github.com/users/RogerBorras/following{/other_user}","gists_url":"https://api.github.com/users/RogerBorras/gists{/gist_id}","starred_url":"https://api.github.com/users/RogerBorras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RogerBorras/subscriptions","organizations_url":"https://api.github.com/users/RogerBorras/orgs","repos_url":"https://api.github.com/users/RogerBorras/repos","events_url":"https://api.github.com/users/RogerBorras/events{/privacy}","received_events_url":"https://api.github.com/users/RogerBorras/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T07:39:27Z","updated_at":"2016-12-26T07:39:27Z","author_association":"NONE","body":"Great news @zihaolucky! Many thanks for your effort :)","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269177687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269181224","html_url":"https://github.com/apache/mxnet/issues/4374#issuecomment-269181224","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4374","id":269181224,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4MTIyNA==","user":{"login":"andremoeller","id":5501191,"node_id":"MDQ6VXNlcjU1MDExOTE=","avatar_url":"https://avatars.githubusercontent.com/u/5501191?v=4","gravatar_id":"","url":"https://api.github.com/users/andremoeller","html_url":"https://github.com/andremoeller","followers_url":"https://api.github.com/users/andremoeller/followers","following_url":"https://api.github.com/users/andremoeller/following{/other_user}","gists_url":"https://api.github.com/users/andremoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/andremoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andremoeller/subscriptions","organizations_url":"https://api.github.com/users/andremoeller/orgs","repos_url":"https://api.github.com/users/andremoeller/repos","events_url":"https://api.github.com/users/andremoeller/events{/privacy}","received_events_url":"https://api.github.com/users/andremoeller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T08:11:14Z","updated_at":"2016-12-26T08:11:14Z","author_association":"CONTRIBUTOR","body":"Auto-differentiation occurs during the backward pass -- check out the \"Backward\" function of operators in src/operator/.*-inl.h.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269181224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269181581","html_url":"https://github.com/apache/mxnet/issues/3908#issuecomment-269181581","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3908","id":269181581,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4MTU4MQ==","user":{"login":"zihaolucky","id":4514568,"node_id":"MDQ6VXNlcjQ1MTQ1Njg=","avatar_url":"https://avatars.githubusercontent.com/u/4514568?v=4","gravatar_id":"","url":"https://api.github.com/users/zihaolucky","html_url":"https://github.com/zihaolucky","followers_url":"https://api.github.com/users/zihaolucky/followers","following_url":"https://api.github.com/users/zihaolucky/following{/other_user}","gists_url":"https://api.github.com/users/zihaolucky/gists{/gist_id}","starred_url":"https://api.github.com/users/zihaolucky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zihaolucky/subscriptions","organizations_url":"https://api.github.com/users/zihaolucky/orgs","repos_url":"https://api.github.com/users/zihaolucky/repos","events_url":"https://api.github.com/users/zihaolucky/events{/privacy}","received_events_url":"https://api.github.com/users/zihaolucky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T08:14:44Z","updated_at":"2016-12-26T08:14:44Z","author_association":"MEMBER","body":"I suggest using high-level api to do this.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269181581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269182080","html_url":"https://github.com/apache/mxnet/issues/4377#issuecomment-269182080","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4377","id":269182080,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4MjA4MA==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T08:18:44Z","updated_at":"2016-12-26T08:18:44Z","author_association":"CONTRIBUTOR","body":"data = mx.sym.Variable('data', shape=(-1, edim))\r\nI don't think -1 works","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269182080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269182352","html_url":"https://github.com/apache/mxnet/issues/4377#issuecomment-269182352","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4377","id":269182352,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4MjM1Mg==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T08:20:58Z","updated_at":"2016-12-26T08:20:58Z","author_association":"CONTRIBUTOR","body":"try plotting your network definition and check against original implementation","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269182352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269185338","html_url":"https://github.com/apache/mxnet/issues/4374#issuecomment-269185338","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4374","id":269185338,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4NTMzOA==","user":{"login":"kernel8liang","id":4519261,"node_id":"MDQ6VXNlcjQ1MTkyNjE=","avatar_url":"https://avatars.githubusercontent.com/u/4519261?v=4","gravatar_id":"","url":"https://api.github.com/users/kernel8liang","html_url":"https://github.com/kernel8liang","followers_url":"https://api.github.com/users/kernel8liang/followers","following_url":"https://api.github.com/users/kernel8liang/following{/other_user}","gists_url":"https://api.github.com/users/kernel8liang/gists{/gist_id}","starred_url":"https://api.github.com/users/kernel8liang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kernel8liang/subscriptions","organizations_url":"https://api.github.com/users/kernel8liang/orgs","repos_url":"https://api.github.com/users/kernel8liang/repos","events_url":"https://api.github.com/users/kernel8liang/events{/privacy}","received_events_url":"https://api.github.com/users/kernel8liang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T08:46:22Z","updated_at":"2016-12-26T08:46:22Z","author_association":"CONTRIBUTOR","body":"for example, below is the ```fully_connected-inl.h```\r\n\r\n```\r\n   virtual void Backward(const OpContext &ctx,\r\n                         const std::vector<TBlob> &out_grad,\r\n                         const std::vector<TBlob> &in_data,\r\n                         const std::vector<TBlob> &out_data,\r\n                         const std::vector<OpReqType> &req,\r\n                         const std::vector<TBlob> &in_grad,\r\n                         const std::vector<TBlob> &aux_args) {\r\n     using namespace mshadow;\r\n     using namespace mshadow::expr;\r\n     CHECK_EQ(out_grad.size(), 1);\r\n     size_t expected = param_.no_bias ? 2 : 3;\r\n     CHECK(in_data.size() == expected && in_grad.size() == expected);\r\n     CHECK_EQ(req.size(), expected);\r\n     // TODO(bing): check the BLAS Handle, be careful\r\n     //  maybe need blas handle from context\r\n     Stream<xpu> *s = ctx.get_stream<xpu>();\r\n     const TShape& ishape = in_data[fullc::kData].shape_;\r\n     const TShape& oshape = out_grad[fullc::kOut].shape_;\r\n\r\n     Tensor<xpu, 2, DType> data = in_data[fullc::kData].get_with_shape<xpu, 2, DType>(\r\n         Shape2(ishape[0], ishape.ProdShape(1, ishape.ndim())), s);\r\n     Tensor<xpu, 2, DType> wmat = in_data[fullc::kWeight].get<xpu, 2, DType>(s);\r\n     Tensor<xpu, 2, DType> grad = out_grad[fullc::kOut].get_with_shape<xpu, 2, DType>(\r\n         Shape2(oshape[0], oshape.ProdShape(1, oshape.ndim())), s);\r\n\r\n #if defined(__CUDACC__)\r\n     CHECK_EQ(s->blas_handle_ownership_, Stream<xpu>::OwnHandle)\r\n         << \"Must init CuBLAS handle in stream\";\r\n #endif\r\n     //  backprop\r\n     CHECK_NE(req[fullc::kWeight], kWriteInplace) << \"cannot write weight inplace\";\r\n     // gradient of weight\r\n     Tensor<xpu, 2, DType> gwmat = in_grad[fullc::kWeight].get<xpu, 2, DType>(s);\r\n     Assign(gwmat, req[fullc::kWeight], dot(grad.T(), data));\r\n     // gradient of bias\r\n     if (!param_.no_bias) {\r\n       Tensor<xpu, 1, DType> gbias = in_grad[fullc::kBias].get<xpu, 1, DType>(s);\r\n       Assign(gbias, req[fullc::kBias], sum_rows(grad));\r\n     }\r\n     // gradient of data\r\n     Tensor<xpu, 2, DType> gdata = in_grad[fullc::kData].get_with_shape<xpu, 2, DType>(\r\n         Shape2(ishape[0], ishape.ProdShape(1, ishape.ndim())), s);\r\n     Assign(gdata, req[fullc::kData], dot(grad, wmat));\r\n   }\r\n```\r\n\r\ni only can see get grad from some tensor, then dot. so i still don't know where the grad be caculated.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269185338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269187886","html_url":"https://github.com/apache/mxnet/issues/4377#issuecomment-269187886","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4377","id":269187886,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4Nzg4Ng==","user":{"login":"nicklhy","id":1146226,"node_id":"MDQ6VXNlcjExNDYyMjY=","avatar_url":"https://avatars.githubusercontent.com/u/1146226?v=4","gravatar_id":"","url":"https://api.github.com/users/nicklhy","html_url":"https://github.com/nicklhy","followers_url":"https://api.github.com/users/nicklhy/followers","following_url":"https://api.github.com/users/nicklhy/following{/other_user}","gists_url":"https://api.github.com/users/nicklhy/gists{/gist_id}","starred_url":"https://api.github.com/users/nicklhy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicklhy/subscriptions","organizations_url":"https://api.github.com/users/nicklhy/orgs","repos_url":"https://api.github.com/users/nicklhy/repos","events_url":"https://api.github.com/users/nicklhy/events{/privacy}","received_events_url":"https://api.github.com/users/nicklhy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T09:07:22Z","updated_at":"2016-12-26T09:07:22Z","author_association":"CONTRIBUTOR","body":"@piiswrong , I didn't get any error message by setting shape=(-1, xxx) so far. Do you mean I should change it to batch size or just define these input variables without shape like `data = mx.sym.Variable('data')`?\r\n\r\nI plot the network structure(when nhop=1) and you can find it [here](https://github.com/nicklhy/MemN2N/blob/master/cache/network_structure.png).\r\n\r\nI know it is not a good idea to post such long code here and ask other people to help me debug. But I have been stuck here for a long time without any progress. Really need some help about the above mentioned problems.\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269187886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269189326","html_url":"https://github.com/apache/mxnet/issues/4376#issuecomment-269189326","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4376","id":269189326,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE4OTMyNg==","user":{"login":"WarBean","id":5501392,"node_id":"MDQ6VXNlcjU1MDEzOTI=","avatar_url":"https://avatars.githubusercontent.com/u/5501392?v=4","gravatar_id":"","url":"https://api.github.com/users/WarBean","html_url":"https://github.com/WarBean","followers_url":"https://api.github.com/users/WarBean/followers","following_url":"https://api.github.com/users/WarBean/following{/other_user}","gists_url":"https://api.github.com/users/WarBean/gists{/gist_id}","starred_url":"https://api.github.com/users/WarBean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WarBean/subscriptions","organizations_url":"https://api.github.com/users/WarBean/orgs","repos_url":"https://api.github.com/users/WarBean/repos","events_url":"https://api.github.com/users/WarBean/events{/privacy}","received_events_url":"https://api.github.com/users/WarBean/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T09:19:53Z","updated_at":"2016-12-26T09:20:40Z","author_association":"CONTRIBUTOR","body":"I have worked around by writing customized k-max pooling operator, based on the code from https://github.com/CNevd/DeepLearning-Mxnet/blob/master/DCNN/dcnn_train.py#L15. Mine differs from his in that mine performs pooling over the last dimension.\r\n\r\n```\r\nimport numpy as np\r\nimport mxnet as mx\r\n\r\nclass kMaxPool(mx.operator.CustomOp):\r\n\r\n    def __init__(self, k):\r\n        super(kMaxPool, self).__init__()\r\n        self.k = int(k)\r\n\r\n    def forward(self, is_train, req, in_data, out_data, aux):\r\n        x = in_data[0].asnumpy()\r\n        assert(4 == len(x.shape))\r\n        index = np.argsort(x, axis = 2)\r\n        index = np.sort(index[:, :, :, - self.k:], axis = 3)\r\n        d0, d1, d2, d3 = index.shape\r\n        self.slice0 = np.arange(d0).repeat(d1 * d2 * d3)\r\n        self.slice1 = np.arange(d1).repeat(d2 * d3).reshape([1, d1 * d2 * d3]).repeat(d0, axis = 0).flatten()\r\n        self.slice2 = np.arange(d2).repeat(d3).reshape([1, d2 * d3]).repeat(d0 * d1, axis = 0).flatten()\r\n        self.slice3 = index.flatten()\r\n        y = x[self.slice0, self.slice1, self.slice2, self.slice3].reshape([d0, d1, d2, d3])\r\n        self.assign(out_data[0], req[0], mx.nd.array(y))\r\n\r\n    def backward(self, req, out_grad, in_data, out_data, in_grad, aux):\r\n        x = np.ones(in_data[0].shape, dtype = in_data[0].dtype)\r\n        y = out_grad[0].asnumpy()\r\n        assert(4 == len(x.shape))\r\n        assert(4 == len(y.shape))\r\n        x[self.slice0, self.slice1, self.slice2, self.slice3] = y.flatten()\r\n        self.assign(in_grad[0], req[0], mx.nd.array(x))\r\n\r\n@mx.operator.register(\"kMaxPool\")\r\nclass kMaxPoolProp(mx.operator.CustomOpProp):\r\n\r\n    def __init__(self, k):\r\n        self.k = int(k)\r\n        super(kMaxPoolProp, self).__init__(True)\r\n\r\n    def list_argument(self):\r\n        return ['data']\r\n\r\n    def list_outputs(self):\r\n        return ['output']\r\n\r\n    def infer_shape(self, in_shape):\r\n        data_shape = in_shape[0]\r\n        assert(len(data_shape) == 4)\r\n        d0, d1, d2, d3 = data_shape\r\n        out_shape = (d0, d1, d2, self.k)\r\n        return [data_shape], [out_shape]\r\n\r\n    def create_operator(self, ctx, shapes, dtypes):\r\n        return kMaxPool(self.k)\r\n\r\nif __name__ == '__main__':\r\n    data = mx.symbol.Variable('data')\r\n    batch_size = 8\r\n    num_filter = 128\r\n    N = 2000\r\n    pool = mx.sym.Custom(\r\n        data = data,\r\n        k = 5,\r\n        name = 'kmaxpool',\r\n        op_type = 'kMaxPool',\r\n    )\r\n    print(pool.infer_shape(data = (batch_size, num_filter, 1, N)))\r\n    executor = pool.simple_bind(\r\n        ctx = mx.gpu(1),\r\n        data = (batch_size, num_filter, 1, N),\r\n    )\r\n    outputs = executor.forward(is_train = True)\r\n    output = outputs[0].asnumpy()\r\n    executor.backward(out_grads = outputs[0])\r\n    grad = executor.grad_dict['data'].asnumpy()\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269189326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269199478","html_url":"https://github.com/apache/mxnet/issues/4358#issuecomment-269199478","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4358","id":269199478,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTE5OTQ3OA==","user":{"login":"motypas","id":1788469,"node_id":"MDQ6VXNlcjE3ODg0Njk=","avatar_url":"https://avatars.githubusercontent.com/u/1788469?v=4","gravatar_id":"","url":"https://api.github.com/users/motypas","html_url":"https://github.com/motypas","followers_url":"https://api.github.com/users/motypas/followers","following_url":"https://api.github.com/users/motypas/following{/other_user}","gists_url":"https://api.github.com/users/motypas/gists{/gist_id}","starred_url":"https://api.github.com/users/motypas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motypas/subscriptions","organizations_url":"https://api.github.com/users/motypas/orgs","repos_url":"https://api.github.com/users/motypas/repos","events_url":"https://api.github.com/users/motypas/events{/privacy}","received_events_url":"https://api.github.com/users/motypas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T10:52:00Z","updated_at":"2016-12-26T10:52:00Z","author_association":"NONE","body":"Hi, thanks I know the installation guide... but I read some issue what cuda and DNN combination has a great quality for deep3d.  And on other forum has report problem with 7.5- 5.0 combination quality and bug for gtx 1070 and 1080 and python compatibility problem under cuda 8, other user says the great combination is cuda7 and dnn4  under 14.04 so... now then Im a little bit confuse. So You say under 16.04 cuda8 and dnn5.1 work fine with deep 3d?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269199478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269201243","html_url":"https://github.com/apache/mxnet/issues/4374#issuecomment-269201243","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4374","id":269201243,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIwMTI0Mw==","user":{"login":"kernel8liang","id":4519261,"node_id":"MDQ6VXNlcjQ1MTkyNjE=","avatar_url":"https://avatars.githubusercontent.com/u/4519261?v=4","gravatar_id":"","url":"https://api.github.com/users/kernel8liang","html_url":"https://github.com/kernel8liang","followers_url":"https://api.github.com/users/kernel8liang/followers","following_url":"https://api.github.com/users/kernel8liang/following{/other_user}","gists_url":"https://api.github.com/users/kernel8liang/gists{/gist_id}","starred_url":"https://api.github.com/users/kernel8liang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kernel8liang/subscriptions","organizations_url":"https://api.github.com/users/kernel8liang/orgs","repos_url":"https://api.github.com/users/kernel8liang/repos","events_url":"https://api.github.com/users/kernel8liang/events{/privacy}","received_events_url":"https://api.github.com/users/kernel8liang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T11:13:06Z","updated_at":"2016-12-26T11:13:06Z","author_association":"CONTRIBUTOR","body":"I consider the ```out_grad``` is passed from previously step，then the \"dot\" is calculating the full connect layer， but this is done by hand. \r\n\r\n\"Auto-Differentiation\"  which i mean is a library or a function you pass a express, then it do the derivation for you.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269201243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269201629","html_url":"https://github.com/apache/mxnet/issues/4374#issuecomment-269201629","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4374","id":269201629,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIwMTYyOQ==","user":{"login":"kernel8liang","id":4519261,"node_id":"MDQ6VXNlcjQ1MTkyNjE=","avatar_url":"https://avatars.githubusercontent.com/u/4519261?v=4","gravatar_id":"","url":"https://api.github.com/users/kernel8liang","html_url":"https://github.com/kernel8liang","followers_url":"https://api.github.com/users/kernel8liang/followers","following_url":"https://api.github.com/users/kernel8liang/following{/other_user}","gists_url":"https://api.github.com/users/kernel8liang/gists{/gist_id}","starred_url":"https://api.github.com/users/kernel8liang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kernel8liang/subscriptions","organizations_url":"https://api.github.com/users/kernel8liang/orgs","repos_url":"https://api.github.com/users/kernel8liang/repos","events_url":"https://api.github.com/users/kernel8liang/events{/privacy}","received_events_url":"https://api.github.com/users/kernel8liang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T11:17:47Z","updated_at":"2016-12-26T11:17:47Z","author_association":"CONTRIBUTOR","body":"library like https://github.com/HIPS/autograd.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269201629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269211370","html_url":"https://github.com/apache/mxnet/issues/4267#issuecomment-269211370","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4267","id":269211370,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIxMTM3MA==","user":{"login":"II-Matto","id":2261229,"node_id":"MDQ6VXNlcjIyNjEyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2261229?v=4","gravatar_id":"","url":"https://api.github.com/users/II-Matto","html_url":"https://github.com/II-Matto","followers_url":"https://api.github.com/users/II-Matto/followers","following_url":"https://api.github.com/users/II-Matto/following{/other_user}","gists_url":"https://api.github.com/users/II-Matto/gists{/gist_id}","starred_url":"https://api.github.com/users/II-Matto/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/II-Matto/subscriptions","organizations_url":"https://api.github.com/users/II-Matto/orgs","repos_url":"https://api.github.com/users/II-Matto/repos","events_url":"https://api.github.com/users/II-Matto/events{/privacy}","received_events_url":"https://api.github.com/users/II-Matto/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T13:27:45Z","updated_at":"2016-12-26T14:34:10Z","author_association":"CONTRIBUTOR","body":"@piiswrong @tqchen I found the reason why the `retrain` flag results in `operands context mismatch` error. The context of the `args` of the pretrained model is `cpu(0)` and is not changed to the specified `ctx`. Since the `load_checkpoint()` function has no `ctx` argument (See [doc](http://mxnet.io/api/python/model.html#mxnet.model.load_checkpoint)), one cannot change the context of `args` on loading a model. I was wondering whether the same problem for loading pretrained models exists for other MXNet examples.\r\n\r\nIs there a better way to settle this without the need of manually changing the context of loaded `args`?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269211370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269212977","html_url":"https://github.com/apache/mxnet/issues/4120#issuecomment-269212977","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4120","id":269212977,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIxMjk3Nw==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T13:49:03Z","updated_at":"2016-12-26T13:49:03Z","author_association":"CONTRIBUTOR","body":"@piiswrong i also have the same output like you when using multi GPUs when applying the change #4375. I am wondering if you already fixed it\r\n\r\nINFO:root:Epoch[0] Batch [20]   Speed: 22.77 samples/sec        Train-Acc=0.471971\r\nINFO:root:Epoch[0] Batch [20]   Speed: 22.77 samples/sec        Train-ObjectAcc=0.024562\r\nINFO:root:Epoch[0] Batch [20]   Speed: 22.77 samples/sec        Train-SmoothL1=nan\r\nINFO:root:Epoch[0] Batch [40]   Speed: 21.83 samples/sec        Train-Acc=0.750000\r\nINFO:root:Epoch[0] Batch [40]   Speed: 21.83 samples/sec        Train-ObjectAcc=0.000000\r\nINFO:root:Epoch[0] Batch [40]   Speed: 21.83 samples/sec        Train-SmoothL1=nan\r\nINFO:root:Epoch[0] Batch [60]   Speed: 23.59 samples/sec        Train-Acc=0.750000\r\nINFO:root:Epoch[0] Batch [60]   Speed: 23.59 samples/sec        Train-ObjectAcc=0.000000\r\nINFO:root:Epoch[0] Batch [60]   Speed: 23.59 samples/sec        Train-SmoothL1=nan","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269212977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269216619","html_url":"https://github.com/apache/mxnet/issues/4366#issuecomment-269216619","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4366","id":269216619,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIxNjYxOQ==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T14:37:28Z","updated_at":"2016-12-26T14:37:28Z","author_association":"CONTRIBUTOR","body":"Let me think about this bit more. i am looking at consolidate ssd sample with rcnn sample.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269216619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269233251","html_url":"https://github.com/apache/mxnet/pull/4193#issuecomment-269233251","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4193","id":269233251,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIzMzI1MQ==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T18:34:12Z","updated_at":"2016-12-26T18:34:12Z","author_association":"CONTRIBUTOR","body":"updates?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269233251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269238424","html_url":"https://github.com/apache/mxnet/issues/4379#issuecomment-269238424","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4379","id":269238424,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTIzODQyNA==","user":{"login":"u1234x1234","id":5442732,"node_id":"MDQ6VXNlcjU0NDI3MzI=","avatar_url":"https://avatars.githubusercontent.com/u/5442732?v=4","gravatar_id":"","url":"https://api.github.com/users/u1234x1234","html_url":"https://github.com/u1234x1234","followers_url":"https://api.github.com/users/u1234x1234/followers","following_url":"https://api.github.com/users/u1234x1234/following{/other_user}","gists_url":"https://api.github.com/users/u1234x1234/gists{/gist_id}","starred_url":"https://api.github.com/users/u1234x1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/u1234x1234/subscriptions","organizations_url":"https://api.github.com/users/u1234x1234/orgs","repos_url":"https://api.github.com/users/u1234x1234/repos","events_url":"https://api.github.com/users/u1234x1234/events{/privacy}","received_events_url":"https://api.github.com/users/u1234x1234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T20:02:08Z","updated_at":"2016-12-26T20:02:08Z","author_association":"CONTRIBUTOR","body":"```\r\nmodel_loaded = mx.model.FeedForward.load(prefix, iteration, ctx=mx.gpu())\r\npreds=model_loaded.predict(validation_dataset)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269238424/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269243642","html_url":"https://github.com/apache/mxnet/issues/4382#issuecomment-269243642","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4382","id":269243642,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0MzY0Mg==","user":{"login":"kevinthesun","id":15520525,"node_id":"MDQ6VXNlcjE1NTIwNTI1","avatar_url":"https://avatars.githubusercontent.com/u/15520525?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinthesun","html_url":"https://github.com/kevinthesun","followers_url":"https://api.github.com/users/kevinthesun/followers","following_url":"https://api.github.com/users/kevinthesun/following{/other_user}","gists_url":"https://api.github.com/users/kevinthesun/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinthesun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinthesun/subscriptions","organizations_url":"https://api.github.com/users/kevinthesun/orgs","repos_url":"https://api.github.com/users/kevinthesun/repos","events_url":"https://api.github.com/users/kevinthesun/events{/privacy}","received_events_url":"https://api.github.com/users/kevinthesun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T21:43:18Z","updated_at":"2016-12-26T21:43:18Z","author_association":"CONTRIBUTOR","body":"Try to use mx.ndarray instead of np.ndarray? copyto is only valid for mx.ndarray.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269243642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269244088","html_url":"https://github.com/apache/mxnet/issues/4384#issuecomment-269244088","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4384","id":269244088,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0NDA4OA==","user":{"login":"kevinthesun","id":15520525,"node_id":"MDQ6VXNlcjE1NTIwNTI1","avatar_url":"https://avatars.githubusercontent.com/u/15520525?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinthesun","html_url":"https://github.com/kevinthesun","followers_url":"https://api.github.com/users/kevinthesun/followers","following_url":"https://api.github.com/users/kevinthesun/following{/other_user}","gists_url":"https://api.github.com/users/kevinthesun/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinthesun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinthesun/subscriptions","organizations_url":"https://api.github.com/users/kevinthesun/orgs","repos_url":"https://api.github.com/users/kevinthesun/repos","events_url":"https://api.github.com/users/kevinthesun/events{/privacy}","received_events_url":"https://api.github.com/users/kevinthesun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T21:51:00Z","updated_at":"2016-12-26T21:51:00Z","author_association":"CONTRIBUTOR","body":"http://stackoverflow.com/questions/3131217/error-handling-when-importing-modules\r\nWe can consider providing \"pip install bokeh\" in error message.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269244088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269244101","html_url":"https://github.com/apache/mxnet/pull/4124#issuecomment-269244101","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4124","id":269244101,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0NDEwMQ==","user":{"login":"intoraw","id":1302872,"node_id":"MDQ6VXNlcjEzMDI4NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1302872?v=4","gravatar_id":"","url":"https://api.github.com/users/intoraw","html_url":"https://github.com/intoraw","followers_url":"https://api.github.com/users/intoraw/followers","following_url":"https://api.github.com/users/intoraw/following{/other_user}","gists_url":"https://api.github.com/users/intoraw/gists{/gist_id}","starred_url":"https://api.github.com/users/intoraw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intoraw/subscriptions","organizations_url":"https://api.github.com/users/intoraw/orgs","repos_url":"https://api.github.com/users/intoraw/repos","events_url":"https://api.github.com/users/intoraw/events{/privacy}","received_events_url":"https://api.github.com/users/intoraw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T21:51:20Z","updated_at":"2016-12-26T21:51:58Z","author_association":"NONE","body":"Hi @piiswrong, sorry for the late reply. I don't quite understand \"multiple optimizer states for each weight\". Do you mean \"for each weight, there are many optimizer states replicas on each GPU\" or \"for each weight, there are many kinds of optimizer states\".\r\nBecause, in the case of using kv-store, the optimizer states are partitioned among multiple GPUs. For a single weight, the optimizer state is not replicated, right? In my implementation, the optimizer states and model are checkpointed within the same file(``'%s-%04d.params' % (prefix, epoch)``, prefix contains kv.rank). I think it is correct. If I missed something, please let me know.\r\n\r\nI'll fix the checks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269244101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269245672","html_url":"https://github.com/apache/mxnet/issues/4385#issuecomment-269245672","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4385","id":269245672,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0NTY3Mg==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T22:22:53Z","updated_at":"2016-12-26T22:22:53Z","author_association":"CONTRIBUTOR","body":"@antinucleon add a test for amalgamation like tests/python/gpu/test_forward.py?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269245672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269246916","html_url":"https://github.com/apache/mxnet/pull/4363#issuecomment-269246916","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4363","id":269246916,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0NjkxNg==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T22:47:51Z","updated_at":"2016-12-26T22:47:51Z","author_association":"CONTRIBUTOR","body":"please fix lint","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269246916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269246988","html_url":"https://github.com/apache/mxnet/issues/4385#issuecomment-269246988","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4385","id":269246988,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0Njk4OA==","user":{"login":"d4wud","id":20050784,"node_id":"MDQ6VXNlcjIwMDUwNzg0","avatar_url":"https://avatars.githubusercontent.com/u/20050784?v=4","gravatar_id":"","url":"https://api.github.com/users/d4wud","html_url":"https://github.com/d4wud","followers_url":"https://api.github.com/users/d4wud/followers","following_url":"https://api.github.com/users/d4wud/following{/other_user}","gists_url":"https://api.github.com/users/d4wud/gists{/gist_id}","starred_url":"https://api.github.com/users/d4wud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d4wud/subscriptions","organizations_url":"https://api.github.com/users/d4wud/orgs","repos_url":"https://api.github.com/users/d4wud/repos","events_url":"https://api.github.com/users/d4wud/events{/privacy}","received_events_url":"https://api.github.com/users/d4wud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T22:49:26Z","updated_at":"2016-12-26T22:49:26Z","author_association":"NONE","body":"@piiswrong @antinucleon Update: the issue only appears when using the `model.params` and `symbol.json` from WhatsThis.  I have gotten [squeezenet_v1.1](https://github.com/dmlc/mxnet-model-gallery/blob/master/imagenet-1k-squeezenet.md) working successfully using the amalgamated `.so` from the now current dc1a36064d7166c359110bc297ef9ec174eb63d0. \r\n\r\nI have complete unit tests (Android) for WhatsThis that I am happy to contribute.  Please let me know if you can use my help.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269246988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269247066","html_url":"https://github.com/apache/mxnet/issues/4379#issuecomment-269247066","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4379","id":269247066,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI0NzA2Ng==","user":{"login":"No41Name","id":23234023,"node_id":"MDQ6VXNlcjIzMjM0MDIz","avatar_url":"https://avatars.githubusercontent.com/u/23234023?v=4","gravatar_id":"","url":"https://api.github.com/users/No41Name","html_url":"https://github.com/No41Name","followers_url":"https://api.github.com/users/No41Name/followers","following_url":"https://api.github.com/users/No41Name/following{/other_user}","gists_url":"https://api.github.com/users/No41Name/gists{/gist_id}","starred_url":"https://api.github.com/users/No41Name/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/No41Name/subscriptions","organizations_url":"https://api.github.com/users/No41Name/orgs","repos_url":"https://api.github.com/users/No41Name/repos","events_url":"https://api.github.com/users/No41Name/events{/privacy}","received_events_url":"https://api.github.com/users/No41Name/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-26T22:51:11Z","updated_at":"2016-12-26T22:51:11Z","author_association":"NONE","body":"Thanks!!","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269247066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269252956","html_url":"https://github.com/apache/mxnet/pull/4353#issuecomment-269252956","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4353","id":269252956,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI1Mjk1Ng==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T00:55:41Z","updated_at":"2016-12-27T00:55:41Z","author_association":"CONTRIBUTOR","body":"@howard0su thanks for the comments","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269252956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269267855","html_url":"https://github.com/apache/mxnet/issues/1652#issuecomment-269267855","issue_url":"https://api.github.com/repos/apache/mxnet/issues/1652","id":269267855,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI2Nzg1NQ==","user":{"login":"rongrongxiangxin","id":10111386,"node_id":"MDQ6VXNlcjEwMTExMzg2","avatar_url":"https://avatars.githubusercontent.com/u/10111386?v=4","gravatar_id":"","url":"https://api.github.com/users/rongrongxiangxin","html_url":"https://github.com/rongrongxiangxin","followers_url":"https://api.github.com/users/rongrongxiangxin/followers","following_url":"https://api.github.com/users/rongrongxiangxin/following{/other_user}","gists_url":"https://api.github.com/users/rongrongxiangxin/gists{/gist_id}","starred_url":"https://api.github.com/users/rongrongxiangxin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rongrongxiangxin/subscriptions","organizations_url":"https://api.github.com/users/rongrongxiangxin/orgs","repos_url":"https://api.github.com/users/rongrongxiangxin/repos","events_url":"https://api.github.com/users/rongrongxiangxin/events{/privacy}","received_events_url":"https://api.github.com/users/rongrongxiangxin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T04:25:05Z","updated_at":"2016-12-27T04:25:05Z","author_association":"NONE","body":"@jingpengwu When I run 3d convolution, the error \"Volume convolution is not implmented in mshadow\" occured. Is there an example for 3d convolution in mxnet? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269267855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269270254","html_url":"https://github.com/apache/mxnet/issues/4301#issuecomment-269270254","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4301","id":269270254,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI3MDI1NA==","user":{"login":"rongrongxiangxin","id":10111386,"node_id":"MDQ6VXNlcjEwMTExMzg2","avatar_url":"https://avatars.githubusercontent.com/u/10111386?v=4","gravatar_id":"","url":"https://api.github.com/users/rongrongxiangxin","html_url":"https://github.com/rongrongxiangxin","followers_url":"https://api.github.com/users/rongrongxiangxin/followers","following_url":"https://api.github.com/users/rongrongxiangxin/following{/other_user}","gists_url":"https://api.github.com/users/rongrongxiangxin/gists{/gist_id}","starred_url":"https://api.github.com/users/rongrongxiangxin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rongrongxiangxin/subscriptions","organizations_url":"https://api.github.com/users/rongrongxiangxin/orgs","repos_url":"https://api.github.com/users/rongrongxiangxin/repos","events_url":"https://api.github.com/users/rongrongxiangxin/events{/privacy}","received_events_url":"https://api.github.com/users/rongrongxiangxin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T05:02:05Z","updated_at":"2016-12-27T05:02:05Z","author_association":"NONE","body":"@tornadomeet @JaggerYoung I got the same error. Is there some example for using 3d convolution with cudnn? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269270254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269279413","html_url":"https://github.com/apache/mxnet/issues/3967#issuecomment-269279413","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3967","id":269279413,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI3OTQxMw==","user":{"login":"chimengxian","id":10339094,"node_id":"MDQ6VXNlcjEwMzM5MDk0","avatar_url":"https://avatars.githubusercontent.com/u/10339094?v=4","gravatar_id":"","url":"https://api.github.com/users/chimengxian","html_url":"https://github.com/chimengxian","followers_url":"https://api.github.com/users/chimengxian/followers","following_url":"https://api.github.com/users/chimengxian/following{/other_user}","gists_url":"https://api.github.com/users/chimengxian/gists{/gist_id}","starred_url":"https://api.github.com/users/chimengxian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chimengxian/subscriptions","organizations_url":"https://api.github.com/users/chimengxian/orgs","repos_url":"https://api.github.com/users/chimengxian/repos","events_url":"https://api.github.com/users/chimengxian/events{/privacy}","received_events_url":"https://api.github.com/users/chimengxian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T06:56:17Z","updated_at":"2016-12-27T06:56:17Z","author_association":"NONE","body":"Maybe this page can help you for using executor. :)\r\nhttps://github.com/dmlc/mxnet/blob/bcc28dfb547eb8c6f7b414fa9c94269933f778a4/example/notebooks/simple_bind.ipynb","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269279413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269284115","html_url":"https://github.com/apache/mxnet/issues/4330#issuecomment-269284115","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4330","id":269284115,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI4NDExNQ==","user":{"login":"kyocen","id":8767813,"node_id":"MDQ6VXNlcjg3Njc4MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8767813?v=4","gravatar_id":"","url":"https://api.github.com/users/kyocen","html_url":"https://github.com/kyocen","followers_url":"https://api.github.com/users/kyocen/followers","following_url":"https://api.github.com/users/kyocen/following{/other_user}","gists_url":"https://api.github.com/users/kyocen/gists{/gist_id}","starred_url":"https://api.github.com/users/kyocen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyocen/subscriptions","organizations_url":"https://api.github.com/users/kyocen/orgs","repos_url":"https://api.github.com/users/kyocen/repos","events_url":"https://api.github.com/users/kyocen/events{/privacy}","received_events_url":"https://api.github.com/users/kyocen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T07:30:29Z","updated_at":"2016-12-27T07:30:29Z","author_association":"NONE","body":"@piiswrong I try your way in my model last weekend and find the same problem in my mxnet. but I found the reason.\r\nif I load a pretrain model file use _ _,arg_params, _ = mx.model.load_checkpoint('cnn-ctc', 30)_  \r\nthe first conv layer weights name is **'convolution0_weight'**,\r\nwhen I init a executor  \r\n_executor = sym.simple_bind(ctx = mx.gpu(), **input_shapes)_  \r\n_for key in executor.arg_dict.keys():_  \r\nthe executor that first used has the same name of fist conv layer weights.\r\nbut when I use executor continuous the **executor.arg_dict.keys()** changed.\r\n\r\npretrain model weights name:  \r\n['convolution2_weight', 'convolution0_bias', 'fullyconnected0_weight', 'fullyconnected0_bias', 'convolution1_bias', 'convolution1_weight', 'convolution0_weight', 'convolution2_bias']  \r\n\r\nwhen I use continuous predict,the weigths name of executor.arg_dict.keys():  \r\n['convolution26_bias', 'convolution24_bias', 'fullyconnected8_weight', 'data', 'softmax_label', 'convolution26_weight', 'convolution24_weight', 'fullyconnected8_bias', 'convolution25_weight', 'convolution25_bias']\r\n\r\nI use a dict of weigths shape to bind different names . I think this problem can be solved by same better way. \r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269284115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269295559","html_url":"https://github.com/apache/mxnet/issues/4301#issuecomment-269295559","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4301","id":269295559,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTI5NTU1OQ==","user":{"login":"JaggerYoung","id":24541985,"node_id":"MDQ6VXNlcjI0NTQxOTg1","avatar_url":"https://avatars.githubusercontent.com/u/24541985?v=4","gravatar_id":"","url":"https://api.github.com/users/JaggerYoung","html_url":"https://github.com/JaggerYoung","followers_url":"https://api.github.com/users/JaggerYoung/followers","following_url":"https://api.github.com/users/JaggerYoung/following{/other_user}","gists_url":"https://api.github.com/users/JaggerYoung/gists{/gist_id}","starred_url":"https://api.github.com/users/JaggerYoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JaggerYoung/subscriptions","organizations_url":"https://api.github.com/users/JaggerYoung/orgs","repos_url":"https://api.github.com/users/JaggerYoung/repos","events_url":"https://api.github.com/users/JaggerYoung/events{/privacy}","received_events_url":"https://api.github.com/users/JaggerYoung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T08:50:04Z","updated_at":"2016-12-27T08:50:04Z","author_association":"NONE","body":"@rongrongxiangxin You can read the document of mxnet about mx.symbol.Convolution.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269295559/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269301597","html_url":"https://github.com/apache/mxnet/pull/4373#issuecomment-269301597","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4373","id":269301597,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMwMTU5Nw==","user":{"login":"tornadomeet","id":5860892,"node_id":"MDQ6VXNlcjU4NjA4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5860892?v=4","gravatar_id":"","url":"https://api.github.com/users/tornadomeet","html_url":"https://github.com/tornadomeet","followers_url":"https://api.github.com/users/tornadomeet/followers","following_url":"https://api.github.com/users/tornadomeet/following{/other_user}","gists_url":"https://api.github.com/users/tornadomeet/gists{/gist_id}","starred_url":"https://api.github.com/users/tornadomeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tornadomeet/subscriptions","organizations_url":"https://api.github.com/users/tornadomeet/orgs","repos_url":"https://api.github.com/users/tornadomeet/repos","events_url":"https://api.github.com/users/tornadomeet/events{/privacy}","received_events_url":"https://api.github.com/users/tornadomeet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T09:39:24Z","updated_at":"2016-12-28T01:36:27Z","author_association":"CONTRIBUTOR","body":"@mli @clcarwin  \r\n\r\nnow support conv/max-pool/fc with NNPACK, the speed-up is about 2x~7x.   \r\nand the inference result should be ok, i test caffenet on imaget val dataset(50k) with batch-size = 256, result is:  \r\n\r\n| lib | top-1 | top-5|\r\n|:---|:---|:---|\r\n|cuDNN| 54.257%|78.199%|\r\n|NNPACK|54.229%|78.125%|","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269301597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269303464","html_url":"https://github.com/apache/mxnet/issues/4267#issuecomment-269303464","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4267","id":269303464,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMwMzQ2NA==","user":{"login":"tornadomeet","id":5860892,"node_id":"MDQ6VXNlcjU4NjA4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5860892?v=4","gravatar_id":"","url":"https://api.github.com/users/tornadomeet","html_url":"https://github.com/tornadomeet","followers_url":"https://api.github.com/users/tornadomeet/followers","following_url":"https://api.github.com/users/tornadomeet/following{/other_user}","gists_url":"https://api.github.com/users/tornadomeet/gists{/gist_id}","starred_url":"https://api.github.com/users/tornadomeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tornadomeet/subscriptions","organizations_url":"https://api.github.com/users/tornadomeet/orgs","repos_url":"https://api.github.com/users/tornadomeet/repos","events_url":"https://api.github.com/users/tornadomeet/events{/privacy}","received_events_url":"https://api.github.com/users/tornadomeet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T09:53:50Z","updated_at":"2016-12-27T09:53:50Z","author_association":"CONTRIBUTOR","body":"thanks @II-Matto to solve the OOM problem of MXNet.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269303464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269304107","html_url":"https://github.com/apache/mxnet/issues/4301#issuecomment-269304107","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4301","id":269304107,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMwNDEwNw==","user":{"login":"tornadomeet","id":5860892,"node_id":"MDQ6VXNlcjU4NjA4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5860892?v=4","gravatar_id":"","url":"https://api.github.com/users/tornadomeet","html_url":"https://github.com/tornadomeet","followers_url":"https://api.github.com/users/tornadomeet/followers","following_url":"https://api.github.com/users/tornadomeet/following{/other_user}","gists_url":"https://api.github.com/users/tornadomeet/gists{/gist_id}","starred_url":"https://api.github.com/users/tornadomeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tornadomeet/subscriptions","organizations_url":"https://api.github.com/users/tornadomeet/orgs","repos_url":"https://api.github.com/users/tornadomeet/repos","events_url":"https://api.github.com/users/tornadomeet/events{/privacy}","received_events_url":"https://api.github.com/users/tornadomeet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T09:59:12Z","updated_at":"2016-12-27T09:59:12Z","author_association":"CONTRIBUTOR","body":"@JaggerYoung please using cudnn because 3d conv only support with cudnn in MXNet.  \r\n  i am not sure whether there is 3d convolution examples.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269304107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269307374","html_url":"https://github.com/apache/mxnet/issues/2298#issuecomment-269307374","issue_url":"https://api.github.com/repos/apache/mxnet/issues/2298","id":269307374,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMwNzM3NA==","user":{"login":"marugari","id":18147546,"node_id":"MDQ6VXNlcjE4MTQ3NTQ2","avatar_url":"https://avatars.githubusercontent.com/u/18147546?v=4","gravatar_id":"","url":"https://api.github.com/users/marugari","html_url":"https://github.com/marugari","followers_url":"https://api.github.com/users/marugari/followers","following_url":"https://api.github.com/users/marugari/following{/other_user}","gists_url":"https://api.github.com/users/marugari/gists{/gist_id}","starred_url":"https://api.github.com/users/marugari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marugari/subscriptions","organizations_url":"https://api.github.com/users/marugari/orgs","repos_url":"https://api.github.com/users/marugari/repos","events_url":"https://api.github.com/users/marugari/events{/privacy}","received_events_url":"https://api.github.com/users/marugari/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T10:27:04Z","updated_at":"2016-12-27T10:27:29Z","author_association":"NONE","body":"This page also says MXNet supports only cuDNN v3.\r\nhttps://developer.nvidia.com/deep-learning-frameworks","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269307374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269308035","html_url":"https://github.com/apache/mxnet/issues/4386#issuecomment-269308035","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4386","id":269308035,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMwODAzNQ==","user":{"login":"p2004r","id":16059627,"node_id":"MDQ6VXNlcjE2MDU5NjI3","avatar_url":"https://avatars.githubusercontent.com/u/16059627?v=4","gravatar_id":"","url":"https://api.github.com/users/p2004r","html_url":"https://github.com/p2004r","followers_url":"https://api.github.com/users/p2004r/followers","following_url":"https://api.github.com/users/p2004r/following{/other_user}","gists_url":"https://api.github.com/users/p2004r/gists{/gist_id}","starred_url":"https://api.github.com/users/p2004r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p2004r/subscriptions","organizations_url":"https://api.github.com/users/p2004r/orgs","repos_url":"https://api.github.com/users/p2004r/repos","events_url":"https://api.github.com/users/p2004r/events{/privacy}","received_events_url":"https://api.github.com/users/p2004r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T10:33:26Z","updated_at":"2016-12-27T10:33:26Z","author_association":"NONE","body":"And mx.io.CSVIter() not working ...\r\n\r\n```\r\n> system(\"head data/ml-100k/data.y.csv\")\r\n\"score\"\r\n3\r\n3\r\n1\r\n2\r\n1\r\n4\r\n2\r\n5\r\n3\r\n> system(\"head data/ml-100k/data.x.csv\")\r\n\"user\",\"item\"\r\n196,242\r\n186,302\r\n22,377\r\n244,51\r\n166,346\r\n298,474\r\n115,265\r\n253,465\r\n305,451\r\n> mx.io.CSVIter(\"./data/ml-100k/data.x.csv\", c(1,2), \"./data/ml-100k/data.y.csv\", c(1,1))\r\nError in mx.varg.io.CSVIter(list(...)) : basic_string::resize\r\n> traceback()\r\n4: stop(list(message = \"basic_string::resize\", call = mx.varg.io.CSVIter(list(...)), \r\n       cppstack = NULL))\r\n3: .External(list(name = \"InternalFunction_invoke\", address = <pointer: 0x1347f10>, \r\n       dll = list(name = \"Rcpp\", path = \"/usr/local/lib/R/site-library/Rcpp/libs/Rcpp.so\", \r\n           dynamicLookup = TRUE, handle = <pointer: 0x1581520>, \r\n           info = <pointer: 0x7f4fba6a0d80>), numParameters = -1L), \r\n       <pointer: 0x39c9fb0>, alist)\r\n2: mx.varg.io.CSVIter(list(...))\r\n1: mx.io.CSVIter(\"./data/ml-100k/data.x.csv\", c(1, 2), \"./data/ml-100k/data.y.csv\", \r\n       c(1, 1))\r\n> \r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269308035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269311282","html_url":"https://github.com/apache/mxnet/issues/4358#issuecomment-269311282","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4358","id":269311282,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMxMTI4Mg==","user":{"login":"motypas","id":1788469,"node_id":"MDQ6VXNlcjE3ODg0Njk=","avatar_url":"https://avatars.githubusercontent.com/u/1788469?v=4","gravatar_id":"","url":"https://api.github.com/users/motypas","html_url":"https://github.com/motypas","followers_url":"https://api.github.com/users/motypas/followers","following_url":"https://api.github.com/users/motypas/following{/other_user}","gists_url":"https://api.github.com/users/motypas/gists{/gist_id}","starred_url":"https://api.github.com/users/motypas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/motypas/subscriptions","organizations_url":"https://api.github.com/users/motypas/orgs","repos_url":"https://api.github.com/users/motypas/repos","events_url":"https://api.github.com/users/motypas/events{/privacy}","received_events_url":"https://api.github.com/users/motypas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T11:04:00Z","updated_at":"2016-12-27T11:04:00Z","author_association":"NONE","body":"Now the installation is complete no error. Can You tell me how can I test the deep3d for example how can I convert to 3d the demo.jpg?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269311282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269320292","html_url":"https://github.com/apache/mxnet/issues/3914#issuecomment-269320292","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3914","id":269320292,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMyMDI5Mg==","user":{"login":"lucasjinreal","id":21303438,"node_id":"MDQ6VXNlcjIxMzAzNDM4","avatar_url":"https://avatars.githubusercontent.com/u/21303438?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasjinreal","html_url":"https://github.com/lucasjinreal","followers_url":"https://api.github.com/users/lucasjinreal/followers","following_url":"https://api.github.com/users/lucasjinreal/following{/other_user}","gists_url":"https://api.github.com/users/lucasjinreal/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasjinreal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasjinreal/subscriptions","organizations_url":"https://api.github.com/users/lucasjinreal/orgs","repos_url":"https://api.github.com/users/lucasjinreal/repos","events_url":"https://api.github.com/users/lucasjinreal/events{/privacy}","received_events_url":"https://api.github.com/users/lucasjinreal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T12:34:10Z","updated_at":"2016-12-27T12:34:10Z","author_association":"NONE","body":"@nsy3694 大神球分像个代码啊，im2rec把makelist合并到一起去了，我每一类也是单独放在一个文件夹里面，然后所有类放在了train/ 下面，用im2rec怎么生成啊，我把root设置成了***/train 貌似报错啊\r\n```\r\nTraceback (most recent call last):\r\n  File \"im2rec.py\", line 207, in <module>\r\n    make_list(args)\r\n  File \"im2rec.py\", line 57, in make_list\r\n    chunk = image_list[i * chunk_size:(i + 1) * chunk_size]\r\nTypeError: slice indices must be integers or None or have an __index__ method\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269320292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269321915","html_url":"https://github.com/apache/mxnet/issues/2540#issuecomment-269321915","issue_url":"https://api.github.com/repos/apache/mxnet/issues/2540","id":269321915,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTMyMTkxNQ==","user":{"login":"lucasjinreal","id":21303438,"node_id":"MDQ6VXNlcjIxMzAzNDM4","avatar_url":"https://avatars.githubusercontent.com/u/21303438?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasjinreal","html_url":"https://github.com/lucasjinreal","followers_url":"https://api.github.com/users/lucasjinreal/followers","following_url":"https://api.github.com/users/lucasjinreal/following{/other_user}","gists_url":"https://api.github.com/users/lucasjinreal/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasjinreal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasjinreal/subscriptions","organizations_url":"https://api.github.com/users/lucasjinreal/orgs","repos_url":"https://api.github.com/users/lucasjinreal/repos","events_url":"https://api.github.com/users/lucasjinreal/events{/privacy}","received_events_url":"https://api.github.com/users/lucasjinreal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T12:49:53Z","updated_at":"2016-12-27T12:49:53Z","author_association":"NONE","body":"I think you need prefix and root params","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269321915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269366256","html_url":"https://github.com/apache/mxnet/issues/4386#issuecomment-269366256","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4386","id":269366256,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM2NjI1Ng==","user":{"login":"p2004r","id":16059627,"node_id":"MDQ6VXNlcjE2MDU5NjI3","avatar_url":"https://avatars.githubusercontent.com/u/16059627?v=4","gravatar_id":"","url":"https://api.github.com/users/p2004r","html_url":"https://github.com/p2004r","followers_url":"https://api.github.com/users/p2004r/followers","following_url":"https://api.github.com/users/p2004r/following{/other_user}","gists_url":"https://api.github.com/users/p2004r/gists{/gist_id}","starred_url":"https://api.github.com/users/p2004r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p2004r/subscriptions","organizations_url":"https://api.github.com/users/p2004r/orgs","repos_url":"https://api.github.com/users/p2004r/repos","events_url":"https://api.github.com/users/p2004r/events{/privacy}","received_events_url":"https://api.github.com/users/p2004r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T18:48:43Z","updated_at":"2016-12-27T18:48:43Z","author_association":"NONE","body":"Manually I get data one labels\r\n\r\n```\r\n> X <- mx.io.arrayiter(data=DF_mat_x, label=t(data.matrix(data.frame(score=DF_y))))\r\n> Z <- mxnet:::mx.model.init.iter(X, NULL, batch.size = 120, is.train = TRUE)\r\n> Z$iter.next()\r\n[1] TRUE\r\n> Z$value()\r\n$data\r\n     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]\r\n[1,]  196  186   22  244  166  298  115  253  305     6    62   286   200   210\r\n[2,]  242  302  377   51  346  474  265  465  451    86   257  1014   222    40\r\n     [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]\r\n[1,]   224   303   122   194   291   234   119   167   299   291   308    95\r\n[2,]    29   785   387   274  1042  1184   392   486   144   118     1   546\r\n     [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]\r\n[1,]    38   102    63   160    50   301   225   290    97   157   181   278\r\n[2,]    95   768   277   234   246    98   193    88   194   274  1081   603\r\n     [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]\r\n[1,]   276     7    10   284   201   276   287   246   242   249    99   178\r\n[2,]   796    32    16   304   979   564   327   201  1137   241     4   332\r\n     [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61] [,62]\r\n[1,]   251    81   260    25    59    72    87   290    42   292   115    20\r\n[2,]   100   432   322   181   196   679   384   143   423   515    20   288\r\n     [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74]\r\n[1,]   201    13   246   138   167    60    57   223   189   243    92   246\r\n[2,]   219   526   919    26   232   427   304   274   512    15  1049   416\r\n     [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85] [,86]\r\n[1,]   194   241   178   254   293   127   225   299   225   276   291   222\r\n[2,]   165   690   248  1444     5   229   237   229   480    54   144   366\r\n     [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98]\r\n[1,]   267    42    11    95     8   162    87   279   145   119    62    62\r\n[2,]   518   403   111   625   338    25  1016   154   275  1153   498   382\r\n     [,99] [,100] [,101] [,102] [,103] [,104] [,105] [,106] [,107] [,108]\r\n[1,]    28    135     32     90    286    293    216    166    250    271\r\n[2,]   209     23    294    382    208    685    144    328    496    132\r\n     [,109] [,110] [,111] [,112] [,113] [,114] [,115] [,116] [,117] [,118]\r\n[1,]    160    265    198     42    168    110     58     90    271     62\r\n[2,]    174    118    498     96    151    307    144    648    346     21\r\n     [,119] [,120] [,121] [,122] [,123] [,124] [,125] [,126] [,127] [,128]\r\n[1,]    279    237     94    128    298     44    264    194     72    222\r\n[2,]    832    514    789    485    317    195    200    385    195    750\r\n\r\n$label\r\n     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]\r\n[1,]    3    3    1    2    1    4    2    5    3     3     2     5     5     3\r\n     [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]\r\n[1,]     3     3     5     2     4     2     4     4     4     2     4     2\r\n     [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]\r\n[1,]     5     2     4     5     3     4     4     4     3     4     1     5\r\n     [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]\r\n[1,]     1     4     4     4     2     3     5     5     5     5     5     3\r\n     [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61] [,62]\r\n[1,]     4     2     4     5     5     2     4     5     5     4     3     1\r\n     [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74]\r\n[1,]     4     3     4     5     1     5     5     4     4     3     1     3\r\n     [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85] [,86]\r\n[1,]     4     2     4     3     3     5     5     3     5     3     5     4\r\n     [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98]\r\n[1,]     5     3     4     4     4     4     4     5     2     5     4     3\r\n     [,99] [,100] [,101] [,102] [,103] [,104] [,105] [,106] [,107] [,108]\r\n[1,]     4      4      3      5      4      3      4      5      4      5\r\n     [,109] [,110] [,111] [,112] [,113] [,114] [,115] [,116] [,117] [,118]\r\n[1,]      5      4      3      5      5      4      4      4      4      3\r\n     [,119] [,120] [,121] [,122] [,123] [,124] [,125] [,126] [,127] [,128]\r\n[1,]      3      4      4      3      4      5      5      2      5      5\r\n\r\n\r\n```\r\n\r\nAnd the model does not see the data\r\n\r\n```\r\n\r\n## model\r\nuser <- mx.symbol.Variable(\"user\")\r\nitem <- mx.symbol.Variable(\"item\")\r\nscore <- mx.symbol.Variable(\"label\")\r\n## user feature lookup\r\nuser1 <- mx.symbol.Embedding(user, input_dim = max_user, output_dim = k, name=\"user1\") \r\n## item feature lookup\r\nitem1 <- mx.symbol.Embedding(item, input_dim = max_item, output_dim = k, name=\"item1\")\r\n## predict by the inner product, which is elementwise product and then sum\r\npred <- user1 * item1\r\npred1 <- mx.symbol.sum_axis(pred, axis = 1, name=\"pred1\")\r\npred2 <- mx.symbol.Flatten(pred1, name=\"pred2\")\r\n## loss layer\r\npred3 <- mx.symbol.LinearRegressionOutput(data=pred2, label=score, name=\"pred3\")\r\n\r\n\r\ndevices <- mx.cpu()\r\nmx.set.seed(123)\r\n\r\n\r\nmx.model.FeedForward.create(pred3, X =  mx.io.arrayiter(data=DF_mat_x, label=t(data.matrix(data.frame(score=DF_y)))),\r\n                            ctx=devices, num.round=10, array.batch.size=10,\r\n                            verbose=T, #array.layout=\"rowmajor\",\r\n                            initializer=mx.init.uniform(0.07), learning.rate=0.07,\r\n                            eval.metric=mx.metric.rmse, momentum = 0.9,\r\n                            epoch.end.callback=mx.callback.log.train.metric(1))\r\n\r\n[18:47:02] /root/mxnet/dmlc-core/include/dmlc/logging.h:235: [18:47:02] src/symbol/symbol.cc:155: Symbol.InferShapeKeyword argument name data not found.\r\nCandidate arguments:\r\n\t[0]user\r\n\t[1]user1_weight\r\n\t[2]item\r\n\t[3]item1_weight\r\n\t[4]label\r\n\r\nError in symbol$infer.shape(list(...)) : basic_string::resize\r\n> traceback()\r\n6: stop(list(message = \"basic_string::resize\", call = symbol$infer.shape(list(...)), \r\n       cppstack = NULL))\r\n5: .External(list(name = \"CppMethod__invoke_notvoid\", address = <pointer: 0x11caef0>, \r\n       dll = list(name = \"Rcpp\", path = \"/usr/local/lib/R/site-library/Rcpp/libs/Rcpp.so\", \r\n           dynamicLookup = TRUE, handle = <pointer: 0x1404520>, \r\n           info = <pointer: 0x7f348a598d80>), numParameters = -1L), \r\n       <pointer: 0x3835820>, <pointer: 0x3836540>, .pointer, ...)\r\n4: symbol$infer.shape(list(...))\r\n3: mx.symbol.infer.shape(symbol, data = input.shape)\r\n2: mx.model.init.params(symbol, input.shape, initializer, mx.cpu())\r\n1: mx.model.FeedForward.create(pred3, X = mx.io.arrayiter(data = DF_mat_x, \r\n       label = t(data.matrix(data.frame(score = DF_y)))), ctx = devices, \r\n       num.round = 10, array.batch.size = 10, verbose = T, initializer = mx.init.uniform(0.07), \r\n       learning.rate = 0.07, eval.metric = mx.metric.rmse, momentum = 0.9, \r\n       epoch.end.callback = mx.callback.log.train.metric(1))\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269366256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269366334","html_url":"https://github.com/apache/mxnet/pull/4107#issuecomment-269366334","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4107","id":269366334,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM2NjMzNA==","user":{"login":"ykim362","id":22177353,"node_id":"MDQ6VXNlcjIyMTc3MzUz","avatar_url":"https://avatars.githubusercontent.com/u/22177353?v=4","gravatar_id":"","url":"https://api.github.com/users/ykim362","html_url":"https://github.com/ykim362","followers_url":"https://api.github.com/users/ykim362/followers","following_url":"https://api.github.com/users/ykim362/following{/other_user}","gists_url":"https://api.github.com/users/ykim362/gists{/gist_id}","starred_url":"https://api.github.com/users/ykim362/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ykim362/subscriptions","organizations_url":"https://api.github.com/users/ykim362/orgs","repos_url":"https://api.github.com/users/ykim362/repos","events_url":"https://api.github.com/users/ykim362/events{/privacy}","received_events_url":"https://api.github.com/users/ykim362/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T18:49:18Z","updated_at":"2016-12-27T18:49:18Z","author_association":"CONTRIBUTOR","body":"@piiswrong Eric, do we need to make this deterministic? As I know, GPU version is not deterministic either.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269366334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269366907","html_url":"https://github.com/apache/mxnet/issues/4391#issuecomment-269366907","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4391","id":269366907,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM2NjkwNw==","user":{"login":"amithr1","id":11315510,"node_id":"MDQ6VXNlcjExMzE1NTEw","avatar_url":"https://avatars.githubusercontent.com/u/11315510?v=4","gravatar_id":"","url":"https://api.github.com/users/amithr1","html_url":"https://github.com/amithr1","followers_url":"https://api.github.com/users/amithr1/followers","following_url":"https://api.github.com/users/amithr1/following{/other_user}","gists_url":"https://api.github.com/users/amithr1/gists{/gist_id}","starred_url":"https://api.github.com/users/amithr1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amithr1/subscriptions","organizations_url":"https://api.github.com/users/amithr1/orgs","repos_url":"https://api.github.com/users/amithr1/repos","events_url":"https://api.github.com/users/amithr1/events{/privacy}","received_events_url":"https://api.github.com/users/amithr1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T18:53:42Z","updated_at":"2016-12-27T18:53:42Z","author_association":"NONE","body":"When I do a gdb attach to the two workers..I get the following trace from first worker:\r\n\r\n#0  0x00003fffb410dd30 in pthread_cond_wait@@GLIBC_2.17 () from /usr/lib64/power8/libpthread.so.0\r\n#1  0x00003fffb3965f6c in std::condition_variable::wait(std::unique_lock<std::mutex>&) () from /usr/lib64/libstdc++.so.6\r\n#2  0x00003fffa6d2a3e8 in mxnet::engine::ThreadedEngine::WaitForVar(mxnet::engine::Var*) () from /tmp/amithr/mxnet-new/mxnet/python/mxnet/../../lib/libmxnet.so\r\n#3  0x00003fffa6710500 in mxnet::NDArray::SyncCopyToCPU(void*, unsigned long) const () from /tmp/amithr/mxnet-new/mxnet/python/mxnet/../../lib/libmxnet.so\r\n#4  0x00003fffa6da8458 in MXNDArraySyncCopyToCPU () from /tmp/amithr/mxnet-new/mxnet/python/mxnet/../../lib/libmxnet.so\r\n#5  0x00003fffaca57294 in ?? () from /usr/lib64/libffi.so.6\r\n#6  0x00003fffaca55f90 in ffi_call () from /usr/lib64/libffi.so.6\r\n#7  0x00003fffb3687b24 in _ctypes_callproc () from /usr/lib64/python2.7/lib-dynload/_ctypes.so\r\n\r\n\r\n\r\nSecond worker:\r\n\r\n#0  0x00003fff82c5dd30 in pthread_cond_wait@@GLIBC_2.17 () from /usr/lib64/power8/libpthread.so.0\r\n#1  0x00003fff824b5f6c in std::condition_variable::wait(std::unique_lock<std::mutex>&) () from /usr/lib64/libstdc++.so.6\r\n#2  0x00003fff7577d6ec in wait<ps::Postoffice::Barrier(int)::__lambda6> (__p=..., __lock=..., this=<optimized out>) at /usr/include/c++/4.8.2/condition_variable:93\r\n#3  ps::Postoffice::Barrier (this=0x3fff799ecdd8 <ps::Postoffice::Get()::e>, node_group=<optimized out>) at src/postoffice.cc:131\r\n#4  0x00003fff75764794 in mxnet::kvstore::KVStoreDist::~KVStoreDist() () from /tmp/amithr/mxnet-new/mxnet/python/mxnet/../../lib/libmxnet.so\r\n#5  0x00003fff75764830 in mxnet::kvstore::KVStoreDist::~KVStoreDist() () from /tmp/amithr/mxnet-new/mxnet/python/mxnet/../../lib/libmxnet.so\r\n#6  0x00003fff75739954 in MXKVStoreFree () from /tmp/amithr/mxnet-new/mxnet/python/mxnet/../../lib/libmxnet.so\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269366907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269370555","html_url":"https://github.com/apache/mxnet/issues/4386#issuecomment-269370555","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4386","id":269370555,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3MDU1NQ==","user":{"login":"p2004r","id":16059627,"node_id":"MDQ6VXNlcjE2MDU5NjI3","avatar_url":"https://avatars.githubusercontent.com/u/16059627?v=4","gravatar_id":"","url":"https://api.github.com/users/p2004r","html_url":"https://github.com/p2004r","followers_url":"https://api.github.com/users/p2004r/followers","following_url":"https://api.github.com/users/p2004r/following{/other_user}","gists_url":"https://api.github.com/users/p2004r/gists{/gist_id}","starred_url":"https://api.github.com/users/p2004r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p2004r/subscriptions","organizations_url":"https://api.github.com/users/p2004r/orgs","repos_url":"https://api.github.com/users/p2004r/repos","events_url":"https://api.github.com/users/p2004r/events{/privacy}","received_events_url":"https://api.github.com/users/p2004r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T19:21:44Z","updated_at":"2016-12-27T19:21:44Z","author_association":"NONE","body":"Original example uses \r\n\r\n```\r\n    user = mx.nd.array(user)\r\n    item = mx.nd.array(item)\r\n    score = mx.nd.array(score)\r\n    return mx.io.NDArrayIter(data={'user':user,'item':item},label={'score':score}, \r\n                             batch_size=batch_size, shuffle=True)\r\n```\r\n\r\nHow to do it properly in R?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269370555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269375978","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269375978","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269375978,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3NTk3OA==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:06:30Z","updated_at":"2016-12-27T20:06:30Z","author_association":"CONTRIBUTOR","body":"I don't like the name WarpOp. I see two possibilities\r\n1. merge it with spatialtransformer network as it is called in a few papers\r\n2. call it remap like opencv","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269375978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269378745","html_url":"https://github.com/apache/mxnet/issues/3930#issuecomment-269378745","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3930","id":269378745,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3ODc0NQ==","user":{"login":"karishmamalkan","id":1866017,"node_id":"MDQ6VXNlcjE4NjYwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/1866017?v=4","gravatar_id":"","url":"https://api.github.com/users/karishmamalkan","html_url":"https://github.com/karishmamalkan","followers_url":"https://api.github.com/users/karishmamalkan/followers","following_url":"https://api.github.com/users/karishmamalkan/following{/other_user}","gists_url":"https://api.github.com/users/karishmamalkan/gists{/gist_id}","starred_url":"https://api.github.com/users/karishmamalkan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karishmamalkan/subscriptions","organizations_url":"https://api.github.com/users/karishmamalkan/orgs","repos_url":"https://api.github.com/users/karishmamalkan/repos","events_url":"https://api.github.com/users/karishmamalkan/events{/privacy}","received_events_url":"https://api.github.com/users/karishmamalkan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:31:11Z","updated_at":"2016-12-27T20:31:11Z","author_association":"NONE","body":"@sxjscience Hey, what is the progress on the API for RNN? Is it complete or still in progress?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269378745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269378784","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269378784","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269378784,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3ODc4NA==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:31:35Z","updated_at":"2016-12-27T20:31:35Z","author_association":"CONTRIBUTOR","body":"This implementation seems very complicated. See this implementation for the same op in caffe from paper https://arxiv.org/abs/1608.05842\r\n\r\n```C++\r\n#include <vector>\r\n\r\n#include <boost/shared_ptr.hpp>\r\n#include <gflags/gflags.h>\r\n#include <glog/logging.h>\r\n\r\n#include <cmath>\r\n\r\n#include \"caffe/blob.hpp\"\r\n#include \"caffe/common.hpp\"\r\n#include \"caffe/flow_transformer_layer.hpp\"\r\n#include \"caffe/util/math_functions.hpp\"\r\n\r\nnamespace caffe {\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::LayerSetUp(const vector<Blob<Dtype>*>& bottom,\r\n      const vector<Blob<Dtype>*>& top) {\r\n\r\n\tstring prefix = \"\\t\\tFlow Transformer Layer:: LayerSetUp: \\t\";\r\n\r\n\r\n\tstd::cout<<prefix<<\"Getting output_H_ and output_W_\"<<std::endl;\r\n\toutput_H_ = bottom[0]->shape(2);\r\n\toutput_W_ = bottom[0]->shape(3);\r\n\tstd::cout<<prefix<<\"output_H_ = \"<<output_H_<<\", output_W_ = \"<<output_W_<<std::endl;\r\n\r\n\tstd::cout<<prefix<<\"Getting pre-defined parameters\"<<std::endl;\r\n\r\n\t// check the validation for the parameter theta\r\n\tCHECK(bottom[1]->shape(2) == bottom[0]->shape(2)) << \"The third dimension (height) of the flow field and \" <<\r\n\t\t\t\"U should be the same\" << std::endl;\r\n\tCHECK(bottom[1]->shape(3) == bottom[0]->shape(3)) << \"The forth dimension (width) of the flow field and \" <<\r\n\t\t\t\"U should be the same\" << std::endl;\r\n\r\n\t// initialize the matrix for output grid\r\n\tstd::cout<<prefix<<\"Initializing the matrix for output grid\"<<std::endl;\r\n\r\n\t//2 channel image, 1 channel each for U and V of flow field\r\n\tvector<int> shape_output(4);\r\n\tshape_output[0] = bottom[0]->shape(0);\r\n\tshape_output[1] = 2;\r\n\tshape_output[2] = output_H_;\r\n\tshape_output[3] = output_W_;\r\n\toutput_grid.Reshape(shape_output);\r\n\r\n\tDtype* data = output_grid.mutable_cpu_data();\r\n\tfor(int n=0;n<bottom[0]->shape(0);n++){\r\n\tfor(int r=0;r<output_H_;r++){\r\n\t\tfor(int c=0;c<output_W_;c++){\r\n\t\t\tdata[output_grid.offset(n,0,r,c)] = c;\r\n\t\t\tdata[output_grid.offset(n,1,r,c)] = r;\r\n\t\t}\r\n\t}\r\n\t}\r\n\r\n\t// initialize the matrix for input grid\r\n\tstd::cout<<prefix<<\"Initializing the matrix for input grid\"<<std::endl;\r\n\r\n\tvector<int> shape_input(4);\r\n\tshape_input[0] = bottom[0]->shape(0);\r\n\tshape_input[1] = 2;\r\n\tshape_input[2] = output_H_;\r\n\tshape_input[3] = output_W_;\r\n\tinput_grid.Reshape(shape_input);\r\n\r\n\tstd::cout<<prefix<<\"Initialization finished.\"<<std::endl;\r\n}\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::Reshape(const vector<Blob<Dtype>*>& bottom,\r\n      const vector<Blob<Dtype>*>& top) {\r\n\tstring prefix = \"\\t\\tFlow Transformer Layer:: Reshape: \\t\";\r\n\r\n\tif(global_debug) std::cout<<prefix<<\"Starting!\"<<std::endl;\r\n\r\n\tN = bottom[0]->shape(0);\r\n\tC = bottom[0]->shape(1);\r\n\tH = bottom[0]->shape(2);\r\n\tW = bottom[0]->shape(3);\r\n\r\n\t// reshape V\r\n\tvector<int> shape(4);\r\n\r\n\tshape[0] = N;\r\n\tshape[1] = C;\r\n\tshape[2] = output_H_;\r\n\tshape[3] = output_W_;\r\n\r\n\ttop[0]->Reshape(shape);\r\n\r\n\t// reshape dTheta_tmp\r\n\tvector<int> dTheta_tmp_shape(4);\r\n\r\n\tdTheta_tmp_shape[0] = N;\r\n\tdTheta_tmp_shape[1] = 2;\r\n\tdTheta_tmp_shape[2] = 3;\r\n\tdTheta_tmp_shape[3] = output_H_ * output_W_ * C;\r\n\r\n\tdTheta_tmp.Reshape(dTheta_tmp_shape);\r\n\r\n\t// init all_ones_2\r\n\tvector<int> all_ones_2_shape(1);\r\n\tall_ones_2_shape[0] = output_H_ * output_W_ * C;\r\n\tall_ones_2.Reshape(all_ones_2_shape);\r\n\r\n\t// reshape full_theta\r\n\tvector<int> full_theta_shape(2);\r\n\tfull_theta_shape[0] = N;\r\n\tfull_theta_shape[1] = 6;\r\n\tfull_theta.Reshape(full_theta_shape);\r\n\r\n\tif(global_debug) std::cout<<prefix<<\"Finished.\"<<std::endl;\r\n}\r\n\r\ntemplate <typename Dtype>\r\nDtype FlowTransformerLayer<Dtype>::transform_forward_cpu(const Dtype* pic, Dtype px, Dtype py) {\r\n\t/*\r\n\tso i think this does the bilinear interpolation for a single pixel\r\n\t*/\r\n\r\n\tbool debug = false;\r\n\r\n\tstring prefix = \"\\t\\tFlow Transformer Layer:: transform_forward_cpu: \\t\";\r\n\r\n\tif(debug) std::cout<<prefix<<\"Starting!\\t\"<<std::endl;\r\n\tif(debug) std::cout<<prefix<<\"(px, py) = (\"<<px<<\", \"<<py<<\")\"<<std::endl;\r\n\r\n\tDtype res = (Dtype)0.;\r\n\r\n\tDtype x = px; Dtype y = py;\r\n\r\n\tif(debug) std::cout<<prefix<<\"(x, y) = (\"<<x<<\", \"<<y<<\")\"<<std::endl;\r\n\r\n\tint m, n; Dtype w;\r\n\r\n\tm = floor(x); n = floor(y); w = 0;\r\n\tif(debug) std::cout<<prefix<<\"1: (m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\t\tres += w * pic[m * W + n];\r\n\t\tif(debug) std::cout<<prefix<<\"w = \"<<w<<\", pic[m, n] = \"<<pic[m * W + n]<<std::endl;\r\n\t}\r\n\r\n\tm = floor(x) + 1; n = floor(y); w = 0;\r\n\tif(debug) std::cout<<prefix<<\"2: (m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\t\tres += w * pic[m * W + n];\r\n\t\tif(debug) std::cout<<prefix<<\"w = \"<<w<<\", pic[m, n] = \"<<pic[m * W + n]<<std::endl;\r\n\t}\r\n\r\n\tm = floor(x); n = floor(y) + 1; w = 0;\r\n\tif(debug) std::cout<<prefix<<\"3: (m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\t\tres += w * pic[m * W + n];\r\n\t\tif(debug) std::cout<<prefix<<\"w = \"<<w<<\", pic[m, n] = \"<<pic[m * W + n]<<std::endl;\r\n\t}\r\n\r\n\tm = floor(x) + 1; n = floor(y) + 1; w = 0;\r\n\tif(debug) std::cout<<prefix<<\"4: (m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\t\tres += w * pic[m * W + n];\r\n\t\tif(debug) std::cout<<prefix<<\"w = \"<<w<<\", pic[m, n] = \"<<pic[m * W + n]<<std::endl;\r\n\t}\r\n\r\n\tif(debug) std::cout<<prefix<<\"Finished. \\tres = \"<<res<<std::endl;\r\n\r\n\treturn res;\r\n}\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::Forward_cpu(const vector<Blob<Dtype>*>& bottom,\r\n    const vector<Blob<Dtype>*>& top) {\r\n\r\n\tstring prefix = \"\\t\\tFlow Transformer Layer:: Forward_cpu: \\t\";\r\n\r\n\t/*\r\n\tCHECK(false) << \"Don't use the CPU implementation! If you really want to, delete the\" <<\r\n\t\t\t\" CHECK in st_layer.cpp file. Line number: 240-241.\" << std::endl;\r\n\t*/\r\n\r\n\tif(global_debug) std::cout<<prefix<<\"Starting!\"<<std::endl;\r\n\r\n\tconst Dtype* U = bottom[0]->cpu_data();\r\n\tconst Dtype* flows = bottom[1]->cpu_data();\r\n\t\r\n\tconst Dtype* output_grid_data = output_grid.cpu_data();\r\n\r\n\tDtype* input_grid_data = input_grid.mutable_cpu_data();\r\n\tDtype* V = top[0]->mutable_cpu_data();\r\n\r\n\tcaffe_set(input_grid.count(), (Dtype)0, input_grid_data);\r\n\tcaffe_set(top[0]->count(), (Dtype)0, V);\r\n\r\n\t//combine flow with grid\r\n\tcaffe_add(input_grid.count(),output_grid_data,flows,input_grid_data);\r\n\r\n\t// for each input\r\n\tfor(int i = 0; i < N; ++i) {\r\n\t\t//coordinates is a matrix of coordinates on the original image\r\n\t\t//to sample pixel values from\r\n\t\t//Dtype* coordinates = input_grid_data + (output_H_ * output_W_ * 2) * i;\r\n\t\t//Dtype* coordinates = input_grid_data + input_grid.offset(i,0,0,0);\r\n\r\n\t\t//do affine transformation\r\n\t\t//caffe_cpu_gemm<Dtype>(CblasNoTrans, CblasTrans, output_H_ * output_W_, 2, 3, (Dtype)1.,\r\n\t\t//      output_grid_data, theta + 6 * i, (Dtype)0., coordinates);\r\n\t\t\r\n\t\tDtype px, py;\r\n\r\n\t\t//for each pixel on the output, find the interpolated pixel value\r\n\t\tfor(int s = 0; s < output_H_; ++s){\r\n\t\t\tfor(int t = 0; t < output_W_; ++t) {\r\n\t\t\t\t//px,py should be the sample coordinates on the source img\r\n\r\n\t\t\t\tpy = input_grid_data[input_grid.offset(i,0,s,t)];\r\n\t\t\t\tpx = input_grid_data[input_grid.offset(i,1,s,t)];\r\n\r\n\t\t\t\tfor(int j = 0; j < C; ++j){\r\n\t\t\t\t\t//do interpolation\r\n\t\t\t\t\tV[top[0]->offset(i, j, s, t)] = transform_forward_cpu(\r\n\t\t\t\t\t\t\tU + bottom[0]->offset(i, j, 0, 0), px, py);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif(global_debug) std::cout<<prefix<<\"Finished.\"<<std::endl;\r\n}\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::transform_backward_cpu(Dtype dV, const Dtype* U, const Dtype px,\r\n\t\tconst Dtype py, Dtype* dU, Dtype& dpx, Dtype& dpy) {\r\n\t/*\r\n\tU is the input image\r\n\tV is out output image, dV is local gradient from output\r\n\t*/\r\n\r\n\tbool debug = false;\r\n\r\n\tstring prefix = \"\\t\\tFlow Transformer Layer:: transform_backward_cpu: \\t\";\r\n\r\n\tif(debug) std::cout<<prefix<<\"Starting!\"<<std::endl;\r\n\r\n\t//Dtype x = (px + 1) / 2 * H; Dtype y = (py + 1) / 2 * W;\r\n\tDtype x = px; Dtype y = py;\r\n\tif(debug) std::cout<<prefix<<\"(x, y) = (\"<<x<<\", \"<<y<<\")\"<<std::endl;\r\n\r\n\tint m, n; Dtype w;\r\n\r\n\tm = floor(x); n = floor(y); w = 0;\r\n\tif(debug) std::cout<<prefix<<\"(m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\r\n\t\tif(to_compute_dU_) dU[m * W + n] += w * dV;\r\n\r\n\t\tif(abs(x - m) < 1) {\r\n\t\t\tif(m >= x) {\r\n\t\t\t\tdpx += max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx += \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpx -= max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx -= \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(abs(y - n) < 1) {\r\n\t\t\tif(n >= y) {\r\n\t\t\t\tdpy += max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy += \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpy -= max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy -= \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm = floor(x) + 1; n = floor(y); w = 0;\r\n\tif(debug) std::cout<<prefix<<\"(m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\r\n\t\tif(to_compute_dU_) dU[m * W + n] += w * dV;\r\n\r\n\t\tif(abs(x - m) < 1) {\r\n\t\t\tif(m >= x) {\r\n\t\t\t\tdpx += max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx += \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpx -= max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx -= \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(abs(y - n) < 1) {\r\n\t\t\tif(n >= y) {\r\n\t\t\t\tdpy += max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy += \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpy -= max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy -= \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm = floor(x); n = floor(y) + 1; w = 0;\r\n\tif(debug) std::cout<<prefix<<\"(m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\r\n\t\tif(to_compute_dU_) dU[m * W + n] += w * dV;\r\n\r\n\t\tif(abs(x - m) < 1) {\r\n\t\t\tif(m >= x) {\r\n\t\t\t\tdpx += max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx += \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpx -= max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx -= \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(abs(y - n) < 1) {\r\n\t\t\tif(n >= y) {\r\n\t\t\t\tdpy += max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy += \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpy -= max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy -= \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tm = floor(x) + 1; n = floor(y) + 1; w = 0;\r\n\tif(debug) std::cout<<prefix<<\"(m, n) = (\"<<m<<\", \"<<n<<\")\"<<std::endl;\r\n\r\n\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\tw = max(0, 1 - abs(x - m)) * max(0, 1 - abs(y - n));\r\n\r\n\t\tif(to_compute_dU_) dU[m * W + n] += w * dV;\r\n\r\n\t\tif(abs(x - m) < 1) {\r\n\t\t\tif(m >= x) {\r\n\t\t\t\tdpx += max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx += \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpx -= max(0, 1 - abs(y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpx -= \"<<max(0, 1 - abs(y - n))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<H / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(abs(y - n) < 1) {\r\n\t\t\tif(n >= y) {\r\n\t\t\t\tdpy += max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy += \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t} else {\r\n\t\t\t\tdpy -= max(0, 1 - abs(x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t\t\tif(debug) std::cout<<prefix<<\"dpy -= \"<<max(0, 1 - abs(x - m))<<\" * \"<<U[m * W + n]<<\" * \"<<dV<<\" * \"<<W / 2<<std::endl;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif(debug) std::cout<<prefix<<\"Finished.\"<<std::endl;\r\n}\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::Backward_cpu(const vector<Blob<Dtype>*>& top,\r\n    const vector<bool>& propagate_down,\r\n    const vector<Blob<Dtype>*>& bottom) {\r\n\r\n\t\tstring prefix = \"\\t\\tFlow Transformer Layer:: Backward_cpu: \\t\";\r\n\r\n\t\t//CHECK(false) << \"Don't use the CPU implementation! If you really want to, delete the\" <<\r\n\t\t//\t\t\" CHECK in st_layer.cpp file. Line number: 420-421.\" << std::endl;\r\n\r\n\t\tif(global_debug) std::cout<<prefix<<\"Starting!\"<<std::endl;\r\n\r\n\t\tconst Dtype* dV = top[0]->cpu_diff();\r\n\t\tDtype* input_grid_data = input_grid.mutable_cpu_data();\r\n\t\t//const Dtype* output_grid_data = output_grid.cpu_data(); // remove if you don't need to recalc the input grid\r\n\t\tconst Dtype* U = bottom[0]->cpu_data();\r\n\r\n\t\tDtype* dU = bottom[0]->mutable_cpu_diff(); //we won't be setting this\r\n\t\t//Dtype* dTheta = bottom[1]->mutable_cpu_diff();\r\n\t\t//const Dtype* flows = bottom[1]->cpu_data(); // remove if you don't need to recalc the input grid\r\n\t\tDtype* flow_diff = bottom[1]->mutable_cpu_diff();\r\n\r\n\t\tcaffe_set(bottom[0]->count(), (Dtype)0, dU);\r\n\t\t//caffe_set(bottom[1]->count(), (Dtype)0, dTheta);\r\n\t\tcaffe_set(input_grid.count(), (Dtype)0, flow_diff);\r\n\r\n\t\t//calc input grid data, recalc incase blob is reset between forward and backward\r\n\t\t//caffe_add(input_grid.count(),output_grid_data,flows,input_grid_data);\r\n\r\n\t\tfor(int i = 0; i < N; ++i) {\r\n\r\n\t\t\t//const Dtype* coordinates = input_grid_data + (output_H_ * output_W_ * 2) * i;\r\n\t\t\t//Dtype* coordinates_diff = input_grid_diff + (output_H_ * output_W_ * 2) * i;\r\n\r\n\t\t\tconst Dtype* curInputGrid = &input_grid_data[input_grid.offset(i,0,0,0)];\r\n\t\t\t//since its just element wise addition, we are\r\n\t\t\t//just going to set the diff directly to the flow\r\n\t\t\tDtype* curFlowDiff = &flow_diff[bottom[1]->offset(i,0,0,0)];\r\n\r\n\t\t\t//int row_idx;\r\n\t\t\tDtype px, py, delta_dpx, delta_dpy;\r\n\r\n\t\t\tfor(int s = 0; s < output_H_; ++s)\r\n\t\t\t\tfor(int t = 0; t < output_W_; ++t) {\r\n\r\n\t\t\t\t\t//row_idx = output_W_ * s + t;\t//this means fix!\r\n\r\n\t\t\t\t\tpx = curInputGrid[input_grid.offset(0,1,s,t)];\r\n\t\t\t\t\tpy = curInputGrid[input_grid.offset(0,0,s,t)];\r\n\r\n\t\t\t\t\tfor(int j = 0; j < C; ++j) {\r\n\r\n\t\t\t\t\t\tdelta_dpx = delta_dpy = (Dtype)0.;\r\n\r\n\t\t\t\t\t\ttransform_backward_cpu(dV[top[0]->offset(i, j, s, t)], U + bottom[0]->offset(i, j, 0, 0),\r\n\t\t\t\t\t\t\t\tpx, py, dU + bottom[0]->offset(i, j, 0, 0), delta_dpx, delta_dpy);\r\n\r\n\t\t\t\t\t\tcurFlowDiff[bottom[1]->offset(0,1,s,t)] += delta_dpx;\r\n\t\t\t\t\t\tcurFlowDiff[bottom[1]->offset(0,0,s,t)] += delta_dpy;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\tdpx = curFlowDiff[row_idx * 2];\r\n\t\t\t\t\tdpy = curFlowDiff[row_idx * 2 + 1];\r\n\r\n\t\t\t\t\tdTheta[6 * i] += dpx * (s * 1.0 / output_H_ * 2 - 1);\r\n\t\t\t\t\tdTheta[6 * i + 1] += dpx * (t * 1.0 / output_W_ * 2 - 1);\r\n\t\t\t\t\tdTheta[6 * i + 2] += dpx;\r\n\t\t\t\t\tdTheta[6 * i + 3] += dpy * (s * 1.0 / output_H_ * 2 - 1);\r\n\t\t\t\t\tdTheta[6 * i + 4] += dpy * (t * 1.0 / output_W_ * 2 - 1);\r\n\t\t\t\t\tdTheta[6 * i + 5] += dpy;\r\n\t\t\t\t\t*/\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(global_debug) std::cout<<prefix<<\"Finished.\"<<std::endl;\r\n}\r\n\r\n#ifdef CPU_ONLY\r\nSTUB_GPU(FlowTransformerLayer);\r\n#endif\r\n\r\nINSTANTIATE_CLASS(FlowTransformerLayer);\r\nREGISTER_LAYER_CLASS(FlowTransformer);\r\n\r\n}  // namespace caffe\r\n```\r\n.cu\r\n```C++\r\n#include <vector>\r\n\r\n#include \"caffe/layer.hpp\"\r\n#include \"caffe/util/math_functions.hpp\"\r\n#include \"caffe/util/gpu_util.cuh\"\r\n#include \"caffe/flow_transformer_layer.hpp\"\r\n#include \"caffe/util/benchmark.hpp\"\r\n\r\nnamespace caffe {\r\n\r\ntemplate <typename Dtype>\r\n__global__ void set_value_to_constant(const int nthreads, Dtype value, int size, \r\n\tint i, Dtype* dst) {\r\n\r\n\tCUDA_KERNEL_LOOP(index, nthreads) {\r\n\t\tdst[index * size + i] = value;\r\n\t}\r\n}\r\n\r\ntemplate <typename Dtype>\r\n__global__ void copy_values(const int nthreads, int size_src, int k, \r\n\tconst Dtype* src, int size_dst, int i, Dtype* dst) {\r\n\r\n\tCUDA_KERNEL_LOOP(index, nthreads) {\r\n\t\tdst[index * size_dst + i] = src[index * size_src + k];\r\n\t}\r\n}\r\n\r\ntemplate <typename Dtype>\r\n__global__ void FlowTransformerForwardGPU(const int nthreads, int N, int C,\r\n\t\tint output_H_, int output_W_, int H, int W,\r\n\t\tconst Dtype* input_grid_data, const Dtype* U, Dtype* V) {\r\n\t/*\r\n\tperform bilinear sampling\r\n\t*/\r\n\t\r\n\tCUDA_KERNEL_LOOP(index, nthreads) {\r\n\r\n\t\tconst int t = index % output_W_;\r\n\t\tconst int s = (index / output_W_) % output_H_;\r\n\t\tconst int j = (index / (output_W_ * output_H_)) % C;\r\n\t\tconst int i = index / (output_W_ * output_H_ * C);\r\n\r\n\t\tconst Dtype* curInputGridData = input_grid_data + (output_H_ * output_W_ * 2) * i;\r\n\t\tconst int row_idx = output_W_ * s + t;\r\n\r\n\t  \t//const Dtype px = coordinates[row_idx * 2];\r\n\t  \t//const Dtype py = coordinates[row_idx * 2 + 1];\r\n\r\n\t  \tconst int V_offset = index;\r\n\r\n\t  \tV[V_offset] = (Dtype)0.;\r\n\r\n\t  \tconst Dtype x = curInputGridData[(output_H_ * output_W_)+row_idx];\r\n\t  \tconst Dtype y = curInputGridData[row_idx];\r\n\r\n\t  \tint m, n; Dtype w;\r\n\t  \tconst Dtype* pic = U + i * (C * H * W) + j * (H * W);\r\n\r\n\t  \tm = floor(x); n = floor(y); w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (x - m)) * (1 - (y - n));\r\n\t  \t\tV[V_offset] += w * pic[m * W + n];\r\n\t  \t}\r\n\r\n\t  \tm = floor(x) + 1; n = floor(y); w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (m - x)) * (1 - (y - n));\r\n\t  \t\tV[V_offset] += w * pic[m * W + n];\r\n\t  \t}\r\n\r\n\t  \tm = floor(x); n = floor(y) + 1; w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (x - m)) * (1 - (n - y));\r\n\t  \t\tV[V_offset] += w * pic[m * W + n];\r\n\t  \t}\r\n\r\n\t  \tm = floor(x) + 1; n = floor(y) + 1; w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (m - x)) * (1 - (n - y));\r\n\t  \t\tV[V_offset] += w * pic[m * W + n];\r\n\t  \t}\r\n  }\r\n}\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::Forward_gpu(\r\n    const vector<Blob<Dtype>*>& bottom, const vector<Blob<Dtype>*>& top) {\r\n\r\n\tstring prefix = \"FlowTransformerLayer::Forward_gpu::\\t\";\r\n\r\n\tconst Dtype* U = bottom[0]->gpu_data();\r\n\tconst Dtype* flows = bottom[1]->gpu_data();\r\n\t\r\n\tconst Dtype* output_grid_data = output_grid.gpu_data();\r\n\t\r\n\tDtype* full_theta_data = full_theta.mutable_gpu_data();\r\n\tDtype* input_grid_data = input_grid.mutable_gpu_data();\r\n\tDtype* V = top[0]->mutable_gpu_data();\r\n\r\n\tcaffe_gpu_set(input_grid.count(), (Dtype)0, input_grid_data);\r\n\tcaffe_gpu_set(top[0]->count(), (Dtype)0, V);\r\n\t\r\n\t// compute full_theta\r\n\t/*\r\n\tint k = 0; \r\n\tconst int num_threads = N;\r\n\tfor(int i=0; i<6; ++i) {\r\n\t\tif(is_pre_defined_theta[i]) {\r\n\t\t\tset_value_to_constant<Dtype><<<CAFFE_GET_BLOCKS(num_threads), CAFFE_CUDA_NUM_THREADS>>>( \r\n\t\t\t\tnum_threads, pre_defined_theta[i], 6, i, full_theta_data);\r\n\t\t\t//std::cout << \"Setting value \" << pre_defined_theta[i] << \" to \"<< i << \r\n\t\t\t//\t\"/6 of full_theta_data\" << std::endl;\r\n\t\t} else {\r\n\t\t\tcopy_values<Dtype><<<CAFFE_GET_BLOCKS(num_threads), CAFFE_CUDA_NUM_THREADS>>>(num_threads, \r\n\t\t\t\t6 - pre_defined_count, k, theta, 6, i, full_theta_data);\r\n\t\t\t//std::cout << \"Copying \" << k << \"/\" << 6 - pre_defined_count << \" of theta to \" \r\n\t\t\t//\t<< i << \"/6 of full_theta_data\" << std::endl;\r\n\t\t\t++ k;\r\n\t\t}\r\n\t}\r\n\t*/\r\n\r\n\t// compute input_grid_data\r\n\r\n\t/*\r\n\tfor(int i = 0; i < N; ++i) {\r\n\t\t\r\n\t\tcaffe_gpu_gemm<Dtype>(CblasNoTrans, CblasTrans, output_H_ * output_W_, 2, 3, (Dtype)1.,\r\n\t\t\t\toutput_grid_data, full_theta_data + 6 * i, (Dtype)0.,\r\n\t\t\t\tinput_grid_data + (output_H_ * output_W_ * 2) * i);\r\n\t}\r\n\t*/\r\n\r\n\t//calc offset\r\n\tcaffe_gpu_add(input_grid.count(),output_grid_data,flows,input_grid_data);\r\n\r\n\tconst int nthreads = N * C * output_H_ * output_W_;\r\n\r\n\tFlowTransformerForwardGPU<Dtype><<<CAFFE_GET_BLOCKS(nthreads),\r\n\t      CAFFE_CUDA_NUM_THREADS>>>(nthreads, N, C, output_H_, output_W_, H, W, input_grid_data, U, V);\r\n}\r\n\r\ntemplate <typename Dtype>\r\n__global__ void FlowTransformerBackwardGPU_dTheta(const int nthreads, int C, //rename since we are not calculating dTheta any more\r\n\t\tint output_H_, int output_W_, int H, int W,\r\n\t\tconst Dtype* input_grid_data, const Dtype* dV_array, const Dtype* U_array,  \r\n\t\tDtype* flow_diff) {\r\n\t\r\n\tCUDA_KERNEL_LOOP(index, nthreads) {\r\n\r\n\t\tconst int t = index % output_W_;\r\n\t\tconst int s = (index / output_W_) % output_H_;\r\n\t\tconst int j = (index / (output_W_ * output_H_)) % C;\r\n\t\tconst int i = index / (output_W_ * output_H_ * C);\r\n\r\n\t\tconst Dtype* curInputGrid = &input_grid_data[(output_H_ * output_W_ * 2) * i];\r\n\t\tDtype* curFlowDiff = &flow_diff[(output_H_ * output_W_ * 2) * i];\r\n\r\n\t\tconst Dtype px = curInputGrid[(output_W_ * output_H_) + (s*output_W_) + t];\r\n\t\tconst Dtype py = curInputGrid[(s*output_W_) + t];\r\n\t\t\r\n\t\tDtype delta_dpx = (Dtype)0.;\r\n\t\tDtype delta_dpy = (Dtype)0.;\r\n\r\n\t\tconst Dtype x = px;\r\n\t\tconst Dtype y = py;\r\n\t\tconst int dV_offset = index;\r\n\t\tconst Dtype dV = dV_array[dV_offset];\r\n\r\n\t\tint m, n; \r\n\t\tconst Dtype* U = U_array + i * (C * H * W) + j * (H * W);\r\n\r\n\t\t// left-bottom neighbor\r\n\t\tm = floor(x); n = floor(y); \r\n\t\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\t\tdelta_dpx -= (1 - (y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\tdelta_dpy -= (1 - (x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t}\r\n\t\t\r\n\t\t// left-top neighbor\r\n\t\tm = floor(x); n = floor(y) + 1; \r\n\t\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\t\tdelta_dpx -= (1 - (n - y)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\tdelta_dpy += (1 - (x - m)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t}\r\n\r\n\t\t// right-bottom neighbor\r\n\t\tm = floor(x) + 1; n = floor(y); \r\n\t\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\t\tdelta_dpx += (1 - (y - n)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\tdelta_dpy -= (1 - (m - x)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t}\r\n\t\t\r\n\t\t// right-top neighbor\r\n\t\tm = floor(x) + 1; n = floor(y) + 1; \r\n\t\tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t\t\tdelta_dpx += (1 - (n - y)) * U[m * W + n] * dV;// * H / 2;\r\n\t\t\tdelta_dpy += (1 - (m - x)) * U[m * W + n] * dV;// * W / 2;\r\n\t\t}\r\n\t\t\r\n\t\t//set flow delta\r\n\t\tcurFlowDiff[(output_W_ * output_H_) + (s*output_W_) + t] += delta_dpx;\r\n\t\tcurFlowDiff[(s*output_W_) + t] += delta_dpy;\r\n\r\n\t\t/*\r\n\t\tint idx = j * (output_H_ * output_W_) + s * output_W_ + t;\r\n\t\t\r\n\t\tdTheta_tmp_diff[(6 * i) * (output_H_ * output_W_ * C) + idx] += delta_dpx * (s * 1.0 / output_H_ * 2 - 1);\r\n\t\tdTheta_tmp_diff[(6 * i + 1) * (output_H_ * output_W_ * C) + idx] += delta_dpx * (t * 1.0 / output_W_ * 2 - 1);\r\n\t\tdTheta_tmp_diff[(6 * i + 2) * (output_H_ * output_W_ * C) + idx] += delta_dpx;\r\n\t\tdTheta_tmp_diff[(6 * i + 3) * (output_H_ * output_W_ * C) + idx] += delta_dpy * (s * 1.0 / output_H_ * 2 - 1);\r\n\t\tdTheta_tmp_diff[(6 * i + 4) * (output_H_ * output_W_ * C) + idx] += delta_dpy * (t * 1.0 / output_W_ * 2 - 1);\r\n\t\tdTheta_tmp_diff[(6 * i + 5) * (output_H_ * output_W_ * C) + idx] += delta_dpy;\r\n\t\t*/\r\n\t}\r\n}\r\n\r\ntemplate <typename Dtype>\r\n__global__ void FlowTransformerBackwardGPU_dU(const int nthreads, const int C, \r\n\tconst int W,  const int H, const int output_H_, const int output_W_, \r\n\tconst Dtype* input_grid_data, const Dtype* dV, Dtype* dU) {\r\n\t//remove this in the future\r\n\tCUDA_KERNEL_LOOP(index, nthreads) {\r\n\r\n\t\tconst int t = index % output_W_;\r\n\t\tconst int s = (index / output_W_) % output_H_;\r\n\t\tconst int j = (index / (output_W_ * output_H_)) % C;\r\n\t\tconst int i = index / (output_W_ * output_H_ * C);\r\n\r\n\t\tconst Dtype* coordinates = input_grid_data + (output_H_ * output_W_ * 2) * i;\r\n\t\tconst int row_idx = output_W_ * s + t;\r\n\r\n\t  \tconst Dtype px = coordinates[row_idx * 2];\r\n\t  \tconst Dtype py = coordinates[row_idx * 2 + 1];\r\n\r\n\t  \tconst int V_offset = index;\r\n\r\n\t  \tconst Dtype x = (px + 1) / 2 * H;\r\n\t  \tconst Dtype y = (py + 1) / 2 * W;\r\n\r\n\t  \tint m, n; Dtype w;\r\n\t  \tDtype* pic = dU + i * (C * H * W) + j * (H * W);\r\n\r\n\t  \tm = floor(x); n = floor(y); w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (x - m)) * (1 - (y - n));\r\n\t\t\tcaffe_gpu_atomic_add(w * dV[V_offset], pic + (m * W + n));\r\n\t  \t}\r\n\r\n\t  \tm = floor(x) + 1; n = floor(y); w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (m - x)) * (1 - (y - n));\r\n\t\t\tcaffe_gpu_atomic_add(w * dV[V_offset], pic + (m * W + n));\r\n\t  \t}\r\n\r\n\t  \tm = floor(x); n = floor(y) + 1; w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (x - m)) * (1 - (n - y));\r\n\t\t\tcaffe_gpu_atomic_add(w * dV[V_offset], pic + (m * W + n));\r\n\t  \t}\r\n\r\n\t  \tm = floor(x) + 1; n = floor(y) + 1; w = 0;\r\n\t  \tif(m >= 0 && m < H && n >= 0 && n < W) {\r\n\t  \t\tw = (1 - (m - x)) * (1 - (n - y));\r\n\t\t\tcaffe_gpu_atomic_add(w * dV[V_offset], pic + (m * W + n));\r\n\t  \t}\r\n\t}\r\n}\r\n\r\ntemplate <typename Dtype>\r\nvoid FlowTransformerLayer<Dtype>::Backward_gpu(const vector<Blob<Dtype>*>& top,\r\n    const vector<bool>& propagate_down, const vector<Blob<Dtype>*>& bottom) {\r\n\r\n\tstring prefix = \"FlowTransformerLayer::Backward_GPU::\\t\";\r\n\r\n\tconst Dtype* dV = top[0]->gpu_diff();\r\n\tDtype* input_grid_data = input_grid.mutable_gpu_data();\r\n\tconst Dtype* output_grid_data = output_grid.gpu_data(); // remove if you don't need to recalc the input grid\r\n\tconst Dtype* U = bottom[0]->gpu_data();\r\n\r\n\tconst Dtype* flow = bottom[1]->gpu_data(); // remove if you don't need to recalc the input grid\r\n\tDtype* flow_diff = bottom[1]->mutable_gpu_diff();\r\n\r\n\t//Dtype* dFull_theta = full_theta.mutable_gpu_diff();\r\n\t//Dtype* dTheta = bottom[1]->mutable_gpu_diff();\r\n\t//Dtype* dTheta_tmp_diff = dTheta_tmp.mutable_gpu_diff();\r\n\r\n\tcaffe_gpu_set(bottom[1]->count(), (Dtype)0., flow_diff);\r\n\r\n\t//calculate flow offsets\r\n\t//assuming blob data is not preserved between forward and backward passes, recalc\r\n\t//caffe_gpu_add(input_grid.count(),output_grid_data,flow,input_grid_data);\r\n\r\n\tconst int nthreads = N * C * output_H_ * output_W_;\r\n\tFlowTransformerBackwardGPU_dTheta<Dtype><<<CAFFE_GET_BLOCKS(nthreads),\r\n\t\t\tCAFFE_CUDA_NUM_THREADS>>>(nthreads, C, output_H_, output_W_, H, W, input_grid_data,\r\n\t\t\t\t\tdV, U, flow_diff);\r\n\r\n\t//Dtype* all_ones_2_data = all_ones_2.mutable_gpu_data();\r\n\t//caffe_gpu_set(all_ones_2.count(), (Dtype)1., all_ones_2_data);\r\n\t\r\n\t//caffe_gpu_gemm<Dtype>(CblasNoTrans, CblasNoTrans, full_theta.count(), 1, output_H_ * output_W_ * C, \r\n\t//\t\t(Dtype)1., dTheta_tmp_diff, all_ones_2_data, (Dtype)0., dFull_theta);\r\n\t\t\t\r\n\t/*const Dtype* db_dFull_theta = full_theta.cpu_diff();\r\n\tfor(int i=0; i<full_theta.count(); ++i) {\r\n\t\tstd::cout << db_dFull_theta[i] << \" \";\r\n\t}\r\n\tstd::cout<<std::endl;*/\r\n\t\r\n\t/*\t\t\r\n\tint k = 0;\r\n\tconst int num_threads = N;\r\n\tfor(int i=0; i<6; ++i) {\r\n\t\tif(!is_pre_defined_theta[i]) {\r\n\t\t\tcopy_values<Dtype><<<CAFFE_GET_BLOCKS(num_threads), CAFFE_CUDA_NUM_THREADS>>>(num_threads, \r\n\t\t\t\t6, i, dFull_theta, 6 - pre_defined_count, k, dTheta);\r\n\t\t\t//std::cout << \"Copying \" << i << \"/6 of dFull_theta to \" << k << \"/\" << \r\n\t\t\t//\t6 - pre_defined_count << \" of dTheta\" << std::endl;\r\n\t\t\t++ k;\r\n\t\t}\r\n\t}\r\n\t*/\r\n\t\r\n\t/*const Dtype* db_dtheta = bottom[1]->cpu_diff();\r\n\tfor(int i=0; i<bottom[1]->count(); ++i) {\r\n\t\tstd::cout << db_dtheta[i] << \" \";\r\n\t}\r\n\tstd::cout<<std::endl;*/\r\n\t\t\t\r\n\tif(to_compute_dU_) { //this should always be false, will remove when finalized\r\n\t\tCHECK(false) << \"Jason says you should not be here! Not needed for optical flow\" << std::endl;\r\n\r\n\t\tDtype* dU = bottom[0]->mutable_gpu_diff();\r\n\t\tcaffe_gpu_set(bottom[0]->count(), (Dtype)0., dU);\r\n\t\tconst int nthreads = N * C * output_H_ * output_W_;\r\n\t\tFlowTransformerBackwardGPU_dU<Dtype><<<CAFFE_GET_BLOCKS(nthreads),\r\n\t\t\tCAFFE_CUDA_NUM_THREADS>>>(nthreads, C, W, H, output_H_, output_W_, input_grid_data, dV, dU);\r\n\t}\r\n}\r\n\r\nINSTANTIATE_LAYER_GPU_FUNCS(FlowTransformerLayer);\r\n\r\n}\t// namespace caffe\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269378784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379559","html_url":"https://github.com/apache/mxnet/issues/4392#issuecomment-269379559","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4392","id":269379559,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3OTU1OQ==","user":{"login":"weihwang","id":551333,"node_id":"MDQ6VXNlcjU1MTMzMw==","avatar_url":"https://avatars.githubusercontent.com/u/551333?v=4","gravatar_id":"","url":"https://api.github.com/users/weihwang","html_url":"https://github.com/weihwang","followers_url":"https://api.github.com/users/weihwang/followers","following_url":"https://api.github.com/users/weihwang/following{/other_user}","gists_url":"https://api.github.com/users/weihwang/gists{/gist_id}","starred_url":"https://api.github.com/users/weihwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weihwang/subscriptions","organizations_url":"https://api.github.com/users/weihwang/orgs","repos_url":"https://api.github.com/users/weihwang/repos","events_url":"https://api.github.com/users/weihwang/events{/privacy}","received_events_url":"https://api.github.com/users/weihwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:38:14Z","updated_at":"2016-12-28T19:38:39Z","author_association":"NONE","body":"1. small circle [fixed minor alignment]\r\n![mxnet-logo-sm-circle](https://cloud.githubusercontent.com/assets/551333/21528284/4fa5b582-cce6-11e6-8dec-a3a69e3b4fe7.png)\r\n\r\nExample web update:\r\n\r\n![mxnet-web-update-logo-sm-circle](https://cloud.githubusercontent.com/assets/551333/21529970/2afd3ca8-ccf2-11e6-8646-03e0ecb5b598.png)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379559/reactions","total_count":15,"+1":15,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379599","html_url":"https://github.com/apache/mxnet/issues/4392#issuecomment-269379599","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4392","id":269379599,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3OTU5OQ==","user":{"login":"weihwang","id":551333,"node_id":"MDQ6VXNlcjU1MTMzMw==","avatar_url":"https://avatars.githubusercontent.com/u/551333?v=4","gravatar_id":"","url":"https://api.github.com/users/weihwang","html_url":"https://github.com/weihwang","followers_url":"https://api.github.com/users/weihwang/followers","following_url":"https://api.github.com/users/weihwang/following{/other_user}","gists_url":"https://api.github.com/users/weihwang/gists{/gist_id}","starred_url":"https://api.github.com/users/weihwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weihwang/subscriptions","organizations_url":"https://api.github.com/users/weihwang/orgs","repos_url":"https://api.github.com/users/weihwang/repos","events_url":"https://api.github.com/users/weihwang/events{/privacy}","received_events_url":"https://api.github.com/users/weihwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:38:33Z","updated_at":"2016-12-27T20:38:33Z","author_association":"NONE","body":"2. medium circle\r\n![mxnet-logo-md-circle](https://cloud.githubusercontent.com/assets/551333/21507914/5c19a87e-cc31-11e6-9b73-13a84099c4d9.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379599/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379645","html_url":"https://github.com/apache/mxnet/issues/4392#issuecomment-269379645","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4392","id":269379645,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3OTY0NQ==","user":{"login":"weihwang","id":551333,"node_id":"MDQ6VXNlcjU1MTMzMw==","avatar_url":"https://avatars.githubusercontent.com/u/551333?v=4","gravatar_id":"","url":"https://api.github.com/users/weihwang","html_url":"https://github.com/weihwang","followers_url":"https://api.github.com/users/weihwang/followers","following_url":"https://api.github.com/users/weihwang/following{/other_user}","gists_url":"https://api.github.com/users/weihwang/gists{/gist_id}","starred_url":"https://api.github.com/users/weihwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weihwang/subscriptions","organizations_url":"https://api.github.com/users/weihwang/orgs","repos_url":"https://api.github.com/users/weihwang/repos","events_url":"https://api.github.com/users/weihwang/events{/privacy}","received_events_url":"https://api.github.com/users/weihwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:38:59Z","updated_at":"2016-12-27T20:38:59Z","author_association":"NONE","body":"3. large circle\r\n![mxnet-logo-lg-circle](https://cloud.githubusercontent.com/assets/551333/21507920/6e310174-cc31-11e6-999d-9345cb0453ba.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379666","html_url":"https://github.com/apache/mxnet/issues/4392#issuecomment-269379666","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4392","id":269379666,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3OTY2Ng==","user":{"login":"weihwang","id":551333,"node_id":"MDQ6VXNlcjU1MTMzMw==","avatar_url":"https://avatars.githubusercontent.com/u/551333?v=4","gravatar_id":"","url":"https://api.github.com/users/weihwang","html_url":"https://github.com/weihwang","followers_url":"https://api.github.com/users/weihwang/followers","following_url":"https://api.github.com/users/weihwang/following{/other_user}","gists_url":"https://api.github.com/users/weihwang/gists{/gist_id}","starred_url":"https://api.github.com/users/weihwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weihwang/subscriptions","organizations_url":"https://api.github.com/users/weihwang/orgs","repos_url":"https://api.github.com/users/weihwang/repos","events_url":"https://api.github.com/users/weihwang/events{/privacy}","received_events_url":"https://api.github.com/users/weihwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:39:11Z","updated_at":"2016-12-27T20:39:11Z","author_association":"NONE","body":"4. fold\r\n![mxnet-logo-fold](https://cloud.githubusercontent.com/assets/551333/21507923/759a2cf6-cc31-11e6-98a0-d2de57f28f35.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379666/reactions","total_count":9,"+1":6,"-1":3,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379688","html_url":"https://github.com/apache/mxnet/issues/4392#issuecomment-269379688","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4392","id":269379688,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM3OTY4OA==","user":{"login":"weihwang","id":551333,"node_id":"MDQ6VXNlcjU1MTMzMw==","avatar_url":"https://avatars.githubusercontent.com/u/551333?v=4","gravatar_id":"","url":"https://api.github.com/users/weihwang","html_url":"https://github.com/weihwang","followers_url":"https://api.github.com/users/weihwang/followers","following_url":"https://api.github.com/users/weihwang/following{/other_user}","gists_url":"https://api.github.com/users/weihwang/gists{/gist_id}","starred_url":"https://api.github.com/users/weihwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weihwang/subscriptions","organizations_url":"https://api.github.com/users/weihwang/orgs","repos_url":"https://api.github.com/users/weihwang/repos","events_url":"https://api.github.com/users/weihwang/events{/privacy}","received_events_url":"https://api.github.com/users/weihwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:39:23Z","updated_at":"2016-12-29T00:19:58Z","author_association":"NONE","body":"5. loop\r\n![mxnet-logo-loop](https://cloud.githubusercontent.com/assets/551333/21534261/5c6f3b7a-cd19-11e6-85ca-38829ac4f25b.png)\r\n\r\nExample web update:\r\n\r\n![mxnet-web-update-logo-loop](https://cloud.githubusercontent.com/assets/551333/21529975/3d80dbf0-ccf2-11e6-95eb-1bf5606c94ff.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269379688/reactions","total_count":10,"+1":10,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269381893","html_url":"https://github.com/apache/mxnet/issues/4391#issuecomment-269381893","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4391","id":269381893,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4MTg5Mw==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T20:59:12Z","updated_at":"2016-12-27T20:59:12Z","author_association":"CONTRIBUTOR","body":"its due to each worker has different number of batches. You can kill the hanging ones","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269381893/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269381997","html_url":"https://github.com/apache/mxnet/issues/4389#issuecomment-269381997","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4389","id":269381997,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4MTk5Nw==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T21:00:14Z","updated_at":"2016-12-27T21:00:14Z","author_association":"CONTRIBUTOR","body":"0.9 will be released in a few days. Possibly tomorrow","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269381997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269386485","html_url":"https://github.com/apache/mxnet/issues/3611#issuecomment-269386485","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3611","id":269386485,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4NjQ4NQ==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T21:40:22Z","updated_at":"2016-12-27T21:40:22Z","author_association":"CONTRIBUTOR","body":"this is because you have a mxnet compiled without `dist_kvstore=1` installed system wide. you may add the following sentence before `import mxnet`\r\n\r\n```python\r\nimport sys\r\nsys.path.insert(0, \"your/mxnet/python/\")\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269386485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269387003","html_url":"https://github.com/apache/mxnet/issues/3978#issuecomment-269387003","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3978","id":269387003,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4NzAwMw==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T21:45:07Z","updated_at":"2016-12-27T21:45:07Z","author_association":"CONTRIBUTOR","body":"libcudnn.so is not copied in default. i think you can put it on the same folder as libmxnet.so. so it will be synced to all worker machines","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269387003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269387804","html_url":"https://github.com/apache/mxnet/issues/4391#issuecomment-269387804","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4391","id":269387804,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4NzgwNA==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T21:52:27Z","updated_at":"2016-12-27T21:52:27Z","author_association":"CONTRIBUTOR","body":"tracked on https://github.com/dmlc/mxnet/projects/3","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269387804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269388327","html_url":"https://github.com/apache/mxnet/issues/4388#issuecomment-269388327","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4388","id":269388327,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4ODMyNw==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T21:57:01Z","updated_at":"2016-12-27T21:57:06Z","author_association":"CONTRIBUTOR","body":"@mli @tqchen I thought we fixed this","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269388327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269388396","html_url":"https://github.com/apache/mxnet/issues/4388#issuecomment-269388396","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4388","id":269388396,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4ODM5Ng==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T21:57:34Z","updated_at":"2016-12-27T21:57:34Z","author_association":"CONTRIBUTOR","body":"will adding a `round` solve this problem?\r\n\r\n```c++\r\nstatic_cast<size_t>(round(static_cast<double>(size)/num_servers*(i+1))) -\r\n              static_cast<size_t>(round(static_cast<double>(size)/num_servers*i));\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269388396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269389894","html_url":"https://github.com/apache/mxnet/pull/4373#issuecomment-269389894","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4373","id":269389894,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTM4OTg5NA==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-27T22:11:15Z","updated_at":"2016-12-27T22:11:15Z","author_association":"CONTRIBUTOR","body":"can you please add a link in `how_to/perf.md` to mention NNPack can also accelerate CPU performance?\r\n\r\nalso do you have ec2 c4.8xlarge numbers? and have you tried arm, e.g. android or Raspberry Pi ?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269389894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269403559","html_url":"https://github.com/apache/mxnet/issues/1652#issuecomment-269403559","issue_url":"https://api.github.com/repos/apache/mxnet/issues/1652","id":269403559,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQwMzU1OQ==","user":{"login":"xiuliren","id":7651573,"node_id":"MDQ6VXNlcjc2NTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/7651573?v=4","gravatar_id":"","url":"https://api.github.com/users/xiuliren","html_url":"https://github.com/xiuliren","followers_url":"https://api.github.com/users/xiuliren/followers","following_url":"https://api.github.com/users/xiuliren/following{/other_user}","gists_url":"https://api.github.com/users/xiuliren/gists{/gist_id}","starred_url":"https://api.github.com/users/xiuliren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiuliren/subscriptions","organizations_url":"https://api.github.com/users/xiuliren/orgs","repos_url":"https://api.github.com/users/xiuliren/repos","events_url":"https://api.github.com/users/xiuliren/events{/privacy}","received_events_url":"https://api.github.com/users/xiuliren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T00:38:44Z","updated_at":"2016-12-28T00:38:44Z","author_association":"CONTRIBUTOR","body":"@rongrongxiangxin I only checked the code, have not got a chance to really test it!","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269403559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269410159","html_url":"https://github.com/apache/mxnet/pull/4373#issuecomment-269410159","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4373","id":269410159,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQxMDE1OQ==","user":{"login":"tornadomeet","id":5860892,"node_id":"MDQ6VXNlcjU4NjA4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5860892?v=4","gravatar_id":"","url":"https://api.github.com/users/tornadomeet","html_url":"https://github.com/tornadomeet","followers_url":"https://api.github.com/users/tornadomeet/followers","following_url":"https://api.github.com/users/tornadomeet/following{/other_user}","gists_url":"https://api.github.com/users/tornadomeet/gists{/gist_id}","starred_url":"https://api.github.com/users/tornadomeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tornadomeet/subscriptions","organizations_url":"https://api.github.com/users/tornadomeet/orgs","repos_url":"https://api.github.com/users/tornadomeet/repos","events_url":"https://api.github.com/users/tornadomeet/events{/privacy}","received_events_url":"https://api.github.com/users/tornadomeet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T01:33:05Z","updated_at":"2016-12-28T01:33:05Z","author_association":"CONTRIBUTOR","body":" @mli i found the newest `how_to/perf.md` is in master branch, so shall i change this pr to master branch instead of nnvm branch?  \r\n i have no ec2 c4.8xlarge, i test on my linux server with 256G memory,  cat /proc/cpuinfo :\r\n```\r\nprocessor   : 0  \r\nvendor_id   : GenuineIntel\r\ncpu family  : 6  \r\nmodel       : 63 \r\nmodel name  : Intel(R) Xeon(R) CPU E5-2670 v3 @ 2.30GHz\r\nstepping    : 2  \r\nmicrocode   : 0x31 \r\ncpu MHz     : 1200.312\r\ncache size  : 30720 KB\r\nphysical id : 0\r\nsiblings    : 24 \r\ncore id     : 0  \r\ncpu cores   : 12 \r\napicid      : 0  \r\ninitial apicid  : 0  \r\nfpu     : yes\r\nfpu_exception   : yes\r\ncpuid level : 15 \r\nwp      : yes\r\nflags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm ida arat epb pln pts dtherm tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid cqm xsaveopt cqm_llc cqm_occup_llc\r\nbogomips    : 4599.79\r\nclflush size    : 64 \r\ncache_alignment : 64 \r\naddress sizes   : 46 bits physical, 48 bits virtual\r\npower management:\r\n```\r\n\r\ni'm not familiar with ARM or Android, @clcarwin would you help test this nnpack on android? thanks.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269410159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269414960","html_url":"https://github.com/apache/mxnet/issues/4389#issuecomment-269414960","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4389","id":269414960,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQxNDk2MA==","user":{"login":"itsarbit","id":491753,"node_id":"MDQ6VXNlcjQ5MTc1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/491753?v=4","gravatar_id":"","url":"https://api.github.com/users/itsarbit","html_url":"https://github.com/itsarbit","followers_url":"https://api.github.com/users/itsarbit/followers","following_url":"https://api.github.com/users/itsarbit/following{/other_user}","gists_url":"https://api.github.com/users/itsarbit/gists{/gist_id}","starred_url":"https://api.github.com/users/itsarbit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itsarbit/subscriptions","organizations_url":"https://api.github.com/users/itsarbit/orgs","repos_url":"https://api.github.com/users/itsarbit/repos","events_url":"https://api.github.com/users/itsarbit/events{/privacy}","received_events_url":"https://api.github.com/users/itsarbit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T02:29:29Z","updated_at":"2016-12-28T02:29:29Z","author_association":"NONE","body":"That's definitely a good news for us! Thanks.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269414960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269417362","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269417362","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269417362,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQxNzM2Mg==","user":{"login":"tornadomeet","id":5860892,"node_id":"MDQ6VXNlcjU4NjA4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5860892?v=4","gravatar_id":"","url":"https://api.github.com/users/tornadomeet","html_url":"https://github.com/tornadomeet","followers_url":"https://api.github.com/users/tornadomeet/followers","following_url":"https://api.github.com/users/tornadomeet/following{/other_user}","gists_url":"https://api.github.com/users/tornadomeet/gists{/gist_id}","starred_url":"https://api.github.com/users/tornadomeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tornadomeet/subscriptions","organizations_url":"https://api.github.com/users/tornadomeet/orgs","repos_url":"https://api.github.com/users/tornadomeet/repos","events_url":"https://api.github.com/users/tornadomeet/events{/privacy}","received_events_url":"https://api.github.com/users/tornadomeet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T02:55:37Z","updated_at":"2016-12-28T02:55:37Z","author_association":"CONTRIBUTOR","body":"great. the op which resize feature map using bilinear interpolation is very useful in many version task.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269417362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269419513","html_url":"https://github.com/apache/mxnet/pull/4373#issuecomment-269419513","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4373","id":269419513,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQxOTUxMw==","user":{"login":"clcarwin","id":808973,"node_id":"MDQ6VXNlcjgwODk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/808973?v=4","gravatar_id":"","url":"https://api.github.com/users/clcarwin","html_url":"https://github.com/clcarwin","followers_url":"https://api.github.com/users/clcarwin/followers","following_url":"https://api.github.com/users/clcarwin/following{/other_user}","gists_url":"https://api.github.com/users/clcarwin/gists{/gist_id}","starred_url":"https://api.github.com/users/clcarwin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clcarwin/subscriptions","organizations_url":"https://api.github.com/users/clcarwin/orgs","repos_url":"https://api.github.com/users/clcarwin/repos","events_url":"https://api.github.com/users/clcarwin/events{/privacy}","received_events_url":"https://api.github.com/users/clcarwin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T03:23:46Z","updated_at":"2016-12-28T03:23:46Z","author_association":"CONTRIBUTOR","body":"I'm busy these days. Maybe I can test it next week on android.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269419513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269420621","html_url":"https://github.com/apache/mxnet/pull/4373#issuecomment-269420621","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4373","id":269420621,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQyMDYyMQ==","user":{"login":"tornadomeet","id":5860892,"node_id":"MDQ6VXNlcjU4NjA4OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5860892?v=4","gravatar_id":"","url":"https://api.github.com/users/tornadomeet","html_url":"https://github.com/tornadomeet","followers_url":"https://api.github.com/users/tornadomeet/followers","following_url":"https://api.github.com/users/tornadomeet/following{/other_user}","gists_url":"https://api.github.com/users/tornadomeet/gists{/gist_id}","starred_url":"https://api.github.com/users/tornadomeet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tornadomeet/subscriptions","organizations_url":"https://api.github.com/users/tornadomeet/orgs","repos_url":"https://api.github.com/users/tornadomeet/repos","events_url":"https://api.github.com/users/tornadomeet/events{/privacy}","received_events_url":"https://api.github.com/users/tornadomeet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T03:38:44Z","updated_at":"2016-12-28T03:38:44Z","author_association":"CONTRIBUTOR","body":"@clcarwin  thanks. it's better test with `batch-size >= 1`.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269420621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269426582","html_url":"https://github.com/apache/mxnet/issues/4391#issuecomment-269426582","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4391","id":269426582,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQyNjU4Mg==","user":{"login":"amithr1","id":11315510,"node_id":"MDQ6VXNlcjExMzE1NTEw","avatar_url":"https://avatars.githubusercontent.com/u/11315510?v=4","gravatar_id":"","url":"https://api.github.com/users/amithr1","html_url":"https://github.com/amithr1","followers_url":"https://api.github.com/users/amithr1/followers","following_url":"https://api.github.com/users/amithr1/following{/other_user}","gists_url":"https://api.github.com/users/amithr1/gists{/gist_id}","starred_url":"https://api.github.com/users/amithr1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amithr1/subscriptions","organizations_url":"https://api.github.com/users/amithr1/orgs","repos_url":"https://api.github.com/users/amithr1/repos","events_url":"https://api.github.com/users/amithr1/events{/privacy}","received_events_url":"https://api.github.com/users/amithr1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T05:07:27Z","updated_at":"2016-12-28T05:07:27Z","author_association":"NONE","body":"I tried commenting out Engine::Get()->WaitForAll() in destructor of kvstore_dist.h. That seemed to help..after trying to even out the batches to the two workers by choosing number of images to be processed.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269426582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269427199","html_url":"https://github.com/apache/mxnet/issues/4395#issuecomment-269427199","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4395","id":269427199,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQyNzE5OQ==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T05:15:56Z","updated_at":"2016-12-28T05:15:56Z","author_association":"CONTRIBUTOR","body":"use a smaller learning rate and try again.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269427199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269427617","html_url":"https://github.com/apache/mxnet/issues/4391#issuecomment-269427617","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4391","id":269427617,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQyNzYxNw==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T05:21:50Z","updated_at":"2016-12-28T05:21:50Z","author_association":"CONTRIBUTOR","body":"delete waitforall could be dangerous. a better method is having a data iterator wrapper so that it outputs exactly `num_examples/batch_size/kv.num_workers` batches.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269427617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269428784","html_url":"https://github.com/apache/mxnet/issues/4396#issuecomment-269428784","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4396","id":269428784,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQyODc4NA==","user":{"login":"kevinthesun","id":15520525,"node_id":"MDQ6VXNlcjE1NTIwNTI1","avatar_url":"https://avatars.githubusercontent.com/u/15520525?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinthesun","html_url":"https://github.com/kevinthesun","followers_url":"https://api.github.com/users/kevinthesun/followers","following_url":"https://api.github.com/users/kevinthesun/following{/other_user}","gists_url":"https://api.github.com/users/kevinthesun/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinthesun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinthesun/subscriptions","organizations_url":"https://api.github.com/users/kevinthesun/orgs","repos_url":"https://api.github.com/users/kevinthesun/repos","events_url":"https://api.github.com/users/kevinthesun/events{/privacy}","received_events_url":"https://api.github.com/users/kevinthesun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T05:38:58Z","updated_at":"2016-12-28T05:38:58Z","author_association":"CONTRIBUTOR","body":"Have fixed it in the updated #4325 PR.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269428784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269431572","html_url":"https://github.com/apache/mxnet/issues/4388#issuecomment-269431572","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4388","id":269431572,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzMTU3Mg==","user":{"login":"wzl12356","id":16952500,"node_id":"MDQ6VXNlcjE2OTUyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/16952500?v=4","gravatar_id":"","url":"https://api.github.com/users/wzl12356","html_url":"https://github.com/wzl12356","followers_url":"https://api.github.com/users/wzl12356/followers","following_url":"https://api.github.com/users/wzl12356/following{/other_user}","gists_url":"https://api.github.com/users/wzl12356/gists{/gist_id}","starred_url":"https://api.github.com/users/wzl12356/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzl12356/subscriptions","organizations_url":"https://api.github.com/users/wzl12356/orgs","repos_url":"https://api.github.com/users/wzl12356/repos","events_url":"https://api.github.com/users/wzl12356/events{/privacy}","received_events_url":"https://api.github.com/users/wzl12356/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T06:15:49Z","updated_at":"2016-12-28T06:15:49Z","author_association":"CONTRIBUTOR","body":"It works.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269431572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269433075","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269433075","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269433075,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzMzA3NQ==","user":{"login":"dsqx71","id":6965929,"node_id":"MDQ6VXNlcjY5NjU5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/6965929?v=4","gravatar_id":"","url":"https://api.github.com/users/dsqx71","html_url":"https://github.com/dsqx71","followers_url":"https://api.github.com/users/dsqx71/followers","following_url":"https://api.github.com/users/dsqx71/following{/other_user}","gists_url":"https://api.github.com/users/dsqx71/gists{/gist_id}","starred_url":"https://api.github.com/users/dsqx71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsqx71/subscriptions","organizations_url":"https://api.github.com/users/dsqx71/orgs","repos_url":"https://api.github.com/users/dsqx71/repos","events_url":"https://api.github.com/users/dsqx71/events{/privacy}","received_events_url":"https://api.github.com/users/dsqx71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T06:32:55Z","updated_at":"2016-12-28T07:09:34Z","author_association":"CONTRIBUTOR","body":"@piiswrong I don't like that the name WarpOp too. However, the op is just a special case of spatial transform. The usage of the op have slight differences with that of remap, and the following three paper already named it as warp layer or warping. So I think perhaps it's proper to name it as WarpOp\r\n\r\n     Deep Feature Flow for Video Recognition\r\n     SPyNet: Spatial Pyramid Network for Optical Flow\r\n     FlowNet 2.0: Evolution of Optical Flow Estimation with Deep Networks\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269433075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269435428","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269435428","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269435428,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzNTQyOA==","user":{"login":"dsqx71","id":6965929,"node_id":"MDQ6VXNlcjY5NjU5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/6965929?v=4","gravatar_id":"","url":"https://api.github.com/users/dsqx71","html_url":"https://github.com/dsqx71","followers_url":"https://api.github.com/users/dsqx71/followers","following_url":"https://api.github.com/users/dsqx71/following{/other_user}","gists_url":"https://api.github.com/users/dsqx71/gists{/gist_id}","starred_url":"https://api.github.com/users/dsqx71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsqx71/subscriptions","organizations_url":"https://api.github.com/users/dsqx71/orgs","repos_url":"https://api.github.com/users/dsqx71/repos","events_url":"https://api.github.com/users/dsqx71/events{/privacy}","received_events_url":"https://api.github.com/users/dsqx71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T07:00:05Z","updated_at":"2016-12-28T07:00:05Z","author_association":"CONTRIBUTOR","body":"@piiswrong @tornadomeet  remap can resize image, but the op isn't allowed to do that.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269435428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269436572","html_url":"https://github.com/apache/mxnet/issues/4395#issuecomment-269436572","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4395","id":269436572,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzNjU3Mg==","user":{"login":"thesby","id":10773886,"node_id":"MDQ6VXNlcjEwNzczODg2","avatar_url":"https://avatars.githubusercontent.com/u/10773886?v=4","gravatar_id":"","url":"https://api.github.com/users/thesby","html_url":"https://github.com/thesby","followers_url":"https://api.github.com/users/thesby/followers","following_url":"https://api.github.com/users/thesby/following{/other_user}","gists_url":"https://api.github.com/users/thesby/gists{/gist_id}","starred_url":"https://api.github.com/users/thesby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thesby/subscriptions","organizations_url":"https://api.github.com/users/thesby/orgs","repos_url":"https://api.github.com/users/thesby/repos","events_url":"https://api.github.com/users/thesby/events{/privacy}","received_events_url":"https://api.github.com/users/thesby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T07:12:30Z","updated_at":"2016-12-28T07:12:30Z","author_association":"NONE","body":"Yes, you are right. The learning rate is too big.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269436572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269437321","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269437321","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269437321,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzNzMyMQ==","user":{"login":"dsqx71","id":6965929,"node_id":"MDQ6VXNlcjY5NjU5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/6965929?v=4","gravatar_id":"","url":"https://api.github.com/users/dsqx71","html_url":"https://github.com/dsqx71","followers_url":"https://api.github.com/users/dsqx71/followers","following_url":"https://api.github.com/users/dsqx71/following{/other_user}","gists_url":"https://api.github.com/users/dsqx71/gists{/gist_id}","starred_url":"https://api.github.com/users/dsqx71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsqx71/subscriptions","organizations_url":"https://api.github.com/users/dsqx71/orgs","repos_url":"https://api.github.com/users/dsqx71/repos","events_url":"https://api.github.com/users/dsqx71/events{/privacy}","received_events_url":"https://api.github.com/users/dsqx71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T07:20:37Z","updated_at":"2016-12-28T07:26:09Z","author_association":"CONTRIBUTOR","body":"@piiswrong  The difference between the two implementations is that the caffe code uses NCHW format, and it doesn't benefit from memory coalescing.  Perhaps it's not efficient.\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269437321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269437937","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269437937","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269437937,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzNzkzNw==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T07:27:27Z","updated_at":"2016-12-28T07:28:06Z","author_association":"CONTRIBUTOR","body":"@dsqx71 Do you think the speed difference will be significant compared to convolutions?\r\nConsidering convolution usually has many more channels than warp I would be surprised if warp is the bottleneck.\r\nIf the difference is <5% of a full forward/backward I think a simpler implementation with a standard data layout should be prefered.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269437937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269438274","html_url":"https://github.com/apache/mxnet/issues/4396#issuecomment-269438274","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4396","id":269438274,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzODI3NA==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T07:31:03Z","updated_at":"2016-12-28T07:31:03Z","author_association":"CONTRIBUTOR","body":"merged, thanks","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269438274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269438403","html_url":"https://github.com/apache/mxnet/issues/4388#issuecomment-269438403","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4388","id":269438403,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQzODQwMw==","user":{"login":"mli","id":421857,"node_id":"MDQ6VXNlcjQyMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/421857?v=4","gravatar_id":"","url":"https://api.github.com/users/mli","html_url":"https://github.com/mli","followers_url":"https://api.github.com/users/mli/followers","following_url":"https://api.github.com/users/mli/following{/other_user}","gists_url":"https://api.github.com/users/mli/gists{/gist_id}","starred_url":"https://api.github.com/users/mli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mli/subscriptions","organizations_url":"https://api.github.com/users/mli/orgs","repos_url":"https://api.github.com/users/mli/repos","events_url":"https://api.github.com/users/mli/events{/privacy}","received_events_url":"https://api.github.com/users/mli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T07:32:37Z","updated_at":"2016-12-28T07:32:37Z","author_association":"CONTRIBUTOR","body":"can you please create a PR to fix it?\n\nOn Tue, Dec 27, 2016 at 10:15 PM, wzl12356 <notifications@github.com> wrote:\n\n> It works.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/dmlc/mxnet/issues/4388#issuecomment-269431572>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAZv4QwlI_pmRLduM7EhWCfPo_Vz52l6ks5rMf6WgaJpZM4LWKm5>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269438403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269443876","html_url":"https://github.com/apache/mxnet/issues/4360#issuecomment-269443876","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4360","id":269443876,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0Mzg3Ng==","user":{"login":"formath","id":6040127,"node_id":"MDQ6VXNlcjYwNDAxMjc=","avatar_url":"https://avatars.githubusercontent.com/u/6040127?v=4","gravatar_id":"","url":"https://api.github.com/users/formath","html_url":"https://github.com/formath","followers_url":"https://api.github.com/users/formath/followers","following_url":"https://api.github.com/users/formath/following{/other_user}","gists_url":"https://api.github.com/users/formath/gists{/gist_id}","starred_url":"https://api.github.com/users/formath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/formath/subscriptions","organizations_url":"https://api.github.com/users/formath/orgs","repos_url":"https://api.github.com/users/formath/repos","events_url":"https://api.github.com/users/formath/events{/privacy}","received_events_url":"https://api.github.com/users/formath/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T08:29:01Z","updated_at":"2016-12-28T08:29:01Z","author_association":"CONTRIBUTOR","body":"Custom metric is instance wise. See `class CustomMetric`  and `def np` in metric.py.\r\n```\r\ndef update(self, labels, preds):\r\n        if not self._allow_extra_outputs:\r\n            check_label_shapes(labels, preds)\r\n\r\n        for pred, label in zip(preds, labels):\r\n            label = label.asnumpy()\r\n            pred = pred.asnumpy()\r\n\r\n            if pred.shape[1] == 2:\r\n                pred = pred[:, 1]\r\n\r\n            reval = self._feval(label, pred)\r\n            if isinstance(reval, tuple):\r\n                (sum_metric, num_inst) = reval\r\n                self.sum_metric += sum_metric\r\n                self.num_inst += num_inst\r\n            else:\r\n                self.sum_metric += reval\r\n                self.num_inst += 1\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269443876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269444179","html_url":"https://github.com/apache/mxnet/pull/4375#issuecomment-269444179","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4375","id":269444179,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0NDE3OQ==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T08:32:18Z","updated_at":"2016-12-28T08:32:18Z","author_association":"CONTRIBUTOR","body":"I confirmed the new code converged in single GPU. however multi GPU will get L1Loss to nan quickly (less than 100 iterations). I need help. @zhreshold @piiswrong ","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269444179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269444891","html_url":"https://github.com/apache/mxnet/issues/4355#issuecomment-269444891","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4355","id":269444891,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0NDg5MQ==","user":{"login":"formath","id":6040127,"node_id":"MDQ6VXNlcjYwNDAxMjc=","avatar_url":"https://avatars.githubusercontent.com/u/6040127?v=4","gravatar_id":"","url":"https://api.github.com/users/formath","html_url":"https://github.com/formath","followers_url":"https://api.github.com/users/formath/followers","following_url":"https://api.github.com/users/formath/following{/other_user}","gists_url":"https://api.github.com/users/formath/gists{/gist_id}","starred_url":"https://api.github.com/users/formath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/formath/subscriptions","organizations_url":"https://api.github.com/users/formath/orgs","repos_url":"https://api.github.com/users/formath/repos","events_url":"https://api.github.com/users/formath/events{/privacy}","received_events_url":"https://api.github.com/users/formath/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T08:38:23Z","updated_at":"2016-12-28T08:38:23Z","author_association":"CONTRIBUTOR","body":"The input and output shape is checked when constructing symbol and don't be changed afterward. The reshape is mostly used in inner implementation for cuda matrix calculation. But I'm not sure about that.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269444891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269445428","html_url":"https://github.com/apache/mxnet/pull/4401#issuecomment-269445428","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4401","id":269445428,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0NTQyOA==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T08:43:46Z","updated_at":"2016-12-28T08:43:46Z","author_association":"CONTRIBUTOR","body":"The script is still on nnvm branch and not merged to master yet.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269445428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269445891","html_url":"https://github.com/apache/mxnet/issues/4273#issuecomment-269445891","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4273","id":269445891,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0NTg5MQ==","user":{"login":"formath","id":6040127,"node_id":"MDQ6VXNlcjYwNDAxMjc=","avatar_url":"https://avatars.githubusercontent.com/u/6040127?v=4","gravatar_id":"","url":"https://api.github.com/users/formath","html_url":"https://github.com/formath","followers_url":"https://api.github.com/users/formath/followers","following_url":"https://api.github.com/users/formath/following{/other_user}","gists_url":"https://api.github.com/users/formath/gists{/gist_id}","starred_url":"https://api.github.com/users/formath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/formath/subscriptions","organizations_url":"https://api.github.com/users/formath/orgs","repos_url":"https://api.github.com/users/formath/repos","events_url":"https://api.github.com/users/formath/events{/privacy}","received_events_url":"https://api.github.com/users/formath/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T08:47:32Z","updated_at":"2016-12-28T08:47:32Z","author_association":"CONTRIBUTOR","body":"I think it don't support that because the inner struct or class in c++ can't support composed operator. Maybe you should add a new operator. Then copy and merge the existing operators's forward and backward code to the new one.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269445891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269446681","html_url":"https://github.com/apache/mxnet/issues/4195#issuecomment-269446681","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4195","id":269446681,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0NjY4MQ==","user":{"login":"formath","id":6040127,"node_id":"MDQ6VXNlcjYwNDAxMjc=","avatar_url":"https://avatars.githubusercontent.com/u/6040127?v=4","gravatar_id":"","url":"https://api.github.com/users/formath","html_url":"https://github.com/formath","followers_url":"https://api.github.com/users/formath/followers","following_url":"https://api.github.com/users/formath/following{/other_user}","gists_url":"https://api.github.com/users/formath/gists{/gist_id}","starred_url":"https://api.github.com/users/formath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/formath/subscriptions","organizations_url":"https://api.github.com/users/formath/orgs","repos_url":"https://api.github.com/users/formath/repos","events_url":"https://api.github.com/users/formath/events{/privacy}","received_events_url":"https://api.github.com/users/formath/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T08:54:25Z","updated_at":"2016-12-28T08:54:25Z","author_association":"CONTRIBUTOR","body":"Can you set the batch_size=1 and retry?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269446681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269449441","html_url":"https://github.com/apache/mxnet/issues/3930#issuecomment-269449441","issue_url":"https://api.github.com/repos/apache/mxnet/issues/3930","id":269449441,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ0OTQ0MQ==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T09:17:32Z","updated_at":"2016-12-28T09:17:32Z","author_association":"MEMBER","body":"@karishmamalkan Still in progress, decide to add also the example of batchnorm. Will finish it after I finish the PQE. You can view some codes here. https://github.com/ML-HK/mxnet/blob/master/python/mxnet/recurrent.py\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269449441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269450670","html_url":"https://github.com/apache/mxnet/pull/4375#issuecomment-269450670","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4375","id":269450670,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ1MDY3MA==","user":{"login":"zhreshold","id":3307514,"node_id":"MDQ6VXNlcjMzMDc1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3307514?v=4","gravatar_id":"","url":"https://api.github.com/users/zhreshold","html_url":"https://github.com/zhreshold","followers_url":"https://api.github.com/users/zhreshold/followers","following_url":"https://api.github.com/users/zhreshold/following{/other_user}","gists_url":"https://api.github.com/users/zhreshold/gists{/gist_id}","starred_url":"https://api.github.com/users/zhreshold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhreshold/subscriptions","organizations_url":"https://api.github.com/users/zhreshold/orgs","repos_url":"https://api.github.com/users/zhreshold/repos","events_url":"https://api.github.com/users/zhreshold/events{/privacy}","received_events_url":"https://api.github.com/users/zhreshold/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T09:27:31Z","updated_at":"2016-12-28T09:28:40Z","author_association":"MEMBER","body":"Could you try use small lr for the first epoch, and then load the model from epoch 1 and use a normal lr, to see if it converges.\r\nFor compatibility, batchnorm is not used, so the gradients are not stable especially in the very beginning phase.\r\nA lr scheduler have to be prepared for this situation, which is on schedule as well.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269450670/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269462884","html_url":"https://github.com/apache/mxnet/pull/4390#issuecomment-269462884","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4390","id":269462884,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ2Mjg4NA==","user":{"login":"sxjscience","id":5178350,"node_id":"MDQ6VXNlcjUxNzgzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5178350?v=4","gravatar_id":"","url":"https://api.github.com/users/sxjscience","html_url":"https://github.com/sxjscience","followers_url":"https://api.github.com/users/sxjscience/followers","following_url":"https://api.github.com/users/sxjscience/following{/other_user}","gists_url":"https://api.github.com/users/sxjscience/gists{/gist_id}","starred_url":"https://api.github.com/users/sxjscience/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sxjscience/subscriptions","organizations_url":"https://api.github.com/users/sxjscience/orgs","repos_url":"https://api.github.com/users/sxjscience/repos","events_url":"https://api.github.com/users/sxjscience/events{/privacy}","received_events_url":"https://api.github.com/users/sxjscience/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T11:11:18Z","updated_at":"2017-01-01T05:57:54Z","author_association":"MEMBER","body":"~~Could we reuse the spatial transformer? Seems not but I'm not very sure.~~\r\n@dsqx71 I find that in CuDNN V5, we have `cudnnSpatialTfSamplerForward` and `cudnnSpatialTfSamplerBackward`. Could we use these two functions?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269462884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269466448","html_url":"https://github.com/apache/mxnet/pull/4375#issuecomment-269466448","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4375","id":269466448,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ2NjQ0OA==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T11:45:54Z","updated_at":"2016-12-28T11:45:54Z","author_association":"CONTRIBUTOR","body":"@zhreshold  your suggestion works. let me update README a bit to put this instruction and resubmit the patch.","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269466448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269466511","html_url":"https://github.com/apache/mxnet/issues/4404#issuecomment-269466511","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4404","id":269466511,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ2NjUxMQ==","user":{"login":"howard0su","id":766788,"node_id":"MDQ6VXNlcjc2Njc4OA==","avatar_url":"https://avatars.githubusercontent.com/u/766788?v=4","gravatar_id":"","url":"https://api.github.com/users/howard0su","html_url":"https://github.com/howard0su","followers_url":"https://api.github.com/users/howard0su/followers","following_url":"https://api.github.com/users/howard0su/following{/other_user}","gists_url":"https://api.github.com/users/howard0su/gists{/gist_id}","starred_url":"https://api.github.com/users/howard0su/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howard0su/subscriptions","organizations_url":"https://api.github.com/users/howard0su/orgs","repos_url":"https://api.github.com/users/howard0su/repos","events_url":"https://api.github.com/users/howard0su/events{/privacy}","received_events_url":"https://api.github.com/users/howard0su/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T11:46:29Z","updated_at":"2016-12-28T11:46:29Z","author_association":"CONTRIBUTOR","body":"try this:\r\nADD_LDFLAGS = -L/opt/openblas -L/opt/openblas/lib\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269466511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269468256","html_url":"https://github.com/apache/mxnet/issues/4386#issuecomment-269468256","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4386","id":269468256,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ2ODI1Ng==","user":{"login":"p2004r","id":16059627,"node_id":"MDQ6VXNlcjE2MDU5NjI3","avatar_url":"https://avatars.githubusercontent.com/u/16059627?v=4","gravatar_id":"","url":"https://api.github.com/users/p2004r","html_url":"https://github.com/p2004r","followers_url":"https://api.github.com/users/p2004r/followers","following_url":"https://api.github.com/users/p2004r/following{/other_user}","gists_url":"https://api.github.com/users/p2004r/gists{/gist_id}","starred_url":"https://api.github.com/users/p2004r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p2004r/subscriptions","organizations_url":"https://api.github.com/users/p2004r/orgs","repos_url":"https://api.github.com/users/p2004r/repos","events_url":"https://api.github.com/users/p2004r/events{/privacy}","received_events_url":"https://api.github.com/users/p2004r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T12:04:24Z","updated_at":"2016-12-28T12:04:24Z","author_association":"NONE","body":"The workaround does not work. **Can you fix my solution?**\r\n\r\n**How to use the operator mx.symbol.slice_axis() correctly?**\r\n\r\n```\r\n\r\nk <- 64\r\n\r\n## model\r\n\r\ndata <- mx.symbol.Variable(\"data\")\r\n###user <- mx.symbol.Variable(\"user\")\r\nuser <- mx.symbol.slice_axis(data=data, axis=0, begin=0, end=0, name=\"user\")\r\n###item <- mx.symbol.Variable(\"item\")\r\nitem <- mx.symbol.slice_axis(data=data, axis=0, begin=1, end=1, name=\"item\")\r\nscore <- mx.symbol.Variable(\"label\")\r\n## user feature lookup\r\nuser1 <- mx.symbol.Embedding(data=user, input_dim = max_user, output_dim = k, name=\"user1\")\r\n## item feature lookup\r\nitem1 <- mx.symbol.Embedding(data=item, input_dim = max_item, output_dim = k, name=\"item1\")\r\n## predict by the inner product, which is elementwise product and then sum\r\npred <- user1 * item1\r\npred1 <- mx.symbol.sum_axis(pred, axis = 1, name=\"pred1\")\r\npred2 <- mx.symbol.Flatten(pred1, name=\"pred2\")\r\n## loss layer\r\npred3 <- mx.symbol.LinearRegressionOutput(data=pred2, label=score, name=\"pred3\")\r\n\r\n\r\ndevices <- mx.cpu()\r\nmx.set.seed(123)\r\n\r\n\r\nmx.model.FeedForward.create(pred3, X =  mx.io.arrayiter(data=DF_mat_x, label=t(data.matrix(data.frame(score=DF_y)))),\r\n                            ctx=devices, num.round=10, array.batch.size=10,\r\n                            verbose=T, array.layout=\"rowmajor\",\r\n                            initializer=mx.init.uniform(0.07), learning.rate=0.07,\r\n                            eval.metric=mx.metric.rmse, momentum = 0.9,\r\n                            epoch.end.callback=mx.callback.log.train.metric(1))\r\n```\r\nError\r\n\r\n```\r\n> mx.model.FeedForward.create(pred3, X =  mx.io.arrayiter(data=DF_mat_x, label=t(data.matrix(data.frame(score=DF_y)))),\r\n+                             ctx=devices, num.round=10, array.batch.size=10,\r\n+                             verbose=T, array.layout=\"rowmajor\",\r\n+                             initializer=mx.init.uniform(0.07), learning.rate=0.07,\r\n+                             eval.metric=mx.metric.rmse, momentum = 0.9,\r\n+                             epoch.end.callback=mx.callback.log.train.metric(1))\r\n[11:52:15] /root/mxnet/dmlc-core/include/dmlc/logging.h:235: [11:52:15] src/operator/./matrix_op-inl.h:620: Check failed: (param.begin) < (param.end) \r\nError in symbol$infer.shape(list(...)) : basic_string::resize\r\n> traceback()\r\n6: stop(list(message = \"basic_string::resize\", call = symbol$infer.shape(list(...)), \r\n       cppstack = NULL))\r\n5: .External(list(name = \"CppMethod__invoke_notvoid\", address = <pointer: 0x182b480>, \r\n       dll = list(name = \"Rcpp\", path = \"/usr/local/lib/R/site-library/Rcpp/libs/Rcpp.so\", \r\n           dynamicLookup = TRUE, handle = <pointer: 0x2412840>, \r\n           info = <pointer: 0x7f177895cd80>), numParameters = -1L), \r\n       <pointer: 0x3646130>, <pointer: 0x359f480>, .pointer, ...)\r\n4: symbol$infer.shape(list(...))\r\n3: mx.symbol.infer.shape(symbol, data = input.shape)\r\n2: mx.model.init.params(symbol, input.shape, initializer, mx.cpu())\r\n1: mx.model.FeedForward.create(pred3, X = mx.io.arrayiter(data = DF_mat_x, \r\n       label = t(data.matrix(data.frame(score = DF_y)))), ctx = devices, \r\n       num.round = 10, array.batch.size = 10, verbose = T, array.layout = \"rowmajor\", \r\n       initializer = mx.init.uniform(0.07), learning.rate = 0.07, \r\n       eval.metric = mx.metric.rmse, momentum = 0.9, epoch.end.callback = mx.callback.log.train.metric(1))\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269468256/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269483158","html_url":"https://github.com/apache/mxnet/pull/4128#issuecomment-269483158","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4128","id":269483158,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ4MzE1OA==","user":{"login":"NightWuYo","id":3665054,"node_id":"MDQ6VXNlcjM2NjUwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3665054?v=4","gravatar_id":"","url":"https://api.github.com/users/NightWuYo","html_url":"https://github.com/NightWuYo","followers_url":"https://api.github.com/users/NightWuYo/followers","following_url":"https://api.github.com/users/NightWuYo/following{/other_user}","gists_url":"https://api.github.com/users/NightWuYo/gists{/gist_id}","starred_url":"https://api.github.com/users/NightWuYo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightWuYo/subscriptions","organizations_url":"https://api.github.com/users/NightWuYo/orgs","repos_url":"https://api.github.com/users/NightWuYo/repos","events_url":"https://api.github.com/users/NightWuYo/events{/privacy}","received_events_url":"https://api.github.com/users/NightWuYo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T14:21:04Z","updated_at":"2016-12-28T14:21:04Z","author_association":"NONE","body":"@glingyan \r\n\r\nI get following error when try to build on windows with visual studio 2015:\r\n\r\n> Severity\tCode\tDescription\tProject\tFile\tLine\tSuppression State\r\nError (active)\t\tidentifier \"dnnBatchNormalizationCreateForward_v2_F32\" is undefined\tmxnet\t...\\mxnet\\src\\operator\\mkl\\mkl_cppwrapper.h\t832\t\r\n\r\nI have installed w_mkl_2017.0.109.exe, the content of mkl_version.h file is like this:\r\n\r\n`#ifndef _MKL_VERSION_H_\r\n#define _MKL_VERSION_H_\r\n\r\n#define __INTEL_MKL_BUILD_DATE 20160802\r\n\r\n#define __INTEL_MKL__ 2017\r\n#define __INTEL_MKL_MINOR__ 0\r\n#define __INTEL_MKL_UPDATE__ 0\r\n\r\n#define INTEL_MKL_VERSION 20170000\r\n\r\n#endif`\r\n\r\n\r\nWould you  please give some comments, thanks.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269483158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269484359","html_url":"https://github.com/apache/mxnet/pull/4128#issuecomment-269484359","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4128","id":269484359,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ4NDM1OQ==","user":{"login":"glingyan","id":22489989,"node_id":"MDQ6VXNlcjIyNDg5OTg5","avatar_url":"https://avatars.githubusercontent.com/u/22489989?v=4","gravatar_id":"","url":"https://api.github.com/users/glingyan","html_url":"https://github.com/glingyan","followers_url":"https://api.github.com/users/glingyan/followers","following_url":"https://api.github.com/users/glingyan/following{/other_user}","gists_url":"https://api.github.com/users/glingyan/gists{/gist_id}","starred_url":"https://api.github.com/users/glingyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glingyan/subscriptions","organizations_url":"https://api.github.com/users/glingyan/orgs","repos_url":"https://api.github.com/users/glingyan/repos","events_url":"https://api.github.com/users/glingyan/events{/privacy}","received_events_url":"https://api.github.com/users/glingyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T14:30:39Z","updated_at":"2016-12-28T14:30:39Z","author_association":"CONTRIBUTOR","body":"Hi Lofrank:\r\n   Your mkl windows version is quite old. Need at least >= 20161122\r\n\r\nFrom: Lofrank Hu [mailto:notifications@github.com]\r\nSent: Wednesday, December 28, 2016 10:21 PM\r\nTo: dmlc/mxnet <mxnet@noreply.github.com>\r\nCc: Guo, Lingyan <lingyan.guo@intel.com>; Mention <mention@noreply.github.com>\r\nSubject: Re: [dmlc/mxnet] MKL feature enhance (#4128)\r\n\r\n\r\n@glingyan<https://github.com/glingyan>\r\n\r\nI get following error when try to build on windows with visual studio 2015:\r\n\r\nSeverity Code Description Project File Line Suppression State\r\nError (active) identifier \"dnnBatchNormalizationCreateForward_v2_F32\" is undefined mxnet ...\\mxnet\\src\\operator\\mkl\\mkl_cppwrapper.h 832\r\n\r\nI have installed w_mkl_2017.0.109.exe, the content of mkl_version.h file is like this:\r\n\r\n`#ifndef MKL_VERSION_H\r\n#define MKL_VERSION_H\r\n\r\n#define __INTEL_MKL_BUILD_DATE 20160802\r\n\r\n#define INTEL_MKL 2017\r\n#define INTEL_MKL_MINOR 0\r\n#define INTEL_MKL_UPDATE 0\r\n\r\n#define INTEL_MKL_VERSION 20170000\r\n\r\n#endif`\r\n\r\nWould you please give some comments, thanks.\r\n\r\n—\r\nYou are receiving this because you were mentioned.\r\nReply to this email directly, view it on GitHub<https://github.com/dmlc/mxnet/pull/4128#issuecomment-269483158>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AVcrhS2EM8CahB0INzBCbGWEkI4_BA4cks5rMnBcgaJpZM4LGFeS>.\r\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269484359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269489208","html_url":"https://github.com/apache/mxnet/pull/4128#issuecomment-269489208","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4128","id":269489208,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTQ4OTIwOA==","user":{"login":"NightWuYo","id":3665054,"node_id":"MDQ6VXNlcjM2NjUwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3665054?v=4","gravatar_id":"","url":"https://api.github.com/users/NightWuYo","html_url":"https://github.com/NightWuYo","followers_url":"https://api.github.com/users/NightWuYo/followers","following_url":"https://api.github.com/users/NightWuYo/following{/other_user}","gists_url":"https://api.github.com/users/NightWuYo/gists{/gist_id}","starred_url":"https://api.github.com/users/NightWuYo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NightWuYo/subscriptions","organizations_url":"https://api.github.com/users/NightWuYo/orgs","repos_url":"https://api.github.com/users/NightWuYo/repos","events_url":"https://api.github.com/users/NightWuYo/events{/privacy}","received_events_url":"https://api.github.com/users/NightWuYo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T15:05:59Z","updated_at":"2016-12-28T15:05:59Z","author_association":"NONE","body":"Thanks for your quick response, I will try to download new version.\n\nSend from my iPhone\n\n? 2016?12?28??22:50?glingyan <notifications@github.com<mailto:notifications@github.com>> ???\n\nHi Lofrank:\nYour mkl windows version is quite old. Need at least >= 20161122\n\nFrom: Lofrank Hu [mailto:notifications@github.com]\nSent: Wednesday, December 28, 2016 10:21 PM\nTo: dmlc/mxnet <mxnet@noreply.github.com<mailto:mxnet@noreply.github.com>>\nCc: Guo, Lingyan <lingyan.guo@intel.com<mailto:lingyan.guo@intel.com>>; Mention <mention@noreply.github.com<mailto:mention@noreply.github.com>>\nSubject: Re: [dmlc/mxnet] MKL feature enhance (#4128)\n\n\n@glingyan<https://github.com/glingyan>\n\nI get following error when try to build on windows with visual studio 2015:\n\nSeverity Code Description Project File Line Suppression State\nError (active) identifier \"dnnBatchNormalizationCreateForward_v2_F32\" is undefined mxnet ...\\mxnet\\src\\operator\\mkl\\mkl_cppwrapper.h 832\n\nI have installed w_mkl_2017.0.109.exe, the content of mkl_version.h file is like this:\n\n`#ifndef MKL_VERSION_H\n#define MKL_VERSION_H\n\n#define __INTEL_MKL_BUILD_DATE 20160802\n\n#define INTEL_MKL 2017\n#define INTEL_MKL_MINOR 0\n#define INTEL_MKL_UPDATE 0\n\n#define INTEL_MKL_VERSION 20170000\n\n#endif`\n\nWould you please give some comments, thanks.\n\n-\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/dmlc/mxnet/pull/4128#issuecomment-269483158>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AVcrhS2EM8CahB0INzBCbGWEkI4_BA4cks5rMnBcgaJpZM4LGFeS>.\n\n-\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<https://github.com/dmlc/mxnet/pull/4128#issuecomment-269484359>, or mute the thread<https://github.com/notifications/unsubscribe-auth/ADfsnjLrlUrPYDdFjPmER62e8c8OPhS3ks5rMnKbgaJpZM4LGFeS>.\n","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269489208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269504042","html_url":"https://github.com/apache/mxnet/issues/4387#issuecomment-269504042","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4387","id":269504042,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUwNDA0Mg==","user":{"login":"Walid-Ahmed","id":20994789,"node_id":"MDQ6VXNlcjIwOTk0Nzg5","avatar_url":"https://avatars.githubusercontent.com/u/20994789?v=4","gravatar_id":"","url":"https://api.github.com/users/Walid-Ahmed","html_url":"https://github.com/Walid-Ahmed","followers_url":"https://api.github.com/users/Walid-Ahmed/followers","following_url":"https://api.github.com/users/Walid-Ahmed/following{/other_user}","gists_url":"https://api.github.com/users/Walid-Ahmed/gists{/gist_id}","starred_url":"https://api.github.com/users/Walid-Ahmed/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Walid-Ahmed/subscriptions","organizations_url":"https://api.github.com/users/Walid-Ahmed/orgs","repos_url":"https://api.github.com/users/Walid-Ahmed/repos","events_url":"https://api.github.com/users/Walid-Ahmed/events{/privacy}","received_events_url":"https://api.github.com/users/Walid-Ahmed/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T16:46:38Z","updated_at":"2016-12-28T16:46:38Z","author_association":"NONE","body":"I also have the same bug\r\n from_layer = mx.symbol.Scale(data=from_layer, mode=\"spatial\", \\\r\nAttributeError: 'module' object has no attribute 'Scale'","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269504042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269524411","html_url":"https://github.com/apache/mxnet/pull/4403#issuecomment-269524411","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4403","id":269524411,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUyNDQxMQ==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T19:08:03Z","updated_at":"2016-12-28T19:08:03Z","author_association":"CONTRIBUTOR","body":"please fix lint","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269524411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269525230","html_url":"https://github.com/apache/mxnet/pull/4401#issuecomment-269525230","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4401","id":269525230,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUyNTIzMA==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T19:13:38Z","updated_at":"2016-12-28T19:13:38Z","author_association":"CONTRIBUTOR","body":"nnvm will be merged soon. no need to sync to master","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269525230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269525383","html_url":"https://github.com/apache/mxnet/pull/4375#issuecomment-269525383","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4375","id":269525383,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUyNTM4Mw==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T19:14:42Z","updated_at":"2016-12-28T19:14:42Z","author_association":"CONTRIBUTOR","body":"Do you have numbers on io speed up?","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269525383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269533827","html_url":"https://github.com/apache/mxnet/pull/4400#issuecomment-269533827","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4400","id":269533827,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUzMzgyNw==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T20:13:05Z","updated_at":"2016-12-28T20:13:05Z","author_association":"CONTRIBUTOR","body":"@mli ","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269533827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269534038","html_url":"https://github.com/apache/mxnet/issues/4397#issuecomment-269534038","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4397","id":269534038,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUzNDAzOA==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T20:14:44Z","updated_at":"2016-12-28T20:14:44Z","author_association":"CONTRIBUTOR","body":"@sxjscience ","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269534038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269534151","html_url":"https://github.com/apache/mxnet/issues/4399#issuecomment-269534151","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4399","id":269534151,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUzNDE1MQ==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T20:15:40Z","updated_at":"2016-12-28T20:15:40Z","author_association":"CONTRIBUTOR","body":"@pluskid ","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269534151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269534354","html_url":"https://github.com/apache/mxnet/issues/4402#issuecomment-269534354","issue_url":"https://api.github.com/repos/apache/mxnet/issues/4402","id":269534354,"node_id":"MDEyOklzc3VlQ29tbWVudDI2OTUzNDM1NA==","user":{"login":"piiswrong","id":568948,"node_id":"MDQ6VXNlcjU2ODk0OA==","avatar_url":"https://avatars.githubusercontent.com/u/568948?v=4","gravatar_id":"","url":"https://api.github.com/users/piiswrong","html_url":"https://github.com/piiswrong","followers_url":"https://api.github.com/users/piiswrong/followers","following_url":"https://api.github.com/users/piiswrong/following{/other_user}","gists_url":"https://api.github.com/users/piiswrong/gists{/gist_id}","starred_url":"https://api.github.com/users/piiswrong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/piiswrong/subscriptions","organizations_url":"https://api.github.com/users/piiswrong/orgs","repos_url":"https://api.github.com/users/piiswrong/repos","events_url":"https://api.github.com/users/piiswrong/events{/privacy}","received_events_url":"https://api.github.com/users/piiswrong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-28T20:17:14Z","updated_at":"2016-12-28T20:18:55Z","author_association":"CONTRIBUTOR","body":"you need to provide shape and type for sym_w in infershape/type","reactions":{"url":"https://api.github.com/repos/apache/mxnet/issues/comments/269534354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]