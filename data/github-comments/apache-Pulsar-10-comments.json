[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294924412","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-294924412","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":294924412,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDkyNDQxMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-18T17:43:42Z","updated_at":"2017-04-18T17:43:42Z","author_association":"CONTRIBUTOR","body":"@rdhabalia I was meaning the broker graceful shutdown to measure the perceived unavailability time of topics. With multiple zk session, for 1K topics, it should be well < 1sec","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294924412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295131605","html_url":"https://github.com/apache/pulsar/pull/364#issuecomment-295131605","issue_url":"https://api.github.com/repos/apache/pulsar/issues/364","id":295131605,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTEzMTYwNQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-19T07:03:44Z","updated_at":"2017-04-19T07:48:38Z","author_association":"CONTRIBUTOR","body":"👍 \r\nLogic seems sound\r\nI was able to simulate the ArrayIndexOutOfBoundsException: -1 on `firstConsumerIndexOfCurrentPriorityLevel` which I guess caused the issue \r\n\r\nScenario:-\r\nConsumer [blocked=true, priorityLevel=0]\r\nConsumer [blocked=true, priorityLevel=0]\r\nConsumer [blocked=true, priorityLevel=0]\r\nConsumer [blocked=false, priorityLevel=1]\r\nConsumer [blocked=false, priorityLevel=1]\r\nConsumer [blocked=false, priorityLevel=2]\r\nConsumer [blocked=true, priorityLevel=2]\r\n\r\nAnd currentConsumerRoundRobinIndex = consumerList.size() - 1\r\n\r\nP.S. If possible please remove the while(true)\r\n\r\n==== Edit =====\r\njust to clarify I meant that I was getting \"ArrayIndexOutOfBoundsException: -1\" before this fix - this fix solves the issue.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295131605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295141904","html_url":"https://github.com/apache/pulsar/pull/364#issuecomment-295141904","issue_url":"https://api.github.com/repos/apache/pulsar/issues/364","id":295141904,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTE0MTkwNA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-19T07:38:56Z","updated_at":"2017-04-19T07:50:21Z","author_association":"CONTRIBUTOR","body":"> I was able to simulate the ArrayIndexOutOfBoundsException: -1 on firstConsumerIndexOfCurrentPriorityLevel which I guess caused the issue\r\n\r\nIt should not happen because it always first checks [highest priority consumer's state](https://github.com/rdhabalia/pulsar/blob/7bf4197b1e69b27e782d9bcd4258afc743160113/pulsar-broker/src/main/java/com/yahoo/pulsar/broker/service/persistent/PersistentDispatcherMultipleConsumers.java#L456), if it doesn't find then only it does round-robin in current priority-level consumers. However, I have also added the exact same [testcase](https://github.com/rdhabalia/pulsar/blob/7bf4197b1e69b27e782d9bcd4258afc743160113/pulsar-broker/src/test/java/com/yahoo/pulsar/broker/service/PersistentDispatcherFailoverConsumerTest.java#L394) for verification.\r\nIt was causing `getNextAvailableConsumer()` to return null consumer even if unblocked-consumer is available and because of that `dispatcher` keeps [rewinding](https://github.com/yahoo/pulsar/blob/master/pulsar-broker/src/main/java/com/yahoo/pulsar/broker/service/persistent/PersistentDispatcherMultipleConsumers.java#L295) the readPosition.\r\n\r\n> can 481 - 484 be converted to\r\n\r\nMain reason to keep it this way for more clear readability of this algo.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295141904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295145518","html_url":"https://github.com/apache/pulsar/pull/364#issuecomment-295145518","issue_url":"https://api.github.com/repos/apache/pulsar/issues/364","id":295145518,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTE0NTUxOA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-19T07:48:02Z","updated_at":"2017-04-19T07:48:02Z","author_association":"CONTRIBUTOR","body":"@rdhabalia - just to clarify I meant that I was getting \"ArrayIndexOutOfBoundsException: -1\" before your fix - this fix solves the issue.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295145518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295514782","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-295514782","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":295514782,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTUxNDc4Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T00:41:45Z","updated_at":"2017-04-20T00:41:45Z","author_association":"CONTRIBUTOR","body":"Sure, I think I will spend some time to prepare the test and perform that test because I couldn't find the same test right now. I will do it by this week and will post the result.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295514782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295532976","html_url":"https://github.com/apache/pulsar/pull/367#issuecomment-295532976","issue_url":"https://api.github.com/repos/apache/pulsar/issues/367","id":295532976,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTUzMjk3Ng==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T01:32:51Z","updated_at":"2017-04-20T01:32:51Z","author_association":"CONTRIBUTOR","body":"@merlimat can you review it when you get a chance as thinking to pick this one over #364 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295532976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295907236","html_url":"https://github.com/apache/pulsar/pull/364#issuecomment-295907236","issue_url":"https://api.github.com/repos/apache/pulsar/issues/364","id":295907236,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTkwNzIzNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T20:51:28Z","updated_at":"2017-04-20T20:51:28Z","author_association":"CONTRIBUTOR","body":"@rdhabalia This can be closed, right?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295907236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295909644","html_url":"https://github.com/apache/pulsar/pull/364#issuecomment-295909644","issue_url":"https://api.github.com/repos/apache/pulsar/issues/364","id":295909644,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTkwOTY0NA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T20:57:19Z","updated_at":"2017-04-20T20:57:19Z","author_association":"CONTRIBUTOR","body":"yes, we can close this one,","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295909644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295946561","html_url":"https://github.com/apache/pulsar/issues/369#issuecomment-295946561","issue_url":"https://api.github.com/repos/apache/pulsar/issues/369","id":295946561,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk0NjU2MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T22:34:20Z","updated_at":"2017-04-20T22:34:20Z","author_association":"CONTRIBUTOR","body":"cc @rdhabalia ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295946561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295956791","html_url":"https://github.com/apache/pulsar/issues/369#issuecomment-295956791","issue_url":"https://api.github.com/repos/apache/pulsar/issues/369","id":295956791,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk1Njc5MQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T23:03:14Z","updated_at":"2017-04-20T23:03:14Z","author_association":"CONTRIBUTOR","body":"Yes, that make sense and will address it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295956791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295967674","html_url":"https://github.com/apache/pulsar/issues/369#issuecomment-295967674","issue_url":"https://api.github.com/repos/apache/pulsar/issues/369","id":295967674,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk2NzY3NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-20T23:33:38Z","updated_at":"2017-04-20T23:33:50Z","author_association":"CONTRIBUTOR","body":"I think we could probably just hide the `unackedMessages` and the `blockedForUnackedMessages` from the stats on non-shared subscription types.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295967674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295978240","html_url":"https://github.com/apache/pulsar/pull/373#issuecomment-295978240","issue_url":"https://api.github.com/repos/apache/pulsar/issues/373","id":295978240,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk3ODI0MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T00:04:37Z","updated_at":"2017-04-21T00:04:37Z","author_association":"CONTRIBUTOR","body":"@rdhabalia This should fix it for 1.18. Though can you manually upload the binaries for the 1.17.3 tag?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295978240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295981436","html_url":"https://github.com/apache/pulsar/pull/373#issuecomment-295981436","issue_url":"https://api.github.com/repos/apache/pulsar/issues/373","id":295981436,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk4MTQzNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T00:15:14Z","updated_at":"2017-04-21T00:15:38Z","author_association":"CONTRIBUTOR","body":"Actually I have tried it before in my [local-branch](https://github.com/rdhabalia/pulsar/commit/81b6568ca3ed3dd02690477c3d424fd87ae4057e#diff-354f30a63fb0907d4ad57269548329e3) when I noticed this extra line but it didn't upload the binary at that time. Not sure if other thing went wrong and it couldn't upload. Also I think yaml allows extra new line.\r\nHowever, we can try it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295981436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295984491","html_url":"https://github.com/apache/pulsar/pull/373#issuecomment-295984491","issue_url":"https://api.github.com/repos/apache/pulsar/issues/373","id":295984491,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk4NDQ5MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T00:25:50Z","updated_at":"2017-04-21T00:25:50Z","author_association":"CONTRIBUTOR","body":"> Actually I have tried it before in my local-branch when I noticed this extra line but it didn't upload the binary at that time. Not sure if other thing went wrong and it couldn't upload. Also I think yaml allows extra new line.\r\n\r\nThe upload is only done on git tags, and only from the `yahoo/pulsar` repo, not any other fork.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295984491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295985316","html_url":"https://github.com/apache/pulsar/pull/373#issuecomment-295985316","issue_url":"https://api.github.com/repos/apache/pulsar/issues/373","id":295985316,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NTk4NTMxNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T00:28:35Z","updated_at":"2017-04-21T00:28:35Z","author_association":"CONTRIBUTOR","body":"> The upload is only done on git tags, and only from the yahoo/pulsar repo, not any other fork.\r\n\r\nYes, in that commit I had tried to create release with name: 1.12.1 and as I have travis-build on my fork so, I thought that travis-build should check in to my fork repo. \r\nBut hopefully, we wish this change will work 👍 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/295985316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296256461","html_url":"https://github.com/apache/pulsar/pull/371#issuecomment-296256461","issue_url":"https://api.github.com/repos/apache/pulsar/issues/371","id":296256461,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjI1NjQ2MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T17:41:14Z","updated_at":"2017-04-21T17:41:14Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Updated with tests","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296256461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296257342","html_url":"https://github.com/apache/pulsar/pull/371#issuecomment-296257342","issue_url":"https://api.github.com/repos/apache/pulsar/issues/371","id":296257342,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjI1NzM0Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T17:44:54Z","updated_at":"2017-04-21T17:44:54Z","author_association":"CONTRIBUTOR","body":"I will review it soon.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296257342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296272234","html_url":"https://github.com/apache/pulsar/pull/374#issuecomment-296272234","issue_url":"https://api.github.com/repos/apache/pulsar/issues/374","id":296272234,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjI3MjIzNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T18:45:36Z","updated_at":"2017-04-21T18:45:36Z","author_association":"CONTRIBUTOR","body":"In all the other conditions, the future is being removed when the error is detected. \r\nI think we should add remove from map at `BrokerService.java:474`, maybe in addition to the remove you have added already.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296272234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296279444","html_url":"https://github.com/apache/pulsar/pull/374#issuecomment-296279444","issue_url":"https://api.github.com/repos/apache/pulsar/issues/374","id":296279444,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjI3OTQ0NA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-21T19:03:51Z","updated_at":"2017-04-21T19:03:51Z","author_association":"CONTRIBUTOR","body":"> I think we should add remove from map at BrokerService.java:474, maybe in addition to the remove you have added already.\r\n\r\nYes, but we should remove it in different thread to prevent deadlock. created #375 to handle it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296279444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296763082","html_url":"https://github.com/apache/pulsar/pull/370#issuecomment-296763082","issue_url":"https://api.github.com/repos/apache/pulsar/issues/370","id":296763082,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Njc2MzA4Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T17:37:47Z","updated_at":"2017-04-24T17:37:47Z","author_association":"CONTRIBUTOR","body":"@saandrews @rdhabalia @merlimat - I have made the changes as per your review, can I please get a +1 on this\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296763082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296785821","html_url":"https://github.com/apache/pulsar/pull/370#issuecomment-296785821","issue_url":"https://api.github.com/repos/apache/pulsar/issues/370","id":296785821,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Njc4NTgyMQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T18:42:43Z","updated_at":"2017-04-24T18:42:43Z","author_association":"CONTRIBUTOR","body":"@merlimat - have addressed your comments - will merge the PR once the build completes\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296785821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296824365","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-296824365","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":296824365,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjgyNDM2NQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T21:14:55Z","updated_at":"2017-04-24T21:14:55Z","author_association":"CONTRIBUTOR","body":"Do you see the problem with the current master as well?\r\nThis commit - https://github.com/yahoo/pulsar/commit/5862644e069a01f91406dac757c4c2468f6ecb73\r\n\r\nshould have fixed the bug.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296824365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296825805","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-296825805","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":296825805,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjgyNTgwNQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T21:21:12Z","updated_at":"2017-04-24T21:21:12Z","author_association":"CONTRIBUTOR","body":"@sschepens can you also confirm client-version? We had similar issue introduced in 1.15 which has been fixed in 1.16 with #170 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296825805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296834235","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-296834235","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":296834235,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjgzNDIzNQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T21:59:40Z","updated_at":"2017-04-24T21:59:40Z","author_association":"CONTRIBUTOR","body":"@rdhabalia clients are running master.\r\n@jai1 brokers are not running with this commit, will try","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296834235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296836121","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-296836121","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":296836121,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjgzNjEyMQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T22:09:15Z","updated_at":"2017-04-24T22:09:15Z","author_association":"CONTRIBUTOR","body":"I don't think that [broker-commit](https://github.com/yahoo/pulsar/commit/5862644e069a01f91406dac757c4c2468f6ecb73) (btw it's part of 1.17.3) will help because that fix is at broker where broker couldn't dispatch message to consumer even if it has  `availablePermits`. In this case, client doesn't have `availablePermits` so, it seems client is not able to consume messages from the internal-prefetch queue. so, can you verify if client-app is stuck (may be jstack or debug log can help) and not able to consume message \r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296836121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296848903","html_url":"https://github.com/apache/pulsar/pull/377#issuecomment-296848903","issue_url":"https://api.github.com/repos/apache/pulsar/issues/377","id":296848903,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Njg0ODkwMw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-24T23:23:45Z","updated_at":"2017-04-24T23:23:45Z","author_association":"CONTRIBUTOR","body":"@merlimat updated with testcases. can you please review when you get a chance.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296848903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296908563","html_url":"https://github.com/apache/pulsar/pull/366#issuecomment-296908563","issue_url":"https://api.github.com/repos/apache/pulsar/issues/366","id":296908563,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NjkwODU2Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T05:05:05Z","updated_at":"2017-04-25T05:05:05Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Maybe the name `NonDurableCursor` doesn't fully convey the intended semantic for the new class. The context here is just to have a way to read through a topic (eg: support `TopicReader`) and reuse as much code as possible from the regular cursor implementation. Basically all the cache code and the logic for how to switch to \"next valid position\", plus the asyncReadOrWait stuff.\r\n\r\nAbout non impeding messages to be deleted, consider that in case of non-durable topic, during a disconnection the cursor will go away and data will get potentially deleted anyway. So I prefer it to be explicitly ingrained into the API. Same thing about naming the cursor. It will go away in any case after a restart, so I don't see the advantage of naming it.\r\n\r\nWhen data gets deleted, the cursor will just skip over it. The intended usage for the non-durable cursor and topic reader is in conjunction with the message retention, to make sure data sticks around for the intended amount of time ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/296908563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297033299","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297033299","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297033299,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzAzMzI5OQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T13:41:04Z","updated_at":"2017-04-25T14:34:41Z","author_association":"CONTRIBUTOR","body":"@rdhabalia I don't think this is a deadlock, we're running hundreds of clients on the same client and sharing the netty event loop with a webserver, we'd have lot's of issues if it were a deadlock.\r\nHere I'm attaching the client jstack.\r\n[jstack-client.txt](https://github.com/yahoo/pulsar/files/955213/jstack-client.txt)\r\n\r\nI found something interesting though, broker sees that two consumers from the same machine are connected. The consumer that's stuck is not running on the client, there is no connection active on port `45588`, but the second has an active connection. This seems to be some sort of 'consumer leak', could it be that broker fails to remove the consumer when it disconnects?\r\n```\r\n{\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0403f3b26db511fbf-10.73.103.43\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 1000,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.103.43:45588\",\r\n            \"connectedSince\" : \"2017-04-24 23:59:34.544+0000\"\r\n          },  {\r\n            \"msgRateOut\" : 8.797576976334472,\r\n            \"msgThroughputOut\" : 1129.105689017624,\r\n            \"msgRateRedeliver\" : 6.614844801260618,\r\n            \"consumerName\" : \"i-0403f3b26db511fbf-10.73.103.43\",\r\n            \"availablePermits\" : 879,\r\n            \"unackedMessages\" : 382,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.103.43:45394\",\r\n            \"connectedSince\" : \"2017-04-25 02:26:26.434+0000\"\r\n          }\r\n```\r\n\r\nThis seems to be something separate though, on the stats I uploaded previously this was not seen on consumers with 0 available permits","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297033299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297046578","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-297046578","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":297046578,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzA0NjU3OA==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T14:24:01Z","updated_at":"2017-04-25T14:24:01Z","author_association":"NONE","body":"1.17.4 still not publishing binaries.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297046578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297087472","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-297087472","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":297087472,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzA4NzQ3Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T16:30:57Z","updated_at":"2017-04-25T16:30:57Z","author_association":"CONTRIBUTOR","body":"\r\nFrom the Travis build log : https://s3.amazonaws.com/archive.travis-ci.org/jobs/225491810/log.txt\r\n\r\n```\r\n...\r\n[33mPreparing deploy^[[0m\r\nLogged in as Matteo Merli\r\nDeploying to repo: yahoo/pulsar\r\nCurrent tag is: v1.17.4\r\nCleaning up git repository with `git stash --all`. If you need build artifacts for deployment, set `deploy.skip_cleanup: true`. See https://docs.travis-ci.com/user/deployment/#Uploading-Files.\r\nSaved working directory and index state WIP on (no branch): dcb80a1 Pulsar release 1.17.4\r\nHEAD is now at dcb80a1 Pulsar release 1.17.4\r\n....\r\n```\r\n\r\nI think that some behavior on Travis side might have changed. We didn't have the `skip_cleanup:true` from the github releases, but we should probably add that. \r\nOtherwise, I have verified that doing the `git stash --all` is getting rid of the generated tgz files","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297087472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297090644","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297090644","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297090644,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzA5MDY0NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T16:42:03Z","updated_at":"2017-04-25T16:42:03Z","author_association":"CONTRIBUTOR","body":"> I found something interesting though, broker sees that two consumers from the same machine are connected. The consumer that's stuck is not running on the client, there is no connection active on port 45588, but the second has an active connection. This seems to be some sort of 'consumer leak', could it be that broker fails to remove the consumer when it disconnects?\r\n\r\nI don't think we have seen this kind of issues recently. Can you double check with `netstat` that the connection was properly cleaned up on both broker and clients? \r\n\r\nAlso, it might be useful to track in the client logs when the connection was closed and what happened in broker logs at that time. Basically, just grep for `10.73.103.43:45588` in both logs.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297090644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297103797","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297103797","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297103797,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEwMzc5Nw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T17:23:09Z","updated_at":"2017-04-25T17:23:09Z","author_association":"CONTRIBUTOR","body":"@merlimat apparently some error happened when shutting down consumers on that connection on the broker, the last log containing that ip and port is:\r\n`2017-04-25 02:26:26,513 - WARN  - [pulsar-io-41-4:ServerCnx@147] - [/10.73.103.43:45588] Got exception: null`","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297103797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297104545","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297104545","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297104545,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEwNDU0NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T17:25:56Z","updated_at":"2017-04-25T17:25:56Z","author_association":"CONTRIBUTOR","body":"So the exception happened when the broker realized the connection got closed and it was cleaning the consumers that were on that connection? \r\n\r\nWas there a stack trace  after that message?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297104545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297108689","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297108689","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297108689,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEwODY4OQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T17:40:27Z","updated_at":"2017-04-25T17:40:27Z","author_association":"CONTRIBUTOR","body":"@merlimat it was a StackOverflow! here goes the stacktrace:\r\n```\r\njava.lang.StackOverflowError\r\n\tat io.netty.util.Recycler.get(Recycler.java:120)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryImpl.create(EntryImpl.java:86)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:174)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.lambda$asyncReplayEntries$7(ManagedCursorImpl.java:926)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)\r\n\tat java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\r\n\tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n\tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)\r\n\tat java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl.asyncReplayEntries(ManagedCursorImpl.java:926)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readMoreEntries(PersistentDispatcherMultipleConsumers.java:182)\r\n\tat com.yahoo.pulsar.broker.service.persistent.PersistentDispatcherMultipleConsumers.readEntriesComplete(PersistentDispatcherMultipleConsumers.java:330)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedCursorImpl$11.readEntryComplete(ManagedCursorImpl.java:906)\r\n\tat org.apache.bookkeeper.mledger.impl.EntryCacheImpl.asyncReadEntry(EntryCacheImpl.java:177)\r\n\tat org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl.asyncReadEntry(ManagedLedgerImpl.java:1203)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297108689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297110306","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297110306","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297110306,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzExMDMwNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T17:46:28Z","updated_at":"2017-04-25T17:46:28Z","author_association":"CONTRIBUTOR","body":"Ok, we have 2 problems then: \r\n 1. The `ManagedCursorImpl.asyncReplayEntries` needs to send the response from a different thread always, even though the entries are all in cache. I think this is already the case for normal `asynReadEntries()` calls\r\n\r\n2. We should clean up the consumer when this exception happens","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297110306/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297123135","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-297123135","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":297123135,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyMzEzNQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:29:20Z","updated_at":"2017-04-25T18:29:20Z","author_association":"CONTRIBUTOR","body":"@rdhabalia can you manually upload 1.17.4 binaries? Hopefully for the last time... ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297123135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297125211","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297125211","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297125211,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyNTIxMQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:37:00Z","updated_at":"2017-04-25T18:37:00Z","author_association":"CONTRIBUTOR","body":"@merlimat yes, but this should not be related to the problem I first saw when creating this issue.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297125211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297125936","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-297125936","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":297125936,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyNTkzNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:39:33Z","updated_at":"2017-04-25T18:39:33Z","author_association":"CONTRIBUTOR","body":"yes, I was going to do it but then missed it. I will do it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297125936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297126088","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297126088","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297126088,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyNjA4OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:40:08Z","updated_at":"2017-04-25T18:40:08Z","author_association":"CONTRIBUTOR","body":"@sschepens That's my point (2) above. If we get any exception in the connection thread, we should force close the connection (which is what is being tried) and make sure all consumer that were on that connection are being \"cleaned up\" from broker perspective. That way the \"phantom\" consumer that is keeping the 1000 messages on hold would go away immediately.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297126088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297126665","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297126665","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297126665,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyNjY2NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:42:10Z","updated_at":"2017-04-25T18:42:10Z","author_association":"CONTRIBUTOR","body":"@merlimat when I first created the issue I found consumers with 0 available permits, but they were not phantom consumers like the last I added here, this phantom one is just a single case I have found.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297126665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297127146","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297127146","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297127146,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyNzE0Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:43:49Z","updated_at":"2017-04-25T18:43:49Z","author_association":"CONTRIBUTOR","body":"Ok, is not that the same as the example you pasted above ? \r\n\r\n```\r\n\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0403f3b26db511fbf-10.73.103.43\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 1000,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.103.43:45588\",\r\n            \"connectedSince\" : \"2017-04-24 23:59:34.544+0000\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297127146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297128003","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297128003","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297128003,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEyODAwMw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:46:37Z","updated_at":"2017-04-25T18:46:37Z","author_association":"CONTRIBUTOR","body":"Nope, check the first stats I attached, that subscription had lots of consumers with 0 availablePermits but were not 'duplicated' as the phantom one","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297128003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297131648","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297131648","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297131648,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEzMTY0OA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T18:59:33Z","updated_at":"2017-04-25T18:59:33Z","author_association":"CONTRIBUTOR","body":"@merlimat I created issue #383 to follow the stack overflows","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297131648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297132055","html_url":"https://github.com/apache/pulsar/issues/383#issuecomment-297132055","issue_url":"https://api.github.com/repos/apache/pulsar/issues/383","id":297132055,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEzMjA1NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T19:00:52Z","updated_at":"2017-04-25T19:00:52Z","author_association":"CONTRIBUTOR","body":"Adding details from #380 \r\n\r\n>Ok, we have 2 problems then:\r\n\r\n>The ManagedCursorImpl.asyncReplayEntries needs to send the response from a different thread always, even though the entries are all in cache. I think this is already the case for normal asynReadEntries() calls\r\n\r\n>We should clean up the consumer when this exception happens","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297132055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297136501","html_url":"https://github.com/apache/pulsar/pull/371#issuecomment-297136501","issue_url":"https://api.github.com/repos/apache/pulsar/issues/371","id":297136501,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzEzNjUwMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T19:18:14Z","updated_at":"2017-04-25T19:18:14Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Addressed comments","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297136501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297146634","html_url":"https://github.com/apache/pulsar/issues/383#issuecomment-297146634","issue_url":"https://api.github.com/repos/apache/pulsar/issues/383","id":297146634,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzE0NjYzNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T19:56:50Z","updated_at":"2017-04-25T19:56:50Z","author_association":"CONTRIBUTOR","body":"@sschepens created PR #384 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297146634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297151194","html_url":"https://github.com/apache/pulsar/pull/384#issuecomment-297151194","issue_url":"https://api.github.com/repos/apache/pulsar/issues/384","id":297151194,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzE1MTE5NA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-25T20:14:00Z","updated_at":"2017-04-25T20:14:00Z","author_association":"CONTRIBUTOR","body":"seems ok :+1: ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297151194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297498339","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297498339","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297498339,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzQ5ODMzOQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-26T18:21:30Z","updated_at":"2017-04-26T18:24:24Z","author_association":"CONTRIBUTOR","body":"@merlimat @rdhabalia we're still seeing issues with this, we've got some subscriptions that are left with no available permits, we tried restarting all brokers and `jstack`ing them but found nothing and these consumers after a few seconds or minutes end up in the exact same state:\r\n```json\r\n          \"247dd878e9f3483993770c692eedba51-mshops-questions_indexer\" : {\r\n          \"msgRateOut\" : 0.0,\r\n          \"msgThroughputOut\" : 0.0,\r\n          \"msgRateRedeliver\" : 7.533347784554389,\r\n          \"msgBacklog\" : 18917,\r\n          \"unackedMessages\" : 466,\r\n          \"type\" : \"Shared\",\r\n          \"msgRateExpired\" : 0.0,\r\n          \"consumers\" : [ {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-09af96e8d47c2b714-10.73.106.208\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.106.208:34701\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.293+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0e505b38b7899b8b6-10.73.105.85\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.105.85:34203\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.296+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0797c91b722ac68ba-10.73.105.62\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.105.62:54688\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.297+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0cc3e4b419785a519-10.73.103.92\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.103.92:37078\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.300+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 7.533347784554389,\r\n            \"consumerName\" : \"i-0e5ee0911e4c48a29-10.73.104.84\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.104.84:38251\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.300+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-037b9607b5b3def6b-10.73.106.83\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 466,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.106.83:32944\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.301+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0753053120569dcda-10.73.104.80\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.104.80:48703\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.302+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-02656449fe63900e5-10.73.103.242\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.103.242:38442\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.309+0000\"\r\n          }, {\r\n            \"msgRateOut\" : 0.0,\r\n            \"msgThroughputOut\" : 0.0,\r\n            \"msgRateRedeliver\" : 0.0,\r\n            \"consumerName\" : \"i-0cf6198ff7e964963-10.73.106.23\",\r\n            \"availablePermits\" : 0,\r\n            \"unackedMessages\" : 0,\r\n            \"blockedConsumerOnUnackedMsgs\" : false,\r\n            \"address\" : \"/10.73.106.23:43477\",\r\n            \"connectedSince\" : \"2017-04-26 17:58:01.343+0000\"\r\n          } \r\n```\r\nThe partition has backlog, but all consumers are stuck.\r\nHere's the stats-internal for that partition:\r\n```json\r\n\"247dd878e9f3483993770c692eedba51-mshops-questions_indexer\" : {\r\n      \"markDeletePosition\" : \"1734591:25934\",\r\n      \"readPosition\" : \"1736621:3372\",\r\n      \"waitingReadOp\" : false,\r\n      \"pendingReadOps\" : 0,\r\n      \"messagesConsumedCounter\" : -13983,\r\n      \"cursorLedger\" : 1739539,\r\n      \"cursorLedgerLastEntry\" : 1403,\r\n      \"individuallyDeletedMessages\" : \"[(1734591:25935‥1734591:25937], (1734591:25938‥1734591:25940], (1734591:25963‥1734591:26023], (1734591:26043‥1734591:26063], (1734591:26083‥1734591:26103], (1734591:26143‥1734591:26149], (1734591:26163‥1734591:26183], (1734591:26223‥1734591:26243], (1734591:26264‥1734591:26265], (1734591:26267‥1734591:26268], (1734591:26270‥1734591:26272], (1734591:26273‥1734591:26275], (1734591:26276‥1734591:26278], (1734591:26279‥1734591:26281], (1734591:26282‥1734591:26284], (1734591:26285‥1734591:26287], (1734591:26288‥1734591:26290], (1734591:26291‥1734591:26293], (1734591:26294‥1734591:26296], (1734591:26297‥1734591:26299], (1734591:26300‥1734591:26302], (1734591:26303‥1734591:26305], (1734591:26306‥1734591:26964], (1734591:26966‥1734591:26967], (1734591:26969‥1734591:26970], (1734591:26972‥1734591:26973], (1734591:26975‥1734591:26976], (1734591:26978‥1734591:26979], (1734591:26981‥1734591:26982], (1734591:26983‥1734591:27023], (1734591:27043‥1734591:27083], (1734591:27123‥1734591:27143], (1734591:27176‥1734591:27266], (1734591:27267‥1734591:27269], (1734591:27270‥1734591:27272], (1734591:27273‥1734591:27275], (1734591:27276‥1734591:27278], (1734591:27279‥1734591:27281], (1734591:27282‥1734591:27284], (1734591:27285‥1734591:27287], (1734591:27288‥1734591:27290], (1734591:27291‥1734591:27293], (1734591:27294‥1734591:27296], (1734591:27297‥1734591:27299], (1734591:27300‥1734591:27302], (1734591:27303‥1734591:27305], (1734591:27306‥1734591:27308], (1734591:27309‥1734591:27311], (1734591:27312‥1734591:27314], (1734591:27315‥1734591:27317], (1734591:27318‥1734591:27320], (1734591:27321‥1734591:27323], (1734591:27324‥1734591:27326], (1734591:27327‥1734591:27329], (1734591:27330‥1734591:27332], (1734591:27333‥1734591:27335], (1734591:27336‥1734591:27338], (1734591:27339‥1734591:27341], (1734591:27342‥1734591:27344], (1734591:27345‥1734591:27347], (1734591:27348‥1734591:27350], (1734591:27351‥1734591:27353], (1734591:27354‥1734591:27356], (1734591:27357‥1734591:27359], (1734591:27360‥1734591:27362], (1734591:27363‥1734591:27365], (1734591:27459‥1734591:27479], (1734591:27639‥1734591:27659], (1734591:27819‥1734591:27839], (1734591:27999‥1734591:28019], (1736621:112‥1736621:114], (1736621:115‥1736621:117], (1736621:118‥1736621:120], (1736621:121‥1736621:183], (1736621:184‥1736621:186], (1736621:187‥1736621:189], (1736621:190‥1736621:192], (1736621:193‥1736621:195], (1736621:196‥1736621:198], (1736621:199‥1736621:201], (1736621:202‥1736621:204], (1736621:205‥1736621:207], (1736621:208‥1736621:210], (1736621:211‥1736621:213], (1736621:214‥1736621:216], (1736621:217‥1736621:219], (1736621:220‥1736621:222], (1736621:223‥1736621:225], (1736621:226‥1736621:228], (1736621:229‥1736621:231], (1736621:232‥1736621:234], (1736621:235‥1736621:237], (1736621:238‥1736621:240], (1736621:241‥1736621:243], (1736621:244‥1736621:246], (1736621:247‥1736621:249], (1736621:250‥1736621:252], (1736621:253‥1736621:255], (1736621:256‥1736621:258], (1736621:260‥1736621:261], (1736621:263‥1736621:264], (1736621:395‥1736621:415], (1736621:575‥1736621:595], (1736621:737‥1736621:960], (1736621:961‥1736621:1002], (1736621:1003‥1736621:1737], (1736621:1835‥1736621:1855], (1736621:2015‥1736621:2035], (1736621:2195‥1736621:2215], (1736621:2375‥1736621:2395], (1736621:2555‥1736621:2575], (1736621:2735‥1736621:2755], (1736621:2915‥1736621:2935], (1736621:3095‥1736621:3115]]\",\r\n      \"lastLedgerSwitchTimestamp\" : \"2017-04-26 17:58:01.284+0000\",\r\n      \"state\" : \"Open\"\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297498339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297501251","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297501251","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297501251,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzUwMTI1MQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-26T18:32:13Z","updated_at":"2017-04-26T18:32:13Z","author_association":"CONTRIBUTOR","body":"We haven't seen this behavior so far. But `stats` shows that `consumer` is connected and `availablePermits=0` so, can we try to monitor at client side as well. If we enable debug log at client then can we verify if client is actually [sending](https://github.com/yahoo/pulsar/blob/master/pulsar-client/src/main/java/com/yahoo/pulsar/client/impl/ConsumerImpl.java#L534) `availablePermits` to broker by checking log `Adding $subscription additional permits`. I think it will help to understand the issue if it is at client or the broker side.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297501251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297502951","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297502951","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297502951,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzUwMjk1MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-26T18:38:07Z","updated_at":"2017-04-26T18:38:07Z","author_association":"CONTRIBUTOR","body":"These 2 number don't make much sense together:\r\n\r\n```\r\n\"availablePermits\" : 0,\r\n\"unackedMessages\" : 0,\r\n```\r\n\r\nIf the application stopped consuming, `availablePermits` would go down to 0, but the `unackedMessages` should go up.\r\n\r\nCan you enable debug logs on one consumer? For the class `com.yahoo.pulsar.client.impl.ConsumerImpl`\r\n\r\nAn alternative would be to get a tcpdump on the port 6650 on the consumer machine.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297502951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297507967","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-297507967","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":297507967,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NzUwNzk2Nw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-26T18:56:08Z","updated_at":"2017-04-26T18:56:08Z","author_association":"CONTRIBUTOR","body":"I'll see if i can get this debug logs on.\r\nInterestingly I lowered QueueSize of the consumers from 1000 to 100 and they seem to be working ok now, don't know if the higher queue size is actually triggering this behavior quicker or what.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297507967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297882620","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-297882620","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":297882620,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Nzg4MjYyMA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-28T01:25:29Z","updated_at":"2017-04-28T01:25:29Z","author_association":"CONTRIBUTOR","body":">I was meaning the broker graceful shutdown\r\n\r\n\r\nI tested it in two rounds (6K topics and 12K topics) in two different brokers (1 with 16 Zksession and other with 1 zkSession). Below comparison doesn’t show significant difference in unloading bundles. I think multi-zkSession can be helpful if we unload bundles parallely. I will make that change and will test it with again. Please find below result for both the results:\r\n\r\n**(1) Round 1:**\r\n  Total NS=3 (each with 3 bundles), bundles = 9 , total topics =6000 distributed among 9 bundles\r\n\r\n**(A) Started broker with 16 ZKSession**\r\n\r\n- Log for confirmation of 16 zk-session\r\n`00:13:12.798 [main] INFO  c.y.p.b.ManagedLedgerClientFactory   - Successfully created 16 ZooKeeper sesssion(s)`\r\n- total loaded topic in destination metrics: before shutting down brokers: `6313`\r\n- shutdown broker log\r\n```\r\n00:33:21.695 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun1_0/0x00000000_0xffffffff namespace-bundle with 2000 topics completed in 1291.0 ms\r\n00:33:21.815 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/shared-consumer_0/0x00000000_0xffffffff namespace-bundle with 102 topics completed in 119.0 ms\r\n00:33:21.825 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading pulsar/perf-gq1b/perf1b-broker2.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 9.0 ms\r\n00:33:21.873 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/shared-consumer_1/0x00000000_0xffffffff namespace-bundle with 102 topics completed in 47.0 ms\r\n00:33:22.634 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun1_1/0x00000000_0xffffffff namespace-bundle with 2000 topics completed in 761.0 ms\r\n00:33:23.322 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun1_2/0x00000000_0xffffffff namespace-bundle with 2000 topics completed in 687.0 ms\r\n00:33:23.352 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/shared-consumer_2/0x00000000_0xffffffff namespace-bundle with 102 topics completed in 30.0 ms\r\n00:33:23.353 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms/perf-gq1b/perf1b-broker2.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 0.0 ms\r\n00:33:23.357 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/reconnect_0/0x00000000_0xffffffff namespace-bundle with 7 topics completed in 3.0 ms\r\n:\r\n:\r\n00:33:23.357 [shutdown-thread-501-1] INFO  c.y.p.broker.service.BrokerService   - Unloading 9 namespace-bundles completed in 2.962 seconds\r\n```\r\n\r\n**(B) Started broker with 1 zk session (broker without this commit)**\r\n- Client reconnected to this broker and loaded same topics and then triggered shutdown\r\n```\r\n00:54:36.115 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun1_1/0x00000000_0xffffffff namespace-bundle with 2000 topics completed in 976.0 ms\r\n00:54:36.850 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun1_0/0x00000000_0xffffffff namespace-bundle with 2000 topics completed in 735.0 ms\r\n00:54:36.962 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/shared-consumer_2/0x00000000_0xffffffff namespace-bundle with 102 topics completed in 111.0 ms\r\n00:54:37.602 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun1_2/0x00000000_0xffffffff namespace-bundle with 2000 topics completed in 639.0 ms\r\n00:54:37.608 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/reconnect_0/0x00000000_0xffffffff namespace-bundle with 7 topics completed in 5.0 ms\r\n00:54:37.642 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/shared-consumer_0/0x00000000_0xffffffff namespace-bundle with 102 topics completed in 34.0 ms\r\n00:54:37.643 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading pulsar/perf-gq1b/perf1b-broker1.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 1.0 ms\r\n00:54:37.678 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/shared-consumer_1/0x00000000_0xffffffff namespace-bundle with 102 topics completed in 34.0 ms\r\n00:54:37.680 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms/perf-gq1b/perf1b-broker1.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 1.0 ms\r\n:\r\n:\r\n00:54:37.680 [shutdown-thread-69-1] INFO  c.y.p.broker.service.BrokerService   - Unloading 9 namespace-bundles completed in 2.565 seconds\r\n```\r\n\r\n**Round 2:** \r\nTotal NS: 9 (each with 3 bundles) , Total Bundle=27, Total topics = 12000\r\n\r\n**(A) Broker with zkSession = 16**\r\n\r\n```\r\n01:12:30.174 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_0/0x00000000_0xffffffff namespace-bundle with 1334 topics completed in 540.0 ms\r\n01:12:30.592 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_2/0x00000000_0xffffffff namespace-bundle with 1334 topics completed in 417.0 ms\r\n01:12:30.611 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading pulsar/perf-gq1b/perf1b-broker2.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 18.0 ms\r\n01:12:31.041 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_1/0x00000000_0xffffffff namespace-bundle with 1334 topics completed in 430.0 ms\r\n01:12:31.417 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_4/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 376.0 ms\r\n01:12:31.821 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_7/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 403.0 ms\r\n01:12:32.168 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_5/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 347.0 ms\r\n01:12:32.176 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms/perf-gq1b/perf1b-broker2.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 7.0 ms\r\n01:12:32.611 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_6/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 435.0 ms\r\n01:12:33.052 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_3/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 441.0 ms\r\n01:12:33.464 [shutdown-thread-501-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_8/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 411.0 ms\r\n:\r\n:\r\n01:12:33.464 [shutdown-thread-501-1] INFO  c.y.p.broker.service.BrokerService   - Unloading 11 namespace-bundles completed in 3.846 seconds\r\n```\r\n\r\n**(B) Broker with zkSession = 1**\r\n\r\n```\r\n01:17:38.679 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_6/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 489.0 ms\r\n01:17:39.075 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_2/0x00000000_0xffffffff namespace-bundle with 1334 topics completed in 395.0 ms\r\n01:17:39.488 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_8/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 413.0 ms\r\n01:17:39.858 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_0/0x00000000_0xffffffff namespace-bundle with 1334 topics completed in 369.0 ms\r\n01:17:40.254 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_3/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 395.0 ms\r\n01:17:40.615 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_4/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 360.0 ms\r\n01:17:40.967 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_5/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 352.0 ms\r\n01:17:41.299 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_1/0x00000000_0xffffffff namespace-bundle with 1334 topics completed in 332.0 ms\r\n01:17:41.651 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun2_7/0x00000000_0xffffffff namespace-bundle with 1333 topics completed in 351.0 ms\r\n01:17:41.652 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms/perf-gq1b/perf1b-broker1.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 1.0 ms\r\n01:17:41.653 [shutdown-thread-69-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading pulsar/perf-gq1b/perf1b-broker1.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 1.0 ms\r\n:\r\n:\r\n01:17:41.653 [shutdown-thread-69-1] INFO  c.y.p.broker.service.BrokerService   - Unloading 11 namespace-bundles completed in 3.475 seconds\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/297882620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298015533","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-298015533","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":298015533,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODAxNTUzMw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-28T14:37:27Z","updated_at":"2017-04-28T14:37:27Z","author_association":"CONTRIBUTOR","body":"@merlimat @rdhabalia this seems to be something on the broker side, this continues to happen, and restarting clients does not improve anything, restarting brokers seems to help.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298015533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298018581","html_url":"https://github.com/apache/pulsar/issues/380#issuecomment-298018581","issue_url":"https://api.github.com/repos/apache/pulsar/issues/380","id":298018581,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODAxODU4MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-28T14:48:50Z","updated_at":"2017-04-28T14:48:50Z","author_association":"CONTRIBUTOR","body":"Can you enable debug logs on the broker side then? Or even better, take a heap dump in the broker after the problem shows up?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298018581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298078472","html_url":"https://github.com/apache/pulsar/issues/386#issuecomment-298078472","issue_url":"https://api.github.com/repos/apache/pulsar/issues/386","id":298078472,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODA3ODQ3Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-28T18:52:09Z","updated_at":"2017-04-28T18:52:09Z","author_association":"CONTRIBUTOR","body":"> Can we distribute partitions to multiple brokers automatically without splitting namespace bundle and unloading?\r\n\r\n\"Bundles\" were always meant to be an internal concept that users should never need to know about. They facilitate the service discovery caching mechanism so that each broker only needs to cache a the bundles assigned instead of the individual topics.\r\n\r\nThere are few workaround options : \r\n\r\n#### Enable auto-splitting\r\n\r\nIn `conf/broker.conf`:\r\n\r\n```properties\r\n# enable/disable namespace bundle auto split\r\nloadBalancerAutoBundleSplitEnabled=true\r\n```\r\n\r\nI think we should turn on this config by default.\r\n\r\nAlso take a look at the split thresholds : \r\n\r\n```properties\r\n# maximum topics in a bundle, otherwise bundle split will be triggered\r\nloadBalancerNamespaceBundleMaxTopics=1000\r\n\r\n# maximum sessions (producers + consumers) in a bundle, otherwise bundle split will be triggered\r\nloadBalancerNamespaceBundleMaxSessions=1000\r\n\r\n# maximum msgRate (in + out) in a bundle, otherwise bundle split will be triggered\r\nloadBalancerNamespaceBundleMaxMsgRate=1000\r\n\r\n# maximum bandwidth (in + out) in a bundle, otherwise bundle split will be triggered\r\nloadBalancerNamespaceBundleMaxBandwidthMbytes=100\r\n\r\n```\r\n\r\n#### Start with multiple bundles\r\n\r\nWhen creating a namespace you can specify upfront the number of bundles to start with : \r\n\r\n```shell\r\n$ bin/pulsar-admin namespaces create my-namespace --bundles 16\r\n```\r\n\r\nThe default is to start with 1 single bundle. It may be a good to have a configurable default number of bundles for a particular cluster, so that all the namespaces gets pre-created by default with more bundles.\r\n\r\n#### Automatic bundle reassignment after splitting\r\n\r\nCurrently, after a bundle split happens, the new bundles are not directly moved off the current broker. The load manager, in case it decides that the broker is overloaded, will be able to just unload the newly created bundles.\r\n\r\nAs part of the work on the ModularLoadManager, @bobbeyreese is working in adding the immediate unload after the splits. It would be great if you guys have cycles to try that out and provide feedback.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298078472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298098643","html_url":"https://github.com/apache/pulsar/issues/386#issuecomment-298098643","issue_url":"https://api.github.com/repos/apache/pulsar/issues/386","id":298098643,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODA5ODY0Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-28T20:27:40Z","updated_at":"2017-04-28T20:27:40Z","author_association":"CONTRIBUTOR","body":"@yush1ga In particular I was meaning to refer to this PR #385 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298098643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298146911","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-298146911","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":298146911,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODE0NjkxMQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-29T04:44:11Z","updated_at":"2017-04-29T04:44:11Z","author_association":"CONTRIBUTOR","body":"After making [concurrent bundle unloading change](https://github.com/rdhabalia/pulsar/commit/d5a863cd59daee5c8b25d3f06dfc2468bf6f32ab) : unload 2 bundles concurrently\r\n\r\nTotal-topics: 15K\r\ntotal-budles: 14\r\n\r\n**(1) 1 zk session : total = 3.791 seconds**\r\n\r\n```\r\n03:51:26.283 [pulsar-1-13] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_1/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1043.0 ms\r\n03:51:26.283 [pulsar-1-18] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_10/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1043.0 ms\r\n03:51:26.283 [pulsar-1-9] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_4/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1043.0 ms\r\n03:51:27.156 [pulsar-1-9] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_3/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 871.0 ms\r\n03:51:27.156 [pulsar-1-12] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_11/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 872.0 ms\r\n03:51:27.157 [pulsar-1-7] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_7/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 873.0 ms\r\n03:51:27.177 [pulsar-1-15] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms/perf-gq1b/perf1b-broker1.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 20.0 ms\r\n03:51:27.987 [pulsar-1-20] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_0/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 830.0 ms\r\n03:51:27.988 [pulsar-1-2] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_5/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 831.0 ms\r\n03:51:27.988 [pulsar-1-10] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_9/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 811.0 ms\r\n03:51:27.998 [pulsar-1-1] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading pulsar/perf-gq1b/perf1b-broker1.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 10.0 ms\r\n03:51:29.019 [pulsar-1-8] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_6/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1020.0 ms\r\n03:51:29.020 [pulsar-1-13] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_8/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1031.0 ms\r\n03:51:29.020 [pulsar-1-3] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun8_2/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1032.0 ms\r\n:\r\n03:51:29.021 [shutdown-thread-69-1] INFO  c.y.p.broker.service.BrokerService   - Unloading 14 namespace-bundles completed in 3.791 seconds\r\n\r\nSummary of each bundle unload time:\r\n1250 topics ->1043.0 ms\r\n1250 topics ->1043.0 ms\r\n1250 topics ->1043.0 ms\r\n1250 topics ->871.0 ms\r\n1250 topics ->872.0 ms\r\n1250 topics ->873.0 ms\r\n1250 topics ->830.0 ms\r\n1250 topics ->831.0 ms\r\n1250 topics ->811.0 ms\r\n1250 topics ->1020.0 ms\r\n1250 topics ->1031.0 ms\r\n1250 topics ->1032.0 ms\r\n```\r\n\r\n**(2) 16 zk-session: time to unload all bundles: 4.148 seconds**\r\n```\r\n04:25:22.151 [main] INFO  c.y.p.b.ManagedLedgerClientFactory   - Successfully created 16 ZooKeeper sesssion(s)\r\n:\r\n04:34:39.239 [pulsar-1-9] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_11/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1114.0 ms\r\n04:34:39.243 [pulsar-1-6] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_4/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1118.0 ms\r\n04:34:39.248 [pulsar-1-13] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_5/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1123.0 ms\r\n04:34:40.216 [pulsar-1-15] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_3/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 967.0 ms\r\n04:34:40.216 [pulsar-1-9] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_7/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 977.0 ms\r\n04:34:40.218 [pulsar-1-19] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_2/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 974.0 ms\r\n04:34:40.236 [pulsar-1-19] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading pulsar/perf-gq1b/perf1b-broker2.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 17.0 ms\r\n04:34:41.196 [pulsar-1-14] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_0/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 979.0 ms\r\n04:34:41.196 [pulsar-1-3] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_6/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 959.0 ms\r\n04:34:41.196 [pulsar-1-7] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_8/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 980.0 ms\r\n04:34:41.205 [pulsar-1-8] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms/perf-gq1b/perf1b-broker2.messaging.gq1.yahoo.com:4080/0x00000000_0xffffffff namespace-bundle with 0 topics completed in 9.0 ms\r\n04:34:42.261 [pulsar-1-17] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_1/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1064.0 ms\r\n04:34:42.261 [pulsar-1-6] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_10/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1055.0 ms\r\n04:34:42.262 [pulsar-1-11] INFO  c.y.p.broker.namespace.OwnedBundle   - Unloading cms-java-systest/perf-gq1b/simple-backlogun12_9/0x00000000_0xffffffff namespace-bundle with 1250 topics completed in 1065.0 ms\r\n04:34:42.262 [shutdown-thread-501-1] INFO  c.y.p.broker.service.BrokerService   - Unloading 14 namespace-bundles completed in 4.148 seconds\r\n\r\nSummary of each bundle unload time:\r\n1250 topics ->1114.0 ms\r\n1250 topics ->1118.0 ms\r\n1250 topics ->1123.0 ms\r\n1250 topics ->967.0 ms\r\n1250 topics ->977.0 ms\r\n1250 topics ->974.0 ms\r\n1250 topics ->979.0 ms\r\n1250 topics ->959.0 ms\r\n1250 topics ->980.0 ms\r\n1250 topics ->1064.0 ms\r\n1250 topics ->1055.0 ms\r\n1250 topics ->1065.0 ms\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298146911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298283034","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-298283034","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":298283034,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODI4MzAzNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-01T04:08:40Z","updated_at":"2017-05-01T04:08:40Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Thanks for doing the detailed test! I'm closing this PR then, since there is no advantage. \r\n\r\nProbably the improvement I saw when I did my tests several months ago was due to either:\r\n https://github.com/merlimat/pulsar/commit/a61ca62a395bb79dab0bfa0e98081ba1a26ea722\r\nor \r\nhttps://github.com/merlimat/pulsar/commit/9e175dd3cfb8cdf165004dd2b53616e224e60b0c\r\n\r\nThe 1st one I think it's kind of safe, though the 2nd commit is a bit tricky because that would remove the ledger fencing if there were no writes","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298283034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298380186","html_url":"https://github.com/apache/pulsar/pull/347#issuecomment-298380186","issue_url":"https://api.github.com/repos/apache/pulsar/issues/347","id":298380186,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODM4MDE4Ng==","user":{"login":"bobbeyreese","id":25467949,"node_id":"MDQ6VXNlcjI1NDY3OTQ5","avatar_url":"https://avatars.githubusercontent.com/u/25467949?v=4","gravatar_id":"","url":"https://api.github.com/users/bobbeyreese","html_url":"https://github.com/bobbeyreese","followers_url":"https://api.github.com/users/bobbeyreese/followers","following_url":"https://api.github.com/users/bobbeyreese/following{/other_user}","gists_url":"https://api.github.com/users/bobbeyreese/gists{/gist_id}","starred_url":"https://api.github.com/users/bobbeyreese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobbeyreese/subscriptions","organizations_url":"https://api.github.com/users/bobbeyreese/orgs","repos_url":"https://api.github.com/users/bobbeyreese/repos","events_url":"https://api.github.com/users/bobbeyreese/events{/privacy}","received_events_url":"https://api.github.com/users/bobbeyreese/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-01T17:26:06Z","updated_at":"2017-05-01T17:26:06Z","author_association":"CONTRIBUTOR","body":"@rdhabalia and I discussed that having an interface for the update condition was a bit overboard, so it's now put directly into the load manager. A test has been added for the load manager method `needBrokerDataUpdate`.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298380186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298736908","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-298736908","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":298736908,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODczNjkwOA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T19:30:33Z","updated_at":"2017-05-02T19:30:33Z","author_association":"CONTRIBUTOR","body":"Should mark delete move forward even if a reader is connected, but not reading messages?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298736908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298767743","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-298767743","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":298767743,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc2Nzc0Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T21:32:26Z","updated_at":"2017-05-02T21:32:26Z","author_association":"CONTRIBUTOR","body":"> Should mark delete move forward even if a reader is connected, but not reading messages?\r\n\r\n@saandrews  What do you mean exactly? Can you give an example?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298767743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298783640","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-298783640","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":298783640,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc4MzY0MA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T22:53:03Z","updated_at":"2017-05-02T22:53:03Z","author_association":"CONTRIBUTOR","body":"Assume there is a Reader and another persistent subscription connected and both start to drain from msg L1:E1. If Reader stoped calling receive after msg L1:E10(but still connected), but the durable subscription continue to call receive to a point where we rollover the ledger and the broker can delete the ledger because it's not needed for the durable sub anymore. At this point, do we keep the ledger around since the Reader is connected and has to drain from L1:E11 or bump the reader position to the new ledger L2:E1?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298783640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298784473","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-298784473","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":298784473,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc4NDQ3Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T22:57:56Z","updated_at":"2017-05-02T22:57:56Z","author_association":"CONTRIBUTOR","body":"> At this point, do we keep the ledger around since the Reader is connected and has to drain from L1:E11 or bump the reader position to the new ledger L2:E1?\r\n\r\nIn the PR I've submitted the data get deleted as if the TopicReader was not there. Internally, the topic reader has an in-memory only mark-delete position, that is used to expose in the stats. \r\n\r\nMy argument for not making the topic reader retain messages is that, if there is a disconnection, the topic reader is gone and the data will get deleted anyway. The mark-delete position will not immediately advance, but the next message will be the next currently available message.\r\n\r\nIf you want to use the topic reader (which is kind of a lower level API), you need to ensure the data is retained for a given amount of time, by configuring a non-zero retention time.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298784473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298784581","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-298784581","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":298784581,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc4NDU4MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T22:58:38Z","updated_at":"2017-05-02T22:58:38Z","author_association":"CONTRIBUTOR","body":"> .. or bump the reader position to the new ledger L2:E1 \r\n\r\nso, yes, the reader will be bumped on L2:E1 the next time it tries to read.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298784581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298785886","html_url":"https://github.com/apache/pulsar/pull/345#issuecomment-298785886","issue_url":"https://api.github.com/repos/apache/pulsar/issues/345","id":298785886,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc4NTg4Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T23:07:04Z","updated_at":"2017-05-02T23:07:04Z","author_association":"CONTRIBUTOR","body":"@bobbeyreese Can you resolve the minor conflict with master?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298785886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298787258","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-298787258","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":298787258,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc4NzI1OA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T23:15:05Z","updated_at":"2017-05-02T23:15:05Z","author_association":"CONTRIBUTOR","body":"OK, Thanks. 👍 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298787258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298792669","html_url":"https://github.com/apache/pulsar/pull/392#issuecomment-298792669","issue_url":"https://api.github.com/repos/apache/pulsar/issues/392","id":298792669,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc5MjY2OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T23:50:23Z","updated_at":"2017-05-02T23:50:23Z","author_association":"CONTRIBUTOR","body":"@rdhabalia that fix should be related to local-channel only (non-TCP). Though I just saw about 4.0.46.. I'll change that","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298792669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298793048","html_url":"https://github.com/apache/pulsar/pull/392#issuecomment-298793048","issue_url":"https://api.github.com/repos/apache/pulsar/issues/392","id":298793048,"node_id":"MDEyOklzc3VlQ29tbWVudDI5ODc5MzA0OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-02T23:52:55Z","updated_at":"2017-05-02T23:52:55Z","author_association":"CONTRIBUTOR","body":"> that fix should be related to local-channel only (non-TCP).\r\n\r\nYes, that's correct. So, it should be fine.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/298793048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299075011","html_url":"https://github.com/apache/pulsar/issues/395#issuecomment-299075011","issue_url":"https://api.github.com/repos/apache/pulsar/issues/395","id":299075011,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTA3NTAxMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-04T00:54:58Z","updated_at":"2017-05-04T00:54:58Z","author_association":"CONTRIBUTOR","body":"I think we either rely on the timeout to clear the queue or unblock the thread or we give error immediately. \r\n\r\nHaving a separate notification for when the space is available is not really needed and if the application is not careful, it will risk to buffer up a huge amount of messages. \r\n\r\nYou can still maintain the count of pending messages and queue it up before hitting the blocking point, or just increase the producer queue size and give error when it's full.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299075011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299075314","html_url":"https://github.com/apache/pulsar/issues/395#issuecomment-299075314","issue_url":"https://api.github.com/repos/apache/pulsar/issues/395","id":299075314,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTA3NTMxNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-04T00:57:45Z","updated_at":"2017-05-04T00:57:45Z","author_association":"CONTRIBUTOR","body":"To summarize my point: \r\n * If you are doing sync then you want to be blocked\r\n * If you are doing async, you might have 2 reasons for doing that: \r\n   1. You care about throughput and want to pipeline messages \r\n       Use `sendAsync()` with blocking when queue it's full\r\n   2. You have a truly async app --> Use `sendAsync()` with error when queue it's full","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299075314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299308967","html_url":"https://github.com/apache/pulsar/issues/395#issuecomment-299308967","issue_url":"https://api.github.com/repos/apache/pulsar/issues/395","id":299308967,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTMwODk2Nw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-04T21:05:28Z","updated_at":"2017-05-04T21:05:28Z","author_association":"CONTRIBUTOR","body":"I think this will complicate the client logic and implementing it in different client languages might also be a challenge. Looks like we can close it for now and revisit if there is a real use case to address it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299308967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299309272","html_url":"https://github.com/apache/pulsar/issues/395#issuecomment-299309272","issue_url":"https://api.github.com/repos/apache/pulsar/issues/395","id":299309272,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTMwOTI3Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-04T21:06:48Z","updated_at":"2017-05-04T21:06:48Z","author_association":"CONTRIBUTOR","body":"Ok - closing the issue ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299309272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299534369","html_url":"https://github.com/apache/pulsar/pull/396#issuecomment-299534369","issue_url":"https://api.github.com/repos/apache/pulsar/issues/396","id":299534369,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTUzNDM2OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-05T18:02:30Z","updated_at":"2017-05-05T18:02:30Z","author_association":"CONTRIBUTOR","body":"@jai1 Since the default is `false`, we should force it to true in the proxy","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299534369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299540297","html_url":"https://github.com/apache/pulsar/pull/396#issuecomment-299540297","issue_url":"https://api.github.com/repos/apache/pulsar/issues/396","id":299540297,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU0MDI5Nw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-05T18:25:47Z","updated_at":"2017-05-05T18:25:47Z","author_association":"CONTRIBUTOR","body":"@merlimat Actually, proxy can support multiple topics/tenants and I think it's better to fail the publish instead of blocking the thread because in this case it can impact performance of other topics as well. So, I think proxy should fail the publish instead blocking it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299540297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299540739","html_url":"https://github.com/apache/pulsar/pull/396#issuecomment-299540739","issue_url":"https://api.github.com/repos/apache/pulsar/issues/396","id":299540739,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU0MDczOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-05T18:27:33Z","updated_at":"2017-05-05T18:27:33Z","author_association":"CONTRIBUTOR","body":"sorry.. I meant the reverse... the default in client lib is true.. make sure we always set it to false (don't block)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299540739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299541021","html_url":"https://github.com/apache/pulsar/pull/396#issuecomment-299541021","issue_url":"https://api.github.com/repos/apache/pulsar/issues/396","id":299541021,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU0MTAyMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-05T18:28:39Z","updated_at":"2017-05-05T18:28:39Z","author_association":"CONTRIBUTOR","body":"@jai1 @rdhabalia One other issue is that in the docs we are not listing the producer/consumer config options\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299541021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299589129","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-299589129","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":299589129,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU4OTEyOQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-05T22:21:53Z","updated_at":"2017-05-05T22:21:53Z","author_association":"CONTRIBUTOR","body":"Travis build is now able to upload the binary into release. (verified in 1.17.5) so, closing the issue.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299589129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299595208","html_url":"https://github.com/apache/pulsar/pull/371#issuecomment-299595208","issue_url":"https://api.github.com/repos/apache/pulsar/issues/371","id":299595208,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTU5NTIwOA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-05T23:06:22Z","updated_at":"2017-05-05T23:06:22Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Can take a 2nd look at #366 as well ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299595208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299606246","html_url":"https://github.com/apache/pulsar/issues/355#issuecomment-299606246","issue_url":"https://api.github.com/repos/apache/pulsar/issues/355","id":299606246,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTYwNjI0Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-06T01:13:17Z","updated_at":"2017-05-06T01:13:17Z","author_association":"CONTRIBUTOR","body":"Merged in #371 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299606246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299922762","html_url":"https://github.com/apache/pulsar/pull/396#issuecomment-299922762","issue_url":"https://api.github.com/repos/apache/pulsar/issues/396","id":299922762,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTkyMjc2Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-08T16:47:15Z","updated_at":"2017-05-08T16:47:15Z","author_association":"CONTRIBUTOR","body":"@merlimat @rdhabalia - I have addressed all the comments - can I get a +1 on this?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299922762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299930581","html_url":"https://github.com/apache/pulsar/issues/398#issuecomment-299930581","issue_url":"https://api.github.com/repos/apache/pulsar/issues/398","id":299930581,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTkzMDU4MQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-08T17:17:00Z","updated_at":"2017-05-08T17:17:00Z","author_association":"CONTRIBUTOR","body":"@rdhabalia @merlimat @saandrews ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299930581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299931296","html_url":"https://github.com/apache/pulsar/issues/398#issuecomment-299931296","issue_url":"https://api.github.com/repos/apache/pulsar/issues/398","id":299931296,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTkzMTI5Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-08T17:19:36Z","updated_at":"2017-05-08T17:19:36Z","author_association":"CONTRIBUTOR","body":"is that in client or broker?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299931296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299931565","html_url":"https://github.com/apache/pulsar/issues/398#issuecomment-299931565","issue_url":"https://api.github.com/repos/apache/pulsar/issues/398","id":299931565,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTkzMTU2NQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-08T17:20:32Z","updated_at":"2017-05-08T17:20:32Z","author_association":"CONTRIBUTOR","body":"The GC pause happens in the broker.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299931565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299933340","html_url":"https://github.com/apache/pulsar/pull/299#issuecomment-299933340","issue_url":"https://api.github.com/repos/apache/pulsar/issues/299","id":299933340,"node_id":"MDEyOklzc3VlQ29tbWVudDI5OTkzMzM0MA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-08T17:27:08Z","updated_at":"2017-05-08T17:27:08Z","author_association":"CONTRIBUTOR","body":"@merlimat updated the [doc](https://github.com/yahoo/pulsar/pull/299/commits/b121bf067efaa5d69feb01a67e60e546f5f6e323) for ordering-violation behavior.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/299933340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300016091","html_url":"https://github.com/apache/pulsar/issues/398#issuecomment-300016091","issue_url":"https://api.github.com/repos/apache/pulsar/issues/398","id":300016091,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDAxNjA5MQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-08T23:10:25Z","updated_at":"2017-05-08T23:10:25Z","author_association":"CONTRIBUTOR","body":"I think main issue here is if property misbehaves in terms of redelivery then right now broker doesn’t have guard to protect it. \r\n- Recently we have seen that, One of the property has 80 consumers per topic in shared subscription and it intentionally doesn’t ack high percentage of messages back and set the ack-time out 10 minutes (for redelivery) which makes broker to add those message-Positions into messageReply-bucket and redeliver large number of messages to consumers. Now, due to default MAX unacked message limit = 50K at consumer and with 80 consumers broker allowed to dispatch 4million messages per topic and due to ack-time out broker keeps 4 million messages into memory and dispatching them as per consumer consume-rate. Multiple topics with similar behavior causes high gc pause at broker which makes situation even worse and it also cause restart of the broker due to zk-session lost (zk-keep-Alive).\r\n- It happens when client has high number of consumers and follow above unack behavior, and broker doesn’t guard against it. To protect this situation, broker should have unack-message limit at dispatcher level as well to allow N number of message-positions to be present into messageReply-bucket and as these position objects are in limited number, they won't sit in memory long and can avoid old-gc. I will create a PR to control message dispatching at dispatcher same as we have at consumer level.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300016091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300394167","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300394167","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300394167,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDM5NDE2Nw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-10T07:03:12Z","updated_at":"2017-05-10T07:37:12Z","author_association":"CONTRIBUTOR","body":"a. Try to ping 192.168.1.25 to see if it is reachable from ur m/c\r\nb. Try giving the URL as http://192.168.1.25:8080 instead of pulsar://192.168.1.25:6650\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300394167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300399310","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300399310","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300399310,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDM5OTMxMA==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-10T07:29:06Z","updated_at":"2017-05-10T07:29:06Z","author_association":"NONE","body":"@jai1    thanks for your  help!   I have  done what  you said. but  it  does not work!\r\n\r\na :  ping 192.168.1.25 is  ok! \r\n#############################\r\n\r\n正在 Ping 192.168.1.25 具有 32 字节的数据:\r\n来自 192.168.1.25 的回复: 字节=32 时间<1ms TTL=64\r\n来自 192.168.1.25 的回复: 字节=32 时间<1ms TTL=64\r\n来自 192.168.1.25 的回复: 字节=32 时间<1ms TTL=64\r\n来自 192.168.1.25 的回复: 字节=32 时间<1ms TTL=64\r\n\r\n192.168.1.25 的 Ping 统计信息:\r\n    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，\r\n往返行程的估计时间(以毫秒为单位):\r\n    最短 = 0ms，最长 = 0ms，平均 = 0ms\r\n\r\n\r\n\r\nb.  I  have changed   the   webServicePort=8181   in  standalone.conf  file .\r\n  i try  http://192.168.1.25:8181  and   http://192.168.1.25:4080   .    it  also   does not work!\r\n\r\n##########################################\r\n\r\n\r\n\r\n`2017-05-10 15:25:46.681 [DEBUG] [pulsar-client-io-1-1] o.a.netty.channel.ChannelManager - Adding key: http://192.168.1.25:8181 for channel [id: 0x941a4485, L:/192.168.1.170:59211 - R:/192.168.1.25:8181]\r\n2017-05-10 15:25:46.682 [DEBUG] [pulsar-client-io-1-1] c.y.p.client.impl.ConnectionPool - Connection for afistest25:6650 not found in cache\r\n2017-05-10 15:25:46.682 [WARN ] [pulsar-client-io-1-1] c.y.pulsar.client.impl.HandlerBase - [persistent://sample/standalone/ns1/my-topic] [null] Error connecting to broker: com.yahoo.pulsar.client.api.PulsarClientException: java.nio.channels.UnresolvedAddressException\r\n2017-05-10 15:25:46.683 [WARN ] [pulsar-client-io-1-1] c.y.pulsar.client.impl.HandlerBase - [persistent://sample/standalone/ns1/my-topic] [null] Could not get connection to broker: com.yahoo.pulsar.client.api.PulsarClientException: java.nio.channels.UnresolvedAddressException -- Will try again in 7.617 s\r\n2017-05-10 15:25:47.263 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Entry count for : http://192.168.1.25:8181 : 1\r\n2017-05-10 15:25:47.263 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 1 in 0 ms`\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300399310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300401382","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300401382","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300401382,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDQwMTM4Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-10T07:38:50Z","updated_at":"2017-05-10T07:38:50Z","author_association":"CONTRIBUTOR","body":"From the error message, it looks like a network configuration issue- not a Pulsar conf issue. \r\nSo I would suggest reverting all conf file changes and run the client in the same M/C as the broker with service URL as http://localhost:8080/","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300401382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300420719","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300420719","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300420719,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDQyMDcxOQ==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-10T09:02:11Z","updated_at":"2017-05-10T16:53:14Z","author_association":"NONE","body":"@jai1   I  have reverted all  config  file  ,only  change  webServicePort=8181 . and run  pulsar  client  in same   \r\nmachine.    but  connect  time  out  exception  occur .\r\n\r\n```\r\n2017-05-10 16:56:36.166 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Entry count for : http://localhost:8181 : 1\r\n2017-05-10 16:56:36.167 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 1 in 0 ms\r\n2017-05-10 16:56:37.266 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Entry count for : http://localhost:8181 : 1\r\n2017-05-10 16:56:37.267 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 1 in 0 ms\r\n2017-05-10 16:56:38.366 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Entry count for : http://localhost:8181 : 1\r\n2017-05-10 16:56:38.367 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 1 in 0 ms\r\n2017-05-10 16:56:39.467 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Entry count for : http://localhost:8181 : 1\r\n2017-05-10 16:56:39.467 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 1 in 0 ms\r\n2017-05-10 16:56:40.567 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Entry count for : http://localhost:8181 : 1\r\n2017-05-10 16:56:40.567 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 1 in 0 ms\r\n2017-05-10 16:56:40.854 [WARN ] [pulsar-client-io-1-1] c.y.pulsar.client.impl.HandlerBase - [persistent://sample/standalone/ns1/my-topic] [null] Error connecting to broker: com.yahoo.pulsar.client.api.PulsarClientException: io.netty.channel.ConnectTimeoutException: connection timed out: afistest12/202.102.110.204:6650\r\n2017-05-10 16:56:40.855 [INFO ] [pulsar-client-io-1-1] c.y.pulsar.client.impl.ProducerImpl - [persistent://sample/standalone/ns1/my-topic] Producer creation failed for producer 0\r\nException in thread \"main\" com.yahoo.pulsar.client.api.PulsarClientException: java.util.concurrent.CompletionException: com.yahoo.pulsar.client.api.PulsarClientException: io.netty.channel.ConnectTimeoutException: connection timed out: afistest12/202.102.110.204:6650\r\n        at com.yahoo.pulsar.client.impl.HandlerBase.handleConnectionError(HandlerBase.java:80)\r\n        at java.util.concurrent.CompletableFuture.uniExceptionally(CompletableFuture.java:870)\r\n        at java.util.concurrent.CompletableFuture$UniExceptionally.tryFire(CompletableFuture.java:852)\r\n        at java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:474)\r\n        at java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1977)\r\n        at com.yahoo.pulsar.client.impl.ConnectionPool.lambda$createConnection$5(ConnectionPool.java:135)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:514)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:507)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:486)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:427)\r\n        at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:129)\r\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe$1.run(AbstractEpollStreamChannel.java:715)\r\n        at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38)\r\n        at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:408)\r\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:140)\r\n        at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.util.concurrent.CompletionException: com.yahoo.pulsar.client.api.PulsarClientException: io.netty.channel.ConnectTimeoutException: connection timed out: afistest12/202.102.110.204:6650\r\n        at java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:326)\r\n        at java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:338)\r\n        at java.util.concurrent.CompletableFuture.uniRelay(CompletableFuture.java:911)\r\n        at java.util.concurrent.CompletableFuture$UniRelay.tryFire(CompletableFuture.java:899)\r\n        ... 16 more\r\nCaused by: com.yahoo.pulsar.client.api.PulsarClientException: io.netty.channel.ConnectTimeoutException: connection timed out: afistest12/202.102.110.204:6650\r\n        ... 14 more\r\nCaused by: io.netty.channel.ConnectTimeoutException: connection timed out: afistest12/202.102.110.204:6650\r\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe$1.run(AbstractEpollStreamChannel.java:713)\r\n ```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300420719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300424515","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300424515","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300424515,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDQyNDUxNQ==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-10T09:16:52Z","updated_at":"2017-05-10T16:53:30Z","author_association":"NONE","body":"I  have  find     netty  exception  .  whatever   I  use  http  protocal  or  pulsar  protocal  .\r\n\r\n```\r\n##############################################################\r\n2017-05-10 17:06:15.062 [WARN ] [pulsar-client-io-1-1] c.y.pulsar.client.impl.HttpClient - [http://localhost:8181/admin/persistent/sample/standalone/ns1/my-topic/partitions] Failed to perform http request: syscall:getsockopt(...): localhost/0:0:0:0:0:0:0:1:8181\r\n2017-05-10 17:06:15.063 [WARN ] [pulsar-client-io-1-1] c.y.p.client.impl.PulsarClientImpl - [persistent://sample/standalone/ns1/my-topic] Failed to get partitioned topic metadata: com.yahoo.pulsar.client.api.PulsarClientException: java.net.ConnectException: syscall:getsockopt(...): localhost/0:0:0:0:0:0:0:1:8181\r\nException in thread \"main\" 2017-05-10 17:06:15.063 [WARN ] [pulsar-client-io-1-1] c.y.pulsar.client.impl.HttpClient - [http://localhost:8181/admin/persistent/sample/standalone/ns1/my-topic/partitions] Error during HTTP get request: java.net.ConnectException: syscall:getsockopt(...): localhost/0:0:0:0:0:0:0:1:8181\r\ncom.yahoo.pulsar.client.api.PulsarClientException: java.net.ConnectException: syscall:getsockopt(...): localhost/0:0:0:0:0:0:0:1:8181\r\n        at com.yahoo.pulsar.client.impl.HttpClient$2.onThrowable(HttpClient.java:140)\r\n        at org.asynchttpclient.netty.NettyResponseFuture.abort(NettyResponseFuture.java:246)\r\n        at org.asynchttpclient.netty.channel.NettyConnectListener.onFailure(NettyConnectListener.java:164)\r\n        at org.asynchttpclient.netty.request.NettyChannelConnector$1.onFailure(NettyChannelConnector.java:103)\r\n        at org.asynchttpclient.netty.SimpleChannelFutureListener.operationComplete(SimpleChannelFutureListener.java:28)\r\n        at org.asynchttpclient.netty.SimpleChannelFutureListener.operationComplete(SimpleChannelFutureListener.java:20)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:514)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:507)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:486)\r\n        at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:427)\r\n        at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:129)\r\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.fulfillConnectPromise(AbstractEpollStreamChannel.java:770)\r\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.finishConnect(AbstractEpollStreamChannel.java:789)\r\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollOutReady(AbstractEpollStreamChannel.java:806)\r\n        at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:379)\r\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:305)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:140)\r\n        at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: java.net.ConnectException: syscall:getsockopt(...): localhost/0:0:0:0:0:0:0:1:8181\r\n        at org.asynchttpclient.netty.channel.NettyConnectListener.onFailure(NettyConnectListener.java:162)\r\n        ... 16 more\r\nCaused by: java.net.ConnectException: syscall:getsockopt(...): localhost/0:0:0:0:0:0:0:1:8181\r\n        at io.netty.channel.unix.Socket.finishConnect(...)(Unknown Source)\r\n2017-05-10 17:06:15.937 [DEBUG] [pool-1-thread-1] o.a.netty.channel.DefaultChannelPool - Closed 0 connections out of 0 in 0 ms\r\n###############################################\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300424515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300546837","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300546837","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300546837,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDU0NjgzNw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-10T17:00:06Z","updated_at":"2017-05-10T17:00:06Z","author_association":"CONTRIBUTOR","body":"@sunning9001 I think the problem might be related to the broker hostname. After the service discovery, client will connect directly to the address that the broker itself it's advertising.\r\n\r\nIf the broker has multiple IPs or if the broker hostname does not match the machine public IP, the clients will not be able to connect to broker.\r\n\r\nYou can control which IP/hostname a given broker should advertise with this setting in the `conf/broker.conf` (or `conf/standalone.conf` if running the pulsar standalone service): \r\n\r\n```properties\r\n# Hostname or IP address the service advertises to the outside world. \r\n# If not set, the value of InetAddress.getLocalHost().getHostName() is used.\r\nadvertisedAddress=\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300546837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300658809","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300658809","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300658809,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDY1ODgwOQ==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T01:41:18Z","updated_at":"2017-05-11T01:42:13Z","author_association":"NONE","body":"@merlimat  thank you  very  much!     yes, you  are right.   \r\n\r\n\r\n\r\n\r\nnow, pulsar  client  can  connect  broker  sucesssful. but  when  pulsur  client  send  messages to broker. \r\nbroker  can not  connect  to  bookkeeper   for storing  messages.    because   broker   try  to connect  public  IP.   I  view   conf/bookkeeper.conf   file ,but  I do not  know   which  setting  to  be  changed.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n2017-05-11 09:32:32,531 - WARN  - [main:ZkBookieRackAffinityMapping@142] - Error getting bookie info from zk, using default rack node /default-rack: KeeperErrorCode = NoNode for /bookies\r\n2017-05-11 09:32:32,532 - INFO  - [main:RackawareEnsemblePlacementPolicy@344] - Initialize rackaware ensemble placement policy @ <Bookie:202.102.110.204:0> @ /default-rack : com.yahoo.pulsar.zookeeper.ZkBookieRackAffinityMapping.\r\n2017-05-11 09:32:32,572 - WARN  - [BookKeeperClientWorker-38-1:ZkBookieRackAffinityMapping@142] - Error getting bookie info from zk, using default rack node /default-rack: KeeperErrorCode = NoNode for /bookies\r\n2017-05-11 09:32:32,573 - INFO  - [BookKeeperClientWorker-38-1:NetworkTopology@394] **- Adding a new node: /default-rack/202.102.110.204:3181**\r\n\r\n\r\n\r\n\r\n\r\n\r\n2017-05-11 09:37:54,066 - ERROR - [bookkeeper-io-31-3:PerChannelBookieClient$2@284] - Could not connect to bookie: [id: 0xe2fc1d56, L:/192.168.1.12:39511]/202.102.110.204:3181, current state CONNECTING : \r\nio.netty.channel.ConnectTimeoutException: connection timed out: /202.102.110.204:3181\r\n        at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe$1.run(AbstractEpollStreamChannel.java:713)\r\n        at io.netty.util.concurrent.PromiseTask$RunnableAdapter.call(PromiseTask.java:38)\r\n        at io.netty.util.concurrent.ScheduledFutureTask.run(ScheduledFutureTask.java:120)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:408)\r\n        at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:309)\r\n        at io.netty.util.concurrent.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:140)\r\n        at io.netty.util.concurrent.DefaultThreadFactory$DefaultRunnableDecorator.run(DefaultThreadFactory.java:144)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n2017-05-11 09:37:54,068 - WARN  - [BookKeeperClientWorker-40-1:PendingAddOp@219] **- Write did not succeed: L95 E0 on 202.102.110.204:3181, rc = -8**\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300658809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300658998","html_url":"https://github.com/apache/pulsar/pull/399#issuecomment-300658998","issue_url":"https://api.github.com/repos/apache/pulsar/issues/399","id":300658998,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDY1ODk5OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T01:42:40Z","updated_at":"2017-05-11T01:42:40Z","author_association":"CONTRIBUTOR","body":"@nkurihar addressed comments.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300658998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300685587","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300685587","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300685587,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDY4NTU4Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T05:24:30Z","updated_at":"2017-05-11T05:24:30Z","author_association":"CONTRIBUTOR","body":"@sunning9001 yes, it looks like the same issue on the bookie as well.. bookies are advertising the private IP.\r\n\r\nYou can fix that by specifying which network interface you want the bookie to listen. In `conf/bookkeeper.conf`:\r\n\r\n```properties\r\n# Set the network interface that the bookie should listen on.\r\n# If not set, the bookie will listen on all interfaces.\r\n#listeningInterface=eth0\r\n```\r\nSo if you don't set the `listeningInterface` it will listen on `0.0.0.0`, but it will advertise only the IP associated with the hostname (which typically is the correct choice).\r\n\r\nJust out of curiosity, what kind of environment are you testing into? Any cloud provider?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300685587/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300701753","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300701753","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300701753,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDcwMTc1Mw==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T07:06:01Z","updated_at":"2017-05-11T07:06:01Z","author_association":"NONE","body":"@merlimat \r\nI  test  the example  on  VMware   with  ubuntu.If  set  isteningInterface=eth0 .  but  broker still  connect  to  public  IP.   (202.102.110.204)     and  more  , the  public  ip  (202.102.110.204)  not  belong to us.\r\n \r\nI   ask  for  help  from  my  colleague,   he  also  do not  know  the reason.\r\n\r\n\r\n[zgdev@afistest12 pulsar]$ lsof -i:3181\r\nCOMMAND  PID  USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME\r\njava    1080 zgdev  170u  IPv4 29465972      0t0  TCP *:bmcpatrolagent (LISTEN)\r\njava    1080 zgdev  266u  IPv4 29481004      0t0  TCP 192.168.1.12:47521->202.102.110.204:bmcpatrolagent (SYN_SENT)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300701753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300714033","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300714033","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300714033,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDcxNDAzMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T08:05:04Z","updated_at":"2017-05-11T08:05:04Z","author_association":"CONTRIBUTOR","body":"@sunning9001 Instead of using `eth0` directly, try one thing. \r\n\r\n 1. On the bookie VM, do `ifconfig` and get the list of interfaces and the IPs\r\n 2. From the broker VM, find out which of the bookie IPs is pingable \r\n 3. Configure bookie to listen on the interface name associated with that IP","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300714033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300730360","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300730360","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300730360,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDczMDM2MA==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T09:08:36Z","updated_at":"2017-05-11T09:08:36Z","author_association":"NONE","body":"@merlimat    still  do not  work !\r\n\r\n1.   ifconfig   result   below:\r\n\r\n[zgdev@afistest12 pulsar]$ ifconfig\r\neth0      Link encap:Ethernet  HWaddr 00:50:56:8B:7C:10  \r\n          **inet addr:192.168.1.12**  Bcast:192.168.1.255  Mask:255.255.255.0\r\n          inet6 addr: fe80::250:56ff:fe8b:7c10/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:119557242 errors:2 dropped:2 overruns:0 frame:0\r\n          TX packets:105561891 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000 \r\n          RX bytes:15031457217 (13.9 GiB)  TX bytes:12340102758 (11.4 GiB)\r\n\r\nlo        Link encap:Local Loopback  \r\n          inet addr:127.0.0.1  Mask:255.0.0.0\r\n          inet6 addr: ::1/128 Scope:Host\r\n          UP LOOPBACK RUNNING  MTU:16436  Metric:1\r\n          RX packets:70337072 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:70337072 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:13858757227 (12.9 GiB)  TX bytes:13858757227 (12.9 GiB)\r\n\r\n[zgdev@afistest12 pulsar]$ \r\n\r\n\r\n2.  telnet  192.168.1.12  3181  is ok\r\n\r\n\r\n[zgdev@afistest12 ~]$ telnet   192.168.1.12  3181\r\nTrying 192.168.1.12...\r\nConnected to 192.168.1.12.\r\nEscape character is '^]'.\r\n\r\n\r\n3.  set isteningInterface=eth0\r\n`","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300730360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300859144","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300859144","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300859144,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDg1OTE0NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-11T17:25:17Z","updated_at":"2017-05-11T17:25:17Z","author_association":"CONTRIBUTOR","body":"Ok, then that's very strange from where the IP `202.102.110.204` comes from.. \r\n\r\nCan you do one quick last test? Get the list of registered bookie machines: \r\n\r\n```shell\r\n$ bin/bookkeeper shell listbookies -rw -h\r\n```\r\n\r\nThat should give you the list of IP and hostnames that the bookies are advertising. \r\n\r\nMaybe a solution for your issue would be to set the hostname in the bookie VM and then add the hostname in the `/etc/hosts` of the bookie VM.\r\n\r\nExample:\r\n\r\n```\r\n$ sudo hostname my-bookie-1\r\n\r\n$ echo \"my-bookie-1    192.168.1.12\" | sudo tee -a /etc/hosts\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300859144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300960293","html_url":"https://github.com/apache/pulsar/pull/399#issuecomment-300960293","issue_url":"https://api.github.com/repos/apache/pulsar/issues/399","id":300960293,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDk2MDI5Mw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-12T01:34:09Z","updated_at":"2017-05-12T19:13:30Z","author_association":"CONTRIBUTOR","body":"@saandrews addressed the comment.\r\n\r\nAlso, adding test result mentioned at #398 before and after change :\r\n\r\nBefore change:\r\n1. GC: ~20sec old gc\r\n![screenshot from without-changes](http://i.imgur.com/1RZnI6F.png)\r\n\r\n2. message delivery: 120K\r\n![screenshot from without-changes](http://i.imgur.com/S0S6JT5.png)\r\n\r\n\r\nAfter change:\r\n1. GC: 1.5 sec young gc\r\n![screenshot from without-changes](http://i.imgur.com/E1g35Jp.png)\r\n\r\n2. Message delivery : 60K\r\n![screenshot from without-changes](http://i.imgur.com/SSv87PZ.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300960293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300963356","html_url":"https://github.com/apache/pulsar/issues/401#issuecomment-300963356","issue_url":"https://api.github.com/repos/apache/pulsar/issues/401","id":300963356,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMDk2MzM1Ng==","user":{"login":"sunning9001","id":18050529,"node_id":"MDQ6VXNlcjE4MDUwNTI5","avatar_url":"https://avatars.githubusercontent.com/u/18050529?v=4","gravatar_id":"","url":"https://api.github.com/users/sunning9001","html_url":"https://github.com/sunning9001","followers_url":"https://api.github.com/users/sunning9001/followers","following_url":"https://api.github.com/users/sunning9001/following{/other_user}","gists_url":"https://api.github.com/users/sunning9001/gists{/gist_id}","starred_url":"https://api.github.com/users/sunning9001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunning9001/subscriptions","organizations_url":"https://api.github.com/users/sunning9001/orgs","repos_url":"https://api.github.com/users/sunning9001/repos","events_url":"https://api.github.com/users/sunning9001/events{/privacy}","received_events_url":"https://api.github.com/users/sunning9001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-12T01:57:31Z","updated_at":"2017-05-12T01:57:31Z","author_association":"NONE","body":"@merlimat  yes, It is  very   strange  why  the  public  ip  202.102.110.204   appears  here.\r\n\r\n  caused by the DNS  ???   I  don't  know  about  it.\r\n\r\n1、\r\n\r\n[root@my-bookie-1 ~]# echo \"my-bookie-1    192.168.1.12\" | sudo tee -a /etc/hosts\r\n**my-bookie-1    192.168.1.12**\r\n\r\n2、  set   my-bookie-1  in  bookie  VM ,then   do  below  shell  command.\r\n\r\n[zgdev@afistest12 pulsar]$ sh  bin/bookkeeper shell listbookies -rw -h\r\nJMX enabled by default\r\n**202.102.110.204:3181    202.102.110.204**\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/300963356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]