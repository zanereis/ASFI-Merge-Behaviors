[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509048821","html_url":"https://github.com/apache/iceberg/pull/267#issuecomment-509048821","issue_url":"https://api.github.com/repos/apache/iceberg/issues/267","id":509048821,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTA0ODgyMQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T01:27:25Z","updated_at":"2019-07-08T01:27:25Z","author_association":"COLLABORATOR","body":"Yes, according to doc [here](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.compile.CompileOptions.html), the default encoding is set to null, which uses the system default encoding.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509048821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509074557","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509074557","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509074557,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTA3NDU1Nw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T04:28:42Z","updated_at":"2019-07-08T04:28:42Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi , @rdblue  I see that Jackson is bundled and shaded jar.  I also see that Jackson probably uses Service loader since I see `META-INF/services/com.fasterxml.jackson.core.ObjectCodec` bundled in the fat jar.  Today in our fat jar we do not handle relocating service files. We probably should, but to be sure that is the problem. Can you please create a ticket with the relevant exception? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509074557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509293506","html_url":"https://github.com/apache/iceberg/issues/175#issuecomment-509293506","issue_url":"https://api.github.com/repos/apache/iceberg/issues/175","id":509293506,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTI5MzUwNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T16:18:33Z","updated_at":"2019-07-08T16:18:33Z","author_association":"CONTRIBUTOR","body":"@vrozov, where are these used? I'm not aware of anything that would require Netty.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509293506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509330923","html_url":"https://github.com/apache/iceberg/pull/270#issuecomment-509330923","issue_url":"https://api.github.com/repos/apache/iceberg/issues/270","id":509330923,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTMzMDkyMw==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T18:03:17Z","updated_at":"2019-07-08T18:03:17Z","author_association":"CONTRIBUTOR","body":"@rdblue @rdsr for approval and merge","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509330923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509341609","html_url":"https://github.com/apache/iceberg/pull/270#issuecomment-509341609","issue_url":"https://api.github.com/repos/apache/iceberg/issues/270","id":509341609,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTM0MTYwOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T18:34:24Z","updated_at":"2019-07-08T18:34:24Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @dansanduleac!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509341609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509364956","html_url":"https://github.com/apache/iceberg/pull/268#issuecomment-509364956","issue_url":"https://api.github.com/repos/apache/iceberg/issues/268","id":509364956,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTM2NDk1Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T19:45:09Z","updated_at":"2019-07-08T19:45:09Z","author_association":"CONTRIBUTOR","body":"+1, thanks!\r\n\r\nI should also note that the hash function is validated in `TestBucketing`, so we know that the hash of the test UUID still matches the value in the spec.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509364956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509382889","html_url":"https://github.com/apache/iceberg/issues/34#issuecomment-509382889","issue_url":"https://api.github.com/repos/apache/iceberg/issues/34","id":509382889,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTM4Mjg4OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T20:39:14Z","updated_at":"2019-07-08T20:39:14Z","author_association":"CONTRIBUTOR","body":"This was implemented in #74.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509382889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509390581","html_url":"https://github.com/apache/iceberg/issues/175#issuecomment-509390581","issue_url":"https://api.github.com/repos/apache/iceberg/issues/175","id":509390581,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTM5MDU4MQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T21:02:48Z","updated_at":"2019-07-08T21:02:48Z","author_association":"MEMBER","body":"@rdblue See https://github.com/apache/incubator-iceberg/blob/master/core/src/main/java/org/apache/iceberg/RemoveSnapshots.java#L25. It is exactly the problem that #175 supposed to address: accidental usage of transitive dependencies. It also looks that dependency on hadoop-client is excessive and dependency on hadoop-common will be sufficient.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509390581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509400830","html_url":"https://github.com/apache/iceberg/issues/175#issuecomment-509400830","issue_url":"https://api.github.com/repos/apache/iceberg/issues/175","id":509400830,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQwMDgzMA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T21:34:12Z","updated_at":"2019-07-08T21:34:12Z","author_association":"MEMBER","body":"Please note that due to https://github.com/palantir/gradle-baseline/issues/567 `com.palantir.baseline-exact-dependencies` can't be used to check for implicit dependencies.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509400830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509403032","html_url":"https://github.com/apache/iceberg/pull/194#issuecomment-509403032","issue_url":"https://api.github.com/repos/apache/iceberg/issues/194","id":509403032,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQwMzAzMg==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T21:41:35Z","updated_at":"2019-07-08T21:41:35Z","author_association":"CONTRIBUTOR","body":"Is there a world where we can keep this feature behind a feature flag so that development can proceed forward with reasonably sized diffs and merges?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509403032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509403692","html_url":"https://github.com/apache/iceberg/pull/194#issuecomment-509403692","issue_url":"https://api.github.com/repos/apache/iceberg/issues/194","id":509403692,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQwMzY5Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T21:43:48Z","updated_at":"2019-07-08T21:43:48Z","author_association":"CONTRIBUTOR","body":"@mccheah, we do intend to move forward with reasonable size merges. For this, I'm not sure that it is worth updating it because we don't really know what the module structure will be for Arrow yet, and that will depend on the implementation. We can definitely update this to be in its own `iceberg-arrow` module and add the Arrow dependency to core, but since this PR is mostly to demonstrate the conversion I wasn't sure that was worth spending time on.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509403692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509405051","html_url":"https://github.com/apache/iceberg/pull/194#issuecomment-509405051","issue_url":"https://api.github.com/repos/apache/iceberg/issues/194","id":509405051,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQwNTA1MQ==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T21:48:46Z","updated_at":"2019-07-08T21:48:46Z","author_association":"CONTRIBUTOR","body":"I think it would be appropriate to clarify what the plan is for integrating Arrow with Iceberg and the data format integrations. I'll follow up on https://github.com/apache/incubator-iceberg/issues/9.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509405051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509405686","html_url":"https://github.com/apache/iceberg/issues/9#issuecomment-509405686","issue_url":"https://api.github.com/repos/apache/iceberg/issues/9","id":509405686,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQwNTY4Ng==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T21:51:02Z","updated_at":"2019-07-08T21:51:02Z","author_association":"CONTRIBUTOR","body":"Is there a plan for how we're going to tackle this? So far I've only seen concrete work in #194. Is there a plan to build out the entire Arrow integration? Perhaps it's appropriate to break down this issue into multiple sub-issues so that PRs can target the sub-issues - then we can merge everything knowing that each piece will be part of a known complete picture?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509405686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509414579","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509414579","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509414579,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQxNDU3OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T22:26:08Z","updated_at":"2019-07-08T22:26:08Z","author_association":"CONTRIBUTOR","body":"@rdsr you are right, `META-INF/services/com.fasterxml.jackson.core.ObjectCodec` isn't relocated correctly. However, adding `mergeServiceFiles` didn't work for me. I am not sure we had to change the version [here](https://github.com/apache/incubator-iceberg/pull/241#discussion_r301324047).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509414579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509419675","html_url":"https://github.com/apache/iceberg/issues/9#issuecomment-509419675","issue_url":"https://api.github.com/repos/apache/iceberg/issues/9","id":509419675,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQxOTY3NQ==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T22:47:32Z","updated_at":"2019-07-08T22:47:32Z","author_association":"CONTRIBUTOR","body":"@mccheah We have started working on a more complete integration with arrow and we'll be following up incrementally as things progress.  @anjalinorwood and @samarthjain are working on this here at Netflix.  There are still some things that will need to be proved out, but plan to try to chunk the work into smaller pieces for better review and comment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509419675/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509439852","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-509439852","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":509439852,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQzOTg1Mg==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T00:22:26Z","updated_at":"2019-07-09T00:22:26Z","author_association":"CONTRIBUTOR","body":"I guess this fixes #160  too.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509439852/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509442295","html_url":"https://github.com/apache/iceberg/pull/267#issuecomment-509442295","issue_url":"https://api.github.com/repos/apache/iceberg/issues/267","id":509442295,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ0MjI5NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T00:36:11Z","updated_at":"2019-07-09T00:36:11Z","author_association":"CONTRIBUTOR","body":"Fixed. Thanks @chenjunjiedada!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509442295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509462489","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-509462489","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":509462489,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ2MjQ4OQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T02:29:49Z","updated_at":"2019-07-09T02:29:49Z","author_association":"MEMBER","body":"What jar presto should include as a dependency?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509462489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509468377","html_url":"https://github.com/apache/iceberg/issues/266#issuecomment-509468377","issue_url":"https://api.github.com/repos/apache/iceberg/issues/266","id":509468377,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ2ODM3Nw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T03:02:58Z","updated_at":"2019-07-09T03:02:58Z","author_association":"COLLABORATOR","body":"Close this via 37e33ce2b10d76d45c689641c1882bcf6e72829f","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509468377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509470507","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509470507","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509470507,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTQ3MDUwNw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T03:15:39Z","updated_at":"2019-07-09T03:15:39Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi , when I add `mergeServiceFiles()` I see that  service files are correctly relocated. \r\n```\r\n  -rw-rw-rw-        69   8-Jul-2019  20:00:52  META-INF/services/org.apache.iceberg.shaded.com.fasterxml.jackson.core.ObjectCodec\r\n  -rw-rw-rw-        64   8-Jul-2019  20:00:52  META-INF/services/org.apache.iceberg.shaded.com.fasterxml.jackson.core.JsonFactory\r\n  -rw-rw-rw-       844   8-Jul-2019  20:00:52  META-INF/services/org.apache.iceberg.shaded.org.apache.orc.DataMask$Provider\r\n```\r\nThough I haven't ran a complete end to end test with the spark-runtime-artifact. I'll do so tomorrow and let you know","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509470507/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509531214","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509531214","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509531214,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTUzMTIxNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T07:48:22Z","updated_at":"2019-07-09T07:48:22Z","author_association":"CONTRIBUTOR","body":"@rdsr, thanks for trying. Yes, service files were relocated correctly but this didn't solve the issue. Let me know if you experience the same exception while running.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509531214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509708156","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509708156","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509708156,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTcwODE1Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T16:13:59Z","updated_at":"2019-07-09T16:13:59Z","author_association":"CONTRIBUTOR","body":"@vrozov, can you give more context for why you'd like to make this change? It is strange to make an `Iterable` produce only one iterator and I don't think there is a compelling reason to do this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509708156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509716998","html_url":"https://github.com/apache/iceberg/issues/96#issuecomment-509716998","issue_url":"https://api.github.com/repos/apache/iceberg/issues/96","id":509716998,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTcxNjk5OA==","user":{"login":"omalley","id":206536,"node_id":"MDQ6VXNlcjIwNjUzNg==","avatar_url":"https://avatars.githubusercontent.com/u/206536?v=4","gravatar_id":"","url":"https://api.github.com/users/omalley","html_url":"https://github.com/omalley","followers_url":"https://api.github.com/users/omalley/followers","following_url":"https://api.github.com/users/omalley/following{/other_user}","gists_url":"https://api.github.com/users/omalley/gists{/gist_id}","starred_url":"https://api.github.com/users/omalley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omalley/subscriptions","organizations_url":"https://api.github.com/users/omalley/orgs","repos_url":"https://api.github.com/users/omalley/repos","events_url":"https://api.github.com/users/omalley/events{/privacy}","received_events_url":"https://api.github.com/users/omalley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T16:39:23Z","updated_at":"2019-07-09T16:39:23Z","author_association":"CONTRIBUTOR","body":"I can't make ORC depend on Avro, Parquet, or Iceberg, so I don't see what you are asking for.\r\n\r\nIf the ask is to make a version of ORC's Java library that can run without Hadoop, it would be a bit touchy. In particular, our main API uses FileSystem, Configuration, and Path from Hadoop. We've talked about making a no-Hadoop set of shims, but is that what you are asking for?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509716998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509722786","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509722786","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509722786,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTcyMjc4Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T16:56:07Z","updated_at":"2019-07-09T16:56:07Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, can you post the error you're seeing somewhere?\r\n\r\nI'm not sure that this is caused by service files. As far as I know, Iceberg shouldn't be relying on looking up implementations with service files, and Iceberg shades its Jackson to be independent of the version that Spark uses. That is why it was safe to change the version when fixing consistency in transitive depdnencies. These classes are all relocated.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509722786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509723374","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509723374","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509723374,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTcyMzM3NA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T16:57:46Z","updated_at":"2019-07-09T16:57:46Z","author_association":"CONTRIBUTOR","body":"@rdblue I gave more details in [this](https://github.com/apache/incubator-iceberg/pull/241#discussion_r301324047) thread","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509723374/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509726319","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509726319","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509726319,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTcyNjMxOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T17:06:33Z","updated_at":"2019-07-09T17:06:33Z","author_association":"CONTRIBUTOR","body":"Okay, it looks like what's happening is that Jackson 2.7.9 is loading Spark's Scala Jackson module and that its version matches where it is being loaded. The odd thing is that the logs for Jackson 2.7.9 are not showing shaded class names, so somehow you're pulling in the real Jackson 2.7.9.\r\n\r\nHow are you adding the iceberg-spark-runtime Jar? Are you copying it into `jars`, or are you pulling it in as a dependency? I think it may be that we haven't removed the shaded dependencies from its declared dependencies, so you're getting a copy of Jackson 2.7.9 that you don't actually need, and that's breaking Spark's included Scala module for Jackson.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509726319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509728822","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509728822","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509728822,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTcyODgyMg==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T17:14:22Z","updated_at":"2019-07-09T22:01:30Z","author_association":"MEMBER","body":"The change helps to avoid resource shortage: as it is `AvroIterable` that is `Closeable`, not the `Iterator`, resources acquired in the `iterator()` won't be closed until `AvroIterable` itself is closed and in the case where multiple iterators are obtained from the same `AvroIterable`, there will be multiple file handles/sockets/http connections acquired and pointing to the same file/bucket that won't be closed individually.\r\n\r\nNote that `org.apache.avro.file.DataFileReader` follows a similar pattern. It is not possible to get multiple iterators from `DataFileReader` as it always returns the same iterator instance (itself).\r\n\r\n@rdblue What will be a use case were support for multiple iterators is necessary and that can't be covered by creating multiple `AvroIterable` instead?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509728822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509732151","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509732151","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509732151,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTczMjE1MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T17:24:20Z","updated_at":"2019-07-09T17:24:20Z","author_association":"CONTRIBUTOR","body":"@vrozov, all of the iterators are closeable, so we should be able to close them as they are consumed to free up resources. We do this in `ParallelIterable` for example.\r\n\r\nThe close method in `CloseableIterable` is really intended to be a second catch-all to avoid eventual leaks. Plus, it allows using try-with-resources:\r\n\r\n```java\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509732151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509745274","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-509745274","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":509745274,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTc0NTI3NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T18:02:39Z","updated_at":"2019-07-09T18:02:39Z","author_association":"CONTRIBUTOR","body":"@vrozov, engines typically depend on `iceberg-core`, plus add-on modules like `iceberg-parquet` or `iceberg-orc`. It is unusual to have a dependency like this one, since the code for Presto integration is in Presto (instead of in Iceberg like `iceberg-spark`).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509745274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509745489","html_url":"https://github.com/apache/iceberg/pull/264#issuecomment-509745489","issue_url":"https://api.github.com/repos/apache/iceberg/issues/264","id":509745489,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTc0NTQ4OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T18:03:15Z","updated_at":"2019-07-09T18:03:15Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing this, @aokolnychyi! I'm going to merge it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509745489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509788653","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509788653","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509788653,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTc4ODY1Mw==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T20:08:45Z","updated_at":"2019-07-09T20:08:45Z","author_association":"MEMBER","body":"@rdblue While iterators returned by `AvroIterable.iterator()` are `Closeable`, they are unlikely to be closed. In your example, it is `AvroIterable.close()` that closes `Iterator` that java implicitly obtains from `records` and there is no implicit or explicit call to the iterator `close()` method. In `ParallelIterable` it is Iterable that is closed (assuming that you refer to https://github.com/vrozov/incubator-iceberg/blob/master/core/src/main/java/org/apache/iceberg/util/ParallelIterable.java#L63) not the iterator.\r\n\r\nThe PR prevents constructs like\r\n```\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n  \r\n  for (R record : records) { // <-not allowed\r\n    ...\r\n  }\r\n}\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509788653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509815572","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509815572","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509815572,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTgxNTU3Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T21:25:45Z","updated_at":"2019-07-09T21:25:45Z","author_association":"CONTRIBUTOR","body":"@vrozov, I see what this PR does, but I don't think there is a good argument for making Iterables that can only be used once. Both iterables and iterators can be closed. If you'd prefer to close iterators earlier, then I think the right thing to do is to update code to do that, instead of disallowing reasonable uses.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509815572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509820751","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-509820751","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":509820751,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTgyMDc1MQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T21:42:12Z","updated_at":"2019-07-09T21:42:12Z","author_association":"MEMBER","body":"I don't think that Presto will be able to use `iceberg-core` dependency directly due to the dependency on a different guava (and likely incompatible) version. It will also likely require `iceberg-hive` and won't be able to use it either due to the incompatible hive version. I guess either iceberg or presto (or any other project that adds iceberg support) will have to create 'runtime' uber/shade jar. In case it is done in iceberg, the same does not need to be repeated in any other projects that may be interested in supporting iceberg.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509820751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509824221","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509824221","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509824221,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTgyNDIyMQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T21:54:16Z","updated_at":"2019-07-09T21:58:46Z","author_association":"MEMBER","body":"@rdblue What is the use case where `AvroIterable` needs to be used more than once? At the minimum, there is no such use case in the current code base as the PR does not break existing functionality. Code to close iterators earlier will be extremely verbose and I would prefer not to do that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509824221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509831800","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509831800","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509831800,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTgzMTgwMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T22:21:53Z","updated_at":"2019-07-09T22:21:53Z","author_association":"CONTRIBUTOR","body":"The expectation is that iterables can be used more than once. Breaking that expectation should be worth the trade-off and I don't see a reason to change it. All of these can be closed. If you want an iterator closed earlier, then we can close it earlier.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509831800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509834627","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-509834627","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":509834627,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTgzNDYyNw==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T22:33:34Z","updated_at":"2019-07-09T22:33:34Z","author_association":"MEMBER","body":"There is no such assumption in `org.apache.avro.file.DataFileReader` and there is no such expectation in the existing iceberg code. Ability to get multiple iterators from `AvroIterable` will promote code that leads to performance degradation: `AvroIterable` iterator does file I/O, iterating twice like in the code example I provided, should be discouraged in favor of a single iteration over avro file.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509834627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509979009","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-509979009","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":509979009,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTk3OTAwOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T09:08:06Z","updated_at":"2019-07-10T09:08:06Z","author_association":"CONTRIBUTOR","body":"@rdblue to begin with, iceberg-spark-runtime was a dependency. Maybe, it is time to change that :) \r\n\r\nSomehow, I get `com.fasterxml.jackson.core:jackson-databind:2.7.9` from Iceberg and spark-core gives me `com.fasterxml.jackson.module:jackson-module-scala_2.11:2.6.7.1`.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/509979009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510266831","html_url":"https://github.com/apache/iceberg/pull/275#issuecomment-510266831","issue_url":"https://api.github.com/repos/apache/iceberg/issues/275","id":510266831,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDI2NjgzMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T23:23:13Z","updated_at":"2019-07-10T23:23:13Z","author_association":"CONTRIBUTOR","body":"@rdsr, please review since you were interested in deps for --packages. This fixes transitive dependencies for iceberg-spark-runtime. We may want to add more declared dependencies.\r\n\r\n@aokolnychyi, I think this should fix your Jackson dependency problem because it is no longer a transitive dependency of the runtime Jar.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510266831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510315211","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-510315211","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":510315211,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDMxNTIxMQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T03:32:42Z","updated_at":"2019-07-11T03:32:42Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi  I haven't got around looking into it. I hope to do this tonight or tomorrow. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510315211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510529899","html_url":"https://github.com/apache/iceberg/pull/275#issuecomment-510529899","issue_url":"https://api.github.com/repos/apache/iceberg/issues/275","id":510529899,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDUyOTg5OQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T15:17:23Z","updated_at":"2019-07-11T15:17:23Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue! I'll look at it today.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510529899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510566804","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-510566804","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":510566804,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDU2NjgwNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T16:52:02Z","updated_at":"2019-07-11T16:52:02Z","author_association":"CONTRIBUTOR","body":"I think #275 fixes the Jackson problem.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510566804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510577476","html_url":"https://github.com/apache/iceberg/pull/276#issuecomment-510577476","issue_url":"https://api.github.com/repos/apache/iceberg/issues/276","id":510577476,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDU3NzQ3Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T17:23:46Z","updated_at":"2019-07-11T17:23:46Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, these links work fine when I test them. What is the purpose of this change?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510577476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510580454","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-510580454","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":510580454,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDU4MDQ1NA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T17:32:06Z","updated_at":"2019-07-11T17:32:06Z","author_association":"CONTRIBUTOR","body":"Thanks, @rdblue. We will try it today.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510580454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510582767","html_url":"https://github.com/apache/iceberg/issues/274#issuecomment-510582767","issue_url":"https://api.github.com/repos/apache/iceberg/issues/274","id":510582767,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDU4Mjc2Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T17:38:45Z","updated_at":"2019-07-11T17:38:45Z","author_association":"CONTRIBUTOR","body":"Yeah, you need to get the bucket function to Spark and sort by that. Here's how to create a Spark UDF with the function:\r\n\r\n```scala\r\nimport com.netflix.iceberg.transforms.Transforms\r\nimport com.netflix.iceberg.types.Types\r\nimport org.apache.spark.sql.types.IntegerType\r\n\r\n// load the bucket transform from Iceberg to use as a UDF\r\nval bucketTransform = Transforms.bucket[java.lang.Long](Types.LongType.get(), 16)\r\n\r\n// needed because Scala has trouble with the Java transform type\r\ndef bucketFunc(id: Long): Int = bucketTransform.apply(id)\r\n\r\n// create and register a UDF\r\nval bucket16 = spark.udf.register(\"bucket16\", bucketFunc _)\r\n```\r\n\r\nThen you can use it like this:\r\n\r\n```sql\r\nINSERT INTO table SELECT id, data FROM source ORDER BY bucket16(id)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510582767/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510584149","html_url":"https://github.com/apache/iceberg/issues/274#issuecomment-510584149","issue_url":"https://api.github.com/repos/apache/iceberg/issues/274","id":510584149,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDU4NDE0OQ==","user":{"login":"moulimukherjee","id":2379129,"node_id":"MDQ6VXNlcjIzNzkxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2379129?v=4","gravatar_id":"","url":"https://api.github.com/users/moulimukherjee","html_url":"https://github.com/moulimukherjee","followers_url":"https://api.github.com/users/moulimukherjee/followers","following_url":"https://api.github.com/users/moulimukherjee/following{/other_user}","gists_url":"https://api.github.com/users/moulimukherjee/gists{/gist_id}","starred_url":"https://api.github.com/users/moulimukherjee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moulimukherjee/subscriptions","organizations_url":"https://api.github.com/users/moulimukherjee/orgs","repos_url":"https://api.github.com/users/moulimukherjee/repos","events_url":"https://api.github.com/users/moulimukherjee/events{/privacy}","received_events_url":"https://api.github.com/users/moulimukherjee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T17:42:32Z","updated_at":"2019-07-11T17:42:32Z","author_association":"CONTRIBUTOR","body":"@rdblue Thanks, let me try it out","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510584149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510604803","html_url":"https://github.com/apache/iceberg/pull/275#issuecomment-510604803","issue_url":"https://api.github.com/repos/apache/iceberg/issues/275","id":510604803,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYwNDgwMw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T18:38:22Z","updated_at":"2019-07-11T18:38:22Z","author_association":"CONTRIBUTOR","body":"This does solve the problem with Jackson. Thanks, @rdblue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510604803/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510614715","html_url":"https://github.com/apache/iceberg/pull/250#issuecomment-510614715","issue_url":"https://api.github.com/repos/apache/iceberg/issues/250","id":510614715,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYxNDcxNQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T19:06:04Z","updated_at":"2019-07-11T19:06:04Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi . I tested spark-runtime jar by adding it manually (so no other transitive dependency was pulled in). It works. So I guess it is plausible that this is being caused by the transitive dependencies as @rdblue mentions","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510614715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510616327","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-510616327","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":510616327,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYxNjMyNw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T19:11:12Z","updated_at":"2019-07-11T19:11:12Z","author_association":"CONTRIBUTOR","body":"@vrozov . Presto provides an SPI mechanism to load connectors. All jars that a connector needs are loaded in a separate classloader so there's complete classpath isolation between Presto and  its plugins (connectors) https://prestodb.github.io/docs/current/develop/spi-overview.html","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510616327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510630540","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-510630540","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":510630540,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYzMDU0MA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T19:54:27Z","updated_at":"2019-07-11T19:54:27Z","author_association":"MEMBER","body":"@rdsr I am aware of the Presto SPI mechanism for plugins. Problem is that it will not help as the issue is with the version conflicts within a plugin classloader, not across different plugins.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510630540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510630903","html_url":"https://github.com/apache/iceberg/pull/252#issuecomment-510630903","issue_url":"https://api.github.com/repos/apache/iceberg/issues/252","id":510630903,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYzMDkwMw==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T19:55:31Z","updated_at":"2019-07-11T19:55:31Z","author_association":"CONTRIBUTOR","body":"LGTM +1 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510630903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510632567","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-510632567","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":510632567,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYzMjU2Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T20:00:36Z","updated_at":"2019-07-11T20:00:36Z","author_association":"CONTRIBUTOR","body":"@vrozov, Iceberg depends on an older version of Hive, but the calls we use are provided by newer versions. Hive provides backward compatibility on those calls. Projects like Presto can depend on Iceberg and use version management to update the version that is actually used.\r\n\r\nGuava is similar. We want to depend on a new version, but only use calls that are compatible with most versions of Guava.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510632567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510634884","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510634884","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510634884,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDYzNDg4NA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T20:07:37Z","updated_at":"2019-07-11T20:07:37Z","author_association":"MEMBER","body":"@rdblue Does the above provide sufficient justification not to support multiple iterators? If not, can you please provide a use case where such support is necessary so that I can take it into account and modify the code accordingly?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510634884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510642230","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510642230","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510642230,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY0MjIzMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T20:29:56Z","updated_at":"2019-07-11T20:29:56Z","author_association":"CONTRIBUTOR","body":"@vrozov, no. There is no way for Iterable to signal that it only supports a single iteration, and most iterables, like lists, maps, sets, etc. support iteration multiple times. I think that there isn't much point to using Iterable if you only intend to support a single iteration.\r\n\r\nThe goal you want to accomplish should be done by making sure that resources are closed. I think a better approach would be for an iterator to close underlying resources automatically when it is exhausted.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510642230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510643669","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-510643669","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":510643669,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY0MzY2OQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T20:34:33Z","updated_at":"2019-07-11T20:34:33Z","author_association":"MEMBER","body":"@rdblue Unfortunately it is not the case and Hive does not provide backward compatibility (and is not required based on semver). The signature of `HiveMetaStoreClient` changed from `HiveConf` to `Configuration` in 3.x and there is no backward-compatible constructor that takes `HiveConf` in 3.x.\r\n\r\nThe same for guava. In the long run, it is not possible to provide a guarantee that nobody introduces the usage of an incompatible class or method. The only way to play safely is to shade guava due to it's wide acceptance and limited backward compatibility in early versions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510643669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510645321","html_url":"https://github.com/apache/iceberg/pull/275#issuecomment-510645321","issue_url":"https://api.github.com/repos/apache/iceberg/issues/275","id":510645321,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY0NTMyMQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T20:39:49Z","updated_at":"2019-07-11T20:39:49Z","author_association":"CONTRIBUTOR","body":"I tested this out by publishing the jar locally and adding as a dependency in Gradle. It works fine and has no transitive dependencies\r\n\r\nI'm just curious that we are overloading Gradle's `compileOnly` configuration to achieve this.  I think this will work fine with a Maven repo, but might cause issues with Ivy repositories [ We internally at LinkedIn have an Ivy based repository]. We will test this out internally and create tickets if required.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510645321/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510652572","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510652572","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510652572,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY1MjU3Mg==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T21:02:08Z","updated_at":"2019-07-11T21:02:08Z","author_association":"MEMBER","body":"@rdblue Please take a look at `DataFileReader`. It supports only one iterator. `AvroIterable` also supports only one iterator and it provides the signal (`IllegalStateException`) should somebody try to obtain a second iterator.\r\n\r\nThere is a difference between iterating over in-memory collection and iterating over records in file: list, map, set iterators do not need to be closed and there is no significant cost associated with the second iteration over in-memory collection.\r\n\r\nThe point of using Iterable even with a single iterator() is \r\n1. support \"for-each loop\"\r\n2. ability to pass Iterable and delay creating Iterator instance.\r\n\r\nI considered the approach to close an iterator when `hasNext()` returns `false`, but rejected it as it is not necessary to exhaust iteration (even though most of the time iterator will be fully exhausted), so the resource may be left open.\r\n\r\nThe PR does not fix any existing resource leakage or shortage. The goal of the PR is to prevent such a possibility for future modifications.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510652572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510672450","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510672450","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510672450,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY3MjQ1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T22:09:02Z","updated_at":"2019-07-11T22:09:02Z","author_association":"CONTRIBUTOR","body":"I get the argument, and I know that Avro has a class that does something else. I'm saying that Iceberg should not violate a common assumption about iterables without a good reason. I don't think your justification for this is sufficient. If you want to clean up resources more quickly, then the right way to do that is in the iterators returned by these iterables.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510672450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510677257","html_url":"https://github.com/apache/iceberg/pull/236#issuecomment-510677257","issue_url":"https://api.github.com/repos/apache/iceberg/issues/236","id":510677257,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY3NzI1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T22:29:01Z","updated_at":"2019-07-11T22:29:01Z","author_association":"CONTRIBUTOR","body":"@SurenNihalani, any update on this PR? What tasks are still outstanding?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510677257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510685241","html_url":"https://github.com/apache/iceberg/pull/276#issuecomment-510685241","issue_url":"https://api.github.com/repos/apache/iceberg/issues/276","id":510685241,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDY4NTI0MQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-11T23:05:39Z","updated_at":"2019-07-11T23:05:39Z","author_association":"COLLABORATOR","body":"@rdblue, It doesn't work on master when I read the doc yesterday.  Could you please have a try again.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510685241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510701309","html_url":"https://github.com/apache/iceberg/pull/263#issuecomment-510701309","issue_url":"https://api.github.com/repos/apache/iceberg/issues/263","id":510701309,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDcwMTMwOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T00:35:48Z","updated_at":"2019-07-12T00:35:48Z","author_association":"CONTRIBUTOR","body":"@rdblue this one is ready for another review round.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510701309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510701359","html_url":"https://github.com/apache/iceberg/pull/258#issuecomment-510701359","issue_url":"https://api.github.com/repos/apache/iceberg/issues/258","id":510701359,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDcwMTM1OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T00:36:04Z","updated_at":"2019-07-12T00:36:04Z","author_association":"CONTRIBUTOR","body":"@rdblue this one is ready for another review round.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510701359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510716849","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510716849","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510716849,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDcxNjg0OQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T02:08:24Z","updated_at":"2019-07-12T02:08:24Z","author_association":"MEMBER","body":"iceberg already violated the common assumption about iterator in two ways\r\n1. `Iterator` returned by the `iterator()` is \"usually\" (personally I don't know any) not `Closeable` as the primary use case for the `iterator()` method is \"for-each loop\", so making `Iterator` `Closeable` is not well justified as `close()` is not called in \"for-each loop\".\r\n1. `AvroReuseIterator` always returns the same reference in the `next()` method. This is a much bigger \"violation\" of a common `Iterator` behavior.\r\n\r\nI do not say that I see a problem with those \"violations\" and I see why those approaches were taken, but I don't see why it is a problem to introduce `Iterable` that allows only single `iterator()` in favor of less error-prone code and that does not break any existing assumptions in iceberg.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510716849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510977986","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510977986","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510977986,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk3Nzk4Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T17:59:26Z","updated_at":"2019-07-12T17:59:26Z","author_association":"CONTRIBUTOR","body":"@vrozov: there are better ways to solve the problem. Closing resources in iterators is the right solution to this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510977986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510979098","html_url":"https://github.com/apache/iceberg/pull/258#issuecomment-510979098","issue_url":"https://api.github.com/repos/apache/iceberg/issues/258","id":510979098,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk3OTA5OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T18:02:44Z","updated_at":"2019-07-12T18:02:44Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this! I'm going to merge it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510979098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510979314","html_url":"https://github.com/apache/iceberg/pull/273#issuecomment-510979314","issue_url":"https://api.github.com/repos/apache/iceberg/issues/273","id":510979314,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk3OTMxNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T18:03:28Z","updated_at":"2019-07-12T18:03:28Z","author_association":"CONTRIBUTOR","body":"Thanks for the fix, @jbapple!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510979314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510985824","html_url":"https://github.com/apache/iceberg/pull/263#issuecomment-510985824","issue_url":"https://api.github.com/repos/apache/iceberg/issues/263","id":510985824,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk4NTgyNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T18:24:34Z","updated_at":"2019-07-12T18:24:34Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, just a couple minor comments and this is ready to go. It also needs a rebase. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510985824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510996671","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-510996671","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":510996671,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk5NjY3MQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T18:57:30Z","updated_at":"2019-07-12T18:57:30Z","author_association":"MEMBER","body":"@rdblue It is not a better way to solve the problem and I already explained why it does not work for \"for each loop\". All I see is multiple excuses to reject a contribution that goes from violating common assumptions (while other violations are somehow acceptable) to a \"better way\" that leads to resource leak or more error-prone code.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/510996671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511000511","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511000511","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511000511,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAwMDUxMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T19:09:55Z","updated_at":"2019-07-12T19:09:55Z","author_association":"CONTRIBUTOR","body":"To be clear, the problem is that this violates common assumptions that people make about iterables. In Iceberg, we make sure that iterables can be used multiple times and, although we don't use this internally, these are part of the guarantees in the public API.\r\n\r\nI also disagree with the justification for making this change. Preventing resource leaks is not a valid justification because there are better ways to handle it, like closing when an iterator has been consumed.\r\n\r\nI'm sorry to hear that this sounds like multiple excuses to you, but I think my position has been consistent. This would make iterables have surprising behavior, which is bad, and doesn't have a strong enough justification for that surprising behavior because I don't think it would be more effective than other changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511000511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511012927","html_url":"https://github.com/apache/iceberg/pull/276#issuecomment-511012927","issue_url":"https://api.github.com/repos/apache/iceberg/issues/276","id":511012927,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAxMjkyNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T19:53:10Z","updated_at":"2019-07-12T19:53:10Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, I think I understand the confusion. These links are for the [Apache site](https://iceberg.apache.org). I don't think we can make them work on that site and in github at the same time, unfortunately. Feel free to try it out by running `mkdocs serve` in the site directory.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511012927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511013450","html_url":"https://github.com/apache/iceberg/pull/252#issuecomment-511013450","issue_url":"https://api.github.com/repos/apache/iceberg/issues/252","id":511013450,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAxMzQ1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T19:54:59Z","updated_at":"2019-07-12T19:54:59Z","author_association":"CONTRIBUTOR","body":"Merging. Thanks for reviewing, @danielcweeks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511013450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511017881","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511017881","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511017881,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAxNzg4MQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T20:10:25Z","updated_at":"2019-07-12T20:10:25Z","author_association":"MEMBER","body":"It goes in a circle. I already explained that people make other assumptions about Iterables and Iterators, but somehow it is OK to violate those assumptions and not OK to violate another assumption. Would you agree that iterating twice over the same file should be discouraged in favor of single iteration and when necessary it is possible to get Iterable without any extra performance penalty? In rear cases where multiple iterators are necessary, it is easy to go from \r\n```\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n  \r\n  for (R record : records) {\r\n    ...\r\n  }\r\n}\r\n```\r\nto\r\n```\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n}\r\n...  \r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n}\r\n```\r\nThere is also no better way. Iterators are not expected to be `Closeable` and it is very easy to lose `Closeable` iterator during Iterable transformation. For example `CloseableIterable.transform()` does not preserve `Closeable` and guava `Iterables` won't preserve it either.\r\n\r\nThe only consistency I see in this PR review is the denial of the contribution. Arguments provided changed from \"not a common violation\" to \"there is a better way\". When I asked for a \"use case\" it was never provided.\r\n\r\nIn any case, the PR is closed and there is no need to discuss this further. I am working away from contribution to the iceberg project.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511017881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511021084","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511021084","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511021084,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAyMTA4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T20:21:42Z","updated_at":"2019-07-12T20:21:42Z","author_association":"CONTRIBUTOR","body":"I think you misunderstand my suggestion. What I see as a better solution is removing the need to explicitly close Iterator if the iterator exhausts its contents. That would alleviate the need to call close on the iterator in most cases.\r\n\r\n> I already explained that people make other assumptions about Iterables and Iterators, but somehow it is OK to violate those assumptions and not OK to violate another assumption\r\n\r\nYour examples were `Iterator` not typically implementing `Closeable`, and reusing objects in `AvroReuseIterator`:\r\n\r\n* It is true that `Iterator` typically doesn't implement `Closeable` and it is hard to keep track of when using `for` loops. That's why `CloseableIterable` can be used in a try-with-resources block. I'm also suggesting that iterators should close underlying resources when finished iterating, which would solve this problem earlier if iterator is completely consumed.\r\n* `AvroReuseIterator` is not used by default. Callers must use `reuseContainers` on the read builder, which I think is a reasonable compromise. The performance benefit and the steps we've taken to guard against accidental use justifies this change.\r\n\r\n> Would you agree that iterating twice over the same file should be discouraged in favor of single iteration and when necessary it is possible to get Iterable without any extra performance penalty?\r\n\r\nI agree that what you're suggesting would work. But it would be surprising behavior. Callers would not know until runtime that they should have used the second of your two code blocks instead of the first. The choice here is to avoid throwing exceptions at runtime when we can leave resources around for a bit longer and avoid a failure.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511021084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511024894","html_url":"https://github.com/apache/iceberg/pull/275#issuecomment-511024894","issue_url":"https://api.github.com/repos/apache/iceberg/issues/275","id":511024894,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAyNDg5NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T20:35:41Z","updated_at":"2019-07-12T20:35:41Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews, @aokolnychyi and @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511024894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511026249","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-511026249","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":511026249,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAyNjI0OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T20:40:38Z","updated_at":"2019-07-12T20:40:38Z","author_association":"CONTRIBUTOR","body":"@vrozov, good to know about the HiveMetaStoreClient constructor. We can update the constructor call to work in both 1.2.1 and 3.x variants. Sounds like the justification for Guava is that this could happen with that library as well. I agree with that, and we can either avoid calls that are problematic or use reflection for shims.\r\n\r\nEither way, I'm not sure that it is necessary to create a shaded Presto runtime library. On #256, I asked whether Presto actually used this and the answer was no. If Presto needs one, we can add it back. Otherwise, I think we should publish normal dependencies and let Presto handle their transitive dependencies. If there is a problem, we are flexible and can work with that community to fix it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511026249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511029823","html_url":"https://github.com/apache/iceberg/pull/253#issuecomment-511029823","issue_url":"https://api.github.com/repos/apache/iceberg/issues/253","id":511029823,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTAyOTgyMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T20:53:18Z","updated_at":"2019-07-12T20:53:18Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, this looks ready. But before we commit it, I want to suggest an alternative for you to consider. What about instead of adding the `registerTable` method, we added a way to set an existing table's metadata location directly? That would avoid extra public methods in the `Catalog` interface. It would also be a way to roll back the entire table state, not just rolling back the current snapshot.\r\n\r\nThis would primarily be an administrator change, so we could expose it through a method in `TableOperations`, like `setMetadataLocation`. What do you think? This may be difficult with the new table UUID...","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511029823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511059819","html_url":"https://github.com/apache/iceberg/pull/276#issuecomment-511059819","issue_url":"https://api.github.com/repos/apache/iceberg/issues/276","id":511059819,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA1OTgxOQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T23:12:01Z","updated_at":"2019-07-12T23:12:01Z","author_association":"COLLABORATOR","body":"I see, thanks for clarification.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511059819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511060860","html_url":"https://github.com/apache/iceberg/pull/276#issuecomment-511060860","issue_url":"https://api.github.com/repos/apache/iceberg/issues/276","id":511060860,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA2MDg2MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T23:18:15Z","updated_at":"2019-07-12T23:18:15Z","author_association":"CONTRIBUTOR","body":"Thanks for taking the time to fix this and then to close the issue, @chenjunjiedada! I really appreciate helping us keep docs up to date, even if it didn't get merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511060860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511137104","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-511137104","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":511137104,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEzNzEwNA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T16:51:31Z","updated_at":"2019-07-13T16:51:31Z","author_association":"MEMBER","body":"@rdblue Presto does not use iceberg libraries as Presto still does not support iceberg. There is an open PR to add such support and, I guess, the question is whether the PR uses `iceberg-presto-runtime` or `iceberg-api`, `iceberg-core` and other iceberg libraries directly. Indeed, the PR does not use `iceberg-presto-runtime` and my educated guess (that is based on adding iceberg support to presto  on a private fork where I did not use `iceberg-presto-runtime` either) is that this was done due to a wrong shading in `iceberg-presto-runtime` (there is a large number of classes that are included into `iceberg-presto-runtime` without being relocated, causing conflicts with presto own dependencies).\r\n\r\nI still don't see anything in the PR that would solve `HiveMetaStoreClient` backward compatibility issue (note that there may be more incompatibilities in hive, just that it breaks on the very first call to hive), but I may be missing something. Possibly @electrum can clarify how hive version conflict is resolved in the PR.\r\n\r\nYes, while it is possible to resolve all such conflicts one by one after they are discovered (and likely they won't be discovered till it blows up during run-time) or it can be solved all in once by shading and creating uber run-time jar. Another option is to use something similar to `animal-sniffer-maven-plugin` to ensure API compatibility, but I don't know if gradle provides such ability.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511137104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511143702","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511143702","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511143702,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE0MzcwMg==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T18:25:13Z","updated_at":"2019-07-13T20:12:51Z","author_association":"MEMBER","body":"@rdblue Closing resource in an iterator when it (iterator is exhausted) is not a \"better\" solution, it is the mitigation for the resource leak/shortage issue. Otherwise, it would not be necessary for `AvroIterable` to be `CloseableIterable`. Such a solution still leaves a possibility for the resource shortage. It will also require a wrapper around `DataFileReader` as `DataFileReader` iterator does not close the underlying resource when it is exhausted. So, all `CloseableIterable` still needs to be closed either explicitly or by using a try-with-resources block. Note that a common expectation for `Closeable` or `AutoCloseable` used in a try-with-resources block is that there is a single resource acquired and that is guaranteed to be closed, not multiple resources as in the case of `CloseableGroup`. Additionally `CloseableGroup` is a subject of resource leak: should `close()` for one of `Closeable` in `closeables` throw an `IOException` or `RuntimeException`, all other `Closeable` won't be closed.\r\n\r\nIt sounds that the major disagreement is whether it is OK to keep resources a little bit longer and allow multiple iterators or it is better to ensure that a resource is released asap but fail multiple iterators request. After spending a significant effort in isolating iceberg resource leak/shortage in our environment, my strong preference and recommendation is to fail fast when resources are not released asap. In an environment where resources are limited, the first behavior will still lead to run-time errors.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511143702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511145713","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511145713","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511145713,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE0NTcxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T18:56:10Z","updated_at":"2019-07-13T18:56:10Z","author_association":"CONTRIBUTOR","body":"Would closing when an iterator is exhausted solve the resource leak you found? What caused the leak you found? Having more concrete information about your situation might help.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511145713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511146359","html_url":"https://github.com/apache/iceberg/pull/271#issuecomment-511146359","issue_url":"https://api.github.com/repos/apache/iceberg/issues/271","id":511146359,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE0NjM1OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T19:05:53Z","updated_at":"2019-07-13T19:06:51Z","author_association":"CONTRIBUTOR","body":"If you'd like to create a generic runtime Jar that shades and relocates dependencies, that would be great. It doesn't need to be specific to Presto, though. And the problems you mentioned are the reason why we are removing the Presto shaded Jar. It needed work and Presto doesn't use it. So it seemed like a reasonable choice to remove it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511146359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511148105","html_url":"https://github.com/apache/iceberg/issues/278#issuecomment-511148105","issue_url":"https://api.github.com/repos/apache/iceberg/issues/278","id":511148105,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE0ODEwNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T19:33:10Z","updated_at":"2019-07-13T19:33:10Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511148105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511150371","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511150371","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511150371,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE1MDM3MQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T20:10:23Z","updated_at":"2019-07-13T20:10:23Z","author_association":"MEMBER","body":"It was the same leak as was fixed in #150. It is not a question of how to fix an existing leak. The PR goal is to prevent introducing such leaks in the future and helping with troubleshooting resource leak/shortage conditions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511150371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511150938","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511150938","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511150938,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE1MDkzOA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T20:19:33Z","updated_at":"2019-07-13T20:19:33Z","author_association":"CONTRIBUTOR","body":"Okay, do you agree that closing the iterator when exhausted would help avoid such leaks in the future?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511150938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511160290","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511160290","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511160290,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2MDI5MA==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T23:14:14Z","updated_at":"2019-07-13T23:35:50Z","author_association":"MEMBER","body":"It will mitigate such possibility, but will not eliminate it completely. For example, it won't work in case of \r\n``` java\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record1 : records) {\r\n    for (R record2 : records) {\r\n      ...\r\n    }\r\n  }\r\n}\r\n```\r\nor\r\n``` java\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n    break;\r\n  }\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511160290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511227623","html_url":"https://github.com/apache/iceberg/pull/284#issuecomment-511227623","issue_url":"https://api.github.com/repos/apache/iceberg/issues/284","id":511227623,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIyNzYyMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T19:09:58Z","updated_at":"2019-07-14T19:09:58Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511227623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511230668","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-511230668","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":511230668,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIzMDY2OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T19:55:43Z","updated_at":"2019-07-14T19:55:43Z","author_association":"CONTRIBUTOR","body":"@rdsr, thanks for your patience. This looks like a great start.\r\n\r\nI made a few specific comments. In addition, I think we may want to apply the schema mapping differently. Instead of building an Avro schema with IDs, why not add an optional mapping to the conversion from Avro to Iceberg schema? Then that conversion could drop fields that don't have IDs, either embedded in the schema or from a mapping. I think that would fit a bit more cleanly because it would not be creating an intermediate file schema. It would be producing the Iceberg equivalent of the Avro schema instead. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511230668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511264323","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511264323","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511264323,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2NDMyMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:25:38Z","updated_at":"2019-07-15T03:25:38Z","author_association":"CONTRIBUTOR","body":"I think in the first case, closing the iterator would do the right thing. Each inner iterator would be closed before the next one is opened, and the outer iterator must be left open the entire time because it is still in use.\r\n\r\nFor the second case, I agree that the first iterator's resources are left open until the end of the try-with-resources, block. I think that's worth the trade-off, and callers can always close the iterator if they choose. So I'm okay with the trade-off of using the automatic close at the end of the try block.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511264323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511290514","html_url":"https://github.com/apache/iceberg/pull/199#issuecomment-511290514","issue_url":"https://api.github.com/repos/apache/iceberg/issues/199","id":511290514,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5MDUxNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T06:48:25Z","updated_at":"2019-07-15T06:48:25Z","author_association":"CONTRIBUTOR","body":"Shall we also follow different metrics modes introduced in PR #263?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511290514/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511297677","html_url":"https://github.com/apache/iceberg/pull/253#issuecomment-511297677","issue_url":"https://api.github.com/repos/apache/iceberg/issues/253","id":511297677,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5NzY3Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T07:21:09Z","updated_at":"2019-07-15T07:21:09Z","author_association":"CONTRIBUTOR","body":"I also thought about registering tables by giving a pointer to the metadata location and not a specific metadata file. However, my assumption was that a location can be shared by multiple Iceberg tables (which is possible because we have random UUIDs in metadata version file names). So, we need to somehow determine what is the last metadata file for a particular table if the location is shared (which can be done using Table UUID we added recently, but someone has to find that UUID anyway).\r\n\r\nAs always, I am open to considering any alternatives. To avoid changes to the `Catalog` API, we can require users interested in this to interact with `HiveTableOperations` directly, meaning they have to create a separate pool of HMS clients and pass a Hadoop config. I am not sure that's a good idea, though.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511297677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511462956","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511462956","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511462956,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTQ2Mjk1Ng==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T16:00:48Z","updated_at":"2019-07-15T16:00:48Z","author_association":"MEMBER","body":"I already explained and, I believe, you already agreed that callers\r\n1. won't be able to choose to close an iterator as `Closeable` may be easily lost\r\n1. the code by itself does not imply that there are multiple resources acquired. When a person reads such code, she likely will assume that there is a single resource acquired in try-with-resources.\r\n\r\nBoth cases are examples where logic needs to be modified. For example instead of \r\n```java\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  for (R record : records) {\r\n    ...\r\n    break;\r\n  }\r\n  for (R record : records) {\r\n    ...\r\n  }\r\n}\r\n```\r\nit should be written as\r\n```java\r\nList<Record> recordsCached = new ArrayList<>();\r\ntry (AvroIterable records = Avro.read(...).build()) {\r\n  Iterators.addAll(recordsCached, records.iterator());\r\n}\r\n\r\nfor (R record : recordsCached) {\r\n  ...\r\n  break;\r\n}\r\nfor (R record : recordsCached) {\r\n  ...\r\n}\r\n```\r\nability to get multiple iterators promotes less code in favor of less performant code. It should be explicit for callers that they are iterating over a file resource that needs to be closed and that iterating twice over a file is much slower compared to an in-memory collection. Making it implicit will lead to resource leaks and a significant effort in isolating such resource leaks. It is a trade-off for allowing only one active (note additional changes) iterator.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511462956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511480702","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511480702","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511480702,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTQ4MDcwMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T16:49:42Z","updated_at":"2019-07-15T16:49:42Z","author_association":"CONTRIBUTOR","body":"> won't be able to choose to close an iterator as Closeable may be easily lost\r\n\r\nIf the caller cares about the case where a partially consumed iterator is left open until the end of the try block, then they can close it and use a while loop instead of the for loop. It is easy to do this, but most people won't care.\r\n\r\nYour rewrite assumes that it is reasonable to keep records in memory. That's not necessarily the case.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511480702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511482600","html_url":"https://github.com/apache/iceberg/issues/269#issuecomment-511482600","issue_url":"https://api.github.com/repos/apache/iceberg/issues/269","id":511482600,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTQ4MjYwMA==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T16:54:59Z","updated_at":"2019-07-15T16:54:59Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi I can take this up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511482600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511485449","html_url":"https://github.com/apache/iceberg/pull/272#issuecomment-511485449","issue_url":"https://api.github.com/repos/apache/iceberg/issues/272","id":511485449,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTQ4NTQ0OQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T17:02:38Z","updated_at":"2019-07-15T17:02:38Z","author_association":"MEMBER","body":"I see no point to discuss this further. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511485449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511498862","html_url":"https://github.com/apache/iceberg/pull/253#issuecomment-511498862","issue_url":"https://api.github.com/repos/apache/iceberg/issues/253","id":511498862,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTQ5ODg2Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T17:39:04Z","updated_at":"2019-07-15T17:39:04Z","author_association":"CONTRIBUTOR","body":"> I also thought about registering tables by giving a pointer to the metadata location and not a specific metadata file.\r\n\r\nThat isn't quite what I'm suggesting. I'm suggesting that to do the same thing that `registerTable` does, you create a table and then set its metadata location directly. I've been doing this to troubleshoot by creating a new table, then copying another table's metadata file over its current metadata location. Having a way to simply replace that metadata location of a table would support the use case you have here, but would also allow rolling back to a previous metadata file for the same table.\r\n\r\nI think the UUID would be fine. You'd just have to reload the table from the `Catalog` instead of calling `refresh` because `refresh` would detect the UUID change and throw an exception.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511498862/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511500497","html_url":"https://github.com/apache/iceberg/pull/263#issuecomment-511500497","issue_url":"https://api.github.com/repos/apache/iceberg/issues/263","id":511500497,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTUwMDQ5Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T17:43:41Z","updated_at":"2019-07-15T17:43:41Z","author_association":"CONTRIBUTOR","body":"Merged. Thanks for fixing this, @aokolnychyi!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511500497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511502444","html_url":"https://github.com/apache/iceberg/issues/269#issuecomment-511502444","issue_url":"https://api.github.com/repos/apache/iceberg/issues/269","id":511502444,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTUwMjQ0NA==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T17:48:48Z","updated_at":"2019-07-15T17:48:48Z","author_association":"CONTRIBUTOR","body":"if its ok with you, and believe would be good for n00b :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511502444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511503291","html_url":"https://github.com/apache/iceberg/pull/236#issuecomment-511503291","issue_url":"https://api.github.com/repos/apache/iceberg/issues/236","id":511503291,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTUwMzI5MQ==","user":{"login":"SurenNihalani","id":1093911,"node_id":"MDQ6VXNlcjEwOTM5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1093911?v=4","gravatar_id":"","url":"https://api.github.com/users/SurenNihalani","html_url":"https://github.com/SurenNihalani","followers_url":"https://api.github.com/users/SurenNihalani/followers","following_url":"https://api.github.com/users/SurenNihalani/following{/other_user}","gists_url":"https://api.github.com/users/SurenNihalani/gists{/gist_id}","starred_url":"https://api.github.com/users/SurenNihalani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SurenNihalani/subscriptions","organizations_url":"https://api.github.com/users/SurenNihalani/orgs","repos_url":"https://api.github.com/users/SurenNihalani/repos","events_url":"https://api.github.com/users/SurenNihalani/events{/privacy}","received_events_url":"https://api.github.com/users/SurenNihalani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T17:51:11Z","updated_at":"2019-07-15T17:51:11Z","author_association":"CONTRIBUTOR","body":"I looked at this the other day. HDFS runtime problem seems to be solved in the master because of the compileOnly strategy. I'll do rest of the tasks tomorrow evening and put up a PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511503291/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511507610","html_url":"https://github.com/apache/iceberg/issues/96#issuecomment-511507610","issue_url":"https://api.github.com/repos/apache/iceberg/issues/96","id":511507610,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTUwNzYxMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T18:02:18Z","updated_at":"2019-07-15T18:02:18Z","author_association":"CONTRIBUTOR","body":"Yeah, I think a set of no-Hadoop shims is the right thing. Maybe we can move FileIO, InputFile, and OutputFile to a separate library? It would be great to standardize this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511507610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511544826","html_url":"https://github.com/apache/iceberg/issues/286#issuecomment-511544826","issue_url":"https://api.github.com/repos/apache/iceberg/issues/286","id":511544826,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTU0NDgyNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T19:52:26Z","updated_at":"2019-07-15T19:52:26Z","author_association":"CONTRIBUTOR","body":"Do you mean how to invoke the build? If so, you can run this to build and run tests:\r\n\r\n```\r\n./gradlew build\r\n```\r\n\r\nIf you want to skip tests, run:\r\n\r\n```\r\n./gradlew build -x test\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/511544826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]