[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666704630","html_url":"https://github.com/apache/iceberg/issues/8218#issuecomment-1666704630","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8218","id":1666704630,"node_id":"IC_kwDOCW7NX85jV-T2","user":{"login":"huaxiangsun","id":62515050,"node_id":"MDQ6VXNlcjYyNTE1MDUw","avatar_url":"https://avatars.githubusercontent.com/u/62515050?v=4","gravatar_id":"","url":"https://api.github.com/users/huaxiangsun","html_url":"https://github.com/huaxiangsun","followers_url":"https://api.github.com/users/huaxiangsun/followers","following_url":"https://api.github.com/users/huaxiangsun/following{/other_user}","gists_url":"https://api.github.com/users/huaxiangsun/gists{/gist_id}","starred_url":"https://api.github.com/users/huaxiangsun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huaxiangsun/subscriptions","organizations_url":"https://api.github.com/users/huaxiangsun/orgs","repos_url":"https://api.github.com/users/huaxiangsun/repos","events_url":"https://api.github.com/users/huaxiangsun/events{/privacy}","received_events_url":"https://api.github.com/users/huaxiangsun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T04:06:19Z","updated_at":"2023-08-11T15:30:50Z","author_association":"NONE","body":"When reading DataFiles only (after compaction compacts away DeleteFiles), I remember that there are a small of SocketTimeOutExceptions, which is Ok. I did the compaction, after that, we did table merge twice, and will see if this can be reproduced. Googled this exception, it has been around for quite some time, interestingly, there is not a clear root cause and fix. Some stackoverflow posts suggested to upgrade http client version, which in iceberg case, already uses the suggested http client version (or a later version).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666704630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666714525","html_url":"https://github.com/apache/iceberg/pull/8158#issuecomment-1666714525","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8158","id":1666714525,"node_id":"IC_kwDOCW7NX85jWAud","user":{"login":"dbtsai","id":1134574,"node_id":"MDQ6VXNlcjExMzQ1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1134574?v=4","gravatar_id":"","url":"https://api.github.com/users/dbtsai","html_url":"https://github.com/dbtsai","followers_url":"https://api.github.com/users/dbtsai/followers","following_url":"https://api.github.com/users/dbtsai/following{/other_user}","gists_url":"https://api.github.com/users/dbtsai/gists{/gist_id}","starred_url":"https://api.github.com/users/dbtsai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbtsai/subscriptions","organizations_url":"https://api.github.com/users/dbtsai/orgs","repos_url":"https://api.github.com/users/dbtsai/repos","events_url":"https://api.github.com/users/dbtsai/events{/privacy}","received_events_url":"https://api.github.com/users/dbtsai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T04:41:44Z","updated_at":"2023-08-06T04:41:44Z","author_association":"MEMBER","body":"With some of our dataset, we saw that ZSTD is around 5% smaller than GZIP parquet but 1.5x faster than GZIP Parquet for write, and 1.13x faster for read. This was done a while ago using Spark Parquet reader/writer instead of Iceberg Parquet reader/writer, and I believe we will see similar gain with Iceberg as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666714525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666848345","html_url":"https://github.com/apache/iceberg/pull/8204#issuecomment-1666848345","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8204","id":1666848345,"node_id":"IC_kwDOCW7NX85jWhZZ","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T12:47:06Z","updated_at":"2023-08-06T12:47:06Z","author_association":"CONTRIBUTOR","body":"Interesting, thanks for the explanation. How are you writing these files? Iceberg its focus is minimizing IO. Returning a file that doesn't contain any data, should be skipped for that reason. I don't recall anyone looking for such a feature on the Java side. @rdblue any thoughts on this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666848345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666853305","html_url":"https://github.com/apache/iceberg/pull/8204#issuecomment-1666853305","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8204","id":1666853305,"node_id":"IC_kwDOCW7NX85jWim5","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T13:03:49Z","updated_at":"2023-08-06T13:03:49Z","author_association":"CONTRIBUTOR","body":"@rustyconover Wouldn't it make more sense to go through the manifest instead of the actual scan planning? \r\n\r\n![image](https://github.com/apache/iceberg/assets/1134248/63c40381-ecb2-430b-b742-2ddb05edfaf6)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666853305/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666912399","html_url":"https://github.com/apache/iceberg/pull/8204#issuecomment-1666912399","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8204","id":1666912399,"node_id":"IC_kwDOCW7NX85jWxCP","user":{"login":"rustyconover","id":731941,"node_id":"MDQ6VXNlcjczMTk0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/731941?v=4","gravatar_id":"","url":"https://api.github.com/users/rustyconover","html_url":"https://github.com/rustyconover","followers_url":"https://api.github.com/users/rustyconover/followers","following_url":"https://api.github.com/users/rustyconover/following{/other_user}","gists_url":"https://api.github.com/users/rustyconover/gists{/gist_id}","starred_url":"https://api.github.com/users/rustyconover/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustyconover/subscriptions","organizations_url":"https://api.github.com/users/rustyconover/orgs","repos_url":"https://api.github.com/users/rustyconover/repos","events_url":"https://api.github.com/users/rustyconover/events{/privacy}","received_events_url":"https://api.github.com/users/rustyconover/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T16:28:54Z","updated_at":"2023-08-06T16:28:54Z","author_association":"CONTRIBUTOR","body":"Hello @Fokko,\r\n\r\nSometimes, applications need to verify the presence of files based on specific filter expressions. For instance, if you're interested in checking for file membership in Iceberg, particularly for files with a `date > 2023-01-01`, utilizing the scan planner can be quite beneficial. This approach allows you to avoid loading unnecessary manifest files, enhancing efficiency.\r\n\r\nAlthough working with manifest data provides valuable insights, it lacks the capability to filter using expressions. This is where the scan planner shines, enabling you to efficiently narrow down your results.\r\n\r\nIn my experience, I frequently encounter Iceberg tables containing an extensive number of data files, often exceeding 80,000. Therefore, any functionality that aids in filtering is immensely valuable.\r\n\r\nRusty","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666912399/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666955823","html_url":"https://github.com/apache/iceberg/pull/8204#issuecomment-1666955823","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8204","id":1666955823,"node_id":"IC_kwDOCW7NX85jW7ov","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T19:58:59Z","updated_at":"2023-08-06T19:58:59Z","author_association":"CONTRIBUTOR","body":"Seems fine to me. Thanks, @rustyconover!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666955823/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666962729","html_url":"https://github.com/apache/iceberg/pull/8221#issuecomment-1666962729","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8221","id":1666962729,"node_id":"IC_kwDOCW7NX85jW9Up","user":{"login":"xiaoxuandev","id":88681113,"node_id":"MDQ6VXNlcjg4NjgxMTEz","avatar_url":"https://avatars.githubusercontent.com/u/88681113?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoxuandev","html_url":"https://github.com/xiaoxuandev","followers_url":"https://api.github.com/users/xiaoxuandev/followers","following_url":"https://api.github.com/users/xiaoxuandev/following{/other_user}","gists_url":"https://api.github.com/users/xiaoxuandev/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoxuandev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoxuandev/subscriptions","organizations_url":"https://api.github.com/users/xiaoxuandev/orgs","repos_url":"https://api.github.com/users/xiaoxuandev/repos","events_url":"https://api.github.com/users/xiaoxuandev/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoxuandev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T20:38:12Z","updated_at":"2023-08-06T20:38:12Z","author_association":"CONTRIBUTOR","body":"Thanks. @nastra I see what you are proposing but in our case the SDK level retry wouldn't help. Because we are using this method \r\nhttps://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html#getObject(software.amazon.awssdk.services.s3.model.GetObjectRequest,software.amazon.awssdk.core.sync.ResponseTransformer) which returns us a stream we will read from. The SDK level retry doesn't give us coverage beyond this call. In our case, the exceptions are thrown post this call when we are reading from the stream. That is why we need to add retries here.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666962729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666976213","html_url":"https://github.com/apache/iceberg/pull/8081#issuecomment-1666976213","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8081","id":1666976213,"node_id":"IC_kwDOCW7NX85jXAnV","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-06T21:53:58Z","updated_at":"2023-08-06T21:53:58Z","author_association":"CONTRIBUTOR","body":"Thanks, @rakesh-das08!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1666976213/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667015161","html_url":"https://github.com/apache/iceberg/issues/6766#issuecomment-1667015161","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6766","id":1667015161,"node_id":"IC_kwDOCW7NX85jXKH5","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T00:12:43Z","updated_at":"2023-08-07T00:12:43Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has been open for 180 days with no activity. It will be closed in next 14 days if no further activity occurs. To permanently prevent this issue from being considered stale, add the label 'not-stale', but commenting on the issue is preferred when possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667015161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667015175","html_url":"https://github.com/apache/iceberg/issues/6756#issuecomment-1667015175","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6756","id":1667015175,"node_id":"IC_kwDOCW7NX85jXKIH","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T00:12:45Z","updated_at":"2023-08-07T00:12:45Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has been open for 180 days with no activity. It will be closed in next 14 days if no further activity occurs. To permanently prevent this issue from being considered stale, add the label 'not-stale', but commenting on the issue is preferred when possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667015175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667050791","html_url":"https://github.com/apache/iceberg/pull/8081#issuecomment-1667050791","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8081","id":1667050791,"node_id":"IC_kwDOCW7NX85jXS0n","user":{"login":"rakesh-das08","id":16017562,"node_id":"MDQ6VXNlcjE2MDE3NTYy","avatar_url":"https://avatars.githubusercontent.com/u/16017562?v=4","gravatar_id":"","url":"https://api.github.com/users/rakesh-das08","html_url":"https://github.com/rakesh-das08","followers_url":"https://api.github.com/users/rakesh-das08/followers","following_url":"https://api.github.com/users/rakesh-das08/following{/other_user}","gists_url":"https://api.github.com/users/rakesh-das08/gists{/gist_id}","starred_url":"https://api.github.com/users/rakesh-das08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rakesh-das08/subscriptions","organizations_url":"https://api.github.com/users/rakesh-das08/orgs","repos_url":"https://api.github.com/users/rakesh-das08/repos","events_url":"https://api.github.com/users/rakesh-das08/events{/privacy}","received_events_url":"https://api.github.com/users/rakesh-das08/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T01:24:52Z","updated_at":"2023-08-07T01:24:52Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue and @nastra for spending your time on reviewing this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667050791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667097697","html_url":"https://github.com/apache/iceberg/pull/8171#issuecomment-1667097697","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8171","id":1667097697,"node_id":"IC_kwDOCW7NX85jXeRh","user":{"login":"bryanck","id":5475421,"node_id":"MDQ6VXNlcjU0NzU0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5475421?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanck","html_url":"https://github.com/bryanck","followers_url":"https://api.github.com/users/bryanck/followers","following_url":"https://api.github.com/users/bryanck/following{/other_user}","gists_url":"https://api.github.com/users/bryanck/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanck/subscriptions","organizations_url":"https://api.github.com/users/bryanck/orgs","repos_url":"https://api.github.com/users/bryanck/repos","events_url":"https://api.github.com/users/bryanck/events{/privacy}","received_events_url":"https://api.github.com/users/bryanck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T02:32:38Z","updated_at":"2023-08-07T02:34:21Z","author_association":"CONTRIBUTOR","body":"Setting up Iceberg with GCS recently came up on the [Slack](https://apache-iceberg.slack.com/archives/C025PH0G1D4/p1691110906160849?thread_ts=1690416554.442079&cid=C025PH0G1D4) channel, there are some shorthand notes on getting up and running with the REST catalog in case it is useful as a reference.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667097697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667121405","html_url":"https://github.com/apache/iceberg/pull/8158#issuecomment-1667121405","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8158","id":1667121405,"node_id":"IC_kwDOCW7NX85jXkD9","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T03:12:07Z","updated_at":"2023-08-07T03:12:07Z","author_association":"COLLABORATOR","body":"@dbtsai both use default compression levels? [Uber also did some benchmark on their data but it's two years ago](https://www.uber.com/en-SG/blog/cost-efficient-big-data-platform/)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667121405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667225960","html_url":"https://github.com/apache/iceberg/pull/8158#issuecomment-1667225960","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8158","id":1667225960,"node_id":"IC_kwDOCW7NX85jX9lo","user":{"login":"dbtsai","id":1134574,"node_id":"MDQ6VXNlcjExMzQ1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1134574?v=4","gravatar_id":"","url":"https://api.github.com/users/dbtsai","html_url":"https://github.com/dbtsai","followers_url":"https://api.github.com/users/dbtsai/followers","following_url":"https://api.github.com/users/dbtsai/following{/other_user}","gists_url":"https://api.github.com/users/dbtsai/gists{/gist_id}","starred_url":"https://api.github.com/users/dbtsai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dbtsai/subscriptions","organizations_url":"https://api.github.com/users/dbtsai/orgs","repos_url":"https://api.github.com/users/dbtsai/repos","events_url":"https://api.github.com/users/dbtsai/events{/privacy}","received_events_url":"https://api.github.com/users/dbtsai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T05:49:19Z","updated_at":"2023-08-07T05:49:19Z","author_association":"MEMBER","body":"@manuzhang we use the default zstd compression level, 3. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667225960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667274689","html_url":"https://github.com/apache/iceberg/pull/8133#issuecomment-1667274689","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8133","id":1667274689,"node_id":"IC_kwDOCW7NX85jYJfB","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T06:41:13Z","updated_at":"2023-08-07T06:41:13Z","author_association":"COLLABORATOR","body":"@flyrain Please help review again and check whether that's what you have in your mind.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667274689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667341899","html_url":"https://github.com/apache/iceberg/pull/8237#issuecomment-1667341899","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8237","id":1667341899,"node_id":"IC_kwDOCW7NX85jYZ5L","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T07:33:21Z","updated_at":"2023-08-07T07:33:21Z","author_association":"CONTRIBUTOR","body":"OK, I won't notify you again about this release, but will get in touch when a new version is available. You can also ignore all major, minor, or patch releases for a dependency by adding an [`ignore` condition](https://docs.github.com/en/code-security/supply-chain-security/configuration-options-for-dependency-updates#ignore) with the desired `update_types` to your config file.\n\nIf you change your mind, just re-open this PR and I'll resolve any conflicts on it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667341899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667367689","html_url":"https://github.com/apache/iceberg/pull/8195#issuecomment-1667367689","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8195","id":1667367689,"node_id":"IC_kwDOCW7NX85jYgMJ","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T07:50:01Z","updated_at":"2023-08-07T07:50:01Z","author_association":"COLLABORATOR","body":"@hililiwei please take another look","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667367689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667465369","html_url":"https://github.com/apache/iceberg/issues/8229#issuecomment-1667465369","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8229","id":1667465369,"node_id":"IC_kwDOCW7NX85jY4CZ","user":{"login":"asp437","id":952188,"node_id":"MDQ6VXNlcjk1MjE4OA==","avatar_url":"https://avatars.githubusercontent.com/u/952188?v=4","gravatar_id":"","url":"https://api.github.com/users/asp437","html_url":"https://github.com/asp437","followers_url":"https://api.github.com/users/asp437/followers","following_url":"https://api.github.com/users/asp437/following{/other_user}","gists_url":"https://api.github.com/users/asp437/gists{/gist_id}","starred_url":"https://api.github.com/users/asp437/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asp437/subscriptions","organizations_url":"https://api.github.com/users/asp437/orgs","repos_url":"https://api.github.com/users/asp437/repos","events_url":"https://api.github.com/users/asp437/events{/privacy}","received_events_url":"https://api.github.com/users/asp437/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T08:55:24Z","updated_at":"2023-08-07T08:55:24Z","author_association":"NONE","body":"Thank you for reply. Will take a look on this changelog view.\r\n\r\nYeah, I've took a look on [this code](https://github.com/apache/iceberg/blob/4f401a7779a56c25e9371cc3a95a13a51012cd6c/spark/v3.3/spark-extensions/src/main/scala/org/apache/spark/sql/execution/datasources/v2/MergeRowsExec.scala#L131) and looks like it is the only place such stats can be calculated. Outside `MergeRowsExec` all rows of affected partitions will be in iterator.\r\n\r\nDo you think it is possible to add collecting such stats into the Iceberg? I'm not familiar with Spark internal and not sure about the details, asking about the idea in general. Maybe I will try to dive deeper in case it is possible and can be used by others.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667465369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667851366","html_url":"https://github.com/apache/iceberg/issues/8242#issuecomment-1667851366","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8242","id":1667851366,"node_id":"IC_kwDOCW7NX85jaWRm","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T13:23:14Z","updated_at":"2023-08-07T13:23:14Z","author_association":"CONTRIBUTOR","body":"9223372036854775808 is also one above the max range of Java's long. It feels like we're going into uncharted territory here. Feels like a `decimal(19, 0)` (or larger), would be more appropriate. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667851366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667862589","html_url":"https://github.com/apache/iceberg/issues/8242#issuecomment-1667862589","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8242","id":1667862589,"node_id":"IC_kwDOCW7NX85jaZA9","user":{"login":"rustyconover","id":731941,"node_id":"MDQ6VXNlcjczMTk0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/731941?v=4","gravatar_id":"","url":"https://api.github.com/users/rustyconover","html_url":"https://github.com/rustyconover","followers_url":"https://api.github.com/users/rustyconover/followers","following_url":"https://api.github.com/users/rustyconover/following{/other_user}","gists_url":"https://api.github.com/users/rustyconover/gists{/gist_id}","starred_url":"https://api.github.com/users/rustyconover/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustyconover/subscriptions","organizations_url":"https://api.github.com/users/rustyconover/orgs","repos_url":"https://api.github.com/users/rustyconover/repos","events_url":"https://api.github.com/users/rustyconover/events{/privacy}","received_events_url":"https://api.github.com/users/rustyconover/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T13:29:42Z","updated_at":"2023-08-07T13:29:42Z","author_association":"CONTRIBUTOR","body":"Yes this makes sense, closing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1667862589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668037735","html_url":"https://github.com/apache/iceberg/pull/8088#issuecomment-1668037735","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8088","id":1668037735,"node_id":"IC_kwDOCW7NX85jbDxn","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T15:00:31Z","updated_at":"2023-08-07T15:00:31Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue for the review. \r\n\r\n> This should not trick Spark into not using StaticInvoke. We should find a way to support both expressions.\r\n\r\nExplained [here](https://github.com/apache/iceberg/pull/8088#discussion_r1285622310)\r\n\r\n> There are unrelated changes that should be moved to separate PRs so that those are reviewed in isolation.\r\n\r\nSplit out those changes to separate PRs.\r\n\r\n> It isn't clear to me why ConstantFolding isn't already applied by the optimizer. If it isn't, then I think we should fix this in Spark and consider whether it's a good idea to do this in Iceberg. We try to only add code that extends Spark and not code that fixes Spark bugs.\r\n\r\nThe extended constant folding is just for `ApplyFunctionExpression`. We should fix it on the Spark side. It is a temporary solution for Iceberg.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668037735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668101848","html_url":"https://github.com/apache/iceberg/pull/5102#issuecomment-1668101848","issue_url":"https://api.github.com/repos/apache/iceberg/issues/5102","id":1668101848,"node_id":"IC_kwDOCW7NX85jbTbY","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T15:34:34Z","updated_at":"2023-08-07T15:34:34Z","author_association":"MEMBER","body":"I can take ownership of this PR and rework based on https://github.com/apache/iceberg/pull/7880. Once it is merged. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668101848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668335023","html_url":"https://github.com/apache/iceberg/pull/8132#issuecomment-1668335023","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8132","id":1668335023,"node_id":"IC_kwDOCW7NX85jcMWv","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T17:46:58Z","updated_at":"2023-08-07T17:46:58Z","author_association":"COLLABORATOR","body":"Merged, thanks @flyrain for the review !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668335023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668457903","html_url":"https://github.com/apache/iceberg/pull/8067#issuecomment-1668457903","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8067","id":1668457903,"node_id":"IC_kwDOCW7NX85jcqWv","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T19:28:00Z","updated_at":"2023-08-07T19:28:00Z","author_association":"CONTRIBUTOR","body":"Thanks again @rdblue for the comprehensive review, appreciate it! üôèüèª ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668457903/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668509426","html_url":"https://github.com/apache/iceberg/pull/7582#issuecomment-1668509426","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7582","id":1668509426,"node_id":"IC_kwDOCW7NX85jc27y","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T20:13:20Z","updated_at":"2023-08-07T20:13:20Z","author_association":"COLLABORATOR","body":"Thanks @aokolnychyi for review!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668509426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668665113","html_url":"https://github.com/apache/iceberg/pull/8042#issuecomment-1668665113","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8042","id":1668665113,"node_id":"IC_kwDOCW7NX85jdc8Z","user":{"login":"namrathamyske","id":17932873,"node_id":"MDQ6VXNlcjE3OTMyODcz","avatar_url":"https://avatars.githubusercontent.com/u/17932873?v=4","gravatar_id":"","url":"https://api.github.com/users/namrathamyske","html_url":"https://github.com/namrathamyske","followers_url":"https://api.github.com/users/namrathamyske/followers","following_url":"https://api.github.com/users/namrathamyske/following{/other_user}","gists_url":"https://api.github.com/users/namrathamyske/gists{/gist_id}","starred_url":"https://api.github.com/users/namrathamyske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrathamyske/subscriptions","organizations_url":"https://api.github.com/users/namrathamyske/orgs","repos_url":"https://api.github.com/users/namrathamyske/repos","events_url":"https://api.github.com/users/namrathamyske/events{/privacy}","received_events_url":"https://api.github.com/users/namrathamyske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T22:39:43Z","updated_at":"2023-08-07T22:39:53Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @aokolnychyi Pls give this PR another look","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668665113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668666753","html_url":"https://github.com/apache/iceberg/pull/8249#issuecomment-1668666753","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8249","id":1668666753,"node_id":"IC_kwDOCW7NX85jddWB","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T22:41:46Z","updated_at":"2023-08-07T22:41:46Z","author_association":"CONTRIBUTOR","body":"Thanks, @ConeyLiu! Do you want to port this to 3.3 as well? I think that's when the problem was introduced.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668666753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668674583","html_url":"https://github.com/apache/iceberg/pull/8244#issuecomment-1668674583","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8244","id":1668674583,"node_id":"IC_kwDOCW7NX85jdfQX","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T22:52:09Z","updated_at":"2023-08-07T22:52:09Z","author_association":"CONTRIBUTOR","body":"@dongjoon-hyun, could you also take a look at this to make sure it is correct?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668674583/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668729974","html_url":"https://github.com/apache/iceberg/issues/6710#issuecomment-1668729974","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6710","id":1668729974,"node_id":"IC_kwDOCW7NX85jdsx2","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T00:12:04Z","updated_at":"2023-08-08T00:12:04Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has been open for 180 days with no activity. It will be closed in next 14 days if no further activity occurs. To permanently prevent this issue from being considered stale, add the label 'not-stale', but commenting on the issue is preferred when possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668729974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668771951","html_url":"https://github.com/apache/iceberg/pull/8250#issuecomment-1668771951","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8250","id":1668771951,"node_id":"IC_kwDOCW7NX85jd3Bv","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T01:20:02Z","updated_at":"2023-08-08T01:20:02Z","author_association":"COLLABORATOR","body":"Which issue is this fixing?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668771951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668818904","html_url":"https://github.com/apache/iceberg/pull/8249#issuecomment-1668818904","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8249","id":1668818904,"node_id":"IC_kwDOCW7NX85jeCfY","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T02:32:30Z","updated_at":"2023-08-08T02:32:30Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue, will submit backport.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668818904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668819428","html_url":"https://github.com/apache/iceberg/issues/8220#issuecomment-1668819428","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8220","id":1668819428,"node_id":"IC_kwDOCW7NX85jeCnk","user":{"login":"chenwyi2","id":19389434,"node_id":"MDQ6VXNlcjE5Mzg5NDM0","avatar_url":"https://avatars.githubusercontent.com/u/19389434?v=4","gravatar_id":"","url":"https://api.github.com/users/chenwyi2","html_url":"https://github.com/chenwyi2","followers_url":"https://api.github.com/users/chenwyi2/followers","following_url":"https://api.github.com/users/chenwyi2/following{/other_user}","gists_url":"https://api.github.com/users/chenwyi2/gists{/gist_id}","starred_url":"https://api.github.com/users/chenwyi2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenwyi2/subscriptions","organizations_url":"https://api.github.com/users/chenwyi2/orgs","repos_url":"https://api.github.com/users/chenwyi2/repos","events_url":"https://api.github.com/users/chenwyi2/events{/privacy}","received_events_url":"https://api.github.com/users/chenwyi2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T02:33:23Z","updated_at":"2023-08-08T02:33:23Z","author_association":"NONE","body":"> It should be caused by restoring jobs from the state. @stevenzwu should this be fixed by #1698?\r\n\r\n#1698 can be compatible with previous versions? if i used java Serializable in checkpoint state before, then cherry up this patch, and restart job, the job can running successfullyÔºü","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668819428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668836893","html_url":"https://github.com/apache/iceberg/issues/7226#issuecomment-1668836893","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7226","id":1668836893,"node_id":"IC_kwDOCW7NX85jeG4d","user":{"login":"Marcus-Rosti","id":8094255,"node_id":"MDQ6VXNlcjgwOTQyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/8094255?v=4","gravatar_id":"","url":"https://api.github.com/users/Marcus-Rosti","html_url":"https://github.com/Marcus-Rosti","followers_url":"https://api.github.com/users/Marcus-Rosti/followers","following_url":"https://api.github.com/users/Marcus-Rosti/following{/other_user}","gists_url":"https://api.github.com/users/Marcus-Rosti/gists{/gist_id}","starred_url":"https://api.github.com/users/Marcus-Rosti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marcus-Rosti/subscriptions","organizations_url":"https://api.github.com/users/Marcus-Rosti/orgs","repos_url":"https://api.github.com/users/Marcus-Rosti/repos","events_url":"https://api.github.com/users/Marcus-Rosti/events{/privacy}","received_events_url":"https://api.github.com/users/Marcus-Rosti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T03:04:02Z","updated_at":"2023-08-08T03:04:02Z","author_association":"NONE","body":"same issue for me","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1668836893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669386052","html_url":"https://github.com/apache/iceberg/issues/8085#issuecomment-1669386052","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8085","id":1669386052,"node_id":"IC_kwDOCW7NX85jgM9E","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T10:51:21Z","updated_at":"2023-08-08T13:09:01Z","author_association":"CONTRIBUTOR","body":"@ignaski I took a look at this. The issue here is that you're specifying the `table-default.xyz` property not at the **catalog level** (see https://iceberg.apache.org/docs/latest/spark-configuration/#catalog-configuration) and so it doesn't take any effect. In your case this would look similar to \r\n```\r\nspark-sql --packages org.apache.iceberg:iceberg-spark-runtime-3.4_2.12:1.3.1\\\r\n    --conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\r\n    --conf spark.sql.catalog.local=org.apache.iceberg.spark.SparkCatalog \\\r\n    --conf spark.sql.catalog.local.type=hadoop \\\r\n    --conf spark.sql.catalog.local.warehouse=$PWD/warehouse \\\r\n    --conf spark.sql.defaultCatalog=local \\\r\n    --conf spark.sql.catalog.local.table-default.write.metadata.delete-after-commit.enabled=true\r\n```\r\n\r\n```\r\n‚îî‚îÄ(15:05:41 on main‚Üë‚öë ‚úπ)‚îÄ‚îÄ> docker exec -it spark-iceberg bash                                                                                                                                                                                                                                            1 ‚Üµ ‚îÄ‚îÄ(Tue,Aug08)‚îÄ‚îò\r\nroot@45e2d9417c49:/opt/spark# spark-sql --packages org.apache.iceberg:iceberg-spark-runtime-3.4_2.12:1.3.1\\\r\n    --conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\r\n    --conf spark.sql.catalog.local=org.apache.iceberg.spark.SparkCatalog \\\r\n    --conf spark.sql.catalog.local.type=hadoop \\\r\n    --conf spark.sql.catalog.local.warehouse=$PWD/warehouse \\\r\n    --conf spark.sql.defaultCatalog=local \\\r\n    --conf spark.sql.catalog.local.table-default.write.metadata.delete-after-commit.enabled=true \\\r\n    --conf spark.sql.catalog.local.table-default.x=true\r\n:: loading settings :: url = jar:file:/opt/spark/jars/ivy-2.5.1.jar!/org/apache/ivy/core/settings/ivysettings.xml\r\nIvy Default Cache set to: /root/.ivy2/cache\r\nThe jars for the packages stored in: /root/.ivy2/jars\r\norg.apache.iceberg#iceberg-spark-runtime-3.4_2.12 added as a dependency\r\n:: resolving dependencies :: org.apache.spark#spark-submit-parent-9d07c0ab-fbc8-42e0-b6f3-939338f546ee;1.0\r\n\tconfs: [default]\r\n\tfound org.apache.iceberg#iceberg-spark-runtime-3.4_2.12;1.3.1 in central\r\ndownloading https://repo1.maven.org/maven2/org/apache/iceberg/iceberg-spark-runtime-3.4_2.12/1.3.1/iceberg-spark-runtime-3.4_2.12-1.3.1.jar ...\r\n\t[SUCCESSFUL ] org.apache.iceberg#iceberg-spark-runtime-3.4_2.12;1.3.1!iceberg-spark-runtime-3.4_2.12.jar (2210ms)\r\n:: resolution report :: resolve 324ms :: artifacts dl 2213ms\r\n\t:: modules in use:\r\n\torg.apache.iceberg#iceberg-spark-runtime-3.4_2.12;1.3.1 from central in [default]\r\n\t---------------------------------------------------------------------\r\n\t|                  |            modules            ||   artifacts   |\r\n\t|       conf       | number| search|dwnlded|evicted|| number|dwnlded|\r\n\t---------------------------------------------------------------------\r\n\t|      default     |   1   |   1   |   1   |   0   ||   1   |   1   |\r\n\t---------------------------------------------------------------------\r\n:: retrieving :: org.apache.spark#spark-submit-parent-9d07c0ab-fbc8-42e0-b6f3-939338f546ee\r\n\tconfs: [default]\r\n\t1 artifacts copied, 0 already retrieved (27867kB/24ms)\r\n23/08/08 13:06:25 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\nSetting default log level to \"WARN\".\r\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\r\n23/08/08 13:06:26 WARN Utils: Service 'SparkUI' could not bind on port 4040. Attempting port 4041.\r\nSpark master: local[*], Application Id: local-1691499986482\r\nspark-sql ()> CREATE TABLE nyc.taxis\r\n            > (\r\n            >   vendor_id bigint,\r\n            >   trip_id bigint,\r\n            >   trip_distance float,\r\n            >   fare_amount double,\r\n            >   store_and_fwd_flag string\r\n            > )\r\n            > PARTITIONED BY (vendor_id);\r\nTime taken: 1.729 seconds\r\nspark-sql ()> show create table nyc.taxis;\r\nCREATE TABLE local.nyc.taxis (\r\n  vendor_id BIGINT,\r\n  trip_id BIGINT,\r\n  trip_distance FLOAT,\r\n  fare_amount DOUBLE,\r\n  store_and_fwd_flag STRING)\r\nUSING iceberg\r\nPARTITIONED BY (vendor_id)\r\nLOCATION '/opt/spark/warehouse/nyc/taxis'\r\nTBLPROPERTIES (\r\n  'current-snapshot-id' = 'none',\r\n  'format' = 'iceberg/parquet',\r\n  'format-version' = '1',\r\n  'write.metadata.delete-after-commit.enabled' = 'true',\r\n  'x' = 'true')\r\n\r\nTime taken: 0.27 seconds, Fetched 1 row(s)\r\nspark-sql ()> \r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669386052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669447932","html_url":"https://github.com/apache/iceberg/pull/8249#issuecomment-1669447932","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8249","id":1669447932,"node_id":"IC_kwDOCW7NX85jgcD8","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T11:36:39Z","updated_at":"2023-08-08T11:36:39Z","author_association":"CONTRIBUTOR","body":"Submitted #8256","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669447932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669535986","html_url":"https://github.com/apache/iceberg/issues/8160#issuecomment-1669535986","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8160","id":1669535986,"node_id":"IC_kwDOCW7NX85jgxjy","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T12:40:08Z","updated_at":"2023-08-08T12:40:08Z","author_association":"COLLABORATOR","body":"Have you checked https://iceberg.apache.org/docs/latest/spark-procedures/#rewrite_position_delete_files?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669535986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669546435","html_url":"https://github.com/apache/iceberg/issues/7226#issuecomment-1669546435","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7226","id":1669546435,"node_id":"IC_kwDOCW7NX85jg0HD","user":{"login":"Marcus-Rosti","id":8094255,"node_id":"MDQ6VXNlcjgwOTQyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/8094255?v=4","gravatar_id":"","url":"https://api.github.com/users/Marcus-Rosti","html_url":"https://github.com/Marcus-Rosti","followers_url":"https://api.github.com/users/Marcus-Rosti/followers","following_url":"https://api.github.com/users/Marcus-Rosti/following{/other_user}","gists_url":"https://api.github.com/users/Marcus-Rosti/gists{/gist_id}","starred_url":"https://api.github.com/users/Marcus-Rosti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marcus-Rosti/subscriptions","organizations_url":"https://api.github.com/users/Marcus-Rosti/orgs","repos_url":"https://api.github.com/users/Marcus-Rosti/repos","events_url":"https://api.github.com/users/Marcus-Rosti/events{/privacy}","received_events_url":"https://api.github.com/users/Marcus-Rosti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T12:47:16Z","updated_at":"2023-08-08T12:47:16Z","author_association":"NONE","body":"> The stack trace:\r\n> \r\n> ```\r\n> 23/06/19 17:45:53 ERROR MicroBatchExecution: Query [id = 2507e68d-0fb2-4aa2-98e4-427bfa1326c5, runId = 308060c0-6572-4328-9588-ece2b00c054a] terminated with error\r\n> org.apache.spark.sql.AnalysisException: days(ts) is not currently supported\r\n> \tat org.apache.spark.sql.catalyst.expressions.V2ExpressionUtils$.$anonfun$toCatalyst$1(V2ExpressionUtils.scala:64)\r\n> \tat scala.Option.getOrElse(Option.scala:189)\r\n> \tat org.apache.spark.sql.catalyst.expressions.V2ExpressionUtils$.toCatalyst(V2ExpressionUtils.scala:64)\r\n> \tat org.apache.spark.sql.execution.datasources.v2.DistributionAndOrderingUtils$.$anonfun$prepareQuery$1(DistributionAndOrderingUtils.scala:36)\r\n> \tat scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:286)\r\n> \tat scala.collection.IndexedSeqOptimized.foreach(IndexedSeqOptimized.scala:36)\r\n> \tat scala.collection.IndexedSeqOptimized.foreach$(IndexedSeqOptimized.scala:33)\r\n> \tat scala.collection.mutable.ArrayOps$ofRef.foreach(ArrayOps.scala:198)\r\n> \tat scala.collection.TraversableLike.map(TraversableLike.scala:286)\r\n> \tat scala.collection.TraversableLike.map$(TraversableLike.scala:279)\r\n> \tat scala.collection.mutable.ArrayOps$ofRef.map(ArrayOps.scala:198)\r\n> \tat org.apache.spark.sql.execution.datasources.v2.DistributionAndOrderingUtils$.prepareQuery(DistributionAndOrderingUtils.scala:36)\r\n> \tat org.apache.spark.sql.execution.datasources.v2.V2Writes$$anonfun$apply$1.applyOrElse(V2Writes.scala:93)\r\n> \tat org.apache.spark.sql.execution.datasources.v2.V2Writes$$anonfun$apply$1.applyOrElse(V2Writes.scala:43)\r\n> \tat org.apache.spark.sql.catalyst.trees.TreeNode.$anonfun$transformDownWithPruning$1(TreeNode.scala:584)\r\n> \tat org.apache.spark.sql.catalyst.trees.CurrentOrigin$.withOrigin(TreeNode.scala:176)\r\n> \tat org.apache.spark.sql.catalyst.trees.TreeNode.transformDownWithPruning(TreeNode.scala:584)\r\n> \tat org.apache.spark.sql.catalyst.plans.logical.LogicalPlan.org$apache$spark$sql$catalyst$plans$logical$AnalysisHelper$$super$transformDownWithPruning(LogicalPlan.scala:30)\r\n> \tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.transformDownWithPruning(AnalysisHelper.scala:267)\r\n> \tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.transformDownWithPruning$(AnalysisHelper.scala:263)\r\n> \tat org.apache.spark.sql.catalyst.plans.logical.LogicalPlan.transformDownWithPruning(LogicalPlan.scala:30)\r\n> \tat org.apache.spark.sql.catalyst.plans.logical.LogicalPlan.transformDownWithPruning(LogicalPlan.scala:30)\r\n> \tat org.apache.spark.sql.catalyst.trees.TreeNode.transformDown(TreeNode.scala:560)\r\n> \tat org.apache.spark.sql.execution.datasources.v2.V2Writes$.apply(V2Writes.scala:43)\r\n> \tat org.apache.spark.sql.execution.datasources.v2.V2Writes$.apply(V2Writes.scala:39)\r\n> \tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$execute$2(RuleExecutor.scala:211)\r\n> \tat scala.collection.LinearSeqOptimized.foldLeft(LinearSeqOptimized.scala:126)\r\n> \tat scala.collection.LinearSeqOptimized.foldLeft$(LinearSeqOptimized.scala:122)\r\n> \tat scala.collection.immutable.List.foldLeft(List.scala:91)\r\n> \tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$execute$1(RuleExecutor.scala:208)\r\n> \tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$execute$1$adapted(RuleExecutor.scala:200)\r\n> \tat scala.collection.immutable.List.foreach(List.scala:431)\r\n> \tat org.apache.spark.sql.catalyst.rules.RuleExecutor.execute(RuleExecutor.scala:200)\r\n> \tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$executeAndTrack$1(RuleExecutor.scala:179)\r\n> \tat org.apache.spark.sql.catalyst.QueryPlanningTracker$.withTracker(QueryPlanningTracker.scala:88)\r\n> \tat org.apache.spark.sql.catalyst.rules.RuleExecutor.executeAndTrack(RuleExecutor.scala:179)\r\n> \tat org.apache.spark.sql.execution.streaming.IncrementalExecution.$anonfun$optimizedPlan$1(IncrementalExecution.scala:81)\r\n> \tat org.apache.spark.sql.catalyst.QueryPlanningTracker.measurePhase(QueryPlanningTracker.scala:111)\r\n> \tat org.apache.spark.sql.execution.QueryExecution.$anonfun$executePhase$2(QueryExecution.scala:185)\r\n> \tat org.apache.spark.sql.execution.QueryExecution$.withInternalError(QueryExecution.scala:510)\r\n> \tat org.apache.spark.sql.execution.QueryExecution.$anonfun$executePhase$1(QueryExecution.scala:185)\r\n> \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:779)\r\n> \tat org.apache.spark.sql.execution.QueryExecution.executePhase(QueryExecution.scala:184)\r\n> \tat org.apache.spark.sql.execution.streaming.IncrementalExecution.optimizedPlan$lzycompute(IncrementalExecution.scala:82)\r\n> \tat org.apache.spark.sql.execution.streaming.IncrementalExecution.optimizedPlan(IncrementalExecution.scala:79)\r\n> \tat org.apache.spark.sql.execution.QueryExecution.assertOptimized(QueryExecution.scala:136)\r\n> \tat org.apache.spark.sql.execution.QueryExecution.executedPlan$lzycompute(QueryExecution.scala:154)\r\n> \tat org.apache.spark.sql.execution.QueryExecution.executedPlan(QueryExecution.scala:151)\r\n> \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runBatch$15(MicroBatchExecution.scala:656)\r\n> \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:375)\r\n> \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:373)\r\n> \tat org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\r\n> \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.runBatch(MicroBatchExecution.scala:646)\r\n> \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$2(MicroBatchExecution.scala:256)\r\n> \tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n> \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken(ProgressReporter.scala:375)\r\n> \tat org.apache.spark.sql.execution.streaming.ProgressReporter.reportTimeTaken$(ProgressReporter.scala:373)\r\n> \tat org.apache.spark.sql.execution.streaming.StreamExecution.reportTimeTaken(StreamExecution.scala:68)\r\n> \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.$anonfun$runActivatedStream$1(MicroBatchExecution.scala:219)\r\n> \tat org.apache.spark.sql.execution.streaming.SingleBatchExecutor.execute(TriggerExecutor.scala:39)\r\n> \tat org.apache.spark.sql.execution.streaming.MicroBatchExecution.runActivatedStream(MicroBatchExecution.scala:213)\r\n> \tat org.apache.spark.sql.execution.streaming.StreamExecution.$anonfun$runStream$1(StreamExecution.scala:307)\r\n> \tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n> \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:779)\r\n> \tat org.apache.spark.sql.execution.streaming.StreamExecution.org$apache$spark$sql$execution$streaming$StreamExecution$$runStream(StreamExecution.scala:285)\r\n> \tat org.apache.spark.sql.execution.streaming.StreamExecution$$anon$1.run(StreamExecution.scala:208)\r\n> ```\r\n> \r\n> Spark 3.2 uses a V2 data source.\r\n\r\nsame stack trace for me on 1.3.1 and spark 3.3","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669546435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669571224","html_url":"https://github.com/apache/iceberg/issues/8255#issuecomment-1669571224","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8255","id":1669571224,"node_id":"IC_kwDOCW7NX85jg6KY","user":{"login":"zhongyujiang","id":42907416,"node_id":"MDQ6VXNlcjQyOTA3NDE2","avatar_url":"https://avatars.githubusercontent.com/u/42907416?v=4","gravatar_id":"","url":"https://api.github.com/users/zhongyujiang","html_url":"https://github.com/zhongyujiang","followers_url":"https://api.github.com/users/zhongyujiang/followers","following_url":"https://api.github.com/users/zhongyujiang/following{/other_user}","gists_url":"https://api.github.com/users/zhongyujiang/gists{/gist_id}","starred_url":"https://api.github.com/users/zhongyujiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhongyujiang/subscriptions","organizations_url":"https://api.github.com/users/zhongyujiang/orgs","repos_url":"https://api.github.com/users/zhongyujiang/repos","events_url":"https://api.github.com/users/zhongyujiang/events{/privacy}","received_events_url":"https://api.github.com/users/zhongyujiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T13:01:26Z","updated_at":"2023-08-08T13:01:26Z","author_association":"CONTRIBUTOR","body":"You might want to take a look at this [spec](https://iceberg.apache.org/spec/#manifests), adding a deleted file back is not recommended.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669571224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669622158","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669622158","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669622158,"node_id":"IC_kwDOCW7NX85jhGmO","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T13:31:29Z","updated_at":"2023-08-08T13:31:29Z","author_association":"CONTRIBUTOR","body":"This is in fact expected behavior. There's also a test that tests exactly this use case: https://github.com/apache/iceberg/blob/7c3c34897a2e452311f085af67d6f546ba56e44e/core/src/test/java/org/apache/iceberg/TestTransaction.java#L421-L445","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669622158/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669646731","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669646731","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669646731,"node_id":"IC_kwDOCW7NX85jhMmL","user":{"login":"officialtushark","id":74366732,"node_id":"MDQ6VXNlcjc0MzY2NzMy","avatar_url":"https://avatars.githubusercontent.com/u/74366732?v=4","gravatar_id":"","url":"https://api.github.com/users/officialtushark","html_url":"https://github.com/officialtushark","followers_url":"https://api.github.com/users/officialtushark/followers","following_url":"https://api.github.com/users/officialtushark/following{/other_user}","gists_url":"https://api.github.com/users/officialtushark/gists{/gist_id}","starred_url":"https://api.github.com/users/officialtushark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/officialtushark/subscriptions","organizations_url":"https://api.github.com/users/officialtushark/orgs","repos_url":"https://api.github.com/users/officialtushark/repos","events_url":"https://api.github.com/users/officialtushark/events{/privacy}","received_events_url":"https://api.github.com/users/officialtushark/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T13:43:32Z","updated_at":"2023-08-08T13:43:32Z","author_association":"NONE","body":"Thanks @nastra. I did see this test case demonstrating the behaviour. However I could not wrap my head around the reasoning for this. \r\n\r\nAt one hand, I do understand a conflicting schema change (`t1 adds a col1:int and t2 adds a col1:double`) should trigger a failure . However, In case when there is non-conflicting change to the schema(`t1 add col1:int, t2 also adds col1:int`), why do we resort to fail the transaction? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669646731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669651190","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669651190","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669651190,"node_id":"IC_kwDOCW7NX85jhNr2","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T13:45:47Z","updated_at":"2023-08-08T13:45:47Z","author_association":"MEMBER","body":"Just not an implemented validation check yet. Pull requests are welcome :) ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669651190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669672686","html_url":"https://github.com/apache/iceberg/issues/8255#issuecomment-1669672686","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8255","id":1669672686,"node_id":"IC_kwDOCW7NX85jhS7u","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T13:57:08Z","updated_at":"2023-08-08T13:57:08Z","author_association":"MEMBER","body":"I'm going to agree with @zhongyujiang. We generally do not want to add the same file to the table multiple times regardless of deletes. I think we don't explicitly write this out yet but there are several behaviors which will lead to weird results if the same file is included multiple times in a table.  \r\n\r\nThat said, I actually think the Spark Algorithm (see [Expire Snapshots Action](https://github.com/apache/iceberg/blob/master/spark/v3.4/spark/src/main/java/org/apache/iceberg/spark/actions/ExpireSnapshotsSparkAction.java#L164-L172)) would be safe for this execution since it takes the diff between the before and after expire action rather than trying to enumerate deleted files.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669672686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669678564","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669678564","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669678564,"node_id":"IC_kwDOCW7NX85jhUXk","user":{"login":"officialtushark","id":74366732,"node_id":"MDQ6VXNlcjc0MzY2NzMy","avatar_url":"https://avatars.githubusercontent.com/u/74366732?v=4","gravatar_id":"","url":"https://api.github.com/users/officialtushark","html_url":"https://github.com/officialtushark","followers_url":"https://api.github.com/users/officialtushark/followers","following_url":"https://api.github.com/users/officialtushark/following{/other_user}","gists_url":"https://api.github.com/users/officialtushark/gists{/gist_id}","starred_url":"https://api.github.com/users/officialtushark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/officialtushark/subscriptions","organizations_url":"https://api.github.com/users/officialtushark/orgs","repos_url":"https://api.github.com/users/officialtushark/repos","events_url":"https://api.github.com/users/officialtushark/events{/privacy}","received_events_url":"https://api.github.com/users/officialtushark/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T14:00:22Z","updated_at":"2023-08-08T14:00:22Z","author_association":"NONE","body":"Got it @RussellSpitzer . I am open to submit a PR for this check. However this snippet would always be true in case we are doing a schema update and some other transaction committed before. Do you have some recommendation around the implementation of this feature?\r\n\r\nhttps://github.com/apache/iceberg/blob/00f771de3a71c4de39e310114f0f776c7a81838d/core/src/main/java/org/apache/iceberg/BaseMetastoreTableOperations.java#L118C1-L127C6","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669678564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669686723","html_url":"https://github.com/apache/iceberg/pull/8113#issuecomment-1669686723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8113","id":1669686723,"node_id":"IC_kwDOCW7NX85jhWXD","user":{"login":"SourabhBadhya","id":42867455,"node_id":"MDQ6VXNlcjQyODY3NDU1","avatar_url":"https://avatars.githubusercontent.com/u/42867455?v=4","gravatar_id":"","url":"https://api.github.com/users/SourabhBadhya","html_url":"https://github.com/SourabhBadhya","followers_url":"https://api.github.com/users/SourabhBadhya/followers","following_url":"https://api.github.com/users/SourabhBadhya/following{/other_user}","gists_url":"https://api.github.com/users/SourabhBadhya/gists{/gist_id}","starred_url":"https://api.github.com/users/SourabhBadhya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SourabhBadhya/subscriptions","organizations_url":"https://api.github.com/users/SourabhBadhya/orgs","repos_url":"https://api.github.com/users/SourabhBadhya/repos","events_url":"https://api.github.com/users/SourabhBadhya/events{/privacy}","received_events_url":"https://api.github.com/users/SourabhBadhya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T14:04:43Z","updated_at":"2023-08-08T14:04:43Z","author_association":"CONTRIBUTOR","body":"@Fokko , @rdblue did you have a chance to check this. Please review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669686723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669712519","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669712519","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669712519,"node_id":"IC_kwDOCW7NX85jhcqH","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T14:19:35Z","updated_at":"2023-08-08T14:19:35Z","author_association":"MEMBER","body":"It would be a rather large change, we probably would need some sort of validation logic which all operations were able to subclass and change based on what they want to do. I know this ends up looking a lot simpler in the REST catalog where we don't have the whole \"metadata\" to compare and instead we have a set of changes. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669712519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669754959","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669754959","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669754959,"node_id":"IC_kwDOCW7NX85jhnBP","user":{"login":"officialtushark","id":74366732,"node_id":"MDQ6VXNlcjc0MzY2NzMy","avatar_url":"https://avatars.githubusercontent.com/u/74366732?v=4","gravatar_id":"","url":"https://api.github.com/users/officialtushark","html_url":"https://github.com/officialtushark","followers_url":"https://api.github.com/users/officialtushark/followers","following_url":"https://api.github.com/users/officialtushark/following{/other_user}","gists_url":"https://api.github.com/users/officialtushark/gists{/gist_id}","starred_url":"https://api.github.com/users/officialtushark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/officialtushark/subscriptions","organizations_url":"https://api.github.com/users/officialtushark/orgs","repos_url":"https://api.github.com/users/officialtushark/repos","events_url":"https://api.github.com/users/officialtushark/events{/privacy}","received_events_url":"https://api.github.com/users/officialtushark/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T14:40:23Z","updated_at":"2023-08-08T14:41:14Z","author_association":"NONE","body":"Yes I agree, I potentially see some logic changes(upgrades?) inside core. This involves two sub-part I guess then:\r\n\r\n1. Deciding the scope of this feature (which types of operations are going to be considered as non-conflicting and conflicting)\r\n2. Implementation of the same\r\n\r\nShould I open a separate issue for this? I can work on a doc outlining both of the above sub-parts and once we agree on the semantics,I can work on a PR to integrate this feature. \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669754959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669778478","html_url":"https://github.com/apache/iceberg/issues/7226#issuecomment-1669778478","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7226","id":1669778478,"node_id":"IC_kwDOCW7NX85jhswu","user":{"login":"Marcus-Rosti","id":8094255,"node_id":"MDQ6VXNlcjgwOTQyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/8094255?v=4","gravatar_id":"","url":"https://api.github.com/users/Marcus-Rosti","html_url":"https://github.com/Marcus-Rosti","followers_url":"https://api.github.com/users/Marcus-Rosti/followers","following_url":"https://api.github.com/users/Marcus-Rosti/following{/other_user}","gists_url":"https://api.github.com/users/Marcus-Rosti/gists{/gist_id}","starred_url":"https://api.github.com/users/Marcus-Rosti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marcus-Rosti/subscriptions","organizations_url":"https://api.github.com/users/Marcus-Rosti/orgs","repos_url":"https://api.github.com/users/Marcus-Rosti/repos","events_url":"https://api.github.com/users/Marcus-Rosti/events{/privacy}","received_events_url":"https://api.github.com/users/Marcus-Rosti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T14:54:10Z","updated_at":"2023-08-08T14:54:10Z","author_association":"NONE","body":"toTable wasn't a fix","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669778478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669795297","html_url":"https://github.com/apache/iceberg/issues/8258#issuecomment-1669795297","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8258","id":1669795297,"node_id":"IC_kwDOCW7NX85jhw3h","user":{"login":"advancedxy","id":807537,"node_id":"MDQ6VXNlcjgwNzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/807537?v=4","gravatar_id":"","url":"https://api.github.com/users/advancedxy","html_url":"https://github.com/advancedxy","followers_url":"https://api.github.com/users/advancedxy/followers","following_url":"https://api.github.com/users/advancedxy/following{/other_user}","gists_url":"https://api.github.com/users/advancedxy/gists{/gist_id}","starred_url":"https://api.github.com/users/advancedxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/advancedxy/subscriptions","organizations_url":"https://api.github.com/users/advancedxy/orgs","repos_url":"https://api.github.com/users/advancedxy/repos","events_url":"https://api.github.com/users/advancedxy/events{/privacy}","received_events_url":"https://api.github.com/users/advancedxy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T15:03:15Z","updated_at":"2023-08-08T15:03:15Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer  @rdblue would you like to take a look at this? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669795297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669841631","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1669841631","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1669841631,"node_id":"IC_kwDOCW7NX85jh8Lf","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T15:30:07Z","updated_at":"2023-08-08T15:30:07Z","author_association":"MEMBER","body":"I would think we would nee a pretty extensive design doc if we are modifying core since this will interact with a lot of things. That's probably a good starting place, you may also just want to raise this on the dev list to see if there is actually a lot of interest in making these modifications. They will necessitate changing some very basic things so there will be a rather large surface area. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669841631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669861230","html_url":"https://github.com/apache/iceberg/pull/7636#issuecomment-1669861230","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7636","id":1669861230,"node_id":"IC_kwDOCW7NX85jiA9u","user":{"login":"ChristinaTech","id":6320689,"node_id":"MDQ6VXNlcjYzMjA2ODk=","avatar_url":"https://avatars.githubusercontent.com/u/6320689?v=4","gravatar_id":"","url":"https://api.github.com/users/ChristinaTech","html_url":"https://github.com/ChristinaTech","followers_url":"https://api.github.com/users/ChristinaTech/followers","following_url":"https://api.github.com/users/ChristinaTech/following{/other_user}","gists_url":"https://api.github.com/users/ChristinaTech/gists{/gist_id}","starred_url":"https://api.github.com/users/ChristinaTech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChristinaTech/subscriptions","organizations_url":"https://api.github.com/users/ChristinaTech/orgs","repos_url":"https://api.github.com/users/ChristinaTech/repos","events_url":"https://api.github.com/users/ChristinaTech/events{/privacy}","received_events_url":"https://api.github.com/users/ChristinaTech/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T15:42:04Z","updated_at":"2023-08-08T15:42:04Z","author_association":"CONTRIBUTOR","body":"Branch has conflicts again and can't be merged. Please fix when you have the chance. Would be nice if we could get this into 1.4.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669861230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669908297","html_url":"https://github.com/apache/iceberg/pull/7636#issuecomment-1669908297","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7636","id":1669908297,"node_id":"IC_kwDOCW7NX85jiMdJ","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T16:10:03Z","updated_at":"2023-08-08T16:10:03Z","author_association":"MEMBER","body":"The conflict is very small so i think we can just merge after we get that fixed","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669908297/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669931506","html_url":"https://github.com/apache/iceberg/issues/6414#issuecomment-1669931506","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6414","id":1669931506,"node_id":"IC_kwDOCW7NX85jiSHy","user":{"login":"s-akhtar-baig","id":43451943,"node_id":"MDQ6VXNlcjQzNDUxOTQz","avatar_url":"https://avatars.githubusercontent.com/u/43451943?v=4","gravatar_id":"","url":"https://api.github.com/users/s-akhtar-baig","html_url":"https://github.com/s-akhtar-baig","followers_url":"https://api.github.com/users/s-akhtar-baig/followers","following_url":"https://api.github.com/users/s-akhtar-baig/following{/other_user}","gists_url":"https://api.github.com/users/s-akhtar-baig/gists{/gist_id}","starred_url":"https://api.github.com/users/s-akhtar-baig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s-akhtar-baig/subscriptions","organizations_url":"https://api.github.com/users/s-akhtar-baig/orgs","repos_url":"https://api.github.com/users/s-akhtar-baig/repos","events_url":"https://api.github.com/users/s-akhtar-baig/events{/privacy}","received_events_url":"https://api.github.com/users/s-akhtar-baig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T16:24:31Z","updated_at":"2023-08-08T16:24:31Z","author_association":"CONTRIBUTOR","body":"I will check it out, thanks @ajantha-bhat @snazy! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1669931506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670026924","html_url":"https://github.com/apache/iceberg/pull/7910#issuecomment-1670026924","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7910","id":1670026924,"node_id":"IC_kwDOCW7NX85jipas","user":{"login":"Marcus-Rosti","id":8094255,"node_id":"MDQ6VXNlcjgwOTQyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/8094255?v=4","gravatar_id":"","url":"https://api.github.com/users/Marcus-Rosti","html_url":"https://github.com/Marcus-Rosti","followers_url":"https://api.github.com/users/Marcus-Rosti/followers","following_url":"https://api.github.com/users/Marcus-Rosti/following{/other_user}","gists_url":"https://api.github.com/users/Marcus-Rosti/gists{/gist_id}","starred_url":"https://api.github.com/users/Marcus-Rosti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Marcus-Rosti/subscriptions","organizations_url":"https://api.github.com/users/Marcus-Rosti/orgs","repos_url":"https://api.github.com/users/Marcus-Rosti/repos","events_url":"https://api.github.com/users/Marcus-Rosti/events{/privacy}","received_events_url":"https://api.github.com/users/Marcus-Rosti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T17:30:50Z","updated_at":"2023-08-08T17:30:50Z","author_association":"NONE","body":"Is this fix only for 3.4+?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670026924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670103008","html_url":"https://github.com/apache/iceberg/pull/7910#issuecomment-1670103008","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7910","id":1670103008,"node_id":"IC_kwDOCW7NX85ji7_g","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T18:29:50Z","updated_at":"2023-08-08T18:29:50Z","author_association":"CONTRIBUTOR","body":"@Marcus-Rosti I first wanted to get some feedback on this before also backporting this to older versions of Spark","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670103008/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670145601","html_url":"https://github.com/apache/iceberg/issues/7259#issuecomment-1670145601","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7259","id":1670145601,"node_id":"IC_kwDOCW7NX85jjGZB","user":{"login":"pdames","id":833518,"node_id":"MDQ6VXNlcjgzMzUxOA==","avatar_url":"https://avatars.githubusercontent.com/u/833518?v=4","gravatar_id":"","url":"https://api.github.com/users/pdames","html_url":"https://github.com/pdames","followers_url":"https://api.github.com/users/pdames/followers","following_url":"https://api.github.com/users/pdames/following{/other_user}","gists_url":"https://api.github.com/users/pdames/gists{/gist_id}","starred_url":"https://api.github.com/users/pdames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pdames/subscriptions","organizations_url":"https://api.github.com/users/pdames/orgs","repos_url":"https://api.github.com/users/pdames/repos","events_url":"https://api.github.com/users/pdames/events{/privacy}","received_events_url":"https://api.github.com/users/pdames/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T19:06:32Z","updated_at":"2023-08-08T19:06:32Z","author_association":"NONE","body":"@jackye1995 Any progress updates or ETA here, or is a link available to track prerequisite work required to close this issue (e.g. milestones, other issues/PRs/docs)?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670145601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670169299","html_url":"https://github.com/apache/iceberg/issues/7259#issuecomment-1670169299","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7259","id":1670169299,"node_id":"IC_kwDOCW7NX85jjMLT","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T19:23:30Z","updated_at":"2023-08-08T19:23:30Z","author_association":"CONTRIBUTOR","body":"Hey @pdames Commit operation is in there for the REST catalog: https://py.iceberg.apache.org/api/#create-a-table See the section of `Update table properties`. The schema updates are also underway https://github.com/apache/iceberg/pull/8174","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670169299/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670215126","html_url":"https://github.com/apache/iceberg/issues/8258#issuecomment-1670215126","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8258","id":1670215126,"node_id":"IC_kwDOCW7NX85jjXXW","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T19:48:49Z","updated_at":"2023-08-08T19:48:49Z","author_association":"MEMBER","body":"My big thoughts on this is we should probably frame it as a full Spec Version update targeting version 3. Left some comments on the doc.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670215126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670266465","html_url":"https://github.com/apache/iceberg/pull/8261#issuecomment-1670266465","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8261","id":1670266465,"node_id":"IC_kwDOCW7NX85jjj5h","user":{"login":"bryanck","id":5475421,"node_id":"MDQ6VXNlcjU0NzU0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5475421?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanck","html_url":"https://github.com/bryanck","followers_url":"https://api.github.com/users/bryanck/followers","following_url":"https://api.github.com/users/bryanck/following{/other_user}","gists_url":"https://api.github.com/users/bryanck/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanck/subscriptions","organizations_url":"https://api.github.com/users/bryanck/orgs","repos_url":"https://api.github.com/users/bryanck/repos","events_url":"https://api.github.com/users/bryanck/events{/privacy}","received_events_url":"https://api.github.com/users/bryanck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T20:31:41Z","updated_at":"2023-08-08T20:31:41Z","author_association":"CONTRIBUTOR","body":"FYI the dependency license list in the license file was generated using the [Gradle License Report](https://github.com/jk1/Gradle-License-Report) plugin, with some manual tweaking afterwards. (The same plugin was used for the `iceberg-gcp-bundle` project.)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670266465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670437332","html_url":"https://github.com/apache/iceberg/pull/8170#issuecomment-1670437332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8170","id":1670437332,"node_id":"IC_kwDOCW7NX85jkNnU","user":{"login":"dipankarmazumdar","id":103004148,"node_id":"U_kgDOBiO39A","avatar_url":"https://avatars.githubusercontent.com/u/103004148?v=4","gravatar_id":"","url":"https://api.github.com/users/dipankarmazumdar","html_url":"https://github.com/dipankarmazumdar","followers_url":"https://api.github.com/users/dipankarmazumdar/followers","following_url":"https://api.github.com/users/dipankarmazumdar/following{/other_user}","gists_url":"https://api.github.com/users/dipankarmazumdar/gists{/gist_id}","starred_url":"https://api.github.com/users/dipankarmazumdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dipankarmazumdar/subscriptions","organizations_url":"https://api.github.com/users/dipankarmazumdar/orgs","repos_url":"https://api.github.com/users/dipankarmazumdar/repos","events_url":"https://api.github.com/users/dipankarmazumdar/events{/privacy}","received_events_url":"https://api.github.com/users/dipankarmazumdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-08T23:19:05Z","updated_at":"2023-08-08T23:19:05Z","author_association":"NONE","body":"Thanks @stevenzwu !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670437332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670471928","html_url":"https://github.com/apache/iceberg/issues/6785#issuecomment-1670471928","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6785","id":1670471928,"node_id":"IC_kwDOCW7NX85jkWD4","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T00:11:58Z","updated_at":"2023-08-09T00:11:58Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has been open for 180 days with no activity. It will be closed in next 14 days if no further activity occurs. To permanently prevent this issue from being considered stale, add the label 'not-stale', but commenting on the issue is preferred when possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670471928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670471939","html_url":"https://github.com/apache/iceberg/issues/6784#issuecomment-1670471939","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6784","id":1670471939,"node_id":"IC_kwDOCW7NX85jkWED","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T00:12:00Z","updated_at":"2023-08-09T00:12:00Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has been open for 180 days with no activity. It will be closed in next 14 days if no further activity occurs. To permanently prevent this issue from being considered stale, add the label 'not-stale', but commenting on the issue is preferred when possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670471939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670471964","html_url":"https://github.com/apache/iceberg/issues/6763#issuecomment-1670471964","issue_url":"https://api.github.com/repos/apache/iceberg/issues/6763","id":1670471964,"node_id":"IC_kwDOCW7NX85jkWEc","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T00:12:03Z","updated_at":"2023-08-09T00:12:03Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it has been open for 180 days with no activity. It will be closed in next 14 days if no further activity occurs. To permanently prevent this issue from being considered stale, add the label 'not-stale', but commenting on the issue is preferred when possible.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670471964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670495928","html_url":"https://github.com/apache/iceberg/pull/8158#issuecomment-1670495928","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8158","id":1670495928,"node_id":"IC_kwDOCW7NX85jkb64","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T00:46:41Z","updated_at":"2023-08-09T00:46:41Z","author_association":"CONTRIBUTOR","body":"Let's discuss this change during the community sync tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670495928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670510580","html_url":"https://github.com/apache/iceberg/pull/8163#issuecomment-1670510580","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8163","id":1670510580,"node_id":"IC_kwDOCW7NX85jkff0","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T01:06:04Z","updated_at":"2023-08-09T01:06:04Z","author_association":"CONTRIBUTOR","body":"I had two minor comments but it looks good otherwise.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670510580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670513017","html_url":"https://github.com/apache/iceberg/pull/8164#issuecomment-1670513017","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8164","id":1670513017,"node_id":"IC_kwDOCW7NX85jkgF5","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T01:10:01Z","updated_at":"2023-08-09T01:10:01Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, AQE is not supported for V2 writes in OSS Spark 3.3. It works for queries but not for writes. I was not planning to cherry-pick this to 3.3 but we can do it after #8042. I can help review if you want to do the cherry-pick.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670513017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670547303","html_url":"https://github.com/apache/iceberg/issues/8258#issuecomment-1670547303","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8258","id":1670547303,"node_id":"IC_kwDOCW7NX85jkodn","user":{"login":"advancedxy","id":807537,"node_id":"MDQ6VXNlcjgwNzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/807537?v=4","gravatar_id":"","url":"https://api.github.com/users/advancedxy","html_url":"https://github.com/advancedxy","followers_url":"https://api.github.com/users/advancedxy/followers","following_url":"https://api.github.com/users/advancedxy/following{/other_user}","gists_url":"https://api.github.com/users/advancedxy/gists{/gist_id}","starred_url":"https://api.github.com/users/advancedxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/advancedxy/subscriptions","organizations_url":"https://api.github.com/users/advancedxy/orgs","repos_url":"https://api.github.com/users/advancedxy/repos","events_url":"https://api.github.com/users/advancedxy/events{/privacy}","received_events_url":"https://api.github.com/users/advancedxy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T02:04:00Z","updated_at":"2023-08-09T02:04:00Z","author_association":"CONTRIBUTOR","body":"> My big thoughts on this is we should probably frame it as a full Spec Version update targeting version 3. Left some comments on the doc.\r\n\r\nYeah, I do think we should frame it in the new version. Let me update doc accordingly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670547303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670601466","html_url":"https://github.com/apache/iceberg/pull/8227#issuecomment-1670601466","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8227","id":1670601466,"node_id":"IC_kwDOCW7NX85jk1r6","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T03:33:09Z","updated_at":"2023-08-09T03:33:21Z","author_association":"CONTRIBUTOR","body":"> However, some catalogs such as Glue Data Catalog only accept lowercase as its table name, and this renaming operation in the migrate procedure would be a blocker for running the migrate.\r\n\r\nI think @jackye1995 @amogh-jahagirdar @singhpk234 have more knowledge about this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670601466/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670628073","html_url":"https://github.com/apache/iceberg/issues/8254#issuecomment-1670628073","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8254","id":1670628073,"node_id":"IC_kwDOCW7NX85jk8Lp","user":{"login":"officialtushark","id":74366732,"node_id":"MDQ6VXNlcjc0MzY2NzMy","avatar_url":"https://avatars.githubusercontent.com/u/74366732?v=4","gravatar_id":"","url":"https://api.github.com/users/officialtushark","html_url":"https://github.com/officialtushark","followers_url":"https://api.github.com/users/officialtushark/followers","following_url":"https://api.github.com/users/officialtushark/following{/other_user}","gists_url":"https://api.github.com/users/officialtushark/gists{/gist_id}","starred_url":"https://api.github.com/users/officialtushark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/officialtushark/subscriptions","organizations_url":"https://api.github.com/users/officialtushark/orgs","repos_url":"https://api.github.com/users/officialtushark/repos","events_url":"https://api.github.com/users/officialtushark/events{/privacy}","received_events_url":"https://api.github.com/users/officialtushark/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T04:19:25Z","updated_at":"2023-08-09T04:19:25Z","author_association":"NONE","body":"Thanks Russell. Sure, Let me raise this on the dev list. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670628073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670631552","html_url":"https://github.com/apache/iceberg/issues/8255#issuecomment-1670631552","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8255","id":1670631552,"node_id":"IC_kwDOCW7NX85jk9CA","user":{"login":"lirui-apache","id":5210788,"node_id":"MDQ6VXNlcjUyMTA3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/5210788?v=4","gravatar_id":"","url":"https://api.github.com/users/lirui-apache","html_url":"https://github.com/lirui-apache","followers_url":"https://api.github.com/users/lirui-apache/followers","following_url":"https://api.github.com/users/lirui-apache/following{/other_user}","gists_url":"https://api.github.com/users/lirui-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/lirui-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lirui-apache/subscriptions","organizations_url":"https://api.github.com/users/lirui-apache/orgs","repos_url":"https://api.github.com/users/lirui-apache/repos","events_url":"https://api.github.com/users/lirui-apache/events{/privacy}","received_events_url":"https://api.github.com/users/lirui-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T04:25:38Z","updated_at":"2023-08-09T04:25:38Z","author_association":"CONTRIBUTOR","body":"Hey @zhongyujiang @RussellSpitzer , thanks for the comments and pointers. I agree adding a deleted file back should not be encouraged. But the problem is we're unable to detect and block such usage. And leaving that burden to users seems unfriendly or even infeasible.\r\nI also believe the spark algorithm does the right thing. So I guess we'll just always use the spark action to clean up expired files.\r\nThanks again, I'm closing the issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670631552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670671450","html_url":"https://github.com/apache/iceberg/issues/8212#issuecomment-1670671450","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8212","id":1670671450,"node_id":"IC_kwDOCW7NX85jlGxa","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T05:06:30Z","updated_at":"2023-08-09T05:06:30Z","author_association":"COLLABORATOR","body":"It can be removed with https://iceberg.apache.org/docs/latest/spark-procedures/#expire_snapshots","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670671450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670822046","html_url":"https://github.com/apache/iceberg/issues/8130#issuecomment-1670822046","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8130","id":1670822046,"node_id":"IC_kwDOCW7NX85jlrie","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T07:34:20Z","updated_at":"2023-08-09T07:34:20Z","author_association":"COLLABORATOR","body":"do you know which step is taking up most time?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670822046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670825177","html_url":"https://github.com/apache/iceberg/issues/8124#issuecomment-1670825177","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8124","id":1670825177,"node_id":"IC_kwDOCW7NX85jlsTZ","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T07:36:48Z","updated_at":"2023-08-09T07:36:48Z","author_association":"COLLABORATOR","body":"Iceberg uses dsv2  and you need to set `spark.sql.storeAssignmentPolicy=ansi`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670825177/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670836177","html_url":"https://github.com/apache/iceberg/pull/8163#issuecomment-1670836177","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8163","id":1670836177,"node_id":"IC_kwDOCW7NX85jlu_R","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T07:45:40Z","updated_at":"2023-08-09T07:45:40Z","author_association":"COLLABORATOR","body":"@aokolnychyi comments addressed and I've also updated the docs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670836177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670899322","html_url":"https://github.com/apache/iceberg/issues/8248#issuecomment-1670899322","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8248","id":1670899322,"node_id":"IC_kwDOCW7NX85jl-Z6","user":{"login":"HonahX","id":140284484,"node_id":"U_kgDOCFySRA","avatar_url":"https://avatars.githubusercontent.com/u/140284484?v=4","gravatar_id":"","url":"https://api.github.com/users/HonahX","html_url":"https://github.com/HonahX","followers_url":"https://api.github.com/users/HonahX/followers","following_url":"https://api.github.com/users/HonahX/following{/other_user}","gists_url":"https://api.github.com/users/HonahX/gists{/gist_id}","starred_url":"https://api.github.com/users/HonahX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonahX/subscriptions","organizations_url":"https://api.github.com/users/HonahX/orgs","repos_url":"https://api.github.com/users/HonahX/repos","events_url":"https://api.github.com/users/HonahX/events{/privacy}","received_events_url":"https://api.github.com/users/HonahX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T08:31:30Z","updated_at":"2023-08-09T08:31:46Z","author_association":"CONTRIBUTOR","body":"More context:\r\n\r\nif we apply a row filter on UUID col, \r\n```python\r\nunpartitioned_uuid = catalog.load_table(\"default.test_uuid_and_fixed_unpartitioned\")\r\narrow_table_eq = unpartitioned_uuid.scan(row_filter=\"uuid_col == '102cb62f-e6f8-4eb0-9973-d9b012ff0967'\").to_arrow()\r\n```\r\nit fails with\r\n```\r\npyarrow.lib.ArrowInvalid: Could not convert UUID('102cb62f-e6f8-4eb0-9973-d9b012ff0967') with type UUID: did not recognize Python value type when inferring an Arrow data type\r\n```\r\nraised here:\r\nhttps://github.com/apache/iceberg/blob/f5f543a54ff7460648bb864f4f06a29eb28938b9/python/pyiceberg/io/pyarrow.py#L451-L454\r\nhttps://github.com/apache/iceberg/blob/f5f543a54ff7460648bb864f4f06a29eb28938b9/python/pyiceberg/io/pyarrow.py#L480-L481\r\nbecause UUID is a `fixed_binary[16]` in pyarrow but the UUID literal stores UUID in its value","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670899322/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670905898","html_url":"https://github.com/apache/iceberg/issues/8248#issuecomment-1670905898","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8248","id":1670905898,"node_id":"IC_kwDOCW7NX85jmAAq","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T08:36:07Z","updated_at":"2023-08-09T08:36:07Z","author_association":"CONTRIBUTOR","body":"@HonahX We need to store the `bytes` instead of the `UUID`, are you interested in fixing this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670905898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670925612","html_url":"https://github.com/apache/iceberg/issues/8248#issuecomment-1670925612","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8248","id":1670925612,"node_id":"IC_kwDOCW7NX85jmE0s","user":{"login":"HonahX","id":140284484,"node_id":"U_kgDOCFySRA","avatar_url":"https://avatars.githubusercontent.com/u/140284484?v=4","gravatar_id":"","url":"https://api.github.com/users/HonahX","html_url":"https://github.com/HonahX","followers_url":"https://api.github.com/users/HonahX/followers","following_url":"https://api.github.com/users/HonahX/following{/other_user}","gists_url":"https://api.github.com/users/HonahX/gists{/gist_id}","starred_url":"https://api.github.com/users/HonahX/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HonahX/subscriptions","organizations_url":"https://api.github.com/users/HonahX/orgs","repos_url":"https://api.github.com/users/HonahX/repos","events_url":"https://api.github.com/users/HonahX/events{/privacy}","received_events_url":"https://api.github.com/users/HonahX/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T08:49:09Z","updated_at":"2023-08-09T08:49:09Z","author_association":"CONTRIBUTOR","body":"@Fokko Yes! I just uploaded a draft PR https://github.com/apache/iceberg/pull/8267 for further discussion. This PR verifies that changing the literal value can solve the issue. I will try to see if I can add more tests to it.\r\n\r\nSince pyiceberg use the released spark-iceberg-runtime to create the test env, we may not be able to add tables partitioned by uuid until the next release.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1670925612/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671071420","html_url":"https://github.com/apache/iceberg/pull/8224#issuecomment-1671071420","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8224","id":1671071420,"node_id":"IC_kwDOCW7NX85jmoa8","user":{"login":"manuzhang","id":1191767,"node_id":"MDQ6VXNlcjExOTE3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/1191767?v=4","gravatar_id":"","url":"https://api.github.com/users/manuzhang","html_url":"https://github.com/manuzhang","followers_url":"https://api.github.com/users/manuzhang/followers","following_url":"https://api.github.com/users/manuzhang/following{/other_user}","gists_url":"https://api.github.com/users/manuzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/manuzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manuzhang/subscriptions","organizations_url":"https://api.github.com/users/manuzhang/orgs","repos_url":"https://api.github.com/users/manuzhang/repos","events_url":"https://api.github.com/users/manuzhang/events{/privacy}","received_events_url":"https://api.github.com/users/manuzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T10:30:12Z","updated_at":"2023-08-09T10:30:12Z","author_association":"COLLABORATOR","body":"@nastra  please help review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671071420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671071984","html_url":"https://github.com/apache/iceberg/issues/8183#issuecomment-1671071984","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8183","id":1671071984,"node_id":"IC_kwDOCW7NX85jmojw","user":{"login":"netanelm-upstream","id":112799795,"node_id":"U_kgDOBrkwMw","avatar_url":"https://avatars.githubusercontent.com/u/112799795?v=4","gravatar_id":"","url":"https://api.github.com/users/netanelm-upstream","html_url":"https://github.com/netanelm-upstream","followers_url":"https://api.github.com/users/netanelm-upstream/followers","following_url":"https://api.github.com/users/netanelm-upstream/following{/other_user}","gists_url":"https://api.github.com/users/netanelm-upstream/gists{/gist_id}","starred_url":"https://api.github.com/users/netanelm-upstream/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/netanelm-upstream/subscriptions","organizations_url":"https://api.github.com/users/netanelm-upstream/orgs","repos_url":"https://api.github.com/users/netanelm-upstream/repos","events_url":"https://api.github.com/users/netanelm-upstream/events{/privacy}","received_events_url":"https://api.github.com/users/netanelm-upstream/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T10:30:39Z","updated_at":"2023-08-09T10:30:39Z","author_association":"NONE","body":"@alaturqua Hi, Can you please also add the rewriteManifests operation?\r\nIt can be very useful.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671071984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671100009","html_url":"https://github.com/apache/iceberg/issues/8183#issuecomment-1671100009","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8183","id":1671100009,"node_id":"IC_kwDOCW7NX85jmvZp","user":{"login":"alaturqua","id":17232317,"node_id":"MDQ6VXNlcjE3MjMyMzE3","avatar_url":"https://avatars.githubusercontent.com/u/17232317?v=4","gravatar_id":"","url":"https://api.github.com/users/alaturqua","html_url":"https://github.com/alaturqua","followers_url":"https://api.github.com/users/alaturqua/followers","following_url":"https://api.github.com/users/alaturqua/following{/other_user}","gists_url":"https://api.github.com/users/alaturqua/gists{/gist_id}","starred_url":"https://api.github.com/users/alaturqua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alaturqua/subscriptions","organizations_url":"https://api.github.com/users/alaturqua/orgs","repos_url":"https://api.github.com/users/alaturqua/repos","events_url":"https://api.github.com/users/alaturqua/events{/privacy}","received_events_url":"https://api.github.com/users/alaturqua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T10:51:51Z","updated_at":"2023-08-09T10:54:10Z","author_association":"CONTRIBUTOR","body":"Hi @netanelm-upstream,\r\n\r\nI created the feature request but unfortunately I do not have time to work on these in the near future.\r\n\r\nI was hoping @Fokko would take these into his backlog.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671100009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671121386","html_url":"https://github.com/apache/iceberg/issues/8183#issuecomment-1671121386","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8183","id":1671121386,"node_id":"IC_kwDOCW7NX85jm0nq","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T11:06:32Z","updated_at":"2023-08-09T11:06:32Z","author_association":"CONTRIBUTOR","body":"Thanks everyone for jumping in here.\r\n\r\n- **Expire snapshots, and optimize table** These require write support, which we are working on! This will also include rewriteManifest operations.\r\n- **Remove orphan files** Is something that could be done today. This would require listing all the files from the table, and also listing all the files from a specific directory. We could do this in the CLI where you get a prompt of the files that need to be deleted.\r\n- **Analyze tables** We currently have listing capabilities in the CLI, maybe it would be cool to also include the min/max/nulls in there.\r\n\r\n> I was hoping @Fokko would take these into his backlog.\r\n\r\nYes, I'm happy to, but we first need to get write support in :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671121386/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671157935","html_url":"https://github.com/apache/iceberg/pull/8227#issuecomment-1671157935","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8227","id":1671157935,"node_id":"IC_kwDOCW7NX85jm9iv","user":{"login":"tomtongue","id":43331405,"node_id":"MDQ6VXNlcjQzMzMxNDA1","avatar_url":"https://avatars.githubusercontent.com/u/43331405?v=4","gravatar_id":"","url":"https://api.github.com/users/tomtongue","html_url":"https://github.com/tomtongue","followers_url":"https://api.github.com/users/tomtongue/followers","following_url":"https://api.github.com/users/tomtongue/following{/other_user}","gists_url":"https://api.github.com/users/tomtongue/gists{/gist_id}","starred_url":"https://api.github.com/users/tomtongue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomtongue/subscriptions","organizations_url":"https://api.github.com/users/tomtongue/orgs","repos_url":"https://api.github.com/users/tomtongue/repos","events_url":"https://api.github.com/users/tomtongue/events{/privacy}","received_events_url":"https://api.github.com/users/tomtongue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T11:33:33Z","updated_at":"2023-08-09T11:33:33Z","author_association":"CONTRIBUTOR","body":"> > However, some catalogs such as Glue Data Catalog only accept lowercase as its table name, and this renaming operation in the migrate procedure would be a blocker for running the migrate.\r\n> \r\n> I think @jackye1995 @amogh-jahagirdar @singhpk234 have more knowledge about this.\r\n\r\nLet me add my thoughts. \r\nAs described above, the current migrate keeps the source Spark table as a backup table with `<src_table>_BACKUP_`. This would causes the Iceberg validation exception if Glue Data Catalog impl in Iceberg handles such as table.\r\nAnd, the backup table can be kept without dropping the table. This would be possible to occur the table name conflication. \r\n\r\nThe ability to specify the backup table name should be necessary to expand the capability and avoid the name confliction. Therefore I submitted this PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671157935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671170760","html_url":"https://github.com/apache/iceberg/issues/8273#issuecomment-1671170760","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8273","id":1671170760,"node_id":"IC_kwDOCW7NX85jnArI","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T11:42:55Z","updated_at":"2023-08-09T11:42:55Z","author_association":"CONTRIBUTOR","body":"Related: https://github.com/apache/iceberg/pull/7831/files#r1285259053","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671170760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671318932","html_url":"https://github.com/apache/iceberg/issues/8269#issuecomment-1671318932","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8269","id":1671318932,"node_id":"IC_kwDOCW7NX85jnk2U","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T13:22:27Z","updated_at":"2023-08-09T13:23:28Z","author_association":"MEMBER","body":"Why would an unpartitioned writer write to a partitioned table? It should be writing to an unpartitioned spec.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671318932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671373054","html_url":"https://github.com/apache/iceberg/issues/8269#issuecomment-1671373054","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8269","id":1671373054,"node_id":"IC_kwDOCW7NX85jnyD-","user":{"login":"kamijin-fanta","id":1541187,"node_id":"MDQ6VXNlcjE1NDExODc=","avatar_url":"https://avatars.githubusercontent.com/u/1541187?v=4","gravatar_id":"","url":"https://api.github.com/users/kamijin-fanta","html_url":"https://github.com/kamijin-fanta","followers_url":"https://api.github.com/users/kamijin-fanta/followers","following_url":"https://api.github.com/users/kamijin-fanta/following{/other_user}","gists_url":"https://api.github.com/users/kamijin-fanta/gists{/gist_id}","starred_url":"https://api.github.com/users/kamijin-fanta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamijin-fanta/subscriptions","organizations_url":"https://api.github.com/users/kamijin-fanta/orgs","repos_url":"https://api.github.com/users/kamijin-fanta/repos","events_url":"https://api.github.com/users/kamijin-fanta/events{/privacy}","received_events_url":"https://api.github.com/users/kamijin-fanta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T13:54:55Z","updated_at":"2023-08-09T13:54:55Z","author_association":"NONE","body":"@RussellSpitzer I am trying to reduce the number of open files and lower memory usage and latency on writes. The impact on query performance is negligible with periodic optimization. Is it supported to use UnpartitionedWriter for partitioned tables?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671373054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671376847","html_url":"https://github.com/apache/iceberg/issues/8269#issuecomment-1671376847","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8269","id":1671376847,"node_id":"IC_kwDOCW7NX85jny_P","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T13:56:57Z","updated_at":"2023-08-09T14:12:21Z","author_association":"MEMBER","body":"https://github.com/apache/iceberg/blob/fa1bf12ec94d71bd9e16241b8466c70a628e22a1/flink/v1.17/flink/src/main/java/org/apache/iceberg/flink/sink/RowDataTaskWriterFactory.java#L122-L125\r\n\r\nThat's fine you just need to use an unpartitioned spec when writing with the unpartitioned writer.\r\n\r\nTo make this a little clearer, an Iceberg table can have multiple specs at the same time. This is basically what you are going for. You want some files to be written with an \"unpartitioned\" spec and the optimizations to occur with a \"partitioned spec\".\r\n\r\nSo what you want to do for this table is first take note of the specId of your partitioned spec. You can read this out of table.specs() which is a map. This is the specId you want to use for optimizing. I'm not sure if trino supports optimizing to a particular spec id yet, but if they don't that's not a problem. \r\n\r\nNext create an unpartitioned spec. You can do this by altering the table and removing all partitioning columns. This should give you another spec in `table.specs()`. Take note of this number as well. If you like you can set the current spec back to the first partitioned specId by adding the partition fields back.\r\n\r\nNow we should have\r\n\r\nunpartitionedSpecID\r\nand \r\npartitioneSpecID\r\n\r\nWhatever is `current-spec-id` will be used by default by write operations and optimizes and any other operation on the table. There are two options to use this information:\r\n\r\n1. Current Spec Id => Partitioned. Whenever you write using the java api and unpartitioned writer use unpartitionedSpecID to get the unpartitioned spec associated with this table. Optimize without any options which will use the default partitioned spec.\r\n\r\n2. Current Spec Id = Unpartitioned. Whenever you optimize use the partitioned spec Id as an option so that rewritten data always becomes partitioned.  Write new data using the current spec `table.spec()`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671376847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671405177","html_url":"https://github.com/apache/iceberg/issues/8269#issuecomment-1671405177","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8269","id":1671405177,"node_id":"IC_kwDOCW7NX85jn555","user":{"login":"kamijin-fanta","id":1541187,"node_id":"MDQ6VXNlcjE1NDExODc=","avatar_url":"https://avatars.githubusercontent.com/u/1541187?v=4","gravatar_id":"","url":"https://api.github.com/users/kamijin-fanta","html_url":"https://github.com/kamijin-fanta","followers_url":"https://api.github.com/users/kamijin-fanta/followers","following_url":"https://api.github.com/users/kamijin-fanta/following{/other_user}","gists_url":"https://api.github.com/users/kamijin-fanta/gists{/gist_id}","starred_url":"https://api.github.com/users/kamijin-fanta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamijin-fanta/subscriptions","organizations_url":"https://api.github.com/users/kamijin-fanta/orgs","repos_url":"https://api.github.com/users/kamijin-fanta/repos","events_url":"https://api.github.com/users/kamijin-fanta/events{/privacy}","received_events_url":"https://api.github.com/users/kamijin-fanta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T14:09:18Z","updated_at":"2023-08-09T14:09:18Z","author_association":"NONE","body":"Isn't this a bug? If it is normal spec behavior, this Issue will be closed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671405177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671414514","html_url":"https://github.com/apache/iceberg/issues/8269#issuecomment-1671414514","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8269","id":1671414514,"node_id":"IC_kwDOCW7NX85jn8Ly","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T14:14:36Z","updated_at":"2023-08-09T14:17:15Z","author_association":"MEMBER","body":"Added more details above on how to write both unpartitioned and partitioned data to the same table. I would say the bug could be that we should throw an error if you use unpartitioned writer with a partitioned spec. I believe previously this was allowed because V1 Iceberg tables don't ever remove spec fields, they just get changed to void transforms and for a while our code had some very specific wonky logic around that sometimes. You basically could have unpartitioned spec `<>` and  unpartitioned spec `<Void>` and unpartitioned spec `<Void, Void>` and so on. I think this may be an artifact of that. Now we have a safe \"isUnpartitioned\" function so we could just put that as a perquisite in the Unpartitioned writer.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671414514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671481858","html_url":"https://github.com/apache/iceberg/issues/8130#issuecomment-1671481858","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8130","id":1671481858,"node_id":"IC_kwDOCW7NX85joMoC","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T14:27:31Z","updated_at":"2023-08-09T14:27:31Z","author_association":"MEMBER","body":"If it is the planning phase there isn't much to do since most of the cost is in reading the manifests. With 4000 files there are most likely many many manifests. You can try increasing the size of the manifest reading thread pool to increase parallelism there but it's best to just optimize manfiests more regularly and take the cost for one long optimize to start with. I would also highly recommend running optimize data files more frequently as well if you have 4000 files that only take up 5 gb.\r\n\r\nIf it's in the delete phase you just need to enable bulk deletes, this is default in newer versions of Iceberg. In older versions of Iceberg there was an explicit delete parallelism parameter for expire snapshots and delete orphan files. If you are on an older version set these parameters to a high number like 50 or 100. If delete are taking a long time it's probably latency of getting the delete response which is taking so long. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671481858/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671506925","html_url":"https://github.com/apache/iceberg/issues/8275#issuecomment-1671506925","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8275","id":1671506925,"node_id":"IC_kwDOCW7NX85joSvt","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T14:33:40Z","updated_at":"2023-08-09T14:33:40Z","author_association":"MEMBER","body":"What would truncate of a double look like? Feels like that would be tricky to keep stable? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671506925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671560708","html_url":"https://github.com/apache/iceberg/issues/8274#issuecomment-1671560708","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8274","id":1671560708,"node_id":"IC_kwDOCW7NX85jof4E","user":{"login":"singhpk234","id":35593236,"node_id":"MDQ6VXNlcjM1NTkzMjM2","avatar_url":"https://avatars.githubusercontent.com/u/35593236?v=4","gravatar_id":"","url":"https://api.github.com/users/singhpk234","html_url":"https://github.com/singhpk234","followers_url":"https://api.github.com/users/singhpk234/followers","following_url":"https://api.github.com/users/singhpk234/following{/other_user}","gists_url":"https://api.github.com/users/singhpk234/gists{/gist_id}","starred_url":"https://api.github.com/users/singhpk234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/singhpk234/subscriptions","organizations_url":"https://api.github.com/users/singhpk234/orgs","repos_url":"https://api.github.com/users/singhpk234/repos","events_url":"https://api.github.com/users/singhpk234/events{/privacy}","received_events_url":"https://api.github.com/users/singhpk234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T14:52:43Z","updated_at":"2023-08-09T14:52:43Z","author_association":"CONTRIBUTOR","body":"cc @rdblue @jackye1995 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671560708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671588362","html_url":"https://github.com/apache/iceberg/issues/8175#issuecomment-1671588362","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8175","id":1671588362,"node_id":"IC_kwDOCW7NX85jomoK","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T15:05:10Z","updated_at":"2023-08-09T15:05:28Z","author_association":"CONTRIBUTOR","body":"I mean what's the problem are you met. I could create a table on a struct field:\r\n```scala\r\nscala> spark.sql(\"create table local.db.test_partition_struct(id long, data struct<id: long, ts: timestamp>) using iceberg partitioned by (years(data.ts))\").show()\r\n\r\nscala> spark.sql(\"insert into local.db.test_partition_struct values(1, struct(2, timestamp('2023-01-01')))\").show()\r\n\r\nscala> spark.sql(\"select * from local.db.test_partition_struct\").show()\r\n+---+--------------------+\r\n| id|                data|\r\n+---+--------------------+\r\n|  1|{2, 2023-01-01 00...|\r\n+---+--------------------+\r\n\r\nscala> spark.sql(\"desc table local.db.test_partition_struct\").show()\r\n+--------------+--------------------+-------+\r\n|      col_name|           data_type|comment|\r\n+--------------+--------------------+-------+\r\n|            id|              bigint|   null|\r\n|          data|struct<id:bigint,...|   null|\r\n|              |                    |       |\r\n|# Partitioning|                    |       |\r\n|        Part 0|      years(data.ts)|       |\r\n+--------------+--------------------+-------+\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671588362/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671588571","html_url":"https://github.com/apache/iceberg/pull/8173#issuecomment-1671588571","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8173","id":1671588571,"node_id":"IC_kwDOCW7NX85jomrb","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T15:05:18Z","updated_at":"2023-08-09T15:05:18Z","author_association":"CONTRIBUTOR","body":"I think this is cleaner than adding more workarounds for issues related to incomplete metadata, so I'm +1, but @rdblue raised concerns about whether this increases complexity.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671588571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671627842","html_url":"https://github.com/apache/iceberg/pull/8065#issuecomment-1671627842","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8065","id":1671627842,"node_id":"IC_kwDOCW7NX85jowRC","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T15:28:14Z","updated_at":"2023-08-09T15:28:14Z","author_association":"MEMBER","body":"How do I use this and generate the boms?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671627842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671631966","html_url":"https://github.com/apache/iceberg/pull/8065#issuecomment-1671631966","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8065","id":1671631966,"node_id":"IC_kwDOCW7NX85joxRe","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T15:30:36Z","updated_at":"2023-08-09T15:31:03Z","author_association":"CONTRIBUTOR","body":"Overall, I'm not opposed to adding a bom, but I'm not sure if this will be more helpful or confusing.  Many projects that depend on iceberg (Flink/Spark/etc.) do not publish a bom and Iceberg will frequently be dropped in.  If you build fat job jars, they may pull in transitive dependencies that conflict with the existing libraries.  We try to match the upstream dependencies, so maybe it will generally be ok.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671631966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671783783","html_url":"https://github.com/apache/iceberg/pull/8122#issuecomment-1671783783","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8122","id":1671783783,"node_id":"IC_kwDOCW7NX85jpWVn","user":{"login":"zeroshade","id":555095,"node_id":"MDQ6VXNlcjU1NTA5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/555095?v=4","gravatar_id":"","url":"https://api.github.com/users/zeroshade","html_url":"https://github.com/zeroshade","followers_url":"https://api.github.com/users/zeroshade/followers","following_url":"https://api.github.com/users/zeroshade/following{/other_user}","gists_url":"https://api.github.com/users/zeroshade/gists{/gist_id}","starred_url":"https://api.github.com/users/zeroshade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeroshade/subscriptions","organizations_url":"https://api.github.com/users/zeroshade/orgs","repos_url":"https://api.github.com/users/zeroshade/repos","events_url":"https://api.github.com/users/zeroshade/events{/privacy}","received_events_url":"https://api.github.com/users/zeroshade/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T16:46:01Z","updated_at":"2023-08-09T16:46:01Z","author_association":"MEMBER","body":"@nastra just to confirm, is increasing the tests in `types_test.go` the only remaining thing here? or am i overlooking a comment somewhere?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671783783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671792630","html_url":"https://github.com/apache/iceberg/pull/8122#issuecomment-1671792630","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8122","id":1671792630,"node_id":"IC_kwDOCW7NX85jpYf2","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T16:50:30Z","updated_at":"2023-08-09T16:50:30Z","author_association":"CONTRIBUTOR","body":"> @nastra just to confirm, is increasing the tests in `types_test.go` the only remaining thing here? or am i overlooking a comment somewhere?\r\n\r\nI believe so, but I'd have to re-review the PR tomorrow. Sorry, for the review delay here.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671792630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671940533","html_url":"https://github.com/apache/iceberg/issues/2586#issuecomment-1671940533","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2586","id":1671940533,"node_id":"IC_kwDOCW7NX85jp8m1","user":{"login":"jornfranke","id":1659364,"node_id":"MDQ6VXNlcjE2NTkzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1659364?v=4","gravatar_id":"","url":"https://api.github.com/users/jornfranke","html_url":"https://github.com/jornfranke","followers_url":"https://api.github.com/users/jornfranke/followers","following_url":"https://api.github.com/users/jornfranke/following{/other_user}","gists_url":"https://api.github.com/users/jornfranke/gists{/gist_id}","starred_url":"https://api.github.com/users/jornfranke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jornfranke/subscriptions","organizations_url":"https://api.github.com/users/jornfranke/orgs","repos_url":"https://api.github.com/users/jornfranke/repos","events_url":"https://api.github.com/users/jornfranke/events{/privacy}","received_events_url":"https://api.github.com/users/jornfranke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T18:35:34Z","updated_at":"2023-08-09T18:35:34Z","author_association":"NONE","body":"I think it would be good to have Geospatial support in Apache Iceberg, although it is certainly a more complex feature.\r\nWhile the spatialx-project seems to have done a lot of useful implementation, it is a bit difficult to use as the changes made to the Iceberg are unclear and I could also not find some documentation on how geometry is added to Iceberg.\r\n\r\nI propose that this documentation is started so this issue can move on. @badbye does it make sense to you that you or me create a Google Docs (or Cryptpad, https://cryptpad.fr/) document that is viewable by everybody (similarly to how other specs are done in Iceberg?)? Happy to also help with the writing structuring.\r\n\r\nOne could initially have it as follows:\r\n\r\nWhat benefit does one have to use Apache Iceberg with Geospatial data instead of using, for instance, simply [geoparquet](https://geoparquet.org/)? I would think about:\r\n* Support writing of individual rows (this can be useful in streaming scenarios, e.g. Internet of Thing devices communicating their position).\r\n* Natively already query the geospatial data without manual/error-prone conversion (e.g. using right CRS when loading etc.) and by having a much higher performance\r\n... maybe you have some other motivations why you started geolake?\r\n\r\nOne can also think about other features (would not add them in the first spec due to complexity):\r\n* Partition of data according to spatial (location) criteria (see also: https://github.com/opengeospatial/geoparquet/issues/13#issuecomment-1057437189), which seems to be supported by Geolake (I wonder can we instead/additionally use the z-ordering feature of Iceberg to reuse the Iceberg functionality?)\r\n* Loading/Storing rasters (at the moment all proposals, including geoparquet, include only vector data), more complex, the raster should be split in equal small tiles et.\r\n\r\n\r\nI suggest that a public Google Doc is started and that one can add what it would mean for Iceberg to support Geospatial support, e.g.:\r\n* Augmentation of the Iceberg Spec (https://iceberg.apache.org/spec/)\r\n   * Update Data type to include Geometry (https://iceberg.apache.org/spec/#schemas-and-data-types), probably it should be internally based on geoarrow (https://github.com/geoarrow/geoarrow/) - or maybe you have some idea based on your Geolake implementation?\r\n   * Requirements for storage formats (Suggest to focus in the initial release only on parquet as it the only one which has geoparquet defined, but in future releases one could also include avro, orc using a similar specification as geoparquet)\r\n   * ...\r\n* Interdependencies to tools \r\n  * Apache Sedona - how can we make sure that the Geometry column is compatible (should we reuse the Sedona Geometry class? Or should we provide as a pull request to Sedona a Spark function that does the conversion?). It seems you provide a solution here: https://github.com/spatialx-project/sedona-iceberg-extension\r\n  * Geopandas - how can we integrate Geopandas (https://geopandas.org/en/stable/) with PyIceberg (https://py.iceberg.apache.org/)\r\n  * ... (e.g. QGIS support - this could be solved if the Geopandas support is solved)\r\n* Planning of a roadmap of features (as said before, I suggest to have more complex things later)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1671940533/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1672048767","html_url":"https://github.com/apache/iceberg/pull/8272#issuecomment-1672048767","issue_url":"https://api.github.com/repos/apache/iceberg/issues/8272","id":1672048767,"node_id":"IC_kwDOCW7NX85jqXB_","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T19:47:40Z","updated_at":"2023-08-09T19:47:40Z","author_association":"COLLABORATOR","body":"Also, can we make it support SupportsPrefixOperations.  Thinking it a possible option for: #8194 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1672048767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1672116633","html_url":"https://github.com/apache/iceberg/issues/7847#issuecomment-1672116633","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7847","id":1672116633,"node_id":"IC_kwDOCW7NX85jqnmZ","user":{"login":"vinitamaloo-asu","id":97632954,"node_id":"U_kgDOBdHCug","avatar_url":"https://avatars.githubusercontent.com/u/97632954?v=4","gravatar_id":"","url":"https://api.github.com/users/vinitamaloo-asu","html_url":"https://github.com/vinitamaloo-asu","followers_url":"https://api.github.com/users/vinitamaloo-asu/followers","following_url":"https://api.github.com/users/vinitamaloo-asu/following{/other_user}","gists_url":"https://api.github.com/users/vinitamaloo-asu/gists{/gist_id}","starred_url":"https://api.github.com/users/vinitamaloo-asu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinitamaloo-asu/subscriptions","organizations_url":"https://api.github.com/users/vinitamaloo-asu/orgs","repos_url":"https://api.github.com/users/vinitamaloo-asu/repos","events_url":"https://api.github.com/users/vinitamaloo-asu/events{/privacy}","received_events_url":"https://api.github.com/users/vinitamaloo-asu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T20:39:54Z","updated_at":"2023-08-09T20:39:54Z","author_association":"NONE","body":"Following","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1672116633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1672186881","html_url":"https://github.com/apache/iceberg/issues/7832#issuecomment-1672186881","issue_url":"https://api.github.com/repos/apache/iceberg/issues/7832","id":1672186881,"node_id":"IC_kwDOCW7NX85jq4wB","user":{"login":"dev-goyal","id":126589393,"node_id":"U_kgDOB4uZ0Q","avatar_url":"https://avatars.githubusercontent.com/u/126589393?v=4","gravatar_id":"","url":"https://api.github.com/users/dev-goyal","html_url":"https://github.com/dev-goyal","followers_url":"https://api.github.com/users/dev-goyal/followers","following_url":"https://api.github.com/users/dev-goyal/following{/other_user}","gists_url":"https://api.github.com/users/dev-goyal/gists{/gist_id}","starred_url":"https://api.github.com/users/dev-goyal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dev-goyal/subscriptions","organizations_url":"https://api.github.com/users/dev-goyal/orgs","repos_url":"https://api.github.com/users/dev-goyal/repos","events_url":"https://api.github.com/users/dev-goyal/events{/privacy}","received_events_url":"https://api.github.com/users/dev-goyal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T21:37:45Z","updated_at":"2023-08-09T21:39:37Z","author_association":"NONE","body":"Facing the same issue here; `merge into` using iceberg does not appear to be taking advantage of the bucketing.\r\n\r\nBucketing SQL:\r\n\r\n```\r\nspark.sql(\r\n            f\"MERGE INTO ml_recommendations.ratings target \"\r\n            f\"USING (SELECT * FROM {temp_view}) source \"\r\n            f\"    ON target.{bucket_col} = source.{bucket_col} \"\r\n            f\"WHEN MATCHED AND target.{v.RATING_STATE} IS NOT NULL THEN UPDATE SET * \"\r\n            f\"WHEN NOT MATCHED THEN INSERT *\",\r\n        ).show()\r\n```\r\n\r\n\r\nConfig:\r\n\r\n```\r\n        \"spark.sql.session.timeZone=UTC\",\r\n        # Enable bucketing on the cluster\r\n        \"spark.sql.sources.bucketing.enabled=true\",\r\n        \"spark.sql.sources.v2.bucketing.enabled=true\",\r\n        \"spark.sql.iceberg.planning.preserve-data-grouping=true\",\r\n        \"spark.sql.sources.v2.bucketing.pushPartValues.enabled=true\",\r\n        \"spark.sql.requireAllClusterKeysForCoPartition=false\",\r\n        \"spark.sql.sources.v2.bucketing.partiallyClusteredDistribution.enabled=true\",\r\n\r\n        # Enable Iceberg format on the cluster\r\n        \"spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions\",\r\n        \"spark.sql.catalog.iceberg=org.apache.iceberg.spark.SparkCatalog\",\r\n        \"spark.sql.catalog.iceberg.catalog-impl=org.apache.iceberg.aws.glue.GlueCatalog\",\r\n        \"spark.sql.catalog.iceberg.io-impl=org.apache.iceberg.aws.s3.S3FileIO\",\r\n        \"spark.sql.defaultCatalog=iceberg\",\r\n```\r\n\r\nNotice the two exchanges below: \r\n\r\n<img width=\"557\" alt=\"Screenshot 2023-08-09 at 2 35 04 PM\" src=\"https://github.com/apache/iceberg/assets/126589393/5e928e89-00ba-45b4-ac90-ee795160a691\">\r\n\r\n<img width=\"793\" alt=\"Screenshot 2023-08-09 at 2 37 18 PM\" src=\"https://github.com/apache/iceberg/assets/126589393/2eb3c899-028b-4b60-9bf6-7877779c1f7c\">\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1672186881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]