[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018395342","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-1018395342","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":1018395342,"node_id":"IC_kwDOACaFSM48s3rO","user":{"login":"phrocker","id":1781585,"node_id":"MDQ6VXNlcjE3ODE1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/1781585?v=4","gravatar_id":"","url":"https://api.github.com/users/phrocker","html_url":"https://github.com/phrocker","followers_url":"https://api.github.com/users/phrocker/followers","following_url":"https://api.github.com/users/phrocker/following{/other_user}","gists_url":"https://api.github.com/users/phrocker/gists{/gist_id}","starred_url":"https://api.github.com/users/phrocker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phrocker/subscriptions","organizations_url":"https://api.github.com/users/phrocker/orgs","repos_url":"https://api.github.com/users/phrocker/repos","events_url":"https://api.github.com/users/phrocker/events{/privacy}","received_events_url":"https://api.github.com/users/phrocker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T10:50:07Z","updated_at":"2022-01-21T10:50:07Z","author_association":"CONTRIBUTOR","body":"> @phrocker any idea what version of hadoop this was originally developed for? I am trying to figure out if `CodecPool` changed and if this is still a problem. https://hadoop.apache.org/docs/r2.4.1/api/org/apache/hadoop/io/compress/CodecPool.html\r\n\r\nLast time I confirmed the issue was in late 2016 ( the first time I forgot about the PR ) --  I want to say it was 2.7.3, but I cannot be 100% certain. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018395342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018467248","html_url":"https://github.com/apache/accumulo/pull/2415#issuecomment-1018467248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2415","id":1018467248,"node_id":"IC_kwDOACaFSM48tJOw","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T12:33:54Z","updated_at":"2022-01-21T12:33:54Z","author_association":"CONTRIBUTOR","body":"Changes LGTM.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018467248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018471935","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1018471935","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1018471935,"node_id":"IC_kwDOACaFSM48tKX_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T12:41:31Z","updated_at":"2022-01-21T12:41:31Z","author_association":"CONTRIBUTOR","body":"Removed the code checking that the native maps were loaded. Kicking off an IT run.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018471935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018482634","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1018482634","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1018482634,"node_id":"IC_kwDOACaFSM48tM_K","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T12:58:21Z","updated_at":"2022-01-21T12:58:21Z","author_association":"MEMBER","body":"> Removed the code checking that the native maps were loaded. Kicking off an IT run.\r\n\r\nDid you see my suggestion in https://github.com/apache/accumulo/pull/2414#discussion_r789623850?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018482634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018483967","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1018483967","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1018483967,"node_id":"IC_kwDOACaFSM48tNT_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T13:00:36Z","updated_at":"2022-01-21T13:00:36Z","author_association":"CONTRIBUTOR","body":"Oh, sorry, I thought that was tied to #2425 being completed. I likely have not had enough coffee and misread it. I can add that back in.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018483967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018497378","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1018497378","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1018497378,"node_id":"IC_kwDOACaFSM48tQli","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T13:18:09Z","updated_at":"2022-01-21T13:18:09Z","author_association":"MEMBER","body":"> Oh, sorry, I thought that was tied to #2425 being completed. I likely have not had enough coffee and misread it. I can add that back in.\r\n\r\nSorry for the confusion. It's parallel to what I did in the other PR. This wouldn't load the native maps, but it would do a sanity check to make sure that if the user set the cluster to have them enabled, they've at least provided the location to them so the mini has a good chance of loading them. We could also go further than what I suggested to check the contents of those, in order to at least look to see if a file exists. However, I'm reluctant to suggest Mini should actually load the native maps in that process, because mini is public API and that is the user's process we'd be loading a native library into, and we don't know the impact on the user that might cause.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018497378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018552764","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-1018552764","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":1018552764,"node_id":"IC_kwDOACaFSM48teG8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T14:29:32Z","updated_at":"2022-01-21T14:29:32Z","author_association":"CONTRIBUTOR","body":"After some research into recent Hadoop improvements and since production hasn't encountered memory issues with compressors recently, I think this can be closed. Hadoop has made changes in version 2.9.0 to `CodecPool` that essentially does no pooling, one improvement this PR was making. Here is the code from `CodecPool` that checks for the `DoNotPool` annotation:\r\nhttps://github.com/apache/hadoop/blob/rel/release-2.9.0/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/compress/CodecPool.java#L160-L165","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018552764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018608281","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-1018608281","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":1018608281,"node_id":"IC_kwDOACaFSM48trqZ","user":{"login":"phrocker","id":1781585,"node_id":"MDQ6VXNlcjE3ODE1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/1781585?v=4","gravatar_id":"","url":"https://api.github.com/users/phrocker","html_url":"https://github.com/phrocker","followers_url":"https://api.github.com/users/phrocker/followers","following_url":"https://api.github.com/users/phrocker/following{/other_user}","gists_url":"https://api.github.com/users/phrocker/gists{/gist_id}","starred_url":"https://api.github.com/users/phrocker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phrocker/subscriptions","organizations_url":"https://api.github.com/users/phrocker/orgs","repos_url":"https://api.github.com/users/phrocker/repos","events_url":"https://api.github.com/users/phrocker/events{/privacy}","received_events_url":"https://api.github.com/users/phrocker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T15:24:49Z","updated_at":"2022-01-21T15:32:46Z","author_association":"CONTRIBUTOR","body":"> After some research into recent Hadoop improvements and since production hasn't encountered memory issues with compressors recently, I think this can be closed. Hadoop has made changes in version 2.9.0 to `CodecPool` that essentially does no pooling, one improvement this PR was making. Here is the code from `CodecPool` that checks for the `DoNotPool` annotation: https://github.com/apache/hadoop/blob/rel/release-2.9.0/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/compress/CodecPool.java#L160-L165\r\n\r\n@milleruntime  thanks for doing that leg work! I suspect this issue wouldn't be encountered while source limiting exists on a production systems. I haven't been part of enough to know to be honest, but I did confirm it in 2020 ( my prior comment was meant to be 2016 since I've encountered it on production system ) in the last round of comments with an iterator that deep copied a lot of sources.  I believe that annotation is needed on that class, though. A cursory searched shows that it only the built in gzip compressor/decompresor does not pool (https://github.com/apache/hadoop/search?q=DoNotPool) , but I'm likely mistaken.\r\n\r\n I think the primary motivation was changing how delegation of compressors worked and to make it pluggable less correcting the initial issue but as Keith identified it may be better suited in spi anyway, which means closing this makes sense --  and the fact that the PR remains since 2016 and I've forgotten about it only re-enforces that it's likely \"not being seen\" via other corrective measures and thus closing it is smart. Thanks!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018608281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018814403","html_url":"https://github.com/apache/accumulo/pull/2426#issuecomment-1018814403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2426","id":1018814403,"node_id":"IC_kwDOACaFSM48ud_D","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T19:54:25Z","updated_at":"2022-01-21T19:54:25Z","author_association":"CONTRIBUTOR","body":"> LGTM\r\n\r\nThanks for looking it over!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018814403/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018874263","html_url":"https://github.com/apache/accumulo/issues/2428#issuecomment-1018874263","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2428","id":1018874263,"node_id":"IC_kwDOACaFSM48usmX","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T21:23:01Z","updated_at":"2022-01-21T21:23:01Z","author_association":"MEMBER","body":"One issue seems to be that it's not prefixing the filesystem root directory for RawLocalFileSystem correctly. So, it's checking for a file relative to the root of the local filesystem, which is incorrect. This might have gone unnoticed with the globbing, because the glob never matched anything, whereas the current code now has a starting point in a directory it expects to exist.\r\n\r\nA second issue is that the directory might not exist on all volumes, so we might need to have it ignore the case when there are no files on that specific volume. My concern doing this here, though, is that it might mask the first issue above, which should be fixed first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018874263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018903080","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1018903080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1018903080,"node_id":"IC_kwDOACaFSM48uzoo","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T22:14:20Z","updated_at":"2022-01-21T22:14:57Z","author_association":"MEMBER","body":"For reference, I saw [this link](https://stackoverflow.com/questions/47158583/executing-junit-4-and-junit-5-tests-in-a-same-build) shows how to get both JUnit4 and JUnit5 tests to build in the same module. If we upgrade one module at a time, we can just switch that module's engine from vintage to jupiter instead of trying to run both in the same module. Also, there's a bunch of examples in their [git repo](https://github.com/junit-team/junit5-samples).\r\n\r\nI think the migration via updating the POMs is probably simple enough, but the trickier part might be if some tests using the vintage engine don't work with PowerMock. Or, if we are stuck staying on the vintage engine because some uses of PowerMock might prevent us from using the Jupiter engine. The only way to know is to try and work through the test failures. Currently, tests are failing for other reasons, so it may be hard to migrate right now until those are resolved.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1018903080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020032415","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1020032415","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1020032415,"node_id":"IC_kwDOACaFSM48zHWf","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T12:09:22Z","updated_at":"2022-01-24T12:09:22Z","author_association":"CONTRIBUTOR","body":"IT run finished. 3 tests failed, but none were due to `verifyUp`. I'm thinking that we might be able to merge this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020032415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020095970","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1020095970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1020095970,"node_id":"IC_kwDOACaFSM48zW3i","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T13:22:26Z","updated_at":"2022-01-24T13:22:26Z","author_association":"CONTRIBUTOR","body":"Running against main I was seeing three sunny day tests fail\r\n\r\n- KeywordStartIT.testExpectedClasses:145 expected:<[gc]> but was:<[ec-admin]>\r\n- ReadWriteIT.sunnyDay:188 » NoSuchElement No value present\r\n- org.apache.accumulo.test.InMemoryMapIT - vm crashes\r\n\r\nI'll try against your PR next\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020095970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020111784","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1020111784","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1020111784,"node_id":"IC_kwDOACaFSM48zauo","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T13:39:53Z","updated_at":"2022-01-24T13:39:53Z","author_association":"CONTRIBUTOR","body":"Using this branch - InMemoryMapIT still fails.  (ReadWriteIT passed, ignoring KeywordStartIT pr pending)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020111784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020198649","html_url":"https://github.com/apache/accumulo/pull/2426#issuecomment-1020198649","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2426","id":1020198649,"node_id":"IC_kwDOACaFSM48zv75","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T15:08:02Z","updated_at":"2022-01-24T15:08:02Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I moved the comments to the methods in 0984633.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020198649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020247709","html_url":"https://github.com/apache/accumulo/issues/2428#issuecomment-1020247709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2428","id":1020247709,"node_id":"IC_kwDOACaFSM48z76d","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T15:54:11Z","updated_at":"2022-01-24T15:54:11Z","author_association":"CONTRIBUTOR","body":"I am not sure if the prefixing is causing the failure but the command works a few times in the IT up until it clones the table. After the clone, then it fails to find the second tableId. So there may be something else going on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020247709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020519563","html_url":"https://github.com/apache/accumulo/issues/2428#issuecomment-1020519563","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2428","id":1020519563,"node_id":"IC_kwDOACaFSM480-SL","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T20:30:10Z","updated_at":"2022-01-24T20:30:10Z","author_association":"CONTRIBUTOR","body":"It looks like there is a change in the way that `TableDiskUsage` behaves with the newly created table that has yet to be compacted. Before the recent change, the test would run the command (after cloning the table but before compacting) and only return results for one table:\r\n<pre>\r\ndiskUsages = accumuloClient.tableOperations().getDiskUsage(tables);\r\nassertEquals(1, diskUsages.size());\r\nassertEquals(2, diskUsages.get(0).getTables().size());\r\nassertTrue(diskUsages.get(0).getUsage() > 0);\r\n</pre>\r\nSo the files for the new table aren't there yet, until it gets compacted. Then when the command is run, it will return results for both tables.\r\n\r\nSince the recent changes to `TableDiskUsage`, an exception is now thrown because the file isn't found, instead of just quietly failing as it did before. The file isn't there yet because compaction hasn't run.\r\n\r\nI am not sure if this is a problem, since it only seems to happen in the mini test with the RawFileSystem. I ran similar commands in the shell in Uno and it works fine. Do we want to change the behavior to make the test pass? Or change the test to pass for the new behavior?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020519563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020527110","html_url":"https://github.com/apache/accumulo/issues/2428#issuecomment-1020527110","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2428","id":1020527110,"node_id":"IC_kwDOACaFSM481AIG","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T20:39:41Z","updated_at":"2022-01-24T20:40:01Z","author_association":"CONTRIBUTOR","body":"If the file (or it appears directory in this case) does not exist, would it be appropriate to return a size of 0? Which, I think is your change the behavior option?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020527110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020546849","html_url":"https://github.com/apache/accumulo/issues/2428#issuecomment-1020546849","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2428","id":1020546849,"node_id":"IC_kwDOACaFSM481E8h","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T21:06:59Z","updated_at":"2022-01-24T21:06:59Z","author_association":"CONTRIBUTOR","body":"> I am not sure if this is a problem, since it only seems to happen in the mini test with the RawFileSystem. I ran similar commands in the shell in Uno and it works fine.\r\n\r\nI was mistaken. The command fails in Uno as well. Bottom line is that it doesn't handle clones. I think it might be a bug.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020546849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020549233","html_url":"https://github.com/apache/accumulo/issues/2428#issuecomment-1020549233","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2428","id":1020549233,"node_id":"IC_kwDOACaFSM481Fhx","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T21:09:49Z","updated_at":"2022-01-24T21:09:49Z","author_association":"CONTRIBUTOR","body":"> If the file (or it appears directory in this case) does not exist, would it be appropriate to return a size of 0? Which, I think is your change the behavior option?\r\n\r\nI think that is one possible solution. The problem is I don't fully understand the code in `TableDiskUsage` that tracks different sets of IDs so I am not sure where we need to make an adjustment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1020549233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021199898","html_url":"https://github.com/apache/accumulo/issues/2076#issuecomment-1021199898","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2076","id":1021199898,"node_id":"IC_kwDOACaFSM483kYa","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T13:48:13Z","updated_at":"2022-01-25T13:48:13Z","author_association":"CONTRIBUTOR","body":"This is done so can be closed. Any work done for #2197 would be a separate task.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021199898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021265001","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021265001","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021265001,"node_id":"IC_kwDOACaFSM4830Rp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T14:53:26Z","updated_at":"2022-01-25T14:53:42Z","author_association":"CONTRIBUTOR","body":"I realized I can work around this in the test I am running by periodically killing the manager process.  This bug is one of those that would probably be hidden by agitation during testing.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021265001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021283349","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021283349","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021283349,"node_id":"IC_kwDOACaFSM4834wV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T15:07:22Z","updated_at":"2022-01-25T15:07:22Z","author_association":"CONTRIBUTOR","body":"> Based on this I looked in the manager code and found it was periodically creating thread pools to get tserver info and this may register the thread pool statically for monitoring.\r\n\r\nSeems like the Manager should re-use a thread pool for getting tserver info rather than recreating?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021283349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021400038","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021400038","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021400038,"node_id":"IC_kwDOACaFSM484VPm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T16:55:12Z","updated_at":"2022-01-25T16:55:12Z","author_association":"CONTRIBUTOR","body":"> Seems like the Manager should re-use a thread pool for getting tserver info rather than recreating?\r\n\r\nCould possibly do that.  Looked at the code and it shuts the thread pool down in the method, so the entire way the method works would need to be redone if using a shared thread pool.  \r\n\r\nIf there is any other code in Accumulo that creates thread pools for short task, then those could also cause an OOME when running for extended periods.  If we are not going to change how thread pools are instrumented, we would need to look for those cases and remedy them.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021400038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021409204","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021409204","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021409204,"node_id":"IC_kwDOACaFSM484Xe0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:02:51Z","updated_at":"2022-01-25T17:02:51Z","author_association":"CONTRIBUTOR","body":"> If there is any other code in Accumulo that creates thread pools for short task, then those could also cause an OOME when running for extended periods.\r\n\r\nI think most are long lived IIRC.\r\n\r\nMy guess is the problem is in the ThreadPools class where it's creating metrics for each ExecutorService that is created. Ref: https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/util/threads/ThreadPools.java#L213","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021409204/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021503545","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1021503545","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1021503545,"node_id":"IC_kwDOACaFSM484ug5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T18:52:14Z","updated_at":"2022-03-01T19:37:09Z","author_association":"CONTRIBUTOR","body":"@keith-turner and I had a discussion about changing the current design. The key points from the discussion are:\r\n\r\n1. Modifying the load balancing logic from the current implementation (which uses ZK to know which scan servers are available) to an implemenation that selects  candidate scan servers to communicate with for scanning an extent. This new implementation would not require ZK and would use a hashing algorithm so that all clients select the same set of scan servers for an extent in an attempt to make use of the index and data block caches.\r\n\r\n2. We may want to have configuration settings for the scan server for things that are inherited from the tablet server. For example, the data block cache size. Does the scan server use the current configuration property name, or should it have its own.\r\n\r\n3. ~~Modifying the scan server to perform more than one concurrent scan.~~ Added in [0d553de]\r\n\r\n4. ~~Modify the client configuration code such that the name is not tied to the implementation.~~ (This has been completed with the addition of `ScannerBase.setConsistencyLevel(ConsistencyLevel)` ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021503545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021542074","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1021542074","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1021542074,"node_id":"IC_kwDOACaFSM484366","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:39:03Z","updated_at":"2022-01-25T19:39:03Z","author_association":"CONTRIBUTOR","body":"> Modifying the scan server to perform more than one concurrent scan.\r\n\r\nWhen we discussed this, we realized there is an interesting tradeoff between isolation and caching. Running a single concurrent scan per scan server prevents a rouge scan that gobbles up all memory from negatively impacting other scans.  On the other had running multiple concurrent scans per scan server enables scans to benefit from a larger shared cache (which may be useful if tablets are repeatedly scanned using the same scan server).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021542074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021545222","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021545222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021545222,"node_id":"IC_kwDOACaFSM4844sG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:43:23Z","updated_at":"2022-01-25T20:01:08Z","author_association":"CONTRIBUTOR","body":"@dlmarion another possible solution to this problem is having an option on the util method to create a thread pool to instrument or not instrument. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021545222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021547770","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021547770","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021547770,"node_id":"IC_kwDOACaFSM4845T6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:46:59Z","updated_at":"2022-01-25T19:46:59Z","author_association":"CONTRIBUTOR","body":"Even if there were no memory issues, I am not sure if it's useful to instrument and report metrics on short lived thread pools.  So making instrumentation optional may be useful for more than fixing the bug.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021547770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021604010","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-1021604010","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":1021604010,"node_id":"IC_kwDOACaFSM485HCq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:00:25Z","updated_at":"2022-01-25T21:00:25Z","author_association":"CONTRIBUTOR","body":"Just a note to say that we have two cases where using external compactions when testing 2.1.0-SNAPSHOT does not exhibit this error. It seems only internal compactions are affected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021604010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021607465","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021607465","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021607465,"node_id":"IC_kwDOACaFSM485H4p","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:05:04Z","updated_at":"2022-01-25T21:05:04Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - do you remember which thread pool in the Manager was short-lived?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021607465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021608330","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1021608330","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1021608330,"node_id":"IC_kwDOACaFSM485IGK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:06:07Z","updated_at":"2022-01-25T21:06:07Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - do you remember which thread pool in the Manager was short-lived?\r\n\r\nNevermind, I found it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021608330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021610143","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1021610143","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1021610143,"node_id":"IC_kwDOACaFSM485Iif","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:08:28Z","updated_at":"2022-01-25T21:08:28Z","author_association":"MEMBER","body":"I have one whole module converted now (accumulo-core) with all tests passing (that were passing before these changes). There are build failures due to declared-unused and unused-declared dependencies. I didn't run into any big issues yet so I'll move on to a new module now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021610143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021639443","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1021639443","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1021639443,"node_id":"IC_kwDOACaFSM485PsT","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:46:31Z","updated_at":"2022-01-25T21:46:31Z","author_association":"MEMBER","body":"> I have one whole module converted now (accumulo-core) with all tests passing (that were passing before these changes). There are build failures due to declared-unused and unused-declared dependencies. I didn't run into any big issues yet so I'll move on to a new module now.\r\n\r\nThis is going to get *really* big. So, instead of adding all the changes to one single big PR, which is a nightmare for code review, let's split this across a couple different PRs, so we can make sure that each incremental update still works before we move on to the next one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1021639443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022154225","html_url":"https://github.com/apache/accumulo/pull/2420#issuecomment-1022154225","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2420","id":1022154225,"node_id":"IC_kwDOACaFSM487NXx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T12:29:33Z","updated_at":"2022-01-26T12:29:33Z","author_association":"CONTRIBUTOR","body":"#2414 was merged. Only one test ( LateLastContactIT.test() ) failed in an IT run on `main` after that merge. I'm going to close this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022154225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022250670","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1022250670","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1022250670,"node_id":"IC_kwDOACaFSM487k6u","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T14:29:56Z","updated_at":"2022-01-26T14:29:56Z","author_association":"CONTRIBUTOR","body":"So, our ThreadPools class calls a method in our MetricsUtils class that creates a Micrometer ExecutorServiceMetrics object which ultimately creates several Meters and registers them (https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/jvm/ExecutorServiceMetrics.java#L316). The registered Meters are added with a `name` tag. There is a way to remove Meters from the MeterRegistry (MeterRegistry.remove), but we don't have a direct reference to the Meters that ExecutorServiceMetrics creates. We would have to use the `Search` class to look them up and then remove them.\r\n\r\n> I am not sure if it's useful to instrument and report metrics on short lived thread pools.\r\n\r\nI am going down this path, not because it's not useful for short lived thread pools, but because there is no easy way to remove the Meters when the thread pool is shut down. My plan is to conditionally create metrics for ThreadPools, and then only do it when the ThreadPool lives for the duration of the VM.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022250670/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022288828","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1022288828","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1022288828,"node_id":"IC_kwDOACaFSM487uO8","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T15:08:51Z","updated_at":"2022-01-26T15:08:51Z","author_association":"MEMBER","body":"> This is going to get _really_ big. So, instead of adding all the changes to one single big PR, which is a nightmare for code review, let's split this across a couple different PRs, so we can make sure that each incremental update still works before we move on to the next one.\r\n\r\nThat sounds like a good idea. Do you have anything in mind for how we might split this task up? Maybe Each module?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022288828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022318403","html_url":"https://github.com/apache/accumulo/pull/2433#issuecomment-1022318403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2433","id":1022318403,"node_id":"IC_kwDOACaFSM4871dD","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T15:36:57Z","updated_at":"2022-01-26T15:36:57Z","author_association":"CONTRIBUTOR","body":"It looks like this breaks the GC so some additional changes would have to be made for this to work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022318403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022405809","html_url":"https://github.com/apache/accumulo/pull/2433#issuecomment-1022405809","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2433","id":1022405809,"node_id":"IC_kwDOACaFSM488Kyx","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T17:07:47Z","updated_at":"2022-01-26T17:07:47Z","author_association":"CONTRIBUTOR","body":"This change is too risky with very little benefit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022405809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022535919","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1022535919","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1022535919,"node_id":"IC_kwDOACaFSM488qjv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T19:36:32Z","updated_at":"2022-01-26T19:36:50Z","author_association":"MEMBER","body":"> > This is going to get _really_ big. So, instead of adding all the changes to one single big PR, which is a nightmare for code review, let's split this across a couple different PRs, so we can make sure that each incremental update still works before we move on to the next one.\r\n> \r\n> That sounds like a good idea. Do you have anything in mind for how we might split this task up? Maybe Each module?\r\n\r\nTasks can be grouped into:\r\n\r\n1. things that can be done while still on JUnit4 to ease the migration\r\n2. things to update the parent POM to manage the JUnit dependencies\r\n3. (module migration stage 1) things that can be done in each module to move that module from JUnit4 to JUnit5 with the vintage engine\r\n4. (module migration stage 2) things that can be done in each module to move that module from JUnit5 vintage to JUnit5 jupiter engine\r\n\r\nThe first item can definitely be done in its own PR. The last two can be broken up a few different ways, depending. Like, you could do item 3 for all modules in one PR, then do separate PRs for each module (or a couple modules at a time, if they are small enough to be manageable for a review) for item 4. For item 2, you can probably include that in your first PR that does any JUnit5 stuff.\r\n\r\nFeel free to break it up however you think best. The goal in breaking it up is to help streamline code reviews and make incremental progress without breaking anything.\r\n\r\nYou could keep a table to track the migration:\r\n\r\n| Module      | Migrate to JUnit5 vintage | Migrate to JUnit5 jupiter |\r\n| ----------- | ----------- | ----------- |\r\n| assemble | ☑ | ☑ |\r\n| core | ☑ | ☑ |\r\n| hadoop-mapreduce | ☑ |  |\r\n| iterator-test-harness | ☑ |  |\r\n| minicluster | ☑ |  |\r\n| server/base | ☑ |  |\r\n| server/compaction-coordinator | ☑ |  |\r\n| server/compactor | ☑ |  |\r\n| server/gc | ☑ |  |\r\n| server/manager | ☑ |  |\r\n| server/master | ☑ |  |\r\n| server/monitor | ☑ |  |\r\n| server/native | ☑ |  |\r\n| server/tserver | ☑ |  |\r\n| shell | ☑ |  |\r\n| start | ☑ |  |\r\n| test |  |  |\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022535919/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022540279","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1022540279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1022540279,"node_id":"IC_kwDOACaFSM488rn3","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T19:42:14Z","updated_at":"2022-01-26T19:42:14Z","author_association":"MEMBER","body":"Great ideas, @ctubbsii! Thanks!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022540279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022544383","html_url":"https://github.com/apache/accumulo/pull/2427#issuecomment-1022544383","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2427","id":1022544383,"node_id":"IC_kwDOACaFSM488sn_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T19:47:59Z","updated_at":"2022-01-26T19:47:59Z","author_association":"MEMBER","body":"> Great ideas, @ctubbsii! Thanks!\r\n\r\nSure, no problem. Oh, and the table view is nice, because it helps visualize different ways you can incrementally make progress. You could do separate PRs to chunk things vertically (migrate to vintage for several modules at once), or horizontally (fully migrate one module), or some rectangular section (like fully migrate a few or all of the smallest modules in one PR), or you could do a separate PR for each separate cell in the table (might be useful for knocking out the biggest modules).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022544383/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022595261","html_url":"https://github.com/apache/accumulo/issues/2431#issuecomment-1022595261","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2431","id":1022595261,"node_id":"IC_kwDOACaFSM4885C9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T20:57:05Z","updated_at":"2022-01-26T20:57:05Z","author_association":"MEMBER","body":"I have a fix incoming.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022595261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022596919","html_url":"https://github.com/apache/accumulo/issues/1177#issuecomment-1022596919","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1177","id":1022596919,"node_id":"IC_kwDOACaFSM4885c3","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T20:59:22Z","updated_at":"2022-01-26T20:59:22Z","author_association":"CONTRIBUTOR","body":"I think a good first step for this would be to refactor `Initialize` into multiple classes. This may give us a type of context object that would be easier to maintain but I don't think we want to extend `ServerContext`. The things we can do during initialization are very limited and if anything `ClientContext` may be able to extend an \"IntializeContext\", if there is enough shared logic to make it a part of the class hierarchy.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022596919/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022625466","html_url":"https://github.com/apache/accumulo/issues/1177#issuecomment-1022625466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1177","id":1022625466,"node_id":"IC_kwDOACaFSM489Aa6","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T21:36:45Z","updated_at":"2022-01-26T21:36:45Z","author_association":"MEMBER","body":"I think the bulk of the motivation for having it share class hierarchy with ServerContext is that it uses a lot of the utility code we wrote elsewhere that accepts a ServerContext, particularly for working with ZooKeeper stuff. But, it doesn't have to do that if it doesn't make sense to do so.\r\n\r\nAnother hiccup that makes this frustrating is that ServerInfo uses ZooKeeper and HDFS objects in some of its constructors to do instanceId and instanceName lookups. This creates a chicken-egg bootstrap problem a bit. Ideally, ServerInfo should be an object representation of the configuration properties, and that is used to construct a ServerContext. It really shouldn't have stateful objects that do work like ZooKeeper connections. Those kinds of objects should exist in ServerContext. So, it should go something like: `SiteConfiguration` :arrow_right: `ServerInfo` :arrow_right: `ServerContext` (a composition something like: `new ServerContext(new ServerInfo(new SiteConfiguration()))`). However, because ServerInfo provides the instance ID, and because it may need to look up the instance ID from HDFS, or from an instance name to look it up in ZooKeeper, it has to create worker objects. This would be a lot simpler if the instance name was unique already and served as the instance ID as well. This would prevent being able to rename an instance, but if the instance name was included in the server config file (and the volumes had a sanity check to ensure it matched), we wouldn't need to do any lookups for the instance ID in `ServerInfo`. Currently, though, we have both instanceName and instanceId for Initialize, and neither for regular server bootups. Clients are expected to do a lookup of the instanceId from an instanceName, and servers are expected to look up from HDFS using `instance.volumes`. It's all very needlessly complex, but I think we're stuck with some of it for awhile.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022625466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022669615","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1022669615","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1022669615,"node_id":"IC_kwDOACaFSM489LMv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T22:41:11Z","updated_at":"2022-01-26T22:41:11Z","author_association":"CONTRIBUTOR","body":">  There is a way to remove Meters from the MeterRegistry (MeterRegistry.remove), but we don't have a direct reference to the Meters that ExecutorServiceMetrics creates.\r\n\r\n@dlmarion do you think an upstream issue/PR to micrometer about this would be useful?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022669615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022672607","html_url":"https://github.com/apache/accumulo/pull/2432#issuecomment-1022672607","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2432","id":1022672607,"node_id":"IC_kwDOACaFSM489L7f","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T22:46:35Z","updated_at":"2022-01-26T22:46:35Z","author_association":"CONTRIBUTOR","body":"> Boolean parameters can make code harder to read. Instead of boolean parameters, you could have a separate method name, like .action() and .actionWithMetrics(), or you could use a builder, like builder.withMetrics().build(), or you could have enums for flags, like .action(EnumSet.of(WITH_METRICS, OTHER_FLAG))\r\n\r\nAnother option would be to replace the last boolean argument in the method with a new enum type.  The single boolean here is not too bad, an enum would be more readable.  We have had methods in the past w/ multiple boolean arguments and that was awful to read.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1022672607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023158042","html_url":"https://github.com/apache/accumulo/issues/2423#issuecomment-1023158042","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2423","id":1023158042,"node_id":"IC_kwDOACaFSM48_Cca","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T12:30:46Z","updated_at":"2022-01-27T12:30:46Z","author_association":"CONTRIBUTOR","body":"> do you think an upstream issue/PR to micrometer about this would be useful?\r\n\r\nI had found https://github.com/micrometer-metrics/micrometer/issues/1929, which is not specific to their ExecutorServiceMetrics class, but is where I got my information on how to remove the Meters from the MeterRegistry. We could submit an issue, but I see two possible solutions:\r\n\r\n  1. They provide a method in ExecutorServiceMetrics that performs the removal of the Meters for the user based on the ExecutorService name tag that they add.\r\n  2. Return a reference to all of the Meters created by ExecutorServiceMetrics to the caller so that the caller can remove them.\r\n  \r\n  I think that 2 above presents a problem for us as we would need to keep a reference to all Meters created for all ExecutorServices so that they could be cleaned up. Given that #2432 only creates metrics for long lived ExecutorService's, I'm of the opinion that we punt on this issue until someone submits a ticket asking us to provide metrics for all ExecutorServices.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023158042/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023167707","html_url":"https://github.com/apache/accumulo/pull/2432#issuecomment-1023167707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2432","id":1023167707,"node_id":"IC_kwDOACaFSM48_Ezb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T12:43:02Z","updated_at":"2022-01-27T12:43:02Z","author_association":"CONTRIBUTOR","body":"> Boolean parameters can make code harder to read. Instead of boolean parameters, you could have a separate method name, like .action() and .actionWithMetrics(), or you could use a builder, like builder.withMetrics().build(), or you could have enums for flags, like .action(EnumSet.of(WITH_METRICS, OTHER_FLAG))\r\n\r\nI have no issue with modifying ThreadPools to use a builder pattern, but I think that should be done in a different issue. IDEs make it pretty easy to see the formal parameter name for the method and the formal parameter name is descriptive in this case.\r\n\r\n> Another option would be to replace the last boolean argument in the method with a new enum type. The single boolean here is not too bad, an enum would be more readable. We have had methods in the past w/ multiple boolean arguments and that was awful to read.\r\n\r\nI have no issue with modifying this PR to use an enum for the boolean parameter, but I'm not sure that it's necessary if there is going to be a follow-on issue created to modify the class to use a builder pattern.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023167707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023180473","html_url":"https://github.com/apache/accumulo/issues/1177#issuecomment-1023180473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1177","id":1023180473,"node_id":"IC_kwDOACaFSM48_H65","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T12:59:14Z","updated_at":"2022-01-27T12:59:14Z","author_association":"CONTRIBUTOR","body":"Yeah the chicken-egg bootstrap problem was my main problem with including it in the class hierarchy. My first step was to break up `Initialize` into multiple class objects, organizing all the static code so we can better see what can be reused/shared.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023180473/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023360594","html_url":"https://github.com/apache/accumulo/pull/2432#issuecomment-1023360594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2432","id":1023360594,"node_id":"IC_kwDOACaFSM48_z5S","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T15:52:48Z","updated_at":"2022-01-27T15:52:48Z","author_association":"CONTRIBUTOR","body":"> IDEs make it pretty easy to see the formal parameter name for the method and the formal parameter name is descriptive in this case.\r\n\r\nThat is a good point.  That does dramatically increase readability. However when reviewing a PR on GH, you dont have that nice feature.  But thinking back to my review that was not a problem at all. The review was very easy for me to review because I knew what the single boolean did.  The more difficult part of the review was that I had to look at code outside the PR sometimes to see how code was called externally, which had nothing to do with the boolean.  More than one boolean would certainly have given me a headache during review though.  \r\n\r\n> I'm not sure that it's necessary if there is going to be a follow-on issue created to modify the class to use a builder pattern.\r\n\r\nThat makes sense to me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023360594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023502551","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023502551","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023502551,"node_id":"IC_kwDOACaFSM49AWjX","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:06:33Z","updated_at":"2022-01-27T18:06:33Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo I would prefer general code improvements like this that touch a lot of files to be merged in the next version (most likely 2.2) so to not slow down the 2.1 release. Did you have a reason why this needs to be in 2.1?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023502551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023511365","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023511365","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023511365,"node_id":"IC_kwDOACaFSM49AYtF","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:16:19Z","updated_at":"2022-01-27T18:16:19Z","author_association":"MEMBER","body":"> Did you have a reason why this needs to be in 2.1?\r\n\r\nNope, it can wait. Do you think I should mark this as draft until then?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023511365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023526248","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023526248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023526248,"node_id":"IC_kwDOACaFSM49AcVo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:35:31Z","updated_at":"2022-01-27T18:35:31Z","author_association":"CONTRIBUTOR","body":"> > Did you have a reason why this needs to be in 2.1?\r\n> \r\n> Nope, it can wait. Do you think I should mark this as draft until then?\r\n\r\nI was thinking we could create a temporary branch for 2.2 then merge it when we release 2.1. @ctubbsii any thoughts on this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023526248/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023589176","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023589176","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023589176,"node_id":"IC_kwDOACaFSM49Ars4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T19:59:07Z","updated_at":"2022-01-27T19:59:07Z","author_association":"MEMBER","body":"> @DomGarguilo I would prefer general code improvements like this that touch a lot of files to be merged in the next version (most likely 2.2) so to not slow down the 2.1 release. Did you have a reason why this needs to be in 2.1?\r\n\r\nThese are all test files, with a very predictable fix, that I need to get merged for my subsequent fixes. I don't think there's a reason to delay on this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023589176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023619000","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023619000","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023619000,"node_id":"IC_kwDOACaFSM49Ay-4","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T20:38:07Z","updated_at":"2022-01-27T20:38:07Z","author_association":"MEMBER","body":"Either merging now or waiting until after 2.1.0 is released is fine with me. What do you think, @milleruntime?\r\n\r\nThis change (#2435), which can stand alone, is a precursor to a set of other changes I have in mind that relate to upgrading JUnit from version 4 to 5. Those future changes, which may look similar to those in #2427, may be more disruptive and I am assuming we would want to hold off on a lot of those changes until after the 2.1.0 release. This PR might be fine to merge but for changes like that, should we just hold off on working on those altogether or should there be a separate branch for them like @milleruntime suggested?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023619000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023622108","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023622108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023622108,"node_id":"IC_kwDOACaFSM49Azvc","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T20:42:58Z","updated_at":"2022-01-27T20:42:58Z","author_association":"CONTRIBUTOR","body":"This can be merged. I talked to Ed and he is OK with the changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023622108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023635315","html_url":"https://github.com/apache/accumulo/pull/2435#issuecomment-1023635315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2435","id":1023635315,"node_id":"IC_kwDOACaFSM49A29z","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T21:01:57Z","updated_at":"2022-01-27T21:01:57Z","author_association":"MEMBER","body":"My followup changes to this are in #2436 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023635315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023712399","html_url":"https://github.com/apache/accumulo/pull/2436#issuecomment-1023712399","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2436","id":1023712399,"node_id":"IC_kwDOACaFSM49BJyP","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T22:49:12Z","updated_at":"2022-01-27T22:49:12Z","author_association":"MEMBER","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1023712399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1024522042","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1024522042","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1024522042,"node_id":"IC_kwDOACaFSM49EPc6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T19:05:35Z","updated_at":"2022-03-31T15:21:45Z","author_association":"CONTRIBUTOR","body":"Some annotated shell output:\r\n```bash\r\nroot@test> createtable test (1)\r\nroot@test test> insert a b c d (2)\r\nroot@test test> scan (3)\r\na b:c []\td\r\nroot@test test> scan -cl immediate (4)\r\na b:c []\td\r\nroot@test test> scan -cl eventual (5)\r\nroot@test test> flush (6)\r\n2022-01-28T18:58:10,693 [shell.Shell] INFO : Flush of table test  initiated...\r\nroot@test test> scan (7)\r\na b:c []\td\r\nroot@test test> scan -cl eventual (8)\r\na b:c []\td\r\n```\r\n\r\nI create a table (1) and insert some data (2). When I run a scan (3,4) with the `immediate` consistency level, which happens to be the default, the scan uses normal code path and issues the scan command against the tablet server. Data is returned because the tablet server code path also returns data that is in the in-memory map. When I scan with the `eventual` consistency level no data is returned because the code path in the scanner only uses the data in the tablet's files. When I flush (6) the data to write a file in HDFS, the subsequent scans with `immediate` (7) and `eventual` (8) consistency level return the data.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1024522042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1024540257","html_url":"https://github.com/apache/accumulo/issues/2440#issuecomment-1024540257","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2440","id":1024540257,"node_id":"IC_kwDOACaFSM49ET5h","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T19:30:57Z","updated_at":"2022-01-28T19:30:57Z","author_association":"MEMBER","body":"load_jars_hdfs seems like a cluster-management function and should probably be moved to accumulo-cluster, or deleted entirely, as people can upload their own jars without our help; we don't necessarily need to be responsible for a basic file copy tool that isn't directly related to Accumulo's functionality. I believe this was primarily used with the VFS classloader, which was offloaded into a separate pluggable SPI","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1024540257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1024627031","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1024627031","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1024627031,"node_id":"IC_kwDOACaFSM49EpFX","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T20:52:59Z","updated_at":"2022-01-28T20:52:59Z","author_association":"MEMBER","body":"Note: I don't think this is a priority at the moment and most changes should wait to me merged until after the 2.1.0 release so I will tentatively label this ticket with the 3.0 project tag.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1024627031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1025669662","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1025669662","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1025669662,"node_id":"IC_kwDOACaFSM49Inoe","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-31T12:05:51Z","updated_at":"2022-01-31T12:24:17Z","author_association":"CONTRIBUTOR","body":"FateIT is relevant to this PR. It failed because ZooKeeperTestingServer failed to start after getting several BindExceptions's. Looking at the other two failed ITs, I'm not sure that their failure is related to the changes here. I was able to reproduce the failures locally, but there are log messages associated with this change that should exist in the Manager log that are not there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1025669662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1025727268","html_url":"https://github.com/apache/accumulo/pull/2438#issuecomment-1025727268","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2438","id":1025727268,"node_id":"IC_kwDOACaFSM49I1sk","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-31T13:15:15Z","updated_at":"2022-01-31T13:15:15Z","author_association":"CONTRIBUTOR","body":"@ctubbsii thanks for the tweaks","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1025727268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1025745466","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1025745466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1025745466,"node_id":"IC_kwDOACaFSM49I6I6","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-31T13:34:40Z","updated_at":"2022-01-31T13:34:40Z","author_association":"CONTRIBUTOR","body":"I wonder if there are servers running taking up ports and not getting shut down properly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1025745466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026093610","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1026093610","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1026093610,"node_id":"IC_kwDOACaFSM49KPIq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-31T18:44:58Z","updated_at":"2022-01-31T18:44:58Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  - I reran the ITs and FateIT passed this time. Maybe a transient port issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026093610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026236423","html_url":"https://github.com/apache/accumulo/issues/2348#issuecomment-1026236423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2348","id":1026236423,"node_id":"IC_kwDOACaFSM49KyAH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-31T21:37:23Z","updated_at":"2022-01-31T21:37:23Z","author_association":"CONTRIBUTOR","body":"@ctubbsii increased the timeout in 3183f7accb1c1505e69709e9763e83d1f9bca7d8, this may be OBE.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026236423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026812901","html_url":"https://github.com/apache/accumulo/issues/2375#issuecomment-1026812901","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2375","id":1026812901,"node_id":"IC_kwDOACaFSM49M-vl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T12:56:15Z","updated_at":"2022-02-01T12:56:15Z","author_association":"CONTRIBUTOR","body":"I am still seeing ExternalCompaction_2_IT fail on the latest changes, even with the fix for #2362. Although, I am not sure it is the same problem.\r\n<pre>\r\n2022-02-01T07:44:41,450 [compaction.FileCompactor] ERROR: File file:/home/mike/workspace/accumulo/test/target/mini-tests/org.apache.accumulo.test.compaction.ExternalCompacti\r\non_2_IT_testDeleteTableCancelsExternalCompaction/accumulo/tables/+r/root_tablet/00000_00000.rf does not exist\r\njava.io.FileNotFoundException: File file:/home/mike/workspace/accumulo/test/target/mini-tests/org.apache.accumulo.test.compaction.ExternalCompaction_2_IT_testDeleteTableCancelsExternalCompaction/accumulo/tables/+r/root_tablet/00000_00000.rf does not exist\r\n        at org.apache.hadoop.fs.RawLocalFileSystem.deprecatedGetFileStatus(RawLocalFileSystem.java:668) ~[hadoop-client-api-3.3.0.jar:?]\r\n        at org.apache.hadoop.fs.RawLocalFileSystem.getFileLinkStatusInternal(RawLocalFileSystem.java:989) ~[hadoop-client-api-3.3.0.jar:?]\r\n        at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:658) ~[hadoop-client-api-3.3.0.jar:?]\r\n        at org.apache.hadoop.fs.RawLocalFileSystem.open(RawLocalFileSystem.java:214) ~[hadoop-client-api-3.3.0.jar:?]\r\n        at org.apache.hadoop.fs.FileSystem.open(FileSystem.java:945) ~[hadoop-client-api-3.3.0.jar:?]\r\n        at org.apache.accumulo.core.file.blockfile.impl.CachableBlockFile$CachableBuilder.lambda$fsPath$0(CachableBlockFile.java:87) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.blockfile.impl.CachableBlockFile$Reader.getBCFile(CachableBlockFile.java:163) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.blockfile.impl.CachableBlockFile$Reader.getMetaBlock(CachableBlockFile.java:392) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.rfile.RFile$Reader.<init>(RFile.java:1164) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.rfile.RFile$Reader.<init>(RFile.java:1256) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.rfile.RFileOperations.getReader(RFileOperations.java:55) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.rfile.RFileOperations.openReader(RFileOperations.java:70) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.DispatchingFileFactory.openReader(DispatchingFileFactory.java:85) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.file.FileOperations$ReaderBuilder.build(FileOperations.java:447) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.compaction.FileCompactor.openMapDataFiles(FileCompactor.java:298) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.compaction.FileCompactor.compactLocalityGroup(FileCompactor.java:344) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.compaction.FileCompactor.call(FileCompactor.java:224) [accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.tablet.CompactableUtils.compact(CompactableUtils.java:560) [accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.tablet.CompactableImpl.compact(CompactableImpl.java:1260) [accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.tserver.compactions.InternalCompactionExecutor$InternalJob.run(InternalCompactionExecutor.java:96) [accumulo-tserver-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.lang.Thread.run(Thread.java:829) [?:?]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026812901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026983574","html_url":"https://github.com/apache/accumulo/issues/2348#issuecomment-1026983574","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2348","id":1026983574,"node_id":"IC_kwDOACaFSM49NoaW","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T15:41:10Z","updated_at":"2022-02-01T15:41:10Z","author_association":"MEMBER","body":"This was likely caused by us adding new configuration properties for compaction and other features. It seems fixed for now. It will be fixed further with the ongoing efforts to consolidate the configuration properties in ZK into fewer nodes (will probably be broken in the other direction, too few watches found, but we will address that when the time comes).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026983574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026998312","html_url":"https://github.com/apache/accumulo/pull/2446#issuecomment-1026998312","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2446","id":1026998312,"node_id":"IC_kwDOACaFSM49NsAo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T15:55:55Z","updated_at":"2022-02-01T15:55:55Z","author_association":"CONTRIBUTOR","body":"I am working on similar changes but wanted to get this one in separately just to get eyes on it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1026998312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027116172","html_url":"https://github.com/apache/accumulo/pull/2448#issuecomment-1027116172","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2448","id":1027116172,"node_id":"IC_kwDOACaFSM49OIyM","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T17:44:11Z","updated_at":"2022-02-01T17:44:11Z","author_association":"CONTRIBUTOR","body":"It looks like the test should be creating data that has a TTL such that some data would not be subject to age off. When the age off iterator is run, some data should remain. If this functions as expected, the output would not be an empty map, but the surviving entries.  If the test is passing with an empty map, that would suggest that the test is not testing what was intended.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027116172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027121008","html_url":"https://github.com/apache/accumulo/pull/2448#issuecomment-1027121008","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2448","id":1027121008,"node_id":"IC_kwDOACaFSM49OJ9w","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T17:49:58Z","updated_at":"2022-02-01T17:49:58Z","author_association":"MEMBER","body":"> It looks like the test should be creating data that has a TTL such that some data would not be subject to age off. When the age off iterator is run, some data should remain. If this functions as expected, the output would not be an empty map, but the surviving entries. If the test is passing with an empty map, that would suggest that the test is not testing what was intended.\r\n\r\nAs far as I can tell, `createOutputData()` returns an empty TreeMap. The test does pass with my changes i.e., with an empty map. Maybe this PR should be closed in place of an issue if that is the case.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027121008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027211091","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1027211091","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1027211091,"node_id":"IC_kwDOACaFSM49Of9T","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T19:32:28Z","updated_at":"2022-02-01T19:32:28Z","author_association":"CONTRIBUTOR","body":"In my rerun of the ITs, only one test class failed, ConcurrentDeleteTableIT. I traced it through and it is failing because of this change. In testConcurrentFateOpsWithDelete there is an expectation that the table is deleted at the end of the test, because a delete operation is executed as part of the test. The table is not deleted, because the delete operation is cancelled due to a subsequent merge (or other type) of operation. The right way to handle this is to *not* cancel certain types of operations in DistributedReadWriteLock.WriteLock.tryLock(), but I don't have access to the FateOperation type at this level. For example, we would want a MERGE to cancel any COMPACTION, but not a DELETE. It does not appear that the FateOperation type is encoded in the data stored in ZK. If we could pass the TableOperation to Utils.getLock() then we could append/prepend the TableOperation to the lockData.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027211091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027223820","html_url":"https://github.com/apache/accumulo/pull/2448#issuecomment-1027223820","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2448","id":1027223820,"node_id":"IC_kwDOACaFSM49OjEM","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T19:48:38Z","updated_at":"2022-02-01T19:48:38Z","author_association":"MEMBER","body":"> If the test is passing with an empty map, that would suggest that the test is not testing what was intended.\r\n\r\nI created an issue to track this bug: #2449 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027223820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027226504","html_url":"https://github.com/apache/accumulo/issues/2450#issuecomment-1027226504","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2450","id":1027226504,"node_id":"IC_kwDOACaFSM49OjuI","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T19:52:00Z","updated_at":"2022-02-01T19:52:00Z","author_association":"CONTRIBUTOR","body":"This is due to missing native maps\r\n<pre>\r\n2022-02-01T14:42:51,375 [memory.NativeMapLoader] ERROR: FATAL! Accumulo native libraries were requested but could not be be loaded. Either set 'tserver.memory.maps.native.enabled' to false in accumulo.properties or make sure native libraries are created in directories set by the JVM system property 'accumulo.native.lib.path' in accumulo-env.sh!\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027226504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027290175","html_url":"https://github.com/apache/accumulo/pull/2451#issuecomment-1027290175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2451","id":1027290175,"node_id":"IC_kwDOACaFSM49OzQ_","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T21:09:38Z","updated_at":"2022-02-01T21:09:38Z","author_association":"CONTRIBUTOR","body":"I actually think this may have already found a bug in `AuthenticationTokenIdentifier` that is being exposed by the now failing test `SaslDigestCallbackHandlerTest`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027290175/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027365421","html_url":"https://github.com/apache/accumulo/issues/2450#issuecomment-1027365421","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2450","id":1027365421,"node_id":"IC_kwDOACaFSM49PFot","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T22:52:27Z","updated_at":"2022-02-01T22:52:27Z","author_association":"MEMBER","body":"It looks like maybe this escaped notice because it was frequently run in a reused JVM where the native maps had been loaded by another test. In any case, I know what's wrong and will have a fix soon.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027365421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027367812","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1027367812","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1027367812,"node_id":"IC_kwDOACaFSM49PGOE","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T22:56:33Z","updated_at":"2022-02-01T22:56:50Z","author_association":"MEMBER","body":"This already seems like it's getting pretty complicated. Is it even safe, in the general case, to fail fate operations this way? I feel like a human should probably be interactively responsible for cancelling fate operations in order to unblock their preferred one, so they can accept the risks directly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027367812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027399743","html_url":"https://github.com/apache/accumulo/pull/2453#issuecomment-1027399743","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2453","id":1027399743,"node_id":"IC_kwDOACaFSM49POA_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T23:46:57Z","updated_at":"2022-02-01T23:46:57Z","author_association":"MEMBER","body":"@milleruntime already mentioned that this was redundant in #2425, but I thought leaving it best preserved existing behavior. It turns out we don't really need to preserve existing behavior, because if somebody tries to use NativeMap without loading the library, it will just throw an UnsatisfiedLinkError, which is totally fine.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027399743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027647374","html_url":"https://github.com/apache/accumulo/pull/2455#issuecomment-1027647374","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2455","id":1027647374,"node_id":"IC_kwDOACaFSM49QKeO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T07:11:57Z","updated_at":"2022-02-02T07:11:57Z","author_association":"MEMBER","body":"Also, in newer versions of Thrift, the private field we were trying to access via reflection isn't even named the same as what we were looking for. So, this fixes that bug.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027647374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027889508","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1027889508","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1027889508,"node_id":"IC_kwDOACaFSM49RFlk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T12:24:34Z","updated_at":"2022-02-02T12:24:34Z","author_association":"CONTRIBUTOR","body":"I think I have found the issue with ConcurrentDeleteTableIT and I think it exposed something  I had not accounted for. I'd like to track it down and fix it and then we can judge whether or not this approach may not be the right one. Maybe a different approach would be to just log the blockers for a FaTE transaction so that the user can take some action. That approach will likely reuse some of the code from this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027889508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027910414","html_url":"https://github.com/apache/accumulo/pull/2451#issuecomment-1027910414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2451","id":1027910414,"node_id":"IC_kwDOACaFSM49RKsO","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T12:51:26Z","updated_at":"2022-02-02T12:51:26Z","author_association":"CONTRIBUTOR","body":"> I was thinking that we might want to make `AbstractId.toString` final, so it always returns `.canonical()`, so that it's contractually consistent, just because there's lots of places where it's logged/concatenated/etc. with other strings, and it's assuming that it's the same as `.canonical()`, but that's not necessarily guaranteed.\r\n\r\nThat is a good idea. It will help with the other *Id types as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027910414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027949416","html_url":"https://github.com/apache/accumulo/pull/2443#issuecomment-1027949416","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2443","id":1027949416,"node_id":"IC_kwDOACaFSM49RUNo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T13:37:51Z","updated_at":"2022-02-02T13:37:51Z","author_association":"CONTRIBUTOR","body":"> I think you've already moved any old tests to the new M/R framework, but it's possible there could be some that were missed.\r\n\r\nI moved `MapReduceIT` in this PR. There are 2 other ITs that had tests that I dropped: `SslIT` and `SslWithClientAuthIT`. I made an attempt to migrate them to `MapReduceIT` since they were just calling the `runTest` method in that IT. But I couldn't get the SSL to work with MapReduceIT and wasn't sure if it was worth the effort.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1027949416/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1028071271","html_url":"https://github.com/apache/accumulo/pull/2454#issuecomment-1028071271","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2454","id":1028071271,"node_id":"IC_kwDOACaFSM49Rx9n","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T15:41:38Z","updated_at":"2022-02-02T15:41:38Z","author_association":"MEMBER","body":"> Is there a reason why the default for port search can't be set to true? I am always setting it to true during testing and since its a new, we aren't breaking any current clusters.\r\n> \r\n> This fixes #2375\r\n\r\nIn general, we want it true for testing, but I think for production deployments, it's usually better to have fixed ports. It's better for firewall management / network administration. Not having it on by default is consistent with our other server types also having it off by default.\r\n\r\nI'm not so sure #2375 is entirely fixed by this. I keep seeing other issues with those, even after this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1028071271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1028228525","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-1028228525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":1028228525,"node_id":"IC_kwDOACaFSM49SYWt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T18:25:12Z","updated_at":"2022-02-02T18:25:12Z","author_association":"CONTRIBUTOR","body":"So, there are two issues currently with this:\r\n\r\n  1. The current logic in DistributedReadWriteLock.WriteLock.tryLock doesn't handle multiple concurrent fate transactions for the same table. I believe that I fixed the logic in the method, but it's still possible for multiple fate transactions to be started on a table and all of them will get cancelled except the last one.\r\n\r\n  2. Errors that occur due to the fate transactions being cancelled/interrupted are not always making it back to the client, leaving the client in a state where its waiting indefinitely.\r\n  \r\n  I've spent enough time on this trying to get it to work. I'm inclined to close this without merging it at this point.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1028228525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1028556457","html_url":"https://github.com/apache/accumulo/pull/2458#issuecomment-1028556457","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2458","id":1028556457,"node_id":"IC_kwDOACaFSM49Toap","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T03:00:46Z","updated_at":"2022-02-03T03:00:46Z","author_association":"MEMBER","body":"Tested single node with uno and it works fine.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1028556457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029090289","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-1029090289","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":1029090289,"node_id":"IC_kwDOACaFSM49Vqvx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T15:12:46Z","updated_at":"2022-02-03T15:12:46Z","author_association":"CONTRIBUTOR","body":"I'm thinking about closing #2329 and attacking this in a different way. Talking with some users that have this type of issue it would be useful to:\r\n\r\n  1. Print the list of blockers for a FaTE transaction in the manager log when the transaction is first created.\r\n  2. Allow a user to delete/cancel a FaTE transaction without taking down the manager.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029090289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029102790","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-1029102790","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":1029102790,"node_id":"IC_kwDOACaFSM49VtzG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T15:24:32Z","updated_at":"2022-02-03T15:24:32Z","author_association":"CONTRIBUTOR","body":"@keith-turner @ctubbsii  - is there a reason that the Shell fate commands modify ZK directly instead of making modifications via the Manager?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029102790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029144039","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-1029144039","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":1029144039,"node_id":"IC_kwDOACaFSM49V33n","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T16:05:22Z","updated_at":"2022-02-03T16:05:22Z","author_association":"MEMBER","body":"> @keith-turner @ctubbsii - is there a reason that the Shell fate commands modify ZK directly instead of making modifications via the Manager?\r\n\r\nIt's probably because the idea is that when you are doing \"surgery\" on fate, you're probably doing it when there's a problem, in which case you probably don't want the Manager running and executing fate transactions. At least, I think that was the motivation for having the separate FateAdmin utility, whose functions were rolled into the Shell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029144039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029215113","html_url":"https://github.com/apache/accumulo/issues/2459#issuecomment-1029215113","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2459","id":1029215113,"node_id":"IC_kwDOACaFSM49WJOJ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T17:16:37Z","updated_at":"2022-02-03T17:16:37Z","author_association":"CONTRIBUTOR","body":"Are you seeing connections hang somewhere? Which server type (tserver, gc, manager) are you seeing this affect?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029215113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029222180","html_url":"https://github.com/apache/accumulo/issues/2459#issuecomment-1029222180","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2459","id":1029222180,"node_id":"IC_kwDOACaFSM49WK8k","user":{"login":"FineAndDandy","id":7751180,"node_id":"MDQ6VXNlcjc3NTExODA=","avatar_url":"https://avatars.githubusercontent.com/u/7751180?v=4","gravatar_id":"","url":"https://api.github.com/users/FineAndDandy","html_url":"https://github.com/FineAndDandy","followers_url":"https://api.github.com/users/FineAndDandy/followers","following_url":"https://api.github.com/users/FineAndDandy/following{/other_user}","gists_url":"https://api.github.com/users/FineAndDandy/gists{/gist_id}","starred_url":"https://api.github.com/users/FineAndDandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FineAndDandy/subscriptions","organizations_url":"https://api.github.com/users/FineAndDandy/orgs","repos_url":"https://api.github.com/users/FineAndDandy/repos","events_url":"https://api.github.com/users/FineAndDandy/events{/privacy}","received_events_url":"https://api.github.com/users/FineAndDandy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T17:23:26Z","updated_at":"2022-02-03T17:23:26Z","author_association":"CONTRIBUTOR","body":"I witnessed this while calling TabletServerBatchWriter.close() trying to write to a tserver that had gone into full GC and was later killed. The underlying call to socket.connect() hung indefinitely. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029222180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029244252","html_url":"https://github.com/apache/accumulo/pull/2457#issuecomment-1029244252","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2457","id":1029244252,"node_id":"IC_kwDOACaFSM49WQVc","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T17:48:56Z","updated_at":"2022-02-03T17:48:56Z","author_association":"CONTRIBUTOR","body":"I think I found another bug. Also, the test `DelegationTokenImplTest.testSerialization()` isn't actually testing anything so I am going to rewrite it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029244252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029260694","html_url":"https://github.com/apache/accumulo/pull/2458#issuecomment-1029260694","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2458","id":1029260694,"node_id":"IC_kwDOACaFSM49WUWW","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T18:07:31Z","updated_at":"2022-02-03T18:07:31Z","author_association":"MEMBER","body":"All ITs passed also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029260694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029267056","html_url":"https://github.com/apache/accumulo/pull/2457#issuecomment-1029267056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2457","id":1029267056,"node_id":"IC_kwDOACaFSM49WV5w","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T18:15:17Z","updated_at":"2022-02-03T18:15:17Z","author_association":"CONTRIBUTOR","body":"> Also, the test `DelegationTokenImplTest.testSerialization()` isn't actually testing anything so I am going to rewrite it.\r\n\r\nNevermind, the test is comparing the serialization. I was looking at code I had modified.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029267056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029310552","html_url":"https://github.com/apache/accumulo/pull/2461#issuecomment-1029310552","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2461","id":1029310552,"node_id":"IC_kwDOACaFSM49WghY","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T19:08:59Z","updated_at":"2022-02-03T19:08:59Z","author_association":"CONTRIBUTOR","body":"@FineAndDandy did you want this to go into 1.10 branch?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029310552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029315317","html_url":"https://github.com/apache/accumulo/pull/2461#issuecomment-1029315317","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2461","id":1029315317,"node_id":"IC_kwDOACaFSM49Whr1","user":{"login":"FineAndDandy","id":7751180,"node_id":"MDQ6VXNlcjc3NTExODA=","avatar_url":"https://avatars.githubusercontent.com/u/7751180?v=4","gravatar_id":"","url":"https://api.github.com/users/FineAndDandy","html_url":"https://github.com/FineAndDandy","followers_url":"https://api.github.com/users/FineAndDandy/followers","following_url":"https://api.github.com/users/FineAndDandy/following{/other_user}","gists_url":"https://api.github.com/users/FineAndDandy/gists{/gist_id}","starred_url":"https://api.github.com/users/FineAndDandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FineAndDandy/subscriptions","organizations_url":"https://api.github.com/users/FineAndDandy/orgs","repos_url":"https://api.github.com/users/FineAndDandy/repos","events_url":"https://api.github.com/users/FineAndDandy/events{/privacy}","received_events_url":"https://api.github.com/users/FineAndDandy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T19:15:13Z","updated_at":"2022-02-03T19:15:13Z","author_association":"CONTRIBUTOR","body":"The code isn't compatible. I can do a separate PR for 1.10\n\nOn Thu, Feb 3, 2022 at 2:09 PM Mike Miller ***@***.***> wrote:\n\n> @FineAndDandy <https://github.com/FineAndDandy> did you want this to go\n> into 1.10 branch?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/pull/2461#issuecomment-1029310552>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AB3EMDDO5A6CXNIRBZRLRGDUZLHFPANCNFSM5NPVKG2Q>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n> You are receiving this because you were mentioned.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029315317/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029358425","html_url":"https://github.com/apache/accumulo/pull/2462#issuecomment-1029358425","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2462","id":1029358425,"node_id":"IC_kwDOACaFSM49WsNZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T20:09:58Z","updated_at":"2022-02-03T20:12:37Z","author_association":"CONTRIBUTOR","body":"> I'm not really sure I understand the difference between the NEW state that already exists and your new SUBMITTED state.\r\n\r\nPrior to this change, when `Fate.startTransaction` was called to allocate a transaction id its state would be `NEW`. Then, when `Fate.seedTransaction()` was called to associate the Repo with the transaction id, the state would be changed to `IN_PROGRESS`. `Fate.startTransaction` would just serialize the Repo into ZooKeeper, it didn't actually run it.\r\n\r\nWith this change, there is an intermediate state (SUBMITTED).\r\n\r\nHere's an excerpt from FateIT:\r\n\r\n```\r\n      long txid = fate.startTransaction();\r\n      assertEquals(TStatus.NEW, getTxStatus(zk, txid));\r\n      fate.seedTransaction(txid, new TestOperation(NS, TID), true);\r\n      assertEquals(TStatus.SUBMITTED, getTxStatus(zk, txid));\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029358425/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029416725","html_url":"https://github.com/apache/accumulo/pull/2462#issuecomment-1029416725","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2462","id":1029416725,"node_id":"IC_kwDOACaFSM49W6cV","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T21:25:50Z","updated_at":"2022-02-03T21:25:50Z","author_association":"CONTRIBUTOR","body":"I took a quick look and confirmed that the metrics look okay - the TX state is added to the expected states.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029416725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029859473","html_url":"https://github.com/apache/accumulo/pull/2457#issuecomment-1029859473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2457","id":1029859473,"node_id":"IC_kwDOACaFSM49YmiR","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-04T10:50:18Z","updated_at":"2022-02-04T10:50:18Z","author_association":"CONTRIBUTOR","body":"> However, I wasn't able to determine from these changes what the actual bug was that you were trying to fix. This seemed mostly about cleaning up some complexity, and less about fixing a bug. Which part fixed the bug you saw?\r\n\r\nThese changes came from testing of #2451. One of the tests was failing due to instance Id being null. https://github.com/apache/accumulo/runs/5036934940?check_suite_focus=true I think it was a minor bug since it doesn't really seem like it was used for anything other than setting the name of the token. But it was hard to tell in the code so I ended up cleaning up the code just to be sure.\r\n\r\nSince I am not sure how long that test job will stick around, here is the test failure from #2451:\r\n<pre>\r\n[ERROR] Errors: \r\n[ERROR]   SaslDigestCallbackHandlerTest.testTokenAndIdentifierSerialization:115 » NullPointer\r\n[ERROR]   SaslDigestCallbackHandlerTest.testTokenSerialization:99 » NullPointer Instance...\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029859473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029889842","html_url":"https://github.com/apache/accumulo/pull/2457#issuecomment-1029889842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2457","id":1029889842,"node_id":"IC_kwDOACaFSM49Yt8y","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-04T11:10:23Z","updated_at":"2022-02-04T11:10:23Z","author_association":"CONTRIBUTOR","body":"> * I'm okay with merging if all the affected ITs are passing\r\n\r\nThe 4x copies of `TokenFileIT` are passing. Any other ITs that you can think of that may use these classes?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1029889842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]