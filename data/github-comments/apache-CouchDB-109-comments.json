[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1141334818","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1141334818","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1141334818,"node_id":"IC_kwDOAAMmUc5EB2Mi","user":{"login":"CanRau","id":5196971,"node_id":"MDQ6VXNlcjUxOTY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/5196971?v=4","gravatar_id":"","url":"https://api.github.com/users/CanRau","html_url":"https://github.com/CanRau","followers_url":"https://api.github.com/users/CanRau/followers","following_url":"https://api.github.com/users/CanRau/following{/other_user}","gists_url":"https://api.github.com/users/CanRau/gists{/gist_id}","starred_url":"https://api.github.com/users/CanRau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CanRau/subscriptions","organizations_url":"https://api.github.com/users/CanRau/orgs","repos_url":"https://api.github.com/users/CanRau/repos","events_url":"https://api.github.com/users/CanRau/events{/privacy}","received_events_url":"https://api.github.com/users/CanRau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-30T16:34:39Z","updated_at":"2022-05-30T16:34:39Z","author_association":"NONE","body":"Would also love to get CouchDB going using IPv6 to be able to deploy a cluster on [Fly.io](https://fly.io/)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1141334818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1141456589","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1141456589","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1141456589,"node_id":"IC_kwDOAAMmUc5ECT7N","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-30T20:20:46Z","updated_at":"2022-05-30T20:20:46Z","author_association":"CONTRIBUTOR","body":"works fine here on FreeBSD but that shouldn't matter. If you find a working config for fly, let us know.\r\n\r\nfor each node, just have couchdb@c01.fqdn ... couchdb@c02.fqdn etc for name field. the rest\r\nof your ini & args files should be the same as usual.\r\n\r\n# `vm.args` snippet\r\n\r\n```\r\n-name couchdb@c01.fqdn\r\n-setcookie ...\r\n-proto_dist inet6_tcp\r\n-kernel inet_dist_listen_min 4370\r\n-kernel inet_dist_listen_max 4400\r\n...\r\n```\r\n\r\n# `local.ini` snippet\r\n\r\n```\r\n[chttpd]\r\nport = 5984\r\nbind_address = ::\r\n...\r\n```\r\n\r\nconsider changing the bind_address to something less open once you know what you're doing.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1141456589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1141611546","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1141611546","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1141611546,"node_id":"IC_kwDOAAMmUc5EC5wa","user":{"login":"CanRau","id":5196971,"node_id":"MDQ6VXNlcjUxOTY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/5196971?v=4","gravatar_id":"","url":"https://api.github.com/users/CanRau","html_url":"https://github.com/CanRau","followers_url":"https://api.github.com/users/CanRau/followers","following_url":"https://api.github.com/users/CanRau/following{/other_user}","gists_url":"https://api.github.com/users/CanRau/gists{/gist_id}","starred_url":"https://api.github.com/users/CanRau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CanRau/subscriptions","organizations_url":"https://api.github.com/users/CanRau/orgs","repos_url":"https://api.github.com/users/CanRau/repos","events_url":"https://api.github.com/users/CanRau/events{/privacy}","received_events_url":"https://api.github.com/users/CanRau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T02:44:19Z","updated_at":"2022-05-31T05:28:32Z","author_association":"NONE","body":"Trying that I get\r\n\r\n```\r\n{conn_failed,{error,nxdomain}}\r\n```\r\n\r\nwhen using `a899cafd.vm.crcouchdb1.internal` as remote host, this is [fly's private networking](https://fly.io/docs/reference/private-networking/#fly-internal-addresses)\r\nand `::` as bind address.\r\n\r\nI'm also trying to debug with the Fly folks over at [community.fly.io](https://community.fly.io/t/cant-get-a-couchdb-cluster-working-connection-closed/5373/8), so far having issues querying the instances IPv6 to try that instead of the hostname as mentioned over there.\r\n\r\nOkay so resolved the IP\r\n\r\ntrying `fdaa:0:328d:a7b:7d16:1:f46:2` as remote results in `{url_parsing_failed{error,invalid_uri}}`\r\n\r\nwhereas `[fdaa:0:328d:a7b:7d16:1:f46:2]` returns the same as before `{conn_failed,{error,nxdomain}}`\r\n\r\nall using the UI, haven't tried via API so far\r\n\r\n**UPDATE** seems like same errors happen using the API","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1141611546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1142236302","html_url":"https://github.com/apache/couchdb/pull/4041#issuecomment-1142236302","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4041","id":1142236302,"node_id":"IC_kwDOAAMmUc5EFSSO","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T14:48:14Z","updated_at":"2022-05-31T15:33:16Z","author_association":"CONTRIBUTOR","body":"I've updated the request with things [discussed](https://couchdb.slack.com/archives/C01TBE2J197/p1653982865483389?thread_ts=1653484954.363249&cid=C01TBE2J197) today. It is now possible to specify nested (& unnested) JSON paths in role_claim_path, like `roles_claim_path = foo.bar\\.zonk.baz\\.buu.baa.baa\\.bee.roles` which is the equivalent of\r\n```json\r\n\"foo\": {\r\n  \"bar.zonk\": {\r\n    \"baz.buu\": {\r\n      \"baa\": {\r\n        \"baa.bee\": {\r\n          \"roles\": [\r\n            \"my_nested_role_1\",\r\n            \"my_nested_role_2\"\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1142236302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1143873074","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1143873074","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1143873074,"node_id":"IC_kwDOAAMmUc5ELh4y","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-01T16:54:08Z","updated_at":"2022-06-01T16:54:08Z","author_association":"CONTRIBUTOR","body":"@CanRau appreciate this is frustrating but I think you should start off ensuring the erlang layer works first, getting distributed erlang working, and posting more of your config/setup, etc.\r\n\r\nI've just checked and a bare ipv6 e.g. `fca2:...::3` works as well as `::` for bind_address, no brackets required. However  this isn't important for the clustering part of couchdb, the `-name couchdb@a899cafd.vm.crcouchdb1.internal` bit is.\r\n\r\nthe nxdomain error shows something is trying to resolve the domain and is being told NO. This isn't a couchdb problem, so I suggest you shell into the container, and start a shell inside to check DNS resolution. something like this:\r\n\r\n```\r\n$ dig AAAA a899cafd.vm.crcouchdb1.internal\r\n$ dig A    a899cafd.vm.crcouchdb1.internal\r\n$ erl\r\nErlang/OTP 25 [erts-13.0] [source] [64-bit] [smp:32:32] [ds:32:32:10] [async-threads:1] [jit] [sharing-preserving]\r\n\r\nEshell V13.0  (abort with ^G)\r\n1> net:gethostname().\r\n{ok,\"wintermute.skunkwerks.at\"}\r\n2> inet:getaddr(\"localhost\", inet6).\r\n{ok,{0,0,0,0,0,0,0,1}}\r\n3> inet:getaddr(\"a899cafd.vm.crcouchdb1.internal\", inet6).\r\n{error,nxdomain}\r\n```\r\n\r\nI'm hoping 3 has a better outcome for you.\r\n\r\nOnce you have that working, set up a pair of distributed erlang nodes using the same lines from `vm.args` above, and see if that works. If not, it's a networking issue at fly.\r\n\r\nOnce that's working, you can come back to the couchdb side and see how you get on.\r\n \r\nYou may find some more inspiration from my older couchdb 2.3 (but still relevant) notes-to-self the first time I set this up, https://hackmd.io/@dch/HJXCjUpeV its just a walk-through from the excellent couch docs anyway.\r\n\r\nI hope this works, having couchdb at fly would be a nice improvement.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1143873074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1144113164","html_url":"https://github.com/apache/couchdb/issues/1472#issuecomment-1144113164","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1472","id":1144113164,"node_id":"IC_kwDOAAMmUc5EMcgM","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-01T20:40:38Z","updated_at":"2022-06-01T20:40:38Z","author_association":"CONTRIBUTOR","body":"It appears that https://github.com/apache/couchdb/pull/3990 fixes this issue, so closing as resolved.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1144113164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1145629771","html_url":"https://github.com/apache/couchdb/issues/2054#issuecomment-1145629771","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2054","id":1145629771,"node_id":"IC_kwDOAAMmUc5ESOxL","user":{"login":"karelfridrich","id":10651687,"node_id":"MDQ6VXNlcjEwNjUxNjg3","avatar_url":"https://avatars.githubusercontent.com/u/10651687?v=4","gravatar_id":"","url":"https://api.github.com/users/karelfridrich","html_url":"https://github.com/karelfridrich","followers_url":"https://api.github.com/users/karelfridrich/followers","following_url":"https://api.github.com/users/karelfridrich/following{/other_user}","gists_url":"https://api.github.com/users/karelfridrich/gists{/gist_id}","starred_url":"https://api.github.com/users/karelfridrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karelfridrich/subscriptions","organizations_url":"https://api.github.com/users/karelfridrich/orgs","repos_url":"https://api.github.com/users/karelfridrich/repos","events_url":"https://api.github.com/users/karelfridrich/events{/privacy}","received_events_url":"https://api.github.com/users/karelfridrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T06:26:53Z","updated_at":"2022-06-03T06:26:53Z","author_association":"NONE","body":"I got stuck on this too. Debian 11, Couch 3.2.2. Worked like a charm on 2.2.*. Ports were set up correctly, but there was another option I needed to change in vm.args:\r\n\r\n-kernel inet_dist_use_interface {127,0,0,1}\r\nto\r\n-kernel inet_dist_use_interface {0,0,0,0}\r\n\r\nOtherwise the port 9100 was opened only on localhost. I missed this option probably because of the odd IP format.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1145629771/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1146090017","html_url":"https://github.com/apache/couchdb/pull/4033#issuecomment-1146090017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4033","id":1146090017,"node_id":"IC_kwDOAAMmUc5ET_Ih","user":{"login":"noahshaw11","id":47468872,"node_id":"MDQ6VXNlcjQ3NDY4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/47468872?v=4","gravatar_id":"","url":"https://api.github.com/users/noahshaw11","html_url":"https://github.com/noahshaw11","followers_url":"https://api.github.com/users/noahshaw11/followers","following_url":"https://api.github.com/users/noahshaw11/following{/other_user}","gists_url":"https://api.github.com/users/noahshaw11/gists{/gist_id}","starred_url":"https://api.github.com/users/noahshaw11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noahshaw11/subscriptions","organizations_url":"https://api.github.com/users/noahshaw11/orgs","repos_url":"https://api.github.com/users/noahshaw11/repos","events_url":"https://api.github.com/users/noahshaw11/events{/privacy}","received_events_url":"https://api.github.com/users/noahshaw11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T15:42:29Z","updated_at":"2022-06-03T15:48:26Z","author_association":"CONTRIBUTOR","body":"I also want to clarify the need for a `print_report` function on top of the existing `print_table` function. If the `print_table` function is used, the following is printed:\r\n\r\n```\r\n> couch_mrview_debug:view_report().\r\n|                       info                       |                                                                                           signature\r\n|                     signature                    |                                                                    39b98489b79419503499bbee402040c7\r\n|                       info                       |                                                                                             db_name\r\n|                      db_name                     |                                                            shards/00000000-ffffffff/dbv1.1654270700\r\n|                       info                       |                                                                                            idx_name\r\n|                      idx_name                    |                                                                                    _design/dbv1ddoc\r\n|                       info                       |                                                                                         reduce_funs\r\n|                    reduce_funs                   |\r\n|                       info                       |                                                                                                 def\r\n|                        def                       |                                                                     function(doc){emit(doc.id, 1);}\r\n|                       info                       |                                                                                          update_seq\r\n|                     update_seq                   |                                                                                                   3\r\n|                       info                       |                                                                                           purge_seq\r\n|                     purge_seq                    |                                                                                                   0\r\n|                       info                       |                                                                                      view_file_path\r\n|                   view_file_path                 |1/data/.shards/00000000-ffffffff/dbv1.1654270700_design/mrview/39b98489b79419503499bbee402040c7.view\r\n|                       info                       |                                                                                     pending_updates\r\n|                  pending_updates                 |                                                                                                   0\r\n[ok,ok,ok,ok,ok,ok,ok,ok,ok]\r\n```\r\n\r\nOn the other hand, if `print_report` is used, the following is printed:\r\n\r\n```\r\n> couch_mrview_debug:view_report().\r\n|                       info                       |                                                                                               value\r\n|                     signature                    |                                                                    39b98489b79419503499bbee402040c7\r\n|                      db_name                     |                                                            shards/00000000-ffffffff/dbv1.1654270218\r\n|                      idx_name                    |                                                                                    _design/dbv1ddoc\r\n|                    reduce_funs                   |\r\n|                        def                       |                                                                     function(doc){emit(doc.id, 1);}\r\n|                     update_seq                   |                                                                                                   3\r\n|                     purge_seq                    |                                                                                                   0\r\n|                   view_file_path                 |1/data/.shards/00000000-ffffffff/dbv1.1654270218_design/mrview/39b98489b79419503499bbee402040c7.view\r\n|                  pending_updates                 |                                                                                                   0\r\n[ok,ok,ok,ok,ok,ok,ok,ok,ok]\r\n```\r\n\r\nAlso, I think it would be a good idea to truncate the `view_file_path` in some form.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1146090017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1146610888","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1146610888","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1146610888,"node_id":"IC_kwDOAAMmUc5EV-TI","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-04T13:27:09Z","updated_at":"2022-06-04T13:32:12Z","author_association":"CONTRIBUTOR","body":"I can confirm this on 11.6.5.\r\nSome logging infos:\r\n```\r\n[notice] 2022-06-04T13:31:00.079888Z couchdb@localhost <0.346.0> 44adca856a 127.0.0.1:5984 127.0.0.1 admin GET /verifytestdb 200 ok 6\r\n[notice] 2022-06-04T13:31:00.089288Z couchdb@localhost <0.347.0> 2b60dcc357 127.0.0.1:5984 127.0.0.1 admin GET /verifytestdb_replicate 404 ok 10\r\n[notice] 2022-06-04T13:31:00.130858Z couchdb@localhost <0.346.0> cf9ba3255d 127.0.0.1:5984 127.0.0.1 admin DELETE /verifytestdb 200 ok 31\r\n[notice] 2022-06-04T13:31:00.204903Z couchdb@localhost <0.346.0> 0329a4bee4 127.0.0.1:5984 127.0.0.1 admin PUT /verifytestdb 201 ok 63\r\n[notice] 2022-06-04T13:31:00.249485Z couchdb@localhost <0.345.0> f2e454608e 127.0.0.1:5984 127.0.0.1 admin PUT /verifytestdb/test_doc_1 201 ok 30\r\n[notice] 2022-06-04T13:31:00.273649Z couchdb@localhost <0.347.0> 45dcfc8092 127.0.0.1:5984 127.0.0.1 admin PUT /verifytestdb/test_doc_1 201 ok 10\r\n[notice] 2022-06-04T13:31:00.299497Z couchdb@localhost <0.345.0> 74de5172cb 127.0.0.1:5984 127.0.0.1 admin DELETE /verifytestdb/test_doc_1?rev=2-d588d3e93ee155c5afffdf0247a2c5ef 200 ok 11\r\n[notice] 2022-06-04T13:31:00.353344Z couchdb@localhost <0.347.0> e46decdacd 127.0.0.1:5984 127.0.0.1 admin PUT /verifytestdb/test_doc_10 201 ok 32\r\n[notice] 2022-06-04T13:31:00.370713Z couchdb@localhost <0.345.0> 3b34fe17fd 127.0.0.1:5984 127.0.0.1 admin PUT /verifytestdb/test_doc_20 201 ok 41\r\n[notice] 2022-06-04T13:31:00.371599Z couchdb@localhost <0.988.0> cf4073f1df 127.0.0.1:5984 127.0.0.1 admin PUT /verifytestdb/test_doc_30 201 ok 32\r\n[error] 2022-06-04T13:31:00.477076Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1120.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2022-06-04T13:31:00.477068Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1120.0> died normal\r\n[error] 2022-06-04T13:31:00.504189Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1129.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2022-06-04T13:31:00.504181Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1129.0> died normal\r\n[info] 2022-06-04T13:31:00.534774Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1132.0> died normal\r\n[error] 2022-06-04T13:31:00.534814Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1132.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2022-06-04T13:31:00.573767Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1135.0> died normal\r\n[error] 2022-06-04T13:31:00.573772Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1135.0> :: {os_process_error,{exit_status,134}}\r\n[error] 2022-06-04T13:31:00.611433Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1138.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2022-06-04T13:31:00.611564Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1138.0> died normal\r\n[error] 2022-06-04T13:31:00.667802Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1141.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2022-06-04T13:31:00.667918Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1141.0> died normal\r\n[error] 2022-06-04T13:31:00.728531Z couchdb@localhost <0.1112.0> -------- OS Process Error <0.1144.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2022-06-04T13:31:00.728620Z couchdb@localhost <0.277.0> -------- couch_proc_manager <0.1144.0> died normal\r\n```\r\n\r\n\r\nAlso the CouchDB-App is crashing on 10.13.\r\n\r\n@janl Is it possible, that the couchjs is compiled against macOS 12, so it needs it?\r\n\r\nThe minimum os version should be 10.9, as stated in the Info.plist...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1146610888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1146613402","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1146613402","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1146613402,"node_id":"IC_kwDOAAMmUc5EV-6a","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-04T13:36:07Z","updated_at":"2022-06-04T13:36:07Z","author_association":"CONTRIBUTOR","body":"To be more precise, it's the CouchDB-Mac-App, not CouchDB itself.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1146613402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1147849484","html_url":"https://github.com/apache/couchdb/issues/4049#issuecomment-1147849484","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4049","id":1147849484,"node_id":"IC_kwDOAAMmUc5EassM","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T19:53:15Z","updated_at":"2022-06-06T19:53:15Z","author_association":"CONTRIBUTOR","body":"@WhitewaterDave during the installation it attempts to create a random cookie value (to ensure the users don't accidentally connect two Erlang cluster together). During that times it reads from /dev/random, so it's possibly it blocked due to a low entropy on a new server instance\r\n\r\nSee https://github.com/apache/couchdb-pkg/pull/95 for more details on how the behavior is implemented\r\n\r\nTo avoid having to wait, trying setting your own cookie value with `COUCHDB_COOKIE=$yourownuuidvalue yum install...`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1147849484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1147903428","html_url":"https://github.com/apache/couchdb/issues/4049#issuecomment-1147903428","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4049","id":1147903428,"node_id":"IC_kwDOAAMmUc5Ea53E","user":{"login":"WhitewaterDave","id":8185773,"node_id":"MDQ6VXNlcjgxODU3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/8185773?v=4","gravatar_id":"","url":"https://api.github.com/users/WhitewaterDave","html_url":"https://github.com/WhitewaterDave","followers_url":"https://api.github.com/users/WhitewaterDave/followers","following_url":"https://api.github.com/users/WhitewaterDave/following{/other_user}","gists_url":"https://api.github.com/users/WhitewaterDave/gists{/gist_id}","starred_url":"https://api.github.com/users/WhitewaterDave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WhitewaterDave/subscriptions","organizations_url":"https://api.github.com/users/WhitewaterDave/orgs","repos_url":"https://api.github.com/users/WhitewaterDave/repos","events_url":"https://api.github.com/users/WhitewaterDave/events{/privacy}","received_events_url":"https://api.github.com/users/WhitewaterDave/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T20:40:23Z","updated_at":"2022-06-06T20:40:23Z","author_association":"NONE","body":"@[nickva](https://github.com/nickva)\r\n I think my issue is hardware. Shortly after posting this issue, one of the hard drives failed. Even if it's not, I can't continue to troubleshoot this issue until I get a replacement drive and build the drive array. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1147903428/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148006831","html_url":"https://github.com/apache/couchdb/issues/4051#issuecomment-1148006831","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4051","id":1148006831,"node_id":"IC_kwDOAAMmUc5EbTGv","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T22:44:50Z","updated_at":"2022-06-06T22:44:50Z","author_association":"CONTRIBUTOR","body":"The quick and dirty patch:\r\n\r\n```diff \r\ndiff --git a/src/couch/src/couch_util.erl b/src/couch/src/couch_util.erl\r\n--- a/src/couch/src/couch_util.erl\r\n+++ b/src/couch/src/couch_util.erl\r\n@@ -530,6 +531,17 @@ reorder_results(Keys, SortedResults) ->\r\n\r\n+% linear search is faster for small lists, length() is 0.5 ms for 100k list\r\n+reorder_results2(Keys, SortedResults, Cutoff, _DictType) when length(Keys) < Cutoff ->\r\n+    [couch_util:get_value(Key, SortedResults) || Key <- Keys];\r\n+reorder_results2(Keys, SortedResults, _Cutoff, map) ->\r\n+    Map = maps:from_list(SortedResults),\r\n+    [maps:get(Key, Map, undefined) || Key <- Keys];\r\n+reorder_results2(Keys, SortedResults, _Cutoff, dict) ->\r\n+    KeyDict = dict:from_list(SortedResults),\r\n+    [dict:fetch(Key, KeyDict) || Key <- Keys].\r\n+\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148006831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148078091","html_url":"https://github.com/apache/couchdb/issues/4049#issuecomment-1148078091","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4049","id":1148078091,"node_id":"IC_kwDOAAMmUc5EbkgL","user":{"login":"WhitewaterDave","id":8185773,"node_id":"MDQ6VXNlcjgxODU3NzM=","avatar_url":"https://avatars.githubusercontent.com/u/8185773?v=4","gravatar_id":"","url":"https://api.github.com/users/WhitewaterDave","html_url":"https://github.com/WhitewaterDave","followers_url":"https://api.github.com/users/WhitewaterDave/followers","following_url":"https://api.github.com/users/WhitewaterDave/following{/other_user}","gists_url":"https://api.github.com/users/WhitewaterDave/gists{/gist_id}","starred_url":"https://api.github.com/users/WhitewaterDave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WhitewaterDave/subscriptions","organizations_url":"https://api.github.com/users/WhitewaterDave/orgs","repos_url":"https://api.github.com/users/WhitewaterDave/repos","events_url":"https://api.github.com/users/WhitewaterDave/events{/privacy}","received_events_url":"https://api.github.com/users/WhitewaterDave/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T00:49:45Z","updated_at":"2022-06-07T00:49:45Z","author_association":"NONE","body":"@nickva \r\nAfter fixing the hardware, I had the same problem. Using your answer solved the problem. I used Python to generate the UUID and ran \r\n\r\n`sudo COUCHDB_COOKIE=ed2ed2ca-e5f9-11ec-8afd-74867aed7b98 yum install couchdb`\r\n \r\nThank you\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148078091/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148600648","html_url":"https://github.com/apache/couchdb/issues/4051#issuecomment-1148600648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4051","id":1148600648,"node_id":"IC_kwDOAAMmUc5EdkFI","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T12:29:45Z","updated_at":"2022-06-07T12:29:45Z","author_association":"CONTRIBUTOR","body":"Another possible optimization. \r\n\r\nIf the function is always called in the context when passed results are sorted (and sorting method is compatible with erlang sorting) then we can use `orddict:fetch/2` instead of `couch_util:get_value/2`.\r\n\r\nIn case of `couch_btree:lookup/2 ` the sorting is guaranteed see [couch_btree.erl#L272:L275](https://github.com/apache/couchdb/blob/0059b8f90e58e10b199a4b768a06a762d12a30d3/src/couch/src/couch_btree.erl#L272:L275). \r\n\r\nIn case of `fabric_doc_update` it might be not the case (quick review is not conclusive). Which means our variable name `SortedResults` is misleading.  \r\n\r\nI wish erlang had `length_greater_than/2`. The `length/1` in the first clause still concerns me. However it seems like there is no option to remove it. Also IRC the keys are passed via API. It is unlikely we can get above 100k of elements.  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148600648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148721671","html_url":"https://github.com/apache/couchdb/issues/4051#issuecomment-1148721671","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4051","id":1148721671,"node_id":"IC_kwDOAAMmUc5EeBoH","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T14:03:52Z","updated_at":"2022-06-07T14:03:52Z","author_association":"CONTRIBUTOR","body":"@iilyak neat ideas!\r\n\r\nFor [couch_btree.erl](https://github.com/apache/couchdb/blob/0059b8f90e58e10b199a4b768a06a762d12a30d3/src/couch/src/couch_btree.erl#L272:L275) the issue is that we're sorting the input keys, so that's guaranteed, but the response assertion is that the results will be in the same order as the input Keys. We, for instance check if Keys is sorted already and skip the sort and final reorder.\r\n\r\nGood point about the length guard, it is O(N). I am thinking since map already falls back to an orddict (but with =:=) comparison semantics which we want to preserve, I think we can try to simply the code and just use map always.\r\n\r\nIt seems with 2 elements in play, building the map vs fetching with couch_util is not that much different (map is even a tiny bit faster).\r\n\r\n```\r\n(node1@127.0.0.1)31> f(Keys), f(Res), {Keys, Res} = Gen(2), ok.\r\n(node1@127.0.0.1)4> erlperf:run(#{runner => {couch_util, reorder_results2, [Keys, Res, 5, map]}}).\r\n4494506\r\n(node1@127.0.0.1)5> erlperf:run(#{runner => {couch_util, reorder_results2, [Keys, Res, 5, map]}}).\r\n4467353\r\n(node1@127.0.0.1)6> erlperf:run(#{runner => {couch_util, reorder_results2, [Keys, Res, 5, map]}}).\r\n4216277\r\n(node1@127.0.0.1)7> erlperf:run(#{runner => {couch_util, reorder_results2, [Keys, Res, 1, map]}}).\r\n5699589\r\n(node1@127.0.0.1)8> erlperf:run(#{runner => {couch_util, reorder_results2, [Keys, Res, 1, map]}}).\r\n5796950\r\n(node1@127.0.0.1)9> erlperf:run(#{runner => {couch_util, reorder_results2, [Keys, Res, 1, map]}}).\r\n5816921\r\n```\r\n\r\n(There changed the cutoff switch from 1 to 5, when it's 1 it should use the map, when 5 it should use couch_util).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148721671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148751719","html_url":"https://github.com/apache/couchdb/issues/4051#issuecomment-1148751719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4051","id":1148751719,"node_id":"IC_kwDOAAMmUc5EeI9n","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T14:27:48Z","updated_at":"2022-06-07T14:36:28Z","author_association":"CONTRIBUTOR","body":"With just the map implementation and without the length/1 guard seems to do pretty well in most cases:\r\n\r\n```\r\n f(Keys), f(Res), {Keys, Res} = Gen(2), ok.\r\nok\r\n> erlperf:run(#{runner => {couch_util, reorder_results, [Keys, Res]}}).\r\n6670253\r\n> erlperf:run(#{runner => {couch_util, reorder_results, [Keys, Res]}}).\r\n6441751\r\n> erlperf:run(#{runner => {couch_util, reorder_results, [Keys, Res]}}).\r\n6638078\r\n```\r\n(Compared to 5816921 with the length guard)\r\n\r\n```\r\n> f(Keys), f(Res), {Keys, Res} = Gen(500), ok.\r\nok\r\n> erlperf:run(#{runner => {couch_util, reorder_results, [Keys, Res]}}).\r\n12395\r\n> erlperf:run(#{runner => {couch_util, reorder_results, [Keys, Res]}}).\r\n12508\r\n> erlperf:run(#{runner => {couch_util, reorder_results, [Keys, Res]}}).\r\n12420\r\n```\r\n(Compared to 11639 with the length/1 guard)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148751719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148969745","html_url":"https://github.com/apache/couchdb/pull/4052#issuecomment-1148969745","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4052","id":1148969745,"node_id":"IC_kwDOAAMmUc5Ee-MR","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T17:32:22Z","updated_at":"2022-06-07T17:32:22Z","author_association":"CONTRIBUTOR","body":"> This is awesome, and makes me wonder how many other places in the codebase could be similarly improved!\r\n\r\nI am curious if we can come up with pattern to look for and use https://comby.dev/ to find all instances. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148969745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148992651","html_url":"https://github.com/apache/couchdb/pull/4052#issuecomment-1148992651","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4052","id":1148992651,"node_id":"IC_kwDOAAMmUc5EfDyL","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T17:54:59Z","updated_at":"2022-06-07T17:54:59Z","author_association":"CONTRIBUTOR","body":"@iilyak that's an interesting tool, it would be fun to see what it can find. It says it supports Erlang!\r\n\r\n@jaydoane I thought of it as well. A few things I could think of:\r\n   *  fabric_dict, but it uses orddict so we have to make sure we don't match on [], expect == to work for equality vs =:= and that entires are ordered\r\n   * sets, which are more efficient as maps and are actually implemented as map in the latest Erlang\r\n   * dict or orddict usage in general, those could also be maps but orddict's are ordered and use a == vs =:= for comparison just like with fabric_dict","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1148992651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1150180223","html_url":"https://github.com/apache/couchdb/issues/4051#issuecomment-1150180223","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4051","id":1150180223,"node_id":"IC_kwDOAAMmUc5Ejlt_","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T17:12:01Z","updated_at":"2022-06-08T17:12:01Z","author_association":"CONTRIBUTOR","body":"Optimization PR merged. Closing issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1150180223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1150307821","html_url":"https://github.com/apache/couchdb/issues/4044#issuecomment-1150307821","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4044","id":1150307821,"node_id":"IC_kwDOAAMmUc5EkE3t","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:23:39Z","updated_at":"2022-06-08T19:23:39Z","author_association":"CONTRIBUTOR","body":"Thank you for your proposal and for reaching out, @nkosi23!\r\n\r\nYeah, I think something like that would be nice to have. Or, just in general it would just be nice to remove the partitioned shard size caveat and have it all work as expected. Then partitions and collections would just work the same. \r\n\r\nHowever, given how partitions are implemented currently that would be a bit hard to achieve. A partition prefix is used to decide which shard the document belongs to.  In the normal, non-partitioned case, the scheme is `hash(doc1) -> couch.1`, or `hash(doc2) -> couch.2` etc. In the partitioned case, document `x:a` does `hash(x)` and that ends up on `1.couch`. Document `y:b` does `hash(y)` and the hash result puts it on shard `2.couch`. So, if partition `x` has 1B documents, it would get quite large and essentially each partition is a bit like a `q=1` database. That's why that warning in the docs. Of course, there could be multiple partitions mapping to the same shard too, so `z:c` with `hash(z)` mapping to `1.couch` as well. \r\n\r\nNow, the idea might be to have a multi-level shard mapping scheme. First based on the the collection/partition, then another level based on the rest of the doc id. So a `hash(x)` then would be followed by `hash(a)` which would determine if the document should live on `1-1.couch`, `1-2.couch` ... `1-N.couch` shard files etc. And that gets a bit tricky as you can imagine.\r\n\r\nAt a higher level, this goes down to the fundamental sharding strategy used with their associated trade-offs:\r\n   1) **random sharding (using hashing)** which is what CouchDB uses. This favors fast writes with uniformly distributed load across shards. However, it makes reads cumbersome as they have to spread the query to all the shard ranges and then wait for all to respond.\r\n   2) **range based sharding** which is what other databases use (FoundationDB for instance), where the sorted key range is split. So, it might end up with ranges `a..r` on file `1.couch` and `s...z` on `2.couch`. This scheme makes it easy to end up with a single hot shard  during incrementing key updates (inserting 1M docs starting with \"user15...\"). And of course, as in shown in the example on purpose, the shards become easily imbalanced (a lot more `a..r` docs vs `s..z` ones). However, reads becomes really efficient, because now start/end key ranges can pick out just the relevant shards.\r\n\r\nOf course you can have multi-level schemes - levels of sharding followed by range based hashing or vice versa.\r\n\r\nAnother interesting idea we had been kicking around is to have the main db shards use the random hashing scheme but indices using a range-based one to allow more efficient start/end key on views. That would be nice but have the same hot shard issue when building the views since now that won't be parallelized as easily.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1150307821/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151038831","html_url":"https://github.com/apache/couchdb/issues/4057#issuecomment-1151038831","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4057","id":1151038831,"node_id":"IC_kwDOAAMmUc5Em3Vv","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T12:07:00Z","updated_at":"2022-06-09T12:07:00Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\ndoes this happen with the \"main\" branch too?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151038831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151042344","html_url":"https://github.com/apache/couchdb/issues/4057#issuecomment-1151042344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4057","id":1151042344,"node_id":"IC_kwDOAAMmUc5Em4Mo","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T12:10:55Z","updated_at":"2022-06-09T12:10:55Z","author_association":"CONTRIBUTOR","body":"Sorry, no iirc it's the default, there is no auto detection of sm.\r\nBut I think I saw a PR/Issue for that, need to search...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151042344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151044824","html_url":"https://github.com/apache/couchdb/issues/4057#issuecomment-1151044824","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4057","id":1151044824,"node_id":"IC_kwDOAAMmUc5Em4zY","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T12:13:38Z","updated_at":"2022-06-09T12:13:38Z","author_association":"CONTRIBUTOR","body":"```\r\n./configure --help\r\n...\r\n--spidermonkey-version VSN  specify the version of SpiderMonkey to use (defaults to 1.8.5)\r\n...\r\n```\r\n\r\nYou need to do something like that:\r\n\r\n\r\n```./configure --spidermonkey-version 91```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151044824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151052577","html_url":"https://github.com/apache/couchdb/issues/4057#issuecomment-1151052577","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4057","id":1151052577,"node_id":"IC_kwDOAAMmUc5Em6sh","user":{"login":"jo","id":17586,"node_id":"MDQ6VXNlcjE3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/17586?v=4","gravatar_id":"","url":"https://api.github.com/users/jo","html_url":"https://github.com/jo","followers_url":"https://api.github.com/users/jo/followers","following_url":"https://api.github.com/users/jo/following{/other_user}","gists_url":"https://api.github.com/users/jo/gists{/gist_id}","starred_url":"https://api.github.com/users/jo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jo/subscriptions","organizations_url":"https://api.github.com/users/jo/orgs","repos_url":"https://api.github.com/users/jo/repos","events_url":"https://api.github.com/users/jo/events{/privacy}","received_events_url":"https://api.github.com/users/jo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T12:21:59Z","updated_at":"2022-06-09T12:21:59Z","author_association":"CONTRIBUTOR","body":"even better :) thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151052577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151118358","html_url":"https://github.com/apache/couchdb/issues/3958#issuecomment-1151118358","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3958","id":1151118358,"node_id":"IC_kwDOAAMmUc5EnKwW","user":{"login":"trames57","id":42688832,"node_id":"MDQ6VXNlcjQyNjg4ODMy","avatar_url":"https://avatars.githubusercontent.com/u/42688832?v=4","gravatar_id":"","url":"https://api.github.com/users/trames57","html_url":"https://github.com/trames57","followers_url":"https://api.github.com/users/trames57/followers","following_url":"https://api.github.com/users/trames57/following{/other_user}","gists_url":"https://api.github.com/users/trames57/gists{/gist_id}","starred_url":"https://api.github.com/users/trames57/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trames57/subscriptions","organizations_url":"https://api.github.com/users/trames57/orgs","repos_url":"https://api.github.com/users/trames57/repos","events_url":"https://api.github.com/users/trames57/events{/privacy}","received_events_url":"https://api.github.com/users/trames57/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T13:26:33Z","updated_at":"2022-06-09T20:47:56Z","author_association":"NONE","body":"I am experiencing something like this when I upgraded to 3.2.2-2 (standalone). I get a\r\n\"Protocol 'inet_tcp' : register/listen error: econnrefused\"\r\n\"epmd: failed to bind on ipaddr ::1\"\r\nerror in journalctl on the couchdb service.  On this server, I have IPV6 disabled (I was having issues with the javascript nano library connections). I downgraded to 3.2.2-1 and everything works fine. The issue is on a Linode server. I did do an lsof -i -P -n, and there was nothing bound to port 5984. After I downgraded I did the lsof again, and it was bound as it should be.\r\n\r\nI then reenabled IPV6 and the 3.2.2-2 is working, but now the javascript nano connection is having issues again. I need \"epmd\" to bind to IPV4, but not sure how to accomplish that.\r\n\r\nUpdate: I did follow the epmd erlang trail. The couchdb.service file is setting the environment variable ERL_EPMD_ADDRESS to 127.0.0.1, but epmd does not appear to be using it.\r\n\r\nUpdate 2: This may be an issue with changes to the couchdb.service file on Arch Linux. They changed the Environment parameter to the EnvironmentFile parameter which has the ERL_EPMD_ADDRESS in /etc/default/couchdb. When I removed the env. variable from /etc/default/couchdb, the server started without errors. This env. var was NOT in the previous version's Environment parameter.\r\n\r\nArch Linux - kernel 5.18.2","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151118358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151666846","html_url":"https://github.com/apache/couchdb/pull/4056#issuecomment-1151666846","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4056","id":1151666846,"node_id":"IC_kwDOAAMmUc5EpQqe","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T22:04:03Z","updated_at":"2022-06-10T04:25:31Z","author_association":"CONTRIBUTOR","body":"I ran a quick benchmark finding revisions which are in the tree and then which are not in the tree and it looks like we get a **6x** and **2x** performance boost respectively!\r\n\r\nWith the optimization\r\n```\r\n(node1@127.0.0.1)1> test_util:find_missing_revs_bench_all().\r\n118588\r\n(node1@127.0.0.1)2> test_util:find_missing_revs_bench_all().\r\n110889\r\n(node1@127.0.0.1)3> test_util:find_missing_revs_bench_all().\r\n118854\r\n(node1@127.0.0.1)4> test_util:find_missing_revs_bench_all().\r\n105642\r\n(node1@127.0.0.1)5> test_util:find_missing_revs_bench_all().\r\n110106\r\n(node1@127.0.0.1)6> test_util:find_missing_revs_bench_all().\r\n117185\r\n(node1@127.0.0.1)7> test_util:find_missing_revs_bench_none().\r\n203298\r\n(node1@127.0.0.1)8> test_util:find_missing_revs_bench_none().\r\n258603\r\n(node1@127.0.0.1)9> test_util:find_missing_revs_bench_none().\r\n202337\r\n(node1@127.0.0.1)10> test_util:find_missing_revs_bench_none().\r\n267945\r\n(node1@127.0.0.1)11> test_util:find_missing_revs_bench_none().\r\n205133\r\n(node1@127.0.0.1)12> test_util:find_missing_revs_bench_none().\r\n251598\r\n(node1@127.0.0.1)13> test_util:find_missing_revs_bench_none().\r\n211679\r\n(node1@127.0.0.1)14> test_util:find_missing_revs_bench_none().\r\n245531\r\n```\r\n\r\nOn main (previously)\r\n```\r\ntest_util:find_missing_revs_bench_all().\r\n732635\r\n(node1@127.0.0.1)2> test_util:find_missing_revs_bench_all().\r\n766882\r\n(node1@127.0.0.1)3> test_util:find_missing_revs_bench_all().\r\n748767\r\n(node1@127.0.0.1)4> test_util:find_missing_revs_bench_all().\r\n737048\r\n(node1@127.0.0.1)5> test_util:find_missing_revs_bench_all().\r\n747412\r\n(node1@127.0.0.1)6> test_util:find_missing_revs_bench_all().\r\n741996\r\n(node1@127.0.0.1)7> test_util:find_missing_revs_bench_all().\r\n837689\r\n(node1@127.0.0.1)8> test_util:find_missing_revs_bench_all().\r\n757310\r\n(node1@127.0.0.1)9> test_util:find_missing_revs_bench_none().\r\n539445\r\n(node1@127.0.0.1)10> test_util:find_missing_revs_bench_none().\r\n484979\r\n(node1@127.0.0.1)11> test_util:find_missing_revs_bench_none().\r\n473483\r\n(node1@127.0.0.1)12> test_util:find_missing_revs_bench_none().\r\n537291\r\n(node1@127.0.0.1)13> test_util:find_missing_revs_bench_none().\r\n490028\r\n(node1@127.0.0.1)14> test_util:find_missing_revs_bench_none().\r\n469814\r\n(node1@127.0.0.1)15> test_util:find_missing_revs_bench_none().\r\n471836\r\n(node1@127.0.0.1)16> test_util:find_missing_revs_bench_none().\r\n572493\r\n```\r\n\r\n```erlang\r\nrevtree_generate(Depth, BranchChance, WideBranches, Seed) ->\r\n    rand:seed(exrop, Seed),\r\n    {Seed, [{1, revnode(rev(), Depth, BranchChance, WideBranches)}]}.\r\n\r\n% Get all the revisions in the tree as a sorted [{Pos, Rev} ...] list\r\n%\r\nrevtree_get_revs([{Pos, {_, _, _} = Node}]) when is_integer(Pos) ->\r\n    lists:sort(maps:keys(revs1(Pos, Node))).\r\n\r\nrevnode(Rev, Depth, _, _) when Depth =< 0 ->\r\n    {Rev, x, []};\r\nrevnode(Rev, Depth, BranchChance, WideBranches) ->\r\n    Choice = rand:uniform(),\r\n    {Revs, Depth1} = if\r\n        Choice < BranchChance / 4 ->\r\n            {childrev(WideBranches), trunc(Depth / 2)};\r\n        Choice < BranchChance ->\r\n            {childrev(2), trunc(Depth / 2)};\r\n        true ->\r\n            {childrev(1), Depth - 1}\r\n    end,\r\n    {Rev, x, [revnode(R, Depth1, BranchChance, WideBranches) || R <- Revs]}.\r\n\r\nchildrev(N) ->\r\n    lists:sort([rev() || _ <- lists:seq(1, N)]).\r\n\r\nrevs1(Pos, {Rev, _Val, []}) ->\r\n    #{{Pos, Rev} => true};\r\nrevs1(Pos, {Rev, _Val, Nodes}) ->\r\n    lists:foldl(fun(N, Acc) ->\r\n        maps:merge(Acc, revs1(Pos + 1, N))\r\n    end, #{{Pos, Rev} => true}, Nodes).\r\n\r\nrev() ->\r\n    hex(crypto:strong_rand_bytes(16)).\r\n\r\nhex(Bin) when is_binary(Bin) ->\r\n    << <<Y>> ||<<X:4>> <= Bin, Y <- string:to_lower(integer_to_list(X, 16))>>.\r\n\r\nshuffle(List) ->\r\n    Paired = [{couch_rand:uniform(), I} || I <- List],\r\n    Sorted = lists:sort(Paired),\r\n    [I || {_, I} <- Sorted].\r\n\r\nfind_missing_revs_bench_all() ->\r\n    Seed = {1647, 841737, 351137},\r\n    {_, Tree} = test_util:revtree_generate(1000, 0.2, 5, Seed),\r\n    Revs1 = test_util:revtree_get_revs(Tree),\r\n    Revs2 = shuffle(Revs1),\r\n    couch_key_tree:find_missing(Tree, Revs2),\r\n    erlang:garbage_collect(),\r\n    T1 = erlang:monotonic_time(),\r\n    ?assertEqual([], couch_key_tree:find_missing(Tree, Revs2)),\r\n    T2 = erlang:monotonic_time(),\r\n    dt(T1, T2).\r\n\r\nrandom_revs(N, Depth) ->\r\n    [{rand:uniform(Depth), rev()} || _ <- lists:seq(1, N)].\r\n\r\nfind_missing_revs_bench_none() ->\r\n    Seed = {1647, 841737, 351137},\r\n    {_, Tree} = test_util:revtree_generate(1000, 0.2, 5, Seed),\r\n    Revs = random_revs(1500, 1000),\r\n    erlang:garbage_collect(),\r\n    T1 = erlang:monotonic_time(),\r\n    Revs2 = couch_key_tree:find_missing(Tree, Revs),\r\n    T2 = erlang:monotonic_time(),\r\n    ?assertEqual(lists:sort(Revs), lists:sort(Revs2)),\r\n    dt(T1, T2).\r\n\r\ndt(T1, T2) ->\r\n    erlang:convert_time_unit(T2 - T1, native, microsecond).\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151666846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151667329","html_url":"https://github.com/apache/couchdb/pull/4056#issuecomment-1151667329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4056","id":1151667329,"node_id":"IC_kwDOAAMmUc5EpQyB","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T22:04:48Z","updated_at":"2022-06-09T22:04:48Z","author_association":"CONTRIBUTOR","body":"I'll see I can add those to tests to the main couch_key_tree tests since they test that we can find or not find expected revisions with a large-ish random rev tree.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1151667329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1153154722","html_url":"https://github.com/apache/couchdb/issues/4058#issuecomment-1153154722","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4058","id":1153154722,"node_id":"IC_kwDOAAMmUc5Eu76i","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-12T12:45:18Z","updated_at":"2022-06-12T12:45:18Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\nwe will not provide an 32 bit executable for windows. As of CouchDB 2.0 we only support a 64-bit build of CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1153154722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1154391783","html_url":"https://github.com/apache/couchdb/pull/4060#issuecomment-1154391783","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4060","id":1154391783,"node_id":"IC_kwDOAAMmUc5Ezp7n","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:23:03Z","updated_at":"2022-06-13T20:23:03Z","author_association":"CONTRIBUTOR","body":"Most tests pass but I had noticed a few eunit failures locally. We'd probably want to add some ifdefs around there or switch to https://www.erlang.org/docs/25/man/uri_string.html\r\n\r\n```\r\nin function couch_replicator_error_reporting_tests:'-t_fail_bulk_docs/1-fun-1-'/2 (test/eunit/couch_replicator_error_reporting_tests.erl, line 68)\r\nin call from eunit_test:run_testfun/1 (eunit_test.erl, line 71)\r\nin call from eunit_proc:run_test/1 (eunit_proc.erl, line 531)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 356)\r\nin call from eunit_proc:handle_test/2 (eunit_proc.erl, line 514)\r\nin call from eunit_proc:tests_inorder/3 (eunit_proc.erl, line 456)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 346)\r\nin call from eunit_proc:run_group/2 (eunit_proc.erl, line 570)\r\n**error:{assertEqual,\r\n    [{module,couch_replicator_error_reporting_tests},\r\n     {line,68},\r\n     {expression,\"Result\"},\r\n     {expected,{bulk_docs_failed,403,{[{<<\"x\">>,<<\"y\">>}]}}},\r\n     {value,\r\n         {worker_died,<0.9144.0>,\r\n             {process_died,<0.9145.0>,{undef,[{http_uri,...},{...}|...]}}}}]}\r\n  output:<<\"\">>\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1154391783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1154425919","html_url":"https://github.com/apache/couchdb/pull/4060#issuecomment-1154425919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4060","id":1154425919,"node_id":"IC_kwDOAAMmUc5EzyQ_","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-13T20:49:51Z","updated_at":"2022-06-13T20:49:51Z","author_association":"CONTRIBUTOR","body":"I think it's the http_uri:parse/1 function:\r\n\r\n24\r\n```\r\n1> http_uri:parse(\"https://foo:bar@zig.zag/abc?param1\").\r\n{ok,{https,\"foo:bar\",\"zig.zag\",443,\"/abc\",\"?param1\"}}\r\n```\r\n\r\n25\r\n```\r\n1> http_uri:parse(\"https://foo:bar@zig.zag/abc?param1\").\r\n** exception error: undefined function http_uri:parse/1\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1154425919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1155399408","html_url":"https://github.com/apache/couchdb/pull/4064#issuecomment-1155399408","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4064","id":1155399408,"node_id":"IC_kwDOAAMmUc5E3f7w","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-14T16:02:58Z","updated_at":"2022-06-14T16:02:58Z","author_association":"CONTRIBUTOR","body":"@jjrodrig also thanks for pointing out an issue related to a race between the internal replicator and the interactive requests.\r\n\r\nIn a test cluster, with this option enable there is a good chance of getting a duplicate UUID badreq error from https://github.com/apache/couchdb/blob/6f85bac207af9c4fa9edf2681c055fac83a34142/src/couch/src/couch_db.erl#L406-L424\r\n\r\nWhich looks to be a race between the internal replicator and the interactive request workers. If the internal replicator wins, then the interactive request would throw the error.\r\n\r\nThe fix is probably to ignore the request if it is already present on the node. These UUIDs are generated on the cluster not by the user so if we already saw the UUID it means we've already processed it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1155399408/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158132032","html_url":"https://github.com/apache/couchdb/pull/4064#issuecomment-1158132032","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4064","id":1158132032,"node_id":"IC_kwDOAAMmUc5FB7FA","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-16T21:07:59Z","updated_at":"2022-06-16T21:07:59Z","author_association":"CONTRIBUTOR","body":"@davisp good idea to check Id and Revs!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158132032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158640266","html_url":"https://github.com/apache/couchdb/issues/3973#issuecomment-1158640266","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3973","id":1158640266,"node_id":"IC_kwDOAAMmUc5FD3KK","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T08:39:22Z","updated_at":"2022-06-17T08:39:22Z","author_association":"CONTRIBUTOR","body":"Can you append the section of your log where the error occurs?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158640266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158693133","html_url":"https://github.com/apache/couchdb/issues/4065#issuecomment-1158693133","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4065","id":1158693133,"node_id":"IC_kwDOAAMmUc5FEEEN","user":{"login":"cpallavi","id":22679369,"node_id":"MDQ6VXNlcjIyNjc5MzY5","avatar_url":"https://avatars.githubusercontent.com/u/22679369?v=4","gravatar_id":"","url":"https://api.github.com/users/cpallavi","html_url":"https://github.com/cpallavi","followers_url":"https://api.github.com/users/cpallavi/followers","following_url":"https://api.github.com/users/cpallavi/following{/other_user}","gists_url":"https://api.github.com/users/cpallavi/gists{/gist_id}","starred_url":"https://api.github.com/users/cpallavi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpallavi/subscriptions","organizations_url":"https://api.github.com/users/cpallavi/orgs","repos_url":"https://api.github.com/users/cpallavi/repos","events_url":"https://api.github.com/users/cpallavi/events{/privacy}","received_events_url":"https://api.github.com/users/cpallavi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T09:35:23Z","updated_at":"2022-06-17T09:35:23Z","author_association":"NONE","body":"Any updates on this?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158693133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158700648","html_url":"https://github.com/apache/couchdb/issues/4066#issuecomment-1158700648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4066","id":1158700648,"node_id":"IC_kwDOAAMmUc5FEF5o","user":{"login":"cpallavi","id":22679369,"node_id":"MDQ6VXNlcjIyNjc5MzY5","avatar_url":"https://avatars.githubusercontent.com/u/22679369?v=4","gravatar_id":"","url":"https://api.github.com/users/cpallavi","html_url":"https://github.com/cpallavi","followers_url":"https://api.github.com/users/cpallavi/followers","following_url":"https://api.github.com/users/cpallavi/following{/other_user}","gists_url":"https://api.github.com/users/cpallavi/gists{/gist_id}","starred_url":"https://api.github.com/users/cpallavi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpallavi/subscriptions","organizations_url":"https://api.github.com/users/cpallavi/orgs","repos_url":"https://api.github.com/users/cpallavi/repos","events_url":"https://api.github.com/users/cpallavi/events{/privacy}","received_events_url":"https://api.github.com/users/cpallavi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T09:44:35Z","updated_at":"2022-06-17T09:44:35Z","author_association":"NONE","body":"Also, one more thing would like to share is with scheduler/docs api, i do not see anything in the error count, its 0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158700648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158904962","html_url":"https://github.com/apache/couchdb/issues/4066#issuecomment-1158904962","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4066","id":1158904962,"node_id":"IC_kwDOAAMmUc5FE3yC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T14:04:37Z","updated_at":"2022-06-17T14:04:37Z","author_association":"CONTRIBUTOR","body":"It means the `_changes` feed connection is closed unexpectedly. If the error count is 0, it happens rarely enough that the error count is reset. So it's probably more rare than once a minute or so.\r\n\r\nA few things to try:\r\n * Check if you're using a restrictive replication filter.\r\n * Increase the replicator connection timeout configuration to say 90000(msec).\r\n * Check if your load balancer (if you have one), has an idle connection timer then bump that too and then, check that it's not set to buffer connection data.\r\n\r\nIn general replicator will retry the replications on failure and continue where it left off. It's pretty resilient like that. So, if you don't want to track down the connection issues, and it seems your data replicates as intended you probably don't have to worry about it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1158904962/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159161067","html_url":"https://github.com/apache/couchdb/pull/4064#issuecomment-1159161067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4064","id":1159161067,"node_id":"IC_kwDOAAMmUc5FF2Tr","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T19:12:34Z","updated_at":"2022-06-17T19:12:34Z","author_association":"CONTRIBUTOR","body":"Thanks @nickva and @davisp ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159161067/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159192122","html_url":"https://github.com/apache/couchdb/issues/3836#issuecomment-1159192122","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3836","id":1159192122,"node_id":"IC_kwDOAAMmUc5FF946","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T20:03:30Z","updated_at":"2022-06-17T20:03:30Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\nto get that right. You want to define your users in the configuration file under [jwt_keys]. Then you want to send the JWT token to CouchDB (as a header) and get a cookie when the user is found in the configuration?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159192122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159231466","html_url":"https://github.com/apache/couchdb/pull/4068#issuecomment-1159231466","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4068","id":1159231466,"node_id":"IC_kwDOAAMmUc5FGHfq","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-17T21:16:01Z","updated_at":"2022-06-17T21:16:01Z","author_association":"CONTRIBUTOR","body":"It looks like we'll need to remove Erlang < 23 support first to avoid adding another ifdef","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159231466/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159615554","html_url":"https://github.com/apache/couchdb/pull/4073#issuecomment-1159615554","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4073","id":1159615554,"node_id":"IC_kwDOAAMmUc5FHlRC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T04:37:26Z","updated_at":"2022-06-19T04:37:26Z","author_association":"CONTRIBUTOR","body":"Wonder why macos build is failing:\r\n\r\n```\r\n$MAKE\r\n— Shell Script\r\n2s\r\n[2022-06-19T03:18:26.313Z] + make\r\n\r\n[2022-06-19T03:18:26.313Z] escript: exception error: undefined function rebar:main/1\r\n\r\n[2022-06-19T03:18:26.313Z]   in function  escript:run/2 (escript.erl, line 758)\r\n\r\n[2022-06-19T03:18:26.313Z]   in call from escript:start/1 (escript.erl, line 277)\r\n\r\n[2022-06-19T03:18:26.313Z]   in call from init:start_em/1 \r\n\r\n[2022-06-19T03:18:26.313Z]   in call from init:do_boot/3 \r\n\r\n[2022-06-19T03:18:26.313Z] make: *** [couch] Error 127\r\n\r\nscript returned exit code 2\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159615554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159639402","html_url":"https://github.com/apache/couchdb/pull/4073#issuecomment-1159639402","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4073","id":1159639402,"node_id":"IC_kwDOAAMmUc5FHrFq","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T07:26:29Z","updated_at":"2022-06-19T07:26:29Z","author_association":"CONTRIBUTOR","body":"Maybe we should use only sm versions 78, 91, 1XX (next lts) in the CI. Maybe we can do some autodetection like in #3932. Needs to be checked and rebased first…","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1159639402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589865","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589865","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589865,"node_id":"IC_kwDOAAMmUc5MVEAp","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T18:29:02Z","updated_at":"2022-06-19T18:29:02Z","author_association":"CONTRIBUTOR","body":"The Apache Software Foundation - and CouchDB as a project of the ASF - produces open source software. All releases are in the form of the source materials needed to make changes to the software being released.\r\n\r\nAs a convenience to users that might not have the appropriate tools to build a compiled version of the source, binary/bytecode packages MAY be distributed alongside official Apache releases. \r\n\r\nSo if Linux, macOS or Windows is running on your hardware architecture, then you have a good chance that you can compile and run CouchDB (all dependencies included).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589879","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589879","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589879,"node_id":"IC_kwDOAAMmUc5MVEA3","user":{"login":"zamazan4ik","id":7355383,"node_id":"MDQ6VXNlcjczNTUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/7355383?v=4","gravatar_id":"","url":"https://api.github.com/users/zamazan4ik","html_url":"https://github.com/zamazan4ik","followers_url":"https://api.github.com/users/zamazan4ik/followers","following_url":"https://api.github.com/users/zamazan4ik/following{/other_user}","gists_url":"https://api.github.com/users/zamazan4ik/gists{/gist_id}","starred_url":"https://api.github.com/users/zamazan4ik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zamazan4ik/subscriptions","organizations_url":"https://api.github.com/users/zamazan4ik/orgs","repos_url":"https://api.github.com/users/zamazan4ik/repos","events_url":"https://api.github.com/users/zamazan4ik/events{/privacy}","received_events_url":"https://api.github.com/users/zamazan4ik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T19:32:12Z","updated_at":"2022-06-19T19:32:12Z","author_association":"NONE","body":"> So if Linux, macOS or Windows is running on your hardware architecture, then you have a good chance that you can compile and run CouchDB (all dependencies included).\r\n\r\nGood. Am I right that you support all architestures on an equal level? E.g. x86-64 and s390 are on the same support level? Could I run the CouchDB on  CPUs without AVX and/or some version of SSE?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589885","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589885","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589885,"node_id":"IC_kwDOAAMmUc5MVEA9","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T22:03:37Z","updated_at":"2022-06-19T22:03:37Z","author_association":"CONTRIBUTOR","body":"> Am I right that you support all architestures on an equal level? E.g. x86-64 and s390 are on the same support level?\r\n\r\nNo one said this.\r\n\r\n> Could I run the CouchDB on CPUs without AVX and/or some version of SSE?\r\n\r\nDo you have a concrete problem?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589888","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589888","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589888,"node_id":"IC_kwDOAAMmUc5MVEBA","user":{"login":"zamazan4ik","id":7355383,"node_id":"MDQ6VXNlcjczNTUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/7355383?v=4","gravatar_id":"","url":"https://api.github.com/users/zamazan4ik","html_url":"https://github.com/zamazan4ik","followers_url":"https://api.github.com/users/zamazan4ik/followers","following_url":"https://api.github.com/users/zamazan4ik/following{/other_user}","gists_url":"https://api.github.com/users/zamazan4ik/gists{/gist_id}","starred_url":"https://api.github.com/users/zamazan4ik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zamazan4ik/subscriptions","organizations_url":"https://api.github.com/users/zamazan4ik/orgs","repos_url":"https://api.github.com/users/zamazan4ik/repos","events_url":"https://api.github.com/users/zamazan4ik/events{/privacy}","received_events_url":"https://api.github.com/users/zamazan4ik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T22:06:55Z","updated_at":"2022-06-19T22:06:55Z","author_association":"NONE","body":"> Do you have a concrete problem?\r\n\r\nI am investigating different databases for our internal purposes. And one of the criteria is support for different architectures since we different servers (x86-64 and ARM based for now, maybe Loongsoon a little bit later). I am trying to find the information regarding the support level for each one in the documentation.\r\n\r\nThat is why I want to see such information somewhere in the documentation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589892","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589892","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589892,"node_id":"IC_kwDOAAMmUc5MVEBE","user":{"login":"lostnet","id":1422781,"node_id":"MDQ6VXNlcjE0MjI3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1422781?v=4","gravatar_id":"","url":"https://api.github.com/users/lostnet","html_url":"https://github.com/lostnet","followers_url":"https://api.github.com/users/lostnet/followers","following_url":"https://api.github.com/users/lostnet/following{/other_user}","gists_url":"https://api.github.com/users/lostnet/gists{/gist_id}","starred_url":"https://api.github.com/users/lostnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lostnet/subscriptions","organizations_url":"https://api.github.com/users/lostnet/orgs","repos_url":"https://api.github.com/users/lostnet/repos","events_url":"https://api.github.com/users/lostnet/events{/privacy}","received_events_url":"https://api.github.com/users/lostnet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T22:11:13Z","updated_at":"2022-06-19T22:11:13Z","author_association":"CONTRIBUTOR","body":"Adding foundationdb as a dependency would have brought in AVX instruction requirements (or their emulation) for couchdb 4+ but that project was suspended. Spidermonkey is an example of an existing requirement and doesn't support every possible architecture, but does have support for s390. For example [riscv linux patches](https://bugzilla.mozilla.org/show_bug.cgi?id=1318905#c40) would be needed for spidermonkey_78- and show references to s390 being present.\r\n\r\nDistribution/arch combinations with convenience packages are usually sourced from a pipeline that runs the test suite in jenkins so they have a higher level of support in that the results will be examined before approving a new release. For other combinations you would want to document progress/success in getting all the dependencies and running the full couchdb test suite for future problems to be identifiable as regressions.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589898","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589898","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589898,"node_id":"IC_kwDOAAMmUc5MVEBK","user":{"login":"zamazan4ik","id":7355383,"node_id":"MDQ6VXNlcjczNTUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/7355383?v=4","gravatar_id":"","url":"https://api.github.com/users/zamazan4ik","html_url":"https://github.com/zamazan4ik","followers_url":"https://api.github.com/users/zamazan4ik/followers","following_url":"https://api.github.com/users/zamazan4ik/following{/other_user}","gists_url":"https://api.github.com/users/zamazan4ik/gists{/gist_id}","starred_url":"https://api.github.com/users/zamazan4ik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zamazan4ik/subscriptions","organizations_url":"https://api.github.com/users/zamazan4ik/orgs","repos_url":"https://api.github.com/users/zamazan4ik/repos","events_url":"https://api.github.com/users/zamazan4ik/events{/privacy}","received_events_url":"https://api.github.com/users/zamazan4ik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-19T22:37:31Z","updated_at":"2022-06-19T22:37:31Z","author_association":"NONE","body":"@lostnet maybe we can soemehow put the information about currently tested on Jenkins architectures into the documentation? It will simplify research on topic \"Which architectures are supported by CouchDB\" and for future users will be no need to do their own investigations again and again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589908","html_url":"https://github.com/apache/couchdb/issues/4216#issuecomment-1280589908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4216","id":1280589908,"node_id":"IC_kwDOAAMmUc5MVEBU","user":{"login":"lostnet","id":1422781,"node_id":"MDQ6VXNlcjE0MjI3ODE=","avatar_url":"https://avatars.githubusercontent.com/u/1422781?v=4","gravatar_id":"","url":"https://api.github.com/users/lostnet","html_url":"https://github.com/lostnet","followers_url":"https://api.github.com/users/lostnet/followers","following_url":"https://api.github.com/users/lostnet/following{/other_user}","gists_url":"https://api.github.com/users/lostnet/gists{/gist_id}","starred_url":"https://api.github.com/users/lostnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lostnet/subscriptions","organizations_url":"https://api.github.com/users/lostnet/orgs","repos_url":"https://api.github.com/users/lostnet/repos","events_url":"https://api.github.com/users/lostnet/events{/privacy}","received_events_url":"https://api.github.com/users/lostnet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T10:37:06Z","updated_at":"2022-06-20T10:37:06Z","author_association":"CONTRIBUTOR","body":"Hi @zamazan4ik  there was a grid of possible targets in the couchdb-ci Readme but it was removed for always getting stale and there's a section on [other platforms](https://github.com/apache/couchdb-ci#other-platforms) for anyone trying to raise the practical level of support of another platform. I'm not really sure it fits into the general docs, it might be fruitful to look for old dev discussions on the topic of platforms and make a proposal for something that could be helpful. I generally think it has to be investigated again and again since couchdb's ability to be used is really just a consequence of dependencies each of which can reorganize their platform choices.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160333900","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160333900","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160333900,"node_id":"IC_kwDOAAMmUc5FKUpM","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T11:33:41Z","updated_at":"2022-06-20T11:33:41Z","author_association":"CONTRIBUTOR","body":"Can you submit your install log or your installation errors?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160333900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160353838","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160353838","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160353838,"node_id":"IC_kwDOAAMmUc5FKZgu","user":{"login":"Kaspanoombro","id":62493556,"node_id":"MDQ6VXNlcjYyNDkzNTU2","avatar_url":"https://avatars.githubusercontent.com/u/62493556?v=4","gravatar_id":"","url":"https://api.github.com/users/Kaspanoombro","html_url":"https://github.com/Kaspanoombro","followers_url":"https://api.github.com/users/Kaspanoombro/followers","following_url":"https://api.github.com/users/Kaspanoombro/following{/other_user}","gists_url":"https://api.github.com/users/Kaspanoombro/gists{/gist_id}","starred_url":"https://api.github.com/users/Kaspanoombro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kaspanoombro/subscriptions","organizations_url":"https://api.github.com/users/Kaspanoombro/orgs","repos_url":"https://api.github.com/users/Kaspanoombro/repos","events_url":"https://api.github.com/users/Kaspanoombro/events{/privacy}","received_events_url":"https://api.github.com/users/Kaspanoombro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T11:55:37Z","updated_at":"2022-06-20T11:56:16Z","author_association":"NONE","body":"This is whatappears in syslog:\r\nJun 17 13:21:58 XXXX snapd[820]: api_snaps.go:317: Installing snap \"couchdb\" revision unset\r\nJun 17 13:23:31 XXXX systemd[1]: Mounting Mount unit for couchdb, revision 9...\r\nJun 17 13:23:31 XXXX systemd[1]: Mounted Mount unit for couchdb, revision 9.\r\nJun 17 13:23:32 XXXX systemd[1]: Started snap.couchdb.hook.install.921cbf6c-db43-4841-beee-7d54e34b4e6b.scope.\r\nJun 17 13:23:32 XXXX systemd[1]: snap.couchdb.hook.install.921cbf6c-db43-4841-beee-7d54e34b4e6b.scope: Deactivated successfully.\r\nJun 17 13:23:32 XXXX systemd[1]: Started Service for snap application couchdb.server.\r\nJun 17 13:23:32 XXXX systemd[1]: Started snap.couchdb.hook.configure.9e56ae93-8911-4cd6-83ca-22d1bc258822.scope.\r\nJun 17 13:23:32 XXXX systemd[1]: snap.couchdb.hook.configure.9e56ae93-8911-4cd6-83ca-22d1bc258822.scope: Deactivated successfully.\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.791536Z couchdb@127.0.0.1 <0.11.0> -------- Application couch_log started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.797620Z couchdb@127.0.0.1 <0.11.0> -------- Application folsom started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.833291Z couchdb@127.0.0.1 <0.11.0> -------- Application couch_stats started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.833389Z couchdb@127.0.0.1 <0.11.0> -------- Application khash started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.839117Z couchdb@127.0.0.1 <0.11.0> -------- Application couch_event started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.839231Z couchdb@127.0.0.1 <0.11.0> -------- Application hyper started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.846108Z couchdb@127.0.0.1 <0.11.0> -------- Application ibrowse started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.849388Z couchdb@127.0.0.1 <0.11.0> -------- Application ioq started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.849508Z couchdb@127.0.0.1 <0.11.0> -------- Application mochiweb started on node 'couchdb@127.0.0.1'\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.852945Z couchdb@127.0.0.1 <0.222.0> -------- Preflight check: Asserting Admin Account\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: [info] 2022-06-17T12:23:33.853010Z couchdb@127.0.0.1 <0.222.0> --------\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\nJun 17 13:23:33 XXXX couchdb.server[123411]:   No Admin Account Found, aborting startup.\r\nJun 17 13:23:33 XXXX couchdb.server[123411]:   Please configure an admin account in your local.ini file.\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\nJun 17 13:23:34 XXXX systemd[1]: snap.couchdb.server.service: Main process exited, code=exited, status=1/FAILURE\r\nJun 17 13:23:34 XXXX systemd[1]: snap.couchdb.server.service: Failed with result 'exit-code'.\r\nJun 17 13:23:34 XXXX systemd[1]: snap.couchdb.server.service: Consumed 1.327s CPU time.\r\nJun 17 13:23:34 XXXX systemd[1]: snap.couchdb.server.service: Scheduled restart job, restart counter is at 1.\r\nJun 17 13:23:34 XXXX systemd[1]: Stopped Service for snap application couchdb.server.\r\nJun 17 13:23:34 XXXX systemd[1]: snap.couchdb.server.service: Consumed 1.327s CPU time.\r\nJun 17 13:23:34 XXXX systemd[1]: Started Service for snap application couchdb.server.\r\n\r\nNo other logs are created.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160353838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160364373","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160364373","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160364373,"node_id":"IC_kwDOAAMmUc5FKcFV","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:05:57Z","updated_at":"2022-06-20T12:05:57Z","author_association":"CONTRIBUTOR","body":"You need to configure an [admin account](https://docs.couchdb.org/en/stable/config/auth.html#config-admins), which is clearly described in the in the logs:\r\n```\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: No Admin Account Found, aborting startup.\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: Please configure an admin account in your local.ini file.\r\nJun 17 13:23:33 XXXX couchdb.server[123411]: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160364373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160392306","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160392306","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160392306,"node_id":"IC_kwDOAAMmUc5FKi5y","user":{"login":"Kaspanoombro","id":62493556,"node_id":"MDQ6VXNlcjYyNDkzNTU2","avatar_url":"https://avatars.githubusercontent.com/u/62493556?v=4","gravatar_id":"","url":"https://api.github.com/users/Kaspanoombro","html_url":"https://github.com/Kaspanoombro","followers_url":"https://api.github.com/users/Kaspanoombro/followers","following_url":"https://api.github.com/users/Kaspanoombro/following{/other_user}","gists_url":"https://api.github.com/users/Kaspanoombro/gists{/gist_id}","starred_url":"https://api.github.com/users/Kaspanoombro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kaspanoombro/subscriptions","organizations_url":"https://api.github.com/users/Kaspanoombro/orgs","repos_url":"https://api.github.com/users/Kaspanoombro/repos","events_url":"https://api.github.com/users/Kaspanoombro/events{/privacy}","received_events_url":"https://api.github.com/users/Kaspanoombro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:33:04Z","updated_at":"2022-06-20T12:33:04Z","author_association":"NONE","body":"These are my steps: go to Software app of Ubuntu and choose to install Couchdb. It installs successfully but nothing happens. I check the logs and that appears. I try to had a admin account in local.ini but i am unable (even with sudo). The files are protected (maybe because it is a snap install). So, how to proceed? Thank you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160392306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160399226","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160399226","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160399226,"node_id":"IC_kwDOAAMmUc5FKkl6","user":{"login":"Kaspanoombro","id":62493556,"node_id":"MDQ6VXNlcjYyNDkzNTU2","avatar_url":"https://avatars.githubusercontent.com/u/62493556?v=4","gravatar_id":"","url":"https://api.github.com/users/Kaspanoombro","html_url":"https://github.com/Kaspanoombro","followers_url":"https://api.github.com/users/Kaspanoombro/followers","following_url":"https://api.github.com/users/Kaspanoombro/following{/other_user}","gists_url":"https://api.github.com/users/Kaspanoombro/gists{/gist_id}","starred_url":"https://api.github.com/users/Kaspanoombro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kaspanoombro/subscriptions","organizations_url":"https://api.github.com/users/Kaspanoombro/orgs","repos_url":"https://api.github.com/users/Kaspanoombro/repos","events_url":"https://api.github.com/users/Kaspanoombro/events{/privacy}","received_events_url":"https://api.github.com/users/Kaspanoombro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:40:01Z","updated_at":"2022-06-20T12:40:01Z","author_association":"NONE","body":"I just removed and try it using the terminal: sudo snap install couchdb. Again no problems, but it never asks for a admin password. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160399226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160400322","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160400322","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160400322,"node_id":"IC_kwDOAAMmUc5FKk3C","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:41:01Z","updated_at":"2022-06-20T12:41:01Z","author_association":"CONTRIBUTOR","body":"Ok, maybe it's \"used\" from your previous install...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160400322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160403690","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160403690","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160403690,"node_id":"IC_kwDOAAMmUc5FKlrq","user":{"login":"Kaspanoombro","id":62493556,"node_id":"MDQ6VXNlcjYyNDkzNTU2","avatar_url":"https://avatars.githubusercontent.com/u/62493556?v=4","gravatar_id":"","url":"https://api.github.com/users/Kaspanoombro","html_url":"https://github.com/Kaspanoombro","followers_url":"https://api.github.com/users/Kaspanoombro/followers","following_url":"https://api.github.com/users/Kaspanoombro/following{/other_user}","gists_url":"https://api.github.com/users/Kaspanoombro/gists{/gist_id}","starred_url":"https://api.github.com/users/Kaspanoombro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kaspanoombro/subscriptions","organizations_url":"https://api.github.com/users/Kaspanoombro/orgs","repos_url":"https://api.github.com/users/Kaspanoombro/repos","events_url":"https://api.github.com/users/Kaspanoombro/events{/privacy}","received_events_url":"https://api.github.com/users/Kaspanoombro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:44:31Z","updated_at":"2022-06-20T12:44:31Z","author_association":"NONE","body":"I purged previous installations and this a fresh install of Ubuntu. I did try to add a password in sudo nano /var/snap/couchdb/current/etc/local.ini but again i cannot write in this file.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160403690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160406572","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160406572","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160406572,"node_id":"IC_kwDOAAMmUc5FKmYs","user":{"login":"Kaspanoombro","id":62493556,"node_id":"MDQ6VXNlcjYyNDkzNTU2","avatar_url":"https://avatars.githubusercontent.com/u/62493556?v=4","gravatar_id":"","url":"https://api.github.com/users/Kaspanoombro","html_url":"https://github.com/Kaspanoombro","followers_url":"https://api.github.com/users/Kaspanoombro/followers","following_url":"https://api.github.com/users/Kaspanoombro/following{/other_user}","gists_url":"https://api.github.com/users/Kaspanoombro/gists{/gist_id}","starred_url":"https://api.github.com/users/Kaspanoombro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kaspanoombro/subscriptions","organizations_url":"https://api.github.com/users/Kaspanoombro/orgs","repos_url":"https://api.github.com/users/Kaspanoombro/repos","events_url":"https://api.github.com/users/Kaspanoombro/events{/privacy}","received_events_url":"https://api.github.com/users/Kaspanoombro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:47:29Z","updated_at":"2022-06-20T12:47:29Z","author_association":"NONE","body":"The snap installs version 3.1.1. Using the repository to install: 1.1.1.1. Enabling the Apache CouchDB package repository[¶](https://docs.couchdb.org/en/stable/install/unix.html#enabling-the-apache-couchdb-package-repository), is unable to install because there is not version for this ubuntu version. If i try to install the couchdb for focal ubuntu version, it does not work either.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160406572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160412272","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1160412272","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1160412272,"node_id":"IC_kwDOAAMmUc5FKnxw","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T12:53:24Z","updated_at":"2022-06-20T12:53:24Z","author_association":"CONTRIBUTOR","body":"This is an old version, and it seems the package isn't updated. I don't know about the snap release process, maybe @nickva can help?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160412272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160498891","html_url":"https://github.com/apache/couchdb/pull/4073#issuecomment-1160498891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4073","id":1160498891,"node_id":"IC_kwDOAAMmUc5FK87L","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T14:12:06Z","updated_at":"2022-06-20T14:24:10Z","author_association":"CONTRIBUTOR","body":"Autodetection should help avoid needing to match various version.\r\n\r\nAs far as 60 goes, I think at least that one we should try to test if possible in the full build. It has the nice property that it's made its way into the RHEL 8 (and it's open source tracking derivates) so it will likely get security updates.\r\n\r\nIn this case it seems rebar was built with an older Erlang (< 23). @jan would you happen to know?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160498891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160519335","html_url":"https://github.com/apache/couchdb/pull/4073#issuecomment-1160519335","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4073","id":1160519335,"node_id":"IC_kwDOAAMmUc5FLB6n","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T14:30:31Z","updated_at":"2022-06-20T14:30:31Z","author_association":"CONTRIBUTOR","body":"Saw similiar errors to, but with Erlang 25 / Rebar 1.13.4 (OTP 25) or Erlang 25 / Rebar 1.12.3 (OTP 23) on macOS (10.13)...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160519335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160877467","html_url":"https://github.com/apache/couchdb/pull/4075#issuecomment-1160877467","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4075","id":1160877467,"node_id":"IC_kwDOAAMmUc5FMZWb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-20T21:55:59Z","updated_at":"2022-06-20T21:55:59Z","author_association":"CONTRIBUTOR","body":"Example of usage:\r\n\r\n```\r\n(node1@127.0.0.1)1> couch_debug:opened_files().\r\n[{<0.417.0>,\r\n  {file_descriptor,prim_file,\r\n                   #{handle => #Ref<0.3584905603.118358043.227800>,\r\n                     owner => <0.417.0>,r_ahead_size => 0,\r\n                     r_buffer => #Ref<0.3584905603.118358017.227799>}},\r\n  \"/Users/nvatama/asf/dev/lib/node1/data/_nodes.couch\"},\r\n {<0.434.0>,\r\n  {file_descriptor,prim_file,\r\n                   #{handle => #Ref<0.3584905603.118358046.228058>,\r\n                     owner => <0.434.0>,r_ahead_size => 0,\r\n                     r_buffer => #Ref<0.3584905603.118358017.227932>}},\r\n  \"/Users/nvatama/asf/dev/lib/node1/data/_dbs.couch\"},\r\n ...\r\n```\r\n\r\n\r\n```\r\n(node1@127.0.0.1)3> couch_debug:opened_files_contains(\"_replicator\").\r\n[{<0.790.0>,\r\n  {file_descriptor,prim_file,\r\n                   #{handle => #Ref<0.3584905603.118358045.227768>,\r\n                     owner => <0.790.0>,r_ahead_size => 0,\r\n                     r_buffer => #Ref<0.3584905603.118358018.227921>}},\r\n  \"/Users/nvatama/asf/dev/lib/node1/data/shards/00000000-7fffffff/_replicator.1655761414.couch\"},\r\n```\r\n\r\n\r\n```\r\n couch_debug:opened_files_by_regexp(\".*_replicator.*\").\r\n[{<0.790.0>,\r\n  {file_descriptor,prim_file,\r\n                   #{handle => #Ref<0.3584905603.118358045.227768>,\r\n                     owner => <0.790.0>,r_ahead_size => 0,\r\n                     r_buffer => #Ref<0.3584905603.118358018.227921>}},\r\n  \"/Users/nvatama/asf/dev/lib/node1/data/shards/00000000-7fffffff/_replicator.1655761414.couch\"},\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1160877467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1161477050","html_url":"https://github.com/apache/couchdb/issues/4067#issuecomment-1161477050","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4067","id":1161477050,"node_id":"IC_kwDOAAMmUc5FOru6","user":{"login":"Kaspanoombro","id":62493556,"node_id":"MDQ6VXNlcjYyNDkzNTU2","avatar_url":"https://avatars.githubusercontent.com/u/62493556?v=4","gravatar_id":"","url":"https://api.github.com/users/Kaspanoombro","html_url":"https://github.com/Kaspanoombro","followers_url":"https://api.github.com/users/Kaspanoombro/followers","following_url":"https://api.github.com/users/Kaspanoombro/following{/other_user}","gists_url":"https://api.github.com/users/Kaspanoombro/gists{/gist_id}","starred_url":"https://api.github.com/users/Kaspanoombro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kaspanoombro/subscriptions","organizations_url":"https://api.github.com/users/Kaspanoombro/orgs","repos_url":"https://api.github.com/users/Kaspanoombro/repos","events_url":"https://api.github.com/users/Kaspanoombro/events{/privacy}","received_events_url":"https://api.github.com/users/Kaspanoombro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-21T09:10:53Z","updated_at":"2022-06-21T09:10:53Z","author_association":"NONE","body":"I sort it out. Just in case needs this information:\r\n1) Follow the instructions to install the CouchDB repository:\r\nhttps://docs.couchdb.org/en/stable/install/unix.html#enabling-the-apache-couchdb-package-repository\r\n\r\n2) Edit the /etc/apt/sources.list.d/couchdb.list and change the disti from jammy to focal\r\ndeb [signed-by=/usr/share/keyrings/couchdb-archive-keyring.gpg] https://apache.jfrog.io/artifactory/couchdb-deb/ focal main\r\n\r\n3) Install the required old packages:\r\nwget http://archive.ubuntu.com/ubuntu/pool/main/i/icu/libicu66_66.1-2ubuntu2_amd64.deb\r\nsudo dpkg -i libicu66_66.1-2ubuntu2_amd64.deb\r\nwget http://cz.archive.ubuntu.com/ubuntu/pool/main/m/mozjs68/libmozjs-68-0_68.6.0-1ubuntu1_amd64.deb\r\nsudo dpkg -i libmozjs-68-0_68.6.0-1ubuntu1_amd64.deb\r\n\r\n4) Install couchdb using sudo apt install couchdb","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1161477050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1161654623","html_url":"https://github.com/apache/couchdb/issues/4066#issuecomment-1161654623","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4066","id":1161654623,"node_id":"IC_kwDOAAMmUc5FPXFf","user":{"login":"cpallavi","id":22679369,"node_id":"MDQ6VXNlcjIyNjc5MzY5","avatar_url":"https://avatars.githubusercontent.com/u/22679369?v=4","gravatar_id":"","url":"https://api.github.com/users/cpallavi","html_url":"https://github.com/cpallavi","followers_url":"https://api.github.com/users/cpallavi/followers","following_url":"https://api.github.com/users/cpallavi/following{/other_user}","gists_url":"https://api.github.com/users/cpallavi/gists{/gist_id}","starred_url":"https://api.github.com/users/cpallavi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpallavi/subscriptions","organizations_url":"https://api.github.com/users/cpallavi/orgs","repos_url":"https://api.github.com/users/cpallavi/repos","events_url":"https://api.github.com/users/cpallavi/events{/privacy}","received_events_url":"https://api.github.com/users/cpallavi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-21T12:02:28Z","updated_at":"2022-06-21T12:02:28Z","author_association":"NONE","body":"Hi @nickva \r\n\r\nThank you for the quick reply, i would need a further help as i am pretty new to couch\r\n\r\n1) Where do i check this?\r\nrestrictive replication filter.\r\n\r\n2) Also can i put this connection timeout under local.d directory in any ini file?\r\n\r\n\r\nThanks\r\nPallavi C\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1161654623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1161752829","html_url":"https://github.com/apache/couchdb/pull/4070#issuecomment-1161752829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4070","id":1161752829,"node_id":"IC_kwDOAAMmUc5FPvD9","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-21T13:30:40Z","updated_at":"2022-06-21T13:30:40Z","author_association":"CONTRIBUTOR","body":"Re-add the `null`-clause for names to get the same behavior.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1161752829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1162606150","html_url":"https://github.com/apache/couchdb/issues/4066#issuecomment-1162606150","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4066","id":1162606150,"node_id":"IC_kwDOAAMmUc5FS_ZG","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-22T03:50:19Z","updated_at":"2022-06-22T03:50:19Z","author_association":"CONTRIBUTOR","body":"If your replication document doesn't have a filter specified then it's not a concern.\r\n\r\nYou can put the timeout in any local..d or local.ini file\r\n\r\nhttps://docs.couchdb.org/en/stable/config/replicator.html#replicator/connection_timeout","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1162606150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1162705466","html_url":"https://github.com/apache/couchdb/issues/4076#issuecomment-1162705466","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4076","id":1162705466,"node_id":"IC_kwDOAAMmUc5FTXo6","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-22T06:38:39Z","updated_at":"2022-06-22T06:38:39Z","author_association":"MEMBER","body":"I'm honestly impressed about how precise and detailed this issue is. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1162705466/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1162931805","html_url":"https://github.com/apache/couchdb/issues/4077#issuecomment-1162931805","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4077","id":1162931805,"node_id":"IC_kwDOAAMmUc5FUO5d","user":{"login":"tjrobinson","id":925311,"node_id":"MDQ6VXNlcjkyNTMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/925311?v=4","gravatar_id":"","url":"https://api.github.com/users/tjrobinson","html_url":"https://github.com/tjrobinson","followers_url":"https://api.github.com/users/tjrobinson/followers","following_url":"https://api.github.com/users/tjrobinson/following{/other_user}","gists_url":"https://api.github.com/users/tjrobinson/gists{/gist_id}","starred_url":"https://api.github.com/users/tjrobinson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjrobinson/subscriptions","organizations_url":"https://api.github.com/users/tjrobinson/orgs","repos_url":"https://api.github.com/users/tjrobinson/repos","events_url":"https://api.github.com/users/tjrobinson/events{/privacy}","received_events_url":"https://api.github.com/users/tjrobinson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-22T10:33:48Z","updated_at":"2022-06-22T10:33:48Z","author_association":"NONE","body":"Output from running `couchdb` directly:\r\n\r\n```bash\r\nroot@LDC-AZU-COU2:/opt/bitnami/couchdb/etc# couchdb\r\nConfiguration Settings:\r\n  [admins] admin=\"-pbkdf2-8857f71e0b770c567210b14b157ba415350f067c,d9b9f7602fd331a8750bf69714ce5529,10\"\r\n  [attachments] compressible_types=\"text/*, application/javascript, application/json, application/xml\"\r\n  [attachments] compression_level=\"8\"\r\n  [chttpd] backlog=\"512\"\r\n  [chttpd] bind_address=\"0.0.0.0\"\r\n  [chttpd] max_db_number_for_dbs_info_req=\"100\"\r\n  [chttpd] port=\"5984\"\r\n  [chttpd] prefer_minimal=\"Cache-Control, Content-Length, Content-Range, Content-Type, ETag, Server, Transfer-Encoding, Vary\"\r\n  [chttpd] require_valid_user=\"true\"\r\n  [chttpd] server_options=\"[{recbuf, undefined}]\"\r\n  [chttpd] socket_options=\"[{sndbuf, 262144}, {nodelay, true}]\"\r\n  [cluster] n=\"3\"\r\n  [cluster] q=\"2\"\r\n  [cors] credentials=\"true\"\r\n  [cors] headers=\"accept, authorization, content-type, origin, referer\"\r\n  [cors] methods=\"GET, PUT, POST, HEAD, DELETE\"\r\n  [cors] origins=\"*\"\r\n  [couch_httpd_auth] allow_persistent_cookies=\"true\"\r\n  [couch_httpd_auth] auth_cache_size=\"50\"\r\n  [couch_httpd_auth] authentication_db=\"_users\"\r\n  [couch_httpd_auth] authentication_redirect=\"/_utils/session.html\"\r\n  [couch_httpd_auth] iterations=\"10\"\r\n  [couch_httpd_auth] require_valid_user=\"true\"\r\n  [couch_httpd_auth] secret=\"2ddfd16d6682d9e3037cbf234911474e\"\r\n  [couch_httpd_auth] timeout=\"600\"\r\n  [couch_peruser] database_prefix=\"userdb-\"\r\n  [couch_peruser] delete_dbs=\"false\"\r\n  [couch_peruser] enable=\"false\"\r\n  [couchdb] attachment_stream_buffer_size=\"4096\"\r\n  [couchdb] changes_doc_ids_optimization_threshold=\"100\"\r\n  [couchdb] database_dir=\"/bitnami/couchdb/data\"\r\n  [couchdb] default_engine=\"couch\"\r\n  [couchdb] default_security=\"admin_only\"\r\n  [couchdb] file_compression=\"snappy\"\r\n  [couchdb] max_dbs_open=\"500\"\r\n  [couchdb] max_document_size=\"8000000\"\r\n  [couchdb] os_process_timeout=\"5000\"\r\n  [couchdb] users_db_security_editable=\"false\"\r\n  [couchdb] uuid=\"0ed37b0e0f1c26daae00df09e76bff56\"\r\n  [couchdb] view_index_dir=\"/bitnami/couchdb/data\"\r\n  [couchdb_engines] couch=\"couch_bt_engine\"\r\n  [csp] enable=\"true\"\r\n  [feature_flags] partitioned||*=\"true\"\r\n  [httpd] WWW-Authenticate=\"Basic realm=\\\"administrator\\\"\"\r\n  [httpd] allow_jsonp=\"false\"\r\n  [httpd] authentication_handlers=\"{couch_httpd_auth, cookie_authentication_handler}, {couch_httpd_auth, default_authentication_handler}\"\r\n  [httpd] bind_address=\"127.0.0.1\"\r\n  [httpd] config_whitelist=\"[{httpd,config_whitelist}]\"\r\n  [httpd] enable_cors=\"true\"\r\n  [httpd] enable_xframe_options=\"false\"\r\n  [httpd] max_http_request_size=\"4294967296\"\r\n  [httpd] port=\"5986\"\r\n  [httpd] secure_rewrites=\"true\"\r\n  [httpd] socket_options=\"[{sndbuf, 262144}]\"\r\n  [indexers] couch_mrview=\"true\"\r\n  [ioq] concurrency=\"10\"\r\n  [ioq] ratio=\"0.01\"\r\n  [ioq.bypass] compaction=\"false\"\r\n  [ioq.bypass] os_process=\"true\"\r\n  [ioq.bypass] read=\"true\"\r\n  [ioq.bypass] shard_sync=\"false\"\r\n  [ioq.bypass] view_update=\"true\"\r\n  [ioq.bypass] write=\"true\"\r\n  [log] file=\"/opt/bitnami/couchdb/var/log/couch.log\"\r\n  [log] level=\"debug\"\r\n  [log] writer=\"file\"\r\n  [query_server_config] os_process_limit=\"100\"\r\n  [query_server_config] reduce_limit=\"true\"\r\n  [replicator] connection_timeout=\"30000\"\r\n  [replicator] http_connections=\"20\"\r\n  [replicator] interval=\"60000\"\r\n  [replicator] max_churn=\"20\"\r\n  [replicator] max_jobs=\"500\"\r\n  [replicator] retries_per_request=\"5\"\r\n  [replicator] socket_options=\"[{keepalive, true}, {nodelay, false}]\"\r\n  [replicator] ssl_certificate_max_depth=\"3\"\r\n  [replicator] startup_jitter=\"5000\"\r\n  [replicator] verify_ssl_certificates=\"false\"\r\n  [replicator] worker_batch_size=\"500\"\r\n  [replicator] worker_processes=\"4\"\r\n  [ssl] port=\"6984\"\r\n  [uuids] algorithm=\"sequential\"\r\n  [uuids] max_count=\"1000\"\r\n  [vendor] name=\"The Apache Software Foundation\"\r\n{\"Kernel pid terminated\",application_controller,\"{application_start_failure,mem3,{{shutdown,{failed_to_start_child,mem3_shards,{{case_clause,{{badmatch,{error,enospc}},[{couch_bt_engine,init,2,[{file,\\\"src/couch_bt_engine.erl\\\"},{line,163}]},{couch_db_engine,init,3,[{file,\\\"src/couch_db_engine.erl\\\"},{line,775}]},{couch_db_updater,init,1,[{file,\\\"src/couch_db_updater.erl\\\"},{line,43}]},{proc_lib,init_p_do_apply,3,[{file,\\\"proc_lib.erl\\\"},{line,249}]}]}},[{mem3_util,ensure_exists,1,[{file,\\\"src/mem3_util.erl\\\"},{line,269}]},{mem3_shards,get_update_seq,0,[{file,\\\"src/mem3_shards.erl\\\"},{line,321}]},{mem3_shards,init,1,[{file,\\\"src/mem3_shards.erl\\\"},{line,208}]},{gen_server,init_it,2,[{file,\\\"gen_server.erl\\\"},{line,374}]},{gen_server,init_it,6,[{file,\\\"gen_server.erl\\\"},{line,342}]},{proc_lib,init_p_do_apply,3,[{file,\\\"proc_lib.erl\\\"},{line,249}]}]}}},{mem3_app,start,[normal,[]]}}}\"}\r\nKernel pid terminated (application_controller) ({application_start_failure,mem3,{{shutdown,{failed_to_start_child,mem3_shards,{{case_clause,{{badmatch,{error,enospc}},[{couch_bt_engine,init,2,[{file,\"\r\n\r\nCrash dump is being written to: erl_crash.dump...done\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1162931805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1163004097","html_url":"https://github.com/apache/couchdb/issues/4077#issuecomment-1163004097","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4077","id":1163004097,"node_id":"IC_kwDOAAMmUc5FUgjB","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-22T11:53:33Z","updated_at":"2022-06-22T11:58:48Z","author_association":"CONTRIBUTOR","body":"Please use the latest CouchDB (v3.2.2) with the latest security fixes.\r\n\r\nUse our [docs](https://docs.couchdb.org/en/stable/install/unix.html) to install CouchDB.\r\n\r\nI don't know how Bitnami configured CouchDB, but there should a separate couchdb user. So I would guess it is an access rights problem for `_dbs.couch, _nodes.couch and shards` files/directories.\r\n\r\nAdditional see this [discussion](https://couchdb.slack.com/archives/C49LEE7NW/p1655821459662869).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1163004097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1163139239","html_url":"https://github.com/apache/couchdb/issues/4077#issuecomment-1163139239","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4077","id":1163139239,"node_id":"IC_kwDOAAMmUc5FVBin","user":{"login":"tjrobinson","id":925311,"node_id":"MDQ6VXNlcjkyNTMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/925311?v=4","gravatar_id":"","url":"https://api.github.com/users/tjrobinson","html_url":"https://github.com/tjrobinson","followers_url":"https://api.github.com/users/tjrobinson/followers","following_url":"https://api.github.com/users/tjrobinson/following{/other_user}","gists_url":"https://api.github.com/users/tjrobinson/gists{/gist_id}","starred_url":"https://api.github.com/users/tjrobinson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjrobinson/subscriptions","organizations_url":"https://api.github.com/users/tjrobinson/orgs","repos_url":"https://api.github.com/users/tjrobinson/repos","events_url":"https://api.github.com/users/tjrobinson/events{/privacy}","received_events_url":"https://api.github.com/users/tjrobinson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-22T14:01:37Z","updated_at":"2022-06-22T14:01:37Z","author_association":"NONE","body":"It turned out to be that there was no disk space remaining on the partition containing the `data` directory. The clue was `error,enospc` in the logs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1163139239/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1163147995","html_url":"https://github.com/apache/couchdb/issues/4077#issuecomment-1163147995","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4077","id":1163147995,"node_id":"IC_kwDOAAMmUc5FVDrb","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-22T14:07:54Z","updated_at":"2022-06-22T14:07:54Z","author_association":"CONTRIBUTOR","body":"Great, but use the current version and don't run CouchDB as root user!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1163147995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165457951","html_url":"https://github.com/apache/couchdb/issues/3823#issuecomment-1165457951","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3823","id":1165457951,"node_id":"IC_kwDOAAMmUc5Fd3of","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-24T10:56:35Z","updated_at":"2022-06-24T10:56:35Z","author_association":"CONTRIBUTOR","body":"Hi, is this still a problem? I can't reproduce this.\r\n\r\n### Steps I done\r\n\r\n1. Start a server, e.g (`./dev/run -a a:a`)\r\n2. Delete `_users` db\r\n3. curl `_all_dbs` with `curl 'http://a:a@localhost:15984/_all_dbs'`\r\n\r\n### Result\r\n```\r\ncurl 'http://a:a@localhost:15984/_all_dbs'\r\n[\"jwtdb\",\"jwttestdb\"]\r\n```\r\n\r\nBut we getting this error in the logs:\r\n```\r\n[error] 2022-06-24T10:54:13.245132Z node1@127.0.0.1 emulator -------- Error in process <0.1055.0> on node 'node1@127.0.0.1' with exit value:\r\n{database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,426}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,401}]},{mem3_shards,load_shards_from_disk,2,[{file,\"src/mem3_shards.erl\"},{line,430}]},{mem3_shards,for_docid,3,[{file,\"src/mem3_shards.erl\"},{line,100}]},{fabric_doc_open,go,3,[{file,\"src/fabric_doc_open.erl\"},{line,39}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,\"src/chttpd_auth_cache.erl\"},{line,212}]},{chttpd_auth_cache,listen_for_changes,1,[{file,\"src/chttpd_auth_cache.erl\"},{line,158}]}]}\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165457951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165879502","html_url":"https://github.com/apache/couchdb/issues/4081#issuecomment-1165879502","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4081","id":1165879502,"node_id":"IC_kwDOAAMmUc5FfejO","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-24T19:36:04Z","updated_at":"2022-06-24T19:36:04Z","author_association":"CONTRIBUTOR","body":"Good idea @camtauxe.\r\n\r\nFor now I believe it might be possible to use the focal version","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165879502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165895462","html_url":"https://github.com/apache/couchdb/issues/4081#issuecomment-1165895462","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4081","id":1165895462,"node_id":"IC_kwDOAAMmUc5Fficm","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-24T20:02:31Z","updated_at":"2022-06-24T20:02:31Z","author_association":"CONTRIBUTOR","body":"@nickva maybe we should add it to the CI too? Should I reopen #4062?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165895462/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165896890","html_url":"https://github.com/apache/couchdb/issues/4081#issuecomment-1165896890","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4081","id":1165896890,"node_id":"IC_kwDOAAMmUc5Ffiy6","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-24T20:04:42Z","updated_at":"2022-06-24T20:04:42Z","author_association":"CONTRIBUTOR","body":"Good idea @big-r81 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1165896890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1167212468","html_url":"https://github.com/apache/couchdb/issues/3581#issuecomment-1167212468","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3581","id":1167212468,"node_id":"IC_kwDOAAMmUc5Fkj-0","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-27T11:05:04Z","updated_at":"2022-06-27T11:05:04Z","author_association":"CONTRIBUTOR","body":"Hi, ist this still a problem with the current release version (3.2.2)?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1167212468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1167789834","html_url":"https://github.com/apache/couchdb/pull/4082#issuecomment-1167789834","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4082","id":1167789834,"node_id":"IC_kwDOAAMmUc5Fmw8K","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-27T19:28:13Z","updated_at":"2022-06-27T19:39:10Z","author_association":"CONTRIBUTOR","body":"Adding the VM worked as expected, however it looks it's too slow to run tests.\r\n\r\nFor instance x64 tests times look like:\r\n\r\n```\r\n[2022-06-27T18:39:00.952Z]   couch_db: is_owner_test...ok\r\n[2022-06-27T18:39:00.952Z]   module 'couch_db_tests'\r\n[2022-06-27T18:39:00.952Z]     Database create/delete tests\r\n[2022-06-27T18:39:01.301Z]       couch_db_tests:93: should_create_db...[0.015 s] ok\r\n[2022-06-27T18:39:01.301Z]       couch_db_tests:102: should_delete_db...[0.013 s] ok\r\n[2022-06-27T18:39:01.301Z]       [done in 0.034 s]\r\n[2022-06-27T18:39:01.301Z]     Multiple database create/delete tests\r\n[2022-06-27T18:39:01.651Z]       couch_db_tests:112: should_create_multiple_dbs...[0.063 s] ok\r\n[2022-06-27T18:39:01.651Z]       couch_db_tests:125: should_delete_multiple_dbs...[0.069 s] ok\r\n[2022-06-27T18:39:01.651Z]       [done in 0.138 s]\r\n[2022-06-27T18:39:01.651Z]     Continious database create/delete tests\r\n[2022-06-27T18:39:02.001Z]       couch_db_tests:138: should_create_delete_database_continuously (10 times)...[0.116 s] ok\r\n[2022-06-27T18:39:03.209Z]       couch_db_tests:138: should_create_delete_database_continuously (100 times)...[1.107 s] ok\r\n```\r\n(From https://ci-couchdb.apache.org/blue/rest/organizations/jenkins/pipelines/jenkins-cm1/pipelines/FullPlatformMatrix/branches/jenkins-bring-back-ppc64le/runs/2/nodes/218/log/?start=0)\r\n\r\nAnd PowerPC ones are quite a bit slower\r\n\r\n```\r\n[2022-06-27T18:50:16.187Z] couch_db: is_owner_test...ok\r\n[2022-06-27T18:50:16.187Z] module 'couch_db_tests'\r\n[2022-06-27T18:50:16.187Z]   Database create/delete tests\r\n[2022-06-27T18:50:18.270Z]     couch_db_tests:93: should_create_db...[1.548 s] ok\r\n[2022-06-27T18:50:19.869Z]     couch_db_tests:102: should_delete_db...[1.461 s] ok\r\n[2022-06-27T18:50:19.869Z]     [done in 3.016 s]\r\n[2022-06-27T18:50:19.869Z]   Multiple database create/delete tests\r\n[2022-06-27T18:50:25.216Z]     couch_db_tests:112: should_create_multiple_dbs...*timed out*\r\n[2022-06-27T18:50:25.216Z]     undefined\r\n[2022-06-27T18:50:30.124Z]   couch_db_tests:125: should_delete_multiple_dbs...*timed out*\r\n[2022-06-27T18:50:30.124Z]   undefined\r\n[2022-06-27T18:50:30.602Z] [done in 10.003 s]\r\n[2022-06-27T18:50:30.602Z] Continious database create/delete tests\r\n[2022-06-27T18:50:48.560Z] couch_db_tests:138: should_create_delete_database_continuously (10 times)...[15.361 s] ok\r\n[2022-06-27T18:52:01.403Z] couch_db_tests:138: should_create_delete_database_continuously (100 times)...[73.174 s] ok\r\n[2022-06-27T18:52:01.403Z] [done in 88.542 s]\r\n[2022-06-27T18:52:01.403Z] Database open tests\r\n```\r\n\r\n(From https://ci-couchdb.apache.org/blue/rest/organizations/jenkins/pipelines/jenkins-cm1/pipelines/FullPlatformMatrix/branches/jenkins-bring-back-ppc64le/runs/2/nodes/72/log/?start=0)\r\n\r\n`should_create_delete_database_continuously (100 times)` is about 73x slower and `should_create_db` at `1.548` vs `0.015 s` which also 100x slower.\r\n\r\nIt could be disk I/O or CPU throttling, haven't dove in to check yet, but I think will hold off enabling it for now as it would make the full build flaky.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1167789834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1168300118","html_url":"https://github.com/apache/couchdb/issues/4081#issuecomment-1168300118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4081","id":1168300118,"node_id":"IC_kwDOAAMmUc5FothW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-28T06:46:41Z","updated_at":"2022-06-28T06:48:59Z","author_association":"CONTRIBUTOR","body":"@camtauxe @big-r81 I uploaded a jammy CI / build image then built and uploaded packages for jammy in https://github.com/apache/couchdb-pkg/pull/100\r\n\r\nIt should be immediately available via apt install:\r\n\r\nhttps://apache.jfrog.io/artifactory/couchdb-deb/pool/C/CouchDB/couchdb_3.2.2-2~jammy_amd64.deb\r\n\r\nI had noticed that either libicu or mozjs78 brings a tzdata package and then it ask for an interactive timezone choice during install.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1168300118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1168571780","html_url":"https://github.com/apache/couchdb/issues/3836#issuecomment-1168571780","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3836","id":1168571780,"node_id":"IC_kwDOAAMmUc5Fpv2E","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-28T10:59:34Z","updated_at":"2022-06-28T10:59:34Z","author_association":"NONE","body":"For any JWT token that is valid for a logon, I want to POST to the /_session API and get a session cookie assigned WITHOUT having to provide a username/password (because I already have a valid token). Subsequently, if want to use the session cookie for data I/O without having to use the JWT token again.\r\n\r\nThe reason why I'm asking is that some people from our infrastucture department had concerns about \"abusing\" JWT tokens as session cookies, pointing to some internet articles. I cannot take part in that discussion, not sure how \"bad\" that really would be. But I can somewhat understand, as, for example, MS Web Application Proxy uses an edge token for session management.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1168571780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1169797657","html_url":"https://github.com/apache/couchdb/pull/2326#issuecomment-1169797657","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2326","id":1169797657,"node_id":"IC_kwDOAAMmUc5FubIZ","user":{"login":"loguntsov","id":687413,"node_id":"MDQ6VXNlcjY4NzQxMw==","avatar_url":"https://avatars.githubusercontent.com/u/687413?v=4","gravatar_id":"","url":"https://api.github.com/users/loguntsov","html_url":"https://github.com/loguntsov","followers_url":"https://api.github.com/users/loguntsov/followers","following_url":"https://api.github.com/users/loguntsov/following{/other_user}","gists_url":"https://api.github.com/users/loguntsov/gists{/gist_id}","starred_url":"https://api.github.com/users/loguntsov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loguntsov/subscriptions","organizations_url":"https://api.github.com/users/loguntsov/orgs","repos_url":"https://api.github.com/users/loguntsov/repos","events_url":"https://api.github.com/users/loguntsov/events{/privacy}","received_events_url":"https://api.github.com/users/loguntsov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-29T10:13:44Z","updated_at":"2022-06-29T10:13:44Z","author_association":"NONE","body":"Hello. There was undefined module call couch_md_index_manager:get_group_pid ( https://github.com/apache/couchdb/pull/2326/files#diff-113cd247cfe56b1aa882a37daa2856fd33bab2e2a6183034eb3a30088960dc13R246 ). Could somebody explain me where i can find this module ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1169797657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1170237638","html_url":"https://github.com/apache/couchdb/pull/2326#issuecomment-1170237638","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2326","id":1170237638,"node_id":"IC_kwDOAAMmUc5FwGjG","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-29T16:55:31Z","updated_at":"2022-06-29T16:55:31Z","author_association":"CONTRIBUTOR","body":"@loguntsov that was an experimental \"schema\" discovery feature I believe that never made it into a release\r\n\r\nIn the recent version of main the reference to that module should be removed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1170237638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1171340638","html_url":"https://github.com/apache/couchdb/pull/4083#issuecomment-1171340638","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4083","id":1171340638,"node_id":"IC_kwDOAAMmUc5F0T1e","user":{"login":"jiahuili430","id":54631519,"node_id":"MDQ6VXNlcjU0NjMxNTE5","avatar_url":"https://avatars.githubusercontent.com/u/54631519?v=4","gravatar_id":"","url":"https://api.github.com/users/jiahuili430","html_url":"https://github.com/jiahuili430","followers_url":"https://api.github.com/users/jiahuili430/followers","following_url":"https://api.github.com/users/jiahuili430/following{/other_user}","gists_url":"https://api.github.com/users/jiahuili430/gists{/gist_id}","starred_url":"https://api.github.com/users/jiahuili430/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiahuili430/subscriptions","organizations_url":"https://api.github.com/users/jiahuili430/orgs","repos_url":"https://api.github.com/users/jiahuili430/repos","events_url":"https://api.github.com/users/jiahuili430/events{/privacy}","received_events_url":"https://api.github.com/users/jiahuili430/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-30T15:09:24Z","updated_at":"2022-06-30T15:09:24Z","author_association":"CONTRIBUTOR","body":"Tried it locally with `Erlang 23.3.2` and `Elixir 1.13.4-otp-23`, and it works!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1171340638/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1172504269","html_url":"https://github.com/apache/couchdb/pull/4082#issuecomment-1172504269","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4082","id":1172504269,"node_id":"IC_kwDOAAMmUc5F4v7N","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-01T16:14:14Z","updated_at":"2022-07-01T16:14:14Z","author_association":"CONTRIBUTOR","body":"A new VM was built with an NVMe disk which fixed the problem, so it looks good to go.\r\n\r\nEunit tests runs in 15 vs 12 on other nodes but interestingly, elixir and other tests run a bit faster, even.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1172504269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589820","html_url":"https://github.com/apache/couchdb/issues/4215#issuecomment-1280589820","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4215","id":1280589820,"node_id":"IC_kwDOAAMmUc5MVD_8","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-01T18:02:52Z","updated_at":"2022-07-01T18:03:19Z","author_association":"CONTRIBUTOR","body":"Hi, it will be fixed when apache/couchdb-documentation#737 is merged. Thanks for the hint! 👍🏼","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589820/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173040202","html_url":"https://github.com/apache/couchdb/pull/4062#issuecomment-1173040202","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4062","id":1173040202,"node_id":"IC_kwDOAAMmUc5F6yxK","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-03T08:49:29Z","updated_at":"2022-07-03T08:49:29Z","author_association":"CONTRIBUTOR","body":"Closing this PR, superseded by #4086. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173040202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173290768","html_url":"https://github.com/apache/couchdb/pull/4086#issuecomment-1173290768","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4086","id":1173290768,"node_id":"IC_kwDOAAMmUc5F7v8Q","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-04T03:11:55Z","updated_at":"2022-07-04T03:11:55Z","author_association":"CONTRIBUTOR","body":"For some reason still getting\r\n\r\n```\r\n[2022-07-03T20:25:42.978Z] ==> rel (compile)\r\n[2022-07-03T20:25:42.978Z] ==> ****-cm1_PullRequests_PR-4086 (compile)\r\n[2022-07-03T20:25:43.719Z] warning: the VM is running with native name encoding of latin1 which may cause Elixir to malfunction as it expects utf8. Please ensure your locale is set to UTF-8 (which can be verified by running \"locale\" in your shell)\r\n[2022-07-03T20:25:44.066Z] \r\n[2022-07-03T20:25:44.066Z] 20:25:43.844 [error] beam/beam_load.c(86): Error loading module 'Elixir.Code.Formatter':\r\n[2022-07-03T20:25:44.066Z]   lambda already defined for label 749. To fix this, please recompile this module with an OTP 25 compiler.\r\n[2022-07-03T20:25:44.066Z] \r\n[2022-07-03T20:25:44.066Z] \r\n[2022-07-03T20:25:44.066Z] \r\n[2022-07-03T20:25:44.066Z] 20:25:43.844 [error] Loading of /usr/local/bin/../lib/elixir/ebin/Elixir.Code.Formatter.beam failed: :badfile\r\n[2022-07-03T20:25:44.066Z] \r\n[2022-07-03T20:25:44.066Z] ** (UndefinedFunctionError) function Code.Formatter.locals_without_parens/0 is undefined (module Code.Formatter is not available)\r\n[2022-07-03T20:25:44.066Z]     (elixir 1.13.4) Code.Formatter.locals_without_parens()\r\n[2022-07-03T20:25:44.066Z]     (elixir 1.13.4) lib/code/normalizer.ex:22: Code.Normalizer.normalize/2\r\n[2022-07-03T20:25:44.066Z]     (elixir 1.13.4) lib/code.ex:1107: Code.quoted_to_algebra/2\r\n[2022-07-03T20:25:44.066Z] make[1]: *** [Makefile:247: elixir-init] Error 1\r\n[2022-07-03T20:25:44.066Z] make[1]: Leaving directory '/home/****/workspace/****-cm1_PullRequests_PR-4086'\r\n[2022-07-03T20:25:44.066Z] make: *** [Makefile:155: check] Error 2\r\n```\r\n\r\nEven after building an image with bullseye erlang 25.0.2 and downloading the pre-compiled Elixir 1.13.4 for OTP 25 it still shows the error.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173290768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173475969","html_url":"https://github.com/apache/couchdb/pull/4086#issuecomment-1173475969","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4086","id":1173475969,"node_id":"IC_kwDOAAMmUc5F8dKB","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-04T07:53:02Z","updated_at":"2022-07-04T07:53:02Z","author_association":"CONTRIBUTOR","body":"Maybe we should try to compile Elixir by ourselves with the use of `kiex` to test that's not a problem with the binary?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173475969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173910919","html_url":"https://github.com/apache/couchdb/issues/4022#issuecomment-1173910919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4022","id":1173910919,"node_id":"IC_kwDOAAMmUc5F-HWH","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-04T14:55:56Z","updated_at":"2022-07-04T14:55:56Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\n`{error,erofs}` means a read-only filesystem. Do you have write access?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173910919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173920748","html_url":"https://github.com/apache/couchdb/issues/3958#issuecomment-1173920748","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3958","id":1173920748,"node_id":"IC_kwDOAAMmUc5F-Jvs","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-04T15:06:50Z","updated_at":"2022-07-04T15:06:50Z","author_association":"CONTRIBUTOR","body":"Hi, so it's an Arch Linux behavior?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173920748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173937418","html_url":"https://github.com/apache/couchdb/pull/4086#issuecomment-1173937418","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4086","id":1173937418,"node_id":"IC_kwDOAAMmUc5F-N0K","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-04T15:25:37Z","updated_at":"2022-07-04T15:25:55Z","author_association":"CONTRIBUTOR","body":"@big-r81 good idea to try.\r\n\r\nI had tried to remove as many things from `Jenkinsfile.pr` as possible to see if the problem would still occur. Interestingly I cannot make it fail locally with the same image so it makes me think there is something silly in the Jenkins pipeline.\r\n\r\nIt's as if it using a cached version of the 25.0.2 docker image I had uploaded first, which didn't have OTP 25 compiled Elixir beam files. Another idea is that the Jenkins matrix build and sharing of workspaces somehow makes the builds see each other's Elixir beams (the workspaces are not totally isolated) so we end up reading older beam files.\r\n\r\nNext I was going to disable the matrix build and build just for the 25.0.2 and then try to load the beam file in the Erlang interpreter in Jenkins and make it output the compiler details to see if it's actually compiled with OTP 25 or not (it would detect using the old version of the image).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1173937418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174461771","html_url":"https://github.com/apache/couchdb/issues/3958#issuecomment-1174461771","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3958","id":1174461771,"node_id":"IC_kwDOAAMmUc5GAN1L","user":{"login":"trames57","id":42688832,"node_id":"MDQ6VXNlcjQyNjg4ODMy","avatar_url":"https://avatars.githubusercontent.com/u/42688832?v=4","gravatar_id":"","url":"https://api.github.com/users/trames57","html_url":"https://github.com/trames57","followers_url":"https://api.github.com/users/trames57/followers","following_url":"https://api.github.com/users/trames57/following{/other_user}","gists_url":"https://api.github.com/users/trames57/gists{/gist_id}","starred_url":"https://api.github.com/users/trames57/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trames57/subscriptions","organizations_url":"https://api.github.com/users/trames57/orgs","repos_url":"https://api.github.com/users/trames57/repos","events_url":"https://api.github.com/users/trames57/events{/privacy}","received_events_url":"https://api.github.com/users/trames57/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-04T23:42:43Z","updated_at":"2022-07-04T23:42:43Z","author_association":"NONE","body":"I put a bug post into arch linux but no one has responded to it yet. I would say the epmd issue not using the environment variable as described is not an arch issue. Given that it is 127.0.0.1, it should not be trying with ::1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174461771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174567277","html_url":"https://github.com/apache/couchdb/pull/4086#issuecomment-1174567277","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4086","id":1174567277,"node_id":"IC_kwDOAAMmUc5GAnlt","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-05T03:34:40Z","updated_at":"2022-07-05T03:34:40Z","author_association":"CONTRIBUTOR","body":"It seems as if we're running with the wrong docker image.\r\n\r\nI had added a debug print of the beam file which is supposedly \"bad\" in the Jenkins job for 25.0.2 image.\r\n\r\nLocally it prints:\r\n```\r\nerl -noshell -eval '{ok, F} = file:read_file(\"/usr/local/lib/elixir/ebin/Elixir.Code.Formatter.beam\"), {ok, Info} = beam_lib:chunks(F, [compile_info, attributes]), erlang:display(Info), halt().'\r\n\r\n{'Elixir.Code.Formatter',[{compile_info,[\r\n  {version,\"8.2\"},{options,[no_spawn_compiler_process,from_core,no_core_prepare,no_auto_import]}, \r\n  {source,\"/home/build/elixir/lib/elixir/lib/code/formatter.ex\"}]},\r\n  {attributes,[{vsn,[212914653288359122158021616057205722824]}]}]}\r\n```\r\n\r\nand on Jenkins it prints\r\n```\r\n[2022-07-05T00:38:30.257Z] + erl -noshell -eval {ok, F} = file:read_file(\"/usr/local/lib/elixir/ebin/Elixir.Code.Formatter.beam\"), {ok, Info} = beam_lib:chunks(F, [compile_info, attributes]), erlang:display(Info), halt().\r\n\r\n[2022-07-05T00:38:30.257Z] {'Elixir.Code.Formatter',[{compile_info,[\r\n   {version,\"7.5.4\"},{options,[no_spawn_compiler_process,from_core,no_core_prepare,no_auto_import]},{source,\"/Users/jose/OSS/elixir/lib/elixir/lib/code/formatter.ex\"}]},\r\n{attributes,[{vsn,[29502098686927955986765935609998676965]}]}]}\r\n```\r\n\r\nBut now I am wondering how we ended up with that outdated file/image...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174567277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174654594","html_url":"https://github.com/apache/couchdb/pull/4086#issuecomment-1174654594","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4086","id":1174654594,"node_id":"IC_kwDOAAMmUc5GA86C","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-05T06:08:30Z","updated_at":"2022-07-05T06:08:30Z","author_association":"CONTRIBUTOR","body":"@big-r81 well it does seem it cached the docker image somehow. To \"fix\" it I deleted the bullseye 25.0.2 image from docker and re-created it.\r\n\r\nThe long version is I  created a new PR for the CI test only (a new branch) after I deleted the tag from docker. and noticed that it  ran successfully (!).  Which is bonkers because the image from docker hub with that tag should have been removed. And I was expecting an error that it couldn't find the image.\r\n\r\nThen I re-built the image from couchdb-ci and pushed it also re-created the CI PR and now everything passes https://github.com/apache/couchdb/pull/4088\r\n\r\nSo there is some caching and connection to rebuilding the same PR (pushing to the same branch) where it decided to reuse the exact docker image ...?\r\n\r\nAnyway I'll close this PR and let's just roll with that other one ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174654594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174656296","html_url":"https://github.com/apache/couchdb/pull/4088#issuecomment-1174656296","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4088","id":1174656296,"node_id":"IC_kwDOAAMmUc5GA9Uo","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-05T06:11:28Z","updated_at":"2022-07-05T06:11:28Z","author_association":"CONTRIBUTOR","body":"This is a re-created https://github.com/apache/couchdb/pull/4086. There were some issues with using the wrong docker image for that PR but creating a new one (this one) and re-building the image also helped.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174656296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174922130","html_url":"https://github.com/apache/couchdb/issues/3309#issuecomment-1174922130","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3309","id":1174922130,"node_id":"IC_kwDOAAMmUc5GB-OS","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-05T10:54:44Z","updated_at":"2022-07-05T10:54:44Z","author_association":"CONTRIBUTOR","body":"Closing this old issue, the windows installer of CouchDB doesn't put anything into system32.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1174922130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177263512","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-1177263512","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":1177263512,"node_id":"IC_kwDOAAMmUc5GK52Y","user":{"login":"tudordumitriu","id":4671554,"node_id":"MDQ6VXNlcjQ2NzE1NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4671554?v=4","gravatar_id":"","url":"https://api.github.com/users/tudordumitriu","html_url":"https://github.com/tudordumitriu","followers_url":"https://api.github.com/users/tudordumitriu/followers","following_url":"https://api.github.com/users/tudordumitriu/following{/other_user}","gists_url":"https://api.github.com/users/tudordumitriu/gists{/gist_id}","starred_url":"https://api.github.com/users/tudordumitriu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tudordumitriu/subscriptions","organizations_url":"https://api.github.com/users/tudordumitriu/orgs","repos_url":"https://api.github.com/users/tudordumitriu/repos","events_url":"https://api.github.com/users/tudordumitriu/events{/privacy}","received_events_url":"https://api.github.com/users/tudordumitriu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-07T08:44:33Z","updated_at":"2022-07-07T08:44:33Z","author_association":"NONE","body":"Hi @rnewson \r\nI see the comment this was addressed and we are running 3.2.2. but the bug is still replicating.\r\nWas this released in 3.2.2. and is there anything special we have to configure?\r\nThanks  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177263512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177474132","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-1177474132","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":1177474132,"node_id":"IC_kwDOAAMmUc5GLtRU","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-07T11:41:49Z","updated_at":"2022-07-07T11:41:49Z","author_association":"MEMBER","body":"@tudordumitriu hm, those fixes do not appear to be present in 3.2.2.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177474132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177475828","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-1177475828","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":1177475828,"node_id":"IC_kwDOAAMmUc5GLtr0","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-07T11:43:10Z","updated_at":"2022-07-07T11:43:10Z","author_association":"MEMBER","body":"we will figure out why the fixes did not get released yet and make a new release that includes them in due course.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177475828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177516251","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-1177516251","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":1177516251,"node_id":"IC_kwDOAAMmUc5GL3jb","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-07T12:15:59Z","updated_at":"2022-07-07T12:15:59Z","author_association":"MEMBER","body":"we released 3.2.2 off of 3.2.1 + a few manual backports from 3.x plus the cookie=monster security issue. at the time 3.x had been in flux enough to not be a stable base for a quick and safe security release. The commit that fixes this in 3.x had not been part of the commits that were backported into 3.2.2.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1177516251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1178586791","html_url":"https://github.com/apache/couchdb/issues/4081#issuecomment-1178586791","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4081","id":1178586791,"node_id":"IC_kwDOAAMmUc5GP86n","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T05:59:42Z","updated_at":"2022-07-08T05:59:42Z","author_association":"CONTRIBUTOR","body":"Closing issue. Please reopen if there are any problems with the new jammy packages","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1178586791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1178588895","html_url":"https://github.com/apache/couchdb/issues/4065#issuecomment-1178588895","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4065","id":1178588895,"node_id":"IC_kwDOAAMmUc5GP9bf","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T06:03:17Z","updated_at":"2022-07-08T06:03:17Z","author_association":"CONTRIBUTOR","body":"@cpallavi  make sure all the nodes in the cluster share the same config file (ini) passwords, server uuids values and cookie secret, and of course Erlang cluster cookies so that nodes can communicate with each other.  It sounds like it may be a kube issue, maybe it's not mounting the volume correctly?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1178588895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]