[{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263112837","html_url":"https://github.com/apache/kafka/pull/2172#issuecomment-263112837","issue_url":"https://api.github.com/repos/apache/kafka/issues/2172","id":263112837,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzExMjgzNw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-27T09:50:23Z","updated_at":"2016-11-27T09:50:23Z","author_association":"MEMBER","body":"Your suggested ducktape change sounds good to me @ewencp.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263112837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263158754","html_url":"https://github.com/apache/kafka/pull/2095#issuecomment-263158754","issue_url":"https://api.github.com/repos/apache/kafka/issues/2095","id":263158754,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzE1ODc1NA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T00:17:31Z","updated_at":"2016-11-28T00:17:31Z","author_association":"CONTRIBUTOR","body":"@ijuma Thanks for the nice cleanup. Left a couple comments, but LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263158754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263159490","html_url":"https://github.com/apache/kafka/pull/2095#issuecomment-263159490","issue_url":"https://api.github.com/repos/apache/kafka/issues/2095","id":263159490,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzE1OTQ5MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T00:30:21Z","updated_at":"2016-11-28T00:30:21Z","author_association":"CONTRIBUTOR","body":"On second thought, I'm getting some streams test failures I haven't seen before when building locally. For example:\r\n\r\n```\r\norg.apache.kafka.streams.integration.KStreamKTableJoinIntegrationTest > shouldCountClicksPerRegion[1] FAILED\r\n    java.lang.AssertionError: Condition not met within timeout 30000. Did not receive 3 number of records\r\n        at org.apache.kafka.test.TestUtils.waitForCondition(TestUtils.java:279)\r\n        at org.apache.kafka.streams.integration.utils.IntegrationTestUtils.waitUntilMinKeyValueRecordsReceived(IntegrationTestUtils.java:211)\r\n        at org.apache.kafka.streams.integration.utils.IntegrationTestUtils.waitUntilMinKeyValueRecordsReceived(IntegrationTestUtils.java:180)\r\n        at org.apache.kafka.streams.integration.KStreamKTableJoinIntegrationTest.shouldCountClicksPerRegion(KStreamKTableJoinIntegrationTest.java:296)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263159490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263201695","html_url":"https://github.com/apache/kafka/pull/2134#issuecomment-263201695","issue_url":"https://api.github.com/repos/apache/kafka/issues/2134","id":263201695,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzIwMTY5NQ==","user":{"login":"reftel","id":5188162,"node_id":"MDQ6VXNlcjUxODgxNjI=","avatar_url":"https://avatars.githubusercontent.com/u/5188162?v=4","gravatar_id":"","url":"https://api.github.com/users/reftel","html_url":"https://github.com/reftel","followers_url":"https://api.github.com/users/reftel/followers","following_url":"https://api.github.com/users/reftel/following{/other_user}","gists_url":"https://api.github.com/users/reftel/gists{/gist_id}","starred_url":"https://api.github.com/users/reftel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reftel/subscriptions","organizations_url":"https://api.github.com/users/reftel/orgs","repos_url":"https://api.github.com/users/reftel/repos","events_url":"https://api.github.com/users/reftel/events{/privacy}","received_events_url":"https://api.github.com/users/reftel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T07:32:59Z","updated_at":"2016-11-28T07:32:59Z","author_association":"CONTRIBUTOR","body":"Thanks for your comments! I've updated as you suggested, and also fixed some issues found by checkstyle etc.\r\nPlease note, though, that this change is being discussed at https://issues.apache.org/jira/browse/KAFKA-4406 , and should not be merged until the discussion has concluded.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263201695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263205104","html_url":"https://github.com/apache/kafka/pull/2171#issuecomment-263205104","issue_url":"https://api.github.com/repos/apache/kafka/issues/2171","id":263205104,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzIwNTEwNA==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T07:55:19Z","updated_at":"2016-11-28T07:55:19Z","author_association":"CONTRIBUTOR","body":"org.apache.kafka.clients.consumer.KafkaConsumerTest.testCloseTimeout failed. This is unrelated to this PR.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263205104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263228395","html_url":"https://github.com/apache/kafka/pull/2176#issuecomment-263228395","issue_url":"https://api.github.com/repos/apache/kafka/issues/2176","id":263228395,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzIyODM5NQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T09:53:39Z","updated_at":"2016-11-28T09:53:39Z","author_association":"MEMBER","body":"Nice clean-up.\r\n\r\nThe only downside is that this won't work with brokers older than 0.10.1, which seems OK since the consumer doesn't support older brokers at the moment. Just mentioning because we are planning to propose a KIP for extending client support to older brokers and if we want connect to also work with older brokers, then we'll have to change this code again.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263228395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263240129","html_url":"https://github.com/apache/kafka/pull/2095#issuecomment-263240129","issue_url":"https://api.github.com/repos/apache/kafka/issues/2095","id":263240129,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzI0MDEyOQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T10:47:34Z","updated_at":"2016-11-28T10:47:34Z","author_association":"MEMBER","body":"OK, I think it may be best to pass `Time.SYSTEM` from `KafkaServer` to `GroupCoordinator` to maintain the existing behaviour and to investigate why this is needed for the streams test to pass consistently in a separate JIRA. I updated the PR with this change and will file the JIRA if you agree.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263240129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263242805","html_url":"https://github.com/apache/kafka/pull/2158#issuecomment-263242805","issue_url":"https://api.github.com/repos/apache/kafka/issues/2158","id":263242805,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzI0MjgwNQ==","user":{"login":"SandeshKarkera","id":17064369,"node_id":"MDQ6VXNlcjE3MDY0MzY5","avatar_url":"https://avatars.githubusercontent.com/u/17064369?v=4","gravatar_id":"","url":"https://api.github.com/users/SandeshKarkera","html_url":"https://github.com/SandeshKarkera","followers_url":"https://api.github.com/users/SandeshKarkera/followers","following_url":"https://api.github.com/users/SandeshKarkera/following{/other_user}","gists_url":"https://api.github.com/users/SandeshKarkera/gists{/gist_id}","starred_url":"https://api.github.com/users/SandeshKarkera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandeshKarkera/subscriptions","organizations_url":"https://api.github.com/users/SandeshKarkera/orgs","repos_url":"https://api.github.com/users/SandeshKarkera/repos","events_url":"https://api.github.com/users/SandeshKarkera/events{/privacy}","received_events_url":"https://api.github.com/users/SandeshKarkera/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T11:00:17Z","updated_at":"2016-11-28T11:00:17Z","author_association":"CONTRIBUTOR","body":"@guozhangwang @dguy @mjsax @norwood @enothereska can you please take a look? ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263242805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263255635","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-263255635","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":263255635,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzI1NTYzNQ==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T12:10:00Z","updated_at":"2016-11-28T12:10:00Z","author_association":"CONTRIBUTOR","body":"@aartigupta would you still have time for this PR or should I have a look? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263255635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263270528","html_url":"https://github.com/apache/kafka/pull/2161#issuecomment-263270528","issue_url":"https://api.github.com/repos/apache/kafka/issues/2161","id":263270528,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzI3MDUyOA==","user":{"login":"baluchicken","id":14196407,"node_id":"MDQ6VXNlcjE0MTk2NDA3","avatar_url":"https://avatars.githubusercontent.com/u/14196407?v=4","gravatar_id":"","url":"https://api.github.com/users/baluchicken","html_url":"https://github.com/baluchicken","followers_url":"https://api.github.com/users/baluchicken/followers","following_url":"https://api.github.com/users/baluchicken/following{/other_user}","gists_url":"https://api.github.com/users/baluchicken/gists{/gist_id}","starred_url":"https://api.github.com/users/baluchicken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baluchicken/subscriptions","organizations_url":"https://api.github.com/users/baluchicken/orgs","repos_url":"https://api.github.com/users/baluchicken/repos","events_url":"https://api.github.com/users/baluchicken/events{/privacy}","received_events_url":"https://api.github.com/users/baluchicken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T13:26:04Z","updated_at":"2016-11-28T13:26:04Z","author_association":"CONTRIBUTOR","body":"Thanks for the review, I will start to work on the suggested modifications. I will update this pull request soon.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263270528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263307906","html_url":"https://github.com/apache/kafka/pull/2135#issuecomment-263307906","issue_url":"https://api.github.com/repos/apache/kafka/issues/2135","id":263307906,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMwNzkwNg==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T15:52:58Z","updated_at":"2016-11-28T15:52:58Z","author_association":"CONTRIBUTOR","body":"Looks like transient testReprocessingFromScratch error. ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263307906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263322579","html_url":"https://github.com/apache/kafka/pull/2176#issuecomment-263322579","issue_url":"https://api.github.com/repos/apache/kafka/issues/2176","id":263322579,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMyMjU3OQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T16:42:22Z","updated_at":"2016-11-28T16:42:22Z","author_association":"CONTRIBUTOR","body":"@ijuma Why can't the `endOffsets`API work for older brokers? We don't have the new offset API which exposes search by message timestamps, but the old one should be sufficient for this and for `beginningOffsets`. ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263322579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263324098","html_url":"https://github.com/apache/kafka/pull/2176#issuecomment-263324098","issue_url":"https://api.github.com/repos/apache/kafka/issues/2176","id":263324098,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMyNDA5OA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T16:47:32Z","updated_at":"2016-11-28T16:47:32Z","author_association":"MEMBER","body":"@hachikuji, that's a good point, so this would work transparently once `endOffsets` does the fallback for older brokers.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263324098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263326122","html_url":"https://github.com/apache/kafka/pull/2179#issuecomment-263326122","issue_url":"https://api.github.com/repos/apache/kafka/issues/2179","id":263326122,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMyNjEyMg==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T16:54:29Z","updated_at":"2016-11-28T16:54:29Z","author_association":"CONTRIBUTOR","body":"@jeffwidman Not a big deal, but maybe you could combine this with #2178 to reduce the noise?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263326122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263330087","html_url":"https://github.com/apache/kafka/pull/2177#issuecomment-263330087","issue_url":"https://api.github.com/repos/apache/kafka/issues/2177","id":263330087,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMzMDA4Nw==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T17:08:01Z","updated_at":"2016-11-28T17:08:01Z","author_association":"CONTRIBUTOR","body":"@onurkaraman LGTM for the change itself. I'm guessing this might have some repercussions for system tests though. Maybe we should add the override to `tests/kafkatest/services/kafka/templates/kafka.properties` as well? Actually since we have broker failure tests for the consumer, we may need to determine a suitable replication factor based on the number of brokers in the test.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263330087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263335151","html_url":"https://github.com/apache/kafka/pull/2177#issuecomment-263335151","issue_url":"https://api.github.com/repos/apache/kafka/issues/2177","id":263335151,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMzNTE1MQ==","user":{"login":"onurkaraman","id":529976,"node_id":"MDQ6VXNlcjUyOTk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/529976?v=4","gravatar_id":"","url":"https://api.github.com/users/onurkaraman","html_url":"https://github.com/onurkaraman","followers_url":"https://api.github.com/users/onurkaraman/followers","following_url":"https://api.github.com/users/onurkaraman/following{/other_user}","gists_url":"https://api.github.com/users/onurkaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/onurkaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onurkaraman/subscriptions","organizations_url":"https://api.github.com/users/onurkaraman/orgs","repos_url":"https://api.github.com/users/onurkaraman/repos","events_url":"https://api.github.com/users/onurkaraman/events{/privacy}","received_events_url":"https://api.github.com/users/onurkaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T17:25:31Z","updated_at":"2016-11-28T17:25:31Z","author_association":"CONTRIBUTOR","body":"@hachikuji yeah agreed. I realized after submitting the PR that I hadn't even run the tests. I had only done a manual test. Config values in the integration/system tests may need to change. I can look into it.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263335151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263335759","html_url":"https://github.com/apache/kafka/pull/2064#issuecomment-263335759","issue_url":"https://api.github.com/repos/apache/kafka/issues/2064","id":263335759,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzMzNTc1OQ==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T17:27:34Z","updated_at":"2016-11-28T17:27:34Z","author_association":"CONTRIBUTOR","body":"@harshach Thoughts on reverting this given some of the issues raised vs trying to clean things up with follow up commits?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263335759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263347383","html_url":"https://github.com/apache/kafka/pull/1757#issuecomment-263347383","issue_url":"https://api.github.com/repos/apache/kafka/issues/1757","id":263347383,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM0NzM4Mw==","user":{"login":"abhit011","id":10906885,"node_id":"MDQ6VXNlcjEwOTA2ODg1","avatar_url":"https://avatars.githubusercontent.com/u/10906885?v=4","gravatar_id":"","url":"https://api.github.com/users/abhit011","html_url":"https://github.com/abhit011","followers_url":"https://api.github.com/users/abhit011/followers","following_url":"https://api.github.com/users/abhit011/following{/other_user}","gists_url":"https://api.github.com/users/abhit011/gists{/gist_id}","starred_url":"https://api.github.com/users/abhit011/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhit011/subscriptions","organizations_url":"https://api.github.com/users/abhit011/orgs","repos_url":"https://api.github.com/users/abhit011/repos","events_url":"https://api.github.com/users/abhit011/events{/privacy}","received_events_url":"https://api.github.com/users/abhit011/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T18:10:38Z","updated_at":"2016-11-28T18:10:38Z","author_association":"NONE","body":"Did any one has the binaries for the same release? I am facing issues in compiling the build \r\n\r\nAbhi","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263347383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263352559","html_url":"https://github.com/apache/kafka/pull/2176#issuecomment-263352559","issue_url":"https://api.github.com/repos/apache/kafka/issues/2176","id":263352559,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM1MjU1OQ==","user":{"login":"baluchicken","id":14196407,"node_id":"MDQ6VXNlcjE0MTk2NDA3","avatar_url":"https://avatars.githubusercontent.com/u/14196407?v=4","gravatar_id":"","url":"https://api.github.com/users/baluchicken","html_url":"https://github.com/baluchicken","followers_url":"https://api.github.com/users/baluchicken/followers","following_url":"https://api.github.com/users/baluchicken/following{/other_user}","gists_url":"https://api.github.com/users/baluchicken/gists{/gist_id}","starred_url":"https://api.github.com/users/baluchicken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baluchicken/subscriptions","organizations_url":"https://api.github.com/users/baluchicken/orgs","repos_url":"https://api.github.com/users/baluchicken/repos","events_url":"https://api.github.com/users/baluchicken/events{/privacy}","received_events_url":"https://api.github.com/users/baluchicken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T18:29:54Z","updated_at":"2016-11-28T18:29:54Z","author_association":"CONTRIBUTOR","body":"@hachikuji thanks for the help I appreciate it. I updated the pull request with the discussed change.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263352559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263356082","html_url":"https://github.com/apache/kafka/pull/2172#issuecomment-263356082","issue_url":"https://api.github.com/repos/apache/kafka/issues/2172","id":263356082,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM1NjA4Mg==","user":{"login":"harshach","id":38649,"node_id":"MDQ6VXNlcjM4NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38649?v=4","gravatar_id":"","url":"https://api.github.com/users/harshach","html_url":"https://github.com/harshach","followers_url":"https://api.github.com/users/harshach/followers","following_url":"https://api.github.com/users/harshach/following{/other_user}","gists_url":"https://api.github.com/users/harshach/gists{/gist_id}","starred_url":"https://api.github.com/users/harshach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshach/subscriptions","organizations_url":"https://api.github.com/users/harshach/orgs","repos_url":"https://api.github.com/users/harshach/repos","events_url":"https://api.github.com/users/harshach/events{/privacy}","received_events_url":"https://api.github.com/users/harshach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T18:42:54Z","updated_at":"2016-11-28T18:42:54Z","author_association":"NONE","body":"@raghavgautam @ewencp @ijuma trying to merge the conversations from here https://github.com/apache/kafka/pull/2064 . My bad on merging the gradlew script. We should add this to .gitignore.\r\n\r\n1.  I think we are good with the changes proposed to ducktape. Can you merge this in?\r\n2. @raghavgautam will post a new PR to use the changes proposed with ducktape PR.\r\n\r\nOnce the @raghavgautam PRs ready with the changes proposed here . I think that can be merged in right?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263356082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263364028","html_url":"https://github.com/apache/kafka/pull/2150#issuecomment-263364028","issue_url":"https://api.github.com/repos/apache/kafka/issues/2150","id":263364028,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM2NDAyOA==","user":{"login":"mcandre","id":5316,"node_id":"MDQ6VXNlcjUzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/5316?v=4","gravatar_id":"","url":"https://api.github.com/users/mcandre","html_url":"https://github.com/mcandre","followers_url":"https://api.github.com/users/mcandre/followers","following_url":"https://api.github.com/users/mcandre/following{/other_user}","gists_url":"https://api.github.com/users/mcandre/gists{/gist_id}","starred_url":"https://api.github.com/users/mcandre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcandre/subscriptions","organizations_url":"https://api.github.com/users/mcandre/orgs","repos_url":"https://api.github.com/users/mcandre/repos","events_url":"https://api.github.com/users/mcandre/events{/privacy}","received_events_url":"https://api.github.com/users/mcandre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T19:10:34Z","updated_at":"2016-11-28T19:10:34Z","author_association":"NONE","body":"LGTM, thanks for this work!","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263364028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263364368","html_url":"https://github.com/apache/kafka/pull/2179#issuecomment-263364368","issue_url":"https://api.github.com/repos/apache/kafka/issues/2179","id":263364368,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM2NDM2OA==","user":{"login":"jeffwidman","id":483314,"node_id":"MDQ6VXNlcjQ4MzMxNA==","avatar_url":"https://avatars.githubusercontent.com/u/483314?v=4","gravatar_id":"","url":"https://api.github.com/users/jeffwidman","html_url":"https://github.com/jeffwidman","followers_url":"https://api.github.com/users/jeffwidman/followers","following_url":"https://api.github.com/users/jeffwidman/following{/other_user}","gists_url":"https://api.github.com/users/jeffwidman/gists{/gist_id}","starred_url":"https://api.github.com/users/jeffwidman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jeffwidman/subscriptions","organizations_url":"https://api.github.com/users/jeffwidman/orgs","repos_url":"https://api.github.com/users/jeffwidman/repos","events_url":"https://api.github.com/users/jeffwidman/events{/privacy}","received_events_url":"https://api.github.com/users/jeffwidman/received_events","type":"User","user_view_type":"public","site_admin":true},"created_at":"2016-11-28T19:11:47Z","updated_at":"2016-11-28T19:11:47Z","author_association":"CONTRIBUTOR","body":"Yeah, sorry about that. I submitted these PR's using Github's web UI, so I never even cloned the repo locally, otherwise I would have. I'm in the middle of a few other things, but I'll try to cherrypick/squash onto #2178 soon. ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263364368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263368318","html_url":"https://github.com/apache/kafka/pull/2172#issuecomment-263368318","issue_url":"https://api.github.com/repos/apache/kafka/issues/2172","id":263368318,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM2ODMxOA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T19:25:53Z","updated_at":"2016-11-28T19:25:53Z","author_association":"MEMBER","body":"So, I think it would be better to revert the original commit because it will make it clearer in the history that the renames were not intended. We can then do a PR that takes advantage of the ducktape changes. If we do incremental updates, it will be less clear to people reading the history.\r\n\r\nEither way, we need to merge this PR or revert the original commit urgently because people are currently blocked due to the RAT failures.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263368318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263377156","html_url":"https://github.com/apache/kafka/pull/2182#issuecomment-263377156","issue_url":"https://api.github.com/repos/apache/kafka/issues/2182","id":263377156,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM3NzE1Ng==","user":{"login":"shikhar","id":74267,"node_id":"MDQ6VXNlcjc0MjY3","avatar_url":"https://avatars.githubusercontent.com/u/74267?v=4","gravatar_id":"","url":"https://api.github.com/users/shikhar","html_url":"https://github.com/shikhar","followers_url":"https://api.github.com/users/shikhar/followers","following_url":"https://api.github.com/users/shikhar/following{/other_user}","gists_url":"https://api.github.com/users/shikhar/gists{/gist_id}","starred_url":"https://api.github.com/users/shikhar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shikhar/subscriptions","organizations_url":"https://api.github.com/users/shikhar/orgs","repos_url":"https://api.github.com/users/shikhar/repos","events_url":"https://api.github.com/users/shikhar/events{/privacy}","received_events_url":"https://api.github.com/users/shikhar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T19:59:12Z","updated_at":"2016-11-28T21:17:09Z","author_association":"CONTRIBUTOR","body":"* Currently, the only collection type supported by `ConfigDef` is `Type.LIST` and the values must be strings. Use-cases have come up with connectors for richer configuration, like defining maps.\r\n\r\n* It would not be that hard to just add a new `Type.MAP` for string-string maps. However I think we should instead be working towards evolving `ConfigDef` to support array and map types that can compose some other existing primitive value type to avoid additional parsing burden on `ConfigDef` clients. This PR is a pass at how we could do that, by adding a new `ConfigType` interface that is implemented by the existing `ConfigDef.Type` enum, as well as the new `ArrayType` and `MapType`. Most existing uses of `ConfigDef.Type` (e.g. in `ConfigDef` constructors) are then changed to expect `ConfigType`, for which `ConfigDef.Type` enumerators continue to be valid values.\r\n\r\n* We need to support Java properties files for configuration so a flattened string representation is the lowest-common denominator. But Connect for example that provides a REST API and accepts configuration as JSON. Users could specify maps and arrays as JSON objects and arrays, which could be flattened by Connect before being parsed by `ConfigDef`. I can also imagine Connect being able to also support `.json` configuration files in addition to `.properties`.\r\n\r\nThe end goal would be to evolve `ConfigDef` to support richer JSON-style configuration from the user's perspective.\r\n\r\nping @ewencp @hachikuji @ijuma @kkonstantine for thoughts.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263377156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263385465","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263385465","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263385465,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM4NTQ2NQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T20:31:43Z","updated_at":"2016-11-28T20:34:19Z","author_association":"CONTRIBUTOR","body":"Hey all, sorry to leave this hanging for so long. I'd like to try and reach consensus on a solution. As far as I can tell, the options we have are the following:\r\n\r\n1. Avoid calling `tryAndComplete` and variants in `GroupCoordinator` while holding the group lock. The advantage is that we don't need to make any changes in the purgatory code, but it's unclear whether this can be done safely without some significant rethinking to how the group locking works. For example, we expect that some delayed operations, such as rebalance completion, will complete while the group is in a certain state, so at a minimum, we need to rewrite the callbacks to validate that the group is still in the state that we expect. \r\n\r\n2. The current patch is nearly there in terms of solving the underlying problem. We would need something like [this](https://github.com/apache/kafka/compare/trunk...hachikuji:refactor-delayed-operation-synchronization?expand=1) to complete the effort. There were performance concerns, but it wasn't clear to me from Becket's testing how big the actual impact was. Initially, it seemed there was a clear degradation, but later it seemed it was inconclusive. @becketqin Maybe you can confirm what you found?\r\n\r\n3. I think we're all a little uncomfortable with any degradation in the performance of the fetch and produce purgatories. As far as I can tell, these purgatories don't suffer from the same deadlock bug, so we could leave them to use the current implementation of `Watchers`, and let `GroupCoordinator` use a separate implementation (perhaps based off of the current patch). This is still a reasonably simple patch, but it does introduce some complexity into the purgatory.\r\n\r\nGiven how tricky the state machine in `GroupCoordinator` has been to work with, any changes seem pretty risky, but if we're fine targeting this fix for a feature release (such as 0.10.2.0), the first option is probably doable. My own preference is probably 2 or 3 though, depending on the performance results.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263385465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263396873","html_url":"https://github.com/apache/kafka/pull/2125#issuecomment-263396873","issue_url":"https://api.github.com/repos/apache/kafka/issues/2125","id":263396873,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzM5Njg3Mw==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T21:16:52Z","updated_at":"2016-11-28T21:16:52Z","author_association":"CONTRIBUTOR","body":"@resetius Thanks for the patch. I looked at the stack trace posted on the JIRA. This seems to be the case that Jun mentioned here: https://github.com/apache/kafka/pull/1738#issuecomment-253087330. I see two potential problems with the current patch:\r\n\r\n1. We also make a call to `appendMessagesToLeader` from `evictGroupAndDeleteMetadata`, which is called with the group lock, so we probably need to fix the problem there too.\r\n\r\n2. If we take the write of the tombstones out of the lock, then it seems we might overwrite a concurrently written entry. It's pretty unlikely, but it could happen that just before we write the tombstones, a new group is created and its metadata is written to the log. The window is tiny, but it still seems possible.\r\n\r\nTo fix this, maybe in `cleanupGroupMetadata` we can change the state of the group to `Dead`, but leave it in the cache until the tombstones have been written. Since the state is `Dead`, the coordinator will reject any attempt to create a new group. Then we can write the tombstones outside of the lock. Once they have been written, we can remove the dead group from the cache. Note that the cache itself is thread-safe, so a CAS removal seems like it could work.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263396873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263418161","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263418161","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263418161,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQxODE2MQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T22:41:52Z","updated_at":"2016-11-28T22:41:52Z","author_association":"CONTRIBUTOR","body":"I was thinking a bit more about this. I'm not sure why I didn't consider it before, but we could use a `ConcurrentLinkedQueue` instead of a `LinkedList` for the collection of watched operations. Unless I'm missing something, that makes adding to the collection safe with concurrent iteration without needing an additional lock. The only thing we don't get is a constant-time `size()`, but maybe we can keep a separate counter for that (it's only needed for metrics). We'd still need to move the synchronization on the operation itself into the `DelayedOperation`, but that doesn't seem as controversial.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263418161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263423870","html_url":"https://github.com/apache/kafka/pull/1755#issuecomment-263423870","issue_url":"https://api.github.com/repos/apache/kafka/issues/1755","id":263423870,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQyMzg3MA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T23:06:52Z","updated_at":"2016-11-28T23:06:52Z","author_association":"CONTRIBUTOR","body":"@maysamyabandeh Could you rebase your PR against the latest trunk to resolve conflicts?\r\n\r\n@ijuma Could you make another pass afterwards to get it merged in trunk and 0.10.1?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263423870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263428527","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263428527","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263428527,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQyODUyNw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T23:29:26Z","updated_at":"2016-11-28T23:29:26Z","author_association":"CONTRIBUTOR","body":"@becketqin From the stack trace I thought the deadline was between the group lock and the operation object lock, where one thread grabbing the operation lock first, then in its `doComplete` function it tries to grab the group lock while the other thread grabbing lock ordering is reversed. So yes I meant to get rid of the second lock. As for the scenario you mentioned I agree that this way does not solve it.\r\n\r\n@hachikuji I am not clear what do you mean by \"move the synchronization on the operation itself into the `DelayedOperation`\", otherwise `ConcurrentLinkedQueue` seems good to me. One thing I'm not sure is the iteration performance on the `ConcurrentLinkedQueue` with removals, do you know that?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263428527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263429707","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263429707","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263429707,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQyOTcwNw==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-28T23:35:39Z","updated_at":"2016-11-28T23:35:39Z","author_association":"CONTRIBUTOR","body":"@guozhangwang To clarify, there are actually two deadlock potentials in this code. The first is the synchronization over the watched collection in `Watchers`. This is the bug that was reported, which I think we can fix it by switching to `ConcurrentLinkedQueue`. The second is the synchronization of the delayed operation itself. Our group operations (heartbeat and rebalance) already provide their own synchronization, so my suggestion is move that into the abstract `DelayedOperation` implementation so that we can override the behavior.\r\n\r\nAs for performance, hopefully it's not too different from `LinkedList`, but I'll run the same tests we did above.\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263429707/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263442180","html_url":"https://github.com/apache/kafka/pull/2185#issuecomment-263442180","issue_url":"https://api.github.com/repos/apache/kafka/issues/2185","id":263442180,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ0MjE4MA==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T00:46:22Z","updated_at":"2016-11-29T00:46:22Z","author_association":"MEMBER","body":"@guozhangwang ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263442180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263442505","html_url":"https://github.com/apache/kafka/pull/2170#issuecomment-263442505","issue_url":"https://api.github.com/repos/apache/kafka/issues/2170","id":263442505,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ0MjUwNQ==","user":{"login":"lindong28","id":5873403,"node_id":"MDQ6VXNlcjU4NzM0MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5873403?v=4","gravatar_id":"","url":"https://api.github.com/users/lindong28","html_url":"https://github.com/lindong28","followers_url":"https://api.github.com/users/lindong28/followers","following_url":"https://api.github.com/users/lindong28/following{/other_user}","gists_url":"https://api.github.com/users/lindong28/gists{/gist_id}","starred_url":"https://api.github.com/users/lindong28/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lindong28/subscriptions","organizations_url":"https://api.github.com/users/lindong28/orgs","repos_url":"https://api.github.com/users/lindong28/repos","events_url":"https://api.github.com/users/lindong28/events{/privacy}","received_events_url":"https://api.github.com/users/lindong28/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T00:48:19Z","updated_at":"2016-11-29T00:48:19Z","author_association":"MEMBER","body":"@ijuma Thanks for taking time to review the patch. The patch actually query zookeeper once for every topic. This is because the method `zkUtils.getPartitionsForTopics(topics)` will do `readDataMaybeNull(getTopicPath(topic))` for each topic in topics.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263442505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263446816","html_url":"https://github.com/apache/kafka/pull/2156#issuecomment-263446816","issue_url":"https://api.github.com/repos/apache/kafka/issues/2156","id":263446816,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ0NjgxNg==","user":{"login":"huxihx","id":11549429,"node_id":"MDQ6VXNlcjExNTQ5NDI5","avatar_url":"https://avatars.githubusercontent.com/u/11549429?v=4","gravatar_id":"","url":"https://api.github.com/users/huxihx","html_url":"https://github.com/huxihx","followers_url":"https://api.github.com/users/huxihx/followers","following_url":"https://api.github.com/users/huxihx/following{/other_user}","gists_url":"https://api.github.com/users/huxihx/gists{/gist_id}","starred_url":"https://api.github.com/users/huxihx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huxihx/subscriptions","organizations_url":"https://api.github.com/users/huxihx/orgs","repos_url":"https://api.github.com/users/huxihx/repos","events_url":"https://api.github.com/users/huxihx/events{/privacy}","received_events_url":"https://api.github.com/users/huxihx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T01:13:54Z","updated_at":"2016-11-29T01:13:54Z","author_association":"CONTRIBUTOR","body":"@junrao @jjkoshy please guide how to make progress this PR? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263446816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263453194","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263453194","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263453194,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ1MzE5NA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T01:52:44Z","updated_at":"2016-11-29T01:52:44Z","author_association":"CONTRIBUTOR","body":"I ran the purgatory performance test with the following settings on my Macbook Pro (JDK 1.8.0_101): `--size 1000 --keys 100 --key-space-size 1000 --num 1000000 --rate 10000 --pct50 20 --pct75 50 --timeout 100`.\r\n\r\nTrunk:\r\n\r\n| Elapsed Time | Target Rate | Actual Rate | Process CPU Time | MarkSweep Count | MarkSweep Time | Scavenge Count | Scavenge Time |\r\n| --- | --- | --- | --- | --- | --- | --- | --- |\r\n| 100246     | 9985.520995     | 9985.520995     | 45747   | 0 | 114 | 0 | 382 |\r\n| 99958      | 10013.819070    | 10013.819070    | 45293   | 0 | 114   | 0 | 399 |\r\n| 100135     | 9996.401296     | 9996.401296     | 45746   | 0 | 114   | 0 | 397 |\r\n| 100289     | 9980.836793     | 9980.836793     | 45821   | 0 | 114   | 0 | 387 |\r\n\r\nCurrent patch (rebased off of trunk):\r\n\r\n| Elapsed Time | Target Rate | Actual Rate | Process CPU Time | MarkSweep Count | MarkSweep Time | Scavenge Count | Scavenge Time |\r\n| --- | --- | --- | --- | --- | --- | --- | --- |\r\n|99944     |10015.825004    |10015.724688    |40035   |0 |246   |0 |510|\r\n|100587    |9951.635054     |9951.536020     |40360   |0 |339   |0 |544|\r\n|99979     |10012.214902    |10012.214902    |39130   |0 |279   |0 |567|\r\n|100150    |9995.002499     |9995.002499     |39232   |0 |281   |0 |550|\r\n\r\nUsing [ConcurrentLinkedQueue](https://github.com/hachikuji/kafka/tree/KAFKA-3994-linked-queue):\r\n\r\n| Elapsed Time | Target Rate | Actual Rate | Process CPU Time | MarkSweep Count | MarkSweep Time | Scavenge Count | Scavenge Time |\r\n| --- | --- | --- | --- | --- | --- | --- | --- |\r\n|100797     |9930.782446     |9930.782446     |44267   |0 |108   |0 |578|\r\n|100691     |9941.346058     |9941.346058     |44649   |0 |114   |0 |575|\r\n|100080     |10002.100441    |10002.100441    |44980   |0 |110   |0 |574|\r\n|100214     |9988.612981     |9988.612981     |44962   |0 |109   |0 |596|\r\n\r\nIt would be nice if someone could repeat the tests (especially if they use linux). In particular, I was surprised to see the lower cpu time with the current patch since that differs from what @becketqin observed previously. This difference was reproducible even when running for a longer duration. The patch using a `ConcurrentLinkedQueue` has results pretty close to trunk, with a bit worse gc times. Based only on these results, both options seem viable to me.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263453194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263453714","html_url":"https://github.com/apache/kafka/pull/2168#issuecomment-263453714","issue_url":"https://api.github.com/repos/apache/kafka/issues/2168","id":263453714,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ1MzcxNA==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T01:56:17Z","updated_at":"2016-11-29T01:56:17Z","author_association":"CONTRIBUTOR","body":"LGTM. \r\n\r\n@junrao @jjkoshy Will you also be able to take a look? I took a quick look at KAFKA-901 which introduced sending UpdateMetadataRequest from controller but did not find specific reason on the order. Is there any concern on this change? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263453714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263454255","html_url":"https://github.com/apache/kafka/pull/2177#issuecomment-263454255","issue_url":"https://api.github.com/repos/apache/kafka/issues/2177","id":263454255,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ1NDI1NQ==","user":{"login":"onurkaraman","id":529976,"node_id":"MDQ6VXNlcjUyOTk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/529976?v=4","gravatar_id":"","url":"https://api.github.com/users/onurkaraman","html_url":"https://github.com/onurkaraman","followers_url":"https://api.github.com/users/onurkaraman/followers","following_url":"https://api.github.com/users/onurkaraman/following{/other_user}","gists_url":"https://api.github.com/users/onurkaraman/gists{/gist_id}","starred_url":"https://api.github.com/users/onurkaraman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onurkaraman/subscriptions","organizations_url":"https://api.github.com/users/onurkaraman/orgs","repos_url":"https://api.github.com/users/onurkaraman/repos","events_url":"https://api.github.com/users/onurkaraman/events{/privacy}","received_events_url":"https://api.github.com/users/onurkaraman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T01:59:52Z","updated_at":"2016-11-29T01:59:52Z","author_association":"CONTRIBUTOR","body":"Force pushed a change that should fix the unit/integration tests. Still need to look into system tests.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263454255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263461450","html_url":"https://github.com/apache/kafka/pull/2110#issuecomment-263461450","issue_url":"https://api.github.com/repos/apache/kafka/issues/2110","id":263461450,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ2MTQ1MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T02:49:20Z","updated_at":"2016-11-29T02:49:20Z","author_association":"CONTRIBUTOR","body":"LGTM. This is technically an API change, but maybe a KIP is overkill. What do you think, @ijuma and @ewencp?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263461450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263490673","html_url":"https://github.com/apache/kafka/pull/2158#issuecomment-263490673","issue_url":"https://api.github.com/repos/apache/kafka/issues/2158","id":263490673,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzQ5MDY3Mw==","user":{"login":"SandeshKarkera","id":17064369,"node_id":"MDQ6VXNlcjE3MDY0MzY5","avatar_url":"https://avatars.githubusercontent.com/u/17064369?v=4","gravatar_id":"","url":"https://api.github.com/users/SandeshKarkera","html_url":"https://github.com/SandeshKarkera","followers_url":"https://api.github.com/users/SandeshKarkera/followers","following_url":"https://api.github.com/users/SandeshKarkera/following{/other_user}","gists_url":"https://api.github.com/users/SandeshKarkera/gists{/gist_id}","starred_url":"https://api.github.com/users/SandeshKarkera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandeshKarkera/subscriptions","organizations_url":"https://api.github.com/users/SandeshKarkera/orgs","repos_url":"https://api.github.com/users/SandeshKarkera/repos","events_url":"https://api.github.com/users/SandeshKarkera/events{/privacy}","received_events_url":"https://api.github.com/users/SandeshKarkera/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T06:48:51Z","updated_at":"2016-11-29T06:48:51Z","author_association":"CONTRIBUTOR","body":"@norwood Thanks for the review. I've removed the validation for record-size and payload-file and added them to a MutuallyExclusiveGroup as suggested.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263490673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263519819","html_url":"https://github.com/apache/kafka/pull/2187#issuecomment-263519819","issue_url":"https://api.github.com/repos/apache/kafka/issues/2187","id":263519819,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzUxOTgxOQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T09:29:18Z","updated_at":"2016-11-29T09:29:18Z","author_association":"MEMBER","body":"cc @harshach @hachikuji @ewencp @raghavgautam ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263519819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263520723","html_url":"https://github.com/apache/kafka/pull/2172#issuecomment-263520723","issue_url":"https://api.github.com/repos/apache/kafka/issues/2172","id":263520723,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzUyMDcyMw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T09:32:57Z","updated_at":"2016-11-29T09:32:57Z","author_association":"MEMBER","body":"I filed https://github.com/apache/kafka/pull/2187 as an alternative to this PR. Because local builds are failing for several days, either this or that need to be merged today. I'll wait for the West Coast to wake up though.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263520723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263526685","html_url":"https://github.com/apache/kafka/pull/2158#issuecomment-263526685","issue_url":"https://api.github.com/repos/apache/kafka/issues/2158","id":263526685,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzUyNjY4NQ==","user":{"login":"SandeshKarkera","id":17064369,"node_id":"MDQ6VXNlcjE3MDY0MzY5","avatar_url":"https://avatars.githubusercontent.com/u/17064369?v=4","gravatar_id":"","url":"https://api.github.com/users/SandeshKarkera","html_url":"https://github.com/SandeshKarkera","followers_url":"https://api.github.com/users/SandeshKarkera/followers","following_url":"https://api.github.com/users/SandeshKarkera/following{/other_user}","gists_url":"https://api.github.com/users/SandeshKarkera/gists{/gist_id}","starred_url":"https://api.github.com/users/SandeshKarkera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandeshKarkera/subscriptions","organizations_url":"https://api.github.com/users/SandeshKarkera/orgs","repos_url":"https://api.github.com/users/SandeshKarkera/repos","events_url":"https://api.github.com/users/SandeshKarkera/events{/privacy}","received_events_url":"https://api.github.com/users/SandeshKarkera/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T09:58:07Z","updated_at":"2016-11-29T09:58:20Z","author_association":"CONTRIBUTOR","body":"Jenkins build job is failing due to time out issue.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263526685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263549724","html_url":"https://github.com/apache/kafka/pull/2135#issuecomment-263549724","issue_url":"https://api.github.com/repos/apache/kafka/issues/2135","id":263549724,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzU0OTcyNA==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T11:46:04Z","updated_at":"2016-11-29T11:46:04Z","author_association":"CONTRIBUTOR","body":"Thanks @guozhangwang ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263549724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263569746","html_url":"https://github.com/apache/kafka/pull/2182#issuecomment-263569746","issue_url":"https://api.github.com/repos/apache/kafka/issues/2182","id":263569746,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzU2OTc0Ng==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T13:28:21Z","updated_at":"2016-11-29T13:28:21Z","author_association":"MEMBER","body":"I think what you are suggesting is similar to https://github.com/typesafehub/config (used by Akka and other Lightbend projects). I used that library quite a bit in the past and I thought it worked well. \r\n\r\nHowever, I think there are some who feel that it's good to keep the structure of configs flat and simple. This starts to break down in more complex cases where one wants to, for example, configure a consumer used by streams or configure streams used by another app (and potentially the consumer used by streams). We have basic support for prefixes, but the property file format is verbose for such cases.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263569746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263577775","html_url":"https://github.com/apache/kafka/pull/2171#issuecomment-263577775","issue_url":"https://api.github.com/repos/apache/kafka/issues/2171","id":263577775,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzU3Nzc3NQ==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T14:03:18Z","updated_at":"2016-11-29T14:03:18Z","author_association":"CONTRIBUTOR","body":"kafka.producer.ProducerTest.testAsyncSendCanCorrectlyFailWithTimeout failed. Unrelated to PR. Streams tests passed.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263577775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263583099","html_url":"https://github.com/apache/kafka/pull/2110#issuecomment-263583099","issue_url":"https://api.github.com/repos/apache/kafka/issues/2110","id":263583099,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzU4MzA5OQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T14:24:26Z","updated_at":"2016-11-29T14:24:26Z","author_association":"MEMBER","body":"There is a change in behaviour for people who call `Thread.interrupt`, but that seems OK since the previous behaviour was not useful (i.e. it fixes a bug). Aside from that, is there any other behavioural change? We now declare InterruptException in the Javadoc, but since it's a subclass of KafkaException, it will still be caught by an existing generic handler.\r\n\r\nIn any case, it would be a good idea to add a note to `upgrade.html`.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263583099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263594672","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-263594672","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":263594672,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzU5NDY3Mg==","user":{"login":"dpoldrugo","id":1514332,"node_id":"MDQ6VXNlcjE1MTQzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1514332?v=4","gravatar_id":"","url":"https://api.github.com/users/dpoldrugo","html_url":"https://github.com/dpoldrugo","followers_url":"https://api.github.com/users/dpoldrugo/followers","following_url":"https://api.github.com/users/dpoldrugo/following{/other_user}","gists_url":"https://api.github.com/users/dpoldrugo/gists{/gist_id}","starred_url":"https://api.github.com/users/dpoldrugo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpoldrugo/subscriptions","organizations_url":"https://api.github.com/users/dpoldrugo/orgs","repos_url":"https://api.github.com/users/dpoldrugo/repos","events_url":"https://api.github.com/users/dpoldrugo/events{/privacy}","received_events_url":"https://api.github.com/users/dpoldrugo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T15:06:06Z","updated_at":"2016-11-29T15:44:22Z","author_association":"CONTRIBUTOR","body":"```\r\n:streams:checkstyleMain[ant:checkstyle] /home/jenkins/jenkins-slave/workspace/kafka-trunk-git-pr-jdk7/streams/src/main/java/org/apache/kafka/streams/processor/internals/StreamThread.java:392:9: '}' should be on the same line.\r\n FAILED\r\n```\r\nThe code in question currenlty like this:\r\n```java\r\n    private void closeAllTasksOrTaskTopologies(boolean closeTopology) {\r\n        if (closeTopology) {\r\n            closeAllTasksTopologies();\r\n        }\r\n        else {\r\n            closeAllTasks();\r\n        }\r\n    }\r\n```\r\n\r\nShould I change it to:\r\n```java\r\n    private void closeAllTasksOrTaskTopologies(boolean closeTopology) {\r\n        if (closeTopology)\r\n           closeAllTasksTopologies();\r\n        else\r\n            closeAllTasks();\r\n    }\r\n```\r\n\r\nOr to:\r\n```java\r\n    private void closeAllTasksOrTaskTopologies(boolean closeTopology) {\r\n        if (closeTopology) {\r\n           closeAllTasksTopologies();\r\n           return;\r\n        }\r\n\r\n        closeAllTasks();\r\n    }\r\n```\r\n\r\nOr to:\r\n```java\r\n    private void closeAllTasksOrTaskTopologies(boolean closeTopology) {\r\n        if (closeTopology) {\r\n            closeAllTasksTopologies();\r\n        } else {\r\n            closeAllTasks();\r\n        }\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263594672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263607460","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-263607460","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":263607460,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYwNzQ2MA==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T15:47:36Z","updated_at":"2016-11-29T15:47:36Z","author_association":"CONTRIBUTOR","body":"Hi @dpoldrugo all of those options should fix the checkstyle failure, though i'd prefer the last one.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263607460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263627145","html_url":"https://github.com/apache/kafka/pull/2187#issuecomment-263627145","issue_url":"https://api.github.com/repos/apache/kafka/issues/2187","id":263627145,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYyNzE0NQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T16:49:44Z","updated_at":"2016-11-29T16:49:44Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263627145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263628029","html_url":"https://github.com/apache/kafka/pull/2110#issuecomment-263628029","issue_url":"https://api.github.com/repos/apache/kafka/issues/2110","id":263628029,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYyODAyOQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T16:52:33Z","updated_at":"2016-11-29T16:52:33Z","author_association":"CONTRIBUTOR","body":"Thanks @ijuma for taking a look. I agree that a short note in `upgrade.html` would be helpful.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263628029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263633231","html_url":"https://github.com/apache/kafka/pull/2168#issuecomment-263633231","issue_url":"https://api.github.com/repos/apache/kafka/issues/2168","id":263633231,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYzMzIzMQ==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T17:09:20Z","updated_at":"2016-11-29T17:09:20Z","author_association":"CONTRIBUTOR","body":"@lindong28 : Thanks for the patch. LGTM. Left a comment in the jira. Perhaps you could clarify there. In KAFKA-3042, there is also discussion on combining UpdateMetadataRequest and LeaderAndIsrRequest together. I am wondering if you have thought about whether that's a better long term solution.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263633231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263633949","html_url":"https://github.com/apache/kafka/pull/2187#issuecomment-263633949","issue_url":"https://api.github.com/repos/apache/kafka/issues/2187","id":263633949,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYzMzk0OQ==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T17:11:46Z","updated_at":"2016-11-29T17:11:46Z","author_association":"CONTRIBUTOR","body":"LGTM as well. I think this should be fine as it will be trivial to reapply this and use it as the base for a follow up PR that resolves those issues.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263633949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263634827","html_url":"https://github.com/apache/kafka/pull/2172#issuecomment-263634827","issue_url":"https://api.github.com/repos/apache/kafka/issues/2172","id":263634827,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYzNDgyNw==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T17:14:59Z","updated_at":"2016-11-29T17:14:59Z","author_association":"CONTRIBUTOR","body":"I went ahead and merged https://github.com/apache/kafka/pull/2187 to revert this for now so we can unblock folks from getting stuff committed to trunk. I'm going to close this PR. @raghavgautam Can you use that patch as a base and file a follow up to address some of those issues? There are other ducktape related changes I'm going to try to get merged in with a new release of ducktape. I'd like to also continue following up on our discussion about how best split up tests in that ducktape PR.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263634827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263635241","html_url":"https://github.com/apache/kafka/pull/2110#issuecomment-263635241","issue_url":"https://api.github.com/repos/apache/kafka/issues/2110","id":263635241,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzYzNTI0MQ==","user":{"login":"srdo","id":4324588,"node_id":"MDQ6VXNlcjQzMjQ1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/4324588?v=4","gravatar_id":"","url":"https://api.github.com/users/srdo","html_url":"https://github.com/srdo","followers_url":"https://api.github.com/users/srdo/followers","following_url":"https://api.github.com/users/srdo/following{/other_user}","gists_url":"https://api.github.com/users/srdo/gists{/gist_id}","starred_url":"https://api.github.com/users/srdo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srdo/subscriptions","organizations_url":"https://api.github.com/users/srdo/orgs","repos_url":"https://api.github.com/users/srdo/repos","events_url":"https://api.github.com/users/srdo/events{/privacy}","received_events_url":"https://api.github.com/users/srdo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T17:16:26Z","updated_at":"2016-11-29T17:16:26Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing @hachikuji @ijuma. I've added a note to upgrade.html, hopefully it is what you had in mind.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263635241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263645486","html_url":"https://github.com/apache/kafka/pull/1829#issuecomment-263645486","issue_url":"https://api.github.com/repos/apache/kafka/issues/1829","id":263645486,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY0NTQ4Ng==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T17:52:28Z","updated_at":"2016-11-29T17:52:28Z","author_association":"CONTRIBUTOR","body":"@cotedm This is still potentially very spammy, right? Default reconnect backoff is 50ms which means you'll get 20 of these (with stacktrace) per second that you have a connectivity issue.\r\n\r\nWe'd probably benefit from some helper that can rate limit certain log calls without permanently turning them off after the first time one is logged. Otherwise you can be missing information at a much later time due to a very short transient network issue at some completely unrelated time.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263645486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263646738","html_url":"https://github.com/apache/kafka/pull/1814#issuecomment-263646738","issue_url":"https://api.github.com/repos/apache/kafka/issues/1814","id":263646738,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY0NjczOA==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T17:56:45Z","updated_at":"2016-11-29T17:56:45Z","author_association":"CONTRIBUTOR","body":"LGTM, thanks!","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263646738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263648678","html_url":"https://github.com/apache/kafka/pull/1796#issuecomment-263648678","issue_url":"https://api.github.com/repos/apache/kafka/issues/1796","id":263648678,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY0ODY3OA==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T18:04:05Z","updated_at":"2016-11-29T18:04:05Z","author_association":"CONTRIBUTOR","body":"@cotedm This LGTM but just needs a quick rebase. Sorry for being slow to get to this :(","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263648678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263650924","html_url":"https://github.com/apache/kafka/pull/2168#issuecomment-263650924","issue_url":"https://api.github.com/repos/apache/kafka/issues/2168","id":263650924,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY1MDkyNA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T18:12:05Z","updated_at":"2016-11-29T18:12:05Z","author_association":"MEMBER","body":"Is it possible to write a test for this (yes, it may sometimes sound like I ask the same question over and over, but it's an important question :)).","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263650924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263656493","html_url":"https://github.com/apache/kafka/pull/2145#issuecomment-263656493","issue_url":"https://api.github.com/repos/apache/kafka/issues/2145","id":263656493,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY1NjQ5Mw==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T18:32:02Z","updated_at":"2016-11-29T18:32:02Z","author_association":"CONTRIBUTOR","body":"I like removing unused code too! LGTM","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263656493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263656726","html_url":"https://github.com/apache/kafka/pull/2185#issuecomment-263656726","issue_url":"https://api.github.com/repos/apache/kafka/issues/2185","id":263656726,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY1NjcyNg==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T18:32:50Z","updated_at":"2016-11-29T18:32:50Z","author_association":"CONTRIBUTOR","body":"@mjsax do you want to commit this into AK or just want to do this locally for debug testing? For example, you can add those logging and run-until-failure on IntelliJ and then see the logs.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263656726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263661111","html_url":"https://github.com/apache/kafka/pull/2176#issuecomment-263661111","issue_url":"https://api.github.com/repos/apache/kafka/issues/2176","id":263661111,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY2MTExMQ==","user":{"login":"baluchicken","id":14196407,"node_id":"MDQ6VXNlcjE0MTk2NDA3","avatar_url":"https://avatars.githubusercontent.com/u/14196407?v=4","gravatar_id":"","url":"https://api.github.com/users/baluchicken","html_url":"https://github.com/baluchicken","followers_url":"https://api.github.com/users/baluchicken/followers","following_url":"https://api.github.com/users/baluchicken/following{/other_user}","gists_url":"https://api.github.com/users/baluchicken/gists{/gist_id}","starred_url":"https://api.github.com/users/baluchicken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baluchicken/subscriptions","organizations_url":"https://api.github.com/users/baluchicken/orgs","repos_url":"https://api.github.com/users/baluchicken/repos","events_url":"https://api.github.com/users/baluchicken/events{/privacy}","received_events_url":"https://api.github.com/users/baluchicken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T18:48:29Z","updated_at":"2016-11-29T18:48:29Z","author_association":"CONTRIBUTOR","body":"@hachikuji I updated the pull request, thanks for your patience.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263661111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263666845","html_url":"https://github.com/apache/kafka/pull/2171#issuecomment-263666845","issue_url":"https://api.github.com/repos/apache/kafka/issues/2171","id":263666845,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY2Njg0NQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T19:08:39Z","updated_at":"2016-11-29T19:08:39Z","author_association":"CONTRIBUTOR","body":"Merged to trunk.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263666845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263668332","html_url":"https://github.com/apache/kafka/pull/2187#issuecomment-263668332","issue_url":"https://api.github.com/repos/apache/kafka/issues/2187","id":263668332,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY2ODMzMg==","user":{"login":"raghavgautam","id":1521534,"node_id":"MDQ6VXNlcjE1MjE1MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1521534?v=4","gravatar_id":"","url":"https://api.github.com/users/raghavgautam","html_url":"https://github.com/raghavgautam","followers_url":"https://api.github.com/users/raghavgautam/followers","following_url":"https://api.github.com/users/raghavgautam/following{/other_user}","gists_url":"https://api.github.com/users/raghavgautam/gists{/gist_id}","starred_url":"https://api.github.com/users/raghavgautam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raghavgautam/subscriptions","organizations_url":"https://api.github.com/users/raghavgautam/orgs","repos_url":"https://api.github.com/users/raghavgautam/repos","events_url":"https://api.github.com/users/raghavgautam/events{/privacy}","received_events_url":"https://api.github.com/users/raghavgautam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T19:14:02Z","updated_at":"2016-11-29T19:14:02Z","author_association":"CONTRIBUTOR","body":"@ewencp @ijuma @harshach I have opened new jira KAFKA-4463 for the travis-ci setup and related work.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263668332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263670626","html_url":"https://github.com/apache/kafka/pull/2140#issuecomment-263670626","issue_url":"https://api.github.com/repos/apache/kafka/issues/2140","id":263670626,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY3MDYyNg==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T19:22:00Z","updated_at":"2016-11-29T19:22:00Z","author_association":"CONTRIBUTOR","body":"Update: I've begun performance testing. I'm seeing a substantial performance degradation on the consumer side. I'll update this PR when I know more.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263670626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263672946","html_url":"https://github.com/apache/kafka/pull/1716#issuecomment-263672946","issue_url":"https://api.github.com/repos/apache/kafka/issues/1716","id":263672946,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY3Mjk0Ng==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T19:30:04Z","updated_at":"2016-11-29T19:30:04Z","author_association":"CONTRIBUTOR","body":"This LGTM now, but maybe @junrao can take a look as well. I think the semantics that were implemented and the semantics specified in the comments didn't previously match up, so it's probably worth making sure we don't rely on this elsewhere. I'm not as familiar with this area of the code, so a second opinion would be worth it. That said, it does appear that we call these methods in cases where we don't seem to check whether cleaning has started/paused, so they probably do need to no throw the exception when already paused. Throwing it when aborted still seems ok since I don't think multiple threads should be able to call that code at the same time and it is supposed to block until it gets into a paused state.\r\n\r\nAlso, could we test this behavior in `LogCleanerManagerTest`?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263672946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263672965","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-263672965","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":263672965,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY3Mjk2NQ==","user":{"login":"dpoldrugo","id":1514332,"node_id":"MDQ6VXNlcjE1MTQzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1514332?v=4","gravatar_id":"","url":"https://api.github.com/users/dpoldrugo","html_url":"https://github.com/dpoldrugo","followers_url":"https://api.github.com/users/dpoldrugo/followers","following_url":"https://api.github.com/users/dpoldrugo/following{/other_user}","gists_url":"https://api.github.com/users/dpoldrugo/gists{/gist_id}","starred_url":"https://api.github.com/users/dpoldrugo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpoldrugo/subscriptions","organizations_url":"https://api.github.com/users/dpoldrugo/orgs","repos_url":"https://api.github.com/users/dpoldrugo/repos","events_url":"https://api.github.com/users/dpoldrugo/events{/privacy}","received_events_url":"https://api.github.com/users/dpoldrugo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T19:30:07Z","updated_at":"2016-12-02T19:25:16Z","author_association":"CONTRIBUTOR","body":"Imported checkstyle/checkstyle.xml - so next time this won't happen.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263672965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263680877","html_url":"https://github.com/apache/kafka/pull/2168#issuecomment-263680877","issue_url":"https://api.github.com/repos/apache/kafka/issues/2168","id":263680877,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4MDg3Nw==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T19:57:42Z","updated_at":"2016-11-29T19:57:42Z","author_association":"CONTRIBUTOR","body":"@ijuma It might be a little tricky to write test in this case. The bug was caught by a race condition that the broker comes up during the controller fail over and before the controller finishing initializing its context. We can write a test but the test might also subject to race condition unless we put special logic in the actual code to guarantee the order, which seems intrusive. Do you have any suggestion on how to test such cases?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263680877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263682818","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263682818","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263682818,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4MjgxOA==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T20:04:49Z","updated_at":"2016-11-29T20:05:54Z","author_association":"CONTRIBUTOR","body":"@hachikuji Thanks for the update. The regression we saw was from running the code in our production traffic. When acks=-1 is turned on, the produce purgatory size increased noticeably(~60%), but I did not see throughput issue. The `ConcurrentLinkedList` seems a good solution. \r\n\r\nI ran the test gain on my Linux box an here are the results.\r\nTrunk\r\n\r\n| elapsed time ms | target rate | actual rate | process cpu time ms | G1 Old Generation count | G1 Young Generation count | G1 Old Generation time ms | G1 Young Generation time ms |\r\n|-----------------|-------------|-------------|---------------------|-------------------------|---------------------------|---------------------------|-----------------------------|\r\n| 100386          | 9971.282706 | 9971.282706 | 40650               | 0                       | 49                        | 0                         | 231                         |\r\n\r\nWith current patch:\r\n\r\n| elapsed time ms | target rate  | actual rate  | process cpu time ms | G1 Old Generation count | G1 Young Generation count | G1 Old Generation time ms | G1 Young Generation time ms |\r\n|-----------------|--------------|--------------|---------------------|-------------------------|---------------------------|---------------------------|-----------------------------|\r\n| 100046          | 10005.503027 | 10005.503027 | 42900               | 0                       | 167                       | 0                         | 430                         |\r\n\r\nThe result on my macbook pro looks not stable... The CPU time varies between 30000 ms and 45000 ms. But it looks that the trunk does take a little more time than the current patch from a few runs I saw.\r\n\r\n`ConcurrentLinkedList` sounds a promising fix. But in any case, I think we should fix the bug even if that might introduce some performance impact.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263682818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263683901","html_url":"https://github.com/apache/kafka/pull/2169#issuecomment-263683901","issue_url":"https://api.github.com/repos/apache/kafka/issues/2169","id":263683901,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4MzkwMQ==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T20:08:59Z","updated_at":"2016-11-29T20:08:59Z","author_association":"CONTRIBUTOR","body":"LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263683901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263685406","html_url":"https://github.com/apache/kafka/pull/1028#issuecomment-263685406","issue_url":"https://api.github.com/repos/apache/kafka/issues/1028","id":263685406,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4NTQwNg==","user":{"login":"soumyajit-sahu","id":15989065,"node_id":"MDQ6VXNlcjE1OTg5MDY1","avatar_url":"https://avatars.githubusercontent.com/u/15989065?v=4","gravatar_id":"","url":"https://api.github.com/users/soumyajit-sahu","html_url":"https://github.com/soumyajit-sahu","followers_url":"https://api.github.com/users/soumyajit-sahu/followers","following_url":"https://api.github.com/users/soumyajit-sahu/following{/other_user}","gists_url":"https://api.github.com/users/soumyajit-sahu/gists{/gist_id}","starred_url":"https://api.github.com/users/soumyajit-sahu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soumyajit-sahu/subscriptions","organizations_url":"https://api.github.com/users/soumyajit-sahu/orgs","repos_url":"https://api.github.com/users/soumyajit-sahu/repos","events_url":"https://api.github.com/users/soumyajit-sahu/events{/privacy}","received_events_url":"https://api.github.com/users/soumyajit-sahu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T20:14:54Z","updated_at":"2016-11-29T20:14:54Z","author_association":"NONE","body":"Closing this as the real fix is now https://github.com/apache/kafka/pull/1716","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263685406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263685746","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263685746","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263685746,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4NTc0Ng==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T20:16:14Z","updated_at":"2016-11-29T20:16:14Z","author_association":"CONTRIBUTOR","body":"Thanks @becketqin! Any chance you could run the same benchmark on your linux box using this branch: https://github.com/hachikuji/kafka/tree/KAFKA-3994-linked-queue. I'll also repeat the tests on EC2.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263685746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263687962","html_url":"https://github.com/apache/kafka/pull/2140#issuecomment-263687962","issue_url":"https://api.github.com/repos/apache/kafka/issues/2140","id":263687962,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzY4Nzk2Mg==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T20:24:27Z","updated_at":"2016-11-29T20:24:27Z","author_association":"CONTRIBUTOR","body":"I found the cause of the performance regression. When handling a fetch, we must read through the log to find the starting position of a given offset (starting from the position given by the index). To do so, we only need to read the offset and size, but one of my recent commits accidentally changed this behavior to unnecessarily read the full record. I've fixed this in the last commit and now it looks like performance is within 5% of trunk for the producer and consumer. Perhaps still on the slower side though, so I'll continue investigating.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263687962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263719683","html_url":"https://github.com/apache/kafka/pull/2170#issuecomment-263719683","issue_url":"https://api.github.com/repos/apache/kafka/issues/2170","id":263719683,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzcxOTY4Mw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T22:24:21Z","updated_at":"2016-11-29T22:24:21Z","author_association":"MEMBER","body":"Thanks for the explanation, LGTM. @becketqin do you want to review too?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263719683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263728889","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263728889","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263728889,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzcyODg4OQ==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T23:03:22Z","updated_at":"2016-11-29T23:03:22Z","author_association":"CONTRIBUTOR","body":"@hachikuji I ran your branch a couple of times on the Linux box and compared it with the result of trunk and current patch. The branch gives statistically better result than the current patch.\r\n\r\ncurrent patch:\r\n\r\n| elapsed time ms | target rate  | actual rate  | process cpu time ms | G1 Old Generation count | G1 Young Generation count | G1 Old Generation time ms | G1 Young Generation time ms |\r\n|-----------------|--------------|--------------|---------------------|-------------------------|---------------------------|---------------------------|-----------------------------|\r\n| 100012          | 10008.607402 | 10008.607402 | 53610               | 0                       | 165                       | 0                         | 476                         |\r\n\r\nconcurrent linked queue\r\n\r\n| elapsed time ms | target rate | actual rate | process cpu time ms | G1 Old Generation count | G1 Young Generation count | G1 Old Generation time ms | G1 Young Generation time ms |\r\n|-----------------|-------------|-------------|---------------------|-------------------------|---------------------------|---------------------------|-----------------------------|\r\n| 100561          | 9954.210631 | 9954.210631 | 47690               | 0                       | 54                        | 0                         | 326                         |\r\n\r\ntrunk\r\n\r\n| elapsed time ms | target rate  | actual rate  | process cpu time ms | G1 Old Generation count | G1 Young Generation count | G1 Old Generation time ms | G1 Young Generation time ms |\r\n|-----------------|--------------|--------------|---------------------|-------------------------|---------------------------|---------------------------|-----------------------------|\r\n| 99927           | 10017.229635 | 10017.229635 | 46380               | 0                       | 49                        | 0                         | 255                         |\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263728889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263734050","html_url":"https://github.com/apache/kafka/pull/2123#issuecomment-263734050","issue_url":"https://api.github.com/repos/apache/kafka/issues/2123","id":263734050,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzczNDA1MA==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T23:29:04Z","updated_at":"2016-11-29T23:29:04Z","author_association":"CONTRIBUTOR","body":"LGTM. I'm going to address @shikhar's last comment on check-in, it's just a couple of methods and imports to be removed.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263734050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263737067","html_url":"https://github.com/apache/kafka/pull/2180#issuecomment-263737067","issue_url":"https://api.github.com/repos/apache/kafka/issues/2180","id":263737067,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzczNzA2Nw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T23:44:28Z","updated_at":"2016-11-29T23:44:28Z","author_association":"MEMBER","body":"We don't typically use builders in Kafka for things like this. There are some pros and cons and it would be good to get some other opinions, what do you think @hachikuji? I wish Java supported named arguments. :)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263737067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263739244","html_url":"https://github.com/apache/kafka/pull/2180#issuecomment-263739244","issue_url":"https://api.github.com/repos/apache/kafka/issues/2180","id":263739244,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzczOTI0NA==","user":{"login":"cmccabe","id":1095624,"node_id":"MDQ6VXNlcjEwOTU2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1095624?v=4","gravatar_id":"","url":"https://api.github.com/users/cmccabe","html_url":"https://github.com/cmccabe","followers_url":"https://api.github.com/users/cmccabe/followers","following_url":"https://api.github.com/users/cmccabe/following{/other_user}","gists_url":"https://api.github.com/users/cmccabe/gists{/gist_id}","starred_url":"https://api.github.com/users/cmccabe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmccabe/subscriptions","organizations_url":"https://api.github.com/users/cmccabe/orgs","repos_url":"https://api.github.com/users/cmccabe/repos","events_url":"https://api.github.com/users/cmccabe/events{/privacy}","received_events_url":"https://api.github.com/users/cmccabe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-29T23:56:14Z","updated_at":"2016-11-29T23:56:14Z","author_association":"CONTRIBUTOR","body":"Thanks for taking a look at this, @ijuma.  I think the builder pattern makes a lot of sense for scenarios where there is a large (and growing) number of arguments to a constructor.   See http://www.javaworld.com/article/2074938/core-java/too-many-parameters-in-java-methods-part-3-builder-pattern.html for a pretty good discussion.  Joshua Bloch discusses this in depth in Effective Java, in his second item, which makes it as close to canonical good Java style as you're likely to get ;)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263739244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263740250","html_url":"https://github.com/apache/kafka/pull/2180#issuecomment-263740250","issue_url":"https://api.github.com/repos/apache/kafka/issues/2180","id":263740250,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc0MDI1MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T00:02:04Z","updated_at":"2016-11-30T00:02:04Z","author_association":"CONTRIBUTOR","body":"I have mixed feelings. Constructing the `NetworkClient` _is_ kind of painful at the moment, but there's only a handful of places where we do it and it's not exposed to users, so the overall win seems small. I do like having the names present since then I don't have to cross-reference the constructor to find out which parameter is which.  Maybe if we're going to go this far, then we ought to build the `Selector` inside `NetworkClient.Builder` as well.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263740250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263741262","html_url":"https://github.com/apache/kafka/pull/2180#issuecomment-263741262","issue_url":"https://api.github.com/repos/apache/kafka/issues/2180","id":263741262,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc0MTI2Mg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T00:07:40Z","updated_at":"2016-11-30T00:07:40Z","author_association":"MEMBER","body":"Thanks for the reference @cmccabe. the article does a reasonable job of listing the pros and cons. \r\n\r\nOne of the cases where builders are a bit of a mixed bag is if a large number of parameters is mandatory. In that case, it's not possible to use the pattern of passing mandatory parameters to the builder's constructor without defeating the point of using a builder in the first place. So you end up introducing a new failure scenario: someone forgets to set a mandatory parameter. Furthermore, if you introduce a new parameter, you won't get a compiler error as you would for the constructor with lots of parameters case.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263741262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263745352","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-263745352","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":263745352,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc0NTM1Mg==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T00:29:03Z","updated_at":"2016-11-30T00:29:03Z","author_association":"MEMBER","body":"Can you add a test?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263745352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263748114","html_url":"https://github.com/apache/kafka/pull/2180#issuecomment-263748114","issue_url":"https://api.github.com/repos/apache/kafka/issues/2180","id":263748114,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc0ODExNA==","user":{"login":"cmccabe","id":1095624,"node_id":"MDQ6VXNlcjEwOTU2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1095624?v=4","gravatar_id":"","url":"https://api.github.com/users/cmccabe","html_url":"https://github.com/cmccabe","followers_url":"https://api.github.com/users/cmccabe/followers","following_url":"https://api.github.com/users/cmccabe/following{/other_user}","gists_url":"https://api.github.com/users/cmccabe/gists{/gist_id}","starred_url":"https://api.github.com/users/cmccabe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmccabe/subscriptions","organizations_url":"https://api.github.com/users/cmccabe/orgs","repos_url":"https://api.github.com/users/cmccabe/repos","events_url":"https://api.github.com/users/cmccabe/events{/privacy}","received_events_url":"https://api.github.com/users/cmccabe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T00:45:02Z","updated_at":"2016-11-30T00:45:02Z","author_association":"CONTRIBUTOR","body":"> One of the cases where builders are a bit of a mixed bag is if a large number of parameters is mandatory.\r\n\r\nHmm.  More than half of these parameters are optional.  socketSendBuffer, socketReceiveBuffer, maxInFlightRequestsPerConnection, requestTimeoutMs, and the time implementation could all have sensible defaults that don't need to be changed in most unit tests.  But we're forced to specify them every time, currently.  It also adds cognitive overhead to writing new code since you have to look up what the sensible default would be, or find another invocation to copy/paste and hope they got it right.\r\n\r\n> In that case, it's not possible to use the pattern of passing mandatory parameters to the builder's constructor without defeating the point of using a builder in the first place. So you end up introducing a new failure scenario: someone forgets to set a mandatory parameter. Furthermore, if you introduce a new parameter, you won't get a compiler error as you would for the constructor with lots of parameters case.\r\n\r\nThe bug caused by failing to set a required builder parameter is immediately obvious and caught by even the most trivial unit test.  If a parameter is mandatory, you just check for it when constructing the object and throw an exception if it is not set.  In contrast, constructors with huge numbers of parameters can lead to subtle bugs that might not be found for a very long time.  To quote Joshua Bloch: \"Long sequences of identically typed parameters can cause subtle bugs. If the client accidentally reverses two such parameters, the compiler won’t complain, but the program will misbehave at runtime (Item 40).\"  This is a much bigger type safety hole than required parameters.\r\n\r\nAlso, since this is Java we're talking about, everything is nullable anyway... and if you look at the existing API, you'll see that we make use of this fact (the MetadataUpdater and Metadata constructor parameters can't simultaneously be set-- one needs to be null.)  So you don't have type-safety here currently.\r\n\r\nBy my count, we create a NetworkClient in 9 different places in the code, once tests are included.  That seems like a large number to me.  As you said, it's very painful and frustrating to add a new constructor parameter to all those different places.  I would also add that the chances of making a mistake are very high-- is the 7th parameter receive buffer size or send buffer size?  etc.  There are some places in the code where I feel like someone might have already made this mistake-- I don't understand why some unit tests are setting explicit socket buffer sizes, when they would be better served by letting linux auto-size the buffer, for example.\r\n\r\nUltimately, if Java10 gets named parameters, or if there's some other solution to this issue, we can always refactor this code later, since it's a private API :)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263748114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263765278","html_url":"https://github.com/apache/kafka/pull/2190#issuecomment-263765278","issue_url":"https://api.github.com/repos/apache/kafka/issues/2190","id":263765278,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc2NTI3OA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T02:32:20Z","updated_at":"2016-11-30T02:32:20Z","author_association":"CONTRIBUTOR","body":"cc @guozhangwang @ijuma ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263765278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263772372","html_url":"https://github.com/apache/kafka/pull/2176#issuecomment-263772372","issue_url":"https://api.github.com/repos/apache/kafka/issues/2176","id":263772372,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc3MjM3Mg==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T03:21:17Z","updated_at":"2016-11-30T03:21:17Z","author_association":"CONTRIBUTOR","body":"LGTM. Thanks for the patch! The jenkins failure seems unrelated, but I built locally to be sure.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263772372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263775316","html_url":"https://github.com/apache/kafka/pull/2110#issuecomment-263775316","issue_url":"https://api.github.com/repos/apache/kafka/issues/2110","id":263775316,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc3NTMxNg==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T03:43:09Z","updated_at":"2016-11-30T03:43:09Z","author_association":"CONTRIBUTOR","body":"LGTM. Thanks for the patience with the slow review cycle. I might make a couple tiny doc tweaks when I merge.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263775316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263781327","html_url":"https://github.com/apache/kafka/pull/2189#issuecomment-263781327","issue_url":"https://api.github.com/repos/apache/kafka/issues/2189","id":263781327,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4MTMyNw==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T04:39:23Z","updated_at":"2016-11-30T04:39:23Z","author_association":"CONTRIBUTOR","body":"@guozhangwang Is it worth pulling this into 0.10.1.1? It seems low-risk.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263781327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263784071","html_url":"https://github.com/apache/kafka/pull/1548#issuecomment-263784071","issue_url":"https://api.github.com/repos/apache/kafka/issues/1548","id":263784071,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4NDA3MQ==","user":{"login":"imandhan","id":6530254,"node_id":"MDQ6VXNlcjY1MzAyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6530254?v=4","gravatar_id":"","url":"https://api.github.com/users/imandhan","html_url":"https://github.com/imandhan","followers_url":"https://api.github.com/users/imandhan/followers","following_url":"https://api.github.com/users/imandhan/following{/other_user}","gists_url":"https://api.github.com/users/imandhan/gists{/gist_id}","starred_url":"https://api.github.com/users/imandhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imandhan/subscriptions","organizations_url":"https://api.github.com/users/imandhan/orgs","repos_url":"https://api.github.com/users/imandhan/repos","events_url":"https://api.github.com/users/imandhan/events{/privacy}","received_events_url":"https://api.github.com/users/imandhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T05:04:21Z","updated_at":"2016-11-30T05:04:21Z","author_association":"CONTRIBUTOR","body":"Hey @hachikuji I'm having trouble rebasing. After I rebase and resolve conflicts locally, when I try to push I think it will include all the commits as part of this PR (similar to what happened earlier with me [here](https://github.com/apache/kafka/pull/1748)) and I don't want to spam everyone. Do you still want me to rebase?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263784071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263784840","html_url":"https://github.com/apache/kafka/pull/1548#issuecomment-263784840","issue_url":"https://api.github.com/repos/apache/kafka/issues/1548","id":263784840,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4NDg0MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T05:11:47Z","updated_at":"2016-11-30T05:11:47Z","author_association":"CONTRIBUTOR","body":"@imandhan After rebasing and resolving conflicts, you should force push (`git push -f`). That should override the current commit. In the worst case, you end up screwing up your branch and then we can just close the PR and try again.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263784840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263785139","html_url":"https://github.com/apache/kafka/pull/2125#issuecomment-263785139","issue_url":"https://api.github.com/repos/apache/kafka/issues/2125","id":263785139,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4NTEzOQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T05:14:33Z","updated_at":"2016-11-30T05:15:37Z","author_association":"CONTRIBUTOR","body":"@resetius Could you take a look at https://github.com/apache/kafka/pull/1738 and see if that fixed this issue as well? We'd like to make a 0.10.1.1 release and are considering whether KAFKA-4399 can be solved as part of KAFKA-3994, or if it should wait for 0.10.2.0.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263785139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263786350","html_url":"https://github.com/apache/kafka/pull/2125#issuecomment-263786350","issue_url":"https://api.github.com/repos/apache/kafka/issues/2125","id":263786350,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4NjM1MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T05:24:38Z","updated_at":"2016-11-30T05:24:38Z","author_association":"CONTRIBUTOR","body":"@guozhangwang I was wondering this also, but unfortunately, I don't think that fix will be enough to address this issue. This deadlock is caused by the mix of the group lock and the synchronization around calls to `DelayedProduce`, which still exist in the #1738.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263786350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263787842","html_url":"https://github.com/apache/kafka/pull/2125#issuecomment-263787842","issue_url":"https://api.github.com/repos/apache/kafka/issues/2125","id":263787842,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4Nzg0Mg==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T05:37:21Z","updated_at":"2016-11-30T05:37:21Z","author_association":"CONTRIBUTOR","body":"In that case, @resetius are you willing to take the comments as soon as possible from @hachikuji to make it in the 0.10.1.1?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263787842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263787866","html_url":"https://github.com/apache/kafka/pull/2190#issuecomment-263787866","issue_url":"https://api.github.com/repos/apache/kafka/issues/2190","id":263787866,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc4Nzg2Ng==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T05:37:32Z","updated_at":"2016-11-30T05:37:32Z","author_association":"CONTRIBUTOR","body":"LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263787866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263791071","html_url":"https://github.com/apache/kafka/pull/2125#issuecomment-263791071","issue_url":"https://api.github.com/repos/apache/kafka/issues/2125","id":263791071,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc5MTA3MQ==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T06:03:55Z","updated_at":"2016-11-30T06:03:55Z","author_association":"CONTRIBUTOR","body":"@guozhangwang @hachikuji thanks for comments. This problem is critical for us, I'll take it this week.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263791071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263791290","html_url":"https://github.com/apache/kafka/pull/2125#issuecomment-263791290","issue_url":"https://api.github.com/repos/apache/kafka/issues/2125","id":263791290,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc5MTI5MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T06:05:48Z","updated_at":"2016-11-30T06:05:48Z","author_association":"CONTRIBUTOR","body":"Awesome, thanks @resetius! Let us know if we can help. At least I will review much quicker!","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263791290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263794224","html_url":"https://github.com/apache/kafka/pull/2170#issuecomment-263794224","issue_url":"https://api.github.com/repos/apache/kafka/issues/2170","id":263794224,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc5NDIyNA==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T06:28:28Z","updated_at":"2016-11-30T06:28:28Z","author_association":"CONTRIBUTOR","body":"Thanks for the patch. LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263794224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263796742","html_url":"https://github.com/apache/kafka/pull/2181#issuecomment-263796742","issue_url":"https://api.github.com/repos/apache/kafka/issues/2181","id":263796742,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc5Njc0Mg==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T06:45:52Z","updated_at":"2016-11-30T06:45:52Z","author_association":"CONTRIBUTOR","body":"Thanks for the patch. LGTM. Regarding the boot sequence issue that the broker may receive a request from a client before it receives the controllers request, could you file another Jira ticket to track?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263796742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263797756","html_url":"https://github.com/apache/kafka/pull/1738#issuecomment-263797756","issue_url":"https://api.github.com/repos/apache/kafka/issues/1738","id":263797756,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzc5Nzc1Ng==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T06:53:22Z","updated_at":"2016-11-30T06:53:22Z","author_association":"CONTRIBUTOR","body":"I did some more testing on EC2, but the results were a bit erratic, so I'm not sure they're worth reporting. Broadly, they agreed with what I posted previously. The current patch did have lower CPU time, but probably not outside the margin of error. \r\n\r\nSo where do we stand? Considering both my testing and Becket's testing, it seems the patch using the `ConcurrentLinkedQueue` has performance closest to trunk. I'd recommend we go with that rather than leaving this hanging around for another release cycle.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263797756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263826965","html_url":"https://github.com/apache/kafka/pull/2193#issuecomment-263826965","issue_url":"https://api.github.com/repos/apache/kafka/issues/2193","id":263826965,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzgyNjk2NQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T09:37:50Z","updated_at":"2016-11-30T09:37:50Z","author_association":"MEMBER","body":"cc @hachikuji ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263826965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263835993","html_url":"https://github.com/apache/kafka/pull/2190#issuecomment-263835993","issue_url":"https://api.github.com/repos/apache/kafka/issues/2190","id":263835993,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MzgzNTk5Mw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T10:18:07Z","updated_at":"2016-11-30T10:18:07Z","author_association":"MEMBER","body":"Btw, if you agree that the issue is likely to be the `iterator.remove` from the head of the ArrayList (one at a time) it may be worth updating the PR title and JIRA description (hopefully that helps someone in a future investigation :)).","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263835993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263845137","html_url":"https://github.com/apache/kafka/pull/2168#issuecomment-263845137","issue_url":"https://api.github.com/repos/apache/kafka/issues/2168","id":263845137,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzg0NTEzNw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T10:59:04Z","updated_at":"2016-11-30T10:59:04Z","author_association":"MEMBER","body":"@becketqin I think for cases like this one would probably write test cases using mocks that validate that things happen in a certain order. I understand that the controller doesn't make this easy and it shouldn't be a blocker if it turns out that it's too hard with the current design. But the default should be to include tests with bug fixes and if we don't, there should be an explanation on the PR.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263845137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263847858","html_url":"https://github.com/apache/kafka/pull/2194#issuecomment-263847858","issue_url":"https://api.github.com/repos/apache/kafka/issues/2194","id":263847858,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzg0Nzg1OA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T11:12:44Z","updated_at":"2016-11-30T11:12:44Z","author_association":"MEMBER","body":"cc @lindong28 @becketqin ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263847858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263871216","html_url":"https://github.com/apache/kafka/pull/2169#issuecomment-263871216","issue_url":"https://api.github.com/repos/apache/kafka/issues/2169","id":263871216,"node_id":"MDEyOklzc3VlQ29tbWVudDI2Mzg3MTIxNg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-30T13:19:04Z","updated_at":"2016-11-30T13:19:04Z","author_association":"MEMBER","body":"Nice improvement. :)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/263871216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]