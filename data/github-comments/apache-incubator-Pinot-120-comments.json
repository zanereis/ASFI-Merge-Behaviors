[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1019933247","html_url":"https://github.com/apache/pinot/pull/8057#issuecomment-1019933247","issue_url":"https://api.github.com/repos/apache/pinot/issues/8057","id":1019933247,"node_id":"IC_kwDOATCU_c48yvI_","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T10:15:13Z","updated_at":"2022-01-24T10:15:13Z","author_association":"MEMBER","body":"hi @kriti-sc could you cover this with some tests please? I would want to see both:\r\n* Unit tests at the Kafka consumer level e.g. the correct offsets are produced from a given timestamp, mocking the `Consumer`\r\n* An integration test involving `LLRealtimeSegmentDataManager` with `TIMESTAMP` offset type.\r\n\r\nI recently had to fix a bug where realtime ingestion stalled indefinitely, which was caused by a very simple change to Kafka stream consumption, so going forwards I would like to see proof that `LLRealtimeSegmentDataManager#consumeLoop` can advance whenever a newly introduced branch/setting is active.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1019933247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1019987354","html_url":"https://github.com/apache/pinot/issues/8060#issuecomment-1019987354","issue_url":"https://api.github.com/repos/apache/pinot/issues/8060","id":1019987354,"node_id":"IC_kwDOATCU_c48y8Wa","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T11:14:48Z","updated_at":"2022-01-24T11:14:48Z","author_association":"CONTRIBUTOR","body":"I have started working on this and aim to publish a design document by end of this week","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1019987354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020026435","html_url":"https://github.com/apache/pinot/pull/7959#issuecomment-1020026435","issue_url":"https://api.github.com/repos/apache/pinot/issues/7959","id":1020026435,"node_id":"IC_kwDOATCU_c48zF5D","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T12:02:45Z","updated_at":"2022-01-24T12:03:07Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang @amrishlal @siddharthteotia Requesting review, thanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020026435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020256316","html_url":"https://github.com/apache/pinot/pull/7972#issuecomment-1020256316","issue_url":"https://api.github.com/repos/apache/pinot/issues/7972","id":1020256316,"node_id":"IC_kwDOATCU_c48z-A8","user":{"login":"PrachiPrakash","id":5945132,"node_id":"MDQ6VXNlcjU5NDUxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/5945132?v=4","gravatar_id":"","url":"https://api.github.com/users/PrachiPrakash","html_url":"https://github.com/PrachiPrakash","followers_url":"https://api.github.com/users/PrachiPrakash/followers","following_url":"https://api.github.com/users/PrachiPrakash/following{/other_user}","gists_url":"https://api.github.com/users/PrachiPrakash/gists{/gist_id}","starred_url":"https://api.github.com/users/PrachiPrakash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrachiPrakash/subscriptions","organizations_url":"https://api.github.com/users/PrachiPrakash/orgs","repos_url":"https://api.github.com/users/PrachiPrakash/repos","events_url":"https://api.github.com/users/PrachiPrakash/events{/privacy}","received_events_url":"https://api.github.com/users/PrachiPrakash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T16:01:28Z","updated_at":"2022-01-24T16:01:28Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang, siddharthteotia made the changes as per the review by removing expressionContainsColumn(expr) and  making all the logic changes in   validateGroupByClause(PinotQuery pinotQuery) can you please have a look.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020256316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020262029","html_url":"https://github.com/apache/pinot/pull/8053#issuecomment-1020262029","issue_url":"https://api.github.com/repos/apache/pinot/issues/8053","id":1020262029,"node_id":"IC_kwDOATCU_c48z_aN","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T16:06:44Z","updated_at":"2022-01-24T16:06:44Z","author_association":"CONTRIBUTOR","body":"Need to merge this, already have two users in OSS waiting for this. If there's any concerns, will address separately in follow-ups","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020262029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020293534","html_url":"https://github.com/apache/pinot/issues/8060#issuecomment-1020293534","issue_url":"https://api.github.com/repos/apache/pinot/issues/8060","id":1020293534,"node_id":"IC_kwDOATCU_c480HGe","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T16:35:01Z","updated_at":"2022-01-24T16:35:01Z","author_association":"CONTRIBUTOR","body":"Hi @atris . This looks like a super powerful feature. thanks for working on this.\r\n\r\non the higher level, would you please describe briefly the scope of this design? specifically\r\n1. is it more on the syntactically support (e.g. I think calcite parser natively supports the 3 concepts, see: https://calcite.apache.org/docs/reference.html#groupItems) or more on how to design the aggregation operators to carry out the compute?\r\n2. for the equivalent UNION ALL syntax, I don't think you can achieve that with one simple scatter-gather execution. were you planning to support this by issuing multiple brokerRequests with different group by keys?\r\n\r\nthanks in advance.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020293534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020369110","html_url":"https://github.com/apache/pinot/issues/7941#issuecomment-1020369110","issue_url":"https://api.github.com/repos/apache/pinot/issues/7941","id":1020369110,"node_id":"IC_kwDOATCU_c480ZjW","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T17:43:42Z","updated_at":"2022-01-24T17:43:42Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/pinot/pull/8059","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020369110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020369583","html_url":"https://github.com/apache/pinot/pull/8024#issuecomment-1020369583","issue_url":"https://api.github.com/repos/apache/pinot/issues/8024","id":1020369583,"node_id":"IC_kwDOATCU_c480Zqv","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T17:44:17Z","updated_at":"2022-01-24T17:44:17Z","author_association":"CONTRIBUTOR","body":"> > This would allow a user to use a git repository as a way to version control and manage configurations for each of the different components. Any thoughts on this @amrishlal?\r\n> \r\n> This is more generalized (and probably more useful) approach than what I had in mind, but I was mainly thinking about something very simple like specifying a command line parameter (\"-debug\" or \"-dev\") that would increase the value of DEFAULT_BROKER_TIMEOUT_MS, DEFAULT_QUERY_EXECUTOR_TIMEOUT_MS, and _maxLinesOfStackTracePerFrame) so that one could easily debug code through Quickstart without timing out in the middle of a debug session.\r\n\r\nAdded in https://github.com/apache/pinot/pull/8059","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020369583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020434032","html_url":"https://github.com/apache/pinot/pull/8063#issuecomment-1020434032","issue_url":"https://api.github.com/repos/apache/pinot/issues/8063","id":1020434032,"node_id":"IC_kwDOATCU_c480pZw","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T18:56:05Z","updated_at":"2022-01-24T18:56:05Z","author_association":"CONTRIBUTOR","body":"We can (and probably should) change this, but it will be an incompat change. please be sure to mark it as such in the release.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020434032/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020456214","html_url":"https://github.com/apache/pinot/pull/8063#issuecomment-1020456214","issue_url":"https://api.github.com/repos/apache/pinot/issues/8063","id":1020456214,"node_id":"IC_kwDOATCU_c480u0W","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T19:19:43Z","updated_at":"2022-01-24T19:19:43Z","author_association":"CONTRIBUTOR","body":"thanks for the feedback @mcvsubbu :-) yes I have the exact same concern and will do just that. will follow up @Jackie-Jiang 's comment too. here is the context https://github.com/apache/pinot/issues/8064","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020456214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020537555","html_url":"https://github.com/apache/pinot/pull/8065#issuecomment-1020537555","issue_url":"https://api.github.com/repos/apache/pinot/issues/8065","id":1020537555,"node_id":"IC_kwDOATCU_c481CrT","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T20:54:36Z","updated_at":"2022-01-24T21:12:55Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8065](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (85076c4) into [master](https://codecov.io/gh/apache/pinot/commit/e23d5e7b80a5dfaa44b7dc00f2548da24b500680?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e23d5e7) will **increase** coverage by `0.08%`.\n> The diff coverage is `64.28%`.\n\n> :exclamation: Current head 85076c4 differs from pull request most recent head fed45e6. Consider uploading reports for the commit fed45e6 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8065/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #8065      +/-   ##\n==========================================\n+ Coverage   30.63%   30.72%   +0.08%     \n==========================================\n  Files        1597     1597              \n  Lines       83055    83057       +2     \n  Branches    12417    12417              \n==========================================\n+ Hits        25447    25520      +73     \n+ Misses      55361    55288      -73     \n- Partials     2247     2249       +2     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.01% <64.28%> (+0.02%)` | :arrow_up: |\n| integration2 | `27.63% <35.71%> (+0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/pinot/spi/stream/StreamConfig.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbUNvbmZpZy5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../core/realtime/PinotLLCRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90TExDUmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `62.20% <75.00%> (-0.17%)` | :arrow_down: |\n| [...ller/helix/core/minion/TaskTypeMetricsUpdater.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9UYXNrVHlwZU1ldHJpY3NVcGRhdGVyLmphdmE=) | `80.00% <0.00%> (-20.00%)` | :arrow_down: |\n| [...pache/pinot/core/util/SortedRangeIntersection.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1NvcnRlZFJhbmdlSW50ZXJzZWN0aW9uLmphdmE=) | `75.36% <0.00%> (-11.60%)` | :arrow_down: |\n| [.../predicate/NotEqualsPredicateEvaluatorFactory.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvcHJlZGljYXRlL05vdEVxdWFsc1ByZWRpY2F0ZUV2YWx1YXRvckZhY3RvcnkuamF2YQ==) | `48.52% <0.00%> (-7.36%)` | :arrow_down: |\n| [.../common/request/context/predicate/EqPredicate.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVxdWVzdC9jb250ZXh0L3ByZWRpY2F0ZS9FcVByZWRpY2F0ZS5qYXZh) | `53.33% <0.00%> (-6.67%)` | :arrow_down: |\n| [.../common/request/context/predicate/InPredicate.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVxdWVzdC9jb250ZXh0L3ByZWRpY2F0ZS9JblByZWRpY2F0ZS5qYXZh) | `40.00% <0.00%> (-5.00%)` | :arrow_down: |\n| [...pby/NoDictionarySingleColumnGroupKeyGenerator.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9ncm91cGJ5L05vRGljdGlvbmFyeVNpbmdsZUNvbHVtbkdyb3VwS2V5R2VuZXJhdG9yLmphdmE=) | `72.38% <0.00%> (-4.77%)` | :arrow_down: |\n| [...r/helix/SegmentOnlineOfflineStateModelFactory.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9TZWdtZW50T25saW5lT2ZmbGluZVN0YXRlTW9kZWxGYWN0b3J5LmphdmE=) | `58.49% <0.00%> (-4.72%)` | :arrow_down: |\n| [...inot/core/operator/filter/FilterOperatorUtils.java](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvRmlsdGVyT3BlcmF0b3JVdGlscy5qYXZh) | `75.34% <0.00%> (-2.74%)` | :arrow_down: |\n| ... and [31 more](https://codecov.io/gh/apache/pinot/pull/8065/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e23d5e7...fed45e6](https://codecov.io/gh/apache/pinot/pull/8065?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020537555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020604070","html_url":"https://github.com/apache/pinot/pull/8063#issuecomment-1020604070","issue_url":"https://api.github.com/repos/apache/pinot/issues/8063","id":1020604070,"node_id":"IC_kwDOATCU_c481S6m","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T22:17:46Z","updated_at":"2022-01-25T21:13:31Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8063](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (19df74c) into [master](https://codecov.io/gh/apache/pinot/commit/e7ea235a1e0e94da02b5a8b171bba0b00d0d6076?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e7ea235) will **increase** coverage by `26.73%`.\n> The diff coverage is `73.68%`.\n\n> :exclamation: Current head 19df74c differs from pull request most recent head 4c2217c. Consider uploading reports for the commit 4c2217c to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8063/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8063       +/-   ##\n=============================================\n+ Coverage     37.93%   64.66%   +26.73%     \n- Complexity       81     4261     +4180     \n=============================================\n  Files          1606     1562       -44     \n  Lines         83405    81525     -1880     \n  Branches      12455    12251      -204     \n=============================================\n+ Hits          31638    52719    +21081     \n+ Misses        49311    25048    -24263     \n- Partials       2456     3758     +1302     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `67.87% <72.22%> (?)` | |\n| unittests2 | `14.24% <5.26%> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../java/org/apache/pinot/spi/filesystem/PinotFS.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9QaW5vdEZTLmphdmE=) | `0.00% <ø> (ø)` | |\n| [...a/org/apache/pinot/spi/filesystem/BasePinotFS.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9CYXNlUGlub3RGUy5qYXZh) | `70.58% <70.58%> (ø)` | |\n| [.../org/apache/pinot/plugin/filesystem/S3PinotFS.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1maWxlLXN5c3RlbS9waW5vdC1zMy9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL2ZpbGVzeXN0ZW0vUzNQaW5vdEZTLmphdmE=) | `38.70% <100.00%> (ø)` | |\n| [.../org/apache/pinot/spi/filesystem/LocalPinotFS.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9Mb2NhbFBpbm90RlMuamF2YQ==) | `89.79% <100.00%> (+89.79%)` | :arrow_up: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ache/pinot/server/access/AccessControlFactory.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VydmVyL2FjY2Vzcy9BY2Nlc3NDb250cm9sRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1153 more](https://codecov.io/gh/apache/pinot/pull/8063/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e7ea235...4c2217c](https://codecov.io/gh/apache/pinot/pull/8063?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020604070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020673842","html_url":"https://github.com/apache/pinot/pull/8067#issuecomment-1020673842","issue_url":"https://api.github.com/repos/apache/pinot/issues/8067","id":1020673842,"node_id":"IC_kwDOATCU_c481j8y","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T00:04:53Z","updated_at":"2022-01-25T00:05:51Z","author_association":"CONTRIBUTOR","body":"cc @snleee @npawar","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020673842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020674259","html_url":"https://github.com/apache/pinot/pull/8066#issuecomment-1020674259","issue_url":"https://api.github.com/repos/apache/pinot/issues/8066","id":1020674259,"node_id":"IC_kwDOATCU_c481kDT","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T00:05:42Z","updated_at":"2022-01-25T00:08:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8066](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3fb6a81) into [master](https://codecov.io/gh/apache/pinot/commit/e7ea235a1e0e94da02b5a8b171bba0b00d0d6076?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e7ea235) will **decrease** coverage by `10.33%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 3fb6a81 differs from pull request most recent head 3412d55. Consider uploading reports for the commit 3412d55 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8066/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8066       +/-   ##\n=============================================\n- Coverage     37.93%   27.59%   -10.34%     \n=============================================\n  Files          1606     1597        -9     \n  Lines         83405    83057      -348     \n  Branches      12455    12418       -37     \n=============================================\n- Hits          31638    22921     -8717     \n- Misses        49311    58029     +8718     \n+ Partials       2456     2107      -349     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `27.59% <0.00%> (-0.01%)` | :arrow_down: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...troller/helix/core/retention/RetentionManager.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JldGVudGlvbi9SZXRlbnRpb25NYW5hZ2VyLmphdmE=) | `27.77% <0.00%> (-55.56%)` | :arrow_down: |\n| [...apache/pinot/common/lineage/LineageEntryState.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9MaW5lYWdlRW50cnlTdGF0ZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/controller/recommender/io/ConfigManager.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9Db25maWdNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...troller/recommender/io/metadata/FieldMetadata.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9tZXRhZGF0YS9GaWVsZE1ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...roller/recommender/rules/impl/BloomFilterRule.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL0Jsb29tRmlsdGVyUnVsZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...oller/api/resources/PinotControllerAppConfigs.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90Q29udHJvbGxlckFwcENvbmZpZ3MuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ler/recommender/data/generator/BytesGenerator.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9kYXRhL2dlbmVyYXRvci9CeXRlc0dlbmVyYXRvci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...er/recommender/io/metadata/SchemaWithMetaData.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9tZXRhZGF0YS9TY2hlbWFXaXRoTWV0YURhdGEuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...r/recommender/rules/impl/AggregateMetricsRule.java](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL0FnZ3JlZ2F0ZU1ldHJpY3NSdWxlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [319 more](https://codecov.io/gh/apache/pinot/pull/8066/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e7ea235...3412d55](https://codecov.io/gh/apache/pinot/pull/8066?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020674259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020719849","html_url":"https://github.com/apache/pinot/pull/8067#issuecomment-1020719849","issue_url":"https://api.github.com/repos/apache/pinot/issues/8067","id":1020719849,"node_id":"IC_kwDOATCU_c481vLp","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T01:34:27Z","updated_at":"2025-02-02T23:26:43Z","author_association":"NONE","body":"## [Codecov](https://app.codecov.io/gh/apache/pinot/pull/8067?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `17.50000%` with `33 lines` in your changes missing coverage. Please review.\n> Project coverage is 71.34%. Comparing base [(`e7ea235`)](https://app.codecov.io/gh/apache/pinot/commit/e7ea235a1e0e94da02b5a8b171bba0b00d0d6076?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`9c5d913`)](https://app.codecov.io/gh/apache/pinot/commit/9c5d913b8bf786cacdc44050081f4cb44b1acc21?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 4236 commits behind head on master.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/pinot/pull/8067?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...he/pinot/segment/local/utils/TableConfigUtils.java](https://app.codecov.io/gh/apache/pinot/pull/8067?src=pr&el=tree&filepath=pinot-segment-local%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpinot%2Fsegment%2Flocal%2Futils%2FTableConfigUtils.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9UYWJsZUNvbmZpZ1V0aWxzLmphdmE=) | 0.00% | [30 Missing :warning: ](https://app.codecov.io/gh/apache/pinot/pull/8067?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...er/routing/segmentpruner/SegmentPrunerFactory.java](https://app.codecov.io/gh/apache/pinot/pull/8067?src=pr&el=tree&filepath=pinot-broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fpinot%2Fbroker%2Frouting%2Fsegmentpruner%2FSegmentPrunerFactory.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1NlZ21lbnRQcnVuZXJGYWN0b3J5LmphdmE=) | 70.00% | [1 Missing and 2 partials :warning: ](https://app.codecov.io/gh/apache/pinot/pull/8067?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8067       +/-   ##\n=============================================\n+ Coverage     37.93%   71.34%   +33.40%     \n- Complexity       81     4306     +4225     \n=============================================\n  Files          1606     1617       +11     \n  Lines         83405    83880      +475     \n  Branches      12455    12530       +75     \n=============================================\n+ Hits          31638    59842    +28204     \n+ Misses        49311    19966    -29345     \n- Partials       2456     4072     +1616     \n```\n\n| [Flag](https://app.codecov.io/gh/apache/pinot/pull/8067/flags?src=pr&el=flags&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Coverage Δ | |\n|---|---|---|\n| [integration1](https://app.codecov.io/gh/apache/pinot/pull/8067/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `28.89% <10.00%> (-0.02%)` | :arrow_down: |\n| [integration2](https://app.codecov.io/gh/apache/pinot/pull/8067/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `27.57% <5.00%> (-0.03%)` | :arrow_down: |\n| [unittests1](https://app.codecov.io/gh/apache/pinot/pull/8067/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `67.93% <0.00%> (?)` | |\n| [unittests2](https://app.codecov.io/gh/apache/pinot/pull/8067/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | `14.14% <17.50%> (-0.11%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/pinot/pull/8067?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020719849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020904236","html_url":"https://github.com/apache/pinot/pull/8016#issuecomment-1020904236","issue_url":"https://api.github.com/repos/apache/pinot/issues/8016","id":1020904236,"node_id":"IC_kwDOATCU_c482cMs","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T07:58:38Z","updated_at":"2022-01-25T07:58:38Z","author_association":"CONTRIBUTOR","body":"This PR will be merged in 24 hours from now, barring objections","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020904236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020986385","html_url":"https://github.com/apache/pinot/pull/8055#issuecomment-1020986385","issue_url":"https://api.github.com/repos/apache/pinot/issues/8055","id":1020986385,"node_id":"IC_kwDOATCU_c482wQR","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T09:34:35Z","updated_at":"2022-01-25T09:34:35Z","author_association":"MEMBER","body":"Hi @lksvenoy-r7 it looks like `TestConfigEngine.testInputManager` needs updating","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1020986385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021220686","html_url":"https://github.com/apache/pinot/pull/8062#issuecomment-1021220686","issue_url":"https://api.github.com/repos/apache/pinot/issues/8062","id":1021220686,"node_id":"IC_kwDOATCU_c483pdO","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T14:10:59Z","updated_at":"2022-06-08T08:26:47Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8062?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8062](https://codecov.io/gh/apache/pinot/pull/8062?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (dcbee29) into [master](https://codecov.io/gh/apache/pinot/commit/81bda1d26a5c5173864e6edc3081e7135041f4f1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (81bda1d) will **decrease** coverage by `6.99%`.\n> The diff coverage is `56.00%`.\n\n> :exclamation: Current head dcbee29 differs from pull request most recent head d3e90c2. Consider uploading reports for the commit d3e90c2 to get more accurate results\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8062      +/-   ##\n============================================\n- Coverage     69.85%   62.85%   -7.00%     \n- Complexity     4669     4849     +180     \n============================================\n  Files          1803     1791      -12     \n  Lines         93735    93402     -333     \n  Branches      13932    13897      -35     \n============================================\n- Hits          65474    58704    -6770     \n- Misses        23730    30382    +6652     \n+ Partials       4531     4316     -215     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `26.39% <0.00%> (-0.04%)` | :arrow_down: |\n| integration2 | `25.07% <56.00%> (-0.11%)` | :arrow_down: |\n| unittests1 | `66.51% <ø> (-0.01%)` | :arrow_down: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8062?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ava/org/apache/pinot/client/utils/DriverUtils.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qZGJjLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L3V0aWxzL0RyaXZlclV0aWxzLmphdmE=) | `17.58% <42.10%> (+6.47%)` | :arrow_up: |\n| [...main/java/org/apache/pinot/client/PinotDriver.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qZGJjLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Bpbm90RHJpdmVyLmphdmE=) | `60.37% <100.00%> (+0.76%)` | :arrow_up: |\n| [...pinot/controller/recommender/io/ConfigManager.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9Db25maWdNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/client/AggregationResultSet.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0FnZ3JlZ2F0aW9uUmVzdWx0U2V0LmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...troller/recommender/io/metadata/FieldMetadata.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9tZXRhZGF0YS9GaWVsZE1ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...roller/recommender/rules/impl/BloomFilterRule.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL0Jsb29tRmlsdGVyUnVsZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...oller/api/resources/PinotControllerAppConfigs.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90Q29udHJvbGxlckFwcENvbmZpZ3MuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ler/recommender/data/generator/BytesGenerator.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9kYXRhL2dlbmVyYXRvci9CeXRlc0dlbmVyYXRvci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...er/recommender/io/metadata/SchemaWithMetaData.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9tZXRhZGF0YS9TY2hlbWFXaXRoTWV0YURhdGEuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...r/recommender/rules/impl/AggregateMetricsRule.java](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL0FnZ3JlZ2F0ZU1ldHJpY3NSdWxlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [230 more](https://codecov.io/gh/apache/pinot/pull/8062/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8062?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8062?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [81bda1d...d3e90c2](https://codecov.io/gh/apache/pinot/pull/8062?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021220686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021360364","html_url":"https://github.com/apache/pinot/pull/8055#issuecomment-1021360364","issue_url":"https://api.github.com/repos/apache/pinot/issues/8055","id":1021360364,"node_id":"IC_kwDOATCU_c484Ljs","user":{"login":"lksvenoy-r7","id":46895578,"node_id":"MDQ6VXNlcjQ2ODk1NTc4","avatar_url":"https://avatars.githubusercontent.com/u/46895578?v=4","gravatar_id":"","url":"https://api.github.com/users/lksvenoy-r7","html_url":"https://github.com/lksvenoy-r7","followers_url":"https://api.github.com/users/lksvenoy-r7/followers","following_url":"https://api.github.com/users/lksvenoy-r7/following{/other_user}","gists_url":"https://api.github.com/users/lksvenoy-r7/gists{/gist_id}","starred_url":"https://api.github.com/users/lksvenoy-r7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lksvenoy-r7/subscriptions","organizations_url":"https://api.github.com/users/lksvenoy-r7/orgs","repos_url":"https://api.github.com/users/lksvenoy-r7/repos","events_url":"https://api.github.com/users/lksvenoy-r7/events{/privacy}","received_events_url":"https://api.github.com/users/lksvenoy-r7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T16:19:38Z","updated_at":"2022-01-25T16:19:38Z","author_association":"CONTRIBUTOR","body":"> Hi @lksvenoy-r7 it looks like `TestConfigEngine.testInputManager` needs updating\r\n\r\nThanks @richardstartin. I addressed that now, but it looks like one of the checks is failing, and I'm not entirely sure why.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021360364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021438993","html_url":"https://github.com/apache/pinot/issues/8068#issuecomment-1021438993","issue_url":"https://api.github.com/repos/apache/pinot/issues/8068","id":1021438993,"node_id":"IC_kwDOATCU_c484ewR","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:33:54Z","updated_at":"2022-01-25T17:33:54Z","author_association":"CONTRIBUTOR","body":"Fixed segment name generator will ignore the sequence id. In order to include the sequence id, you may use the `simple` segment name generator, and set the name prefix to `SEGMENT`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021438993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021441130","html_url":"https://github.com/apache/pinot/issues/8064#issuecomment-1021441130","issue_url":"https://api.github.com/repos/apache/pinot/issues/8064","id":1021441130,"node_id":"IC_kwDOATCU_c484fRq","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:36:24Z","updated_at":"2022-01-25T17:36:24Z","author_association":"CONTRIBUTOR","body":"Discussed offline, and another issue for remote FS is that `move` might not be an cheap operation (e.g. S3 move is actually copy + delete). To solve this, we should add a config to allow directly deleting the segment without moving it to a different directory.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021441130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021449185","html_url":"https://github.com/apache/pinot/pull/8067#issuecomment-1021449185","issue_url":"https://api.github.com/repos/apache/pinot/issues/8067","id":1021449185,"node_id":"IC_kwDOATCU_c484hPh","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:45:53Z","updated_at":"2022-01-25T17:45:53Z","author_association":"CONTRIBUTOR","body":"Add @npawar to the discussion.\r\nI believe only the Kinesis consumer can create empty segment, should we auto-enable empty segment pruner for Kinesis only?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021449185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021451477","html_url":"https://github.com/apache/pinot/issues/8064#issuecomment-1021451477","issue_url":"https://api.github.com/repos/apache/pinot/issues/8064","id":1021451477,"node_id":"IC_kwDOATCU_c484hzV","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:48:36Z","updated_at":"2022-01-25T17:48:36Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nDo you mean not saving the deleted segments? I believe we already have a config there. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021451477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021453476","html_url":"https://github.com/apache/pinot/pull/8016#issuecomment-1021453476","issue_url":"https://api.github.com/repos/apache/pinot/issues/8016","id":1021453476,"node_id":"IC_kwDOATCU_c484iSk","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:51:07Z","updated_at":"2022-01-25T17:51:07Z","author_association":"CONTRIBUTOR","body":"I saw some unsolved comments. Please resolve them and wait for all tests pass before merging.\r\nYou might need to rebase to the latest master if the compatibility test against `0.9.0` fails","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021453476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021455987","html_url":"https://github.com/apache/pinot/pull/8055#issuecomment-1021455987","issue_url":"https://api.github.com/repos/apache/pinot/issues/8055","id":1021455987,"node_id":"IC_kwDOATCU_c484i5z","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T17:54:21Z","updated_at":"2022-01-25T17:57:23Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8055](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (53e0032) into [master](https://codecov.io/gh/apache/pinot/commit/ca629d6c38ac2458ebc9635273e1e95b50ba89ae?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ca629d6) will **decrease** coverage by `6.57%`.\n> The diff coverage is `59.32%`.\n\n> :exclamation: Current head 53e0032 differs from pull request most recent head 1e5b335. Consider uploading reports for the commit 1e5b335 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8055/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8055      +/-   ##\n============================================\n- Coverage     71.22%   64.65%   -6.58%     \n+ Complexity     4261     4260       -1     \n============================================\n  Files          1605     1562      -43     \n  Lines         83394    81541    -1853     \n  Branches      12455    12253     -202     \n============================================\n- Hits          59400    52721    -6679     \n- Misses        19953    25062    +5109     \n+ Partials       4041     3758     -283     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `67.87% <78.57%> (+<0.01%)` | :arrow_up: |\n| unittests2 | `14.23% <40.67%> (-0.06%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...r/recommender/data/generator/GeneratorFactory.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9kYXRhL2dlbmVyYXRvci9HZW5lcmF0b3JGYWN0b3J5LmphdmE=) | `31.81% <0.00%> (-3.19%)` | :arrow_down: |\n| [.../org/apache/pinot/plugin/filesystem/S3PinotFS.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1maWxlLXN5c3RlbS9waW5vdC1zMy9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL2ZpbGVzeXN0ZW0vUzNQaW5vdEZTLmphdmE=) | `38.70% <0.00%> (ø)` | |\n| [...egments/RealtimeToOfflineSegmentsTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvcmVhbHRpbWV0b29mZmxpbmVzZWdtZW50cy9SZWFsdGltZVRvT2ZmbGluZVNlZ21lbnRzVGFza0V4ZWN1dG9yLmphdmE=) | `67.64% <0.00%> (-26.48%)` | :arrow_down: |\n| [...inot/spi/stream/PartitionGroupMetadataFetcher.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1BhcnRpdGlvbkdyb3VwTWV0YWRhdGFGZXRjaGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...java/org/apache/pinot/spi/stream/StreamConfig.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbUNvbmZpZy5qYXZh) | `92.13% <0.00%> (-1.05%)` | :arrow_down: |\n| [.../core/realtime/PinotLLCRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90TExDUmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `66.10% <50.00%> (-12.89%)` | :arrow_down: |\n| [...in/stream/kafka20/KafkaStreamMetadataProvider.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zdHJlYW0taW5nZXN0aW9uL3Bpbm90LWthZmthLTIuMC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL3N0cmVhbS9rYWZrYTIwL0thZmthU3RyZWFtTWV0YWRhdGFQcm92aWRlci5qYXZh) | `61.90% <57.14%> (-25.60%)` | :arrow_down: |\n| [...r/recommender/data/generator/BooleanGenerator.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9kYXRhL2dlbmVyYXRvci9Cb29sZWFuR2VuZXJhdG9yLmphdmE=) | `69.23% <69.23%> (ø)` | |\n| [.../pinot/controller/recommender/io/InputManager.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9JbnB1dE1hbmFnZXIuamF2YQ==) | `91.56% <100.00%> (+0.03%)` | :arrow_up: |\n| [...manager/realtime/LLRealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvTExSZWFsdGltZVNlZ21lbnREYXRhTWFuYWdlci5qYXZh) | `45.41% <100.00%> (-24.66%)` | :arrow_down: |\n| ... and [378 more](https://codecov.io/gh/apache/pinot/pull/8055/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ca629d6...1e5b335](https://codecov.io/gh/apache/pinot/pull/8055?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021455987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021486361","html_url":"https://github.com/apache/pinot/issues/8064#issuecomment-1021486361","issue_url":"https://api.github.com/repos/apache/pinot/issues/8064","id":1021486361,"node_id":"IC_kwDOATCU_c484qUZ","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T18:30:07Z","updated_at":"2022-01-25T18:30:07Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu Which config are you referring to?\r\nI find a config for the retention days before deleting the segment from the deleted segment dir, but didn't find one to skip moving the segment to the deleted segment dir. In `SegmentDeletionManager.removeSegmentFromStore()`, segment is always moved.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021486361/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021500240","html_url":"https://github.com/apache/pinot/issues/8068#issuecomment-1021500240","issue_url":"https://api.github.com/repos/apache/pinot/issues/8068","id":1021500240,"node_id":"IC_kwDOATCU_c484ttQ","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T18:48:03Z","updated_at":"2022-01-25T18:48:03Z","author_association":"MEMBER","body":"Both `SimpleSegmentNameGenerator` and `NormalizedDateSegmentNameGenerator` respect the sequence Id. You can either set `simple` or set `normalizedDate` to the ingestionConfig of your table config.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021500240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021523509","html_url":"https://github.com/apache/pinot/pull/8069#issuecomment-1021523509","issue_url":"https://api.github.com/repos/apache/pinot/issues/8069","id":1021523509,"node_id":"IC_kwDOATCU_c484zY1","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:16:56Z","updated_at":"2022-01-25T21:14:09Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8069](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bc86448) into [master](https://codecov.io/gh/apache/pinot/commit/7ec47c420be9c6aee6c8e95644266fe9b7fe7a2b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (7ec47c4) will **decrease** coverage by `57.05%`.\n> The diff coverage is `10.03%`.\n\n> :exclamation: Current head bc86448 differs from pull request most recent head fc6d981. Consider uploading reports for the commit fc6d981 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8069/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8069       +/-   ##\n=============================================\n- Coverage     71.29%   14.23%   -57.06%     \n+ Complexity     4224       81     -4143     \n=============================================\n  Files          1599     1561       -38     \n  Lines         82957    81538     -1419     \n  Branches      12375    12253      -122     \n=============================================\n- Hits          59148    11611    -47537     \n- Misses        19815    69065    +49250     \n+ Partials       3994      862     -3132     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `14.23% <10.03%> (-0.13%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/pinot/common/metrics/ServerMeter.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9TZXJ2ZXJNZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...e/pinot/common/utils/FileUploadDownloadClient.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvRmlsZVVwbG9hZERvd25sb2FkQ2xpZW50LmphdmE=) | `0.00% <0.00%> (-62.46%)` | :arrow_down: |\n| [...apache/pinot/common/utils/SqlResultComparator.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvU3FsUmVzdWx0Q29tcGFyYXRvci5qYXZh) | `0.00% <ø> (ø)` | |\n| [...pinot/common/utils/fetcher/BaseSegmentFetcher.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvZmV0Y2hlci9CYXNlU2VnbWVudEZldGNoZXIuamF2YQ==) | `0.00% <0.00%> (-81.82%)` | :arrow_down: |\n| [...ler/api/resources/PinotSegmentRestletResource.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90U2VnbWVudFJlc3RsZXRSZXNvdXJjZS5qYXZh) | `3.38% <0.00%> (-19.81%)` | :arrow_down: |\n| [.../controller/helix/ControllerRequestURLBuilder.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9Db250cm9sbGVyUmVxdWVzdFVSTEJ1aWxkZXIuamF2YQ==) | `74.01% <0.00%> (-9.32%)` | :arrow_down: |\n| [...org/apache/pinot/core/auth/BasicAuthPrincipal.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9hdXRoL0Jhc2ljQXV0aFByaW5jaXBhbC5qYXZh) | `0.00% <0.00%> (-70.00%)` | :arrow_down: |\n| [...manager/realtime/LLRealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvTExSZWFsdGltZVNlZ21lbnREYXRhTWFuYWdlci5qYXZh) | `0.00% <0.00%> (-71.00%)` | :arrow_down: |\n| [...ata/manager/realtime/RealtimeTableDataManager.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVUYWJsZURhdGFNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (-69.11%)` | :arrow_down: |\n| [...a/org/apache/pinot/core/transport/QueryServer.java](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS90cmFuc3BvcnQvUXVlcnlTZXJ2ZXIuamF2YQ==) | `0.00% <0.00%> (-74.47%)` | :arrow_down: |\n| ... and [1311 more](https://codecov.io/gh/apache/pinot/pull/8069/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [7ec47c4...fc6d981](https://codecov.io/gh/apache/pinot/pull/8069?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021523509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021528527","html_url":"https://github.com/apache/pinot/pull/8067#issuecomment-1021528527","issue_url":"https://api.github.com/repos/apache/pinot/issues/8067","id":1021528527,"node_id":"IC_kwDOATCU_c4840nP","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:22:46Z","updated_at":"2022-01-25T19:22:46Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang We may need the empty segment pruner in the future for some other use case so it is probably good to keep the empty segment pruner config wired. Anyway, I like your idea to auto-enable empty segment pruner if Kinesis consumer is used. In that way, we can keep the backward compatibility. That will save some effort to enable the empty segment pruner for all tables using Kinesis consumers.\r\n\r\n@mqliang How do you think?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021528527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021529488","html_url":"https://github.com/apache/pinot/issues/8064#issuecomment-1021529488","issue_url":"https://api.github.com/repos/apache/pinot/issues/8064","id":1021529488,"node_id":"IC_kwDOATCU_c48402Q","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:23:57Z","updated_at":"2022-01-25T19:23:57Z","author_association":"CONTRIBUTOR","body":"for this issue it is more the multiple-round-trip per segment when we operate on the entire table. \r\n\r\nEven if the deleteSegment does the deletion only without the move. on a large enough table it will still take 10s of minutes to complete the deletion since it requires pinot to issue `delete(URI segmentUri)` sequentially segment after segment instead of leveraging the underlying PinotFS impl, which might have a much more efficient way to batch operator on a list of segment URIs","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021529488/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021554989","html_url":"https://github.com/apache/pinot/issues/8064#issuecomment-1021554989","issue_url":"https://api.github.com/repos/apache/pinot/issues/8064","id":1021554989,"node_id":"IC_kwDOATCU_c4847Et","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T19:56:36Z","updated_at":"2022-01-25T19:56:36Z","author_association":"MEMBER","body":"> for this issue it is more the multiple-round-trip per segment when we operate on the entire table.\r\n> \r\n> Even if the deleteSegment does the deletion only without the move. on a large enough table it will still take 10s of minutes to complete the deletion since it requires pinot to issue `delete(URI segmentUri)` sequentially segment after segment instead of leveraging the underlying PinotFS impl, which might have a much more efficient way to batch operator on a list of segment URIs\r\n\r\nThis raises the question of how the state of the deletion operation is maintained, currently it is managed by the client. Some databases do the wrong thing and let you delete as many rows as possible before a timeout is reached because they treat this as a stateless operation.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021554989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021624582","html_url":"https://github.com/apache/pinot/issues/8070#issuecomment-1021624582","issue_url":"https://api.github.com/repos/apache/pinot/issues/8070","id":1021624582,"node_id":"IC_kwDOATCU_c485MEG","user":{"login":"abhijeetkushe","id":2093096,"node_id":"MDQ6VXNlcjIwOTMwOTY=","avatar_url":"https://avatars.githubusercontent.com/u/2093096?v=4","gravatar_id":"","url":"https://api.github.com/users/abhijeetkushe","html_url":"https://github.com/abhijeetkushe","followers_url":"https://api.github.com/users/abhijeetkushe/followers","following_url":"https://api.github.com/users/abhijeetkushe/following{/other_user}","gists_url":"https://api.github.com/users/abhijeetkushe/gists{/gist_id}","starred_url":"https://api.github.com/users/abhijeetkushe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhijeetkushe/subscriptions","organizations_url":"https://api.github.com/users/abhijeetkushe/orgs","repos_url":"https://api.github.com/users/abhijeetkushe/repos","events_url":"https://api.github.com/users/abhijeetkushe/events{/privacy}","received_events_url":"https://api.github.com/users/abhijeetkushe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:27:02Z","updated_at":"2022-01-25T21:27:02Z","author_association":"CONTRIBUTOR","body":"![Screen Shot 2022-01-25 at 9 43 16 AM](https://user-images.githubusercontent.com/2093096/151062519-2f8fab72-b912-41a1-a51a-8692dacfaf44.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021624582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021625120","html_url":"https://github.com/apache/pinot/issues/8070#issuecomment-1021625120","issue_url":"https://api.github.com/repos/apache/pinot/issues/8070","id":1021625120,"node_id":"IC_kwDOATCU_c485MMg","user":{"login":"KKcorps","id":5559703,"node_id":"MDQ6VXNlcjU1NTk3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5559703?v=4","gravatar_id":"","url":"https://api.github.com/users/KKcorps","html_url":"https://github.com/KKcorps","followers_url":"https://api.github.com/users/KKcorps/followers","following_url":"https://api.github.com/users/KKcorps/following{/other_user}","gists_url":"https://api.github.com/users/KKcorps/gists{/gist_id}","starred_url":"https://api.github.com/users/KKcorps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KKcorps/subscriptions","organizations_url":"https://api.github.com/users/KKcorps/orgs","repos_url":"https://api.github.com/users/KKcorps/repos","events_url":"https://api.github.com/users/KKcorps/events{/privacy}","received_events_url":"https://api.github.com/users/KKcorps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:27:41Z","updated_at":"2022-01-25T21:27:41Z","author_association":"CONTRIBUTOR","body":"Looking into it.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021625120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021647057","html_url":"https://github.com/apache/pinot/pull/8067#issuecomment-1021647057","issue_url":"https://api.github.com/repos/apache/pinot/issues/8067","id":1021647057,"node_id":"IC_kwDOATCU_c485RjR","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T21:56:59Z","updated_at":"2022-01-25T21:56:59Z","author_association":"CONTRIBUTOR","body":"> @Jackie-Jiang We may need the empty segment pruner in the future for some other use case so it is probably good to keep the empty segment pruner config wired. Anyway, I like your idea to auto-enable empty segment pruner if Kinesis consumer is used. In that way, we can keep the backward compatibility. That will save some effort to enable the empty segment pruner for all tables using Kinesis consumers.\r\n> \r\n> @mqliang How do you think?\r\n\r\nAgree. PR has been updated\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021647057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021719883","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1021719883","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1021719883,"node_id":"IC_kwDOATCU_c485jVL","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T23:56:37Z","updated_at":"2022-01-31T18:22:43Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#6291](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0827c53) into [master](https://codecov.io/gh/apache/pinot/commit/c85ff1d334e2bf3cf7973178660de2d85211d05b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c85ff1d) will **decrease** coverage by `33.36%`.\n> The diff coverage is `39.21%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/6291/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #6291       +/-   ##\n=============================================\n- Coverage     71.30%   37.93%   -33.37%     \n+ Complexity     4214       81     -4133     \n=============================================\n  Files          1596     1617       +21     \n  Lines         82756    83800     +1044     \n  Branches      12348    12517      +169     \n=============================================\n- Hits          59006    31788    -27218     \n- Misses        19761    49550    +29789     \n+ Partials       3989     2462     -1527     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `28.91% <39.21%> (-0.04%)` | :arrow_down: |\n| integration2 | `27.56% <39.21%> (-0.13%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `14.18% <0.00%> (-0.11%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...java/org/apache/pinot/spi/stream/StreamConfig.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbUNvbmZpZy5qYXZh) | `0.00% <0.00%> (-93.19%)` | :arrow_down: |\n| [...pache/pinot/spi/stream/StreamConfigProperties.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbUNvbmZpZ1Byb3BlcnRpZXMuamF2YQ==) | `0.00% <ø> (-100.00%)` | :arrow_down: |\n| [...nager/realtime/RealtimeConsumptionRateManager.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVDb25zdW1wdGlvblJhdGVNYW5hZ2VyLmphdmE=) | `37.83% <37.83%> (ø)` | |\n| [...manager/realtime/LLRealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvTExSZWFsdGltZVNlZ21lbnREYXRhTWFuYWdlci5qYXZh) | `59.50% <83.33%> (-11.76%)` | :arrow_down: |\n| [.../pinot/server/starter/helix/BaseServerStarter.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9CYXNlU2VydmVyU3RhcnRlci5qYXZh) | `57.98% <100.00%> (-1.85%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/table/FSTType.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0ZTVFR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [950 more](https://codecov.io/gh/apache/pinot/pull/6291/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c85ff1d...0827c53](https://codecov.io/gh/apache/pinot/pull/6291?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021719883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021799246","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1021799246","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1021799246,"node_id":"IC_kwDOATCU_c4852tO","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T02:20:34Z","updated_at":"2022-01-26T02:20:34Z","author_association":"CONTRIBUTOR","body":"> This is a good feature to have. Few thoughts\r\n> \r\n> * this seems very specific to Kafka and low-level consumers.\r\n> * It might be better to make this real-time table level config and move this into indexRow within MutableSegment.\r\n> * is the throttling configuration per table or per server or per partition?\r\n\r\nThis throttling is a per-table configuration and it's applied to low level consumer. It's not necessarily tied to Kafka. Low level consumer can have any implementation. The throttling happens after events are fetched from the stream and before processing of those fetched events starts.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021799246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021846901","html_url":"https://github.com/apache/pinot/issues/8068#issuecomment-1021846901","issue_url":"https://api.github.com/repos/apache/pinot/issues/8068","id":1021846901,"node_id":"IC_kwDOATCU_c486CV1","user":{"login":"Manis99803","id":27895381,"node_id":"MDQ6VXNlcjI3ODk1Mzgx","avatar_url":"https://avatars.githubusercontent.com/u/27895381?v=4","gravatar_id":"","url":"https://api.github.com/users/Manis99803","html_url":"https://github.com/Manis99803","followers_url":"https://api.github.com/users/Manis99803/followers","following_url":"https://api.github.com/users/Manis99803/following{/other_user}","gists_url":"https://api.github.com/users/Manis99803/gists{/gist_id}","starred_url":"https://api.github.com/users/Manis99803/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manis99803/subscriptions","organizations_url":"https://api.github.com/users/Manis99803/orgs","repos_url":"https://api.github.com/users/Manis99803/repos","events_url":"https://api.github.com/users/Manis99803/events{/privacy}","received_events_url":"https://api.github.com/users/Manis99803/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T04:17:42Z","updated_at":"2022-01-26T04:19:02Z","author_association":"CONTRIBUTOR","body":"In case of `SimpleSegmentNameGenerator` sequence Id is respected. However, the segment names also have the timestamp in them.\r\n\r\nFor Example: \r\nIf I create a table \"user\" and push data to it and I am going with \"Simple\" SegmentNameGeneratingScheme and generating 2 different segments. The names would be as follows:\r\n\r\nuser_OFFLINE_1643169382000_1643169385000_0\r\nuser_OFFLINE_1643169386000_1643169389000_1\r\n\r\nThe problem I am trying to highlight is suppose I want to create 2 segments and a user has defined a fixed name say \"SEGMENT\" and if there exist more than 1 segment then sequenceId should be appended to the segment name.\r\nExpectation:\r\nSEGMENT_0\r\nSEGMENT_1\r\n\r\nWith the current implementation, we will have only 1 segment getting created with a fixed name \"SEGMENT\"\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021846901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021862826","html_url":"https://github.com/apache/pinot/issues/8068#issuecomment-1021862826","issue_url":"https://api.github.com/repos/apache/pinot/issues/8068","id":1021862826,"node_id":"IC_kwDOATCU_c486GOq","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T05:01:39Z","updated_at":"2022-01-26T05:01:39Z","author_association":"MEMBER","body":"@Manis99803 For APPEND use cases, these timestamps are the minmax value of the time column in your raw input file, which differentiates which batch of jobs the segments belong to. Without the values of time column appeared in the segment name, there is no way to tell when this batch of segments it belong to. What's worse, since segment name is the identifier for segment, if the minmax value is missing from the segment name, the newer batch of segments will replace the existing segments in the table, since the segment name would be the same (e.g. old and new segment name are both called `user_OFFLINE_0`).\r\nUnless you want to use REFRESH type for the table, where the time column field isn't needed, then you can skip the minmax value in the segment name.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021862826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021896726","html_url":"https://github.com/apache/pinot/pull/8071#issuecomment-1021896726","issue_url":"https://api.github.com/repos/apache/pinot/issues/8071","id":1021896726,"node_id":"IC_kwDOATCU_c486OgW","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:12:08Z","updated_at":"2022-01-26T06:12:08Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8071](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (70f39af) into [master](https://codecov.io/gh/apache/pinot/commit/cc2f3fe196d29a0d716bfee07add9b761e8fa98e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cc2f3fe) will **increase** coverage by `3.24%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 70f39af differs from pull request most recent head aec5e90. Consider uploading reports for the commit aec5e90 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8071/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8071      +/-   ##\n============================================\n+ Coverage     64.63%   67.88%   +3.24%     \n+ Complexity     4260     4180      -80     \n============================================\n  Files          1562     1211     -351     \n  Lines         81525    60564   -20961     \n  Branches      12252     9347    -2905     \n============================================\n- Hits          52695    41113   -11582     \n+ Misses        25072    16552    -8520     \n+ Partials       3758     2899     -859     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests1 | `67.88% <ø> (+0.01%)` | :arrow_up: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../aggregation/function/ModeAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9Nb2RlQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `88.10% <0.00%> (-0.28%)` | :arrow_down: |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | | |\n| [.../assignment/instance/InstanceAssignmentDriver.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL2Fzc2lnbm1lbnQvaW5zdGFuY2UvSW5zdGFuY2VBc3NpZ25tZW50RHJpdmVyLmphdmE=) | | |\n| [...he/pinot/ingestion/utils/JobPreparationHelper.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1iYXRjaC1pbmdlc3Rpb24vdjBfZGVwcmVjYXRlZC9waW5vdC1pbmdlc3Rpb24tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9pbmdlc3Rpb24vdXRpbHMvSm9iUHJlcGFyYXRpb25IZWxwZXIuamF2YQ==) | | |\n| [.../org/apache/pinot/client/PinotClientException.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Bpbm90Q2xpZW50RXhjZXB0aW9uLmphdmE=) | | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | | |\n| [...ot/controller/tuner/NoOpTableTableConfigTuner.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci90dW5lci9Ob09wVGFibGVUYWJsZUNvbmZpZ1R1bmVyLmphdmE=) | | |\n| [...er/recommender/io/metadata/SchemaWithMetaData.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9tZXRhZGF0YS9TY2hlbWFXaXRoTWV0YURhdGEuamF2YQ==) | | |\n| [...ot/controller/util/ConsumingSegmentInfoReader.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci91dGlsL0NvbnN1bWluZ1NlZ21lbnRJbmZvUmVhZGVyLmphdmE=) | | |\n| [...pinot/minion/event/DefaultMinionEventObserver.java](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXZlbnQvRGVmYXVsdE1pbmlvbkV2ZW50T2JzZXJ2ZXIuamF2YQ==) | | |\n| ... and [345 more](https://codecov.io/gh/apache/pinot/pull/8071/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [cc2f3fe...aec5e90](https://codecov.io/gh/apache/pinot/pull/8071?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021896726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021935776","html_url":"https://github.com/apache/pinot/issues/8068#issuecomment-1021935776","issue_url":"https://api.github.com/repos/apache/pinot/issues/8068","id":1021935776,"node_id":"IC_kwDOATCU_c486YCg","user":{"login":"Manis99803","id":27895381,"node_id":"MDQ6VXNlcjI3ODk1Mzgx","avatar_url":"https://avatars.githubusercontent.com/u/27895381?v=4","gravatar_id":"","url":"https://api.github.com/users/Manis99803","html_url":"https://github.com/Manis99803","followers_url":"https://api.github.com/users/Manis99803/followers","following_url":"https://api.github.com/users/Manis99803/following{/other_user}","gists_url":"https://api.github.com/users/Manis99803/gists{/gist_id}","starred_url":"https://api.github.com/users/Manis99803/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manis99803/subscriptions","organizations_url":"https://api.github.com/users/Manis99803/orgs","repos_url":"https://api.github.com/users/Manis99803/repos","events_url":"https://api.github.com/users/Manis99803/events{/privacy}","received_events_url":"https://api.github.com/users/Manis99803/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T07:29:05Z","updated_at":"2022-01-26T07:29:05Z","author_association":"CONTRIBUTOR","body":"@jackjlli, Thanks for pointing this out. I understand the entire use case now, let me go ahead and close this issue. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021935776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021989456","html_url":"https://github.com/apache/pinot/pull/8055#issuecomment-1021989456","issue_url":"https://api.github.com/repos/apache/pinot/issues/8055","id":1021989456,"node_id":"IC_kwDOATCU_c486lJQ","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T08:53:25Z","updated_at":"2022-01-26T08:53:25Z","author_association":"MEMBER","body":"@lksvenoy-r7 I reran the tests last night, it looks like a genuine problem. I will take a look today.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1021989456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022039610","html_url":"https://github.com/apache/pinot/pull/7959#issuecomment-1022039610","issue_url":"https://api.github.com/repos/apache/pinot/issues/7959","id":1022039610,"node_id":"IC_kwDOATCU_c486xY6","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T09:56:24Z","updated_at":"2022-01-26T09:56:24Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang Have updated the PR description with the behaviour. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022039610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022149600","html_url":"https://github.com/apache/pinot/pull/7971#issuecomment-1022149600","issue_url":"https://api.github.com/repos/apache/pinot/issues/7971","id":1022149600,"node_id":"IC_kwDOATCU_c487MPg","user":{"login":"tuor713","id":106980,"node_id":"MDQ6VXNlcjEwNjk4MA==","avatar_url":"https://avatars.githubusercontent.com/u/106980?v=4","gravatar_id":"","url":"https://api.github.com/users/tuor713","html_url":"https://github.com/tuor713","followers_url":"https://api.github.com/users/tuor713/followers","following_url":"https://api.github.com/users/tuor713/following{/other_user}","gists_url":"https://api.github.com/users/tuor713/gists{/gist_id}","starred_url":"https://api.github.com/users/tuor713/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuor713/subscriptions","organizations_url":"https://api.github.com/users/tuor713/orgs","repos_url":"https://api.github.com/users/tuor713/repos","events_url":"https://api.github.com/users/tuor713/events{/privacy}","received_events_url":"https://api.github.com/users/tuor713/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T12:22:41Z","updated_at":"2022-01-26T12:22:41Z","author_association":"CONTRIBUTOR","body":"Build failures may be transient :( What I saw in the JDK 11 Quickstart test is that the build ran successfully and the test seemed to complete but the post job cleanup failed to upload to some (Github?) cache. What's the usual approach here - try to rerun, rebase on master and retry, dig into the failures in this PR?\r\n\r\n```\r\n2022-01-18T19:26:57.6881659Z Post job cleanup.\r\n2022-01-18T19:26:57.8637035Z [command]/usr/bin/tar -cz -f /home/runner/work/_temp/3051cf70-7cdf-4c5f-9732-07cffd83b882/cache.tgz -C /home/runner/.m2/repository .\r\n2022-01-18T19:28:52.2887996Z [warning]Cache service responded with 400 during chunk upload.\r\n2022-01-18T19:28:52.2921708Z events.js:187\r\n2022-01-18T19:28:52.2923145Z       throw er; // Unhandled 'error' event\r\n2022-01-18T19:28:52.2923523Z       ^\r\n2022-01-18T19:28:52.2923727Z \r\n2022-01-18T19:28:52.2923978Z Error: EBADF: bad file descriptor, read\r\n2022-01-18T19:28:52.2924355Z Emitted 'error' event on ReadStream instance at:\r\n2022-01-18T19:28:52.2924852Z     at internal/fs/streams.js:167:12\r\n2022-01-18T19:28:52.2925172Z     at FSReqCallback.wrapper [as oncomplete] (fs.js:470:5) {\r\n2022-01-18T19:28:52.2925961Z   errno: -9,\r\n2022-01-18T19:28:52.2926187Z   code: 'EBADF',\r\n2022-01-18T19:28:52.2926532Z   syscall: 'read'\r\n2022-01-18T19:28:52.2926727Z }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022149600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022186514","html_url":"https://github.com/apache/pinot/pull/7971#issuecomment-1022186514","issue_url":"https://api.github.com/repos/apache/pinot/issues/7971","id":1022186514,"node_id":"IC_kwDOATCU_c487VQS","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T13:14:58Z","updated_at":"2022-01-26T13:14:58Z","author_association":"MEMBER","body":"Hi @tuor713 I have rerun the tests, but this is something which needs to be investigated.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022186514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022310190","html_url":"https://github.com/apache/pinot/issues/7338#issuecomment-1022310190","issue_url":"https://api.github.com/repos/apache/pinot/issues/7338","id":1022310190,"node_id":"IC_kwDOATCU_c487zcu","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T15:28:33Z","updated_at":"2022-01-26T15:28:33Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang This was merged, can we close the issue? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022310190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022438618","html_url":"https://github.com/apache/pinot/issues/7338#issuecomment-1022438618","issue_url":"https://api.github.com/repos/apache/pinot/issues/7338","id":1022438618,"node_id":"IC_kwDOATCU_c488Sza","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T17:45:15Z","updated_at":"2022-01-26T17:45:15Z","author_association":"CONTRIBUTOR","body":"@suddendust Thanks for the contribution! Closing the ticket","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022438618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022445843","html_url":"https://github.com/apache/pinot/pull/7971#issuecomment-1022445843","issue_url":"https://api.github.com/repos/apache/pinot/issues/7971","id":1022445843,"node_id":"IC_kwDOATCU_c488UkT","user":{"login":"tuor713","id":106980,"node_id":"MDQ6VXNlcjEwNjk4MA==","avatar_url":"https://avatars.githubusercontent.com/u/106980?v=4","gravatar_id":"","url":"https://api.github.com/users/tuor713","html_url":"https://github.com/tuor713","followers_url":"https://api.github.com/users/tuor713/followers","following_url":"https://api.github.com/users/tuor713/following{/other_user}","gists_url":"https://api.github.com/users/tuor713/gists{/gist_id}","starred_url":"https://api.github.com/users/tuor713/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuor713/subscriptions","organizations_url":"https://api.github.com/users/tuor713/orgs","repos_url":"https://api.github.com/users/tuor713/repos","events_url":"https://api.github.com/users/tuor713/events{/privacy}","received_events_url":"https://api.github.com/users/tuor713/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T17:54:29Z","updated_at":"2022-01-26T17:54:29Z","author_association":"CONTRIBUTOR","body":"@richardstartin Thanks a lot - the new build fails with different failures :) I will take a look to see what might be happening.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022445843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022462519","html_url":"https://github.com/apache/pinot/issues/8070#issuecomment-1022462519","issue_url":"https://api.github.com/repos/apache/pinot/issues/8070","id":1022462519,"node_id":"IC_kwDOATCU_c488Yo3","user":{"login":"abhijeetkushe","id":2093096,"node_id":"MDQ6VXNlcjIwOTMwOTY=","avatar_url":"https://avatars.githubusercontent.com/u/2093096?v=4","gravatar_id":"","url":"https://api.github.com/users/abhijeetkushe","html_url":"https://github.com/abhijeetkushe","followers_url":"https://api.github.com/users/abhijeetkushe/followers","following_url":"https://api.github.com/users/abhijeetkushe/following{/other_user}","gists_url":"https://api.github.com/users/abhijeetkushe/gists{/gist_id}","starred_url":"https://api.github.com/users/abhijeetkushe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhijeetkushe/subscriptions","organizations_url":"https://api.github.com/users/abhijeetkushe/orgs","repos_url":"https://api.github.com/users/abhijeetkushe/repos","events_url":"https://api.github.com/users/abhijeetkushe/events{/privacy}","received_events_url":"https://api.github.com/users/abhijeetkushe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T18:12:53Z","updated_at":"2022-01-26T19:01:51Z","author_association":"CONTRIBUTOR","body":"I have more updates.I do see the data in the table but not realtime. shardIteratorType as LATEST.I ran the below query\r\n`select $segmentName,ToDateTime(eventTimestamp,'yyyyMMddHHmm') from workflowEvents order by eventTimestamp desc limit 100 `\r\n```\r\n$segmentName\ttodatetime(eventTimestamp,'yyyyMMddHHmm')\r\nworkflowEvents__0__58__20220125T2005Z\t202201260000\r\nworkflowEvents__1__60__20220125T2106Z\t202201260000\r\nworkflowEvents__1__60__20220125T2106Z\t202201251640\r\nworkflowEvents__1__60__20220125T2106Z\t202201251640\r\nworkflowEvents__1__60__20220125T2106Z\t202201251640\r\nworkflowEvents__1__60__20220125T2106Z\t202201251640\r\nworkflowEvents__1__60__20220125T2106Z\t202201251640\r\nworkflowEvents__1__60__20220125T2106Z\t202201251640\r\n```\r\n\r\n8 Records are sent at ~1543 \r\n![Screen Shot 2022-01-26 at 1 54 20 PM](https://user-images.githubusercontent.com/2093096/151228547-eea3d579-c863-4055-99f6-8845d2ddc93f.png)\r\n\r\nKinesis Get Records shows that it is read at 1643 \r\n![Screen Shot 2022-01-26 at 1 06 57 PM](https://user-images.githubusercontent.com/2093096/151224707-d98ec9d1-0b86-41a9-a6a8-e49ca57ece23.png)\r\n\r\nFrom the server logs records do get read at 1643 but I do not see corresponding events at 1543\r\n16:43:05.029 INFO [LLRealtimeSegmentDataManager_workflowEvents__1__60__20220125T2106Z] [workflowEvents__1__60__20220125T2106Z] Consumed 12 events from (rate:0.19965394/s), currentOffset={\"shardId-000000000001\":\"49622318632194742639402514501316476653895236003058155538\"}, numRowsConsumedSoFar=43, numRowsIndexedSoFar=43\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022462519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022465332","html_url":"https://github.com/apache/pinot/pull/8071#issuecomment-1022465332","issue_url":"https://api.github.com/repos/apache/pinot/issues/8071","id":1022465332,"node_id":"IC_kwDOATCU_c488ZU0","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T18:16:25Z","updated_at":"2022-01-26T18:16:25Z","author_association":"CONTRIBUTOR","body":"LGTM, thanks for the improvement!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022465332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022473268","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022473268","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022473268,"node_id":"IC_kwDOATCU_c488bQ0","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T18:26:13Z","updated_at":"2022-01-26T18:26:13Z","author_association":"CONTRIBUTOR","body":"Can you state the problem you want to solve?  Is it that the retention of a deleted segment taking up storage cost in the cloud? Or, is it that deletion takes a long time (it is a background task, so I don't see why that should matter much).\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022473268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022475643","html_url":"https://github.com/apache/pinot/pull/8069#issuecomment-1022475643","issue_url":"https://api.github.com/repos/apache/pinot/issues/8069","id":1022475643,"node_id":"IC_kwDOATCU_c488b17","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T18:29:03Z","updated_at":"2022-01-26T18:29:03Z","author_association":"CONTRIBUTOR","body":"@walterddr looks like you created a new issue. I am not sure about the problem you are trying to solve, so once we have that, we can come up with a solution that makes sense. Please do clarify the problem on the issue, thanks. Would appreciate if you can hold the merge until then","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022475643/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022574161","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022574161","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022574161,"node_id":"IC_kwDOATCU_c488z5R","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T20:26:41Z","updated_at":"2022-01-26T21:46:17Z","author_association":"CONTRIBUTOR","body":"-- deleted comment --","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022574161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022578578","html_url":"https://github.com/apache/pinot/issues/8064#issuecomment-1022578578","issue_url":"https://api.github.com/repos/apache/pinot/issues/8064","id":1022578578,"node_id":"IC_kwDOATCU_c4880-S","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T20:32:48Z","updated_at":"2022-01-26T20:32:48Z","author_association":"CONTRIBUTOR","body":"> This raises the question of how the state of the deletion operation is maintained, currently it is managed by the client. Some databases do the wrong thing and let you delete as many rows as possible before a timeout is reached because they treat this as a stateless operation.\r\n\r\nI dont think it is currently \"managed\" by the client. if some segments were not deleted (moved), it simply just logs a warning and move on to the next segment, it doesn't even return it back to the client. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022578578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022599759","html_url":"https://github.com/apache/pinot/pull/8073#issuecomment-1022599759","issue_url":"https://api.github.com/repos/apache/pinot/issues/8073","id":1022599759,"node_id":"IC_kwDOATCU_c4886JP","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T21:03:13Z","updated_at":"2022-01-26T21:05:18Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8073](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (770a83f) into [master](https://codecov.io/gh/apache/pinot/commit/cc2f3fe196d29a0d716bfee07add9b761e8fa98e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cc2f3fe) will **increase** coverage by `0.01%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 770a83f differs from pull request most recent head eccb65f. Consider uploading reports for the commit eccb65f to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8073/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8073      +/-   ##\n============================================\n+ Coverage     64.63%   64.65%   +0.01%     \n- Complexity     4260     4262       +2     \n============================================\n  Files          1562     1562              \n  Lines         81525    81529       +4     \n  Branches      12252    12254       +2     \n============================================\n+ Hits          52695    52713      +18     \n+ Misses        25072    25060      -12     \n+ Partials       3758     3756       -2     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests1 | `67.87% <0.00%> (+0.01%)` | :arrow_up: |\n| unittests2 | `14.22% <0.00%> (+<0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ment/creator/impl/SegmentColumnarIndexCreator.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2NyZWF0b3IvaW1wbC9TZWdtZW50Q29sdW1uYXJJbmRleENyZWF0b3IuamF2YQ==) | `86.32% <0.00%> (-0.94%)` | :arrow_down: |\n| [...lix/core/realtime/PinotRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90UmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `75.39% <0.00%> (-4.72%)` | :arrow_down: |\n| [.../aggregation/function/ModeAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9Nb2RlQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `88.37% <0.00%> (ø)` | |\n| [...time/impl/dictionary/OffHeapMutableBytesStore.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvT2ZmSGVhcE11dGFibGVCeXRlc1N0b3JlLmphdmE=) | `91.11% <0.00%> (ø)` | |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `61.74% <0.00%> (+0.07%)` | :arrow_up: |\n| [...rg/apache/pinot/broker/routing/RoutingManager.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9Sb3V0aW5nTWFuYWdlci5qYXZh) | `72.63% <0.00%> (+0.70%)` | :arrow_up: |\n| [...not/broker/broker/helix/ClusterChangeMediator.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0NsdXN0ZXJDaGFuZ2VNZWRpYXRvci5qYXZh) | `77.65% <0.00%> (+1.06%)` | :arrow_up: |\n| [...lix/core/minion/PinotHelixTaskResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9QaW5vdEhlbGl4VGFza1Jlc291cmNlTWFuYWdlci5qYXZh) | `2.71% <0.00%> (+1.16%)` | :arrow_up: |\n| [...e/pinot/segment/local/io/util/PinotDataBitSet.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL1Bpbm90RGF0YUJpdFNldC5qYXZh) | `97.08% <0.00%> (+1.45%)` | :arrow_up: |\n| [...troller/helix/core/retention/RetentionManager.java](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JldGVudGlvbi9SZXRlbnRpb25NYW5hZ2VyLmphdmE=) | `81.74% <0.00%> (+2.38%)` | :arrow_up: |\n| ... and [4 more](https://codecov.io/gh/apache/pinot/pull/8073/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [cc2f3fe...eccb65f](https://codecov.io/gh/apache/pinot/pull/8073?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022599759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022620083","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022620083","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022620083,"node_id":"IC_kwDOATCU_c488_Gz","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T21:29:27Z","updated_at":"2022-01-26T21:29:27Z","author_association":"CONTRIBUTOR","body":"Recreating a table is a more involved problem. What we need to do is to wait for the external view to disappear in the table drop API. I believe there is an issue for it already. \r\n\r\nDeletion of segments from the deep store happens right away, it is the wait on externalview that takes time. Hopefully in your cluster, this is a short time. \r\n\r\nDeletion via retention manager happens MUCH later and does not interfere with the recreation of a table.\r\n\r\nLet us formulate the problem correctly before we start looking for solutions.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022620083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022626426","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022626426","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022626426,"node_id":"IC_kwDOATCU_c489Ap6","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T21:38:04Z","updated_at":"2022-01-26T21:38:04Z","author_association":"CONTRIBUTOR","body":"> This changes the semantics of the function so that it is no longer a distinct count. I think it would be better to raise an error if the threshold is breached, which would educate the user to use `distinctcounthll` instead (this would also be documented clearly).\r\n\r\nAgreed. I also see some users actually reports the error is about 3% when the cardinality is around 200M comparing `DISTINCT_COUNT` and `DISTINCT_COUNT_BITMAP`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022626426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022629011","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022629011","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022629011,"node_id":"IC_kwDOATCU_c489BST","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T21:41:44Z","updated_at":"2022-01-26T21:48:51Z","author_association":"CONTRIBUTOR","body":"hmm I think I understand your confusion when I give examples here and there. let me rephrase the entire description of the issue and let's restart the discussion from this point forward. \r\n\r\n[Updated] Hi @mcvsubbu, please let me know if the updated problem statement is clear or not","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022629011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022630587","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022630587","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022630587,"node_id":"IC_kwDOATCU_c489Bq7","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T21:44:03Z","updated_at":"2022-01-26T21:44:03Z","author_association":"CONTRIBUTOR","body":"> This changes the semantics of the function so that it is no longer a distinct count. I think it would be better to raise an error if the threshold is breached, which would educate the user to use `distinctcounthll` instead (this would also be documented clearly).\r\n\r\nGood point. We can definitely reject the query if it goes over the threshold, and make the threshold configurable.\r\n@kishoreg What's your opinion on this behavior? Reject or silently convert?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022630587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022647715","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022647715","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022647715,"node_id":"IC_kwDOATCU_c489F2j","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T22:07:43Z","updated_at":"2022-01-26T22:07:43Z","author_association":"CONTRIBUTOR","body":"I still don't understand why the latency is a problem.  Is it that the background task takes too long  to complete ? Or, is it that each I/O to S3 costs, and we want to minimize the number of I/Os (at the cost of not having a backup, of course)? Or, is it both? \r\n\r\nAssuming it is both, the best way to solve this problem as of now will be to \r\n- Set the retention days to 0 (instead of default 7) AND\r\n- Change the code so that deletion manager deletes it right away if the retention time is set to 0.\r\n\r\nThis is a cluster-wide behavior. So, if you want to change this on a per table basis, we should have a table config (that overrides the cluster config) with a different retention time (which can be 0 to indicate immediate deletion).\r\n\r\nA change to the API is not the best way to solve this IMO. You could have clients make a mistake while deletion, causing some segments to be retained and others to be deleted. Better to enforce uniform behavior across all segments in the table.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022647715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022662410","html_url":"https://github.com/apache/pinot/pull/7959#issuecomment-1022662410","issue_url":"https://api.github.com/repos/apache/pinot/issues/7959","id":1022662410,"node_id":"IC_kwDOATCU_c489JcK","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T22:29:21Z","updated_at":"2022-01-26T22:29:21Z","author_association":"CONTRIBUTOR","body":"Sorry for getting back and forth. I checked the behavior of MySQL, PostgresSQL and SQL Server, all of them will convert `*` to all the columns without deduplication.\r\nLet's keep this convention, and just rewrite each `*` to all columns sorted in alphabetically order to be compatible with the existing pinot behavior. The algorithm should be quite straight forward, and we can consider also rewrite the query for `*` without other columns for completeness.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022662410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022668825","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022668825","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022668825,"node_id":"IC_kwDOATCU_c489LAZ","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T22:39:56Z","updated_at":"2022-01-26T22:39:56Z","author_association":"CONTRIBUTOR","body":"I agree we should have both cluster config and table config override for retention time, but we also want to give user the flexibility to delete the segment immediately without moving to a deleted folder through the rest API (note that for some cloud storage, `move` is not supported, and it is implemented as `copy` then `delete` which can be super expensive).\r\n\r\nSome scenarios I can think of:\r\n- User pushed a bad segment (or several) and want to delete it\r\n- User wants to delete a table they no longer need","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022668825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022688453","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022688453","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022688453,"node_id":"IC_kwDOATCU_c489PzF","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T23:12:47Z","updated_at":"2022-01-26T23:15:37Z","author_association":"MEMBER","body":"can we list out all the options we have\r\n1. Automatically convert set to hyperloglog after a threshold \r\n   a. Threshold is set to something 100K by default\r\n   b. threshold is set to -1 which means feature is off and folks can change it\r\n   c.  user has the ability to control the threshold through query option (enable_approx_distinct_threshold=100,000)\r\n\r\n2. Return error if the threshold is reached\r\n   a. user then uses disctintcounthll \r\n   \r\nThe reason why I don't prefer second option where we return error and ask users to use distinctcounthll\r\n- the users cannot change to distinctcountsql because this will always return approximate even when it does not hit the threshold. \r\n- most of them will not hit this error in testing and will directly see this in production which is too late.\r\n- Pinot is mostly accessed programmatically via apps and the app user cannot really do much when the app returns error.\r\n- distinctcounthll is not really a standard sql and wont work with other standard tools like tableau, superset etc\r\n\r\nMy preference is to go with option 1 but start with -1 as the default value which makes the feature off by default but have the ability to override it using per query option or server config. This might still mean that they will see OOM when the distinct set does not fit in memory but they have the option to fix it via server config (no need of code change) or queryoption (needs change in app code)\r\n\r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022688453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022694357","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022694357","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022694357,"node_id":"IC_kwDOATCU_c489RPV","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T23:21:20Z","updated_at":"2022-01-26T23:21:20Z","author_association":"CONTRIBUTOR","body":"What does \"super-expensive\" mean? We should not be adding/deleting segments at hundreds per second, so I am just curious here.  I think segment reads/downloads will have much more cost (but perhaps that is where the \"tiered storage\" comes in).\r\n\r\nWith that, yes, there may be use cases where user wants to drop the segment or segments right away. So, both segment delete and table delete can have the ultimate override, maybe?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022694357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022697265","html_url":"https://github.com/apache/pinot/issues/8072#issuecomment-1022697265","issue_url":"https://api.github.com/repos/apache/pinot/issues/8072","id":1022697265,"node_id":"IC_kwDOATCU_c489R8x","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T23:26:22Z","updated_at":"2022-01-26T23:26:22Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu agreed! I was not proposing to change the API to solve the problem (that's why I created this issue instead of continuing the discussion in the previous PR), as the proposal is to \"find a way support instantly delete the segment\". \r\n\r\nI am fine with going through setting the RETENTION setting to 0 instead of 7 approach, as long as I can change the logic (as you mentioned) to instantly delete in SegmentDeletionManager\r\n\r\nRegarding the use cases @Jackie-Jiang mentioned, I think we can achieve both scenarios (technically) via using a table-level config that overrides cluster level config as @mcvsubbu mentioned. whether this is convenient for the user or not is a different story and we can leave that out of this discussion.\r\n\r\n\r\nSo to summarized, I will \r\n1. change the logic in SegmentDeletionManager and instantly delete the segment if retention period is set to 0\r\n2. create a tableConfig for retention that overrides cluster level config. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022697265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022697784","html_url":"https://github.com/apache/pinot/pull/8069#issuecomment-1022697784","issue_url":"https://api.github.com/repos/apache/pinot/issues/8069","id":1022697784,"node_id":"IC_kwDOATCU_c489SE4","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T23:27:24Z","updated_at":"2022-01-26T23:27:24Z","author_association":"CONTRIBUTOR","body":"closing","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022697784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022709088","html_url":"https://github.com/apache/pinot/issues/8045#issuecomment-1022709088","issue_url":"https://api.github.com/repos/apache/pinot/issues/8045","id":1022709088,"node_id":"IC_kwDOATCU_c489U1g","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T23:50:45Z","updated_at":"2022-05-03T17:16:14Z","author_association":"CONTRIBUTOR","body":"[Update] deleted and added to main issue description","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022709088/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022723548","html_url":"https://github.com/apache/pinot/issues/8045#issuecomment-1022723548","issue_url":"https://api.github.com/repos/apache/pinot/issues/8045","id":1022723548,"node_id":"IC_kwDOATCU_c489YXc","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T00:17:52Z","updated_at":"2022-01-27T00:17:52Z","author_association":"MEMBER","body":"The range index would favour storing dates as an integer epoch (I.e. an offset in days since 1970-01-01) which can be converted to an actual date very quickly, which would allow raw storage without the indirection of a dictionary. If we were to reintroduce integer compression for raw columns these would compress very well too.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022723548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022729060","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022729060","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022729060,"node_id":"IC_kwDOATCU_c489Ztk","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T00:28:18Z","updated_at":"2022-01-27T00:28:18Z","author_association":"MEMBER","body":"I think there is a good argument for introducing a new function which degrades to hll at a threshold (which the user could even supply). My expectation of distinct count is that it is exact if it produces a result, degrading to an approximate result without being explicit about it makes query results hard to reason about. Degradation to an approximate result at an arbitrary threshold is arguably worse than always producing an approximate result.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022729060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022734026","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022734026","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022734026,"node_id":"IC_kwDOATCU_c489a7K","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T00:37:43Z","updated_at":"2022-01-27T00:39:30Z","author_association":"MEMBER","body":"The basic problem here is needing to choose between being wrong and not producing a result when the cardinality is high, given the definition of distinct count. In my opinion, OOM risk should be mitigated explicitly by resource controls/circuit breakers and not by relaxing semantics. If this PR is merged as is, it’s a statement that producing a result is prioritised over being correct, but one of those options has to be chosen.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022734026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022744027","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022744027","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022744027,"node_id":"IC_kwDOATCU_c489dXb","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T00:56:14Z","updated_at":"2022-01-27T00:56:14Z","author_association":"MEMBER","body":"This PR should be good to go if the default threshold is changed to infinity or -1 right? That keeps the existing behavior and does not change anything but it allows the both operators and users to control the behavior.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022744027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022765116","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1022765116","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1022765116,"node_id":"IC_kwDOATCU_c489ig8","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T01:40:47Z","updated_at":"2022-01-27T01:40:47Z","author_association":"CONTRIBUTOR","body":"> The multi-partition rate limiter seems to be created only once. If the number of partitions changes, where is it adjusted?\r\n\r\nIt's created only once and that's in the constructor of `LLRealtimeSegmentDataManager`. When the number of partitions changes, nothing happens to the existing consuming segments, i.e. existing LLRealtimeSegmentDataManager objects, but there will be new consuming segments and consequently new LLRealtimeSegmentDataManager objects will be created. Each of these new objects will have their own rate limiters with the new partition count.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022765116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022794295","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1022794295","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1022794295,"node_id":"IC_kwDOATCU_c489po3","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T02:46:48Z","updated_at":"2022-01-27T02:46:48Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nThen why do we have a 10-minute cache refresh for the number of partitions? Just fetch it once and set the rate limiter right?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022794295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022799793","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1022799793","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1022799793,"node_id":"IC_kwDOATCU_c489q-x","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T02:59:27Z","updated_at":"2022-01-27T02:59:42Z","author_association":"CONTRIBUTOR","body":"> Then why do we have a 10-minute cache refresh for the number of partitions? Just fetch it once and set the rate limiter right?\r\n\r\nFetching-it-once works for current consuming segments, but it'll be problematic for the future consuming segments in case the number of partitions changes.\r\nThe cache is used to prevent fetching the num partitions for multiple consuming segments of the same topic on the same host.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022799793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022854198","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1022854198","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1022854198,"node_id":"IC_kwDOATCU_c4894Q2","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T05:10:11Z","updated_at":"2022-01-27T05:10:11Z","author_association":"CONTRIBUTOR","body":"+1 to this feature. \r\n\r\nDoes the current implementation allow dynamic rate limit addition or change? For ops, it would be nice to adjust the quota and expect it to be effective immediately. Currently implementation seems to create the rate limiter once upon the `LLRealtimeSegmentDataManager ` creation","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022854198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022866328","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022866328","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022866328,"node_id":"IC_kwDOATCU_c4897OY","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T05:38:13Z","updated_at":"2022-01-27T05:40:20Z","author_association":"CONTRIBUTOR","body":"-1 on changing the default behavior. As @richardstartin mentioned, we should not change the default behavior because the clients do expect the exact result when they run `distinctcount`.\r\n\r\nMeanwhile, if we keep the default behavior as it is, the user now needs to be educated enough to know how to configure hll threshold `DISTINCTCOUNT(myCol, 'hllLog2m=8;hllConversionThreshold=10')` to control the behavior when firing the query. Then, why not ask them to use `distinctcounthll` directly?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022866328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022891697","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1022891697","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1022891697,"node_id":"IC_kwDOATCU_c48-Bax","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T06:33:18Z","updated_at":"2022-01-27T06:33:18Z","author_association":"CONTRIBUTOR","body":"> +1 to this feature.\r\n> \r\n> Does the current implementation allow dynamic rate limit addition or change? For ops, it would be nice to adjust the quota and expect it to be effective immediately. Currently implementation seems to create the rate limiter once upon the `LLRealtimeSegmentDataManager ` creation\r\n\r\nYou're right, in this implementation changes in the ingestion quota config doesn't get reflected in the current consuming segments and we need to wait till they get completed and then the new consuming segments will pick up the new rate limit.\r\n\r\nFor immediate reflection of rate limit change, we can add ZK watches on table config or read the table configs in short periods of time like in one minute. Then adjust the rate limit if it's changed. But I think using these approaches adds complexity and maybe extra pressure on ZK. \r\nOne simpler and less expensive approach is that after consumption rate limit is changed, the operator calls a force commit endpoint on controllers for existing consuming segments. Then the next consuming segments will automatically pick up the new consumption quota value. I'm finalizing a design doc for pause / resume consumption which includes the force commit logic and will share it soon.\r\n\r\n@yupeng9 @mcvsubbu what do you guys think?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022891697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022898022","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1022898022","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1022898022,"node_id":"IC_kwDOATCU_c48-C9m","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T06:47:19Z","updated_at":"2022-01-27T06:47:19Z","author_association":"MEMBER","body":"@snleee what is your take on the behavior I suggested?\r\n\r\n- default behavior remains the same by having threshold = -1. \r\n- Operators can explicitly set a threshold to change default behavior\r\n- Users can still override the threshold on a per query basis either using query option or new argument to distinctCount function.\r\n\r\nI also wanted to call out again that asking users to use distinctcounthll is not a feasible solution because distinctcounthll will always use hyperloglog and return approximate results. What this PR is trying to add is a way to automatically switch to hyperloglog if the distinct set exceeds a threshold and this is dependent on the data and query.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1022898022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023411073","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1023411073","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1023411073,"node_id":"IC_kwDOATCU_c49AAOB","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T16:29:21Z","updated_at":"2022-01-27T16:29:21Z","author_association":"CONTRIBUTOR","body":"> > +1 to this feature.\r\n> > Does the current implementation allow dynamic rate limit addition or change? For ops, it would be nice to adjust the quota and expect it to be effective immediately. Currently implementation seems to create the rate limiter once upon the `LLRealtimeSegmentDataManager ` creation\r\n> \r\n> You're right, in this implementation changes in the ingestion quota config doesn't get reflected in the current consuming segments and we need to wait till they get completed and then the new consuming segments will pick up the new rate limit.\r\n> \r\n> For immediate reflection of rate limit change, we can add ZK watches on table config or read the table configs in short periods of time like in one minute. Then adjust the rate limit if it's changed. But I think using these approaches adds complexity and maybe extra pressure on ZK. One simpler and less expensive approach is that after consumption rate limit is changed, the operator calls a force commit endpoint on controllers for existing consuming segments. Then the next consuming segments will automatically pick up the new consumption quota value. I'm finalizing a design doc for pause / resume consumption which includes the force commit logic and will share it soon.\r\n> \r\n> @yupeng9 @mcvsubbu what do you guys think?\r\n\r\nYes, I think this is a good solution. In fact, some other config changes such as schema evolution may follow a similar approach of force closing the consuming segments, as those changes also encounter similar challenges of waiting for the consuming segment to close.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023411073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023439234","html_url":"https://github.com/apache/pinot/pull/8077#issuecomment-1023439234","issue_url":"https://api.github.com/repos/apache/pinot/issues/8077","id":1023439234,"node_id":"IC_kwDOATCU_c49AHGC","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T16:57:28Z","updated_at":"2022-01-28T18:59:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8077](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fa58e26) into [master](https://codecov.io/gh/apache/pinot/commit/cc2f3fe196d29a0d716bfee07add9b761e8fa98e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cc2f3fe) will **increase** coverage by `6.53%`.\n> The diff coverage is `53.57%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8077/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8077      +/-   ##\n============================================\n+ Coverage     64.63%   71.17%   +6.53%     \n- Complexity     4260     4264       +4     \n============================================\n  Files          1562     1607      +45     \n  Lines         81525    83419    +1894     \n  Branches      12252    12460     +208     \n============================================\n+ Hits          52695    59374    +6679     \n+ Misses        25072    20003    -5069     \n- Partials       3758     4042     +284     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.02% <53.57%> (?)` | |\n| integration2 | `27.51% <53.57%> (?)` | |\n| unittests1 | `67.92% <ø> (+0.05%)` | :arrow_up: |\n| unittests2 | `14.23% <39.28%> (+0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../controller/helix/core/SegmentDeletionManager.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1NlZ21lbnREZWxldGlvbk1hbmFnZXIuamF2YQ==) | `73.48% <45.83%> (-0.50%)` | :arrow_down: |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `65.60% <100.00%> (+3.92%)` | :arrow_up: |\n| [...ment/creator/impl/SegmentColumnarIndexCreator.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2NyZWF0b3IvaW1wbC9TZWdtZW50Q29sdW1uYXJJbmRleENyZWF0b3IuamF2YQ==) | `86.32% <0.00%> (-0.94%)` | :arrow_down: |\n| [.../pinot/plugin/inputformat/csv/CSVRecordReader.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1pbnB1dC1mb3JtYXQvcGlub3QtY3N2L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9wbHVnaW4vaW5wdXRmb3JtYXQvY3N2L0NTVlJlY29yZFJlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/server/api/resources/ErrorResponse.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvYXBpL3Jlc291cmNlcy9FcnJvclJlc3BvbnNlLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...che/pinot/plugin/metrics/yammer/YammerCounter.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1tZXRyaWNzL3Bpbm90LXlhbW1lci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL21ldHJpY3MveWFtbWVyL1lhbW1lckNvdW50ZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...che/pinot/plugin/metrics/yammer/YammerMetered.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1tZXRyaWNzL3Bpbm90LXlhbW1lci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL21ldHJpY3MveWFtbWVyL1lhbW1lck1ldGVyZWQuamF2YQ==) | `25.00% <0.00%> (ø)` | |\n| [.../pinot/server/api/resources/MmapDebugResource.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvYXBpL3Jlc291cmNlcy9NbWFwRGVidWdSZXNvdXJjZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ter/helix/OffsetBasedConsumptionStatusChecker.java](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9PZmZzZXRCYXNlZENvbnN1bXB0aW9uU3RhdHVzQ2hlY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [372 more](https://codecov.io/gh/apache/pinot/pull/8077/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [cc2f3fe...fa58e26](https://codecov.io/gh/apache/pinot/pull/8077?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023439234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023450586","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1023450586","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1023450586,"node_id":"IC_kwDOATCU_c49AJ3a","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T17:09:06Z","updated_at":"2022-01-27T17:09:06Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nI suggest we first start off with the simple PR that is here, and then try to improve it with dynamic changes, etc. For the specific use case of operator changing the table config, a force commit is a great option. We are going to put the design out on that soon","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023450586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023505010","html_url":"https://github.com/apache/pinot/pull/6291#issuecomment-1023505010","issue_url":"https://api.github.com/repos/apache/pinot/issues/6291","id":1023505010,"node_id":"IC_kwDOATCU_c49AXJy","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:09:04Z","updated_at":"2022-01-27T18:09:04Z","author_association":"CONTRIBUTOR","body":"> > \r\n> \r\n> I suggest we first start off with the simple PR that is here, and then try to improve it with dynamic changes, etc. For the specific use case of operator changing the table config, a force commit is a great option. We are going to put the design out on that soon\r\n\r\nYes, makes total sense.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023505010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023513966","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1023513966","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1023513966,"node_id":"IC_kwDOATCU_c49AZVu","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:19:30Z","updated_at":"2022-01-27T18:19:30Z","author_association":"CONTRIBUTOR","body":"How about introducing a new aggregation function which automatically degrade to hll, then we can add a config on the broker to rewrite `distinctCount` to this new function? This way we get the following benefits:\r\n- No performance hit to `distinctCount`\r\n- Can be enabled by admin to always fall-back to the new function\r\n- User can explicitly choose the new function","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023513966/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023535011","html_url":"https://github.com/apache/pinot/issues/8075#issuecomment-1023535011","issue_url":"https://api.github.com/repos/apache/pinot/issues/8075","id":1023535011,"node_id":"IC_kwDOATCU_c49Aeej","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:46:49Z","updated_at":"2022-01-27T18:46:49Z","author_association":"CONTRIBUTOR","body":"Thanks for investigating into the issue. Would you mind helping contribute a fix for this?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023535011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023543203","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1023543203","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1023543203,"node_id":"IC_kwDOATCU_c49Agej","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:57:40Z","updated_at":"2022-01-27T18:57:40Z","author_association":"MEMBER","body":"> How about introducing a new aggregation function which automatically degrade to hll, then we can add a config on the broker to rewrite `distinctCount` to this new function? This way we get the following benefits:\r\n> \r\n> * No performance hit to `distinctCount`\r\n> * Can be enabled by admin to always fall-back to the new function\r\n> * User can explicitly choose the new function\r\n\r\nGood idea 👍 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023543203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023543563","html_url":"https://github.com/apache/pinot/pull/8074#issuecomment-1023543563","issue_url":"https://api.github.com/repos/apache/pinot/issues/8074","id":1023543563,"node_id":"IC_kwDOATCU_c49AgkL","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T18:58:09Z","updated_at":"2022-01-27T20:04:14Z","author_association":"CONTRIBUTOR","body":"@kishoreg Oh, so we want the new behavior where we return the correct result until the threshold and return the approximate after threshold. In that case, using `distinctcounthll` will not work and I would +1 on Jackie's approach. That will achieve both. (1. keep the default behavior 2. add the ability to override the default behavior for advanced admin)\r\n\r\n@Jackie-Jiang How will you deal with the new input `hllLog2m=8;hllConversionThreshold=10` when we fall back to the new function with config? The original distinctcount function currently doesn't get the second parameter. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023543563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023725725","html_url":"https://github.com/apache/pinot/pull/8080#issuecomment-1023725725","issue_url":"https://api.github.com/repos/apache/pinot/issues/8080","id":1023725725,"node_id":"IC_kwDOATCU_c49BNCd","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T23:11:17Z","updated_at":"2022-01-28T01:13:53Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8080](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (179db7d) into [master](https://codecov.io/gh/apache/pinot/commit/e7ea235a1e0e94da02b5a8b171bba0b00d0d6076?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e7ea235) will **increase** coverage by `26.77%`.\n> The diff coverage is `70.00%`.\n\n> :exclamation: Current head 179db7d differs from pull request most recent head c80f76e. Consider uploading reports for the commit c80f76e to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8080/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8080       +/-   ##\n=============================================\n+ Coverage     37.93%   64.70%   +26.77%     \n- Complexity       81     4260     +4179     \n=============================================\n  Files          1606     1562       -44     \n  Lines         83405    81529     -1876     \n  Branches      12455    12254      -201     \n=============================================\n+ Hits          31638    52757    +21119     \n+ Misses        49311    25004    -24307     \n- Partials       2456     3768     +1312     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `67.85% <59.09%> (?)` | |\n| unittests2 | `14.29% <26.66%> (+0.04%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ment/creator/impl/SegmentColumnarIndexCreator.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2NyZWF0b3IvaW1wbC9TZWdtZW50Q29sdW1uYXJJbmRleENyZWF0b3IuamF2YQ==) | `86.32% <0.00%> (+86.32%)` | :arrow_up: |\n| [.../java/org/apache/pinot/spi/filesystem/PinotFS.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9QaW5vdEZTLmphdmE=) | `0.00% <ø> (ø)` | |\n| [...a/org/apache/pinot/spi/filesystem/BasePinotFS.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9CYXNlUGlub3RGUy5qYXZh) | `70.58% <70.58%> (ø)` | |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `61.81% <100.00%> (-3.62%)` | :arrow_down: |\n| [...troller/helix/core/retention/RetentionManager.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JldGVudGlvbi9SZXRlbnRpb25NYW5hZ2VyLmphdmE=) | `79.36% <100.00%> (-3.97%)` | :arrow_down: |\n| [.../org/apache/pinot/plugin/filesystem/S3PinotFS.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1maWxlLXN5c3RlbS9waW5vdC1zMy9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL2ZpbGVzeXN0ZW0vUzNQaW5vdEZTLmphdmE=) | `38.70% <100.00%> (ø)` | |\n| [.../org/apache/pinot/spi/filesystem/LocalPinotFS.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9Mb2NhbFBpbm90RlMuamF2YQ==) | `89.79% <100.00%> (+89.79%)` | :arrow_up: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1156 more](https://codecov.io/gh/apache/pinot/pull/8080/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e7ea235...c80f76e](https://codecov.io/gh/apache/pinot/pull/8080?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023725725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023731748","html_url":"https://github.com/apache/pinot/pull/8081#issuecomment-1023731748","issue_url":"https://api.github.com/repos/apache/pinot/issues/8081","id":1023731748,"node_id":"IC_kwDOATCU_c49BOgk","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T23:21:41Z","updated_at":"2022-01-28T02:40:25Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8081](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (69a4737) into [master](https://codecov.io/gh/apache/pinot/commit/e7ea235a1e0e94da02b5a8b171bba0b00d0d6076?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e7ea235) will **increase** coverage by `33.24%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8081/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #8081       +/-   ##\n=============================================\n+ Coverage     37.93%   71.17%   +33.24%     \n- Complexity       81     4262     +4181     \n=============================================\n  Files          1606     1607        +1     \n  Lines         83405    83409        +4     \n  Branches      12455    12458        +3     \n=============================================\n+ Hits          31638    59370    +27732     \n+ Misses        49311    19998    -29313     \n- Partials       2456     4041     +1585     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `28.92% <ø> (+0.01%)` | :arrow_up: |\n| integration2 | `27.73% <ø> (+0.13%)` | :arrow_up: |\n| unittests1 | `67.88% <ø> (?)` | |\n| unittests2 | `14.29% <ø> (+0.04%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/manager/realtime/RealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVTZWdtZW50RGF0YU1hbmFnZXIuamF2YQ==) | `50.00% <0.00%> (-25.00%)` | :arrow_down: |\n| [...not/broker/broker/helix/ClusterChangeMediator.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0NsdXN0ZXJDaGFuZ2VNZWRpYXRvci5qYXZh) | `77.65% <0.00%> (-2.13%)` | :arrow_down: |\n| [...core/query/executor/ServerQueryExecutorV1Impl.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9leGVjdXRvci9TZXJ2ZXJRdWVyeUV4ZWN1dG9yVjFJbXBsLmphdmE=) | `83.02% <0.00%> (-1.38%)` | :arrow_down: |\n| [...lix/core/realtime/PinotRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90UmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `82.72% <0.00%> (-1.05%)` | :arrow_down: |\n| [...server/starter/helix/HelixInstanceDataManager.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9IZWxpeEluc3RhbmNlRGF0YU1hbmFnZXIuamF2YQ==) | `79.44% <0.00%> (-0.56%)` | :arrow_down: |\n| [...roker/requesthandler/BaseBrokerRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcmVxdWVzdGhhbmRsZXIvQmFzZUJyb2tlclJlcXVlc3RIYW5kbGVyLmphdmE=) | `71.08% <0.00%> (-0.20%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/filesystem/PinotFS.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZmlsZXN5c3RlbS9QaW5vdEZTLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...pache/pinot/core/query/utils/idset/EmptyIdSet.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS91dGlscy9pZHNldC9FbXB0eUlkU2V0LmphdmE=) | `25.00% <0.00%> (ø)` | |\n| [...pinot/core/query/request/context/TimerContext.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9yZXF1ZXN0L2NvbnRleHQvVGltZXJDb250ZXh0LmphdmE=) | `91.66% <0.00%> (ø)` | |\n| [...troller/helix/core/retention/RetentionManager.java](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JldGVudGlvbi9SZXRlbnRpb25NYW5hZ2VyLmphdmE=) | `83.33% <0.00%> (ø)` | |\n| ... and [897 more](https://codecov.io/gh/apache/pinot/pull/8081/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e7ea235...69a4737](https://codecov.io/gh/apache/pinot/pull/8081?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023731748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023791941","html_url":"https://github.com/apache/pinot/issues/8060#issuecomment-1023791941","issue_url":"https://api.github.com/repos/apache/pinot/issues/8060","id":1023791941,"node_id":"IC_kwDOATCU_c49BdNF","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T01:12:39Z","updated_at":"2022-01-28T01:12:39Z","author_association":"CONTRIBUTOR","body":"Not sure if this is similar / overlapping but linking the issue here for reference - https://github.com/apache/pinot/issues/8040\r\n\r\nLooking forward to the design doc","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023791941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023895944","html_url":"https://github.com/apache/pinot/pull/8083#issuecomment-1023895944","issue_url":"https://api.github.com/repos/apache/pinot/issues/8083","id":1023895944,"node_id":"IC_kwDOATCU_c49B2mI","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T05:18:13Z","updated_at":"2022-01-28T05:18:13Z","author_association":"MEMBER","body":"Please see #7730, there are better ways to pinpoint lock contention, with more context and at much lower overhead than recording expensive metrics. The problem with manual instrumentation like this is every Pinot user has to pay for it whether they want to use it or not.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023895944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023919963","html_url":"https://github.com/apache/pinot/pull/8083#issuecomment-1023919963","issue_url":"https://api.github.com/repos/apache/pinot/issues/8083","id":1023919963,"node_id":"IC_kwDOATCU_c49B8db","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T06:17:00Z","updated_at":"2022-01-28T06:25:45Z","author_association":"CONTRIBUTOR","body":"> The problem with manual instrumentation like this is every Pinot user has to pay for it whether they want to use it or not.\r\n\r\nHow about time-out when waiting lock but does not emit metric? In this way, it will not bring overhead for \"happy path\".\r\n\r\n* for \"happy\" queries, they will acquire the lock before the time-out, no overhead to them\r\n* for \"unhappy\" queries, they will get an interruption from timer when time-out elapsed, then remove themself from the lock waiting queue\r\n\r\n> there are better ways to pinpoint lock contention, with more context and at much lower overhead than recording expensive metrics\r\n\r\n> ServerChannels should be reworked to avoid this.\r\n\r\nAgree that ServerChannels should be reworked. I am considering  gRPC or HTTP/2, which can split large request into small chunks, and multiplex/interleave multiple requests on a single TCP connection. Otherwise,  even if we alleviate the lock contention, \"head line of blocking\" effect  is hard to resolve as long as we must write multiple requests to channel sequentially.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023919963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023922099","html_url":"https://github.com/apache/pinot/pull/8083#issuecomment-1023922099","issue_url":"https://api.github.com/repos/apache/pinot/issues/8083","id":1023922099,"node_id":"IC_kwDOATCU_c49B8-z","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T06:21:38Z","updated_at":"2022-01-28T06:21:38Z","author_association":"MEMBER","body":"> > The problem with manual instrumentation like this is every Pinot user has to pay for it whether they want to use it or not.\r\n> \r\n> How about time-out when waiting lock but does not emit metric? In this way, it will not bring overhead for \"happy path\".\r\n> \r\n> * for \"happy\" queries, they will acquire the lock before the time-out, no overhead for them\r\n> * for \"unhappy\" queries, they will get an interruption from timer when time-out elapsed, then remove themself from the lock waiting queue\r\n\r\nI'm OK with the change itself, I just don't like the metric 👍🏻 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023922099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023942899","html_url":"https://github.com/apache/pinot/pull/8083#issuecomment-1023942899","issue_url":"https://api.github.com/repos/apache/pinot/issues/8083","id":1023942899,"node_id":"IC_kwDOATCU_c49CCDz","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T07:06:46Z","updated_at":"2022-02-01T00:32:12Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8083](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9e585cf) into [master](https://codecov.io/gh/apache/pinot/commit/18777b7149b665e4c5a22e27f78a78fd63bd8055?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (18777b7) will **increase** coverage by `0.19%`.\n> The diff coverage is `84.61%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8083/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8083      +/-   ##\n============================================\n+ Coverage     71.16%   71.35%   +0.19%     \n- Complexity     4260     4302      +42     \n============================================\n  Files          1607     1617      +10     \n  Lines         83409    83850     +441     \n  Branches      12458    12519      +61     \n============================================\n+ Hits          59359    59834     +475     \n+ Misses        20005    19938      -67     \n- Partials       4045     4078      +33     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.00% <76.92%> (+0.09%)` | :arrow_up: |\n| integration2 | `27.75% <84.61%> (+0.10%)` | :arrow_up: |\n| unittests1 | `67.91% <76.92%> (+0.05%)` | :arrow_up: |\n| unittests2 | `14.16% <0.00%> (-0.10%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/pinot/core/transport/ServerChannels.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS90cmFuc3BvcnQvU2VydmVyQ2hhbm5lbHMuamF2YQ==) | `89.65% <83.33%> (-2.80%)` | :arrow_down: |\n| [...a/org/apache/pinot/core/transport/QueryRouter.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS90cmFuc3BvcnQvUXVlcnlSb3V0ZXIuamF2YQ==) | `93.33% <100.00%> (ø)` | |\n| [.../pinot/core/operator/docidsets/BitmapDocIdSet.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9kb2NpZHNldHMvQml0bWFwRG9jSWRTZXQuamF2YQ==) | `62.50% <0.00%> (-37.50%)` | :arrow_down: |\n| [...org/apache/pinot/core/util/ListenerConfigUtil.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL0xpc3RlbmVyQ29uZmlnVXRpbC5qYXZh) | `77.00% <0.00%> (-10.81%)` | :arrow_down: |\n| [...a/org/apache/pinot/common/utils/ServiceStatus.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvU2VydmljZVN0YXR1cy5qYXZh) | `60.00% <0.00%> (-7.15%)` | :arrow_down: |\n| [...apache/pinot/core/operator/blocks/FilterBlock.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9ibG9ja3MvRmlsdGVyQmxvY2suamF2YQ==) | `50.00% <0.00%> (-7.15%)` | :arrow_down: |\n| [.../helix/core/minion/MinionInstancesCleanupTask.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9NaW5pb25JbnN0YW5jZXNDbGVhbnVwVGFzay5qYXZh) | `77.27% <0.00%> (-4.55%)` | :arrow_down: |\n| [.../controller/helix/core/SegmentDeletionManager.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1NlZ21lbnREZWxldGlvbk1hbmFnZXIuamF2YQ==) | `73.48% <0.00%> (-3.76%)` | :arrow_down: |\n| [...gregation/function/StUnionAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9TdFVuaW9uQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `73.52% <0.00%> (-2.95%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/data/TimeFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9UaW1lRmllbGRTcGVjLmphdmE=) | `88.63% <0.00%> (-2.28%)` | :arrow_down: |\n| ... and [53 more](https://codecov.io/gh/apache/pinot/pull/8083/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [18777b7...9e585cf](https://codecov.io/gh/apache/pinot/pull/8083?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1023942899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024000262","html_url":"https://github.com/apache/pinot/issues/8041#issuecomment-1024000262","issue_url":"https://api.github.com/repos/apache/pinot/issues/8041","id":1024000262,"node_id":"IC_kwDOATCU_c49CQEG","user":{"login":"ImAbhishekTomar","id":6933841,"node_id":"MDQ6VXNlcjY5MzM4NDE=","avatar_url":"https://avatars.githubusercontent.com/u/6933841?v=4","gravatar_id":"","url":"https://api.github.com/users/ImAbhishekTomar","html_url":"https://github.com/ImAbhishekTomar","followers_url":"https://api.github.com/users/ImAbhishekTomar/followers","following_url":"https://api.github.com/users/ImAbhishekTomar/following{/other_user}","gists_url":"https://api.github.com/users/ImAbhishekTomar/gists{/gist_id}","starred_url":"https://api.github.com/users/ImAbhishekTomar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ImAbhishekTomar/subscriptions","organizations_url":"https://api.github.com/users/ImAbhishekTomar/orgs","repos_url":"https://api.github.com/users/ImAbhishekTomar/repos","events_url":"https://api.github.com/users/ImAbhishekTomar/events{/privacy}","received_events_url":"https://api.github.com/users/ImAbhishekTomar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T08:42:00Z","updated_at":"2022-01-28T08:42:00Z","author_association":"NONE","body":"need help on this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024000262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024010731","html_url":"https://github.com/apache/pinot/issues/8041#issuecomment-1024010731","issue_url":"https://api.github.com/repos/apache/pinot/issues/8041","id":1024010731,"node_id":"IC_kwDOATCU_c49CSnr","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T08:55:57Z","updated_at":"2022-01-28T08:57:52Z","author_association":"CONTRIBUTOR","body":"Hi @ImAbhishekTomar - sorry for the late reply. I'm not an expert with kafka configs - one thing to try is to provide the key/truststore as an absolute `/opt/pinot/....` rather than relative `./../../../app/....` path. Also, I'd keep the keystores in the app's config/work directory as otherwise restrictive security managers might block access.\r\n\r\nedit: I noticed that the registry shows up with an HTTP url. Should that be HTTPS?\r\n\r\nif this doesn't work, I'll defer to @npawar and @timsants for kafka expertise","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024010731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024023665","html_url":"https://github.com/apache/pinot/pull/8016#issuecomment-1024023665","issue_url":"https://api.github.com/repos/apache/pinot/issues/8016","id":1024023665,"node_id":"IC_kwDOATCU_c49CVxx","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T09:12:39Z","updated_at":"2022-01-28T09:12:39Z","author_association":"CONTRIBUTOR","body":"> I saw some unsolved comments. Please resolve them and wait for all tests pass before merging.\r\n> You might need to rebase to the latest master if the compatibility test against `0.9.0` fails\r\n\r\nThere was one unresolved comment around class import -- have fixed that and merged master. Waiting for tests to complete","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024023665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024031807","html_url":"https://github.com/apache/pinot/issues/8084#issuecomment-1024031807","issue_url":"https://api.github.com/repos/apache/pinot/issues/8084","id":1024031807,"node_id":"IC_kwDOATCU_c49CXw_","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T09:23:09Z","updated_at":"2022-01-28T09:23:09Z","author_association":"MEMBER","body":"`min` _is_ an aggregation function in SQL. I think you're trying to use it like `least` (`max`: `greatest`) which isn't implemented in Pinot.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024031807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024261109","html_url":"https://github.com/apache/pinot/issues/8084#issuecomment-1024261109","issue_url":"https://api.github.com/repos/apache/pinot/issues/8084","id":1024261109,"node_id":"IC_kwDOATCU_c49DPv1","user":{"login":"mneedham","id":13220,"node_id":"MDQ6VXNlcjEzMjIw","avatar_url":"https://avatars.githubusercontent.com/u/13220?v=4","gravatar_id":"","url":"https://api.github.com/users/mneedham","html_url":"https://github.com/mneedham","followers_url":"https://api.github.com/users/mneedham/followers","following_url":"https://api.github.com/users/mneedham/following{/other_user}","gists_url":"https://api.github.com/users/mneedham/gists{/gist_id}","starred_url":"https://api.github.com/users/mneedham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mneedham/subscriptions","organizations_url":"https://api.github.com/users/mneedham/orgs","repos_url":"https://api.github.com/users/mneedham/repos","events_url":"https://api.github.com/users/mneedham/events{/privacy}","received_events_url":"https://api.github.com/users/mneedham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T14:12:26Z","updated_at":"2022-01-28T14:12:26Z","author_association":"CONTRIBUTOR","body":"Pinot has two different `min` functions. There's the aggregation function that you mention, but there is also a scalar function defined here - https://github.com/apache/pinot/blob/master/pinot-common/src/main/java/org/apache/pinot/common/function/scalar/ArithmeticFunctions.java#L57\r\n\r\n```\r\n  @ScalarFunction\r\n  public static double min(double a, double b) {\r\n    return Double.min(a, b);\r\n  }\r\n\r\n  @ScalarFunction\r\n  public static double max(double a, double b) {\r\n    return Double.max(a, b);\r\n  }\r\n```\r\n\r\nSo I wanted to call this `min` function in my query, but it calls the other one. So is your suggestion that the scalar functions should have different names? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024261109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024272235","html_url":"https://github.com/apache/pinot/issues/8084#issuecomment-1024272235","issue_url":"https://api.github.com/repos/apache/pinot/issues/8084","id":1024272235,"node_id":"IC_kwDOATCU_c49DSdr","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T14:23:51Z","updated_at":"2022-01-28T14:23:51Z","author_association":"MEMBER","body":"> Pinot has two different `min` functions. There's the aggregation function that you mention, but there is also a scalar function defined here - https://github.com/apache/pinot/blob/master/pinot-common/src/main/java/org/apache/pinot/common/function/scalar/ArithmeticFunctions.java#L57\r\n> \r\n> ```\r\n>   @ScalarFunction\r\n>   public static double min(double a, double b) {\r\n>     return Double.min(a, b);\r\n>   }\r\n> \r\n>   @ScalarFunction\r\n>   public static double max(double a, double b) {\r\n>     return Double.max(a, b);\r\n>   }\r\n> ```\r\n> \r\n> So I wanted to call this `min` function in my query, but it calls the other one. So is your suggestion that the scalar functions should have different names?\r\n\r\nI’m aware of the scalar arithmetic functions. In SQL this function, which operates on tuples, not sets, is called least, not min. min is an aggregation over a set. I experimented with adding least and greatest scalar functions, and it works, but I would prefer to implement this as a TransformFunction for efficiency reasons (vectorisation).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024272235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024311144","html_url":"https://github.com/apache/pinot/pull/8087#issuecomment-1024311144","issue_url":"https://api.github.com/repos/apache/pinot/issues/8087","id":1024311144,"node_id":"IC_kwDOATCU_c49Db9o","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T15:08:57Z","updated_at":"2022-01-28T15:12:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#8087](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (eab38c6) into [master](https://codecov.io/gh/apache/pinot/commit/c8dde9bc7664bca179754046b0ba366103de790a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c8dde9b) will **decrease** coverage by `6.49%`.\n> The diff coverage is `71.42%`.\n\n> :exclamation: Current head eab38c6 differs from pull request most recent head 8d6b87f. Consider uploading reports for the commit 8d6b87f to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/8087/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #8087      +/-   ##\n============================================\n- Coverage     71.18%   64.68%   -6.50%     \n- Complexity     4262     4264       +2     \n============================================\n  Files          1607     1562      -45     \n  Lines         83409    81530    -1879     \n  Branches      12458    12254     -204     \n============================================\n- Hits          59375    52741    -6634     \n- Misses        19999    25032    +5033     \n+ Partials       4035     3757     -278     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `67.90% <ø> (-0.01%)` | :arrow_down: |\n| unittests2 | `14.24% <71.42%> (+0.02%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...er/recommender/data/generator/NumberGenerator.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9kYXRhL2dlbmVyYXRvci9OdW1iZXJHZW5lcmF0b3IuamF2YQ==) | `70.96% <ø> (ø)` | |\n| [...ller/recommender/data/generator/TimeGenerator.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9kYXRhL2dlbmVyYXRvci9UaW1lR2VuZXJhdG9yLmphdmE=) | `83.33% <33.33%> (-5.56%)` | :arrow_down: |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `61.88% <100.00%> (-3.62%)` | :arrow_down: |\n| [.../pinot/controller/recommender/io/InputManager.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9JbnB1dE1hbmFnZXIuamF2YQ==) | `91.56% <100.00%> (+0.03%)` | :arrow_up: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ache/pinot/server/access/AccessControlFactory.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VydmVyL2FjY2Vzcy9BY2Nlc3NDb250cm9sRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [371 more](https://codecov.io/gh/apache/pinot/pull/8087/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c8dde9b...8d6b87f](https://codecov.io/gh/apache/pinot/pull/8087?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024311144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024342611","html_url":"https://github.com/apache/pinot/issues/8084#issuecomment-1024342611","issue_url":"https://api.github.com/repos/apache/pinot/issues/8084","id":1024342611,"node_id":"IC_kwDOATCU_c49DjpT","user":{"login":"mneedham","id":13220,"node_id":"MDQ6VXNlcjEzMjIw","avatar_url":"https://avatars.githubusercontent.com/u/13220?v=4","gravatar_id":"","url":"https://api.github.com/users/mneedham","html_url":"https://github.com/mneedham","followers_url":"https://api.github.com/users/mneedham/followers","following_url":"https://api.github.com/users/mneedham/following{/other_user}","gists_url":"https://api.github.com/users/mneedham/gists{/gist_id}","starred_url":"https://api.github.com/users/mneedham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mneedham/subscriptions","organizations_url":"https://api.github.com/users/mneedham/orgs","repos_url":"https://api.github.com/users/mneedham/repos","events_url":"https://api.github.com/users/mneedham/events{/privacy}","received_events_url":"https://api.github.com/users/mneedham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T15:43:43Z","updated_at":"2022-01-28T15:43:43Z","author_association":"CONTRIBUTOR","body":"Got it, thanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/1024342611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]