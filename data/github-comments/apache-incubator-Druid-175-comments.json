[{"url":"https://api.github.com/repos/apache/druid/issues/comments/362761837","html_url":"https://github.com/apache/druid/issues/5337#issuecomment-362761837","issue_url":"https://api.github.com/repos/apache/druid/issues/5337","id":362761837,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mjc2MTgzNw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-03T01:36:16Z","updated_at":"2018-02-03T01:36:16Z","author_association":"CONTRIBUTOR","body":"Ok. This is a feature request rather than a bug. It looks good to me to support it. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/362761837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/362774670","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-362774670","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":362774670,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mjc3NDY3MA==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-03T03:29:32Z","updated_at":"2018-02-03T03:29:32Z","author_association":"CONTRIBUTOR","body":"I've updated the PR to add a new `RealtimeAppenderatorTuningConfig` class instead of reusing `RealtimeTuningConfig`. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/362774670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/362779894","html_url":"https://github.com/apache/druid/issues/5337#issuecomment-362779894","issue_url":"https://api.github.com/repos/apache/druid/issues/5337","id":362779894,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mjc3OTg5NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-03T04:49:27Z","updated_at":"2018-02-03T04:51:47Z","author_association":"CONTRIBUTOR","body":"Check this out:\r\n\r\n`__time = TIMESTAMP '2017-11-20 19:07:26.561'` plans to intervals `\"2017-11-20T19:07:26.000Z/2017-11-20T19:07:26.001Z\"`\r\n\r\nbut `__time >= TIMESTAMP '2017-11-20 19:07:26.561'` plans to `\"2017-11-20T19:07:26.561Z/146140482-04-24T15:36:27.903Z\"`\r\n\r\nSo, there is at least a bug here somewhere -- milliseconds are respected in one but not the other.\r\n\r\nThe exception applying `DruidQueryRule:WHERE_FILTER` also is a bug, rules shouldn't fail outright like that.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/362779894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/362783960","html_url":"https://github.com/apache/druid/pull/5339#issuecomment-362783960","issue_url":"https://api.github.com/repos/apache/druid/issues/5339","id":362783960,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mjc4Mzk2MA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-03T06:14:33Z","updated_at":"2018-02-03T06:14:33Z","author_association":"CONTRIBUTOR","body":"This gets complicated. Different query metrics implementations can control what unit they report in if i recall correctly.\r\n\r\nHow is such a case intended to be handled here? \r\n\r\nMore precisely, would a query metrics class override accomplish this better?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/362783960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/362952355","html_url":"https://github.com/apache/druid/issues/4838#issuecomment-362952355","issue_url":"https://api.github.com/repos/apache/druid/issues/4838","id":362952355,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mjk1MjM1NQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T00:11:30Z","updated_at":"2018-02-05T00:11:30Z","author_association":"CONTRIBUTOR","body":"Whoops, missed this one in prior release notes. Next one should probably include it and close out the issue.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/362952355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/362977715","html_url":"https://github.com/apache/druid/issues/5343#issuecomment-362977715","issue_url":"https://api.github.com/repos/apache/druid/issues/5343","id":362977715,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mjk3NzcxNQ==","user":{"login":"erankor","id":4777488,"node_id":"MDQ6VXNlcjQ3Nzc0ODg=","avatar_url":"https://avatars.githubusercontent.com/u/4777488?v=4","gravatar_id":"","url":"https://api.github.com/users/erankor","html_url":"https://github.com/erankor","followers_url":"https://api.github.com/users/erankor/followers","following_url":"https://api.github.com/users/erankor/following{/other_user}","gists_url":"https://api.github.com/users/erankor/gists{/gist_id}","starred_url":"https://api.github.com/users/erankor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erankor/subscriptions","organizations_url":"https://api.github.com/users/erankor/orgs","repos_url":"https://api.github.com/users/erankor/repos","events_url":"https://api.github.com/users/erankor/events{/privacy}","received_events_url":"https://api.github.com/users/erankor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T04:18:57Z","updated_at":"2018-02-05T04:18:57Z","author_association":"NONE","body":"Btw, I'm using druid-0.10.0","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/362977715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363064137","html_url":"https://github.com/apache/druid/pull/5333#issuecomment-363064137","issue_url":"https://api.github.com/repos/apache/druid/issues/5333","id":363064137,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzA2NDEzNw==","user":{"login":"treidco","id":800063,"node_id":"MDQ6VXNlcjgwMDA2Mw==","avatar_url":"https://avatars.githubusercontent.com/u/800063?v=4","gravatar_id":"","url":"https://api.github.com/users/treidco","html_url":"https://github.com/treidco","followers_url":"https://api.github.com/users/treidco/followers","following_url":"https://api.github.com/users/treidco/following{/other_user}","gists_url":"https://api.github.com/users/treidco/gists{/gist_id}","starred_url":"https://api.github.com/users/treidco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/treidco/subscriptions","organizations_url":"https://api.github.com/users/treidco/orgs","repos_url":"https://api.github.com/users/treidco/repos","events_url":"https://api.github.com/users/treidco/events{/privacy}","received_events_url":"https://api.github.com/users/treidco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T11:57:32Z","updated_at":"2018-02-05T11:57:32Z","author_association":"NONE","body":"Thanks for clarifying! I thought I was looking at the correct release/doc combination but I was mistaken!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363064137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363076119","html_url":"https://github.com/apache/druid/pull/5335#issuecomment-363076119","issue_url":"https://api.github.com/repos/apache/druid/issues/5335","id":363076119,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzA3NjExOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T12:53:22Z","updated_at":"2018-02-05T13:00:43Z","author_association":"MEMBER","body":"I tagged `Design Review` because I want more people to learn about the new logic of index merging via review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363076119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363078934","html_url":"https://github.com/apache/druid/pull/5335#issuecomment-363078934","issue_url":"https://api.github.com/repos/apache/druid/issues/5335","id":363078934,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzA3ODkzNA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T13:05:15Z","updated_at":"2018-02-05T13:05:15Z","author_association":"MEMBER","body":"Tagged `Bug` because before, without dimensions: `{\"index\":100}` and events with a string dimension which is empty: `{\"market\":\"\", \"index\":100}` were not coalesced, however it seems like it was wrong. Those events could be found in [`druid.sample.json`](https://github.com/druid-io/druid/blob/master/processing/src/test/resources/druid.sample.json). See changes in [`SchemalessTestFullTest`](https://github.com/druid-io/druid/pull/5335/files#diff-80cb1e2c8730a7e100dd7d50e2f57830) and [`SchemalessTestSimpleTest`](https://github.com/druid-io/druid/pull/5335/files#diff-571584283f75d09f84b81506c29252b3). ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363078934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363082047","html_url":"https://github.com/apache/druid/pull/5278#issuecomment-363082047","issue_url":"https://api.github.com/repos/apache/druid/issues/5278","id":363082047,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzA4MjA0Nw==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T13:19:08Z","updated_at":"2018-02-05T13:19:08Z","author_association":"MEMBER","body":"@leventov : do you have any more comments ? Can we merge this if there are no additional comments ? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363082047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363091589","html_url":"https://github.com/apache/druid/pull/5278#issuecomment-363091589","issue_url":"https://api.github.com/repos/apache/druid/issues/5278","id":363091589,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzA5MTU4OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T13:57:06Z","updated_at":"2018-02-05T13:57:06Z","author_association":"MEMBER","body":"@nishantmonu51 I was just going to continue review. Please don't repeat your comments every few days, I see them. If I don't answer it means that I'm reviewing or going to review, but don't want to leave noisy comments like the one that you are reading at the moment.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363091589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363150197","html_url":"https://github.com/apache/druid/pull/5335#issuecomment-363150197","issue_url":"https://api.github.com/repos/apache/druid/issues/5335","id":363150197,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE1MDE5Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T17:04:32Z","updated_at":"2018-02-05T17:04:32Z","author_association":"MEMBER","body":"This PR is ready for review. It's going to conflict heavily with #5278 so #5278 should be merged first, but review don't need to wait for that.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363150197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363157189","html_url":"https://github.com/apache/druid/issues/5346#issuecomment-363157189","issue_url":"https://api.github.com/repos/apache/druid/issues/5346","id":363157189,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE1NzE4OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T17:27:22Z","updated_at":"2018-02-05T17:27:22Z","author_association":"MEMBER","body":"It's a very small thing (goal was just to make one method `final`), I thought it could be a part of that PR, otherwise doesn't worth a separate issue IMO.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363157189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363158180","html_url":"https://github.com/apache/druid/issues/5346#issuecomment-363158180","issue_url":"https://api.github.com/repos/apache/druid/issues/5346","id":363158180,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE1ODE4MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T17:30:28Z","updated_at":"2018-02-05T17:30:28Z","author_association":"MEMBER","body":"I just checked and can say - it could be turned into an abstract class.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363158180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363161400","html_url":"https://github.com/apache/druid/issues/5337#issuecomment-363161400","issue_url":"https://api.github.com/repos/apache/druid/issues/5337","id":363161400,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE2MTQwMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T17:41:34Z","updated_at":"2018-02-05T17:41:34Z","author_association":"CONTRIBUTOR","body":"@gianm thanks for clarifying this issue. I didn't know that the Calcite timestamp type supports millisecond fraction. Good to know.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363161400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363173148","html_url":"https://github.com/apache/druid/pull/5280#issuecomment-363173148","issue_url":"https://api.github.com/repos/apache/druid/issues/5280","id":363173148,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE3MzE0OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T18:19:27Z","updated_at":"2018-02-05T18:19:27Z","author_association":"CONTRIBUTOR","body":"@gianm let me know if the explanation in https://github.com/druid-io/druid/pull/5280#issuecomment-362637858 sounds sensible and then I will try and finish up this PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363173148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363175493","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363175493","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363175493,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE3NTQ5Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T18:27:30Z","updated_at":"2018-02-05T18:27:30Z","author_association":"CONTRIBUTOR","body":":+1: for this PR.\r\n\r\nsome extra thoughts:\r\nIn newer versions of Druid code ... all lookup nodes check with coordinator at startup on what lookups they are supposed to load and lookup snapshots are not as important anymore. they were added originally so that historicals at startup know what lookups to load without waiting for coordinator to tell them later.\r\nonly major utility of snapshots at this point is for the corner case where historical process is starting but coordinator is down/non-responding and in that case historical falls back to locally persisted snapshot. however, I'm not sure if that is important enough to justify existence of lookup snapshots feature.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363175493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363176450","html_url":"https://github.com/apache/druid/issues/5347#issuecomment-363176450","issue_url":"https://api.github.com/repos/apache/druid/issues/5347","id":363176450,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE3NjQ1MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T18:30:34Z","updated_at":"2018-02-05T18:30:34Z","author_association":"CONTRIBUTOR","body":"Well, I think it would be great if it was easier to add features to the storage format, so it's a good area of discussion.\r\n\r\nA question: what do you mean by \"segment format\"? Like the structure of the segment itself (meta.smoosh, columns with `ColumnPartSerde` headers, etc)? Or the structure of individual columns?\r\n\r\nI would add one other requirement: long term backwards-compatibility towards written segments. It is really useful for new Druid versions to be able to read very old Druid segments (since it adds complexity and cost to ask users to periodically reindex all of their old data with a new segment format).\r\n\r\n> Currently there is a prohibitive barrier, the mark of this is that almost no improvements were done in segment format in the last few years.\r\n\r\nWhat do you think the most prohibitive barrier is?\r\n\r\n> New segment format features become \"incubating\" and they are enabled by one flag/property (just one for all features), and automatically \"promoted\" in the next druid version. It should be automatic, without requiring extra PRs.\r\n\r\nI am skeptical that a one-size-fits-all flag will work, since if we imagine a world where we are really doing a lot of experiments on column format, then inevitably some experiments will be more stable than others. So I am in favor of a way for users to opt in to certain features \"early\" and then later on, those features could become automatic. To me it makes sense for users to opt in to flags in their `IndexSpec` at indexing time (by specifying them by string name in a list, so we don't need special serde code for each flag). And then for those flags to be passed to the indexing code in one single object, like `Set<IndexFlag>`. I imagine this would only be on the _writing_ side; on the reading side the server should support any flag that its version of the code knows about. You should not have to \"enable\" anything to get a historical node to load a segment written with some new flag.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363176450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363178898","html_url":"https://github.com/apache/druid/pull/5278#issuecomment-363178898","issue_url":"https://api.github.com/repos/apache/druid/issues/5278","id":363178898,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE3ODg5OA==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T18:38:56Z","updated_at":"2018-02-05T18:38:56Z","author_association":"MEMBER","body":"@leventov: replied to your comments. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363178898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363180652","html_url":"https://github.com/apache/druid/issues/5347#issuecomment-363180652","issue_url":"https://api.github.com/repos/apache/druid/issues/5347","id":363180652,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE4MDY1Mg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T18:44:01Z","updated_at":"2018-02-05T18:44:01Z","author_association":"MEMBER","body":"> A question: what do you mean by \"segment format\"? Like the structure of the segment itself (meta.smoosh, columns with ColumnPartSerde headers, etc)? Or the structure of individual columns?\r\n\r\nI don't have a clear picture. If we are talking about about what should be changed as the result of this discussion, it might be:\r\n - On-disk data formats, but probably only around writing versions and/or \"serializer codes\" somewhere in headers/metadata. Improvements to formats themselves (like new dictionary format) is not subject of this discussion, but it should be enabled (or eased) by the changes about which we are talking about here.\r\n - Reorganization of source code. Logic, refactoring, naming, packages, etc.\r\n - Properties/configurations, like \"enable incubating segment format features\" suggested above. Btw \"incubating\" is not a good term for it, but whatever.\r\n - Documentation updates. Both user documentation and developer docs (how to add new feature).\r\n\r\n> I would add one other requirement: long term backwards-compatibility towards written segments. It is really useful for new Druid versions to be able to read very old Druid segments (since it adds complexity and cost to ask users to periodically reindex all of their old data with a new segment format).\r\n\r\nAlso to enable many iterations of the same format and not making code tree a complete mess, some structuring and strict naming conventions might need to be applied. E. g. a separate package for each logical thing (like int column, double column, etc.)\r\n\r\n> What do you think the most prohibitive barrier is?\r\n\r\nTo begin with, there is no docs or precise instruction, what I should do, if I want to add a new incompatible version of some part of segment format, e. g. indexed column. Everybody is supposed to figure it out himself (that's very hard, btw.) Adding custom \"enabling options\" for features, also. That are just first two things that came into my mind.\r\n\r\n> I am skeptical that a one-size-fits-all flag will work, since if we imagine a world where we are really doing a lot of experiments on column format, then inevitably some experiments will be more stable than others.\r\n\r\nIf a feature could be beneficial in some cases and not in other, of cause there should be a specific flag. But there are a lot (I think overhelming majority) of segment features that are undoubtful improvements. But we still need to put them under a flag (temprorarily) to enable rollbacks. This flag could \"always exist\" and be standartized.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363180652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363191013","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363191013","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363191013,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE5MTAxMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T19:16:22Z","updated_at":"2018-02-05T20:54:01Z","author_association":"CONTRIBUTOR","body":"I ran some benchmarks on a Druid column format based on JavaFastPFOR today and got the following sizes and timings. The dataset was ints with randomness uniformly distributed over some number of bits, and the other bits left as zero (emulating string columns with varying cardinalities). I did three scans: at 10%, 95%, and 100% selectivity.\r\n\r\nSome notes:\r\n\r\n1. \"uncompressed\" means VSizeColumnarInts (byte packing). \"compressed\" means byte packing + LZ4 with blocksize of 64KB (however many byte-packed ints fit in). \"fastPfor\" means JavaFastPFOR's FastPFOR impl with blocks of 16384 ints. \"binaryPacked\" means JavaFastPFOR's BinaryPacked impl (bit-packing, I assume) also with blocks of 16384 ints.\r\n2. The FastPFOR implementations both have unnecessary copies on the decompression path: the library accepts compressed data as `int[]` but we really have `ByteBuffer`. So modifying the library to accept `ByteBuffer` should improve performance somewhat.\r\n3. LZ4 was not able to compress this data. It got a little larger, indicating LZ4 probably just stored the data as-is, with some header indicating such. This wasn't surprising for random-bits settings close to a whole byte, since in that case it would have been trying to compress whole bytes of random bits. But I was surprised that it couldn't compress well with, for example, 11 random bits. On real world data, LZ4 may do somewhat better than this, since many columns are power-law distributed rather than uniformly distributed, and that might provide more opportunity for the algorithm to work with.\r\n4. FastPFOR did a good job compressing, especially on numbers of bits far from a whole byte. This makes sense since it does bit packing rather than byte packing. It always got the best data size.\r\n5. FastPFOR and BinaryPacking beat the other schemes on scan rate of the whole dataset, by about 10–30%. On the 95% selectivity scan it was about even (seemingly mostly because of the added overhead of walking the filter bitset). On the 10% selectivity scan they performed the worst, about 70% slower. This is possibly because their work is amortized over fewer rows (the implementations must unpack an entire block of 16384 ints to get even one, whereas other implementations may need to LZ4-decompress an entire block, but only need to byte-unpack the specific rows being read). I would expect this all to improve somewhat if the unnecessary copy is eliminated.\r\n6. Both FastPFOR and BinaryPacking could operate effectively in smaller blocks than the 16384-int blocks we used, potentially improving performance when the filter is more selective. FastPFOR's docs say the blocksize should be greater than 1024. BinaryPacking says 32 is OK.\r\n\r\nFollow ups needed:\r\n\r\n- Test with real world data, or at least distributions other than uniform\r\n- Remove the unnecessary copy\r\n\r\n```\r\nBenchmark                                     (bits)  (filteredRowCount)   (rows)  Mode  Cnt      Score      Error  Units\r\nCompressedColumnarIntsBenchmark.compressed         7              300000  3000000  avgt   20   2943.665 ±   68.762  us/op\r\nCompressedColumnarIntsBenchmark.compressed         7             2850000  3000000  avgt   20  20766.045 ±  501.196  us/op\r\nCompressedColumnarIntsBenchmark.compressed         7             3000000  3000000  avgt   20  15801.290 ±  349.125  us/op\r\nCompressedColumnarIntsBenchmark.compressed        11              300000  3000000  avgt   20   3321.190 ±   74.982  us/op\r\nCompressedColumnarIntsBenchmark.compressed        11             2850000  3000000  avgt   20  20621.893 ±  607.840  us/op\r\nCompressedColumnarIntsBenchmark.compressed        11             3000000  3000000  avgt   20  14974.348 ±  450.959  us/op\r\nCompressedColumnarIntsBenchmark.compressed        15              300000  3000000  avgt   20   3021.729 ±  103.790  us/op\r\nCompressedColumnarIntsBenchmark.compressed        15             2850000  3000000  avgt   20  20802.272 ± 1672.917  us/op\r\nCompressedColumnarIntsBenchmark.compressed        15             3000000  3000000  avgt   20  14651.987 ±  378.612  us/op\r\nCompressedColumnarIntsBenchmark.compressed        21              300000  3000000  avgt   20   3706.261 ±  119.774  us/op\r\nCompressedColumnarIntsBenchmark.compressed        21             2850000  3000000  avgt   20  23446.937 ±  716.861  us/op\r\nCompressedColumnarIntsBenchmark.compressed        21             3000000  3000000  avgt   20  20023.993 ±  692.204  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor           7              300000  3000000  avgt   20   4882.731 ±  163.518  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor           7             2850000  3000000  avgt   20  21581.873 ±  646.544  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor           7             3000000  3000000  avgt   20  13632.693 ±  546.829  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          11              300000  3000000  avgt   20   5583.134 ±  162.427  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          11             2850000  3000000  avgt   20  21851.592 ±  861.589  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          11             3000000  3000000  avgt   20  14563.488 ±  586.785  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          15              300000  3000000  avgt   20   6340.217 ±  257.035  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          15             2850000  3000000  avgt   20  23250.500 ± 1115.758  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          15             3000000  3000000  avgt   20  14999.228 ± 1055.155  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          21              300000  3000000  avgt   20   7450.851 ±  122.857  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          21             2850000  3000000  avgt   20  24930.446 ±  621.486  us/op\r\nCompressedColumnarIntsBenchmark.fastPfor          21             3000000  3000000  avgt   20  16123.002 ±  481.372  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked       7              300000  3000000  avgt   20   5151.170 ±  145.566  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked       7             2850000  3000000  avgt   20  21944.219 ±  700.875  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked       7             3000000  3000000  avgt   20  13916.071 ±  222.431  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      11              300000  3000000  avgt   20   5742.023 ±  176.652  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      11             2850000  3000000  avgt   20  22311.412 ±  701.435  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      11             3000000  3000000  avgt   20  13973.136 ±  491.661  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      15              300000  3000000  avgt   20   6460.735 ±  138.532  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      15             2850000  3000000  avgt   20  23771.121 ±  619.867  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      15             3000000  3000000  avgt   20  15358.863 ±  524.427  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      21              300000  3000000  avgt   20   7229.078 ±  237.369  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      21             2850000  3000000  avgt   20  23778.470 ±  755.032  us/op\r\nCompressedColumnarIntsBenchmark.binaryPacked      21             3000000  3000000  avgt   20  15788.168 ±  393.521  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed       7              300000  3000000  avgt   20   2837.838 ±   98.147  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed       7             2850000  3000000  avgt   20  22704.229 ±  885.314  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed       7             3000000  3000000  avgt   20  17371.661 ±  421.292  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      11              300000  3000000  avgt   20   2889.088 ±   79.596  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      11             2850000  3000000  avgt   20  23247.499 ±  606.357  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      11             3000000  3000000  avgt   20  17543.058 ±  314.034  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      15              300000  3000000  avgt   20   2845.691 ±   52.430  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      15             2850000  3000000  avgt   20  22749.856 ±  707.239  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      15             3000000  3000000  avgt   20  17000.533 ±  673.675  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      21              300000  3000000  avgt   20   2951.205 ±  102.273  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      21             2850000  3000000  avgt   20  22556.333 ± 1121.255  us/op\r\nCompressedColumnarIntsBenchmark.uncompressed      21             3000000  3000000  avgt   20  16884.971 ±  357.128  us/op\r\n\r\n7 bits:\r\ncompressed size = 3012020\r\nuncompressed size = 3000009\r\nfastPfor size = 2651425\r\nbinaryPacked size = 2719513\r\n\r\n11 bits:\r\ncompressed size = 6011812\r\nuncompressed size = 6000008\r\nfastPfor size = 4151509\r\nbinaryPacked size = 4219513\r\n\r\n17 bits:\r\ncompressed size = 6024346\r\nuncompressed size = 6000008\r\nfastPfor size = 5651525\r\nbinaryPacked size = 5719513\r\n\r\n21 bits:\r\ncompressed size = 9036750\r\nuncompressed size = 9000007\r\nfastPfor size = 7901473\r\nbinaryPacked size = 7969513\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363191013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363195481","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363195481","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363195481,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE5NTQ4MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T19:32:16Z","updated_at":"2018-02-05T19:32:41Z","author_association":"CONTRIBUTOR","body":"/cc @lemire (as fyi; not that I am demanding anything of you 😄)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363195481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363196731","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363196731","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363196731,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzE5NjczMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T19:36:53Z","updated_at":"2018-02-05T19:36:53Z","author_association":"CONTRIBUTOR","body":"> only major utility of snapshots at this point is for the corner case where historical process is starting but coordinator is down/non-responding and in that case historical falls back to locally persisted snapshot. however, I'm not sure if that is important enough to justify existence of lookup snapshots feature.\r\n\r\nI think it is still important. I have a couple of customers where lookups are critical and in that case, coordinator downtime is not a good excuse for them not being available. (Especially since sometimes rolling upgrade documentation says that all coordinators must be taken down at once)\r\n\r\nIn fact, to help them out more we may also be looking to add more aggressive on disk caching features, so a server can restore all of its lookup data on boot (not just configuration) without access to any external services.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363196731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363200077","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363200077","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363200077,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzIwMDA3Nw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T19:48:03Z","updated_at":"2018-02-05T19:48:03Z","author_association":"CONTRIBUTOR","body":"@gianm thanks for clarifying the usefulness of snapshot of configuration, let us keep it then.\r\n\r\n> In fact, to help them out more we may also be looking to add more aggressive on disk caching features, so a server can restore all of its lookup data on boot (not just configuration) without access to any external services.\r\n\r\nWe do that with some of our lookups which are custom extensions and use disk backed caches. In fact, to support improved cleanup of persisted data, I had added https://github.com/druid-io/druid/pull/5287 .\r\n\r\nglad to know that lookups are getting more adoption :) ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363200077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363201679","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363201679","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363201679,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzIwMTY3OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T19:53:36Z","updated_at":"2018-02-05T19:53:36Z","author_association":"CONTRIBUTOR","body":"Btw we already have implemented a better long (int64) compression about a year ago, although it is still off by default. It uses fixed length bit packing so it supports relatively random access. Maybe it's time to turn it on by default and disable LZ4 by default.\r\n\r\nSome sizings and timings are in https://imply.io/post/2016/12/07/compressing-longs.html.\r\n\r\n(Here, we did test more distributions, and found that for uniform distributions, bit packing of deltas compresses smaller than lz4; but for power law distributions lz4 is smaller. In all cases, bit packing is fastest, since the old implementation of int64 columns didn't even do byte packing).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363201679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363202587","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363202587","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363202587,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzIwMjU4Nw==","user":{"login":"lemire","id":391987,"node_id":"MDQ6VXNlcjM5MTk4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/391987?v=4","gravatar_id":"","url":"https://api.github.com/users/lemire","html_url":"https://github.com/lemire","followers_url":"https://api.github.com/users/lemire/followers","following_url":"https://api.github.com/users/lemire/following{/other_user}","gists_url":"https://api.github.com/users/lemire/gists{/gist_id}","starred_url":"https://api.github.com/users/lemire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemire/subscriptions","organizations_url":"https://api.github.com/users/lemire/orgs","repos_url":"https://api.github.com/users/lemire/repos","events_url":"https://api.github.com/users/lemire/events{/privacy}","received_events_url":"https://api.github.com/users/lemire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T19:56:39Z","updated_at":"2018-02-05T19:56:39Z","author_association":"NONE","body":"@gianm \r\n\r\nI'm available and interested in helping out. \r\n\r\nNote: This could end up generating an interesting paper if you guys care about documenting the work. I'd love to help make this happen.\r\n\r\nemail: lemire@gmail.com ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363202587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363209521","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363209521","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363209521,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzIwOTUyMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T20:22:08Z","updated_at":"2018-02-05T20:22:57Z","author_association":"CONTRIBUTOR","body":"@lemire Thanks for the offer. At this point I have one main question: do you know if your JavaFastPFOR library is still the best freely-licensed, small-ish-integer compression library for Java that you are aware of? (I'm looking to compress the offset section of string columns; in Druid we expect these to be positive ints with the max value being the cardinality of the column -- which is never more than a few million and is often less.)\r\n\r\nAnother note: currently Druid can access values in int columns randomly, since we pack into a fixed number of bytes per value (whatever is needed based on the max value for the overall column). Random access isn't supported by JavaFastPFOR, and I suspect that contributes to its relative slowness on the 10% selectivity test. I would like to run some tests with fixed-length bit packing (which could support random access, or at least much smaller blocks) to see how it fares on various selectivities vs. FastPFOR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363209521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363217238","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363217238","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363217238,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzIxNzIzOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T20:51:18Z","updated_at":"2018-02-05T20:51:18Z","author_association":"CONTRIBUTOR","body":"I edited the original comment to include BinaryPacking too (the paper says it's fixed-width bit packing). They look similar to FastPFOR at the current block sizes I'm testing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363217238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363231696","html_url":"https://github.com/apache/druid/pull/5339#issuecomment-363231696","issue_url":"https://api.github.com/repos/apache/druid/issues/5339","id":363231696,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzIzMTY5Ng==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-05T21:44:38Z","updated_at":"2018-02-05T22:48:11Z","author_association":"CONTRIBUTOR","body":"@drcrallen Thanks for pointing out different implementations can choose different units.\r\nOne of the approach I can think of handling it is to have  `getType()`(returns`timer` in this case) and `getUnit()` (returns `TimeUnit` in this case)  methods in the `Event` interface. Emitter's can use this information to do the right adjustments.\r\n\r\n```\r\npublic interface Event\r\n{\r\n  Map<String, Object> toMap();\r\n\r\n  String getFeed();\r\n\r\n  DateTime getCreatedTime();\r\n\r\n  boolean isSafeToBuffer();\r\n\r\n// new methods to support Type and Unit\r\nTimeUnit getTimeUnit();\r\n Type getType();\r\n\r\npublic enum{\r\nCOUNTER, TIMER\r\n}\r\n}\r\n```\r\n\r\nType is an enum {`timer`, `count`}. For the count types getTimeUnit() will return null.\r\n\r\nOr better,  if counter metrics are never going to have any unit then may be we can replace `getType()` with `isTimer()` method, which returns boolean.\r\n\r\nQueryMetrics changes in `emit` method\r\n```\r\nemitter.emit(builder.build(metric.getKey(), metric.getValue(), true ,TimeUnit.MILLISECONDS));\r\n```\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363231696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363263276","html_url":"https://github.com/apache/druid/pull/5264#issuecomment-363263276","issue_url":"https://api.github.com/repos/apache/druid/issues/5264","id":363263276,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI2MzI3Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T00:02:27Z","updated_at":"2018-02-06T00:02:27Z","author_association":"CONTRIBUTOR","body":"Sorry, I was being really dumb. I didn't realize the endpoint already existed through a different code path.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363263276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363271388","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363271388","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363271388,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI3MTM4OA==","user":{"login":"lemire","id":391987,"node_id":"MDQ6VXNlcjM5MTk4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/391987?v=4","gravatar_id":"","url":"https://api.github.com/users/lemire","html_url":"https://github.com/lemire","followers_url":"https://api.github.com/users/lemire/followers","following_url":"https://api.github.com/users/lemire/following{/other_user}","gists_url":"https://api.github.com/users/lemire/gists{/gist_id}","starred_url":"https://api.github.com/users/lemire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemire/subscriptions","organizations_url":"https://api.github.com/users/lemire/orgs","repos_url":"https://api.github.com/users/lemire/repos","events_url":"https://api.github.com/users/lemire/events{/privacy}","received_events_url":"https://api.github.com/users/lemire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T00:45:18Z","updated_at":"2018-02-06T00:45:18Z","author_association":"NONE","body":"> do you know if your JavaFastPFOR library is still the best freely-licensed, small-ish-integer compression library for Java that you are aware of?\r\n\r\nI'm not aware of anything else that is as good... ;-) \r\n\r\nBut I did not join the conversation to promote JavaFastPFOR specifically. We wrote JavaFastPFOR so that people could have access to a collection of tricks that work well. But what the Parquet folks did was to grab whatever code they needed from JavaFastPFOR and adapt it... and I am totally fine with that! \r\n\r\n> Another note: currently Druid can access values in int columns randomly, since we pack into a fixed number of bytes per value (whatever is needed based on the max value for the overall column). Random access isn't supported by JavaFastPFOR, and I suspect that contributes to its relative slowness on the 10% selectivity test. I would like to run some tests with fixed-length bit packing (which could support random access, or at least much smaller blocks) to see how it fares on various selectivities vs. FastPFOR.\r\n\r\nAh. Ah.\r\n\r\nIt is true that we have not implemented random access in JavaFastPFOR, but we did in Upscaledb (also open source, but not in Java):\r\n\r\nDaniel Lemire, Christoph Rupp, Upscaledb: Efficient Integer-Key Compression in a Key-Value Store using SIMD Instructions,  Information Systems Volume 66, June 2017, Pages 13-23 https://lemire.me/en/publication/arxiv1611.05428/\r\n\r\nYou'll say: \"Wait Daniel! We don't care about SIMD Instruction\". And I'll say: look again. In that paper, the best performance was with SIMD-based binary packing, but we got very good speed with straight binary packing which ought to be quite fast (even in Java). We have C++ code there that does things like fast select...\r\n\r\nhttps://github.com/lemire/SIMDCompressionAndIntersection/blob/5649b9f39cd88c7b05b39fa29478cca16e14e8c8/src/benchsearch.cpp\r\n\r\nDoing the equivalent in Java is not hard. \r\n\r\nBy \"not hard\",  I mean that if there is a potential market for it, I'll volunteer to contribute code. And be happy to do so. (And that means, producing open source stuff, naturally.)\r\n\r\n> I edited the original comment to include BinaryPacking too (the paper says it's fixed-width bit packing). They look similar to FastPFOR at the current block sizes I'm testing.\r\n\r\nI favor binary packing given a choice because it is really fun to engineer. Meaning that you can easily write special-purpose functions that act directly on the compressed data without uncompressing it. See above paper.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363271388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363273026","html_url":"https://github.com/apache/druid/issues/4080#issuecomment-363273026","issue_url":"https://api.github.com/repos/apache/druid/issues/4080","id":363273026,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI3MzAyNg==","user":{"login":"lemire","id":391987,"node_id":"MDQ6VXNlcjM5MTk4Nw==","avatar_url":"https://avatars.githubusercontent.com/u/391987?v=4","gravatar_id":"","url":"https://api.github.com/users/lemire","html_url":"https://github.com/lemire","followers_url":"https://api.github.com/users/lemire/followers","following_url":"https://api.github.com/users/lemire/following{/other_user}","gists_url":"https://api.github.com/users/lemire/gists{/gist_id}","starred_url":"https://api.github.com/users/lemire/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemire/subscriptions","organizations_url":"https://api.github.com/users/lemire/orgs","repos_url":"https://api.github.com/users/lemire/repos","events_url":"https://api.github.com/users/lemire/events{/privacy}","received_events_url":"https://api.github.com/users/lemire/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T00:54:04Z","updated_at":"2018-02-06T00:54:04Z","author_association":"NONE","body":"In case you don't know about Upscaledb: https://upscaledb.com\r\n\r\ncc @cruppstahl\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363273026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363274934","html_url":"https://github.com/apache/druid/pull/5264#issuecomment-363274934","issue_url":"https://api.github.com/repos/apache/druid/issues/5264","id":363274934,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI3NDkzNA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T01:04:23Z","updated_at":"2018-02-06T01:04:23Z","author_association":"CONTRIBUTOR","body":"@gianm oh, sorry. I finally got your point. Fixed docs according to the changed APIs.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363274934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363280428","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363280428","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363280428,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI4MDQyOA==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T01:32:43Z","updated_at":"2018-02-06T01:32:43Z","author_association":"CONTRIBUTOR","body":"@jihoonson Not sure why this particular build failed, it seems unrelated","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363280428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363281405","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363281405","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363281405,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI4MTQwNQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T01:38:06Z","updated_at":"2018-02-06T01:38:06Z","author_association":"CONTRIBUTOR","body":"@kevinconaway just restarted the failed job.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363281405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363284261","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363284261","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363284261,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI4NDI2MQ==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T01:53:51Z","updated_at":"2018-02-06T01:53:51Z","author_association":"CONTRIBUTOR","body":"@jihoonson Is this particular test known to be flaky? \r\n\r\nAre you able to get the test output off the build nodes?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363284261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363288617","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363288617","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363288617,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzI4ODYxNw==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T02:20:05Z","updated_at":"2018-02-06T02:20:05Z","author_association":"CONTRIBUTOR","body":"Looks like it failed [here](https://travis-ci.org/druid-io/druid/jobs/336714990) and [here](https://travis-ci.org/druid-io/druid/jobs/336568052) too","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363288617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363310539","html_url":"https://github.com/apache/druid/pull/5303#issuecomment-363310539","issue_url":"https://api.github.com/repos/apache/druid/issues/5303","id":363310539,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzMxMDUzOQ==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T04:52:54Z","updated_at":"2018-02-06T04:52:54Z","author_association":"MEMBER","body":"@jihoonson Any progress with this PR? Many days passed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363310539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363312976","html_url":"https://github.com/apache/druid/issues/2373#issuecomment-363312976","issue_url":"https://api.github.com/repos/apache/druid/issues/2373","id":363312976,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzMxMjk3Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T05:11:56Z","updated_at":"2018-02-26T18:07:12Z","author_association":"CONTRIBUTOR","body":"Recently the same task has been failing frequently.\r\n\r\n- https://travis-ci.org/druid-io/druid/jobs/336714990\r\n- https://travis-ci.org/druid-io/druid/jobs/337813434","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363312976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363313018","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363313018","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363313018,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzMxMzAxOA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T05:12:16Z","updated_at":"2018-02-06T17:44:09Z","author_association":"CONTRIBUTOR","body":"@kevinconaway yeah, looks like flaky. The failed task passes in my mac. \r\nReopened https://github.com/druid-io/druid/issues/2373","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363313018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363317493","html_url":"https://github.com/apache/druid/pull/5330#issuecomment-363317493","issue_url":"https://api.github.com/repos/apache/druid/issues/5330","id":363317493,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzMxNzQ5Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T05:45:20Z","updated_at":"2018-02-06T05:45:20Z","author_association":"CONTRIBUTOR","body":"Removed the unused method and pushed again.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363317493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363317662","html_url":"https://github.com/apache/druid/pull/5321#issuecomment-363317662","issue_url":"https://api.github.com/repos/apache/druid/issues/5321","id":363317662,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzMxNzY2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T05:46:29Z","updated_at":"2018-02-06T05:46:29Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 it could, although, it's easier to set a property if it works to do so.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363317662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363421273","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363421273","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363421273,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQyMTI3Mw==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T13:26:03Z","updated_at":"2018-02-06T13:26:03Z","author_association":"CONTRIBUTOR","body":"OK thanks.  What are the next steps for this PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363421273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363464175","html_url":"https://github.com/apache/druid/pull/5352#issuecomment-363464175","issue_url":"https://api.github.com/repos/apache/druid/issues/5352","id":363464175,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQ2NDE3NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T15:47:20Z","updated_at":"2018-02-06T15:47:20Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 added comments; thanks for review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363464175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363505274","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363505274","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363505274,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUwNTI3NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T17:45:27Z","updated_at":"2018-02-06T17:45:27Z","author_association":"CONTRIBUTOR","body":"I think it's ready for merging. @himanshug do you have further comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363505274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363506196","html_url":"https://github.com/apache/druid/pull/5264#issuecomment-363506196","issue_url":"https://api.github.com/repos/apache/druid/issues/5264","id":363506196,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUwNjE5Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T17:48:00Z","updated_at":"2018-02-06T17:48:00Z","author_association":"CONTRIBUTOR","body":"@gianm thanks. Fixed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363506196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363512996","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363512996","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363512996,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUxMjk5Ng==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:09:55Z","updated_at":"2018-02-06T18:09:55Z","author_association":"CONTRIBUTOR","body":"@jihoonson I'm sorry but I haven't really looked at the patch. Given that it is a new task now that can be tested independently in prod and wouldn't impact existing users. I'm fine with your approval on the PR. Feel free to merge.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363512996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363513716","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363513716","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363513716,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUxMzcxNg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:12:21Z","updated_at":"2018-02-06T18:12:21Z","author_association":"CONTRIBUTOR","body":"@himanshug thanks. I'll merge shortly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363513716/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363514056","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363514056","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363514056,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUxNDA1Ng==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:13:32Z","updated_at":"2018-02-06T18:13:32Z","author_association":"CONTRIBUTOR","body":"@gianm while thinking more about it, Druid processes should have different snapshotDirectory configured so that there is never an actual conflict ..as two processes might have different lookup configuration and you wouldn't want one to override another.\r\nfor peon processes, I think , snapshotDirectory should be some place within their task specific directories.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363514056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363515111","html_url":"https://github.com/apache/druid/pull/5339#issuecomment-363515111","issue_url":"https://api.github.com/repos/apache/druid/issues/5339","id":363515111,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUxNTExMQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:16:56Z","updated_at":"2018-02-06T18:16:56Z","author_association":"CONTRIBUTOR","body":"Thanks @akashdw , changing the Event interface seems odd since you have a lot of methods which aren't applicable to all events. Specifically, a time unit is not applicable to many event types.\r\n\r\nAs such, I'm curious if a `getType` functionality can be accomplished by class. For example, if there is a `TimerEvent` class which can be built off of a \"base\" event (composition please), and has the extra methods needed that are applicable to only timers. Then any emitter which cares about `TimerEvent` special handling can do so, but if they don't care then just treating the `TimerEvent` as an `Event` retains prior behavior without any need for extensions to update.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363515111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363525568","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363525568","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363525568,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUyNTU2OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:51:02Z","updated_at":"2018-02-06T18:51:02Z","author_association":"CONTRIBUTOR","body":"@himanshug,\r\n\r\n> for peon processes, I think , snapshotDirectory should be some place within their task specific directories.\r\n\r\nBut this would defeat the purpose of the snapshot directory, since it means peons cannot start up properly if the coordinator is unavailable.\r\n\r\nWhat makes the lookup configuration different between different nodes? Is it just the tier? If so- maybe we should have one machine-wide lookup snapshot per tier?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363525568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363533576","html_url":"https://github.com/apache/druid/pull/5261#issuecomment-363533576","issue_url":"https://api.github.com/repos/apache/druid/issues/5261","id":363533576,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUzMzU3Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T19:17:02Z","updated_at":"2018-02-06T19:17:02Z","author_association":"CONTRIBUTOR","body":"@kevinconaway raised #5355. Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363533576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363539147","html_url":"https://github.com/apache/druid/pull/5297#issuecomment-363539147","issue_url":"https://api.github.com/repos/apache/druid/issues/5297","id":363539147,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUzOTE0Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T19:34:55Z","updated_at":"2018-02-06T19:34:55Z","author_association":"CONTRIBUTOR","body":"Merged recent changes from master.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363539147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363550857","html_url":"https://github.com/apache/druid/pull/5280#issuecomment-363550857","issue_url":"https://api.github.com/repos/apache/druid/issues/5280","id":363550857,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU1MDg1Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T20:14:49Z","updated_at":"2018-02-06T20:14:49Z","author_association":"CONTRIBUTOR","body":"@himanshug this approach does sound sensible. If you don't do the optimization to avoid materialization when the  user just asks for a grand total, I encourage you to at least build the feature in such a way that it could be put in later without too much refactoring. (I think it would be common, for example getting a timeseries with a grand total)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363550857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363563722","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363563722","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363563722,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU2MzcyMg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T21:03:47Z","updated_at":"2018-02-06T21:03:47Z","author_association":"CONTRIBUTOR","body":"@gianm yes , they can be different for different lookup tier and \"technically\", different peons can have different lookup tier (e.g. overriding druid properties for peon via task json). \r\n\r\nso we either would eventually need to force all peons to be in same lookup tier, this is probably alright as I haven't seen any one exploiting the system to have different lookup tier for different peons or else each of them need their own snapshot directory.\r\n\r\nthird option of course is to leave things in current state and wait for users hitting specific limitations and then evolve things based on that feedback :)\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363563722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363566427","html_url":"https://github.com/apache/druid/pull/5355#issuecomment-363566427","issue_url":"https://api.github.com/repos/apache/druid/issues/5355","id":363566427,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU2NjQyNw==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T21:13:45Z","updated_at":"2018-02-06T21:13:45Z","author_association":"CONTRIBUTOR","body":"LGTM, thanks for adding this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363566427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363568704","html_url":"https://github.com/apache/druid/pull/5280#issuecomment-363568704","issue_url":"https://api.github.com/repos/apache/druid/issues/5280","id":363568704,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU2ODcwNA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T21:22:04Z","updated_at":"2018-02-06T21:22:04Z","author_association":"CONTRIBUTOR","body":"@gianm I think patch is structured to allow optimizing that use case by checking that case in GroupByStrategyV2.processSubtotalsSpec(..) and doing something else instead of materializing the result-set inside the BufferGrouper.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363568704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363590580","html_url":"https://github.com/apache/druid/pull/5344#issuecomment-363590580","issue_url":"https://api.github.com/repos/apache/druid/issues/5344","id":363590580,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU5MDU4MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T22:43:00Z","updated_at":"2018-02-06T22:43:00Z","author_association":"CONTRIBUTOR","body":"@himanshug raised a follow up with separate files for each lookup tier: https://github.com/druid-io/druid/pull/5358","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363590580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363609042","html_url":"https://github.com/apache/druid/pull/5358#issuecomment-363609042","issue_url":"https://api.github.com/repos/apache/druid/issues/5358","id":363609042,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYwOTA0Mg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T00:04:37Z","updated_at":"2018-02-07T00:04:37Z","author_association":"CONTRIBUTOR","body":"thanks, this is great.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363609042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363614216","html_url":"https://github.com/apache/druid/pull/5276#issuecomment-363614216","issue_url":"https://api.github.com/repos/apache/druid/issues/5276","id":363614216,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYxNDIxNg==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T00:32:10Z","updated_at":"2018-02-07T00:32:10Z","author_association":"CONTRIBUTOR","body":"@vvc11 thanks for contributing! Can you sign the CLA at http://druid.io/community/cla.html?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363614216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363619063","html_url":"https://github.com/apache/druid/pull/5221#issuecomment-363619063","issue_url":"https://api.github.com/repos/apache/druid/issues/5221","id":363619063,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYxOTA2Mw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T00:58:17Z","updated_at":"2018-02-07T00:58:17Z","author_association":"CONTRIBUTOR","body":"@leventov Do you have additional comments on this?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363619063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363626123","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363626123","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363626123,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYyNjEyMw==","user":{"login":"niketh","id":626548,"node_id":"MDQ6VXNlcjYyNjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/626548?v=4","gravatar_id":"","url":"https://api.github.com/users/niketh","html_url":"https://github.com/niketh","followers_url":"https://api.github.com/users/niketh/followers","following_url":"https://api.github.com/users/niketh/following{/other_user}","gists_url":"https://api.github.com/users/niketh/gists{/gist_id}","starred_url":"https://api.github.com/users/niketh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketh/subscriptions","organizations_url":"https://api.github.com/users/niketh/orgs","repos_url":"https://api.github.com/users/niketh/repos","events_url":"https://api.github.com/users/niketh/events{/privacy}","received_events_url":"https://api.github.com/users/niketh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T01:36:38Z","updated_at":"2018-02-07T15:32:13Z","author_association":"CONTRIBUTOR","body":"We are facing the same issue, had an outage as a lot of the historicals started spinning at 100% CPU utilization and the queries couldn't return. A lot of threads are stuck here\r\n```\r\nat com.metamx.emitter.core.HttpPostEmitter.emitAndReturnBatch(HttpPostEmitter.java:244)\r\n\tat com.metamx.emitter.core.HttpPostEmitter.emit(HttpPostEmitter.java:214)\r\n\tat com.metamx.emitter.service.ServiceEmitter.emit(ServiceEmitter.java:72)\r\n\tat com.metamx.emitter.service.ServiceEmitter.emit(ServiceEmitter.java:77)\r\n\tat io.druid.query.DefaultQueryMetrics.emit(DefaultQueryMetrics.java:290)\r\n\tat io.druid.query.MetricsEmittingQueryRunner$1.after(MetricsEmittingQueryRunner.java:120)\r\n\tat io.druid.java.util.common.guava.WrappingSequence.accumulate(WrappingSequence.java:66)\r\n\tat io.druid.java.util.common.guava.LazySequence.accumulate(LazySequence.java:40)\r\n\tat io.druid.java.util.common.guava.WrappingSequence$1.get(WrappingSequence.java:50)\r\n\tat io.druid.java.util.common.guava.SequenceWrapper.wrap(SequenceWrapper.java:55)\r\n\tat io.druid.java.util.common.guava.WrappingSequence.accumulate(WrappingSequence.java:45)\r\n\tat io.druid.query.spec.SpecificSegmentQueryRunner$2.accumulate(SpecificSegmentQueryRunner.java:86)\r\n\tat io.druid.java.util.common.guava.WrappingSequence$1.get(WrappingSequence.java:50)\r\n\tat io.druid.query.spec.SpecificSegmentQueryRunner.doNamed(SpecificSegmentQueryRunner.java:172)\r\n\tat io.druid.query.spec.SpecificSegmentQueryRunner.access$200(SpecificSegmentQueryRunner.java:45)\r\n\tat io.druid.query.spec.SpecificSegmentQueryRunner$3.wrap(SpecificSegmentQueryRunner.java:152)\r\n\tat io.druid.java.util.common.guava.WrappingSequence.accumulate(WrappingSequence.java:45)\r\n\tat io.druid.java.util.common.guava.WrappingSequence$1.get(WrappingSequence.java:50)\r\n\tat io.druid.query.CPUTimeMetricQueryRunner$1.wrap(CPUTimeMetricQueryRunner.java:74)\r\n\tat io.druid.java.util.common.guava.WrappingSequence.accumulate(WrappingSequence.java:45)\r\n\tat io.druid.java.util.common.guava.Sequences.toList(Sequences.java:150)\r\n\tat io.druid.query.ChainedExecutionQueryRunner$1$1$1.call(ChainedExecutionQueryRunner.java:130)\r\n\tat io.druid.query.ChainedExecutionQueryRunner$1$1$1.call(ChainedExecutionQueryRunner.java:120)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat io.druid.query.PrioritizedListenableFutureTask.run(PrioritizedExecutorService.java:271)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363626123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363637564","html_url":"https://github.com/apache/druid/pull/5299#issuecomment-363637564","issue_url":"https://api.github.com/repos/apache/druid/issues/5299","id":363637564,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYzNzU2NA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T02:40:28Z","updated_at":"2018-02-07T02:40:28Z","author_association":"CONTRIBUTOR","body":"@NirajaM  Thanks for the contribution!\r\n\r\nI think the checks being added on segment loads look good.\r\n\r\nConceptually I think we should reject dimensions with null or empty names during ingestion; DimensionSchema already has a check for null names:\r\n\r\n```\r\n  protected DimensionSchema(String name, MultiValueHandling multiValueHandling)\r\n  {\r\n    this.name = Preconditions.checkNotNull(name, \"Dimension name cannot be null.\");\r\n    this.multiValueHandling = multiValueHandling;\r\n  }\r\n```\r\n\r\nCan you add a check for empty strings to this constructor in this PR as well?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363637564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363666171","html_url":"https://github.com/apache/druid/issues/5362#issuecomment-363666171","issue_url":"https://api.github.com/repos/apache/druid/issues/5362","id":363666171,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzY2NjE3MQ==","user":{"login":"dansuzuki","id":10105476,"node_id":"MDQ6VXNlcjEwMTA1NDc2","avatar_url":"https://avatars.githubusercontent.com/u/10105476?v=4","gravatar_id":"","url":"https://api.github.com/users/dansuzuki","html_url":"https://github.com/dansuzuki","followers_url":"https://api.github.com/users/dansuzuki/followers","following_url":"https://api.github.com/users/dansuzuki/following{/other_user}","gists_url":"https://api.github.com/users/dansuzuki/gists{/gist_id}","starred_url":"https://api.github.com/users/dansuzuki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dansuzuki/subscriptions","organizations_url":"https://api.github.com/users/dansuzuki/orgs","repos_url":"https://api.github.com/users/dansuzuki/repos","events_url":"https://api.github.com/users/dansuzuki/events{/privacy}","received_events_url":"https://api.github.com/users/dansuzuki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T05:59:09Z","updated_at":"2018-02-07T05:59:09Z","author_association":"CONTRIBUTOR","body":"I would like to take on this with the following handling.\r\n\r\nExplode map-type field into several fields having its name prefixed with parent fieldname + underscore. E.g.\r\n\r\nFrom this...\r\n```\r\n  \"a_map_type_field\" : {\r\n    \"key1\" : \"value1\",\r\n    \"key2\" : \"value2\",\r\n    .\r\n    .\r\n    .\r\n    \"keyN\": \"valueN\"\r\n```\r\n\r\nTo this...\r\n```\r\n  \"a_map_type_field_key1\" : \"value1\",\r\n  \"a_map_type_field_key2\" : \"value2\",\r\n  .\r\n  .\r\n  .\r\n  \"a_map_type_field_keyN\" : \"valueN\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363666171/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363806084","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363806084","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363806084,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzgwNjA4NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T15:32:38Z","updated_at":"2018-02-07T15:32:38Z","author_association":"MEMBER","body":"@niketh could you do what I asked in the comment above?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363806084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363808959","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363808959","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363808959,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzgwODk1OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T15:41:14Z","updated_at":"2018-02-07T15:41:14Z","author_association":"CONTRIBUTOR","body":"added it to 0.12.0 milestone. technically it appears to be a regression in 0.11.0 but it would only be patched in 0.12.0 \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363808959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363833423","html_url":"https://github.com/apache/druid/pull/4774#issuecomment-363833423","issue_url":"https://api.github.com/repos/apache/druid/issues/4774","id":363833423,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzgzMzQyMw==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T16:50:42Z","updated_at":"2018-02-07T16:50:42Z","author_association":"CONTRIBUTOR","body":"Closing this out now that #5261 has been merged.\r\n\r\n@KenjiTakahashi FYI","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363833423/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363842573","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363842573","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363842573,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg0MjU3Mw==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T17:18:23Z","updated_at":"2018-02-07T17:18:23Z","author_association":"MEMBER","body":"@leventov I can try doing what you suggested however it is easily reproducible locally just add following code in some executor -\r\n```\r\nwhile (true) {\r\n   emitter.emit(ServiceMetricEvent.builder().setDimension(\"dataSource\", \"try\").build(\"test\", 10));\r\n}\r\n```\r\nPlease see if you can reproduce at your end. I'll let you know the outcome of extra logging.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363842573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363861065","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363861065","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363861065,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg2MTA2NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T18:18:16Z","updated_at":"2018-02-07T18:18:16Z","author_association":"MEMBER","body":"@pjain1 see #5365.\r\n\r\nIf it's easily reproducible, could you create a test?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363861065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363880716","html_url":"https://github.com/apache/druid/pull/5365#issuecomment-363880716","issue_url":"https://api.github.com/repos/apache/druid/issues/5365","id":363880716,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg4MDcxNg==","user":{"login":"niketh","id":626548,"node_id":"MDQ6VXNlcjYyNjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/626548?v=4","gravatar_id":"","url":"https://api.github.com/users/niketh","html_url":"https://github.com/niketh","followers_url":"https://api.github.com/users/niketh/followers","following_url":"https://api.github.com/users/niketh/following{/other_user}","gists_url":"https://api.github.com/users/niketh/gists{/gist_id}","starred_url":"https://api.github.com/users/niketh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketh/subscriptions","organizations_url":"https://api.github.com/users/niketh/orgs","repos_url":"https://api.github.com/users/niketh/repos","events_url":"https://api.github.com/users/niketh/events{/privacy}","received_events_url":"https://api.github.com/users/niketh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:21:57Z","updated_at":"2018-02-07T19:21:57Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363880716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363890779","html_url":"https://github.com/apache/druid/pull/5280#issuecomment-363890779","issue_url":"https://api.github.com/repos/apache/druid/issues/5280","id":363890779,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg5MDc3OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:55:33Z","updated_at":"2018-02-07T19:55:33Z","author_association":"CONTRIBUTOR","body":"@gianm @nishantmonu51 alright, this PR is ready now.\r\nInstead of keeping attribute name \"subtotalsSpec\" , following other options are available.\r\n\"groupingSets\"\r\n\"groupingsSpec\"\r\n\"columnGroupingsSpec\"\r\n\r\nI'm good with \"subtotalsSpec\" but let me know if majority likes one of the other options.\r\n\r\nI will add documentation as well once we settle on the attribute name.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363890779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363906660","html_url":"https://github.com/apache/druid/pull/5314#issuecomment-363906660","issue_url":"https://api.github.com/repos/apache/druid/issues/5314","id":363906660,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzkwNjY2MA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T20:52:49Z","updated_at":"2018-02-07T20:52:49Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363906660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363923691","html_url":"https://github.com/apache/druid/pull/5363#issuecomment-363923691","issue_url":"https://api.github.com/repos/apache/druid/issues/5363","id":363923691,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzkyMzY5MQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T21:54:24Z","updated_at":"2018-02-07T21:54:24Z","author_association":"CONTRIBUTOR","body":"@dansuzuki Can you rebase your PR branch to the current druid master? Looks like there are some issues/conflicts related to that.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363923691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363933238","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363933238","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363933238,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzkzMzIzOA==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T22:30:02Z","updated_at":"2018-02-07T22:30:51Z","author_association":"MEMBER","body":"I have been unsuccessful so far to reproduce this issue with latest master or with unit test for emitter 0.6.0. So, I took log statements from PR https://github.com/druid-io/druid/pull/5365 and added them to emitter 0.6.0 which druid 0.11.0 uses and I can see the problem happening. Apart from what you suggested, I also added statement `System.out.println(\"No new batches, current batch \" + concurrentBatch.get());` at https://github.com/metamx/emitter/blob/emitter-0.6.0/src/main/java/com/metamx/emitter/core/HttpPostEmitter.java#L211\r\n\r\nHere's the output -\r\n```\r\nUnlocked and sealed batch [674]\r\nold state 4295052796\r\nnew state -9223372036854690308\r\nUnlocked and sealed batch [675]\r\nold state 4295052796\r\nnew state -9223372036854690308\r\nUnlocked and sealed batch [676]\r\nold state 4295052796\r\nnew state -9223372036854690308\r\nUnlocked and sealed batch [677]\r\nold state 4295052796\r\nnew state -9223372036854690308\r\nUnlocked and sealed batch [678]\r\nold state 4295052796\r\nnew state -9223372036854690308\r\nUnlocked and sealed batch [679]\r\nold state 4295052796\r\nnew state -9223372036854690308\r\n...\r\n2018-02-07T22:21:21,363 INFO [HttpPostEmitter-1] com.metamx.http.client.pool.ChannelResourceFactory - Generating: http://<host>:<port>\r\n2018-02-07T22:21:21,492 INFO [HttpPostEmitter-1] com.metamx.http.client.pool.ChannelResourceFactory - Generating: http://<host>:<port>\r\n2018-02-07T22:21:21,618 INFO [HttpPostEmitter-1] com.metamx.http.client.pool.ChannelResourceFactory - Generating: http://<host>:<port>\r\n...\r\n2018-02-07T22:21:22,468 INFO [HttpPostEmitter-1] com.metamx.http.client.pool.ChannelResourceFactory - Generating: http://<host>:<port>\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=679, bufferWatermark=85500, parties=0, isSealed=true}\r\n....\r\n....\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363933238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363943095","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363943095","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363943095,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk0MzA5NQ==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T23:10:54Z","updated_at":"2018-02-07T23:10:54Z","author_association":"MEMBER","body":"Here's the output with more information, with druid 0.11.0 and emitter 0.6.0 -\r\n```\r\nUnlocked and sealed batch [684]\r\nold state[bufferWatermark=85500, parties=1, isSealed=false]\r\nnew state[bufferWatermark=85500, parties=0, isSealed=true]\r\nUnlocked and sealed batch [685]\r\nold state[bufferWatermark=85500, parties=1, isSealed=false]\r\nnew state[bufferWatermark=85500, parties=0, isSealed=true]\r\nUnlocked and sealed batch [686]\r\nold state[bufferWatermark=85500, parties=1, isSealed=false]\r\nnew state[bufferWatermark=85500, parties=0, isSealed=true]\r\nUnlocked and sealed batch [687]\r\nold state[bufferWatermark=85500, parties=1, isSealed=false]\r\nnew state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-07T23:08:28,138 INFO [Coordinator-Exec--0] io.druid.server.coordinator.helper.DruidCoordinatorSegmentInfoLoader - Starting coordination. Getting available segments.\r\n...\r\n...\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\nNo new batches, current batch Batch{batchNumber=687, bufferWatermark=85500, parties=0, isSealed=true}\r\n...\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363943095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363944682","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363944682","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363944682,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk0NDY4Mg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T23:18:03Z","updated_at":"2018-02-07T23:18:03Z","author_association":"MEMBER","body":"@pjain1 thanks, is it possible to add threads and time information to the output?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363944682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363944781","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363944781","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363944781,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk0NDc4MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T23:18:30Z","updated_at":"2018-02-07T23:18:30Z","author_association":"MEMBER","body":"Like this: `2018-02-07T23:08:28,138 INFO [Coordinator-Exec--0]` prefix before each line.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363944781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363947119","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-363947119","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":363947119,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk0NzExOQ==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T23:28:02Z","updated_at":"2018-02-07T23:28:02Z","author_association":"MEMBER","body":"OK, I will do that and post updated output.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363947119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363984506","html_url":"https://github.com/apache/druid/issues/5343#issuecomment-363984506","issue_url":"https://api.github.com/repos/apache/druid/issues/5343","id":363984506,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk4NDUwNg==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T02:42:23Z","updated_at":"2018-02-08T02:42:23Z","author_association":"MEMBER","body":"Most probably the task got killed by overlord, check overlord logs and search for the task id. On a side note, Kafka Indexing Service is constantly being improved upon and a more stable version of which will land in 0.12.0 release.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363984506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/363998826","html_url":"https://github.com/apache/druid/pull/5276#issuecomment-363998826","issue_url":"https://api.github.com/repos/apache/druid/issues/5276","id":363998826,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk5ODgyNg==","user":{"login":"vvc11","id":6641529,"node_id":"MDQ6VXNlcjY2NDE1Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/6641529?v=4","gravatar_id":"","url":"https://api.github.com/users/vvc11","html_url":"https://github.com/vvc11","followers_url":"https://api.github.com/users/vvc11/followers","following_url":"https://api.github.com/users/vvc11/following{/other_user}","gists_url":"https://api.github.com/users/vvc11/gists{/gist_id}","starred_url":"https://api.github.com/users/vvc11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvc11/subscriptions","organizations_url":"https://api.github.com/users/vvc11/orgs","repos_url":"https://api.github.com/users/vvc11/repos","events_url":"https://api.github.com/users/vvc11/events{/privacy}","received_events_url":"https://api.github.com/users/vvc11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T04:26:17Z","updated_at":"2018-02-08T04:26:17Z","author_association":"CONTRIBUTOR","body":"hi @b-slim , I've made the required changes, please review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/363998826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364017435","html_url":"https://github.com/apache/druid/issues/5273#issuecomment-364017435","issue_url":"https://api.github.com/repos/apache/druid/issues/5273","id":364017435,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDAxNzQzNQ==","user":{"login":"dragonls","id":2565118,"node_id":"MDQ6VXNlcjI1NjUxMTg=","avatar_url":"https://avatars.githubusercontent.com/u/2565118?v=4","gravatar_id":"","url":"https://api.github.com/users/dragonls","html_url":"https://github.com/dragonls","followers_url":"https://api.github.com/users/dragonls/followers","following_url":"https://api.github.com/users/dragonls/following{/other_user}","gists_url":"https://api.github.com/users/dragonls/gists{/gist_id}","starred_url":"https://api.github.com/users/dragonls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragonls/subscriptions","organizations_url":"https://api.github.com/users/dragonls/orgs","repos_url":"https://api.github.com/users/dragonls/repos","events_url":"https://api.github.com/users/dragonls/events{/privacy}","received_events_url":"https://api.github.com/users/dragonls/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T06:41:38Z","updated_at":"2018-02-08T06:41:38Z","author_association":"CONTRIBUTOR","body":"I faced the same problem while migrating segments from local storage to HDFS storage.\r\nAnd I did extracly as @himanshug suggested. That works fine.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364017435/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364020286","html_url":"https://github.com/apache/druid/issues/5219#issuecomment-364020286","issue_url":"https://api.github.com/repos/apache/druid/issues/5219","id":364020286,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDAyMDI4Ng==","user":{"login":"dragonls","id":2565118,"node_id":"MDQ6VXNlcjI1NjUxMTg=","avatar_url":"https://avatars.githubusercontent.com/u/2565118?v=4","gravatar_id":"","url":"https://api.github.com/users/dragonls","html_url":"https://github.com/dragonls","followers_url":"https://api.github.com/users/dragonls/followers","following_url":"https://api.github.com/users/dragonls/following{/other_user}","gists_url":"https://api.github.com/users/dragonls/gists{/gist_id}","starred_url":"https://api.github.com/users/dragonls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragonls/subscriptions","organizations_url":"https://api.github.com/users/dragonls/orgs","repos_url":"https://api.github.com/users/dragonls/repos","events_url":"https://api.github.com/users/dragonls/events{/privacy}","received_events_url":"https://api.github.com/users/dragonls/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T06:59:54Z","updated_at":"2018-02-08T06:59:54Z","author_association":"CONTRIBUTOR","body":"Maybe you can try the [Stream Pull Ingestion](http://druid.io/docs/0.11.0/ingestion/stream-pull.html).\r\n\r\nAFAIK, you can query the result in a realtime using Stream Pull Ingestion once druid ingest data from Kafka.\r\nBut by using Stream Push Ingestion, you will have to wait a window period.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364020286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364044081","html_url":"https://github.com/apache/druid/issues/5343#issuecomment-364044081","issue_url":"https://api.github.com/repos/apache/druid/issues/5343","id":364044081,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDA0NDA4MQ==","user":{"login":"erankor","id":4777488,"node_id":"MDQ6VXNlcjQ3Nzc0ODg=","avatar_url":"https://avatars.githubusercontent.com/u/4777488?v=4","gravatar_id":"","url":"https://api.github.com/users/erankor","html_url":"https://github.com/erankor","followers_url":"https://api.github.com/users/erankor/followers","following_url":"https://api.github.com/users/erankor/following{/other_user}","gists_url":"https://api.github.com/users/erankor/gists{/gist_id}","starred_url":"https://api.github.com/users/erankor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erankor/subscriptions","organizations_url":"https://api.github.com/users/erankor/orgs","repos_url":"https://api.github.com/users/erankor/repos","events_url":"https://api.github.com/users/erankor/events{/privacy}","received_events_url":"https://api.github.com/users/erankor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T08:55:17Z","updated_at":"2018-02-08T08:55:17Z","author_association":"NONE","body":"Thanks @pjain1, unfortunately, I don't currently have these logs (few days passed...), I will make sure to check it next time it happens.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364044081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364049867","html_url":"https://github.com/apache/druid/issues/5159#issuecomment-364049867","issue_url":"https://api.github.com/repos/apache/druid/issues/5159","id":364049867,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDA0OTg2Nw==","user":{"login":"yuppie-flu","id":6185911,"node_id":"MDQ6VXNlcjYxODU5MTE=","avatar_url":"https://avatars.githubusercontent.com/u/6185911?v=4","gravatar_id":"","url":"https://api.github.com/users/yuppie-flu","html_url":"https://github.com/yuppie-flu","followers_url":"https://api.github.com/users/yuppie-flu/followers","following_url":"https://api.github.com/users/yuppie-flu/following{/other_user}","gists_url":"https://api.github.com/users/yuppie-flu/gists{/gist_id}","starred_url":"https://api.github.com/users/yuppie-flu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuppie-flu/subscriptions","organizations_url":"https://api.github.com/users/yuppie-flu/orgs","repos_url":"https://api.github.com/users/yuppie-flu/repos","events_url":"https://api.github.com/users/yuppie-flu/events{/privacy}","received_events_url":"https://api.github.com/users/yuppie-flu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T09:17:55Z","updated_at":"2018-02-08T09:17:55Z","author_association":"CONTRIBUTOR","body":"Fixed in #5314 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364049867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364096407","html_url":"https://github.com/apache/druid/pull/5363#issuecomment-364096407","issue_url":"https://api.github.com/repos/apache/druid/issues/5363","id":364096407,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDA5NjQwNw==","user":{"login":"dansuzuki","id":10105476,"node_id":"MDQ6VXNlcjEwMTA1NDc2","avatar_url":"https://avatars.githubusercontent.com/u/10105476?v=4","gravatar_id":"","url":"https://api.github.com/users/dansuzuki","html_url":"https://github.com/dansuzuki","followers_url":"https://api.github.com/users/dansuzuki/followers","following_url":"https://api.github.com/users/dansuzuki/following{/other_user}","gists_url":"https://api.github.com/users/dansuzuki/gists{/gist_id}","starred_url":"https://api.github.com/users/dansuzuki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dansuzuki/subscriptions","organizations_url":"https://api.github.com/users/dansuzuki/orgs","repos_url":"https://api.github.com/users/dansuzuki/repos","events_url":"https://api.github.com/users/dansuzuki/events{/privacy}","received_events_url":"https://api.github.com/users/dansuzuki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T12:25:13Z","updated_at":"2018-02-08T12:25:13Z","author_association":"CONTRIBUTOR","body":"Alright, will do. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364096407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364171590","html_url":"https://github.com/apache/druid/pull/5297#issuecomment-364171590","issue_url":"https://api.github.com/repos/apache/druid/issues/5297","id":364171590,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE3MTU5MA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T16:41:27Z","updated_at":"2018-02-08T16:41:27Z","author_association":"CONTRIBUTOR","body":"@jihoonson where/how have you tested the changes? has this patch been verified on some cluster running Kafka Indexing Service and killing/restarting few Middle Managers ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364171590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364180291","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-364180291","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":364180291,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE4MDI5MQ==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T17:07:18Z","updated_at":"2018-02-08T17:09:42Z","author_association":"MEMBER","body":"@leventov \r\n```\r\n2018-02-08T17:05:37,432 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [0]\r\n2018-02-08T17:05:37,432 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:37,432 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:37,460 INFO [HttpPostEmitter-1] com.metamx.http.client.pool.ChannelResourceFactory - Generating: http://<host>:<port>\r\n2018-02-08T17:05:37,473 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [1]\r\n2018-02-08T17:05:37,474 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:37,474 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:37,501 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [2]\r\n2018-02-08T17:05:37,501 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:37,502 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:37,524 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [3]\r\n2018-02-08T17:05:37,524 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:37,524 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:37,537 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [4]\r\n2018-02-08T17:05:37,538 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:37,538 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:37,547 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [5]\r\n2018-02-08T17:05:37,547 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:37,547 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n...\r\n...\r\n2018-02-08T17:05:43,055 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [645]\r\n2018-02-08T17:05:43,055 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:43,055 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:43,056 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [646]\r\n2018-02-08T17:05:43,057 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:43,057 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:43,622 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [647]\r\n2018-02-08T17:05:43,622 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:43,622 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:43,624 INFO [s] com.metamx.emitter.core.Batch - Unlocked and sealed batch [648]\r\n2018-02-08T17:05:43,624 INFO [s] com.metamx.emitter.core.Batch - old state[bufferWatermark=85500, parties=1, isSealed=false]\r\n2018-02-08T17:05:43,624 INFO [s] com.metamx.emitter.core.Batch - new state[bufferWatermark=85500, parties=0, isSealed=true]\r\n2018-02-08T17:05:44,474 INFO [HttpPostEmitter-1] com.metamx.http.client.pool.ChannelResourceFactory - Generating: http://<host>:<port>\r\n2018-02-08T17:05:44,479 INFO [Coordinator-Exec--0] io.druid.server.coordinator.helper.DruidCoordinatorSegmentInfoLoader - Starting coordination. Getting available segments.\r\n2018-02-08T17:05:44,480 INFO [Coordinator-Exec--0] io.druid.server.coordinator.helper.DruidCoordinatorSegmentInfoLoader - Found [0] available segments.\r\n2018-02-08T17:05:44,485 WARN [Coordinator-Exec--0] io.druid.server.coordinator.helper.DruidCoordinatorRuleRunner - Uh... I have no servers. Not assigning anything...\r\n2018-02-08T17:05:44,485 INFO [Coordinator-Exec--0] io.druid.server.coordinator.helper.DruidCoordinatorCleanupUnneeded - Found 0 availableSegments, skipping the cleanup of segments from historicals. This is done to prevent a race condition in which the coordinator would drop all segments if it started running cleanup before it finished polling the metadata storage for available segments for the first time.\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n2018-02-08T17:05:44,491 INFO [Coordinator-Exec--0] com.metamx.emitter.core.HttpPostEmitter - Failed to emit an event in batch [Batch{batchNumber=648, bufferWatermark=85500, parties=0, isSealed=true}]\r\n...\r\n...\r\n```\r\n`s` is the name of thread that is doing - \r\n```\r\nwhile (true) {\r\n   emitter.emit(ServiceMetricEvent.builder().setDimension(\"dataSource\", \"try\").build(\"test\", 10));\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364180291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364189585","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-364189585","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":364189585,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE4OTU4NQ==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T17:37:58Z","updated_at":"2018-02-08T17:54:03Z","author_association":"MEMBER","body":"Here are multiple thread dumps from multiple runs when this situation happens - https://gist.github.com/pjain1/534c5941390037663b94c7ddcf6a0a3c","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364189585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364193885","html_url":"https://github.com/apache/druid/issues/5338#issuecomment-364193885","issue_url":"https://api.github.com/repos/apache/druid/issues/5338","id":364193885,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE5Mzg4NQ==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T17:52:30Z","updated_at":"2018-02-08T17:52:30Z","author_association":"MEMBER","body":"I have been trying to reproduce this issue on master but have been successful only once in multiple tries.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364193885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364224158","html_url":"https://github.com/apache/druid/pull/3091#issuecomment-364224158","issue_url":"https://api.github.com/repos/apache/druid/issues/3091","id":364224158,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDIyNDE1OA==","user":{"login":"SpyderRivera","id":3988262,"node_id":"MDQ6VXNlcjM5ODgyNjI=","avatar_url":"https://avatars.githubusercontent.com/u/3988262?v=4","gravatar_id":"","url":"https://api.github.com/users/SpyderRivera","html_url":"https://github.com/SpyderRivera","followers_url":"https://api.github.com/users/SpyderRivera/followers","following_url":"https://api.github.com/users/SpyderRivera/following{/other_user}","gists_url":"https://api.github.com/users/SpyderRivera/gists{/gist_id}","starred_url":"https://api.github.com/users/SpyderRivera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SpyderRivera/subscriptions","organizations_url":"https://api.github.com/users/SpyderRivera/orgs","repos_url":"https://api.github.com/users/SpyderRivera/repos","events_url":"https://api.github.com/users/SpyderRivera/events{/privacy}","received_events_url":"https://api.github.com/users/SpyderRivera/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T19:36:19Z","updated_at":"2018-02-08T19:36:19Z","author_association":"CONTRIBUTOR","body":"I am guessing this is dead? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364224158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364235081","html_url":"https://github.com/apache/druid/pull/5297#issuecomment-364235081","issue_url":"https://api.github.com/repos/apache/druid/issues/5297","id":364235081,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDIzNTA4MQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T20:16:09Z","updated_at":"2018-02-08T20:16:09Z","author_association":"CONTRIBUTOR","body":"@himanshug i've tested this PR on our cluster which is running multiple Kafka ingestions and some batch ingestions. It has been working well so far. I didn't tested killing/restarting MM yet. I'll keep you updated once the test is done.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364235081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364275033","html_url":"https://github.com/apache/druid/pull/5374#issuecomment-364275033","issue_url":"https://api.github.com/repos/apache/druid/issues/5374","id":364275033,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI3NTAzMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T22:46:54Z","updated_at":"2018-02-08T22:54:54Z","author_association":"CONTRIBUTOR","body":"I like this PR. Would you add the same logging to [here](https://github.com/druid-io/druid/blob/master/extensions-core/kafka-indexing-service/src/main/java/io/druid/indexing/kafka/KafkaIndexTask.java#L1158)?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364275033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364281776","html_url":"https://github.com/apache/druid/pull/5374#issuecomment-364281776","issue_url":"https://api.github.com/repos/apache/druid/issues/5374","id":364281776,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI4MTc3Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T23:16:43Z","updated_at":"2018-02-08T23:16:43Z","author_association":"CONTRIBUTOR","body":"@jihoonson thanks, added a log to runLegacy as well in KafkaIndexTask","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364281776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364323578","html_url":"https://github.com/apache/druid/pull/5372#issuecomment-364323578","issue_url":"https://api.github.com/repos/apache/druid/issues/5372","id":364323578,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDMyMzU3OA==","user":{"login":"dragonls","id":2565118,"node_id":"MDQ6VXNlcjI1NjUxMTg=","avatar_url":"https://avatars.githubusercontent.com/u/2565118?v=4","gravatar_id":"","url":"https://api.github.com/users/dragonls","html_url":"https://github.com/dragonls","followers_url":"https://api.github.com/users/dragonls/followers","following_url":"https://api.github.com/users/dragonls/following{/other_user}","gists_url":"https://api.github.com/users/dragonls/gists{/gist_id}","starred_url":"https://api.github.com/users/dragonls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragonls/subscriptions","organizations_url":"https://api.github.com/users/dragonls/orgs","repos_url":"https://api.github.com/users/dragonls/repos","events_url":"https://api.github.com/users/dragonls/events{/privacy}","received_events_url":"https://api.github.com/users/dragonls/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T03:18:39Z","updated_at":"2018-02-09T03:18:39Z","author_association":"CONTRIBUTOR","body":"I think there is a better way to accomplish this like using FirehoseV2. So closing this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364323578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364323649","html_url":"https://github.com/apache/druid/issues/5371#issuecomment-364323649","issue_url":"https://api.github.com/repos/apache/druid/issues/5371","id":364323649,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDMyMzY0OQ==","user":{"login":"dragonls","id":2565118,"node_id":"MDQ6VXNlcjI1NjUxMTg=","avatar_url":"https://avatars.githubusercontent.com/u/2565118?v=4","gravatar_id":"","url":"https://api.github.com/users/dragonls","html_url":"https://github.com/dragonls","followers_url":"https://api.github.com/users/dragonls/followers","following_url":"https://api.github.com/users/dragonls/following{/other_user}","gists_url":"https://api.github.com/users/dragonls/gists{/gist_id}","starred_url":"https://api.github.com/users/dragonls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragonls/subscriptions","organizations_url":"https://api.github.com/users/dragonls/orgs","repos_url":"https://api.github.com/users/dragonls/repos","events_url":"https://api.github.com/users/dragonls/events{/privacy}","received_events_url":"https://api.github.com/users/dragonls/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T03:19:12Z","updated_at":"2018-02-09T03:19:12Z","author_association":"CONTRIBUTOR","body":"I think there is a better way to accomplish this like using FirehoseV2. So closing this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364323649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364370237","html_url":"https://github.com/apache/druid/issues/5373#issuecomment-364370237","issue_url":"https://api.github.com/repos/apache/druid/issues/5373","id":364370237,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDM3MDIzNw==","user":{"login":"zhztheplayer","id":11284395,"node_id":"MDQ6VXNlcjExMjg0Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/11284395?v=4","gravatar_id":"","url":"https://api.github.com/users/zhztheplayer","html_url":"https://github.com/zhztheplayer","followers_url":"https://api.github.com/users/zhztheplayer/followers","following_url":"https://api.github.com/users/zhztheplayer/following{/other_user}","gists_url":"https://api.github.com/users/zhztheplayer/gists{/gist_id}","starred_url":"https://api.github.com/users/zhztheplayer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhztheplayer/subscriptions","organizations_url":"https://api.github.com/users/zhztheplayer/orgs","repos_url":"https://api.github.com/users/zhztheplayer/repos","events_url":"https://api.github.com/users/zhztheplayer/events{/privacy}","received_events_url":"https://api.github.com/users/zhztheplayer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T08:40:14Z","updated_at":"2018-02-09T08:40:14Z","author_association":"MEMBER","body":"In my own experience, you can check the following:\r\n\r\n1. Whether the tmp dir exists or not (The dir should be created manually)\r\n2. Ensure The number of tmp files has not reached the file system limit.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364370237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364409977","html_url":"https://github.com/apache/druid/pull/4764#issuecomment-364409977","issue_url":"https://api.github.com/repos/apache/druid/issues/4764","id":364409977,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDQwOTk3Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T11:32:13Z","updated_at":"2018-02-09T11:32:13Z","author_association":"MEMBER","body":"@niketh @himanshug could you please use Jenkins interface to restart jobs instead of closing/reopening?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364409977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364459854","html_url":"https://github.com/apache/druid/pull/5276#issuecomment-364459854","issue_url":"https://api.github.com/repos/apache/druid/issues/5276","id":364459854,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDQ1OTg1NA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T15:09:03Z","updated_at":"2018-02-10T01:52:42Z","author_association":"CONTRIBUTOR","body":"https://github.com/druid-io/druid/issues/4645#issuecomment-364616242","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364459854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364460712","html_url":"https://github.com/apache/druid/pull/5276#issuecomment-364460712","issue_url":"https://api.github.com/repos/apache/druid/issues/5276","id":364460712,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDQ2MDcxMg==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T15:12:06Z","updated_at":"2018-02-09T15:12:06Z","author_association":"CONTRIBUTOR","body":"@leventov how to restart the TeamCity build and what is doing anyway? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364460712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/364463889","html_url":"https://github.com/apache/druid/pull/4764#issuecomment-364463889","issue_url":"https://api.github.com/repos/apache/druid/issues/4764","id":364463889,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDQ2Mzg4OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T15:22:44Z","updated_at":"2018-02-09T15:22:44Z","author_association":"CONTRIBUTOR","body":"@leventov yes, I can do it... I don't think @niketh  can. can non-committers restart jobs  ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/364463889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]