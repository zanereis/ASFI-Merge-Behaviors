[{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310049784","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310049784","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310049784,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDA0OTc4NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T11:27:00Z","updated_at":"2017-06-21T11:27:00Z","author_association":"MEMBER","body":"ok there was one miss which was about binary annotation key. no more popups\r\n\r\n<img width=\"898\" alt=\"screen shot 2017-06-21 at 1 24 57 pm\" src=\"https://user-images.githubusercontent.com/64215/27382013-4a73b43c-5685-11e7-991d-c079f4d639fd.png\">\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310049784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310056020","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310056020","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310056020,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDA1NjAyMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T11:54:52Z","updated_at":"2017-06-21T11:54:52Z","author_association":"MEMBER","body":"@sirtyro can you give the OK on this? if works, I'll monkey in some tests","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310056020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310064754","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310064754","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310064754,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDA2NDc1NA==","user":{"login":"eirslett","id":1872593,"node_id":"MDQ6VXNlcjE4NzI1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1872593?v=4","gravatar_id":"","url":"https://api.github.com/users/eirslett","html_url":"https://github.com/eirslett","followers_url":"https://api.github.com/users/eirslett/followers","following_url":"https://api.github.com/users/eirslett/following{/other_user}","gists_url":"https://api.github.com/users/eirslett/gists{/gist_id}","starred_url":"https://api.github.com/users/eirslett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eirslett/subscriptions","organizations_url":"https://api.github.com/users/eirslett/orgs","repos_url":"https://api.github.com/users/eirslett/repos","events_url":"https://api.github.com/users/eirslett/events{/privacy}","received_events_url":"https://api.github.com/users/eirslett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T12:34:58Z","updated_at":"2017-06-21T12:34:58Z","author_association":"CONTRIBUTOR","body":"@adriancole can you pick up this PR from here?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310064754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310089416","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310089416","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310089416,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDA4OTQxNg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T14:06:36Z","updated_at":"2017-06-21T14:06:36Z","author_association":"MEMBER","body":"ayup!\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310089416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310102916","html_url":"https://github.com/openzipkin/zipkin/pull/1622#issuecomment-310102916","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1622","id":310102916,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDEwMjkxNg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T14:49:10Z","updated_at":"2017-06-21T14:49:10Z","author_association":"MEMBER","body":"looks like you might be able to write a simple test that uses package access to check kafkaConsumer.subscription()\r\n\r\nbasically read-back that to show a simple split works. wanna try?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310102916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310237588","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310237588","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310237588,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDIzNzU4OA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T23:59:29Z","updated_at":"2017-06-21T23:59:29Z","author_association":"NONE","body":"@adriancole @eirslett , nice work. No more pop ups! :D :+1: ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310237588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310237639","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310237639","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310237639,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDIzNzYzOQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-21T23:59:57Z","updated_at":"2017-06-21T23:59:57Z","author_association":"NONE","body":":shipit: , straight to prod ;)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310237639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310315297","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310315297","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310315297,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDMxNTI5Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-22T08:39:50Z","updated_at":"2017-06-22T08:39:50Z","author_association":"MEMBER","body":"fixed tests and made sure json literals still work","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310315297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310343304","html_url":"https://github.com/openzipkin/zipkin/pull/1625#issuecomment-310343304","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1625","id":310343304,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDM0MzMwNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-22T10:38:27Z","updated_at":"2017-06-22T10:38:27Z","author_association":"MEMBER","body":"going out as 1.26.2","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310343304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310343312","html_url":"https://github.com/openzipkin/zipkin/pull/1624#issuecomment-310343312","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1624","id":310343312,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDM0MzMxMg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-22T10:38:32Z","updated_at":"2017-06-22T10:38:32Z","author_association":"MEMBER","body":"going out as 1.26.2","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310343312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310387909","html_url":"https://github.com/openzipkin/zipkin/issues/1528#issuecomment-310387909","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1528","id":310387909,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDM4NzkwOQ==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-22T13:57:06Z","updated_at":"2017-06-22T13:57:06Z","author_association":"CONTRIBUTOR","body":"OK.  I'll just go with a maximum # spans.\r\n\r\nI've got a purge() method added to the InMemorySpanStore class.  This method deletes the oldest traces (and their spans) when invoked.  Do you have an opinion on who should do the invoking?  And how?  I'm don't quite know most most idiomatic in Java.  For example:\r\n\r\n1. Perhaps InMemoryStorage should have a worker thread that just invokes it every minute or so (cron-like).  In this case, purge() would be being called from outside InMemorySpanStore.\r\n2. Perhaps InMemorySpanStore should invoke it every time a span or group of spans gets added.  This means that purges would be more frequent and consistent, but the naive implementation would add more time to every accept() call.  I'd also rather avoid the contention of multiple calls to purge() all trying to purge the same traces.  One would win, of course, but why do all the extra work?\r\n3. Or perhaps some other idea you might have?\r\n\r\nI'll try implementing some of those and see how it works.\r\n\r\nAlmost there!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310387909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310422470","html_url":"https://github.com/openzipkin/zipkin/issues/1528#issuecomment-310422470","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1528","id":310422470,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDQyMjQ3MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-22T15:52:34Z","updated_at":"2017-06-22T15:52:34Z","author_association":"MEMBER","body":"on purge, I'd steal time from the accept method. not worth making any\nmachinery imho, as it will still be faster than i/o based span stores.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310422470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310653693","html_url":"https://github.com/openzipkin/zipkin/issues/1452#issuecomment-310653693","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1452","id":310653693,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDY1MzY5Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-23T12:33:26Z","updated_at":"2017-06-23T12:33:26Z","author_association":"MEMBER","body":"dupe of #1229","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310653693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310654963","html_url":"https://github.com/openzipkin/zipkin/issues/1229#issuecomment-310654963","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1229","id":310654963,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDY1NDk2Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-23T12:40:10Z","updated_at":"2017-06-23T12:40:10Z","author_association":"MEMBER","body":"ok folks.. here it is https://github.com/openzipkin/zipkin/pull/1627\r\n\r\ncc @sirtyro, too","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310654963/reactions","total_count":4,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":3,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310675831","html_url":"https://github.com/openzipkin/zipkin/pull/1627#issuecomment-310675831","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1627","id":310675831,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDY3NTgzMQ==","user":{"login":"eirslett","id":1872593,"node_id":"MDQ6VXNlcjE4NzI1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1872593?v=4","gravatar_id":"","url":"https://api.github.com/users/eirslett","html_url":"https://github.com/eirslett","followers_url":"https://api.github.com/users/eirslett/followers","following_url":"https://api.github.com/users/eirslett/following{/other_user}","gists_url":"https://api.github.com/users/eirslett/gists{/gist_id}","starred_url":"https://api.github.com/users/eirslett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eirslett/subscriptions","organizations_url":"https://api.github.com/users/eirslett/orgs","repos_url":"https://api.github.com/users/eirslett/repos","events_url":"https://api.github.com/users/eirslett/events{/privacy}","received_events_url":"https://api.github.com/users/eirslett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-23T14:11:23Z","updated_at":"2017-06-23T14:11:23Z","author_association":"CONTRIBUTOR","body":"Great!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310675831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310823072","html_url":"https://github.com/openzipkin/zipkin/pull/1626#issuecomment-310823072","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1626","id":310823072,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDgyMzA3Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-24T07:47:48Z","updated_at":"2017-06-24T07:47:48Z","author_association":"MEMBER","body":"thanks!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310823072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310824286","html_url":"https://github.com/openzipkin/zipkin/pull/1627#issuecomment-310824286","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1627","id":310824286,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDgyNDI4Ng==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-24T08:14:01Z","updated_at":"2017-06-24T08:14:01Z","author_association":"MEMBER","body":"those who want to experiment can use snapshot from http://oss.jfrog.org/artifactory/oss-snapshot-local","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310824286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310824471","html_url":"https://github.com/openzipkin/zipkin/pull/1622#issuecomment-310824471","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1622","id":310824471,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMDgyNDQ3MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-24T08:17:36Z","updated_at":"2017-06-24T08:17:36Z","author_association":"MEMBER","body":"k very least this needs an update to the docs KafkaCollector.Builder and in zipkin-server/README like..\r\n\r\n```\r\n    * `KAFKA_TOPIC`: Topic zipkin spans will be consumed from. Defaults to \"zipkin\"\r\n      * When Kafka 0.10 is in use, multiple topics may be specified if comma delimited\r\n```","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/310824471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311104898","html_url":"https://github.com/openzipkin/zipkin/pull/1627#issuecomment-311104898","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1627","id":311104898,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTEwNDg5OA==","user":{"login":"neilstevenson","id":1997464,"node_id":"MDQ6VXNlcjE5OTc0NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1997464?v=4","gravatar_id":"","url":"https://api.github.com/users/neilstevenson","html_url":"https://github.com/neilstevenson","followers_url":"https://api.github.com/users/neilstevenson/followers","following_url":"https://api.github.com/users/neilstevenson/following{/other_user}","gists_url":"https://api.github.com/users/neilstevenson/gists{/gist_id}","starred_url":"https://api.github.com/users/neilstevenson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neilstevenson/subscriptions","organizations_url":"https://api.github.com/users/neilstevenson/orgs","repos_url":"https://api.github.com/users/neilstevenson/repos","events_url":"https://api.github.com/users/neilstevenson/events{/privacy}","received_events_url":"https://api.github.com/users/neilstevenson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-26T16:05:45Z","updated_at":"2017-06-26T16:05:45Z","author_association":"CONTRIBUTOR","body":"@adriancole `zipkin-ui/js/config.js` tries to load from the old URL","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311104898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311219124","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311219124","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311219124,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTIxOTEyNA==","user":{"login":"JodeZer","id":9582429,"node_id":"MDQ6VXNlcjk1ODI0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/9582429?v=4","gravatar_id":"","url":"https://api.github.com/users/JodeZer","html_url":"https://github.com/JodeZer","followers_url":"https://api.github.com/users/JodeZer/followers","following_url":"https://api.github.com/users/JodeZer/following{/other_user}","gists_url":"https://api.github.com/users/JodeZer/gists{/gist_id}","starred_url":"https://api.github.com/users/JodeZer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JodeZer/subscriptions","organizations_url":"https://api.github.com/users/JodeZer/orgs","repos_url":"https://api.github.com/users/JodeZer/repos","events_url":"https://api.github.com/users/JodeZer/events{/privacy}","received_events_url":"https://api.github.com/users/JodeZer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T00:33:06Z","updated_at":"2017-06-27T00:33:06Z","author_association":"NONE","body":"This is interesting. However, l have no idea how to impl span model on influxdb. What's your design on metrics?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311219124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311368416","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-311368416","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":311368416,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTM2ODQxNg==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T14:04:33Z","updated_at":"2017-06-27T14:04:33Z","author_association":"CONTRIBUTOR","body":"Just made a change to speed up the purge.  With commit e0b6af5, a purge of old spans with 1 million spans in-memory goes from ~150 ms to 5 ms.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311368416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311399114","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-311399114","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":311399114,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTM5OTExNA==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T15:43:12Z","updated_at":"2017-06-27T15:43:12Z","author_association":"CONTRIBUTOR","body":"I fixed the issue with Long.max() not being available in Java 1.7, and fixed a warning about a missing \"@Override\".","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311399114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311451567","html_url":"https://github.com/openzipkin/zipkin/pull/1635#issuecomment-311451567","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1635","id":311451567,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTQ1MTU2Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T18:53:49Z","updated_at":"2017-06-27T18:53:49Z","author_association":"MEMBER","body":"Hmm wonder why it is silently failing (as opposed to loudly failing).\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311451567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311451588","html_url":"https://github.com/openzipkin/zipkin/pull/1633#issuecomment-311451588","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1633","id":311451588,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTQ1MTU4OA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T18:53:54Z","updated_at":"2017-06-27T18:53:54Z","author_association":"MEMBER","body":"The default is intentional (not java 8) for a couple reasons, some are just\nbackground.\n\nWe dont want to enforce more constraints than the libraries we use. Ex jooq\nrequires JRE8, so no problem. Though cassandra does not. Not escalating\ncode level prevents accidents that limit library reuse.\n\nSome are using \"local reporters\" for example reporting to zipkin without a\nseparate transport tier. Taking the least dep on JRE level interferes least.\n\nAnother non server user is the dependency linker spark job. As recent as\nlast year the job needed to be pinned to JRE 7 due to some hadoop reasons\nwhich was another reason why we had to take a second look at versions here.\n\nThe core library is not only used in spark, but also application code ...\nand also java agents. Java agents are used to instrument legacy systems and\nsometimes terribly so, but sometimes these use JRE6. Moreover, it was\nintended to be used in android and depending on level this is kindof like\njava 6.5. Long story short.. the core library is most important to remain\nJRE 6.\n\nThere are some annoyances, such as copy pasting long compare and lack of\nthings like threadlocalrandom, but in core, this is a limited impact. The\nanimal sniffer did its job in this case, preventing us from breaking our\ncontract.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311451588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311451744","html_url":"https://github.com/openzipkin/zipkin/pull/1633#issuecomment-311451744","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1633","id":311451744,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTQ1MTc0NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T18:54:25Z","updated_at":"2017-06-27T18:54:25Z","author_association":"MEMBER","body":"There's a longer explanation held hostage until my phone reconnects to the internet :) suffice to say this is very intentional, especially the core version at JRE 6. Feel free to ping on gitter if you have any q's about approaches considering the limitation","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311451744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311452021","html_url":"https://github.com/openzipkin/zipkin/pull/1635#issuecomment-311452021","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1635","id":311452021,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTQ1MjAyMQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T18:55:21Z","updated_at":"2017-06-27T18:55:21Z","author_association":"MEMBER","body":"thanks!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311452021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311452213","html_url":"https://github.com/openzipkin/zipkin/pull/1634#issuecomment-311452213","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1634","id":311452213,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTQ1MjIxMw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T18:56:02Z","updated_at":"2017-06-27T18:56:02Z","author_association":"MEMBER","body":"thanks for fixing these broken windows!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311452213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311477359","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-311477359","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":311477359,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTQ3NzM1OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-27T20:35:24Z","updated_at":"2017-06-27T20:36:03Z","author_association":"MEMBER","body":"playing a little here, I think a couple things might help simplify or at least strangle the nasty parts to one place.\r\n\r\nConsider doing the eviction up-front. This is a little nicer I think that afterwards, especially if the input is impossible (ex input spans are larger than max!).\r\n```\r\n  final StorageAdapters.SpanConsumer spanConsumer = new StorageAdapters.SpanConsumer() {\r\n     @Override public void accept(List<Span> spans) {\r\n+      int delta = spans.size();\r\n+      int spansToRecover = (traceIdToSpans.size() + delta) - maxSpanCount;\r\n+      evictToRecoverSpans(spansToRecover);\r\n+\r\n       for (Span span : spans) {\r\n         Long timestamp = guessTimestamp(span);\r\n         Pair<Long> traceIdTimeStamp =\r\n@@ -83,6 +88,17 @@ public final class InMemorySpanStore implements SpanStore {\r\n     }\r\n   };\r\n```\r\n\r\nAdding size to multimap looks something like this... (one distracting bugfix in there..)\r\n```\r\n+    int size() {\r\n+      return size;\r\n+    }\r\n+\r\n     void put(K key, V value) {\r\n       Collection<V> valueContainer = delegate.get(key);\r\n       if (valueContainer == null) {\r\n         synchronized (delegate) {\r\n-          if (!delegate.containsKey(key)) {\r\n-            valueContainer = valueContainer();\r\n-            delegate.put(key, valueContainer);\r\n+          Collection<V> old = delegate.put(key, valueContainer = valueContainer());\r\n+          if (old != null) { // lost race\r\n+            valueContainer = old;\r\n           }\r\n         }\r\n       }\r\n-      valueContainer.add(value);\r\n+      synchronized (delegate) {\r\n+        if (valueContainer.add(value)) size++;\r\n+      }\r\n     }\r\n```\r\n\r\nImplement the eviction method, quite similar in nature to yours, except as enclosed directly by InMemorySpanStore for easier testing.\r\n```java \r\n+  /** Returns the count of spans evicted. */\r\n+  int evictToRecoverSpans(int spansToRecover) {\r\n+    int spansEvicted = 0;\r\n+    while (spansToRecover > 0) {\r\n+      int spansInOldestTrace = deleteOldestTrace();\r\n+      spansToRecover -= spansInOldestTrace;\r\n+      spansEvicted += spansInOldestTrace;\r\n+    }\r\n+    return spansEvicted;\r\n+  }\r\n```\r\n\r\nDeleting the oldest trace has one major edge case, which is where a span came with no guessable timestamp. I think that's ok, just skip those if you can, and choose the first valid timestamped trace and go from there. This has a bunch of scanning involved at the moment, but shouldn't require you to peer at any span data. For example, `traceIdTimeStamps` is already ordered, scan until you find anything with a valid timestamp and delete all you can associated with it. that would be `spansInOldestTrace` above. Let the loop continue even if expensive (for now).\r\n\r\nThis advice isn't looking as deeply as you have, just I'd like to find a way to avoid re-calculating things added on input.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311477359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311615016","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-311615016","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":311615016,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTYxNTAxNg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T10:02:02Z","updated_at":"2017-06-28T10:02:02Z","author_association":"MEMBER","body":"@joel-airspring not sure this makes things very clear or not, but it is an attempt to rejig so that implementing this could be more straightforward. lemme know if you think it doesn't help :) https://github.com/openzipkin/zipkin/pull/1636","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311615016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311616127","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-311616127","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":311616127,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTYxNjEyNw==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T10:06:49Z","updated_at":"2017-06-28T10:06:49Z","author_association":"CONTRIBUTOR","body":"Adrian, thanks for all the detailed feedback!  I'll go through it today and check out #1636 too.\r\n\r\nJoel","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311616127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311634504","html_url":"https://github.com/openzipkin/zipkin/pull/1629#issuecomment-311634504","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1629","id":311634504,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTYzNDUwNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T11:37:04Z","updated_at":"2017-06-28T11:37:04Z","author_association":"MEMBER","body":"thank you very much for noticing and fixing!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311634504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311646566","html_url":"https://github.com/openzipkin/zipkin/issues/1630#issuecomment-311646566","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1630","id":311646566,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY0NjU2Ng==","user":{"login":"ImFlog","id":5982268,"node_id":"MDQ6VXNlcjU5ODIyNjg=","avatar_url":"https://avatars.githubusercontent.com/u/5982268?v=4","gravatar_id":"","url":"https://api.github.com/users/ImFlog","html_url":"https://github.com/ImFlog","followers_url":"https://api.github.com/users/ImFlog/followers","following_url":"https://api.github.com/users/ImFlog/following{/other_user}","gists_url":"https://api.github.com/users/ImFlog/gists{/gist_id}","starred_url":"https://api.github.com/users/ImFlog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ImFlog/subscriptions","organizations_url":"https://api.github.com/users/ImFlog/orgs","repos_url":"https://api.github.com/users/ImFlog/repos","events_url":"https://api.github.com/users/ImFlog/events{/privacy}","received_events_url":"https://api.github.com/users/ImFlog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T12:35:30Z","updated_at":"2017-06-29T09:05:57Z","author_association":"CONTRIBUTOR","body":"Hello,\r\nTo create the dependency graph when not in memory you have to use the [spark job](https://github.com/openzipkin/zipkin-dependencies).\r\nRead the documentation, you should find your way easily.\r\nHope it helps.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311646566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311647025","html_url":"https://github.com/openzipkin/zipkin/issues/1630#issuecomment-311647025","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1630","id":311647025,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY0NzAyNQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T12:37:33Z","updated_at":"2017-06-28T12:37:33Z","author_association":"MEMBER","body":"thanks for answering @ImFlog \r\n\r\n@eacdy ps if you can, next time you run into a problem, use gitter as we could probably have saved you some trouble https://gitter.im/openzipkin/zipkin","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311647025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311657451","html_url":"https://github.com/openzipkin/zipkin/pull/1637#issuecomment-311657451","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1637","id":311657451,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY1NzQ1MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T13:19:28Z","updated_at":"2017-06-28T13:19:28Z","author_association":"MEMBER","body":"can you paste before and after of the entire trace detail? Ex does removing this end up affecting hiding spans that start early?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311657451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311657866","html_url":"https://github.com/openzipkin/zipkin/issues/1632#issuecomment-311657866","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1632","id":311657866,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY1Nzg2Ng==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T13:21:02Z","updated_at":"2017-06-28T13:21:02Z","author_association":"MEMBER","body":"word of caution is that storage side tends to be the most code and maintenance. Usually we wait for multiple folks to show interest, and of course you could pilot on your own in the mean time.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311657866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311660740","html_url":"https://github.com/openzipkin/zipkin/pull/1638#issuecomment-311660740","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1638","id":311660740,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY2MDc0MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T13:32:01Z","updated_at":"2017-06-28T13:32:01Z","author_association":"MEMBER","body":"thanks!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311660740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311663293","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311663293","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311663293,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY2MzI5Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T13:41:26Z","updated_at":"2017-06-28T13:41:26Z","author_association":"MEMBER","body":"You might be able to harvest some ideas from appdash, which doesn't seem to\nbe active, but includes influxdb support. Their model is different than\nzipkin, but many of the ideas could be portable\nhttps://github.com/sourcegraph/appdash/pull/99\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311663293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311664672","html_url":"https://github.com/openzipkin/zipkin/pull/1627#issuecomment-311664672","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1627","id":311664672,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY2NDY3Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T13:46:32Z","updated_at":"2017-06-28T13:46:32Z","author_association":"MEMBER","body":"thx for the fix!\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311664672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311672039","html_url":"https://github.com/openzipkin/zipkin/pull/1639#issuecomment-311672039","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1639","id":311672039,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY3MjAzOQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T14:12:19Z","updated_at":"2017-06-28T14:12:19Z","author_association":"MEMBER","body":"thx again!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311672039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311694266","html_url":"https://github.com/openzipkin/zipkin/issues/1632#issuecomment-311694266","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1632","id":311694266,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY5NDI2Ng==","user":{"login":"shakuzen","id":8924140,"node_id":"MDQ6VXNlcjg5MjQxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/8924140?v=4","gravatar_id":"","url":"https://api.github.com/users/shakuzen","html_url":"https://github.com/shakuzen","followers_url":"https://api.github.com/users/shakuzen/followers","following_url":"https://api.github.com/users/shakuzen/following{/other_user}","gists_url":"https://api.github.com/users/shakuzen/gists{/gist_id}","starred_url":"https://api.github.com/users/shakuzen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shakuzen/subscriptions","organizations_url":"https://api.github.com/users/shakuzen/orgs","repos_url":"https://api.github.com/users/shakuzen/repos","events_url":"https://api.github.com/users/shakuzen/events{/privacy}","received_events_url":"https://api.github.com/users/shakuzen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T15:23:08Z","updated_at":"2017-06-28T15:23:08Z","author_association":"MEMBER","body":"I think Hazelcast as a storage option is quite interesting, but I will also echo what @adriancole stated. I think this would do better, at least initially, outside of the main Zipkin repository. Once it is off the ground there with some users and support, it might be a good time to consider merging it in as an official storage option. I'd be willing to help review an implementation as well, if useful.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311694266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311694738","html_url":"https://github.com/openzipkin/zipkin/issues/1632#issuecomment-311694738","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1632","id":311694738,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTY5NDczOA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T15:24:34Z","updated_at":"2017-06-28T15:24:34Z","author_association":"MEMBER","body":"PS please do add me if you make a repo, I can help review etc\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311694738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311704472","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311704472","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311704472,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcwNDQ3Mg==","user":{"login":"goller","id":1922921,"node_id":"MDQ6VXNlcjE5MjI5MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1922921?v=4","gravatar_id":"","url":"https://api.github.com/users/goller","html_url":"https://github.com/goller","followers_url":"https://api.github.com/users/goller/followers","following_url":"https://api.github.com/users/goller/following{/other_user}","gists_url":"https://api.github.com/users/goller/gists{/gist_id}","starred_url":"https://api.github.com/users/goller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/goller/subscriptions","organizations_url":"https://api.github.com/users/goller/orgs","repos_url":"https://api.github.com/users/goller/repos","events_url":"https://api.github.com/users/goller/events{/privacy}","received_events_url":"https://api.github.com/users/goller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T15:55:38Z","updated_at":"2017-06-28T15:55:38Z","author_association":"NONE","body":"@adriancole Great!  I'll take a look at it to get some ideas for modeling data.  I know it would be an effort to maintain an additional backend to zipkin, but, we at Influx are walking the same open source path and are very willing to stay involved.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311704472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311709519","html_url":"https://github.com/openzipkin/zipkin/issues/1632#issuecomment-311709519","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1632","id":311709519,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcwOTUxOQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T16:11:42Z","updated_at":"2017-06-28T16:11:42Z","author_association":"MEMBER","body":"just tweeted in efforts to call attention to the offer for help on this. looking forward to what comes of it.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311709519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311709664","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311709664","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311709664,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcwOTY2NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T16:12:10Z","updated_at":"2017-06-28T16:12:10Z","author_association":"MEMBER","body":"just tweeted to help highlight the gracious offer to help with this. let's see how it goes!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311709664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311711738","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311711738","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311711738,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcxMTczOA==","user":{"login":"goller","id":1922921,"node_id":"MDQ6VXNlcjE5MjI5MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1922921?v=4","gravatar_id":"","url":"https://api.github.com/users/goller","html_url":"https://github.com/goller","followers_url":"https://api.github.com/users/goller/followers","following_url":"https://api.github.com/users/goller/following{/other_user}","gists_url":"https://api.github.com/users/goller/gists{/gist_id}","starred_url":"https://api.github.com/users/goller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/goller/subscriptions","organizations_url":"https://api.github.com/users/goller/orgs","repos_url":"https://api.github.com/users/goller/repos","events_url":"https://api.github.com/users/goller/events{/privacy}","received_events_url":"https://api.github.com/users/goller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T16:19:20Z","updated_at":"2017-06-28T16:19:20Z","author_association":"NONE","body":"@JodeZer I have some ideas about how to implement the span model on influxdb.  Now, this is really rough idea yet.  @adriancole 's link to appdash may very well change my ideas, but here we go:\r\n\r\nThe span's `time` would be start time. \r\n\r\nAn individual span would be stored with these tags (indexed):\r\n* traceID\r\n* spanID\r\n* spanName\r\n* serviceName\r\n* parentID\r\n* annotation key\r\n\r\nThe span's fields (not indexed) would be:\r\n* duration\r\n* end time\r\n\r\nI'm not sure yet about binary annotations...\r\n\r\nIn reviewing the `QueryRequest.java` I think this design would cover most queries.\r\n\r\nAs for cardinality, I'm planning on leaning on InfluxDB's new TSI engine that allows us to store and query over a billion unique series.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311711738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311716718","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311716718","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311716718,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcxNjcxOA==","user":{"login":"gianarb","id":1630267,"node_id":"MDQ6VXNlcjE2MzAyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1630267?v=4","gravatar_id":"","url":"https://api.github.com/users/gianarb","html_url":"https://github.com/gianarb","followers_url":"https://api.github.com/users/gianarb/followers","following_url":"https://api.github.com/users/gianarb/following{/other_user}","gists_url":"https://api.github.com/users/gianarb/gists{/gist_id}","starred_url":"https://api.github.com/users/gianarb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianarb/subscriptions","organizations_url":"https://api.github.com/users/gianarb/orgs","repos_url":"https://api.github.com/users/gianarb/repos","events_url":"https://api.github.com/users/gianarb/events{/privacy}","received_events_url":"https://api.github.com/users/gianarb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T16:37:17Z","updated_at":"2017-06-28T16:41:36Z","author_association":"CONTRIBUTOR","body":"Here some info about the new TSI mentioned by @goller https://www.influxdata.com/path-1-billion-time-series-influxdb-high-cardinality-indexing-ready-testing/","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311716718/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311721682","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-311721682","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":311721682,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcyMTY4Mg==","user":{"login":"wdalmut","id":551974,"node_id":"MDQ6VXNlcjU1MTk3NA==","avatar_url":"https://avatars.githubusercontent.com/u/551974?v=4","gravatar_id":"","url":"https://api.github.com/users/wdalmut","html_url":"https://github.com/wdalmut","followers_url":"https://api.github.com/users/wdalmut/followers","following_url":"https://api.github.com/users/wdalmut/following{/other_user}","gists_url":"https://api.github.com/users/wdalmut/gists{/gist_id}","starred_url":"https://api.github.com/users/wdalmut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wdalmut/subscriptions","organizations_url":"https://api.github.com/users/wdalmut/orgs","repos_url":"https://api.github.com/users/wdalmut/repos","events_url":"https://api.github.com/users/wdalmut/events{/privacy}","received_events_url":"https://api.github.com/users/wdalmut/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T16:55:38Z","updated_at":"2017-06-28T16:55:38Z","author_association":"NONE","body":" :+1: for me","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311721682/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311724676","html_url":"https://github.com/openzipkin/zipkin/issues/1632#issuecomment-311724676","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1632","id":311724676,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTcyNDY3Ng==","user":{"login":"neilstevenson","id":1997464,"node_id":"MDQ6VXNlcjE5OTc0NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1997464?v=4","gravatar_id":"","url":"https://api.github.com/users/neilstevenson","html_url":"https://github.com/neilstevenson","followers_url":"https://api.github.com/users/neilstevenson/followers","following_url":"https://api.github.com/users/neilstevenson/following{/other_user}","gists_url":"https://api.github.com/users/neilstevenson/gists{/gist_id}","starred_url":"https://api.github.com/users/neilstevenson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neilstevenson/subscriptions","organizations_url":"https://api.github.com/users/neilstevenson/orgs","repos_url":"https://api.github.com/users/neilstevenson/repos","events_url":"https://api.github.com/users/neilstevenson/events{/privacy}","received_events_url":"https://api.github.com/users/neilstevenson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T17:06:04Z","updated_at":"2017-06-28T17:06:04Z","author_association":"CONTRIBUTOR","body":"I've already started, I shouldn't need help. If you get volunteers, get them to pick something else off the wishlist to progress that. PR to follow soon hopefully.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311724676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311743424","html_url":"https://github.com/openzipkin/zipkin/pull/1622#issuecomment-311743424","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1622","id":311743424,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTc0MzQyNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T18:15:32Z","updated_at":"2017-06-28T18:15:32Z","author_association":"MEMBER","body":"All good or did I scare you off? :)\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311743424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311757586","html_url":"https://github.com/openzipkin/zipkin/pull/1622#issuecomment-311757586","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1622","id":311757586,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTc1NzU4Ng==","user":{"login":"danielkwinsor","id":2822992,"node_id":"MDQ6VXNlcjI4MjI5OTI=","avatar_url":"https://avatars.githubusercontent.com/u/2822992?v=4","gravatar_id":"","url":"https://api.github.com/users/danielkwinsor","html_url":"https://github.com/danielkwinsor","followers_url":"https://api.github.com/users/danielkwinsor/followers","following_url":"https://api.github.com/users/danielkwinsor/following{/other_user}","gists_url":"https://api.github.com/users/danielkwinsor/gists{/gist_id}","starred_url":"https://api.github.com/users/danielkwinsor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielkwinsor/subscriptions","organizations_url":"https://api.github.com/users/danielkwinsor/orgs","repos_url":"https://api.github.com/users/danielkwinsor/repos","events_url":"https://api.github.com/users/danielkwinsor/events{/privacy}","received_events_url":"https://api.github.com/users/danielkwinsor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T19:07:26Z","updated_at":"2017-06-28T19:07:26Z","author_association":"CONTRIBUTOR","body":"All good... in the process of adding docs and tests, but rebased from\nupstream and it wiped out my commit, then auto closed.  Expect by EoD.\n\nOn Jun 28, 2017 11:15, \"Adrian Cole\" <notifications@github.com> wrote:\n\n> All good or did I scare you off? :)\n>\n> —\n> You are receiving this because you modified the open/close state.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/1622#issuecomment-311743424>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ACsTUM4tjnDnj6bkqY538y__XJPAoc0Eks5sIphUgaJpZM4N-oBx>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311757586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311797086","html_url":"https://github.com/openzipkin/zipkin/pull/1622#issuecomment-311797086","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1622","id":311797086,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTc5NzA4Ng==","user":{"login":"danielkwinsor","id":2822992,"node_id":"MDQ6VXNlcjI4MjI5OTI=","avatar_url":"https://avatars.githubusercontent.com/u/2822992?v=4","gravatar_id":"","url":"https://api.github.com/users/danielkwinsor","html_url":"https://github.com/danielkwinsor","followers_url":"https://api.github.com/users/danielkwinsor/followers","following_url":"https://api.github.com/users/danielkwinsor/following{/other_user}","gists_url":"https://api.github.com/users/danielkwinsor/gists{/gist_id}","starred_url":"https://api.github.com/users/danielkwinsor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielkwinsor/subscriptions","organizations_url":"https://api.github.com/users/danielkwinsor/orgs","repos_url":"https://api.github.com/users/danielkwinsor/repos","events_url":"https://api.github.com/users/danielkwinsor/events{/privacy}","received_events_url":"https://api.github.com/users/danielkwinsor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-28T21:27:08Z","updated_at":"2017-06-28T21:27:08Z","author_association":"CONTRIBUTOR","body":"I spent too long on the unit test and gave up.  It's much too hard to mock something coming from a constructor without powermockito.  Here's the code plus docs.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311797086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311836976","html_url":"https://github.com/openzipkin/zipkin/issues/1630#issuecomment-311836976","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1630","id":311836976,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTgzNjk3Ng==","user":{"login":"eacdy","id":9031050,"node_id":"MDQ6VXNlcjkwMzEwNTA=","avatar_url":"https://avatars.githubusercontent.com/u/9031050?v=4","gravatar_id":"","url":"https://api.github.com/users/eacdy","html_url":"https://github.com/eacdy","followers_url":"https://api.github.com/users/eacdy/followers","following_url":"https://api.github.com/users/eacdy/following{/other_user}","gists_url":"https://api.github.com/users/eacdy/gists{/gist_id}","starred_url":"https://api.github.com/users/eacdy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eacdy/subscriptions","organizations_url":"https://api.github.com/users/eacdy/orgs","repos_url":"https://api.github.com/users/eacdy/repos","events_url":"https://api.github.com/users/eacdy/events{/privacy}","received_events_url":"https://api.github.com/users/eacdy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T01:29:34Z","updated_at":"2017-06-29T01:29:34Z","author_association":"NONE","body":"@ImFlog @adriancole Thans a lot. ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311836976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311884603","html_url":"https://github.com/openzipkin/zipkin/pull/1622#issuecomment-311884603","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1622","id":311884603,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTg4NDYwMw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T07:24:21Z","updated_at":"2017-06-29T07:24:21Z","author_association":"MEMBER","body":"Thanks very much @danielkwinsor! (and thanks for the timeboxed attempt on tests.. I'll copy you on a test commit)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311884603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311920763","html_url":"https://github.com/openzipkin/zipkin/pull/1637#issuecomment-311920763","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1637","id":311920763,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTkyMDc2Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T10:00:00Z","updated_at":"2017-06-29T10:00:00Z","author_association":"MEMBER","body":"tell you what... I'm going to take a chance and merge this. If it was a bad choice, we will hear about it  and revert. Thanks!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311920763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311927396","html_url":"https://github.com/openzipkin/zipkin/pull/1604#issuecomment-311927396","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1604","id":311927396,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTkyNzM5Ng==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T10:30:28Z","updated_at":"2017-06-29T10:30:28Z","author_association":"MEMBER","body":"I will help merge this in. thanks for raising this!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311927396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311938252","html_url":"https://github.com/openzipkin/zipkin/pull/1604#issuecomment-311938252","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1604","id":311938252,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTkzODI1Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T11:24:35Z","updated_at":"2017-06-29T11:24:35Z","author_association":"MEMBER","body":"Thanks for showing the bug, I merged your test in and https://github.com/openzipkin/zipkin/pull/1640 fixes it","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311938252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311958757","html_url":"https://github.com/openzipkin/zipkin/pull/1589#issuecomment-311958757","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1589","id":311958757,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMTk1ODc1Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T13:00:05Z","updated_at":"2017-06-29T13:00:05Z","author_association":"MEMBER","body":"there might be a propagation bug in brave-cassandra, as this trace looks like it has spans for other traces inside..\r\n\r\n<img width=\"1223\" alt=\"screen shot 2017-06-29 at 2 58 10 pm\" src=\"https://user-images.githubusercontent.com/64215/27688643-9507bcee-5cdb-11e7-98fd-0e76ea4489f6.png\">\r\n\r\nstarted via `STORAGE_TYPE=cassandra3 SELF_TRACING_ENABLED=true java -jar ./zipkin-server/target/zipkin-server-*exec.jar` cc @llinder ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/311958757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312045357","html_url":"https://github.com/openzipkin/zipkin/pull/1564#issuecomment-312045357","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1564","id":312045357,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjA0NTM1Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T17:53:31Z","updated_at":"2017-06-29T17:53:31Z","author_association":"MEMBER","body":"merging this as cassandra3 is experimental and leaving this unmerged keeps the code broken. Will try and merge in the other things so we can follow-up with tests.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312045357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312067264","html_url":"https://github.com/openzipkin/zipkin/pull/1573#issuecomment-312067264","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1573","id":312067264,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjA2NzI2NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T18:56:59Z","updated_at":"2017-06-29T18:56:59Z","author_association":"MEMBER","body":"ok I rejigged a little on the tests. One thing I had to do was throttle the tests not to write so much at a time to the docker cassandra, as it makes it all crash and burn with BusyPoolException. There are two failing tests now, which we can take care of afterwards.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312067264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312074542","html_url":"https://github.com/openzipkin/zipkin/pull/1579#issuecomment-312074542","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1579","id":312074542,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjA3NDU0Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T19:26:56Z","updated_at":"2017-06-29T19:26:56Z","author_association":"MEMBER","body":"I rebased and squashed this for you. need to do another pass on review as not sure where we left off","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312074542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312086190","html_url":"https://github.com/openzipkin/zipkin/pull/1579#issuecomment-312086190","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1579","id":312086190,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjA4NjE5MA==","user":{"login":"semyonslepov","id":27204211,"node_id":"MDQ6VXNlcjI3MjA0MjEx","avatar_url":"https://avatars.githubusercontent.com/u/27204211?v=4","gravatar_id":"","url":"https://api.github.com/users/semyonslepov","html_url":"https://github.com/semyonslepov","followers_url":"https://api.github.com/users/semyonslepov/followers","following_url":"https://api.github.com/users/semyonslepov/following{/other_user}","gists_url":"https://api.github.com/users/semyonslepov/gists{/gist_id}","starred_url":"https://api.github.com/users/semyonslepov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/semyonslepov/subscriptions","organizations_url":"https://api.github.com/users/semyonslepov/orgs","repos_url":"https://api.github.com/users/semyonslepov/repos","events_url":"https://api.github.com/users/semyonslepov/events{/privacy}","received_events_url":"https://api.github.com/users/semyonslepov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-29T19:54:20Z","updated_at":"2017-06-29T19:54:57Z","author_association":"NONE","body":"I'm not sure as well, hope I'll find time finally and work on it","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312086190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312207251","html_url":"https://github.com/openzipkin/zipkin/issues/1229#issuecomment-312207251","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1229","id":312207251,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjIwNzI1MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T08:24:02Z","updated_at":"2017-06-30T08:24:02Z","author_association":"MEMBER","body":"out in zipkin 1.27","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312207251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312256416","html_url":"https://github.com/openzipkin/zipkin/issues/1243#issuecomment-312256416","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1243","id":312256416,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjI1NjQxNg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T12:39:05Z","updated_at":"2017-06-30T12:39:05Z","author_association":"MEMBER","body":"fyi, those who need to trace kafka via one-way approach can likely do so using 0.11 Brave implementation may follow here https://github.com/openzipkin/brave/issues/211","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312256416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312264143","html_url":"https://github.com/openzipkin/zipkin/issues/1243#issuecomment-312264143","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1243","id":312264143,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjI2NDE0Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T13:15:38Z","updated_at":"2017-06-30T13:15:38Z","author_association":"MEMBER","body":"In a recent tracing workshop, we were able to elaborate a bit on async tracing. In many cases, new traces are not needed. Ex if propagation does not imply sharing spans, you can do single producer multiple consumer as normal spans in the same trace. Here's a diagram describing most concerns\r\n\r\n```\r\n    ┌──────────────────────────────┐             ┌───────────────────────────────────────────┐\r\n    │   RPC with Async Callbacks   │             │                 Messaging                 │\r\n    ├──────────────────────────────┤             ├───────────────────────────────────────────┤\r\n    │                              │             │                                           │\r\n    │ request-response             │      ┌──────▶ Single Producer Single Consumer           │\r\n    │                              │      │      │                                           │\r\n    │   deferring completion       │      │      │ No guarantee of only one consumer from    │\r\n    │    onto a different thread   │      │      │ the POV of the producer. No guarantee     │\r\n    │                              │      │      │ of the scale of latency between producer  │\r\n    │                              │      │      │ and consumer. Can consider collapsing     │\r\n    │                              │      │      │ part of the timeline.                     │\r\n    │ one-way                      │      │      │                                           │\r\n    │                              │      │      │                                           │\r\n    │   breaks assumptions of      │      │      │ Single Producer Multiple Consumer         │\r\n    │   caller knowing when the    │──────▶      │                                           │\r\n    │   request finished           │             │ Breaks shared span model, ex each consumer│\r\n    │                              │             │ may accidentally use the same span ID     │\r\n    │   depending on POV knowing   │             │ Harder to visualize if there are varied   │\r\n    │   a request finished may     │             │ time scales per consumer. That said, each │\r\n    │   be less important than if  │             │ consumer can still work as a child span   │\r\n    │   a caller was blocked       │             │                                           │\r\n    │                              │             │                                           │\r\n    │                              │             │                                           │\r\n    └──────────────────────────────┘             └───────────────────────────────────────────┘\r\n\r\n    ┌─────────────────────────────────┐           ┌───────────────────────────────────────────┐\r\n    │            Batching             │           │        Distributed Flow Processing        │\r\n    ├─────────────────────────────────┤           ├───────────────────────────────────────────┤\r\n    │                                 │           │                                           │\r\n    │ Examples are coallesced writes  │           │ Inter-process Streams (like Spark)        │\r\n    │ or flushing. A batch can be a   │           │                                           │\r\n    │ separate trace with links added │           │ The user can define a join/zip/etc which  │\r\n    │ for each enclosed element. The  │           │ may combine work started in multiple      │\r\n    │ root is the batch. Each inserted│           │ traces. Phases tend to be coarse grained  │\r\n    │ span is a direct child.         │           │ which maps to fewer spans. Challenge is   │\r\n    │                                 │           │ if we can detect or assist in how to      │\r\n    │ Representing the batch explains │           │ represent this (ex like we do in batching)│\r\n    │ worst case latency like if there│           │                                           │\r\n    │ was a long write ahead of you   │           │ How do we address latency of a data flow? │\r\n    │                                 │           │                                           │\r\n    │ Also could use correlation id   │           └──────────────────┬────────────────────────┘\r\n    │ for the batch or another parent │                              │\r\n    │                                 │                              │\r\n    │                                 │                              │\r\n    │                                 │                              │\r\n    │                                 │                              │\r\n    └─────────────────────────────────┘                              │\r\n                                                                     │\r\n                                                        ┌────────────┴───────────────────────┐\r\n┌───────────────────────────────────────────┐           │                                    │\r\n│   Intra-process Streams (like Reactor)    │           │Apis look the same, but challenges  │\r\n├───────────────────────────────────────────┤           │can be different. For example,      │\r\n│                                           │           │reactive streams define threading   │\r\n│ Intra-process Streams (like Reactor)      │           │semantics which can be helpful in   │\r\n│ Automatic instrumentation challenges:     │           │understanding how an application    │\r\n│ Granularity challenges include small as   │     ┌─────┤behaves. Data flows have coarser    │\r\n│ clock ticks. Infinite sequences exist.    ├─────┘     │granularity which maps easier to    │\r\n│ No way to tell by type if a flux will end │           │separate spans.                     │\r\n│ and many operators dont have metadata to  │           │                                    │\r\n│ indicate if it is a grouping command or   │           │Both break models or visualizations │\r\n│ not. Notable exception is parallel flux.  │           │that assume a tree shape (ex joins  │\r\n│                                           │           │are possible in either). Both can be│\r\n│ In cases where you create the source, ex  │           │infinite, though each process w/in  │\r\n│ web flux, you can know for sure it is     │           │the flow has a beginning and end.   │\r\n│ finite and how model spans on behalf of   │           │                                    │\r\n│ requests.                                 │           └────────────────────────────────────┘\r\n│                                           │\r\n│ Manual instrumentation is possible where  │\r\n│ you can materialize a context which will  │\r\n│ be available at any point in the flux.    │\r\n└───────────────────────────────────────────┘\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312264143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312264299","html_url":"https://github.com/openzipkin/zipkin/issues/1244#issuecomment-312264299","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1244","id":312264299,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjI2NDI5OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T13:16:20Z","updated_at":"2017-06-30T13:16:59Z","author_association":"MEMBER","body":"Here is a convenience paste of notes on linked traces from a recent workshop. Notably they aren't used primarily for async (discussion about async is [here](https://github.com/openzipkin/zipkin/issues/1243#issuecomment-312264143))\r\n\r\nLinked traces from [Tracing Workshop Notes](https://docs.google.com/document/d/1tSDlxOXnxWxl7v1FC-3r-CK15sknAWk42Ndkm5XkZ2U/edit#heading=h.1v6bzsby9ffw)\r\n \r\nMost common use case is how to represent batching (like flushing to disk). Could this be multiple parents? In this case the batch is an independent operation that precedes what it is batching. This consolidating relationship exists, but is not strictly parent/child. The original purpose of links is similar in concept to the reference concept in OpenTracing. Look for this in BigTable client (soon :))\r\n \r\nLater use cases of links included how to handle multi-tenancy. For example, how do you handle a request that crosses multiple organizations (Ex tenant and the cloud itself). If you render a normal parent/child, a malicious client could send a constant trace ID and mess up all the traces in google’s trace repository. Another abuse case is injecting traffic and observing the exit points, allowing them to understand some internals of the architecture. Linking can obscure the “internal trace” while still allowing causality. In implementation, a trace is restarted entering one network, but linked back to the requestors ID. The way this usually works is that you can see that there’s a link to another trace, but not necessarily see the data itself. \r\n \r\nAnother use case is long queries. How do you deal with pipelines that could take days to complete? Using links If you encode timestamp into a trace ID, you cannot determine at runtime if there’s a long trace in progress.\r\n \r\nSergey mentioning some customers are quite large and may be tempted to use links any time they exit their network. Bogdan replying that overuse is possible, but not sure a solution. Documentation needs to be good with advice about when to use links and why, perhaps advising links as an edge case.\r\n \r\nSergey ask about sampling and links, particularly sampling based on trace IDs. Bogdan says by propagating the sampling decision you don’t need to look at the value of the trace ID afterwards. By default accept the decision from the caller, with some thought about abuse in the future (maybe throttling). S: How does batching apply to sampling? B: if one trace in the batch is sampled, the batch is sampled.\r\n \r\nSome linking policy have to do with trust level, which is likely higher for paying users than anonymous ones.\r\n \r\n(Trace, span, link, attributes) is an example format\r\n \r\nThe reason for a trace ID is to identify all spans. Now, you have 10 requests coming with 10 different trace IDs, you can’t make them one.\r\n \r\nOne of the problems with tracing (for service owners) is how to know when a trace is complete (and ready for analysis). Use of links can help break up longer work into units that can be analyzed, links being the part that can combine “finished” work.\r\n \r\nOne guiding policy is to not put into the client what can be done on the server. In google, they defer to the latter to reduce critical path overhead.\r\n \r\nOne approach to visualizing a batch is to chop the heads off the traces linked to the batch, so they appear as children of the batch (ignoring span in each trace preceding the batch)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312264299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312302709","html_url":"https://github.com/openzipkin/zipkin/pull/1636#issuecomment-312302709","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1636","id":312302709,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMwMjcwOQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T15:45:28Z","updated_at":"2017-06-30T15:45:28Z","author_association":"MEMBER","body":"I suspect there is no value in a list here. I will switch and if tests\nstill pass, merge it as a set. Nice catch.\n\nOn 30 Jun 2017 5:10 pm, \"joel-airspring\" <notifications@github.com> wrote:\n\n> *@joel-airspring* commented on this pull request.\n>\n> I like this refactor, and will base my changes on them.\n>\n> Quick question: What's the use case for this being a list:\n>\n>  +  private final SortedMultimap<Long, Pair<Long>> traceIdToTraceIdTimeStamps =\n>  +      new LinkedListSortedMultimap<>(Long::compareTo);\n>\n> instead of a LinkedHashSetMultiMap?\n>\n> Are you anticipating cases where you want to know that\n>\n> aaaa --> [<aaaa,July4>, <aaaa,July4>, <aaaa,July5>]\n>\n> as opposed to just\n>\n> aaaa --> (<aaaa,July4>, <aaaa,July5>)\n>\n> (Notice that the first example can and does contain duplicates because\n> it's a linked list.)\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/openzipkin/zipkin/pull/1636#pullrequestreview-47417599>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAD61wiVQlEOGGm-rEzMFr3tG4IJYtovks5sJQ_TgaJpZM4OHv77>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312302709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312308217","html_url":"https://github.com/openzipkin/zipkin/pull/1636#issuecomment-312308217","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1636","id":312308217,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMwODIxNw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:07:01Z","updated_at":"2017-06-30T16:07:01Z","author_association":"MEMBER","body":"@joel-airspring keen eye: LinkedListSortedMultimap would not have helped before or after this change","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312308217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312309025","html_url":"https://github.com/openzipkin/zipkin/pull/1636#issuecomment-312309025","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1636","id":312309025,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMwOTAyNQ==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:10:06Z","updated_at":"2017-06-30T16:10:06Z","author_association":"CONTRIBUTOR","body":"Thanks.  I only noticed it because I hit a problem with that data structure when trying to evict spans!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312309025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312311357","html_url":"https://github.com/openzipkin/zipkin/pull/1636#issuecomment-312311357","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1636","id":312311357,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMxMTM1Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:20:01Z","updated_at":"2017-06-30T16:20:01Z","author_association":"MEMBER","body":"oops killing linkedlist broke a test :) It supported reading back raw spans (which helps show when instrumentation sent the same spans twice)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312311357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312312737","html_url":"https://github.com/openzipkin/zipkin/pull/1641#issuecomment-312312737","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1641","id":312312737,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMxMjczNw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:26:03Z","updated_at":"2017-06-30T16:26:03Z","author_association":"MEMBER","body":"ty again!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312312737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312312777","html_url":"https://github.com/openzipkin/zipkin/pull/1636#issuecomment-312312777","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1636","id":312312777,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMxMjc3Nw==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:26:16Z","updated_at":"2017-06-30T16:26:16Z","author_association":"CONTRIBUTOR","body":"Bummer!  I had run the zipkin/zipkin tests, but not those zipkin/zipkin-junit tests that failed.  Thanks for checking.  I'll keep rolling with the existing linked list implementation.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312312777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312312849","html_url":"https://github.com/openzipkin/zipkin/pull/1642#issuecomment-312312849","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1642","id":312312849,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMxMjg0OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:26:33Z","updated_at":"2017-06-30T16:26:33Z","author_association":"MEMBER","body":"thanks so much for this.. NaN is not a great experience.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312312849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312313077","html_url":"https://github.com/openzipkin/zipkin/pull/1636#issuecomment-312313077","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1636","id":312313077,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjMxMzA3Nw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T16:27:34Z","updated_at":"2017-06-30T16:27:34Z","author_association":"MEMBER","body":">\n> Bummer! I had run the zipkin/zipkin tests, but not those\n> zipkin/zipkin-junit tests that failed. Thanks for checking. I'll keep\n> rolling with the existing linked list implementation.\n>\nNote: I moved the linkedlist to the primary data source (as opposed to the\nindex where it was in the last diff you saw)\n\n>\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312313077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312343735","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312343735","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312343735,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM0MzczNQ==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T18:40:09Z","updated_at":"2017-06-30T18:40:09Z","author_association":"CONTRIBUTOR","body":"@adriancole Here's a second pass.  I think I've incorporated all the feedback.\r\n\r\n1. It's based on your latest refactor.\r\n2. All metrics/bookkeeping stuff is gone.\r\n3. I used your evictToRecoverSpans() and generally changed all terminology from 'purge' to 'evict'.  Much better nomenclature!\r\n4. It does have the same performance profile as my original checkin.  Before it starts evicting, adding new spans takes 2-5 ms, but after it starts evicting, it takes 200 - 400 ms (@ 1M spans).  I'd like to improve that.\r\n5. I added a size() method to SortedMultimap, but it doesn't handle properly the case of using an iterator to remove items.  The current code doesn't depend on size() in these cases, but it's kind of ugly, and I'd like to fix that.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312343735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312351281","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312351281","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312351281,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM1MTI4MQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T19:14:36Z","updated_at":"2017-06-30T19:14:36Z","author_association":"MEMBER","body":"thx. mind rebasing over master (having merged). It will make it easier to\nsee what's new.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312351281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312352094","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312352094","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312352094,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM1MjA5NA==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T19:18:25Z","updated_at":"2017-06-30T19:18:25Z","author_association":"CONTRIBUTOR","body":"Rebased.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312352094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312352928","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312352928","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312352928,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM1MjkyOA==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T19:22:45Z","updated_at":"2017-06-30T19:22:45Z","author_association":"CONTRIBUTOR","body":"One other comment:  I made the documentation describing the in-memory data layout a separate commit so it can be axed if you want.  It's helpful to to me to see things visually like that, but you may not love it since it's not super-precise. ","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312352928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312353983","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312353983","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312353983,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM1Mzk4Mw==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T19:28:01Z","updated_at":"2017-06-30T19:28:01Z","author_association":"MEMBER","body":"one note on the internals of sortedmultimap:\n\nit might be easiest to reason with synchronization as coarse grained. ex\nsynchronize every method, then as performance requires, tidy the locks. I\nknow I started the suggestion towards finer policy, but realized I missed a\nfew spots :)\n\nFor ex copy-out in the methods which returns collections, which ensures\nread ops don't get hit when eviction is in progress. Then, just need to\nmore carefully check null on gets resulting from an iteration of those\ncollections (ex maybe there's a race condition when eviction is in\nprogress, where you iterate a key that was there when you read the list,\nbut not when you went to get the spans associated with it).\n\nonce this naive stuff is in place, then we can go back and tune for\nconcurrency as needed and as doesn't complicate things too much.\n\nsound like a plan?\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312353983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312359453","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312359453","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312359453,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM1OTQ1Mw==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T19:55:55Z","updated_at":"2017-06-30T19:55:55Z","author_association":"CONTRIBUTOR","body":"> it might be easiest to reason with synchronization as coarse grained. ex\r\nsynchronize every method, then as performance requires, tidy the locks. I\r\nknow I started the suggestion towards finer policy, but realized I missed a\r\nfew spots :)\r\n\r\nDoes that mean to add 'synchronized' to every mutating method?  Those would be put() and remove().  (And, of course, take out any fine-grained synchronize blocks within the methods.)\r\n\r\n> For ex copy-out in the methods which returns collections, which ensures\r\nread ops don't get hit when eviction is in progress. Then, just need to\r\nmore carefully check null on gets resulting from an iteration of those\r\ncollections (ex maybe there's a race condition when eviction is in\r\nprogress, where you iterate a key that was there when you read the list,\r\nbut not when you went to get the spans associated with it).\r\n\r\nI'm not quite sure what you mean by 'copy-out'.  Do you mean that every time we do a get(), we should make a copy of the data and return that?  I guess that means we either couldn't mutate that copy or if we did, it would have to be merged back into the real data, which sounds painful.\r\n\r\nPerhaps it would simplify things if we only made changes directly via the API of SortedMultimap (and not by getting a linked list, for example, and deleting its contents directly.  Maybe add a synchronized removeIf(key, <condition>) method to SortedMultimap?  And use it like:\r\n\r\nserviceToTraceIdTimeStamp.removeIf(\"foo\", \"id:aaaaa\");  --> Go through the list for service name \"foo\" and remove any entries that have an traceId of aaaaa.\r\n\r\nAm I headed in the right direction here?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312359453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312366592","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312366592","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312366592,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM2NjU5Mg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T20:33:12Z","updated_at":"2017-06-30T20:33:12Z","author_association":"MEMBER","body":">\n> Does that mean to add 'synchronized' to every mutating method? Those would\n> be put() and remove(). (And, of course, take out any fine-grained\n> synchronize blocks within the methods.)\n>\n> if we don't synchronize the reads, then they wouldn't see writes made by\nother threads, right? Def yeah take out synchronized inside them. Think of\nit the same as Collections.synchronizedX for our multimap\n\n> I'm not quite sure what you mean by 'copy-out'. Do you mean that every\n> time we do a get(), we should make a copy of the data and return that? I\n> guess that means we either couldn't mutate that copy or if we did, it would\n> have to be merged back into the real data, which sounds painful.\n>\n> I was thinking of a copy-out on read because I didn't expect any mutation\nexcept add (covered by the synchronized op on multimap) and delete by key\n(because we are pruning traces, all spans with a trace id, that match an\nexpression) ex spansByTraceIdTimeStamp and traceIdToTraceIdTimeStamps can\ndelete everything with a specific key on eviction.\n\neviction on traceId won't clean up serviceToTraceIdTimestamp (as trace ids\nare in the values, not the keys). This might be something solvable with a\nspecial-case method on multimap, or you can punt to GC by changing the\nvalues to weak references.\n\n> Perhaps it would simplify things if we only made changes directly via the\n> API of SortedMultimap (and not by getting a linked list, for example, and\n> deleting its contents directly. Maybe add a synchronized removeIf(key, )\n> method to SortedMultimap? And use it like:\n>\n> serviceToTraceIdTimeStamp.removeIf(\"foo\", \"id:aaaaa\"); --> Go through the\n> list for service name \"foo\" and remove any entries that have an traceId of\n> aaaaa.\n>\nyep, we'd only need something like removeIf on serviceToTraceIdTimestamp,\nand this could be a very special cased method (ex a subtype of\nSortedMultimap for serviceToTraceIdTimestamp with a typesafe\nremoveServiceIfTraceId(...)\n\nDefinitely on the right track. On later work for perf, we should put in\nJMH. You can look at zipkin-reporter-java for some examples of things if\nyou need more, but yeah you are on the right track, so keep up the good\nwork!\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312366592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312371754","html_url":"https://github.com/openzipkin/zipkin/pull/1579#issuecomment-312371754","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1579","id":312371754,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM3MTc1NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T21:00:21Z","updated_at":"2017-06-30T21:00:21Z","author_association":"MEMBER","body":"ah ok.. well anyway when you are ready for it, make github line comments or\notherwise to explain tests removed or repurposed.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312371754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312376214","html_url":"https://github.com/openzipkin/zipkin/pull/1579#issuecomment-312376214","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1579","id":312376214,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjM3NjIxNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-30T21:24:40Z","updated_at":"2017-06-30T21:24:40Z","author_association":"MEMBER","body":"test order can bite us later perhaps. maybe we should expose a way to clean\nthe cache (package private access) and make sure it is invoked in a Before\nblock?\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312376214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312449322","html_url":"https://github.com/openzipkin/zipkin/issues/1601#issuecomment-312449322","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1601","id":312449322,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ0OTMyMg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-01T18:50:55Z","updated_at":"2017-07-01T18:50:55Z","author_association":"MEMBER","body":"ping! weeks do get away from us, sending one nag just in case the next one doesn't :D","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312449322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312449699","html_url":"https://github.com/openzipkin/zipkin/issues/1460#issuecomment-312449699","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1460","id":312449699,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ0OTY5OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-01T18:58:07Z","updated_at":"2017-07-01T18:58:07Z","author_association":"MEMBER","body":"The \"10k span problem\" was discussed at the most recent tracing workshop. We are not alone, for example even Google's UI doesn't render with thousands of spans per trace.\r\n\r\nHere are some options\r\n* aggregating the spans and putting in timing, possibly on the collection side.\r\n  * basically adding a tag that says spans were dropped\r\n* drop span and replace with annotation\r\n  * have the UI code convert large amounts of spans into annotations before they are rendered\r\n  * note large orders of annotations could also crash the UI so should be tested\r\n* add a control to collapse parts of a trace that are too large\r\n  * leave the span data alone, but collapse spans which have over a certain amount of children\r\n* add a dependency graph per trace\r\n  * when there are a lot of spans, a trace ID scoped dependency graph could be useful","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312449699/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312450022","html_url":"https://github.com/openzipkin/zipkin/issues/1628#issuecomment-312450022","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1628","id":312450022,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ1MDAyMg==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-01T19:04:31Z","updated_at":"2017-07-01T19:04:31Z","author_association":"MEMBER","body":"so for indexing you probably don't need to index parent id. Ironically, duration is something sometimes indexed (as the api allows you to search for duration < > some value. In mysql schema we treat annotation and binary annotation the same (making annotation have a dummy type).\r\nOne trick is being able to read-back what you've written. The SpanStoreTest base class will help with this.\r\n\r\nhope these notes help (plus looks like you've got a fair amount of interest here!)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312450022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312477994","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312477994","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312477994,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ3Nzk5NA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-02T08:28:49Z","updated_at":"2017-07-02T08:28:49Z","author_association":"MEMBER","body":"thinking about picking this up","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312477994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312478395","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312478395","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312478395,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ3ODM5NQ==","user":{"login":"basvanbeek","id":7205296,"node_id":"MDQ6VXNlcjcyMDUyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7205296?v=4","gravatar_id":"","url":"https://api.github.com/users/basvanbeek","html_url":"https://github.com/basvanbeek","followers_url":"https://api.github.com/users/basvanbeek/followers","following_url":"https://api.github.com/users/basvanbeek/following{/other_user}","gists_url":"https://api.github.com/users/basvanbeek/gists{/gist_id}","starred_url":"https://api.github.com/users/basvanbeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/basvanbeek/subscriptions","organizations_url":"https://api.github.com/users/basvanbeek/orgs","repos_url":"https://api.github.com/users/basvanbeek/repos","events_url":"https://api.github.com/users/basvanbeek/events{/privacy}","received_events_url":"https://api.github.com/users/basvanbeek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-02T08:38:46Z","updated_at":"2017-07-02T08:38:46Z","author_association":"MEMBER","body":"One thing to think about... maybe do this format in proto3 as it supports a canonical encoding in JSON so we have a simple roll your own JSON model but at the same time can handle higher performance binary encoding/decoding.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312478395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312478890","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312478890","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312478890,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ3ODg5MA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-02T08:50:30Z","updated_at":"2017-07-02T08:50:30Z","author_association":"MEMBER","body":">\n> One thing to think about... maybe do this format in proto3 as it supports\n> a canonical encoding in JSON so we have a simple roll your own JSON model\n> but at the same time can handle higher performance binary encoding/decoding.\n>\ninteresting idea. regardless we'd want a json schema, too (ex as we sortof\ndo in the openapi spec)\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312478890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312483335","html_url":"https://github.com/openzipkin/zipkin/issues/1614#issuecomment-312483335","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1614","id":312483335,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ4MzMzNQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-02T10:31:12Z","updated_at":"2017-07-02T10:31:12Z","author_association":"MEMBER","body":"so.. folks interested, please click thumbs up or otherwise note interest! Pretty sure there is interest, but we'd like to make sure this is easy to see (as we can ping you when any feature comes out)","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312483335/reactions","total_count":15,"+1":15,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312483835","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312483835","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312483835,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjQ4MzgzNQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-02T10:41:32Z","updated_at":"2017-07-02T10:41:32Z","author_association":"MEMBER","body":"So first wave will be implementing the collection side, and a storage impl for elasticsearch. This can flex as we review the implementation.\r\n\r\nNote: We aim to reuse hex encoding of IDs as they exist today (in lower-hex). This makes sure existing log integration patterns don't break (ex logging usually adds trace ID to context and that is lower-hex which is same as json and headers). This is particularly useful in storage backends that contain both logging and tracing data (ex Elasticsearch).\r\n\r\nNote part deux: usually, collectors receive single-host spans, but we'll need to address shared spans sooner or later. Kafka pipelines exist (theoretically) that send merged traces directly to storage (ex via zipkin-sparkstreaming). Also, people sometimes save off json (which has merged  spans) and POST it later. While not a data format issue, it is an integration issue that will bite us similarly to how it bit stackdriver when a storage layer like ES stores single-host spans. https://github.com/GoogleCloudPlatform/stackdriver-zipkin/blob/master/translation/src/main/java/com/google/cloud/trace/zipkin/translation/SpanTranslator.java\r\n\r\nI'll do my best to keep all operational notes like above close to the code, so that nothing is surprising.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312483835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312692753","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312692753","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312692753,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY5Mjc1Mw==","user":{"login":"SergeyKanzhelev","id":9950081,"node_id":"MDQ6VXNlcjk5NTAwODE=","avatar_url":"https://avatars.githubusercontent.com/u/9950081?v=4","gravatar_id":"","url":"https://api.github.com/users/SergeyKanzhelev","html_url":"https://github.com/SergeyKanzhelev","followers_url":"https://api.github.com/users/SergeyKanzhelev/followers","following_url":"https://api.github.com/users/SergeyKanzhelev/following{/other_user}","gists_url":"https://api.github.com/users/SergeyKanzhelev/gists{/gist_id}","starred_url":"https://api.github.com/users/SergeyKanzhelev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergeyKanzhelev/subscriptions","organizations_url":"https://api.github.com/users/SergeyKanzhelev/orgs","repos_url":"https://api.github.com/users/SergeyKanzhelev/repos","events_url":"https://api.github.com/users/SergeyKanzhelev/events{/privacy}","received_events_url":"https://api.github.com/users/SergeyKanzhelev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-03T16:50:56Z","updated_at":"2017-07-03T16:51:17Z","author_association":"NONE","body":"What do you think of making this JSON two-layered - envelope that has a basic correlation fields and versioned&typed payload. Something along the lines:\r\n\r\n```\r\n{\r\n  \"traceId\": 32lowerHexCharacters,\r\n  \"parentId\": 16lowerHexCharactersOrAbsentForRoot,\r\n  \"kind\": enum(SPAN_CLIENT|SPAN_SERVER|SPAN_Local|ANNOTATION),\r\n  \"debug\": trueOrAbsent,\r\n  \"data\": \r\n    {\r\n      \"id\": 16lowerHexCharacters,\r\n      \"name\": string,\r\n      \"finishTimestamp\": uint53EpochMicros,\r\n      \"localEndpoint\": existingEndpointType,\r\n      \"remoteEndpoint\": existingEndpointTypeOrAbsent,\r\n      \"tags\": {\r\n        string: string,\r\n        ...\r\n      },\r\n      \"annotations\": [\r\n        {\"timestamp\": uint53EpochMicros, \"value\": string},\r\n        ...\r\n      ],\r\n    }\r\n}\r\n```\r\n\r\nThis way you can solve some scenarios like:\r\n- You can send annotation separately from span without the need to specify the end time:\r\n    ``` \r\n    {\r\n      \"traceId\": 32lowerHexCharacters,\r\n      \"parentId\": 16lowerHexCharactersOrAbsentForRoot,\r\n      \"kind\": ANNOTATION,\r\n      \"debug\": trueOrAbsent,\r\n      \"data\": \r\n      {\r\n          \"name\": string,\r\n          \"localEndpoint\": existingEndpointType,\r\n          \"tags\": {\r\n            string: string,\r\n            ...\r\n          },\r\n    ```\r\n- Some annotations can be forced out of span in future so they could be indexed and queried easier\r\n- Versioning of span types may be easier in future. Just encode version in `kind` field\r\n- Other types like traces/exceptions/etc. may be supported as a payload in future. Those types will be correlated with traces without the need to change UI and tools. If type is unknown - tool can simply show JSON","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312692753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312698816","html_url":"https://github.com/openzipkin/zipkin/issues/1614#issuecomment-312698816","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1614","id":312698816,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjY5ODgxNg==","user":{"login":"cforce","id":393286,"node_id":"MDQ6VXNlcjM5MzI4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/393286?v=4","gravatar_id":"","url":"https://api.github.com/users/cforce","html_url":"https://github.com/cforce","followers_url":"https://api.github.com/users/cforce/followers","following_url":"https://api.github.com/users/cforce/following{/other_user}","gists_url":"https://api.github.com/users/cforce/gists{/gist_id}","starred_url":"https://api.github.com/users/cforce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cforce/subscriptions","organizations_url":"https://api.github.com/users/cforce/orgs","repos_url":"https://api.github.com/users/cforce/repos","events_url":"https://api.github.com/users/cforce/events{/privacy}","received_events_url":"https://api.github.com/users/cforce/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-03T17:24:36Z","updated_at":"2017-07-03T17:24:36Z","author_association":"NONE","body":"No idea where I gets thumbs here 👍","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312698816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312726712","html_url":"https://github.com/openzipkin/zipkin/pull/1631#issuecomment-312726712","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1631","id":312726712,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjcyNjcxMg==","user":{"login":"joel-airspring","id":4552139,"node_id":"MDQ6VXNlcjQ1NTIxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/4552139?v=4","gravatar_id":"","url":"https://api.github.com/users/joel-airspring","html_url":"https://github.com/joel-airspring","followers_url":"https://api.github.com/users/joel-airspring/followers","following_url":"https://api.github.com/users/joel-airspring/following{/other_user}","gists_url":"https://api.github.com/users/joel-airspring/gists{/gist_id}","starred_url":"https://api.github.com/users/joel-airspring/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joel-airspring/subscriptions","organizations_url":"https://api.github.com/users/joel-airspring/orgs","repos_url":"https://api.github.com/users/joel-airspring/repos","events_url":"https://api.github.com/users/joel-airspring/events{/privacy}","received_events_url":"https://api.github.com/users/joel-airspring/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-03T20:19:02Z","updated_at":"2017-07-03T20:19:02Z","author_association":"CONTRIBUTOR","body":"Third pass:\r\n\r\n1. All methods on InMemorySpanStore synchronized.  This is the simplest possible way to ensure that every read sees every write.\r\nWith 4 clients writing simultaneously, it's 2-10ms for each span submission (~30 at a time).  Once the evicting starts @1M spans, it drops to 250-2000 ms.\r\n2. I added a subclass of SortedMultimap for the serviceToTraceIdTimeStamp type with a removeServiceIfTraceId() method.\r\nWith 4 clients writing simultaneously, it's 2-10ms for each span submission (~30 at a time).  Once the evicting starts @1M spans, it drops to 400-4000 ms.  (I don't know why this is slower than case 1, above)\r\n3. In another commit, I enhanced removeServiceIfTraceId() to terminate early based on latest time stamp.  This cut the time when evicting to double-digit ms when evicting starts @1M spans.\r\n\r\nIs there anything else you'd like for this PR?  It seems to be fast enough with the coarse locking with 4 clients sending data simultaneously while evicting @ 1 million spans.","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312726712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312770114","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312770114","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312770114,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc3MDExNA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T03:10:11Z","updated_at":"2017-07-04T03:10:11Z","author_association":"MEMBER","body":">\n> What do you think of making this JSON two-layered - envelope that has a\n> basic correlation fields and versioned&typed payload. Something along the\n> lines:\n>\nFirst thoughts were that this design was to reduce nesting, not add to it\n:) That said, at least this nesting will not introduce a collection to\nsearch through. Will comment more below, and regardless appreciate your\ninterest.\n\n> This way you can solve some scenarios like:\n>\n>    - You can send annotation separately from span without the need to\n>    specify the end time:\n>\n> in-flight work has both timestamps optional, as it was an oversight to\nmake them mandatory (for tags, not annotations, but anyway yeah). Reason is\nthat there are use cases where data happens after the fact (even if it is\nexceptional and usually related to timeouts). Adding another layer of\nnesting doesn't make this easier or harder, imho.\n\n>\n>    - Some annotations can be forced out of span in future so they could\n>    be indexed and queried easier\n>\n> yeah that was an oversight in the sketch, not the impl. It doesn't require\na data envelope to handle.\n\n>\n>    - Versioning of span types may be easier in future. Just encode\n>    version in kind field\n>\n> The kind field is a shortcut currently used to eliminate bookend\nannotations of \"cs\" \"sr\" etc. That's why it is an enum, not a open type.\nEncoding other data into that field would not be supported. For versioning,\nI think it is useful to define a schema and possibly a proto3 mapping.\n\n>\n>    - Other types like traces/exceptions/etc. may be supported as a\n>    payload in future.\n>\n> We wouldn't remove fields, though possibly add ones. I would be\nunsurprised if we had an exception type at some point (in the span).\nThere's no likelihood of defining a separate \"trace\" type in zipkin (as\nopposed to a list of spans). Regardless, there's no issue tracking future\nchanges in json schema and/or proto3.\n\n\n>\n>    - Those types will be correlated with traces without the need to\n>    change UI and tools. If type is unknown - tool can simply show JSON\n>\n> There are clear benefits for having this a straight-forward data type,\nincluding natural objects when code is generated from it. Unknown fields\nwithin this type can be skipped, as they are now, but changing this from a\ndata type to be a generic carrier is beyond the intent.\n\nData type currently fits the model of existing tracers who post some or all\nof a span as a unit. There's no expectation that they will start sending\narbitrary data, and it is a bit early to guess how they would. Meanwhile,\nescalating this change from a data type to a trace-stained-carrier will put\nit at risk of not completing (again).\n\nTL;DR; let's keep this as a data type and fork any discussion off about a\ncoordinated trace-identifier scoped carrier as a separate issue or thread.\nLet's make sure there any evaluation of such is diversely bought-into as we\ndon't have enough hands to maintain things that aren't.\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312770114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312772503","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312772503","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312772503,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc3MjUwMw==","user":{"login":"SergeyKanzhelev","id":9950081,"node_id":"MDQ6VXNlcjk5NTAwODE=","avatar_url":"https://avatars.githubusercontent.com/u/9950081?v=4","gravatar_id":"","url":"https://api.github.com/users/SergeyKanzhelev","html_url":"https://github.com/SergeyKanzhelev","followers_url":"https://api.github.com/users/SergeyKanzhelev/followers","following_url":"https://api.github.com/users/SergeyKanzhelev/following{/other_user}","gists_url":"https://api.github.com/users/SergeyKanzhelev/gists{/gist_id}","starred_url":"https://api.github.com/users/SergeyKanzhelev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergeyKanzhelev/subscriptions","organizations_url":"https://api.github.com/users/SergeyKanzhelev/orgs","repos_url":"https://api.github.com/users/SergeyKanzhelev/repos","events_url":"https://api.github.com/users/SergeyKanzhelev/events{/privacy}","received_events_url":"https://api.github.com/users/SergeyKanzhelev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T03:33:56Z","updated_at":"2017-07-04T03:33:56Z","author_association":"NONE","body":"@adriancole thanks for clarification. My understanding of schema was wrong I thought only these fields marked \"Absent\" can be omitted:\r\n\r\n```\r\n\"kind\": enum(CLIENT|SERVER|Absent),\r\n\"remoteEndpoint\": existingEndpointTypeOrAbsent,\r\n\"debug\": trueOrAbsent\r\n```\r\n\r\nSo I wasn't clear on how you can report a span name for the runaway annotation. The intend with proposed envelope was to extract fields strictly required for correlation one level up and put all situation-specific fields inside the `data` object. Using `kind` you can strongly type those `data` objects further.\r\n\r\nAlso that proposal didn't change any data formats (except extended up `kind` to be a string) so I thought it may be incorporated now and make versioning easier in future.\r\n\r\nAnyway, I see your point that this proposal doesn't solve any major problems you have immediate plans for and creates unnecessary complexity and overhead. \r\n\r\nI really like how this schema simplify semantic of span!","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312772503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312772699","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312772699","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312772699,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc3MjY5OQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T03:36:18Z","updated_at":"2017-07-04T03:36:18Z","author_association":"MEMBER","body":">\n> @adriancole <https://github.com/adriancole> thanks for clarification. My\n> understanding of schema was wrong I thought only these fields marked\n> \"Absent\" can be omitted:\n>\nheh you are right about the absent part, just that I didn't update the\nissue after working on it yesterday and noticing the missing absent on the\ntimestamps. Will do now!\n","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312772699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312772839","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312772839","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312772839,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc3MjgzOQ==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T03:37:53Z","updated_at":"2017-07-04T03:37:53Z","author_association":"MEMBER","body":"updated about absent","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312772839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312773240","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312773240","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312773240,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc3MzI0MA==","user":{"login":"SergeyKanzhelev","id":9950081,"node_id":"MDQ6VXNlcjk5NTAwODE=","avatar_url":"https://avatars.githubusercontent.com/u/9950081?v=4","gravatar_id":"","url":"https://api.github.com/users/SergeyKanzhelev","html_url":"https://github.com/SergeyKanzhelev","followers_url":"https://api.github.com/users/SergeyKanzhelev/followers","following_url":"https://api.github.com/users/SergeyKanzhelev/following{/other_user}","gists_url":"https://api.github.com/users/SergeyKanzhelev/gists{/gist_id}","starred_url":"https://api.github.com/users/SergeyKanzhelev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SergeyKanzhelev/subscriptions","organizations_url":"https://api.github.com/users/SergeyKanzhelev/orgs","repos_url":"https://api.github.com/users/SergeyKanzhelev/repos","events_url":"https://api.github.com/users/SergeyKanzhelev/events{/privacy}","received_events_url":"https://api.github.com/users/SergeyKanzhelev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T03:42:28Z","updated_at":"2017-07-04T03:42:28Z","author_association":"NONE","body":"What about the name? Will you be able to report it when you have remote annotation only? Or it will be just empty?","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312773240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312774010","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312774010","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312774010,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc3NDAxMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T03:50:22Z","updated_at":"2017-07-04T03:50:22Z","author_association":"MEMBER","body":"good point. we can accept absent span name and use the same semantics as what we currently do for empty (which is defer the naming choice). updated","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312774010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312794700","html_url":"https://github.com/openzipkin/zipkin/issues/1499#issuecomment-312794700","issue_url":"https://api.github.com/repos/openzipkin/zipkin/issues/1499","id":312794700,"node_id":"MDEyOklzc3VlQ29tbWVudDMxMjc5NDcwMA==","user":{"login":"codefromthecrypt","id":64215,"node_id":"MDQ6VXNlcjY0MjE1","avatar_url":"https://avatars.githubusercontent.com/u/64215?v=4","gravatar_id":"","url":"https://api.github.com/users/codefromthecrypt","html_url":"https://github.com/codefromthecrypt","followers_url":"https://api.github.com/users/codefromthecrypt/followers","following_url":"https://api.github.com/users/codefromthecrypt/following{/other_user}","gists_url":"https://api.github.com/users/codefromthecrypt/gists{/gist_id}","starred_url":"https://api.github.com/users/codefromthecrypt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codefromthecrypt/subscriptions","organizations_url":"https://api.github.com/users/codefromthecrypt/orgs","repos_url":"https://api.github.com/users/codefromthecrypt/repos","events_url":"https://api.github.com/users/codefromthecrypt/events{/privacy}","received_events_url":"https://api.github.com/users/codefromthecrypt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-07-04T06:48:15Z","updated_at":"2017-07-04T06:48:15Z","author_association":"MEMBER","body":"ok made a tracking issue for this https://github.com/openzipkin/zipkin/issues/1644","reactions":{"url":"https://api.github.com/repos/openzipkin/zipkin/issues/comments/312794700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]