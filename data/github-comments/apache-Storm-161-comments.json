[{"url":"https://api.github.com/repos/apache/storm/issues/comments/171365717","html_url":"https://github.com/apache/storm/pull/1007#issuecomment-171365717","issue_url":"https://api.github.com/repos/apache/storm/issues/1007","id":171365717,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTM2NTcxNw==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:06:43Z","updated_at":"2016-01-13T17:06:43Z","author_association":"MEMBER","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171365717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700108","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700108","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700108,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxMDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:06:47Z","updated_at":"2025-01-24T14:44:18Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1007#issuecomment-171365717\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1007#issuecomment-171365717</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171366113","html_url":"https://github.com/apache/storm/pull/1006#issuecomment-171366113","issue_url":"https://api.github.com/repos/apache/storm/issues/1006","id":171366113,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTM2NjExMw==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:08:07Z","updated_at":"2016-01-13T17:08:07Z","author_association":"MEMBER","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171366113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700279","html_url":"https://github.com/apache/storm/issues/5302#issuecomment-2612700279","issue_url":"https://api.github.com/repos/apache/storm/issues/5302","id":2612700279,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAyNzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:08:09Z","updated_at":"2025-01-24T14:44:22Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1006#issuecomment-171366113\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1006#issuecomment-171366113</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171368349","html_url":"https://github.com/apache/storm/pull/1007#issuecomment-171368349","issue_url":"https://api.github.com/repos/apache/storm/issues/1007","id":171368349,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTM2ODM0OQ==","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:15:36Z","updated_at":"2016-01-13T17:15:36Z","author_association":"CONTRIBUTOR","body":"I'm also going to cherry-pick this back into the 1.0 branch.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171368349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700111","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700111","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700111,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxMTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:15:37Z","updated_at":"2025-01-24T14:44:18Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1007#issuecomment-171368349\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1007#issuecomment-171368349</a></p>\n\n<p>    I'm also going to cherry-pick this back into the 1.0 branch.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612693034","html_url":"https://github.com/apache/storm/issues/5254#issuecomment-2612693034","issue_url":"https://api.github.com/repos/apache/storm/issues/5254","id":2612693034,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTMwMzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:22:37Z","updated_at":"2025-01-24T14:41:16Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/977\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/977</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612693034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612693038","html_url":"https://github.com/apache/storm/issues/5254#issuecomment-2612693038","issue_url":"https://api.github.com/repos/apache/storm/issues/5254","id":2612693038,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTMwMzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:23:39Z","updated_at":"2025-01-24T14:41:16Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Merged to master/1.x-branch.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612693038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612698173","html_url":"https://github.com/apache/storm/issues/5288#issuecomment-2612698173","issue_url":"https://api.github.com/repos/apache/storm/issues/5288","id":2612698173,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTgxNzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:28:20Z","updated_at":"2025-01-24T14:43:29Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1003\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1003</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612698173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612698181","html_url":"https://github.com/apache/storm/issues/5288#issuecomment-2612698181","issue_url":"https://api.github.com/repos/apache/storm/issues/5288","id":2612698181,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTgxODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:28:47Z","updated_at":"2025-01-24T14:43:29Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Merged to master/1.x-branch.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612698181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701122","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701122","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701122,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExMjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:31:39Z","updated_at":"2025-01-24T14:44:42Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user d2r opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1010\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1010</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1470\" title=\"org.apache.hadoop:hadoop-auth not shaded, breaks spnego authentication\" class=\"issue-link\" data-issue-key=\"STORM-1470\"><del>STORM-1470</del></a> Applies shading to hadoop-auth, cleaner exclusions</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/d2r/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/d2r/storm</a> storm-1470-hadoop-auth-shade-master</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1010.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1010.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1010</p>\n\n<hr />\n<p>commit 70197332bba46ffd2b38da183e835bd370a68e70<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2016-01-13T17:26:10Z</p>\n\n<p>    Applies shading to hadoop-auth, cleaner exclusions</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701128","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701128","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701128,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExMjg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:32:33Z","updated_at":"2025-01-24T14:44:42Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user d2r opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1011\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1011</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1470\" title=\"org.apache.hadoop:hadoop-auth not shaded, breaks spnego authentication\" class=\"issue-link\" data-issue-key=\"STORM-1470\"><del>STORM-1470</del></a> Applies shading to hadoop-auth, cleaner exclusions</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/d2r/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/d2r/storm</a> storm-1470-hadoop-auth-shade-1.x</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1011.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1011.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1011</p>\n\n<hr />\n<p>commit 57021116d1399108acd17d22ab94962d82516177<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2016-01-13T17:26:10Z</p>\n\n<p>    Applies shading to hadoop-auth, cleaner exclusions</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612693196","html_url":"https://github.com/apache/storm/issues/5255#issuecomment-2612693196","issue_url":"https://api.github.com/repos/apache/storm/issues/5255","id":2612693196,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTMxOTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T17:32:36Z","updated_at":"2025-01-24T14:41:20Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/978\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/978</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612693196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171383682","html_url":"https://github.com/apache/storm/pull/1010#issuecomment-171383682","issue_url":"https://api.github.com/repos/apache/storm/issues/1010","id":171383682,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTM4MzY4Mg==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T18:12:23Z","updated_at":"2016-01-13T18:12:23Z","author_association":"CONTRIBUTOR","body":"+1 pending travis\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171383682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701131","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701131","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701131,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExMzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T18:12:24Z","updated_at":"2025-01-24T14:44:42Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1010#issuecomment-171383682\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1010#issuecomment-171383682</a></p>\n\n<p>    +1 pending travis</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171424617","html_url":"https://github.com/apache/storm/pull/1007#issuecomment-171424617","issue_url":"https://api.github.com/repos/apache/storm/issues/1007","id":171424617,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTQyNDYxNw==","user":{"login":"redsanket","id":8295799,"node_id":"MDQ6VXNlcjgyOTU3OTk=","avatar_url":"https://avatars.githubusercontent.com/u/8295799?v=4","gravatar_id":"","url":"https://api.github.com/users/redsanket","html_url":"https://github.com/redsanket","followers_url":"https://api.github.com/users/redsanket/followers","following_url":"https://api.github.com/users/redsanket/following{/other_user}","gists_url":"https://api.github.com/users/redsanket/gists{/gist_id}","starred_url":"https://api.github.com/users/redsanket/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redsanket/subscriptions","organizations_url":"https://api.github.com/users/redsanket/orgs","repos_url":"https://api.github.com/users/redsanket/repos","events_url":"https://api.github.com/users/redsanket/events{/privacy}","received_events_url":"https://api.github.com/users/redsanket/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T20:34:55Z","updated_at":"2016-01-13T20:34:55Z","author_association":"NONE","body":"+1 NB\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171424617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700118","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700118","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700118,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxMTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T20:34:56Z","updated_at":"2025-01-24T14:44:18Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user redsanket commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1007#issuecomment-171424617\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1007#issuecomment-171424617</a></p>\n\n<p>    +1 NB</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697831","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697831","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697831,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4MzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T22:39:10Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user d2r opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1012\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1012</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1452\" title=\"Worker \"profiler\" actions broken by default\" class=\"issue-link\" data-issue-key=\"STORM-1452\"><del>STORM-1452</del></a> Fixes profiling/debugging out of the box</p>\n\n<p>    Ships the flight.bash script<br/>\n    Disables UI display of Profiling and Debugging if on windows<br/>\n    Changes worker.profiler.enabled to control only profiling, not other debugging actions<br/>\n    Changes default of worker.profiler.enabled to false<br/>\n    Adds missing UI REST API data.<br/>\n    Populates user context on profiler UI routes</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/d2r/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/d2r/storm</a> storm-1452-profiler-broken-by-default</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1012.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1012.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1012</p>\n\n<hr />\n<p>commit ae647a2a93af203778f273316ec6bb3f149ed56d<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2016-01-13T22:34:14Z</p>\n\n<p>    Fixes profiling/debugging out of the box</p>\n\n<p>    Ships the flight.bash script<br/>\n    Disables UI display of Profiling and Debugging if on windows<br/>\n    Changes worker.profiler.enabled to control only profiling, not other debugging actions<br/>\n    Changes default of worker.profiler.enabled to false<br/>\n    Adds missing UI REST API data.<br/>\n    Populates user context on profiler UI routes</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697835","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697835","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697835,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4MzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-13T22:57:14Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user d2r opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1013\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1013</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1452\" title=\"Worker \"profiler\" actions broken by default\" class=\"issue-link\" data-issue-key=\"STORM-1452\"><del>STORM-1452</del></a> Fixes profiling/debugging out of the box</p>\n\n<p>    Ships the flight.bash script<br/>\n    Disables UI display of Profiling and Debugging if on windows<br/>\n    Changes worker.profiler.enabled to control only profiling, not other debugging actions<br/>\n    Changes default of worker.profiler.enabled to false<br/>\n    Adds missing UI REST API data.<br/>\n    Populates user context on profiler UI routes</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/d2r/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/d2r/storm</a> storm-1452-profiler-broken-by-default-master</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1013.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1013.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1013</p>\n\n<hr />\n<p>commit 0c3a78accf0cae37b93640b7082578ca406db8f5<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2016-01-13T22:34:14Z</p>\n\n<p>    Fixes profiling/debugging out of the box</p>\n\n<p>    Ships the flight.bash script<br/>\n    Disables UI display of Profiling and Debugging if on windows<br/>\n    Changes worker.profiler.enabled to control only profiling, not other debugging actions<br/>\n    Changes default of worker.profiler.enabled to false<br/>\n    Adds missing UI REST API data.<br/>\n    Populates user context on profiler UI routes</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612696758","html_url":"https://github.com/apache/storm/issues/5280#issuecomment-2612696758","issue_url":"https://api.github.com/repos/apache/storm/issues/5280","id":2612696758,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTY3NTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T00:02:04Z","updated_at":"2025-01-24T14:42:52Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Addressed via <a href=\"https://github.com/apache/storm/commit/3db968092077363bd766db516b9e1135273672bf\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/commit/3db968092077363bd766db516b9e1135273672bf</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612696758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701265","html_url":"https://github.com/apache/storm/issues/5306#issuecomment-2612701265","issue_url":"https://api.github.com/repos/apache/storm/issues/5306","id":2612701265,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDEyNjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T00:10:22Z","updated_at":"2025-01-24T14:44:46Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>AFAIK, It is intended behavior since nextTuple() in Spout shouldn't be blocked.<br/>\nYou can refer <a href=\"http://storm.apache.org/documentation/Concepts.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://storm.apache.org/documentation/Concepts.html</a> - Spouts section.</p>\n\n<p>JStorm provides multi-thread mode of Spout, and it could be applied to Storm when merging Storm and JStorm.<br/>\n<a href=\"https://issues.apache.org/jira/browse/STORM-1358\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-1358</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701270","html_url":"https://github.com/apache/storm/issues/5306#issuecomment-2612701270","issue_url":"https://api.github.com/repos/apache/storm/issues/5306","id":2612701270,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDEyNzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T02:31:51Z","updated_at":"2025-01-24T14:44:46Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garrick.dasbach@inin.com\">garrick.dasbach@inin.com</a>:</i>\n<p>That's a fair point, however it's somewhat confusing then that the KafkaConfig allows you to set fetchMaxWait, which defaults to 10s.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701402","html_url":"https://github.com/apache/storm/issues/5307#issuecomment-2612701402","issue_url":"https://api.github.com/repos/apache/storm/issues/5307","id":2612701402,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE0MDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T02:50:58Z","updated_at":"2025-01-24T14:44:49Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhuoliu\">zhuoliu</a>:</i>\n<p>Checking the code, find a bug in storm-core/src/clj/backtype/storm/ui/core.clj<br/>\n\"time\" changed to \"errorTime\", however the REST info is still \"time\".<br/>\nLine 649:<br/>\n  <span class=\"error\">&#91;errors-list topology-id secure?&#93;</span><br/>\n  (let [errors (->> errors-list<br/>\n    (sort-by #(.get_error_time_secs ^ErrorInfo %))<br/>\n    reverse)]<br/>\n    {\"componentErrors\"<br/>\n     (for <span class=\"error\">&#91;^ErrorInfo e errors&#93;</span><br/>\n       {\"time\" (* 1000 (long (.get_error_time_secs e)))<br/>\n\"errorHost\" (.get_host e)<br/>\n\"errorPort\"  (.get_port e)</p>\n\n<p>\"componentErrors.errorTime| Long | Timestamp when the exception occurred (Prior to 0.11.0, this field was named 'time'.)\"</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701407","html_url":"https://github.com/apache/storm/issues/5307#issuecomment-2612701407","issue_url":"https://api.github.com/repos/apache/storm/issues/5307","id":2612701407,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE0MDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T02:54:50Z","updated_at":"2025-01-24T14:44:49Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user zhuoliu opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1014\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1014</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1472\" title=\"Change long to readble date/time format for error log link\" class=\"issue-link\" data-issue-key=\"STORM-1472\"><del>STORM-1472</del></a> Fix the errorTime bug and show the time to be readable</p>\n\n<p>    1. Checking the code, find a bug in storm-core/src/clj/backtype/storm/ui/core.clj<br/>\n    \"time\" changed to \"errorTime\", however the REST info is still \"time\".<br/>\n    Error log link can not show any info for time.</p>\n\n<p>    2.In the error log link of UI, long of millisecond dates makes little sense to user. It would be nice to change it to be readable date.</p>\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/zhuoliu/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/zhuoliu/storm</a> 1472</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1014.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1014.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1014</p>\n\n<hr />\n<p>commit b48f02e39dcbec62a29da6989c98e004b6b1c940<br/>\nAuthor: zhuol <zhuol@yahoo-inc.com><br/>\nDate:   2016-01-14T02:52:59Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1472\" title=\"Change long to readble date/time format for error log link\" class=\"issue-link\" data-issue-key=\"STORM-1472\"><del>STORM-1472</del></a> Fix the errorTime bug and show the time to be readable</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701411","html_url":"https://github.com/apache/storm/issues/5307#issuecomment-2612701411","issue_url":"https://api.github.com/repos/apache/storm/issues/5307","id":2612701411,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE0MTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T02:55:50Z","updated_at":"2025-01-24T14:44:49Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user zhuoliu commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1014#discussion_r49682555\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1014#discussion_r49682555</a></p>\n\n<p>    &#8212; Diff: storm-core/src/clj/org/apache/storm/ui/core.clj &#8212;<br/>\n    @@ -646,7 +646,7 @@<br/>\n reverse)]<br/>\n {\"componentErrors\"<br/>\n  (for <span class=\"error\">&#91;^ErrorInfo e errors&#93;</span></p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>{\"time\" (* 1000 (long (.get_error_time_secs e)))<br/>\n    +       {\"errorTime\" (* 1000 (long (.get_error_time_secs e)))\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Here fix a bug.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701412","html_url":"https://github.com/apache/storm/issues/5307#issuecomment-2612701412","issue_url":"https://api.github.com/repos/apache/storm/issues/5307","id":2612701412,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE0MTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T02:56:49Z","updated_at":"2025-01-24T14:44:50Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user zhuoliu commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1014#discussion_r49682600\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1014#discussion_r49682600</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/Cluster.java &#8212;<br/>\n    @@ -32,11 +32,13 @@<br/>\n     public class Cluster {</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* key: supervisor id, value: supervisor details<br/>\n    +     * key: supervisor id,<br/>\n    +     * value: supervisor's total and used resources, i.e. \n{totalMem, totalCpu, usedMem, usedCpu}\n<p>  */<br/>\n private Map<String, SupervisorDetails> supervisors;<br/>\n /**</p></li>\n</ul>\n<ul>\n\t<li>key: supervisor id, value: supervisor's total and used resources<br/>\n    +     * value: \n{requestedMemOnHeap, requestedMemOffHeap, requestedCpu, assignedMemOnHeap, assignedMemOffHeap, assignedCpu}\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Adding some comment to code (irrelevant).</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612649844","html_url":"https://github.com/apache/storm/issues/5094#issuecomment-2612649844","issue_url":"https://api.github.com/repos/apache/storm/issues/5094","id":2612649844,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDk4NDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T04:52:28Z","updated_at":"2025-01-24T14:22:29Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=johnbaba\">johnbaba</a>:</i>\n<p>I am merging zookeeper&cluster now,  cluster is  linked with  zookeeper.  If you don' start worker at this issue, can this issue be assigned to me in order to avoid to  duplicate worker?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612649844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631269","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631269","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631269,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEyNjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:07:22Z","updated_at":"2025-01-24T14:14:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user erikdw commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#discussion_r49693592\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#discussion_r49693592</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java &#8212;<br/>\n    @@ -0,0 +1,739 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + * <p/><br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + * <p/><br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm.hdfs.spout;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.lang.reflect.Constructor;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.Collection;<br/>\n    +import java.util.HashMap;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +import java.util.Timer;<br/>\n    +import java.util.TimerTask;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +import backtype.storm.Config;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.storm.hdfs.common.HdfsUtils;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import backtype.storm.spout.SpoutOutputCollector;<br/>\n    +import backtype.storm.task.TopologyContext;<br/>\n    +import backtype.storm.topology.OutputFieldsDeclarer;<br/>\n    +import backtype.storm.topology.base.BaseRichSpout;<br/>\n    +import backtype.storm.tuple.Fields;<br/>\n    +<br/>\n    +public class HdfsSpout extends BaseRichSpout {<br/>\n    +<br/>\n    +  // user configurable<br/>\n    +  private String hdfsUri;    // required<br/>\n    +  private String readerType; // required<br/>\n    +  private Fields outputFields;       // required<br/>\n    +  private Path sourceDirPath;// required<br/>\n    +  private Path archiveDirPath;       // required<br/>\n    +  private Path badFilesDirPath;      // required<br/>\n    +  private Path lockDirPath;<br/>\n    +<br/>\n    +  private int commitFrequencyCount = Configs.DEFAULT_COMMIT_FREQ_COUNT;<br/>\n    +  private int commitFrequencySec = Configs.DEFAULT_COMMIT_FREQ_SEC;<br/>\n    +  private int maxOutstanding = Configs.DEFAULT_MAX_OUTSTANDING;<br/>\n    +  private int lockTimeoutSec = Configs.DEFAULT_LOCK_TIMEOUT;<br/>\n    +  private boolean clocksInSync = true;<br/>\n    +<br/>\n    +  private String inprogress_suffix = \".inprogress\";<br/>\n    +  private String ignoreSuffix = \".ignore\";<br/>\n    +<br/>\n    +  // other members<br/>\n    +  private static final Logger LOG = LoggerFactory.getLogger(HdfsSpout.class);<br/>\n    +<br/>\n    +  private ProgressTracker tracker = null;<br/>\n    +<br/>\n    +  private FileSystem hdfs;<br/>\n    +  private FileReader reader;<br/>\n    +<br/>\n    +  private SpoutOutputCollector collector;<br/>\n    +  HashMap<MessageId, List<Object> > inflight = new HashMap<>();<br/>\n    +  LinkedBlockingQueue<HdfsUtils.Pair<MessageId, List<Object>>> retryList = new LinkedBlockingQueue<>();<br/>\n    +<br/>\n    +  private Configuration hdfsConfig;<br/>\n    +<br/>\n    +  private Map conf = null;<br/>\n    +  private FileLock lock;<br/>\n    +  private String spoutId = null;<br/>\n    +<br/>\n    +  HdfsUtils.Pair<Path,FileLock.LogEntry> lastExpiredLock = null;<br/>\n    +  private long lastExpiredLockTime = 0;<br/>\n    +<br/>\n    +  private long tupleCounter = 0;<br/>\n    +  private boolean ackEnabled = false;<br/>\n    +  private int acksSinceLastCommit = 0 ;<br/>\n    +  private final AtomicBoolean commitTimeElapsed = new AtomicBoolean(false);<br/>\n    +  private Timer commitTimer;<br/>\n    +  private boolean fileReadCompletely = true;<br/>\n    +<br/>\n    +  private String configKey = Configs.DEFAULT_HDFS_CONFIG_KEY; // key for hdfs Kerberos configs<br/>\n    +<br/>\n    +  public HdfsSpout() </p>\n{\n    +  }\n<p>    +  /** Name of the output field names. Number of fields depends upon the reader type */<br/>\n    +  public HdfsSpout withOutputFields(String... fields) </p>\n{\n    +    outputFields = new Fields(fields);\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  /** set key name under which HDFS options are placed. (similar to HDFS bolt).<br/>\n    +   * default key name is 'hdfs.config' */<br/>\n    +  public HdfsSpout withConfigKey(String configKey) </p>\n{\n    +    this.configKey = configKey;\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  public Path getLockDirPath() </p>\n{\n    +    return lockDirPath;\n    +  }\n<p>    +<br/>\n    +  public SpoutOutputCollector getCollector() </p>\n{\n    +    return collector;\n    +  }\n<p>    +<br/>\n    +  public void nextTuple() {<br/>\n    +    LOG.trace(\"Next Tuple {}\", spoutId);<br/>\n    +    // 1) First re-emit any previously failed tuples (from retryList)<br/>\n    +    if (!retryList.isEmpty()) </p>\n{\n    +      LOG.debug(\"Sending tuple from retry list\");\n    +      HdfsUtils.Pair<MessageId, List<Object>> pair = retryList.remove();\n    +      emitData(pair.getValue(), pair.getKey());\n    +      return;\n    +    }\n<p>    +<br/>\n    +    if( ackEnabled  &&  tracker.size()>= maxOutstanding) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    nit: whitespace is off:  `if( ackEnabled  &&  ` --> `if (ackEnabled && `</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631277","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631277","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631277,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEyNzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:09:27Z","updated_at":"2025-01-24T14:14:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user erikdw commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#discussion_r49693731\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#discussion_r49693731</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java &#8212;<br/>\n    @@ -0,0 +1,739 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + * <p/><br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + * <p/><br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm.hdfs.spout;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.lang.reflect.Constructor;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.Collection;<br/>\n    +import java.util.HashMap;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +import java.util.Timer;<br/>\n    +import java.util.TimerTask;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +import backtype.storm.Config;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.storm.hdfs.common.HdfsUtils;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import backtype.storm.spout.SpoutOutputCollector;<br/>\n    +import backtype.storm.task.TopologyContext;<br/>\n    +import backtype.storm.topology.OutputFieldsDeclarer;<br/>\n    +import backtype.storm.topology.base.BaseRichSpout;<br/>\n    +import backtype.storm.tuple.Fields;<br/>\n    +<br/>\n    +public class HdfsSpout extends BaseRichSpout {<br/>\n    +<br/>\n    +  // user configurable<br/>\n    +  private String hdfsUri;    // required<br/>\n    +  private String readerType; // required<br/>\n    +  private Fields outputFields;       // required<br/>\n    +  private Path sourceDirPath;// required<br/>\n    +  private Path archiveDirPath;       // required<br/>\n    +  private Path badFilesDirPath;      // required<br/>\n    +  private Path lockDirPath;<br/>\n    +<br/>\n    +  private int commitFrequencyCount = Configs.DEFAULT_COMMIT_FREQ_COUNT;<br/>\n    +  private int commitFrequencySec = Configs.DEFAULT_COMMIT_FREQ_SEC;<br/>\n    +  private int maxOutstanding = Configs.DEFAULT_MAX_OUTSTANDING;<br/>\n    +  private int lockTimeoutSec = Configs.DEFAULT_LOCK_TIMEOUT;<br/>\n    +  private boolean clocksInSync = true;<br/>\n    +<br/>\n    +  private String inprogress_suffix = \".inprogress\";<br/>\n    +  private String ignoreSuffix = \".ignore\";<br/>\n    +<br/>\n    +  // other members<br/>\n    +  private static final Logger LOG = LoggerFactory.getLogger(HdfsSpout.class);<br/>\n    +<br/>\n    +  private ProgressTracker tracker = null;<br/>\n    +<br/>\n    +  private FileSystem hdfs;<br/>\n    +  private FileReader reader;<br/>\n    +<br/>\n    +  private SpoutOutputCollector collector;<br/>\n    +  HashMap<MessageId, List<Object> > inflight = new HashMap<>();<br/>\n    +  LinkedBlockingQueue<HdfsUtils.Pair<MessageId, List<Object>>> retryList = new LinkedBlockingQueue<>();<br/>\n    +<br/>\n    +  private Configuration hdfsConfig;<br/>\n    +<br/>\n    +  private Map conf = null;<br/>\n    +  private FileLock lock;<br/>\n    +  private String spoutId = null;<br/>\n    +<br/>\n    +  HdfsUtils.Pair<Path,FileLock.LogEntry> lastExpiredLock = null;<br/>\n    +  private long lastExpiredLockTime = 0;<br/>\n    +<br/>\n    +  private long tupleCounter = 0;<br/>\n    +  private boolean ackEnabled = false;<br/>\n    +  private int acksSinceLastCommit = 0 ;<br/>\n    +  private final AtomicBoolean commitTimeElapsed = new AtomicBoolean(false);<br/>\n    +  private Timer commitTimer;<br/>\n    +  private boolean fileReadCompletely = true;<br/>\n    +<br/>\n    +  private String configKey = Configs.DEFAULT_HDFS_CONFIG_KEY; // key for hdfs Kerberos configs<br/>\n    +<br/>\n    +  public HdfsSpout() </p>\n{\n    +  }\n<p>    +  /** Name of the output field names. Number of fields depends upon the reader type */<br/>\n    +  public HdfsSpout withOutputFields(String... fields) </p>\n{\n    +    outputFields = new Fields(fields);\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  /** set key name under which HDFS options are placed. (similar to HDFS bolt).<br/>\n    +   * default key name is 'hdfs.config' */<br/>\n    +  public HdfsSpout withConfigKey(String configKey) </p>\n{\n    +    this.configKey = configKey;\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  public Path getLockDirPath() </p>\n{\n    +    return lockDirPath;\n    +  }\n<p>    +<br/>\n    +  public SpoutOutputCollector getCollector() </p>\n{\n    +    return collector;\n    +  }\n<p>    +<br/>\n    +  public void nextTuple() {<br/>\n    +    LOG.trace(\"Next Tuple {}\", spoutId);<br/>\n    +    // 1) First re-emit any previously failed tuples (from retryList)<br/>\n    +    if (!retryList.isEmpty()) </p>\n{\n    +      LOG.debug(\"Sending tuple from retry list\");\n    +      HdfsUtils.Pair<MessageId, List<Object>> pair = retryList.remove();\n    +      emitData(pair.getValue(), pair.getKey());\n    +      return;\n    +    }\n<p>    +<br/>\n    +    if( ackEnabled  &&  tracker.size()>= maxOutstanding) {<br/>\n    +      LOG.warn(\"Waiting for more ACKs before generating new tuples. \" +<br/>\n    +      \"Progress tracker size has reached limit {}, SpoutID {}\"<br/>\n    +      , maxOutstanding, spoutId);<br/>\n    +      // Don't emit anything .. allow configured spout wait strategy to kick in<br/>\n    +      return;<br/>\n    +    }<br/>\n    +<br/>\n    +    // 2) If no failed tuples to be retried, then send tuples from hdfs<br/>\n    +    while (true) {<br/>\n    +      try {<br/>\n    +// 3) Select a new file if one is not open already<br/>\n    +if (reader == null) {<br/>\n    +  reader = pickNextFile();<br/>\n    +  if (reader == null) </p>\n{\n    +    LOG.debug(\"Currently no new files to process under : \" + sourceDirPath);\n    +    return;\n    +  }\n<p> else </p>\n{\n    +    fileReadCompletely=false;\n    +  }\n<p>    +}<br/>\n    +if( fileReadCompletely ) { // wait for more ACKs before proceeding<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    inconsistent whitespace.<br/>\n    should be:  `if (fileReadCompletely) {`</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631281","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631281","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631281,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEyODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:10:32Z","updated_at":"2025-01-24T14:14:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user erikdw commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#discussion_r49693776\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#discussion_r49693776</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java &#8212;<br/>\n    @@ -0,0 +1,739 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + * <p/><br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + * <p/><br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm.hdfs.spout;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.lang.reflect.Constructor;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.Collection;<br/>\n    +import java.util.HashMap;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +import java.util.Timer;<br/>\n    +import java.util.TimerTask;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +import backtype.storm.Config;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.storm.hdfs.common.HdfsUtils;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import backtype.storm.spout.SpoutOutputCollector;<br/>\n    +import backtype.storm.task.TopologyContext;<br/>\n    +import backtype.storm.topology.OutputFieldsDeclarer;<br/>\n    +import backtype.storm.topology.base.BaseRichSpout;<br/>\n    +import backtype.storm.tuple.Fields;<br/>\n    +<br/>\n    +public class HdfsSpout extends BaseRichSpout {<br/>\n    +<br/>\n    +  // user configurable<br/>\n    +  private String hdfsUri;    // required<br/>\n    +  private String readerType; // required<br/>\n    +  private Fields outputFields;       // required<br/>\n    +  private Path sourceDirPath;// required<br/>\n    +  private Path archiveDirPath;       // required<br/>\n    +  private Path badFilesDirPath;      // required<br/>\n    +  private Path lockDirPath;<br/>\n    +<br/>\n    +  private int commitFrequencyCount = Configs.DEFAULT_COMMIT_FREQ_COUNT;<br/>\n    +  private int commitFrequencySec = Configs.DEFAULT_COMMIT_FREQ_SEC;<br/>\n    +  private int maxOutstanding = Configs.DEFAULT_MAX_OUTSTANDING;<br/>\n    +  private int lockTimeoutSec = Configs.DEFAULT_LOCK_TIMEOUT;<br/>\n    +  private boolean clocksInSync = true;<br/>\n    +<br/>\n    +  private String inprogress_suffix = \".inprogress\";<br/>\n    +  private String ignoreSuffix = \".ignore\";<br/>\n    +<br/>\n    +  // other members<br/>\n    +  private static final Logger LOG = LoggerFactory.getLogger(HdfsSpout.class);<br/>\n    +<br/>\n    +  private ProgressTracker tracker = null;<br/>\n    +<br/>\n    +  private FileSystem hdfs;<br/>\n    +  private FileReader reader;<br/>\n    +<br/>\n    +  private SpoutOutputCollector collector;<br/>\n    +  HashMap<MessageId, List<Object> > inflight = new HashMap<>();<br/>\n    +  LinkedBlockingQueue<HdfsUtils.Pair<MessageId, List<Object>>> retryList = new LinkedBlockingQueue<>();<br/>\n    +<br/>\n    +  private Configuration hdfsConfig;<br/>\n    +<br/>\n    +  private Map conf = null;<br/>\n    +  private FileLock lock;<br/>\n    +  private String spoutId = null;<br/>\n    +<br/>\n    +  HdfsUtils.Pair<Path,FileLock.LogEntry> lastExpiredLock = null;<br/>\n    +  private long lastExpiredLockTime = 0;<br/>\n    +<br/>\n    +  private long tupleCounter = 0;<br/>\n    +  private boolean ackEnabled = false;<br/>\n    +  private int acksSinceLastCommit = 0 ;<br/>\n    +  private final AtomicBoolean commitTimeElapsed = new AtomicBoolean(false);<br/>\n    +  private Timer commitTimer;<br/>\n    +  private boolean fileReadCompletely = true;<br/>\n    +<br/>\n    +  private String configKey = Configs.DEFAULT_HDFS_CONFIG_KEY; // key for hdfs Kerberos configs<br/>\n    +<br/>\n    +  public HdfsSpout() </p>\n{\n    +  }\n<p>    +  /** Name of the output field names. Number of fields depends upon the reader type */<br/>\n    +  public HdfsSpout withOutputFields(String... fields) </p>\n{\n    +    outputFields = new Fields(fields);\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  /** set key name under which HDFS options are placed. (similar to HDFS bolt).<br/>\n    +   * default key name is 'hdfs.config' */<br/>\n    +  public HdfsSpout withConfigKey(String configKey) </p>\n{\n    +    this.configKey = configKey;\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  public Path getLockDirPath() </p>\n{\n    +    return lockDirPath;\n    +  }\n<p>    +<br/>\n    +  public SpoutOutputCollector getCollector() </p>\n{\n    +    return collector;\n    +  }\n<p>    +<br/>\n    +  public void nextTuple() {<br/>\n    +    LOG.trace(\"Next Tuple {}\", spoutId);<br/>\n    +    // 1) First re-emit any previously failed tuples (from retryList)<br/>\n    +    if (!retryList.isEmpty()) </p>\n{\n    +      LOG.debug(\"Sending tuple from retry list\");\n    +      HdfsUtils.Pair<MessageId, List<Object>> pair = retryList.remove();\n    +      emitData(pair.getValue(), pair.getKey());\n    +      return;\n    +    }\n<p>    +<br/>\n    +    if( ackEnabled  &&  tracker.size()>= maxOutstanding) {<br/>\n    +      LOG.warn(\"Waiting for more ACKs before generating new tuples. \" +<br/>\n    +      \"Progress tracker size has reached limit {}, SpoutID {}\"<br/>\n    +      , maxOutstanding, spoutId);<br/>\n    +      // Don't emit anything .. allow configured spout wait strategy to kick in<br/>\n    +      return;<br/>\n    +    }<br/>\n    +<br/>\n    +    // 2) If no failed tuples to be retried, then send tuples from hdfs<br/>\n    +    while (true) {<br/>\n    +      try {<br/>\n    +// 3) Select a new file if one is not open already<br/>\n    +if (reader == null) {<br/>\n    +  reader = pickNextFile();<br/>\n    +  if (reader == null) </p>\n{\n    +    LOG.debug(\"Currently no new files to process under : \" + sourceDirPath);\n    +    return;\n    +  }\n<p> else </p>\n{\n    +    fileReadCompletely=false;\n    +  }\n<p>    +}<br/>\n    +if( fileReadCompletely ) </p>\n{ // wait for more ACKs before proceeding\n    +  return;\n    +}\n<p>    +// 4) Read record from file, emit to collector and record progress<br/>\n    +List<Object> tuple = reader.next();<br/>\n    +if (tuple != null) {<br/>\n    +  fileReadCompletely= false;<br/>\n    +  ++tupleCounter;<br/>\n    +  MessageId msgId = new MessageId(tupleCounter, reader.getFilePath(), reader.getFileOffset());<br/>\n    +  emitData(tuple, msgId);<br/>\n    +<br/>\n    +  if(!ackEnabled) </p>\n{\n    +    ++acksSinceLastCommit; // assume message is immediately ACKed in non-ack mode\n    +    commitProgress(reader.getFileOffset());\n    +  }\n<p> else </p>\n{\n    +    commitProgress(tracker.getCommitPosition());\n    +  }\n<p>    +  return;<br/>\n    +} else {<br/>\n    +  fileReadCompletely = true;<br/>\n    +  if(!ackEnabled) </p>\n{\n    +    markFileAsDone(reader.getFilePath());\n    +  }\n<p>    +}<br/>\n    +      } catch (IOException e) </p>\n{\n    +LOG.error(\"I/O Error processing at file location \" + getFileProgress(reader), e);\n    +// don't emit anything .. allow configured spout wait strategy to kick in\n    +return;\n    +      }\n<p> catch (ParseException e) </p>\n{\n    +LOG.error(\"Parsing error when processing at file location \" + getFileProgress(reader) +\n    +\". Skipping remainder of file.\", e);\n    +markFileAsBad(reader.getFilePath());\n    +// Note: We don't return from this method on ParseException to avoid triggering the\n    +// spout wait strategy (due to no emits). Instead we go back into the loop and\n    +// generate a tuple from next file\n    +      }\n<p>    +    } // while<br/>\n    +  }<br/>\n    +<br/>\n    +  // will commit progress into lock file if commit threshold is reached<br/>\n    +  private void commitProgress(FileOffset position) {<br/>\n    +    if(position==null) </p>\n{\n    +      return;\n    +    }<br/>\n    +    if ( lock!=null && canCommitNow() ) {<br/>\n    +      try {<br/>\n    +String pos = position.toString();<br/>\n    +lock.heartbeat(pos);<br/>\n    +LOG.debug(\"{} Committed progress. {}\", spoutId, pos);<br/>\n    +acksSinceLastCommit = 0;<br/>\n    +commitTimeElapsed.set(false);<br/>\n    +setupCommitElapseTimer();<br/>\n    +      } catch (IOException e) {\n    +LOG.error(\"Unable to commit progress Will retry later. Spout ID = \" + spoutId, e);\n    +      }<br/>\n    +    }<br/>\n    +  }<br/>\n    +<br/>\n    +  private void setupCommitElapseTimer() {<br/>\n    +    if(commitFrequencySec<=0) {    +      return;    +    }\n<p>    +    TimerTask timerTask = new TimerTask() {<br/>\n    +      @Override<br/>\n    +      public void run() </p>\n{\n    +commitTimeElapsed.set(true);\n    +      }\n<p>    +    };<br/>\n    +    commitTimer.schedule(timerTask, commitFrequencySec * 1000);<br/>\n    +  }<br/>\n    +<br/>\n    +  private static String getFileProgress(FileReader reader) </p>\n{\n    +    return reader.getFilePath() + \" \" + reader.getFileOffset();\n    +  }\n<p>    +<br/>\n    +  private void markFileAsDone(Path filePath) {<br/>\n    +    try {<br/>\n    +      Path newFile = renameCompletedFile(reader.getFilePath());<br/>\n    +      LOG.info(\"Completed processing {}. Spout Id = {}\", newFile, spoutId);<br/>\n    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to archive completed file\" + filePath + \" Spout ID \" + spoutId, e);\n    +    }\n<p>    +    closeReaderAndResetTrackers();<br/>\n    +  }<br/>\n    +<br/>\n    +  private void markFileAsBad(Path file) {<br/>\n    +    String fileName = file.toString();<br/>\n    +    String fileNameMinusSuffix = fileName.substring(0, fileName.indexOf(inprogress_suffix));<br/>\n    +    String originalName = new Path(fileNameMinusSuffix).getName();<br/>\n    +    Path  newFile = new Path( badFilesDirPath + Path.SEPARATOR + originalName);<br/>\n    +<br/>\n    +    LOG.info(\"Moving bad file {} to {}. Processed it till offset {}. SpoutID= {}\", originalName, newFile, tracker.getCommitPosition(), spoutId);<br/>\n    +    try {<br/>\n    +      if (!hdfs.rename(file, newFile) ) </p>\n{ // seems this can fail by returning false or throwing exception\n    +throw new IOException(\"Move failed for bad file: \" + file); // convert false ret value to exception\n    +      }\n<p>    +    } catch (IOException e) </p>\n{\n    +      LOG.warn(\"Error moving bad file: \" + file + \" to destination \" + newFile + \" SpoutId =\" + spoutId, e);\n    +    }\n<p>    +    closeReaderAndResetTrackers();<br/>\n    +  }<br/>\n    +<br/>\n    +  private void closeReaderAndResetTrackers() </p>\n{\n    +    inflight.clear();\n    +    tracker.offsets.clear();\n    +    retryList.clear();\n    +\n    +    reader.close();\n    +    reader = null;\n    +    releaseLockAndLog(lock, spoutId);\n    +    lock = null;\n    +  }\n<p>    +<br/>\n    +  private static void releaseLockAndLog(FileLock fLock, String spoutId) {<br/>\n    +    try {<br/>\n    +      if(fLock!=null) {<br/>\n    +fLock.release();<br/>\n    +LOG.debug(\"Spout {} released FileLock. SpoutId = {}\", fLock.getLockFile(), spoutId);<br/>\n    +      }<br/>\n    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to delete lock file : \" +fLock.getLockFile() + \" SpoutId =\" + spoutId, e);\n    +    }\n<p>    +  }<br/>\n    +<br/>\n    +  protected void emitData(List<Object> tuple, MessageId id) {<br/>\n    +    LOG.trace(\"Emitting - {}\", id);<br/>\n    +    this.collector.emit(tuple, id);<br/>\n    +    inflight.put(id, tuple);<br/>\n    +  }<br/>\n    +<br/>\n    +  public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) {<br/>\n    +    LOG.info(\"Opening HDFS Spout\");<br/>\n    +    this.conf = conf;<br/>\n    +    this.commitTimer = new Timer();<br/>\n    +    this.tracker = new ProgressTracker();<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +<br/>\n    +    this.collector = collector;<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +    this.tupleCounter = 0;<br/>\n    +<br/>\n    +    // Hdfs related settings<br/>\n    +    if( conf.containsKey(Configs.HDFS_URI)) </p>\n{\n    +      this.hdfsUri = conf.get(Configs.HDFS_URI).toString();\n    +    }\n<p> else </p>\n{\n    +      throw new RuntimeException(Configs.HDFS_URI + \" setting is required\");\n    +    }\n<p>    +<br/>\n    +    try </p>\n{\n    +      this.hdfs = FileSystem.get(URI.create(hdfsUri), hdfsConfig);\n    +    }\n<p> catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to instantiate file system\", e);\n    +      throw new RuntimeException(\"Unable to instantiate file system\", e);\n    +    }\n<p>    +<br/>\n    +<br/>\n    +    if ( conf.containsKey(configKey) ) {<br/>\n    +      Map<String, Object> map = (Map<String, Object>)conf.get(configKey);<br/>\n    +if(map != null) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    indentation is messed up.  the if and its block should be on same level as the map variable declaration.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631284","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631284","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631284,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEyODQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:11:19Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user erikdw commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#discussion_r49693819\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#discussion_r49693819</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java &#8212;<br/>\n    @@ -0,0 +1,739 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + * <p/><br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + * <p/><br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm.hdfs.spout;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.lang.reflect.Constructor;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.Collection;<br/>\n    +import java.util.HashMap;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +import java.util.Timer;<br/>\n    +import java.util.TimerTask;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +import backtype.storm.Config;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.storm.hdfs.common.HdfsUtils;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import backtype.storm.spout.SpoutOutputCollector;<br/>\n    +import backtype.storm.task.TopologyContext;<br/>\n    +import backtype.storm.topology.OutputFieldsDeclarer;<br/>\n    +import backtype.storm.topology.base.BaseRichSpout;<br/>\n    +import backtype.storm.tuple.Fields;<br/>\n    +<br/>\n    +public class HdfsSpout extends BaseRichSpout {<br/>\n    +<br/>\n    +  // user configurable<br/>\n    +  private String hdfsUri;    // required<br/>\n    +  private String readerType; // required<br/>\n    +  private Fields outputFields;       // required<br/>\n    +  private Path sourceDirPath;// required<br/>\n    +  private Path archiveDirPath;       // required<br/>\n    +  private Path badFilesDirPath;      // required<br/>\n    +  private Path lockDirPath;<br/>\n    +<br/>\n    +  private int commitFrequencyCount = Configs.DEFAULT_COMMIT_FREQ_COUNT;<br/>\n    +  private int commitFrequencySec = Configs.DEFAULT_COMMIT_FREQ_SEC;<br/>\n    +  private int maxOutstanding = Configs.DEFAULT_MAX_OUTSTANDING;<br/>\n    +  private int lockTimeoutSec = Configs.DEFAULT_LOCK_TIMEOUT;<br/>\n    +  private boolean clocksInSync = true;<br/>\n    +<br/>\n    +  private String inprogress_suffix = \".inprogress\";<br/>\n    +  private String ignoreSuffix = \".ignore\";<br/>\n    +<br/>\n    +  // other members<br/>\n    +  private static final Logger LOG = LoggerFactory.getLogger(HdfsSpout.class);<br/>\n    +<br/>\n    +  private ProgressTracker tracker = null;<br/>\n    +<br/>\n    +  private FileSystem hdfs;<br/>\n    +  private FileReader reader;<br/>\n    +<br/>\n    +  private SpoutOutputCollector collector;<br/>\n    +  HashMap<MessageId, List<Object> > inflight = new HashMap<>();<br/>\n    +  LinkedBlockingQueue<HdfsUtils.Pair<MessageId, List<Object>>> retryList = new LinkedBlockingQueue<>();<br/>\n    +<br/>\n    +  private Configuration hdfsConfig;<br/>\n    +<br/>\n    +  private Map conf = null;<br/>\n    +  private FileLock lock;<br/>\n    +  private String spoutId = null;<br/>\n    +<br/>\n    +  HdfsUtils.Pair<Path,FileLock.LogEntry> lastExpiredLock = null;<br/>\n    +  private long lastExpiredLockTime = 0;<br/>\n    +<br/>\n    +  private long tupleCounter = 0;<br/>\n    +  private boolean ackEnabled = false;<br/>\n    +  private int acksSinceLastCommit = 0 ;<br/>\n    +  private final AtomicBoolean commitTimeElapsed = new AtomicBoolean(false);<br/>\n    +  private Timer commitTimer;<br/>\n    +  private boolean fileReadCompletely = true;<br/>\n    +<br/>\n    +  private String configKey = Configs.DEFAULT_HDFS_CONFIG_KEY; // key for hdfs Kerberos configs<br/>\n    +<br/>\n    +  public HdfsSpout() </p>\n{\n    +  }\n<p>    +  /** Name of the output field names. Number of fields depends upon the reader type */<br/>\n    +  public HdfsSpout withOutputFields(String... fields) </p>\n{\n    +    outputFields = new Fields(fields);\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  /** set key name under which HDFS options are placed. (similar to HDFS bolt).<br/>\n    +   * default key name is 'hdfs.config' */<br/>\n    +  public HdfsSpout withConfigKey(String configKey) </p>\n{\n    +    this.configKey = configKey;\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  public Path getLockDirPath() </p>\n{\n    +    return lockDirPath;\n    +  }\n<p>    +<br/>\n    +  public SpoutOutputCollector getCollector() </p>\n{\n    +    return collector;\n    +  }\n<p>    +<br/>\n    +  public void nextTuple() {<br/>\n    +    LOG.trace(\"Next Tuple {}\", spoutId);<br/>\n    +    // 1) First re-emit any previously failed tuples (from retryList)<br/>\n    +    if (!retryList.isEmpty()) </p>\n{\n    +      LOG.debug(\"Sending tuple from retry list\");\n    +      HdfsUtils.Pair<MessageId, List<Object>> pair = retryList.remove();\n    +      emitData(pair.getValue(), pair.getKey());\n    +      return;\n    +    }\n<p>    +<br/>\n    +    if( ackEnabled  &&  tracker.size()>= maxOutstanding) {<br/>\n    +      LOG.warn(\"Waiting for more ACKs before generating new tuples. \" +<br/>\n    +      \"Progress tracker size has reached limit {}, SpoutID {}\"<br/>\n    +      , maxOutstanding, spoutId);<br/>\n    +      // Don't emit anything .. allow configured spout wait strategy to kick in<br/>\n    +      return;<br/>\n    +    }<br/>\n    +<br/>\n    +    // 2) If no failed tuples to be retried, then send tuples from hdfs<br/>\n    +    while (true) {<br/>\n    +      try {<br/>\n    +// 3) Select a new file if one is not open already<br/>\n    +if (reader == null) {<br/>\n    +  reader = pickNextFile();<br/>\n    +  if (reader == null) </p>\n{\n    +    LOG.debug(\"Currently no new files to process under : \" + sourceDirPath);\n    +    return;\n    +  }\n<p> else </p>\n{\n    +    fileReadCompletely=false;\n    +  }\n<p>    +}<br/>\n    +if( fileReadCompletely ) </p>\n{ // wait for more ACKs before proceeding\n    +  return;\n    +}\n<p>    +// 4) Read record from file, emit to collector and record progress<br/>\n    +List<Object> tuple = reader.next();<br/>\n    +if (tuple != null) {<br/>\n    +  fileReadCompletely= false;<br/>\n    +  ++tupleCounter;<br/>\n    +  MessageId msgId = new MessageId(tupleCounter, reader.getFilePath(), reader.getFileOffset());<br/>\n    +  emitData(tuple, msgId);<br/>\n    +<br/>\n    +  if(!ackEnabled) </p>\n{\n    +    ++acksSinceLastCommit; // assume message is immediately ACKed in non-ack mode\n    +    commitProgress(reader.getFileOffset());\n    +  }\n<p> else </p>\n{\n    +    commitProgress(tracker.getCommitPosition());\n    +  }\n<p>    +  return;<br/>\n    +} else {<br/>\n    +  fileReadCompletely = true;<br/>\n    +  if(!ackEnabled) </p>\n{\n    +    markFileAsDone(reader.getFilePath());\n    +  }\n<p>    +}<br/>\n    +      } catch (IOException e) </p>\n{\n    +LOG.error(\"I/O Error processing at file location \" + getFileProgress(reader), e);\n    +// don't emit anything .. allow configured spout wait strategy to kick in\n    +return;\n    +      }\n<p> catch (ParseException e) </p>\n{\n    +LOG.error(\"Parsing error when processing at file location \" + getFileProgress(reader) +\n    +\". Skipping remainder of file.\", e);\n    +markFileAsBad(reader.getFilePath());\n    +// Note: We don't return from this method on ParseException to avoid triggering the\n    +// spout wait strategy (due to no emits). Instead we go back into the loop and\n    +// generate a tuple from next file\n    +      }\n<p>    +    } // while<br/>\n    +  }<br/>\n    +<br/>\n    +  // will commit progress into lock file if commit threshold is reached<br/>\n    +  private void commitProgress(FileOffset position) {<br/>\n    +    if(position==null) </p>\n{\n    +      return;\n    +    }<br/>\n    +    if ( lock!=null && canCommitNow() ) {<br/>\n    +      try {<br/>\n    +String pos = position.toString();<br/>\n    +lock.heartbeat(pos);<br/>\n    +LOG.debug(\"{} Committed progress. {}\", spoutId, pos);<br/>\n    +acksSinceLastCommit = 0;<br/>\n    +commitTimeElapsed.set(false);<br/>\n    +setupCommitElapseTimer();<br/>\n    +      } catch (IOException e) {\n    +LOG.error(\"Unable to commit progress Will retry later. Spout ID = \" + spoutId, e);\n    +      }<br/>\n    +    }<br/>\n    +  }<br/>\n    +<br/>\n    +  private void setupCommitElapseTimer() {<br/>\n    +    if(commitFrequencySec<=0) {    +      return;    +    }\n<p>    +    TimerTask timerTask = new TimerTask() {<br/>\n    +      @Override<br/>\n    +      public void run() </p>\n{\n    +commitTimeElapsed.set(true);\n    +      }\n<p>    +    };<br/>\n    +    commitTimer.schedule(timerTask, commitFrequencySec * 1000);<br/>\n    +  }<br/>\n    +<br/>\n    +  private static String getFileProgress(FileReader reader) </p>\n{\n    +    return reader.getFilePath() + \" \" + reader.getFileOffset();\n    +  }\n<p>    +<br/>\n    +  private void markFileAsDone(Path filePath) {<br/>\n    +    try {<br/>\n    +      Path newFile = renameCompletedFile(reader.getFilePath());<br/>\n    +      LOG.info(\"Completed processing {}. Spout Id = {}\", newFile, spoutId);<br/>\n    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to archive completed file\" + filePath + \" Spout ID \" + spoutId, e);\n    +    }\n<p>    +    closeReaderAndResetTrackers();<br/>\n    +  }<br/>\n    +<br/>\n    +  private void markFileAsBad(Path file) {<br/>\n    +    String fileName = file.toString();<br/>\n    +    String fileNameMinusSuffix = fileName.substring(0, fileName.indexOf(inprogress_suffix));<br/>\n    +    String originalName = new Path(fileNameMinusSuffix).getName();<br/>\n    +    Path  newFile = new Path( badFilesDirPath + Path.SEPARATOR + originalName);<br/>\n    +<br/>\n    +    LOG.info(\"Moving bad file {} to {}. Processed it till offset {}. SpoutID= {}\", originalName, newFile, tracker.getCommitPosition(), spoutId);<br/>\n    +    try {<br/>\n    +      if (!hdfs.rename(file, newFile) ) </p>\n{ // seems this can fail by returning false or throwing exception\n    +throw new IOException(\"Move failed for bad file: \" + file); // convert false ret value to exception\n    +      }\n<p>    +    } catch (IOException e) </p>\n{\n    +      LOG.warn(\"Error moving bad file: \" + file + \" to destination \" + newFile + \" SpoutId =\" + spoutId, e);\n    +    }\n<p>    +    closeReaderAndResetTrackers();<br/>\n    +  }<br/>\n    +<br/>\n    +  private void closeReaderAndResetTrackers() </p>\n{\n    +    inflight.clear();\n    +    tracker.offsets.clear();\n    +    retryList.clear();\n    +\n    +    reader.close();\n    +    reader = null;\n    +    releaseLockAndLog(lock, spoutId);\n    +    lock = null;\n    +  }\n<p>    +<br/>\n    +  private static void releaseLockAndLog(FileLock fLock, String spoutId) {<br/>\n    +    try {<br/>\n    +      if(fLock!=null) {<br/>\n    +fLock.release();<br/>\n    +LOG.debug(\"Spout {} released FileLock. SpoutId = {}\", fLock.getLockFile(), spoutId);<br/>\n    +      }<br/>\n    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to delete lock file : \" +fLock.getLockFile() + \" SpoutId =\" + spoutId, e);\n    +    }\n<p>    +  }<br/>\n    +<br/>\n    +  protected void emitData(List<Object> tuple, MessageId id) {<br/>\n    +    LOG.trace(\"Emitting - {}\", id);<br/>\n    +    this.collector.emit(tuple, id);<br/>\n    +    inflight.put(id, tuple);<br/>\n    +  }<br/>\n    +<br/>\n    +  public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) {<br/>\n    +    LOG.info(\"Opening HDFS Spout\");<br/>\n    +    this.conf = conf;<br/>\n    +    this.commitTimer = new Timer();<br/>\n    +    this.tracker = new ProgressTracker();<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +<br/>\n    +    this.collector = collector;<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +    this.tupleCounter = 0;<br/>\n    +<br/>\n    +    // Hdfs related settings<br/>\n    +    if( conf.containsKey(Configs.HDFS_URI)) </p>\n{\n    +      this.hdfsUri = conf.get(Configs.HDFS_URI).toString();\n    +    }\n<p> else </p>\n{\n    +      throw new RuntimeException(Configs.HDFS_URI + \" setting is required\");\n    +    }\n<p>    +<br/>\n    +    try </p>\n{\n    +      this.hdfs = FileSystem.get(URI.create(hdfsUri), hdfsConfig);\n    +    }\n<p> catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to instantiate file system\", e);\n    +      throw new RuntimeException(\"Unable to instantiate file system\", e);\n    +    }\n<p>    +<br/>\n    +<br/>\n    +    if ( conf.containsKey(configKey) ) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    please be <b>consistent</b> with styling.  All of these variants exist in this code:<br/>\n    ```<br/>\n    if(foo<br/>\n    if ( foo<br/>\n    if( foo<br/>\n    if (foo<br/>\n    ```</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631289","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631289","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631289,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEyODk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:11:56Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user erikdw commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#discussion_r49693847\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#discussion_r49693847</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/spout/HdfsSpout.java &#8212;<br/>\n    @@ -0,0 +1,739 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + * <p/><br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + * <p/><br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm.hdfs.spout;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.lang.reflect.Constructor;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.Collection;<br/>\n    +import java.util.HashMap;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +import java.util.Timer;<br/>\n    +import java.util.TimerTask;<br/>\n    +import java.util.concurrent.LinkedBlockingQueue;<br/>\n    +import java.util.concurrent.atomic.AtomicBoolean;<br/>\n    +<br/>\n    +import backtype.storm.Config;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.storm.hdfs.common.HdfsUtils;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +<br/>\n    +import backtype.storm.spout.SpoutOutputCollector;<br/>\n    +import backtype.storm.task.TopologyContext;<br/>\n    +import backtype.storm.topology.OutputFieldsDeclarer;<br/>\n    +import backtype.storm.topology.base.BaseRichSpout;<br/>\n    +import backtype.storm.tuple.Fields;<br/>\n    +<br/>\n    +public class HdfsSpout extends BaseRichSpout {<br/>\n    +<br/>\n    +  // user configurable<br/>\n    +  private String hdfsUri;    // required<br/>\n    +  private String readerType; // required<br/>\n    +  private Fields outputFields;       // required<br/>\n    +  private Path sourceDirPath;// required<br/>\n    +  private Path archiveDirPath;       // required<br/>\n    +  private Path badFilesDirPath;      // required<br/>\n    +  private Path lockDirPath;<br/>\n    +<br/>\n    +  private int commitFrequencyCount = Configs.DEFAULT_COMMIT_FREQ_COUNT;<br/>\n    +  private int commitFrequencySec = Configs.DEFAULT_COMMIT_FREQ_SEC;<br/>\n    +  private int maxOutstanding = Configs.DEFAULT_MAX_OUTSTANDING;<br/>\n    +  private int lockTimeoutSec = Configs.DEFAULT_LOCK_TIMEOUT;<br/>\n    +  private boolean clocksInSync = true;<br/>\n    +<br/>\n    +  private String inprogress_suffix = \".inprogress\";<br/>\n    +  private String ignoreSuffix = \".ignore\";<br/>\n    +<br/>\n    +  // other members<br/>\n    +  private static final Logger LOG = LoggerFactory.getLogger(HdfsSpout.class);<br/>\n    +<br/>\n    +  private ProgressTracker tracker = null;<br/>\n    +<br/>\n    +  private FileSystem hdfs;<br/>\n    +  private FileReader reader;<br/>\n    +<br/>\n    +  private SpoutOutputCollector collector;<br/>\n    +  HashMap<MessageId, List<Object> > inflight = new HashMap<>();<br/>\n    +  LinkedBlockingQueue<HdfsUtils.Pair<MessageId, List<Object>>> retryList = new LinkedBlockingQueue<>();<br/>\n    +<br/>\n    +  private Configuration hdfsConfig;<br/>\n    +<br/>\n    +  private Map conf = null;<br/>\n    +  private FileLock lock;<br/>\n    +  private String spoutId = null;<br/>\n    +<br/>\n    +  HdfsUtils.Pair<Path,FileLock.LogEntry> lastExpiredLock = null;<br/>\n    +  private long lastExpiredLockTime = 0;<br/>\n    +<br/>\n    +  private long tupleCounter = 0;<br/>\n    +  private boolean ackEnabled = false;<br/>\n    +  private int acksSinceLastCommit = 0 ;<br/>\n    +  private final AtomicBoolean commitTimeElapsed = new AtomicBoolean(false);<br/>\n    +  private Timer commitTimer;<br/>\n    +  private boolean fileReadCompletely = true;<br/>\n    +<br/>\n    +  private String configKey = Configs.DEFAULT_HDFS_CONFIG_KEY; // key for hdfs Kerberos configs<br/>\n    +<br/>\n    +  public HdfsSpout() </p>\n{\n    +  }\n<p>    +  /** Name of the output field names. Number of fields depends upon the reader type */<br/>\n    +  public HdfsSpout withOutputFields(String... fields) </p>\n{\n    +    outputFields = new Fields(fields);\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  /** set key name under which HDFS options are placed. (similar to HDFS bolt).<br/>\n    +   * default key name is 'hdfs.config' */<br/>\n    +  public HdfsSpout withConfigKey(String configKey) </p>\n{\n    +    this.configKey = configKey;\n    +    return this;\n    +  }\n<p>    +<br/>\n    +  public Path getLockDirPath() </p>\n{\n    +    return lockDirPath;\n    +  }\n<p>    +<br/>\n    +  public SpoutOutputCollector getCollector() </p>\n{\n    +    return collector;\n    +  }\n<p>    +<br/>\n    +  public void nextTuple() {<br/>\n    +    LOG.trace(\"Next Tuple {}\", spoutId);<br/>\n    +    // 1) First re-emit any previously failed tuples (from retryList)<br/>\n    +    if (!retryList.isEmpty()) </p>\n{\n    +      LOG.debug(\"Sending tuple from retry list\");\n    +      HdfsUtils.Pair<MessageId, List<Object>> pair = retryList.remove();\n    +      emitData(pair.getValue(), pair.getKey());\n    +      return;\n    +    }\n<p>    +<br/>\n    +    if( ackEnabled  &&  tracker.size()>= maxOutstanding) {<br/>\n    +      LOG.warn(\"Waiting for more ACKs before generating new tuples. \" +<br/>\n    +      \"Progress tracker size has reached limit {}, SpoutID {}\"<br/>\n    +      , maxOutstanding, spoutId);<br/>\n    +      // Don't emit anything .. allow configured spout wait strategy to kick in<br/>\n    +      return;<br/>\n    +    }<br/>\n    +<br/>\n    +    // 2) If no failed tuples to be retried, then send tuples from hdfs<br/>\n    +    while (true) {<br/>\n    +      try {<br/>\n    +// 3) Select a new file if one is not open already<br/>\n    +if (reader == null) {<br/>\n    +  reader = pickNextFile();<br/>\n    +  if (reader == null) </p>\n{\n    +    LOG.debug(\"Currently no new files to process under : \" + sourceDirPath);\n    +    return;\n    +  }\n<p> else </p>\n{\n    +    fileReadCompletely=false;\n    +  }\n<p>    +}<br/>\n    +if( fileReadCompletely ) </p>\n{ // wait for more ACKs before proceeding\n    +  return;\n    +}\n<p>    +// 4) Read record from file, emit to collector and record progress<br/>\n    +List<Object> tuple = reader.next();<br/>\n    +if (tuple != null) {<br/>\n    +  fileReadCompletely= false;<br/>\n    +  ++tupleCounter;<br/>\n    +  MessageId msgId = new MessageId(tupleCounter, reader.getFilePath(), reader.getFileOffset());<br/>\n    +  emitData(tuple, msgId);<br/>\n    +<br/>\n    +  if(!ackEnabled) </p>\n{\n    +    ++acksSinceLastCommit; // assume message is immediately ACKed in non-ack mode\n    +    commitProgress(reader.getFileOffset());\n    +  }\n<p> else </p>\n{\n    +    commitProgress(tracker.getCommitPosition());\n    +  }\n<p>    +  return;<br/>\n    +} else {<br/>\n    +  fileReadCompletely = true;<br/>\n    +  if(!ackEnabled) </p>\n{\n    +    markFileAsDone(reader.getFilePath());\n    +  }\n<p>    +}<br/>\n    +      } catch (IOException e) </p>\n{\n    +LOG.error(\"I/O Error processing at file location \" + getFileProgress(reader), e);\n    +// don't emit anything .. allow configured spout wait strategy to kick in\n    +return;\n    +      }\n<p> catch (ParseException e) </p>\n{\n    +LOG.error(\"Parsing error when processing at file location \" + getFileProgress(reader) +\n    +\". Skipping remainder of file.\", e);\n    +markFileAsBad(reader.getFilePath());\n    +// Note: We don't return from this method on ParseException to avoid triggering the\n    +// spout wait strategy (due to no emits). Instead we go back into the loop and\n    +// generate a tuple from next file\n    +      }\n<p>    +    } // while<br/>\n    +  }<br/>\n    +<br/>\n    +  // will commit progress into lock file if commit threshold is reached<br/>\n    +  private void commitProgress(FileOffset position) {<br/>\n    +    if(position==null) </p>\n{\n    +      return;\n    +    }<br/>\n    +    if ( lock!=null && canCommitNow() ) {<br/>\n    +      try {<br/>\n    +String pos = position.toString();<br/>\n    +lock.heartbeat(pos);<br/>\n    +LOG.debug(\"{} Committed progress. {}\", spoutId, pos);<br/>\n    +acksSinceLastCommit = 0;<br/>\n    +commitTimeElapsed.set(false);<br/>\n    +setupCommitElapseTimer();<br/>\n    +      } catch (IOException e) {\n    +LOG.error(\"Unable to commit progress Will retry later. Spout ID = \" + spoutId, e);\n    +      }<br/>\n    +    }<br/>\n    +  }<br/>\n    +<br/>\n    +  private void setupCommitElapseTimer() {<br/>\n    +    if(commitFrequencySec<=0) {    +      return;    +    }\n<p>    +    TimerTask timerTask = new TimerTask() {<br/>\n    +      @Override<br/>\n    +      public void run() </p>\n{\n    +commitTimeElapsed.set(true);\n    +      }\n<p>    +    };<br/>\n    +    commitTimer.schedule(timerTask, commitFrequencySec * 1000);<br/>\n    +  }<br/>\n    +<br/>\n    +  private static String getFileProgress(FileReader reader) </p>\n{\n    +    return reader.getFilePath() + \" \" + reader.getFileOffset();\n    +  }\n<p>    +<br/>\n    +  private void markFileAsDone(Path filePath) {<br/>\n    +    try {<br/>\n    +      Path newFile = renameCompletedFile(reader.getFilePath());<br/>\n    +      LOG.info(\"Completed processing {}. Spout Id = {}\", newFile, spoutId);<br/>\n    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to archive completed file\" + filePath + \" Spout ID \" + spoutId, e);\n    +    }\n<p>    +    closeReaderAndResetTrackers();<br/>\n    +  }<br/>\n    +<br/>\n    +  private void markFileAsBad(Path file) {<br/>\n    +    String fileName = file.toString();<br/>\n    +    String fileNameMinusSuffix = fileName.substring(0, fileName.indexOf(inprogress_suffix));<br/>\n    +    String originalName = new Path(fileNameMinusSuffix).getName();<br/>\n    +    Path  newFile = new Path( badFilesDirPath + Path.SEPARATOR + originalName);<br/>\n    +<br/>\n    +    LOG.info(\"Moving bad file {} to {}. Processed it till offset {}. SpoutID= {}\", originalName, newFile, tracker.getCommitPosition(), spoutId);<br/>\n    +    try {<br/>\n    +      if (!hdfs.rename(file, newFile) ) </p>\n{ // seems this can fail by returning false or throwing exception\n    +throw new IOException(\"Move failed for bad file: \" + file); // convert false ret value to exception\n    +      }\n<p>    +    } catch (IOException e) </p>\n{\n    +      LOG.warn(\"Error moving bad file: \" + file + \" to destination \" + newFile + \" SpoutId =\" + spoutId, e);\n    +    }\n<p>    +    closeReaderAndResetTrackers();<br/>\n    +  }<br/>\n    +<br/>\n    +  private void closeReaderAndResetTrackers() </p>\n{\n    +    inflight.clear();\n    +    tracker.offsets.clear();\n    +    retryList.clear();\n    +\n    +    reader.close();\n    +    reader = null;\n    +    releaseLockAndLog(lock, spoutId);\n    +    lock = null;\n    +  }\n<p>    +<br/>\n    +  private static void releaseLockAndLog(FileLock fLock, String spoutId) {<br/>\n    +    try {<br/>\n    +      if(fLock!=null) {<br/>\n    +fLock.release();<br/>\n    +LOG.debug(\"Spout {} released FileLock. SpoutId = {}\", fLock.getLockFile(), spoutId);<br/>\n    +      }<br/>\n    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to delete lock file : \" +fLock.getLockFile() + \" SpoutId =\" + spoutId, e);\n    +    }\n<p>    +  }<br/>\n    +<br/>\n    +  protected void emitData(List<Object> tuple, MessageId id) {<br/>\n    +    LOG.trace(\"Emitting - {}\", id);<br/>\n    +    this.collector.emit(tuple, id);<br/>\n    +    inflight.put(id, tuple);<br/>\n    +  }<br/>\n    +<br/>\n    +  public void open(Map conf, TopologyContext context, SpoutOutputCollector collector) {<br/>\n    +    LOG.info(\"Opening HDFS Spout\");<br/>\n    +    this.conf = conf;<br/>\n    +    this.commitTimer = new Timer();<br/>\n    +    this.tracker = new ProgressTracker();<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +<br/>\n    +    this.collector = collector;<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +    this.tupleCounter = 0;<br/>\n    +<br/>\n    +    // Hdfs related settings<br/>\n    +    if( conf.containsKey(Configs.HDFS_URI)) </p>\n{\n    +      this.hdfsUri = conf.get(Configs.HDFS_URI).toString();\n    +    }\n<p> else </p>\n{\n    +      throw new RuntimeException(Configs.HDFS_URI + \" setting is required\");\n    +    }\n<p>    +<br/>\n    +    try </p>\n{\n    +      this.hdfs = FileSystem.get(URI.create(hdfsUri), hdfsConfig);\n    +    }\n<p> catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to instantiate file system\", e);\n    +      throw new RuntimeException(\"Unable to instantiate file system\", e);\n    +    }\n<p>    +<br/>\n    +<br/>\n    +    if ( conf.containsKey(configKey) ) {<br/>\n    +      Map<String, Object> map = (Map<String, Object>)conf.get(configKey);<br/>\n    +if(map != null) {<br/>\n    +  for(String keyName : map.keySet())</p>\n{\n    +    LOG.info(\"HDFS Config override : \" + keyName + \" = \" + String.valueOf(map.get(keyName)));\n    +    this.hdfsConfig.set(keyName, String.valueOf(map.get(keyName)));\n    +  }\n<p>    +  try </p>\n{\n    +    HdfsSecurityUtil.login(conf, hdfsConfig);\n    +  }\n<p> catch (IOException e) </p>\n{\n    +    LOG.error(\"HDFS Login failed \", e);\n    +    throw new RuntimeException(e);\n    +  }\n<p>    +} // if(map != null)<br/>\n    +      }<br/>\n    +<br/>\n    +    // Reader type config<br/>\n    +    if( conf.containsKey(Configs.READER_TYPE) ) </p>\n{\n    +      readerType = conf.get(Configs.READER_TYPE).toString();\n    +      checkValidReader(readerType);\n    +    }\n<p>    +<br/>\n    +    // &#8211; source dir config<br/>\n    +    if ( !conf.containsKey(Configs.SOURCE_DIR) ) </p>\n{\n    +      LOG.error(Configs.SOURCE_DIR + \" setting is required\");\n    +      throw new RuntimeException(Configs.SOURCE_DIR + \" setting is required\");\n    +    }\n<p>    +    this.sourceDirPath = new Path( conf.get(Configs.SOURCE_DIR).toString() );<br/>\n    +<br/>\n    +    // &#8211; archive dir config<br/>\n    +    if ( !conf.containsKey(Configs.ARCHIVE_DIR) ) </p>\n{\n    +      LOG.error(Configs.ARCHIVE_DIR + \" setting is required\");\n    +      throw new RuntimeException(Configs.ARCHIVE_DIR + \" setting is required\");\n    +    }\n<p>    +    this.archiveDirPath = new Path( conf.get(Configs.ARCHIVE_DIR).toString() );<br/>\n    +    validateOrMakeDir(hdfs, archiveDirPath, \"Archive\");<br/>\n    +<br/>\n    +    // &#8211; bad files dir config<br/>\n    +    if ( !conf.containsKey(Configs.BAD_DIR) ) </p>\n{\n    +      LOG.error(Configs.BAD_DIR + \" setting is required\");\n    +      throw new RuntimeException(Configs.BAD_DIR + \" setting is required\");\n    +    }\n<p>    +<br/>\n    +    this.badFilesDirPath = new Path(conf.get(Configs.BAD_DIR).toString());<br/>\n    +    validateOrMakeDir(hdfs, badFilesDirPath, \"bad files\");<br/>\n    +<br/>\n    +    // &#8211; ignore file names config<br/>\n    +    if ( conf.containsKey(Configs.IGNORE_SUFFIX) ) </p>\n{\n    +      this.ignoreSuffix = conf.get(Configs.IGNORE_SUFFIX).toString();\n    +    }\n<p>    +<br/>\n    +    // &#8211; lock dir config<br/>\n    +    String lockDir = !conf.containsKey(Configs.LOCK_DIR) ? getDefaultLockDir(sourceDirPath) : conf.get(Configs.LOCK_DIR).toString() ;<br/>\n    +    this.lockDirPath = new Path(lockDir);<br/>\n    +    validateOrMakeDir(hdfs,lockDirPath,\"locks\");<br/>\n    +<br/>\n    +    // &#8211; lock timeout<br/>\n    +    if( conf.get(Configs.LOCK_TIMEOUT) !=null ) </p>\n{\n    +      this.lockTimeoutSec = Integer.parseInt(conf.get(Configs.LOCK_TIMEOUT).toString());\n    +    }\n<p>    +<br/>\n    +    // &#8211; enable/disable ACKing<br/>\n    +    Object ackers = conf.get(Config.TOPOLOGY_ACKER_EXECUTORS);<br/>\n    +    if( ackers!=null ) {<br/>\n    +      int ackerCount = Integer.parseInt(ackers.toString());<br/>\n    +      this.ackEnabled = (ackerCount>0);<br/>\n    +      LOG.debug(\"ACKer count = {}\", ackerCount);<br/>\n    +    }<br/>\n    +    else </p>\n{\n    +      this.ackEnabled = false;\n    +      LOG.debug(\"No ACKers config found\");\n    +    }\n<p>    +<br/>\n    +    LOG.info(\"ACK mode is {}\", ackEnabled ? \"enabled\" : \"disabled\");<br/>\n    +<br/>\n    +    // &#8211; commit frequency - count<br/>\n    +    if( conf.get(Configs.COMMIT_FREQ_COUNT) != null ) </p>\n{\n    +      commitFrequencyCount = Integer.parseInt(conf.get(Configs.COMMIT_FREQ_COUNT).toString());\n    +    }\n<p>    +<br/>\n    +    // &#8211; commit frequency - seconds<br/>\n    +    if( conf.get(Configs.COMMIT_FREQ_SEC) != null ) {<br/>\n    +      commitFrequencySec = Integer.parseInt(conf.get(Configs.COMMIT_FREQ_SEC).toString());<br/>\n    +      if(commitFrequencySec<=0) </p>\n{\n    +throw new RuntimeException(Configs.COMMIT_FREQ_SEC + \" setting must be greater than 0\");\n    +      }\n<p>    +    }<br/>\n    +<br/>\n    +    // &#8211; max duplicate<br/>\n    +    if( conf.get(Configs.MAX_OUTSTANDING) !=null )<br/>\n    +      maxOutstanding = Integer.parseInt( conf.get(Configs.MAX_OUTSTANDING).toString() );<br/>\n    +<br/>\n    +    // &#8211; clocks in sync<br/>\n    +    if( conf.get(Configs.CLOCKS_INSYNC) !=null )<br/>\n    +      clocksInSync = Boolean.parseBoolean(conf.get(Configs.CLOCKS_INSYNC).toString());<br/>\n    +<br/>\n    +    // &#8211; spout id<br/>\n    +    spoutId = context.getThisComponentId();<br/>\n    +<br/>\n    +    // setup timer for commit elapse time tracking<br/>\n    +    setupCommitElapseTimer();<br/>\n    +  }<br/>\n    +<br/>\n    +  private static void validateOrMakeDir(FileSystem fs, Path dir, String dirDescription) {<br/>\n    +    try {<br/>\n    +      if(fs.exists(dir)) {<br/>\n    +if(! fs.isDirectory(dir) ) </p>\n{\n    +  LOG.error(dirDescription + \" directory is a file, not a dir. \" + dir);\n    +  throw new RuntimeException(dirDescription + \" directory is a file, not a dir. \" + dir);\n    +}\n<p>    +      } else if(! fs.mkdirs(dir) ) </p>\n{\n    +LOG.error(\"Unable to create \" + dirDescription + \" directory \" + dir);\n    +throw new RuntimeException(\"Unable to create \" + dirDescription + \" directory \" + dir);\n    +      }\n<p>    +    } catch (IOException e) </p>\n{\n    +      LOG.error(\"Unable to create \" + dirDescription + \" directory \" + dir, e);\n    +      throw new RuntimeException(\"Unable to create \" + dirDescription + \" directory \" + dir, e);\n    +    }\n<p>    +  }<br/>\n    +<br/>\n    +  private String getDefaultLockDir(Path sourceDirPath) </p>\n{\n    +    return sourceDirPath.toString() + Path.SEPARATOR + Configs.DEFAULT_LOCK_DIR;\n    +  }\n<p>    +<br/>\n    +  private static void checkValidReader(String readerType) {<br/>\n    +    if(readerType.equalsIgnoreCase(Configs.TEXT)  || readerType.equalsIgnoreCase(Configs.SEQ) )<br/>\n    +      return;<br/>\n    +    try </p>\n{\n    +      Class<?> classType = Class.forName(readerType);\n    +      classType.getConstructor(FileSystem.class, Path.class, Map.class);\n    +      return;\n    +    }\n<p> catch (ClassNotFoundException e) </p>\n{\n    +      LOG.error(readerType + \" not found in classpath.\", e);\n    +      throw new IllegalArgumentException(readerType + \" not found in classpath.\", e);\n    +    }\n<p> catch (NoSuchMethodException e) </p>\n{\n    +      LOG.error(readerType + \" is missing the expected constructor for Readers.\", e);\n    +      throw new IllegalArgumentException(readerType + \" is missing the expected constuctor for Readers.\");\n    +    }\n<p>    +  }<br/>\n    +<br/>\n    +  @Override<br/>\n    +  public void ack(Object msgId) {<br/>\n    +    LOG.trace(\"Ack received for msg {} on spout {}\", msgId, spoutId);<br/>\n    +    if(!ackEnabled) </p>\n{\n    +      return;\n    +    }\n<p>    +    MessageId id = (MessageId) msgId;<br/>\n    +    inflight.remove(id);<br/>\n    +    ++acksSinceLastCommit;<br/>\n    +    tracker.recordAckedOffset(id.offset);<br/>\n    +    commitProgress(tracker.getCommitPosition());<br/>\n    +    if(fileReadCompletely && inflight.isEmpty()) </p>\n{\n    +      markFileAsDone(reader.getFilePath());\n    +      reader = null;\n    +    }\n<p>    +    super.ack(msgId);<br/>\n    +  }<br/>\n    +<br/>\n    +  private boolean canCommitNow() {<br/>\n    +<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    extraneous newline</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631295","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631295","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631295,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEyOTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:14:50Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user erikdw commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#discussion_r49693978\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#discussion_r49693978</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/common/ModifTimeComparator.java &#8212;<br/>\n    @@ -0,0 +1,32 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + * <p/><br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + * <p/><br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +<br/>\n    +package org.apache.storm.hdfs.common;<br/>\n    +<br/>\n    +import org.apache.hadoop.fs.FileStatus;<br/>\n    +<br/>\n    +import java.util.Comparator;<br/>\n    +<br/>\n    +<br/>\n    +public class ModifTimeComparator<br/>\n    +implements Comparator<FileStatus> {<br/>\n    +   @Override<br/>\n    +    public int compare(FileStatus o1, FileStatus o2) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    indentation is messed up.  3 and 4 spaces.  Should be 2.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612649848","html_url":"https://github.com/apache/storm/issues/5094#issuecomment-2612649848","issue_url":"https://api.github.com/repos/apache/storm/issues/5094","id":2612649848,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2NDk4NDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T07:29:42Z","updated_at":"2025-01-24T14:22:29Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.duggana\">satish.duggana</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Johnbaba\" class=\"user-hover\" rel=\"Johnbaba\">John Fang</a> I plan to work on this later but you have already started on this, assigning it to you.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612649848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171576791","html_url":"https://github.com/apache/storm/pull/994#issuecomment-171576791","issue_url":"https://api.github.com/repos/apache/storm/issues/994","id":171576791,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTU3Njc5MQ==","user":{"login":"priyank5485","id":5192436,"node_id":"MDQ6VXNlcjUxOTI0MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5192436?v=4","gravatar_id":"","url":"https://api.github.com/users/priyank5485","html_url":"https://github.com/priyank5485","followers_url":"https://api.github.com/users/priyank5485/followers","following_url":"https://api.github.com/users/priyank5485/following{/other_user}","gists_url":"https://api.github.com/users/priyank5485/gists{/gist_id}","starred_url":"https://api.github.com/users/priyank5485/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priyank5485/subscriptions","organizations_url":"https://api.github.com/users/priyank5485/orgs","repos_url":"https://api.github.com/users/priyank5485/repos","events_url":"https://api.github.com/users/priyank5485/events{/privacy}","received_events_url":"https://api.github.com/users/priyank5485/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T08:59:42Z","updated_at":"2016-01-14T08:59:42Z","author_association":"CONTRIBUTOR","body":"Just ran in to an issue where this fix does not work. Correct me if i am wrong. But a fat storm jar that is compiled with older version of storm-kafka will still use byte[] and the newer version of storm now uses ByteBuffer. Hence it throws an exception at runtime if storm is upgraded. I think upgrade of storm should still work with older topology jars. \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171576791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697278","html_url":"https://github.com/apache/storm/issues/5284#issuecomment-2612697278","issue_url":"https://api.github.com/repos/apache/storm/issues/5284","id":2612697278,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTcyNzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T08:59:43Z","updated_at":"2025-01-24T14:43:07Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user priyank5485 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/994#issuecomment-171576791\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/994#issuecomment-171576791</a></p>\n\n<p>    Just ran in to an issue where this fix does not work. Correct me if i am wrong. But a fat storm jar that is compiled with older version of storm-kafka will still use byte[] and the newer version of storm now uses ByteBuffer. Hence it throws an exception at runtime if storm is upgraded. I think upgrade of storm should still work with older topology jars. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701274","html_url":"https://github.com/apache/storm/issues/5306#issuecomment-2612701274","issue_url":"https://api.github.com/repos/apache/storm/issues/5306","id":2612701274,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDEyNzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T15:22:06Z","updated_at":"2025-01-24T14:44:46Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garrick.dasbach@inin.com\">garrick.dasbach@inin.com</a>:</i>\n<p>Not sure how far out the JStorm port is, but in the interim, maybe it would be sufficient to make the Kafka fetch asynchronous.  That way we can allow long-polling without blocking the spout.  </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701521","html_url":"https://github.com/apache/storm/issues/5308#issuecomment-2612701521","issue_url":"https://api.github.com/repos/apache/storm/issues/5308","id":2612701521,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE1MjE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T17:47:12Z","updated_at":"2025-01-24T14:44:53Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user zhuoliu opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1015\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1015</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1473\" title=\"Enable search on the daemon log\" class=\"issue-link\" data-issue-key=\"STORM-1473\"><del>STORM-1473</del></a> enable log search for daemon logs</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/zhuoliu/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/zhuoliu/storm</a> 1473</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1015.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1015.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1015</p>\n\n<hr />\n<p>commit c9cdcbc76a7b65b03dce09541f2df40a97a6e1fd<br/>\nAuthor: zhuol <zhuol@yahoo-inc.com><br/>\nDate:   2016-01-14T17:46:49Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1473\" title=\"Enable search on the daemon log\" class=\"issue-link\" data-issue-key=\"STORM-1473\"><del>STORM-1473</del></a> enable log search for daemon logs</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701638","html_url":"https://github.com/apache/storm/issues/5309#issuecomment-2612701638","issue_url":"https://api.github.com/repos/apache/storm/issues/5309","id":2612701638,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE2Mzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:30:47Z","updated_at":"2025-01-24T14:44:56Z","author_association":"COLLABORATOR","body":"Subtask of parent task STORM-1199","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171771850","html_url":"https://github.com/apache/storm/pull/936#issuecomment-171771850","issue_url":"https://api.github.com/repos/apache/storm/issues/936","id":171771850,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTc3MTg1MA==","user":{"login":"roshannaik","id":2366541,"node_id":"MDQ6VXNlcjIzNjY1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/2366541?v=4","gravatar_id":"","url":"https://api.github.com/users/roshannaik","html_url":"https://github.com/roshannaik","followers_url":"https://api.github.com/users/roshannaik/followers","following_url":"https://api.github.com/users/roshannaik/following{/other_user}","gists_url":"https://api.github.com/users/roshannaik/gists{/gist_id}","starred_url":"https://api.github.com/users/roshannaik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roshannaik/subscriptions","organizations_url":"https://api.github.com/users/roshannaik/orgs","repos_url":"https://api.github.com/users/roshannaik/repos","events_url":"https://api.github.com/users/roshannaik/events{/privacy}","received_events_url":"https://api.github.com/users/roshannaik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:34:43Z","updated_at":"2016-01-14T20:34:43Z","author_association":"CONTRIBUTOR","body":"As per request from @harshach, I have opened up STORM-1474 for addressing the pending minor review comments. Looks like @harshach is away, @Parth-Brahmbhatt  could you take a look into committing it ?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171771850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631301","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631301","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631301,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEzMDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:34:46Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user roshannaik commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#issuecomment-171771850\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#issuecomment-171771850</a></p>\n\n<p>    As per request from @harshach, I have opened up <a href=\"https://issues.apache.org/jira/browse/STORM-1474\" title=\"Address remaining minor review comments for STORM-1199\" class=\"issue-link\" data-issue-key=\"STORM-1474\"><del>STORM-1474</del></a> for addressing the pending minor review comments. Looks like @harshach is away, @Parth-Brahmbhatt  could you take a look into committing it ?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697409","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697409","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697409,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MDk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:38:10Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49781622\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49781622</a></p>\n\n<p>    &#8212; Diff: storm-core/test/jvm/org/apache/storm/scheduler/resource/TestResourceAwareScheduler.java &#8212;<br/>\n    @@ -939,6 +945,76 @@ public void TestEvictTopologyFromItself() {</p>\n<ul>\n\t<li>If users are above his or her guarantee, check if topology eviction works correct<br/>\n  */<br/>\n @Test<br/>\n    +    public void Test() {\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Rename?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697415","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697415","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697415,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:39:02Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49781708\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49781708</a></p>\n\n<p>    &#8212; Diff: storm-core/test/jvm/org/apache/storm/scheduler/resource/TestResourceAwareScheduler.java &#8212;<br/>\n    @@ -1083,6 +1159,15 @@ public void TestOverGuaranteeEviction() {<br/>\n     Assert.assertEquals(\"# of pending topologies\", 0, rs.getUser(\"bobby\").getTopologiesPending().size());<br/>\n     Assert.assertEquals(\"# of attempted topologies\", 0, rs.getUser(\"bobby\").getTopologiesAttempted().size());<br/>\n     Assert.assertEquals(\"# of invalid topologies\", 0, rs.getUser(\"bobby\").getTopologiesInvalid().size());<br/>\n    +<br/>\n    +LOG.info(\"Assignments: {}\", cluster.getAssignments());<br/>\n    +for (Map.Entry<String, SchedulerAssignment> entry : cluster.getAssignments().entrySet()) {<br/>\n    +    LOG.info(\"Topology id: {}\", entry.getKey());<br/>\n    +    for(WorkerSlot target: entry.getValue().getSlots()) {<br/>\n    +LOG.info(\"target resources onheap: {} offheap: {} cpu: {}\", target.getAllocatedMemOnHeap(), target.getAllocatedMemOffHeap(), target.getAllocatedCpu());<br/>\n    +    }<br/>\n    +<br/>\n    +}<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Revert?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631308","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631308","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631308,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEzMDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:56:12Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697418","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697418","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697418,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:56:19Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49783662\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49783662</a></p>\n\n<p>    &#8212; Diff: storm-core/src/clj/org/apache/storm/daemon/nimbus.clj &#8212;<br/>\n    @@ -701,11 +701,7 @@<br/>\n    ;; making a map from node+port to WorkerSlot with allocated resources<br/>\n    node+port->slot (into {} (for [[<span class=\"error\">&#91;node port&#93;</span> <span class=\"error\">&#91;mem-on-heap mem-off-heap cpu&#93;</span>] worker->resources]<br/>\n       </p>\n{[node port]\n    -   (doto (WorkerSlot. node port)\n    -     (.allocateResource\n    -       mem-on-heap\n    -       mem-off-heap\n    -       cpu))}\n<p>))<br/>\n    +   (doto (WorkerSlot. node port mem-on-heap mem-off-heap cpu))}))<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Can we remove the `doto` here?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171777228","html_url":"https://github.com/apache/storm/pull/936#issuecomment-171777228","issue_url":"https://api.github.com/repos/apache/storm/issues/936","id":171777228,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTc3NzIyOA==","user":{"login":"Parth-Brahmbhatt","id":6914358,"node_id":"MDQ6VXNlcjY5MTQzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/6914358?v=4","gravatar_id":"","url":"https://api.github.com/users/Parth-Brahmbhatt","html_url":"https://github.com/Parth-Brahmbhatt","followers_url":"https://api.github.com/users/Parth-Brahmbhatt/followers","following_url":"https://api.github.com/users/Parth-Brahmbhatt/following{/other_user}","gists_url":"https://api.github.com/users/Parth-Brahmbhatt/gists{/gist_id}","starred_url":"https://api.github.com/users/Parth-Brahmbhatt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Parth-Brahmbhatt/subscriptions","organizations_url":"https://api.github.com/users/Parth-Brahmbhatt/orgs","repos_url":"https://api.github.com/users/Parth-Brahmbhatt/repos","events_url":"https://api.github.com/users/Parth-Brahmbhatt/events{/privacy}","received_events_url":"https://api.github.com/users/Parth-Brahmbhatt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:56:21Z","updated_at":"2016-01-14T20:56:21Z","author_association":"CONTRIBUTOR","body":"@roshannaik Thanks for the patch. I have merged this request to master. \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171777228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631314","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631314","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631314,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEzMTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:56:23Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Parth-Brahmbhatt commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/936#issuecomment-171777228\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/936#issuecomment-171777228</a></p>\n\n<p>    @roshannaik Thanks for the patch. I have merged this request to master. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697422","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697422","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697422,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:56:46Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49783732\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49783732</a></p>\n\n<p>    &#8212; Diff: storm-core/src/clj/org/apache/storm/daemon/nimbus.clj &#8212;<br/>\n    @@ -701,11 +701,7 @@<br/>\n    ;; making a map from node+port to WorkerSlot with allocated resources<br/>\n    node+port->slot (into {} (for [[<span class=\"error\">&#91;node port&#93;</span> <span class=\"error\">&#91;mem-on-heap mem-off-heap cpu&#93;</span>] worker->resources]<br/>\n       </p>\n{[node port]\n    -   (doto (WorkerSlot. node port)\n    -     (.allocateResource\n    -       mem-on-heap\n    -       mem-off-heap\n    -       cpu))}\n<p>))<br/>\n    +   (doto (WorkerSlot. node port mem-on-heap mem-off-heap cpu))}))<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    will remove</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697425","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697425","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697425,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T20:58:03Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49783928\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49783928</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/Cluster.java &#8212;<br/>\n    @@ -662,22 +662,50 @@ public void setStatusMap(Map<String, String> statusMap) </p>\n{\n     this.status.putAll(statusMap);\n }\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>public void setResources(String topologyId, Double[] resources) {</li>\n\t<li>this.resources.put(topologyId, resources);<br/>\n    +    /**<br/>\n    +     * Set the amount of resources used used by a topology. Used for displaying resource information on the UI<br/>\n    +     * @param topologyId<br/>\n    +     * @param resources describes the resources requested and assigned to topology in the following format in an array:<br/>\n    +     *  \n{requestedMemOnHeap, requestedMemOffHeap, requestedCpu, assignedMemOnHeap, assignedMemOffHeap, assignedCpu}\n<p>    +     */<br/>\n    +    public void setTopologyResources(String topologyId, Double[] resources) {</p>\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Can we replace `Double[]` with a class that is appropriate to the data?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697430","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697430","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697430,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:04:55Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49784882\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49784882</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/SchedulerAssignment.java &#8212;<br/>\n    @@ -55,4 +56,6 @@<br/>\n public Set<ExecutorDetails> getExecutors();</p>\n\n<p> public Set<WorkerSlot> getSlots();<br/>\n    +<br/>\n    +    public Map<WorkerSlot, Collection<ExecutorDetails>> getSlotToExecutors();<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    very minor: The interface is public, so it's redundant to mark each method declaration as public.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697434","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697434","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697434,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0MzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:08:29Z","updated_at":"2025-01-24T14:43:10Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49785320\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49785320</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/WorkerSlot.java &#8212;<br/>\n    @@ -40,11 +47,8 @@ public int getPort() </p>\n{\n     return port;\n }\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>public WorkerSlot allocateResource(double memOnHeap, double memOffHeap, double cpu) {</li>\n\t<li>this.memOnHeap += memOnHeap;</li>\n\t<li>this.memOffHeap += memOffHeap;</li>\n\t<li>this.cpu += cpu;</li>\n\t<li>return this;<br/>\n    +    public String getId() {<br/>\n    +return this.getNodeId() + \":\" + this.getPort();\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    minor: Do not need `this.` when calling methods.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697439","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697439","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697439,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0Mzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:09:01Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user zhuoliu commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49785382\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49785382</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/Cluster.java &#8212;<br/>\n    @@ -662,22 +662,50 @@ public void setStatusMap(Map<String, String> statusMap) </p>\n{\n     this.status.putAll(statusMap);\n }\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>public void setResources(String topologyId, Double[] resources) {</li>\n\t<li>this.resources.put(topologyId, resources);<br/>\n    +    /**<br/>\n    +     * Set the amount of resources used used by a topology. Used for displaying resource information on the UI<br/>\n    +     * @param topologyId<br/>\n    +     * @param resources describes the resources requested and assigned to topology in the following format in an array:<br/>\n    +     *  \n{requestedMemOnHeap, requestedMemOffHeap, requestedCpu, assignedMemOnHeap, assignedMemOffHeap, assignedCpu}\n<p>    +     */<br/>\n    +    public void setTopologyResources(String topologyId, Double[] resources) {</p>\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Yep, I think that would be helpful. Both for topology and supervisor resources. We may file a separate JIRA for that or do it within this pull request.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171780642","html_url":"https://github.com/apache/storm/pull/1010#issuecomment-171780642","issue_url":"https://api.github.com/repos/apache/storm/issues/1010","id":171780642,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTc4MDY0Mg==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:10:19Z","updated_at":"2016-01-14T21:10:19Z","author_association":"MEMBER","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171780642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701140","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701140","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701140,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExNDA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:10:20Z","updated_at":"2025-01-24T14:44:42Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1010#issuecomment-171780642\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1010#issuecomment-171780642</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697443","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697443","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697443,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NDM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:17:48Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49786540\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49786540</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -43,32 +43,84 @@<br/>\n      */<br/>\n     public class RAS_Node {<br/>\n private static final Logger LOG = LoggerFactory.getLogger(RAS_Node.class);</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>private Map<String, Set<WorkerSlot>> _topIdToUsedSlots = new HashMap<String, Set<WorkerSlot>>();</li>\n\t<li>private Set<WorkerSlot> _freeSlots = new HashSet<WorkerSlot>();<br/>\n    +<br/>\n    +    //A map consisting of all workers on the node.<br/>\n    +    //The key of the map is the worker id and the value is the corresponding workerslot object<br/>\n    +    Map<String, WorkerSlot> _slots = new HashMap<String, WorkerSlot> ();<br/>\n    +<br/>\n    +    // A map describing which topologies are using which slots on this node.  The format of the map is the following:<br/>\n    +    // {TopologyId -> {WorkerId -> \n{Executors}\n<p>}}<br/>\n    +    private Map<String, Map<String, Collection<ExecutorDetails>>> _topIdToUsedSlots = new HashMap<String, Map<String, Collection<ExecutorDetails>>>();<br/>\n    +<br/>\n private final String _nodeId;<br/>\n private String _hostname;<br/>\n private boolean _isAlive;<br/>\n private SupervisorDetails _sup;</p></li>\n\t<li>private Double _availMemory;</li>\n\t<li>private Double _availCPU;</li>\n\t<li>private Cluster _cluster;</li>\n\t<li>private Topologies _topologies;<br/>\n    +    private Double _availMemory = 0.0;<br/>\n    +    private Double _availCPU = 0.0;<br/>\n    +    private final Cluster _cluster;<br/>\n    +    private final Topologies _topologies;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>public RAS_Node(String nodeId, Set<Integer> allPorts, boolean isAlive,</li>\n\t<li>SupervisorDetails sup, Cluster cluster, Topologies topologies) {<br/>\n    +    public RAS_Node(String nodeId, SupervisorDetails sup, Cluster cluster, Topologies topologies, Map<String, WorkerSlot> workerIdToWorker, Map<String, Map<String, Collection<ExecutorDetails>>> assignmentMap) {<br/>\n    +//Node ID and supervisor ID are the same.<br/>\n     _nodeId = nodeId;</li>\n\t<li>_isAlive = isAlive;</li>\n\t<li>if (_isAlive && allPorts != null) {</li>\n\t<li>for (int port : allPorts) \n{\n    -_freeSlots.add(new WorkerSlot(_nodeId, port));\n    -    }</li>\n\t<li>_sup = sup;<br/>\n    +if (sup == null) \n{\n    +    _isAlive = false;\n    +}\n<p> else </p>\n{\n    +    _isAlive = !cluster.isBlackListed(_nodeId);\n    +}\n<p>    +<br/>\n    +_cluster = cluster;<br/>\n    +_topologies = topologies;<br/>\n    +<br/>\n    +// initialize slots for this node<br/>\n    +if (workerIdToWorker != null) </p>\n{\n    +    _slots = workerIdToWorker;\n    +}\n<p>    +<br/>\n    +//initialize assignment map<br/>\n    +if (assignmentMap != null) </p>\n{\n    +    _topIdToUsedSlots = assignmentMap;\n    +}\n<p>    +<br/>\n    +//check if node is alive<br/>\n    +if (_isAlive && sup != null) {<br/>\n _hostname = sup.getHost();<br/>\n    +    _sup = sup;<br/>\n _availMemory = getTotalMemoryResources();<br/>\n _availCPU = getTotalCpuResources();<br/>\n    +<br/>\n    +    LOG.debug(\"Found a {} Node {} {}\",<br/>\n    +    _isAlive ? \"living\" : \"dead\", _nodeId, sup.getAllPorts());<br/>\n    +    LOG.debug(\"resources_mem: {}, resources_CPU: {}\", sup.getTotalMemory(), sup.getTotalCPU());<br/>\n    +    //intialize resource usages on node<br/>\n    +    intializeResources();<br/>\n    +}<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * intializes resource usages on node</p>\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    `initializes`</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697447","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697447","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697447,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:19:39Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49786777\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49786777</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -103,92 +182,37 @@ public boolean isAlive() {<br/>\n }</p>\n\n<p> public boolean isTotallyFree() {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>return _topIdToUsedSlots.isEmpty();<br/>\n    +return getUsedSlots().isEmpty();\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Is this method used?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697451","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697451","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697451,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:20:29Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49786868\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49786868</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -103,92 +182,37 @@ public boolean isAlive() {<br/>\n }</p>\n\n<p> public boolean isTotallyFree() </p>\n{\n    -return _topIdToUsedSlots.isEmpty();\n    +return getUsedSlots().isEmpty();\n }\n\n<p> public int totalSlotsFree() </p>\n{\n    -return _freeSlots.size();\n    +return getFreeSlots().size();\n }\n\n<p> public int totalSlotsUsed() {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>int total = 0;</li>\n\t<li>for (Set<WorkerSlot> slots : _topIdToUsedSlots.values()) \n{\n    -    total += slots.size();\n    -}</li>\n\t<li>return total;<br/>\n    +return getUsedSlots().size();<br/>\n }</li>\n</ul>\n\n\n<p> public int totalSlots() </p>\n{\n    -return totalSlotsFree() + totalSlotsUsed();\n    +return _slots.size();\n }\n\n<p> public int totalSlotsUsed(String topId) {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>int total = 0;</li>\n\t<li>Set<WorkerSlot> slots = _topIdToUsedSlots.get(topId);</li>\n\t<li>if (slots != null) \n{\n    -    total = slots.size();\n    -}</li>\n\t<li>return total;</li>\n\t<li>}<br/>\n    -</li>\n\t<li>private void validateSlot(WorkerSlot ws) {</li>\n\t<li>if (!_nodeId.equals(ws.getNodeId())) \n{\n    -    throw new IllegalArgumentException(\n    -    \"Trying to add a slot to the wrong node \" + ws +\n    -    \" is not a part of \" + _nodeId);\n    -}</li>\n\t<li>}<br/>\n    -</li>\n\t<li>void addOrphanedSlot(WorkerSlot ws) {</li>\n\t<li>if (_isAlive) \n{\n    -    throw new IllegalArgumentException(\"Orphaned Slots \" +\n    -    \"only are allowed on dead nodes.\");\n    -}</li>\n\t<li>validateSlot(ws);</li>\n\t<li>if (_freeSlots.contains(ws)) \n{\n    -    return;\n    -}</li>\n\t<li>for (Set<WorkerSlot> used : _topIdToUsedSlots.values()) {</li>\n\t<li>if (used.contains(ws)) \n{\n    -return;\n    -    }</li>\n\t<li>}</li>\n\t<li>_freeSlots.add(ws);</li>\n\t<li>}<br/>\n    -</li>\n\t<li>boolean assignInternal(WorkerSlot ws, String topId, boolean dontThrow) {</li>\n\t<li>validateSlot(ws);</li>\n\t<li>if (!_freeSlots.remove(ws)) {</li>\n\t<li>if (dontThrow) \n{\n    -return true;\n    -    }</li>\n\t<li>throw new IllegalStateException(\"Assigning a slot that was not free \" + ws);</li>\n\t<li>}</li>\n\t<li>Set<WorkerSlot> usedSlots = _topIdToUsedSlots.get(topId);</li>\n\t<li>if (usedSlots == null) \n{\n    -    usedSlots = new HashSet<WorkerSlot>();\n    -    _topIdToUsedSlots.put(topId, usedSlots);\n    -}</li>\n\t<li>usedSlots.add(ws);</li>\n\t<li>return false;<br/>\n    +return getUsedSlots(topId).size();<br/>\n }</li>\n</ul>\n\n\n<p> /**</p>\n<ul>\n\t<li>Free all slots on this node.  This will update the Cluster too.<br/>\n  */</li>\n</ul>\n<ul class=\"alternate\" type=\"square\">\n\t<li>public void freeAllSlots() {<br/>\n    +     public void freeAllSlots() {\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    revert?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697452","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697452","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697452,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:22:01Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49787051\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49787051</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -247,19 +253,23 @@ private void freeMemory(double amount) {</p>\n\n<p> private void freeCPU(double amount) {<br/>\n     LOG.debug(\"freeing {} CPU on node...avail CPU: {}\", amount, getHostname(), _availCPU);</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>if ((_availCPU + amount) > getAvailableCpuResources()) {</li>\n\t<li>LOG.warn(\"Freeing more CPU than there exists!\");<br/>\n    +if ((_availCPU + amount) > getTotalCpuResources()) {<br/>\n    +    LOG.warn(\"Freeing more CPU than there exists! CPU trying to free: {} Total CPU on Node: {}\", (_availMemory + amount), getTotalCpuResources());<br/>\n return;<br/>\n     }<br/>\n     _availCPU += amount;<br/>\n }</li>\n</ul>\n\n\n<p>    +    /**<br/>\n    +     * get the amount of memory used by a worker<br/>\n    +     */<br/>\n public double getMemoryUsedByWorker(WorkerSlot ws) {<br/>\n     TopologyDetails topo = findTopologyUsingWorker(ws);<br/>\n     if (topo == null) </p>\n{\n return 0.0;\n     }\n<p>     Collection<ExecutorDetails> execs = getExecutors(ws, _cluster);<br/>\n    +LOG.info(\"getMemoryUsedByWorker executors: {}\", execs);<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Is it useful for this to be INFO level? This could be a lot of text to log.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697455","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697455","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697455,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:27:40Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49787766\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49787766</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/strategies/scheduling/DefaultResourceAwareStrategy.java &#8212;<br/>\n    @@ -121,7 +116,7 @@ public SchedulingResult schedule(TopologyDetails td) </p>\n{\n td.getTaskResourceReqList(exec), entry.getKey() }\n<p>);<br/>\n WorkerSlot targetSlot = this.findWorkerForExec(exec, td, schedulerAssignmentMap);<br/>\n if (targetSlot != null) {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>RAS_Node targetNode = this.idToNode(targetSlot.getNodeId());<br/>\n    +NodeDetails targetNode = this.idToNode(targetSlot.getNodeId());\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    It seems there is a chunk of duplicate code here and in the for loop below.  We are adding one line to both, but maybe it would be better to pull them out into a helper method to avoid accidental mistakes in the future?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697457","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697457","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697457,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:30:28Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49788091\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49788091</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/strategies/scheduling/IStrategy.java &#8212;<br/>\n    @@ -36,7 +31,7 @@<br/>\n /**</p>\n<ul>\n\t<li>initialize prior to scheduling<br/>\n  */</li>\n</ul>\n<ul class=\"alternate\" type=\"square\">\n\t<li>public void prepare(Topologies topologies, Cluster cluster, Map<String, User> userMap, RAS_Nodes nodes);<br/>\n    +    public void prepare(ClusterStateData clusterStateData);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    minor: public not needed</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631319","html_url":"https://github.com/apache/storm/issues/5037#issuecomment-2612631319","issue_url":"https://api.github.com/repos/apache/storm/issues/5037","id":2612631319,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2MzEzMTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:50:05Z","updated_at":"2025-01-24T14:14:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=roshan_naik\">roshan_naik</a>:</i>\n<p>Thanks all for your input/feedback/reviews ..  they were very useful.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612631319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171793561","html_url":"https://github.com/apache/storm/pull/1012#issuecomment-171793561","issue_url":"https://api.github.com/repos/apache/storm/issues/1012","id":171793561,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTc5MzU2MQ==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:55:21Z","updated_at":"2016-01-14T21:55:21Z","author_association":"MEMBER","body":"Not really specific to this pull request, but I missed it before when the profiling functionality was originally added.\n\nIf profiling is enabled, we turn on the \"Commercial Features\" of the JVM:\n\n`worker.profiler.childopts: \"-XX:+UnlockCommercialFeatures -XX:+FlightRecorder`\n\nThe current Oracle Java license [1] states:\n\n> Some of the packages described in the Installation of Oracle Java SE Product Editions section above install Commercial Features that are restricted to Oracle Java SE Advanced, Oracle Java SE Advanced Desktop and/or Oracle Java SE Suite. **This means that even if you download an Oracle Java SE package for free under the Java BCLA, you must separately license from Oracle (and pay the appropriate license fee) the right to use any Commercial Features, described in Table 1-1 below, included in these packages.**\n\nIf my interpretation of the license is correct, that means users must have purchased a license from Orace for each node that has profiling enabled. (Read the license [1] for more information and examples.)\n\nI think that's probably okay, but we may want to document that somewhere (`defaults.yaml` maybe?), so users don't accidentally run afoul of Oracle's licensing terms.\n\n[1] http://www.oracle.com/technetwork/java/javase/terms/products/index.html\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171793561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697838","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697838","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697838,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4Mzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:55:23Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1012#issuecomment-171793561\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1012#issuecomment-171793561</a></p>\n\n<p>    Not really specific to this pull request, but I missed it before when the profiling functionality was originally added.</p>\n\n<p>    If profiling is enabled, we turn on the \"Commercial Features\" of the JVM:</p>\n\n<p>    `worker.profiler.childopts: \"-XX:+UnlockCommercialFeatures -XX:+FlightRecorder`</p>\n\n<p>    The current Oracle Java license <span class=\"error\">&#91;1&#93;</span> states:</p>\n\n<p>    >Some of the packages described in the Installation of Oracle Java SE Product Editions section above install Commercial Features that are restricted to Oracle Java SE Advanced, Oracle Java SE Advanced Desktop and/or Oracle Java SE Suite. *<b>This means that even if you download an Oracle Java SE package for free under the Java BCLA, you must separately license from Oracle (and pay the appropriate license fee) the right to use any Commercial Features, described in Table 1-1 below, included in these packages.</b>*</p>\n\n<p>    If my interpretation of the license is correct, that means users must have purchased a license from Orace for each node that has profiling enabled. (Read the license <span class=\"error\">&#91;1&#93;</span> for more information and examples.)</p>\n\n<p>    I think that's probably okay, but we may want to document that somewhere (`defaults.yaml` maybe?), so users don't accidentally run afoul of Oracle's licensing terms.</p>\n\n<p>    <span class=\"error\">&#91;1&#93;</span> <a href=\"http://www.oracle.com/technetwork/java/javase/terms/products/index.html\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.oracle.com/technetwork/java/javase/terms/products/index.html</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700124","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700124","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700124,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxMjQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T21:59:52Z","updated_at":"2025-01-24T14:44:18Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1007#discussion_r49791863\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1007#discussion_r49791863</a></p>\n\n<p>    &#8212; Diff: storm-core/pom.xml &#8212;<br/>\n    @@ -618,7 +618,7 @@<br/>\n     <relocation><br/>\n <pattern>org.apache.thrift</pattern><br/>\n <!-- This pattern is inconsistent for backwards compatibility purposes. --></p>\n<ul class=\"alternate\" type=\"square\">\n\t<li><shadedPattern>org.apache.thrift7</shadedPattern><br/>\n    +    <shadedPattern>org.apache.storm.thrift</shadedPattern>\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    We should remove the old comment about backward compatibility.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171796975","html_url":"https://github.com/apache/storm/pull/1011#issuecomment-171796975","issue_url":"https://api.github.com/repos/apache/storm/issues/1011","id":171796975,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTc5Njk3NQ==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:06:52Z","updated_at":"2016-01-14T22:06:52Z","author_association":"MEMBER","body":"Personally, I don't think we need separate pull requests for each branch yet (master and 1.x have not diverged enough to cause conflicts), as it kind of confuses things in terms of +1s and comments. It might be easier to add a note requesting that it also be applied to another branch, e.g. \"I would also like to see this applied to the X branch.\"\n\nIf for some reason the patch couldn't be applied to the other branch(es), the committer doing the merge could either resolve the conflicts or request an additional pull request against the conflicted branch.\n\nThoughts?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171796975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701147","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701147","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701147,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExNDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:06:53Z","updated_at":"2025-01-24T14:44:42Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1011#issuecomment-171796975\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1011#issuecomment-171796975</a></p>\n\n<p>    Personally, I don't think we need separate pull requests for each branch yet (master and 1.x have not diverged enough to cause conflicts), as it kind of confuses things in terms of +1s and comments. It might be easier to add a note requesting that it also be applied to another branch, e.g. \"I would also like to see this applied to the X branch.\"</p>\n\n<p>    If for some reason the patch couldn't be applied to the other branch(es), the committer doing the merge could either resolve the conflicts or request an additional pull request against the conflicted branch.</p>\n\n<p>    Thoughts?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802145","html_url":"https://github.com/apache/storm/pull/1012#issuecomment-171802145","issue_url":"https://api.github.com/repos/apache/storm/issues/1012","id":171802145,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTgwMjE0NQ==","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:28:30Z","updated_at":"2016-01-14T22:28:30Z","author_association":"NONE","body":"Yes, I can add something.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697842","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697842","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697842,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4NDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:28:31Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1012#issuecomment-171802145\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1012#issuecomment-171802145</a></p>\n\n<p>    Yes, I can add something.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802210","html_url":"https://github.com/apache/storm/pull/1013#issuecomment-171802210","issue_url":"https://api.github.com/repos/apache/storm/issues/1013","id":171802210,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTgwMjIxMA==","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:28:47Z","updated_at":"2016-01-14T22:28:47Z","author_association":"NONE","body":"See #1012 \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697847","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697847","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697847,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4NDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:28:49Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1013#issuecomment-171802210\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1013#issuecomment-171802210</a></p>\n\n<p>    See #1012 </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697851","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697851","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697851,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4NTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:28:49Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1013\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1013</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802477","html_url":"https://github.com/apache/storm/pull/1011#issuecomment-171802477","issue_url":"https://api.github.com/repos/apache/storm/issues/1011","id":171802477,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTgwMjQ3Nw==","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:30:01Z","updated_at":"2016-01-14T22:30:01Z","author_association":"NONE","body":"See #1010\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701150","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701150","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701150,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExNTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:30:03Z","updated_at":"2025-01-24T14:44:42Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1011#issuecomment-171802477\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1011#issuecomment-171802477</a></p>\n\n<p>    See #1010</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701156","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701156","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701156,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExNTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:30:04Z","updated_at":"2025-01-24T14:44:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1011\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1011</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802669","html_url":"https://github.com/apache/storm/pull/1016#issuecomment-171802669","issue_url":"https://api.github.com/repos/apache/storm/issues/1016","id":171802669,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTgwMjY2OQ==","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:30:51Z","updated_at":"2016-01-14T22:30:51Z","author_association":"NONE","body":"Mostly minor comments, otherwise looks ok to me.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171802669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697461","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697461","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697461,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NjE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:30:54Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#issuecomment-171802669\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#issuecomment-171802669</a></p>\n\n<p>    Mostly minor comments, otherwise looks ok to me.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171805811","html_url":"https://github.com/apache/storm/pull/1012#issuecomment-171805811","issue_url":"https://api.github.com/repos/apache/storm/issues/1012","id":171805811,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTgwNTgxMQ==","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:45:17Z","updated_at":"2016-01-14T22:45:17Z","author_association":"NONE","body":"@ptgoetz , added.  Do you think it is OK?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171805811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697857","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697857","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697857,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4NTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T22:45:18Z","updated_at":"2025-01-24T14:43:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1012#issuecomment-171805811\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1012#issuecomment-171805811</a></p>\n\n<p>    @ptgoetz , added.  Do you think it is OK?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/171816513","html_url":"https://github.com/apache/storm/pull/1012#issuecomment-171816513","issue_url":"https://api.github.com/repos/apache/storm/issues/1012","id":171816513,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MTgxNjUxMw==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T23:31:16Z","updated_at":"2016-01-14T23:31:16Z","author_association":"MEMBER","body":"Works for me. Thanks @d2r.\n\n+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/171816513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697863","html_url":"https://github.com/apache/storm/issues/5287#issuecomment-2612697863","issue_url":"https://api.github.com/repos/apache/storm/issues/5287","id":2612697863,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc4NjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-14T23:31:18Z","updated_at":"2025-01-24T14:43:22Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1012#issuecomment-171816513\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1012#issuecomment-171816513</a></p>\n\n<p>    Works for me. Thanks @d2r.</p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697465","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697465","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697465,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T04:56:39Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49820988\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49820988</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/SchedulerAssignment.java &#8212;<br/>\n    @@ -55,4 +56,6 @@<br/>\n public Set<ExecutorDetails> getExecutors();</p>\n\n<p> public Set<WorkerSlot> getSlots();<br/>\n    +<br/>\n    +    public Map<WorkerSlot, Collection<ExecutorDetails>> getSlotToExecutors();<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    @d2r should I delete all of the public declarations for all the methods in this class then?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697467","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697467","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697467,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0Njc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T04:56:49Z","updated_at":"2025-01-24T14:43:11Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49820997\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49820997</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/WorkerSlot.java &#8212;<br/>\n    @@ -40,11 +47,8 @@ public int getPort() </p>\n{\n     return port;\n }\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>public WorkerSlot allocateResource(double memOnHeap, double memOffHeap, double cpu) {</li>\n\t<li>this.memOnHeap += memOnHeap;</li>\n\t<li>this.memOffHeap += memOffHeap;</li>\n\t<li>this.cpu += cpu;</li>\n\t<li>return this;<br/>\n    +    public String getId() {<br/>\n    +return this.getNodeId() + \":\" + this.getPort();\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    will remove</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697471","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697471","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697471,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T04:57:49Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49821028\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49821028</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -43,32 +43,84 @@<br/>\n      */<br/>\n     public class RAS_Node {<br/>\n private static final Logger LOG = LoggerFactory.getLogger(RAS_Node.class);</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>private Map<String, Set<WorkerSlot>> _topIdToUsedSlots = new HashMap<String, Set<WorkerSlot>>();</li>\n\t<li>private Set<WorkerSlot> _freeSlots = new HashSet<WorkerSlot>();<br/>\n    +<br/>\n    +    //A map consisting of all workers on the node.<br/>\n    +    //The key of the map is the worker id and the value is the corresponding workerslot object<br/>\n    +    Map<String, WorkerSlot> _slots = new HashMap<String, WorkerSlot> ();<br/>\n    +<br/>\n    +    // A map describing which topologies are using which slots on this node.  The format of the map is the following:<br/>\n    +    // {TopologyId -> {WorkerId -> \n{Executors}\n<p>}}<br/>\n    +    private Map<String, Map<String, Collection<ExecutorDetails>>> _topIdToUsedSlots = new HashMap<String, Map<String, Collection<ExecutorDetails>>>();<br/>\n    +<br/>\n private final String _nodeId;<br/>\n private String _hostname;<br/>\n private boolean _isAlive;<br/>\n private SupervisorDetails _sup;</p></li>\n\t<li>private Double _availMemory;</li>\n\t<li>private Double _availCPU;</li>\n\t<li>private Cluster _cluster;</li>\n\t<li>private Topologies _topologies;<br/>\n    +    private Double _availMemory = 0.0;<br/>\n    +    private Double _availCPU = 0.0;<br/>\n    +    private final Cluster _cluster;<br/>\n    +    private final Topologies _topologies;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>public RAS_Node(String nodeId, Set<Integer> allPorts, boolean isAlive,</li>\n\t<li>SupervisorDetails sup, Cluster cluster, Topologies topologies) {<br/>\n    +    public RAS_Node(String nodeId, SupervisorDetails sup, Cluster cluster, Topologies topologies, Map<String, WorkerSlot> workerIdToWorker, Map<String, Map<String, Collection<ExecutorDetails>>> assignmentMap) {<br/>\n    +//Node ID and supervisor ID are the same.<br/>\n     _nodeId = nodeId;</li>\n\t<li>_isAlive = isAlive;</li>\n\t<li>if (_isAlive && allPorts != null) {</li>\n\t<li>for (int port : allPorts) \n{\n    -_freeSlots.add(new WorkerSlot(_nodeId, port));\n    -    }</li>\n\t<li>_sup = sup;<br/>\n    +if (sup == null) \n{\n    +    _isAlive = false;\n    +}\n<p> else </p>\n{\n    +    _isAlive = !cluster.isBlackListed(_nodeId);\n    +}\n<p>    +<br/>\n    +_cluster = cluster;<br/>\n    +_topologies = topologies;<br/>\n    +<br/>\n    +// initialize slots for this node<br/>\n    +if (workerIdToWorker != null) </p>\n{\n    +    _slots = workerIdToWorker;\n    +}\n<p>    +<br/>\n    +//initialize assignment map<br/>\n    +if (assignmentMap != null) </p>\n{\n    +    _topIdToUsedSlots = assignmentMap;\n    +}\n<p>    +<br/>\n    +//check if node is alive<br/>\n    +if (_isAlive && sup != null) {<br/>\n _hostname = sup.getHost();<br/>\n    +    _sup = sup;<br/>\n _availMemory = getTotalMemoryResources();<br/>\n _availCPU = getTotalCpuResources();<br/>\n    +<br/>\n    +    LOG.debug(\"Found a {} Node {} {}\",<br/>\n    +    _isAlive ? \"living\" : \"dead\", _nodeId, sup.getAllPorts());<br/>\n    +    LOG.debug(\"resources_mem: {}, resources_CPU: {}\", sup.getTotalMemory(), sup.getTotalCPU());<br/>\n    +    //intialize resource usages on node<br/>\n    +    intializeResources();<br/>\n    +}<br/>\n    +    }<br/>\n    +<br/>\n    +    /**<br/>\n    +     * intializes resource usages on node</p>\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    will fix</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697475","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697475","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697475,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0NzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T04:58:51Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49821059\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49821059</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -103,92 +182,37 @@ public boolean isAlive() {<br/>\n }</p>\n\n<p> public boolean isTotallyFree() {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>return _topIdToUsedSlots.isEmpty();<br/>\n    +return getUsedSlots().isEmpty();\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    its used in resource_aware_scheduler_test.clj</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697481","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697481","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697481,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0ODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T04:58:59Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49821063\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49821063</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -103,92 +182,37 @@ public boolean isAlive() {<br/>\n }</p>\n\n<p> public boolean isTotallyFree() </p>\n{\n    -return _topIdToUsedSlots.isEmpty();\n    +return getUsedSlots().isEmpty();\n }\n\n<p> public int totalSlotsFree() </p>\n{\n    -return _freeSlots.size();\n    +return getFreeSlots().size();\n }\n\n<p> public int totalSlotsUsed() {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>int total = 0;</li>\n\t<li>for (Set<WorkerSlot> slots : _topIdToUsedSlots.values()) \n{\n    -    total += slots.size();\n    -}</li>\n\t<li>return total;<br/>\n    +return getUsedSlots().size();<br/>\n }</li>\n</ul>\n\n\n<p> public int totalSlots() </p>\n{\n    -return totalSlotsFree() + totalSlotsUsed();\n    +return _slots.size();\n }\n\n<p> public int totalSlotsUsed(String topId) {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>int total = 0;</li>\n\t<li>Set<WorkerSlot> slots = _topIdToUsedSlots.get(topId);</li>\n\t<li>if (slots != null) \n{\n    -    total = slots.size();\n    -}</li>\n\t<li>return total;</li>\n\t<li>}<br/>\n    -</li>\n\t<li>private void validateSlot(WorkerSlot ws) {</li>\n\t<li>if (!_nodeId.equals(ws.getNodeId())) \n{\n    -    throw new IllegalArgumentException(\n    -    \"Trying to add a slot to the wrong node \" + ws +\n    -    \" is not a part of \" + _nodeId);\n    -}</li>\n\t<li>}<br/>\n    -</li>\n\t<li>void addOrphanedSlot(WorkerSlot ws) {</li>\n\t<li>if (_isAlive) \n{\n    -    throw new IllegalArgumentException(\"Orphaned Slots \" +\n    -    \"only are allowed on dead nodes.\");\n    -}</li>\n\t<li>validateSlot(ws);</li>\n\t<li>if (_freeSlots.contains(ws)) \n{\n    -    return;\n    -}</li>\n\t<li>for (Set<WorkerSlot> used : _topIdToUsedSlots.values()) {</li>\n\t<li>if (used.contains(ws)) \n{\n    -return;\n    -    }</li>\n\t<li>}</li>\n\t<li>_freeSlots.add(ws);</li>\n\t<li>}<br/>\n    -</li>\n\t<li>boolean assignInternal(WorkerSlot ws, String topId, boolean dontThrow) {</li>\n\t<li>validateSlot(ws);</li>\n\t<li>if (!_freeSlots.remove(ws)) {</li>\n\t<li>if (dontThrow) \n{\n    -return true;\n    -    }</li>\n\t<li>throw new IllegalStateException(\"Assigning a slot that was not free \" + ws);</li>\n\t<li>}</li>\n\t<li>Set<WorkerSlot> usedSlots = _topIdToUsedSlots.get(topId);</li>\n\t<li>if (usedSlots == null) \n{\n    -    usedSlots = new HashSet<WorkerSlot>();\n    -    _topIdToUsedSlots.put(topId, usedSlots);\n    -}</li>\n\t<li>usedSlots.add(ws);</li>\n\t<li>return false;<br/>\n    +return getUsedSlots(topId).size();<br/>\n }</li>\n</ul>\n\n\n<p> /**</p>\n<ul>\n\t<li>Free all slots on this node.  This will update the Cluster too.<br/>\n  */</li>\n</ul>\n<ul class=\"alternate\" type=\"square\">\n\t<li>public void freeAllSlots() {<br/>\n    +     public void freeAllSlots() {\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    will fix</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697485","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697485","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697485,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0ODU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T05:00:03Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49821113\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49821113</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -247,19 +253,23 @@ private void freeMemory(double amount) {</p>\n\n<p> private void freeCPU(double amount) {<br/>\n     LOG.debug(\"freeing {} CPU on node...avail CPU: {}\", amount, getHostname(), _availCPU);</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>if ((_availCPU + amount) > getAvailableCpuResources()) {</li>\n\t<li>LOG.warn(\"Freeing more CPU than there exists!\");<br/>\n    +if ((_availCPU + amount) > getTotalCpuResources()) {<br/>\n    +    LOG.warn(\"Freeing more CPU than there exists! CPU trying to free: {} Total CPU on Node: {}\", (_availMemory + amount), getTotalCpuResources());<br/>\n return;<br/>\n     }<br/>\n     _availCPU += amount;<br/>\n }</li>\n</ul>\n\n\n<p>    +    /**<br/>\n    +     * get the amount of memory used by a worker<br/>\n    +     */<br/>\n public double getMemoryUsedByWorker(WorkerSlot ws) {<br/>\n     TopologyDetails topo = findTopologyUsingWorker(ws);<br/>\n     if (topo == null) </p>\n{\n return 0.0;\n     }\n<p>     Collection<ExecutorDetails> execs = getExecutors(ws, _cluster);<br/>\n    +LOG.info(\"getMemoryUsedByWorker executors: {}\", execs);<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    will get rid of</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697490","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697490","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697490,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0OTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T05:10:47Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49821516\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49821516</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/strategies/scheduling/DefaultResourceAwareStrategy.java &#8212;<br/>\n    @@ -121,7 +116,7 @@ public SchedulingResult schedule(TopologyDetails td) </p>\n{\n td.getTaskResourceReqList(exec), entry.getKey() }\n<p>);<br/>\n WorkerSlot targetSlot = this.findWorkerForExec(exec, td, schedulerAssignmentMap);<br/>\n if (targetSlot != null) {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>RAS_Node targetNode = this.idToNode(targetSlot.getNodeId());<br/>\n    +NodeDetails targetNode = this.idToNode(targetSlot.getNodeId());\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    will refactor</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701930","html_url":"https://github.com/apache/storm/issues/5311#issuecomment-2612701930","issue_url":"https://api.github.com/repos/apache/storm/issues/5311","id":2612701930,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE5MzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T07:55:46Z","updated_at":"2025-01-24T14:45:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user satishd opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1017\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1017</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1476\" title=\"Filter -c options from args and add them as part of storm.options\" class=\"issue-link\" data-issue-key=\"STORM-1476\"><del>STORM-1476</del></a> Filter -c options from args and add them as part of storm.options</p>\n\n<p>    options</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/satishd/storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/satishd/storm</a> <a href=\"https://issues.apache.org/jira/browse/STORM-1476\" title=\"Filter -c options from args and add them as part of storm.options\" class=\"issue-link\" data-issue-key=\"STORM-1476\"><del>STORM-1476</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1017.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1017.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #1017</p>\n\n<hr />\n<p>commit 10b0d5842a12dbb772fb97fd26271d395396aa31<br/>\nAuthor: Satish Duggana <sduggana@hortonworks.com><br/>\nDate:   2016-01-15T07:52:04Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-1476\" title=\"Filter -c options from args and add them as part of storm.options\" class=\"issue-link\" data-issue-key=\"STORM-1476\"><del>STORM-1476</del></a> Filter -c options from args and add them as part of storm.options</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701802","html_url":"https://github.com/apache/storm/issues/5310#issuecomment-2612701802","issue_url":"https://api.github.com/repos/apache/storm/issues/5310","id":2612701802,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDE4MDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T14:20:11Z","updated_at":"2025-01-24T14:45:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dossett@gmail.com\">dossett@gmail.com</a>:</i>\n<p>The code changes to support ES 2.0.1 were fairly minor.  Does anyone have thoughts on how to support a 1.X and 2.X client?  A couple of thoughts come to my mind:</p>\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>create a new external module like storm-elasticsearch2, but that would lead to a huge amount of duplicated code</li>\n\t<li>use a maven profile to compile for es2</li>\n</ul>\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697493","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697493","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697493,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0OTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T16:21:10Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49872156\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49872156</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/SchedulerAssignment.java &#8212;<br/>\n    @@ -55,4 +56,6 @@<br/>\n public Set<ExecutorDetails> getExecutors();</p>\n\n<p> public Set<WorkerSlot> getSlots();<br/>\n    +<br/>\n    +    public Map<WorkerSlot, Collection<ExecutorDetails>> getSlotToExecutors();<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Up to you. It's a really minor thing, and this might get resolved when we adopt a Java standard style later. I am fine if you want to leave it in or change it, either way.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697496","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697496","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697496,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0OTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T16:21:21Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49872181\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49872181</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/resource/RAS_Node.java &#8212;<br/>\n    @@ -103,92 +182,37 @@ public boolean isAlive() {<br/>\n }</p>\n\n<p> public boolean isTotallyFree() {</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>return _topIdToUsedSlots.isEmpty();<br/>\n    +return getUsedSlots().isEmpty();\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    ok</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700471","html_url":"https://github.com/apache/storm/issues/5303#issuecomment-2612700471","issue_url":"https://api.github.com/repos/apache/storm/issues/5303","id":2612700471,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDA0NzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T16:23:07Z","updated_at":"2025-01-24T14:44:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1009\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1009</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700479","html_url":"https://github.com/apache/storm/issues/5303#issuecomment-2612700479","issue_url":"https://api.github.com/repos/apache/storm/issues/5303","id":2612700479,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDA0Nzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T16:23:08Z","updated_at":"2025-01-24T14:44:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1008\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1008</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697498","html_url":"https://github.com/apache/storm/issues/5285#issuecomment-2612697498","issue_url":"https://api.github.com/repos/apache/storm/issues/5285","id":2612697498,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2OTc0OTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T16:31:53Z","updated_at":"2025-01-24T14:43:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user jerrypeng commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1016#discussion_r49873652\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1016#discussion_r49873652</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/org/apache/storm/scheduler/SchedulerAssignment.java &#8212;<br/>\n    @@ -55,4 +56,6 @@<br/>\n public Set<ExecutorDetails> getExecutors();</p>\n\n<p> public Set<WorkerSlot> getSlots();<br/>\n    +<br/>\n    +    public Map<WorkerSlot, Collection<ExecutorDetails>> getSlotToExecutors();<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I think we can just leave it for now and when we come up with a standard/style guide we can change it then</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612697498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700284","html_url":"https://github.com/apache/storm/issues/5302#issuecomment-2612700284","issue_url":"https://api.github.com/repos/apache/storm/issues/5302","id":2612700284,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAyODQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T16:50:51Z","updated_at":"2025-01-24T14:44:22Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Merged to master/1.x-branch</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701163","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701163","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701163,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExNjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T17:00:39Z","updated_at":"2025-01-24T14:44:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1010\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1010</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701165","html_url":"https://github.com/apache/storm/issues/5305#issuecomment-2612701165","issue_url":"https://api.github.com/repos/apache/storm/issues/5305","id":2612701165,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDExNjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T17:01:40Z","updated_at":"2025-01-24T14:44:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Merged to master/1.x-branch.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612701165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700134","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700134","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700134,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxMzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T17:09:16Z","updated_at":"2025-01-24T14:44:18Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1007\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1007</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700139","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700139","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700139,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxMzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T17:09:38Z","updated_at":"2025-01-24T14:44:18Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Merged to master/1.x-branch.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700149","html_url":"https://github.com/apache/storm/issues/5301#issuecomment-2612700149","issue_url":"https://api.github.com/repos/apache/storm/issues/5301","id":2612700149,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI3MDAxNDk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-15T17:13:14Z","updated_at":"2025-01-24T14:44:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/storm/pull/1007#discussion_r49878490\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1007#discussion_r49878490</a></p>\n\n<p>    &#8212; Diff: storm-core/pom.xml &#8212;<br/>\n    @@ -618,7 +618,7 @@<br/>\n     <relocation><br/>\n <pattern>org.apache.thrift</pattern><br/>\n <!-- This pattern is inconsistent for backwards compatibility purposes. --></p>\n<ul class=\"alternate\" type=\"square\">\n\t<li><shadedPattern>org.apache.thrift7</shadedPattern><br/>\n    +    <shadedPattern>org.apache.storm.thrift</shadedPattern>\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    @ptgoetz no?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612700149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]