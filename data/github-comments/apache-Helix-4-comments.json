[{"url":"https://api.github.com/repos/apache/helix/issues/comments/514407387","html_url":"https://github.com/apache/helix/pull/357#issuecomment-514407387","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":514407387,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQwNzM4Nw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T22:30:12Z","updated_at":"2019-07-23T22:30:12Z","author_association":"CONTRIBUTOR","body":"1. You could leave getWorkflows() as is,Â  and make getWorkflows(long timeout) a wrapper that calls getWorkflows() in a ExecutorService thread. This would be the only change needed for this PR; namely, adding a wrapper method with a timeout. If you want to implement a different parse logic or isWorkflowConfig method, let's create a separate issue/PR for those and discuss whether we really need them. We want to keep changes small, modular, and incremental.\n\n2. Optional is a wrapper for its underlying objects, so it uses more memory and adds the work of boxing/unboxing. I am not claiming that this is significant, but it is a cost we do not have to incur.\n\n3. This method could be called as frequently as users want. We do not cache at the HelixManager level and haven't had the use case for this. If there is a need, we could further discuss, but it should not be part of this PR (out of scope).\n\n-hunter\n\nOn Jul 24, 2019, 00:20, at 00:20, pkuwm <notifications@github.com> wrote:\n>pkuwm commented on this pull request.\n>\n>\n>\n>> +   * Batch get the configurations of all workflows in this cluster\n>+   * within the specified timeout in milliseconds.\n>+   *\n>+   * @param timeout a long integer presents the timeout, in\n>milliseconds\n>+   * @return a map of <String, WorkflowConfig>\n>+   * @throws InterruptedException if the future thread was interrupted\n>+   * @throws ExecutionException if the future task completed\n>exceptionally\n>+   * @throws TimeoutException if waiting for result timed out\n>+   */\n>+  public Map<String, WorkflowConfig> getWorkflows(long timeout)\n>+    throws CancellationException, InterruptedException,\n>ExecutionException, TimeoutException {\n>+    if (timeout <= 0L) {\n>+      throw new IllegalArgumentException(\"timeout must be positive.\");\n>+    }\n>+    \n>+    ExecutorService executorService =\n>Executors.newSingleThreadExecutor();\n>\n>Do you have an idea of how frequently the api is called? To improve\n>performance, is it fine to cache the results?\n>\n>-- \n>You are receiving this because you commented.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/apache/helix/pull/357#discussion_r306557870\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514407387/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514426296","html_url":"https://github.com/apache/helix/pull/339#issuecomment-514426296","issue_url":"https://api.github.com/repos/apache/helix/issues/339","id":514426296,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQyNjI5Ng==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-23T23:59:30Z","updated_at":"2019-07-23T23:59:30Z","author_association":"CONTRIBUTOR","body":"Resolved all the issues. Ready to be merged to the apache repo.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514426296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514427697","html_url":"https://github.com/apache/helix/issues/349#issuecomment-514427697","issue_url":"https://api.github.com/repos/apache/helix/issues/349","id":514427697,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQyNzY5Nw==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T00:06:38Z","updated_at":"2019-07-24T00:06:38Z","author_association":"CONTRIBUTOR","body":"You know there's a tool to auto check every commit see if it meets the requirement? https://github.com/checkstyle/checkstyle\r\n\r\nThe detailed work of styling issue can be breakdown into\r\n1. A better java coding style.xml\r\n2. The integration of the tool that auto checks, stops bad commit before checking in.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514427697/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514432019","html_url":"https://github.com/apache/helix/pull/340#issuecomment-514432019","issue_url":"https://api.github.com/repos/apache/helix/issues/340","id":514432019,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQzMjAxOQ==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T00:29:51Z","updated_at":"2019-07-24T00:29:51Z","author_association":"CONTRIBUTOR","body":"After several thoughts on my past days' experience of investigating a production issue, I really think it is needed. \r\nFirst, it won't overwhelm the logs since we already log every event consume at each stage. Adding the enqueue just makes the whole story complete.\r\nSecond, the  \"Controller Pipeline Queued Time\" only tells you the min/max/average distribution of event processing speed. One still cannot connect the enqueue and pop steps together. One feature that could be useful is \"log the enqueue event(what changes) and its reason gets queued, and compare the event consume process of the change\" ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514432019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514481644","html_url":"https://github.com/apache/helix/pull/340#issuecomment-514481644","issue_url":"https://api.github.com/repos/apache/helix/issues/340","id":514481644,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ4MTY0NA==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T05:09:19Z","updated_at":"2019-07-24T05:09:19Z","author_association":"CONTRIBUTOR","body":"I'm not sure if it will really help. Note that in Helix, the enqueue event does not imply what will be rebalanced. Because when the event is really processed, there might be more changes happen, so the controller will most likely read more than the event.\r\n\r\nSince many users have already complained about our verbose log, let's be conservative about adding more log.\r\nCould you be please give some examples that you think you will need this log to debug?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514481644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514497403","html_url":"https://github.com/apache/helix/pull/359#issuecomment-514497403","issue_url":"https://api.github.com/repos/apache/helix/issues/359","id":514497403,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ5NzQwMw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T06:23:44Z","updated_at":"2019-07-24T06:23:44Z","author_association":"CONTRIBUTOR","body":"Could we format the PR per the guidelines? :)\n\nOn Jul 24, 2019, 07:17, at 07:17, jiajunwang <notifications@github.com> wrote:\n>jiajunwang commented on this pull request.\n>\n>\n>\n>> @@ -1165,7 +1164,11 @@ public void run() {\n>               + _processorName);\n>       while (!isInterrupted()) {\n>         try {\n>-          handleEvent(_eventBlockingQueue.take(), _cache);\n>+          ClusterEvent newClusterEvent = _eventBlockingQueue.take();\n>+          // rename the current processor's thread name to include\n>event id\n>+          String currentThreadName = this.getName().split(\"_\")[0];\n>\n>The thread name shall be fixed, You can just regenerate the name\n>according to our name convention.\n>\n>> @@ -1165,7 +1164,11 @@ public void run() {\n>               + _processorName);\n>       while (!isInterrupted()) {\n>         try {\n>-          handleEvent(_eventBlockingQueue.take(), _cache);\n>+          ClusterEvent newClusterEvent = _eventBlockingQueue.take();\n>+          // rename the current processor's thread name to include\n>event id\n>+          String currentThreadName = this.getName().split(\"_\")[0];\n>+          this.setName(currentThreadName + \"_\" +\n>newClusterEvent.getEventId());\n>\n>Can we use \"()\" to wrap the event? I feel it's easier to identify which\n>part is the default thread name, and which part is the event name.\n>\n>> @@ -1165,7 +1164,11 @@ public void run() {\n>               + _processorName);\n>       while (!isInterrupted()) {\n>         try {\n>-          handleEvent(_eventBlockingQueue.take(), _cache);\n>+          ClusterEvent newClusterEvent = _eventBlockingQueue.take();\n>+          // rename the current processor's thread name to include\n>event id\n>+          String currentThreadName = this.getName().split(\"_\")[0];\n>+          this.setName(currentThreadName + \"_\" +\n>newClusterEvent.getEventId());\n>+          handleEvent(newClusterEvent, _cache);\n>\n>Would it be better to set the event id inside handleEvent()? Logic will\n>be more concise.\n>And remember that we'd better recover the thread name after the\n>handling logic. Probably in some final block.\n>\n>-- \n>You are receiving this because you are subscribed to this thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/apache/helix/pull/359#pullrequestreview-265794277\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514497403/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514748274","html_url":"https://github.com/apache/helix/issues/338#issuecomment-514748274","issue_url":"https://api.github.com/repos/apache/helix/issues/338","id":514748274,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDc0ODI3NA==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T18:32:31Z","updated_at":"2019-07-24T18:32:31Z","author_association":"CONTRIBUTOR","body":"Code merged into #339.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514748274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514748462","html_url":"https://github.com/apache/helix/pull/360#issuecomment-514748462","issue_url":"https://api.github.com/repos/apache/helix/issues/360","id":514748462,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDc0ODQ2Mg==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T18:33:02Z","updated_at":"2019-07-24T18:33:02Z","author_association":"CONTRIBUTOR","body":"Fix typo in title? :)\n\nOn Jul 24, 2019, 20:31, at 20:31, Junkai Xue <notifications@github.com> wrote:\n>dasahcc commented on this pull request.\n>\n>\n>\n>> @@ -263,19 +263,6 @@ private boolean\n>computeResourceBestPossibleState(ClusterEvent event, ResourceCon\n>       } catch (Exception e) {\n>         LogUtil.logError(logger, _eventId,\n>\"Error computing assignment for resource \" + resourceName + \".\n>Skipping.\");\n>-        // TODO : remove this part after debugging NPE\n>\n>Have you add NPE checks for partition assignment?\n>\n>-- \n>You are receiving this because you are subscribed to this thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/apache/helix/pull/360#pullrequestreview-266207254\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514748462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514766880","html_url":"https://github.com/apache/helix/pull/359#issuecomment-514766880","issue_url":"https://api.github.com/repos/apache/helix/issues/359","id":514766880,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDc2Njg4MA==","user":{"login":"lei-xia","id":9325494,"node_id":"MDQ6VXNlcjkzMjU0OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9325494?v=4","gravatar_id":"","url":"https://api.github.com/users/lei-xia","html_url":"https://github.com/lei-xia","followers_url":"https://api.github.com/users/lei-xia/followers","following_url":"https://api.github.com/users/lei-xia/following{/other_user}","gists_url":"https://api.github.com/users/lei-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/lei-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lei-xia/subscriptions","organizations_url":"https://api.github.com/users/lei-xia/orgs","repos_url":"https://api.github.com/users/lei-xia/repos","events_url":"https://api.github.com/users/lei-xia/events{/privacy}","received_events_url":"https://api.github.com/users/lei-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T19:26:02Z","updated_at":"2019-07-24T19:26:02Z","author_association":"MEMBER","body":"Please verify this in your local deployment to make sure it works as expected","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514766880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514796218","html_url":"https://github.com/apache/helix/pull/360#issuecomment-514796218","issue_url":"https://api.github.com/repos/apache/helix/issues/360","id":514796218,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDc5NjIxOA==","user":{"login":"alirezazamani","id":9290963,"node_id":"MDQ6VXNlcjkyOTA5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9290963?v=4","gravatar_id":"","url":"https://api.github.com/users/alirezazamani","html_url":"https://github.com/alirezazamani","followers_url":"https://api.github.com/users/alirezazamani/followers","following_url":"https://api.github.com/users/alirezazamani/following{/other_user}","gists_url":"https://api.github.com/users/alirezazamani/gists{/gist_id}","starred_url":"https://api.github.com/users/alirezazamani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alirezazamani/subscriptions","organizations_url":"https://api.github.com/users/alirezazamani/orgs","repos_url":"https://api.github.com/users/alirezazamani/repos","events_url":"https://api.github.com/users/alirezazamani/events{/privacy}","received_events_url":"https://api.github.com/users/alirezazamani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T20:54:32Z","updated_at":"2019-07-24T20:54:32Z","author_association":"NONE","body":"@narendly Sure. Thanks :)","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514796218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514812014","html_url":"https://github.com/apache/helix/pull/359#issuecomment-514812014","issue_url":"https://api.github.com/repos/apache/helix/issues/359","id":514812014,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDgxMjAxNA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T21:45:55Z","updated_at":"2019-07-24T21:45:55Z","author_association":"CONTRIBUTOR","body":"> Please verify this in your local deployment to make sure it works as expected\r\n\r\nIt's working as expected while running controller locally. What I did is to print the thread name, it's something like `HelixController-pipeline-default-TestCluster(5f1e26a8_DEFAULT)`","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514812014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514844458","html_url":"https://github.com/apache/helix/pull/357#issuecomment-514844458","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":514844458,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDg0NDQ1OA==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-25T00:10:20Z","updated_at":"2019-07-25T00:10:20Z","author_association":"CONTRIBUTOR","body":"Please click the Resolve Converation if the concern has been addressed. Otherwise, it will be hard to review the code.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514844458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/514844901","html_url":"https://github.com/apache/helix/pull/357#issuecomment-514844901","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":514844901,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDg0NDkwMQ==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-25T00:13:00Z","updated_at":"2019-07-25T00:13:00Z","author_association":"CONTRIBUTOR","body":"> Please click the Resolve Converation if the concern has been addressed. Otherwise, it will be hard to review the code.\r\n\r\nWill do. And I will push follow-up commits to this PR to resolve all the issues.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/514844901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/515333872","html_url":"https://github.com/apache/helix/pull/348#issuecomment-515333872","issue_url":"https://api.github.com/repos/apache/helix/issues/348","id":515333872,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTMzMzg3Mg==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T06:56:41Z","updated_at":"2019-07-26T06:56:41Z","author_association":"CONTRIBUTOR","body":"I tried to use more java 8 stream as @i3wangyi suggested. it is convenient.\r\nBut I will not change all of the loops to stream. Some of them are too complicated.\r\n\r\nI reviewed the code again myself, and found one issue. Fixed in the new commit.\r\nPlease help to review the logic as well.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/515333872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/515564146","html_url":"https://github.com/apache/helix/pull/357#issuecomment-515564146","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":515564146,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTU2NDE0Ng==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T18:59:11Z","updated_at":"2019-07-26T18:59:11Z","author_association":"CONTRIBUTOR","body":"@i3wangyi I've created a thread pool executor in the class as private. To avoid creating the thread pool each time at once when new a TaskDriver, instead I create a `startPool()` to create the thread pool: if getWorkflows(long timeout) is not going to call, it is not necessary to create the thread pool.\r\n\r\nFor the pool size, we will let caller to choose a good pool size for the needs.\r\n\r\nAnd why I don't use `ScheduledExecutorService` is because `ScheduledExecutorService` could also be used to delay to start a task, which we don't need. Thanks for the suggestion.\r\n\r\n> I'm afraid the underlying the executor is creating a thread pool with one worker. If this is the case, there's certainly overhead if each time when the method gets invoked, the thread gets created and deleted after the method call. I don't think creating a thread every time is cheap, I would suggest making it a private field. Also for timeout mechanism, there's better choice for you https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/515564146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516104476","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516104476","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516104476,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEwNDQ3Ng==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T18:16:56Z","updated_at":"2019-07-29T18:16:56Z","author_association":"CONTRIBUTOR","body":"Can you add a test case? ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516104476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516107112","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516107112","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516107112,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjEwNzExMg==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T18:23:50Z","updated_at":"2019-07-29T18:24:30Z","author_association":"CONTRIBUTOR","body":"@i3wangyi After tried to add the test, I found the test case that we discussed just tests for the specific design that was originally done. Making it atomic boolean basically avoid that original logic. If we are still adding the same test, we are testing AtomicBoolean, which is not necessary.\r\n\r\nFor the integration test,  since it's a race condition, better to test in our long-run test environment. Otherwise, the mvn test we have now will run an even longer time. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516107112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516160362","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516160362","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516160362,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE2MDM2Mg==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T21:00:19Z","updated_at":"2019-07-29T21:00:19Z","author_association":"CONTRIBUTOR","body":"Re-run the test with the latest update:\r\n\r\n[ERROR] Failures: \r\n[ERROR]   TestIndependentTaskRebalancer.testDelayedRetry:276 expected:<2> but was:<3>\r\n[ERROR]   TestJobQueueCleanUp.testJobQueueAutoCleanUp Â» ThreadTimeout Method org.testng....\r\n[INFO] \r\n[ERROR] Tests run: 835, Failures: 2, Errors: 0, Skipped: 0\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 58:43 min\r\n[INFO] Finished at: 2019-07-29T12:13:13-07:00\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n+ Re-run the failed test\r\n\r\n[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 27.034 s - in TestSuite\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 33.136 s\r\n[INFO] Finished at: 2019-07-29T13:59:07-07:00\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516160362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516194738","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516194738","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516194738,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjE5NDczOA==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T23:04:39Z","updated_at":"2019-07-29T23:04:39Z","author_association":"CONTRIBUTOR","body":"> I think a unit test for verifying the race condition of propertyChangedMap is still needed. To manipulate the situation in an integration test would be much harder. My general suggestion is still the same, something like\r\n> \r\n> ```\r\n> // create a resource data provider\r\n> class CustomHashMap {\r\n>    Lock lock; \r\n> \r\n>  // manually create race conditions in the implementation \r\n> }\r\n> \r\n> Map<>  propertyChangeMap = new CustomHashMap();\r\n> Lock lock = propertyChangeMap.getLock()\r\n> ResourceDataProvider provider = new ResourceDataProvider(propertyChangeMap)\r\n> ```\r\n\r\nIf we are going to add this test, it will be a very white box test. Basically, what we can test is how many times the map.get() is called in one typical cache refresh. So easier way is to count the map.get() calls. That actually serves the same target.\r\nWith this change, as long as the caller is using getAndSet, we will be good.\r\nTo summary, two reasons that I think the test is not necessary. 1. even you create the custom HashMap, the implementation can still get that value and call the get() multiple times, and the map won't know. 2. the cache code will be refactored soon, so these logics will be gone in most cases.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516194738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516210666","html_url":"https://github.com/apache/helix/pull/362#issuecomment-516210666","issue_url":"https://api.github.com/repos/apache/helix/issues/362","id":516210666,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjIxMDY2Ng==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T00:23:51Z","updated_at":"2019-07-30T00:23:51Z","author_association":"CONTRIBUTOR","body":"Thanks for the comments, I have addressed most of them today. I will work on the tests and re-construct the commits before converting it to official PR.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516210666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516272475","html_url":"https://github.com/apache/helix/issues/331#issuecomment-516272475","issue_url":"https://api.github.com/repos/apache/helix/issues/331","id":516272475,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI3MjQ3NQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T05:48:28Z","updated_at":"2019-07-30T05:48:28Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang Could you please help to take a look at the proposed fix? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516272475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516538608","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516538608","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516538608,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjUzODYwOA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T18:30:27Z","updated_at":"2019-07-30T18:30:27Z","author_association":"CONTRIBUTOR","body":"> There are two ways of solving the race condition by using atomic operations, either use ConcurrentHashMap or AtomicBoolean. If you decide to use AtomicBoolean, then you don't need the heavy-weight ConcurrentHashMap. I would recommend using array and use ChangeType.ordinal() as the index, or some immutable data structure to hold the AtomicBooleans\r\n\r\nGreat suggestion. I thought about it too, it's vulnerable when putting the data in Map. ConcurrentHashMap obviously is relatively overkill. My suggestion is to use Enum and put AtomicBoolean as the internal field of the enum. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516538608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516543932","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516543932","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516543932,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU0MzkzMg==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T18:42:05Z","updated_at":"2019-07-30T18:42:05Z","author_association":"NONE","body":"> > There are two ways of solving the race condition by using atomic operations, either use ConcurrentHashMap or AtomicBoolean. If you decide to use AtomicBoolean, then you don't need the heavy-weight ConcurrentHashMap. I would recommend using array and use ChangeType.ordinal() as the index, or some immutable data structure to hold the AtomicBooleans\r\n> \r\n> Great suggestion. I thought about it too, it's vulnerable when putting the data in Map. ConcurrentHashMap obviously is relatively overkill. My suggestion is to use Enum and put AtomicBoolean as the internal field of the enum.\r\n\r\nEnum is singleton object, so I don't think it is feasible to put the change state as an internal field","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516543932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516551473","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516551473","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516551473,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU1MTQ3Mw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:03:33Z","updated_at":"2019-07-30T19:03:33Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing. About the ConcurrentHashMap, I agree this becomes an overkill with this change. But the next move to get rid of it is not trivial. Better to do it once we restart the cache refactor work.\r\nAs I commented in this thread, my idea is moving these flag, state info into the cache objects instead of the data provider. In this way, we won't have this map at all.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516551473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/516557265","html_url":"https://github.com/apache/helix/pull/363#issuecomment-516557265","issue_url":"https://api.github.com/repos/apache/helix/issues/363","id":516557265,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjU1NzI2NQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T19:20:06Z","updated_at":"2019-07-30T19:20:06Z","author_association":"CONTRIBUTOR","body":"Approved by @lei-xia.\r\nI'm running the final test after rebasing the master. Will submit once test passed.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/516557265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517059657","html_url":"https://github.com/apache/helix/pull/357#issuecomment-517059657","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":517059657,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA1OTY1Nw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T23:30:23Z","updated_at":"2019-07-31T23:30:23Z","author_association":"CONTRIBUTOR","body":"@pkuwm Good progress, but I have alternative thoughts on how this should be implemented. This is a simple list call in the Helix client, and we do not want the users to bear the burden of having to maintain a thread pool. Since it's not urgent, let us sync offline to get on the same page on why this is needed and how it could be simplified :)","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517059657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517060382","html_url":"https://github.com/apache/helix/pull/357#issuecomment-517060382","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":517060382,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA2MDM4Mg==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T23:33:47Z","updated_at":"2019-07-31T23:33:47Z","author_association":"CONTRIBUTOR","body":"This would really help as you guys know the use case better and how this\napi is used . I believe we should optimize it and trade off base on the how\nit is used.. Thanks! We can sync up offline and complete it later.\n\nOn Wed, Jul 31, 2019 at 4:30 PM Hunter Lee <notifications@github.com> wrote:\n\n> @pkuwm <https://github.com/pkuwm> Good progress, but I have alternative\n> thoughts on how this should be implemented. This is a simple list call in\n> the Helix client, and we do not want the users to bear the burden of having\n> to maintain a thread pool. Since it's not urgent, let us sync offline to\n> get on the same page on why this is needed and how it could be simplified :)\n>\n> â\n> You are receiving this because you were mentioned.\n>\n>\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/helix/pull/357?email_source=notifications&email_token=ABHSRCKQSDGMZQS5CVCUBT3QCIOBFA5CNFSM4IGBGEJKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD3I3ISI#issuecomment-517059657>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABHSRCNILBXIKNPYNOANQETQCIOBFANCNFSM4IGBGEJA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517060382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517078763","html_url":"https://github.com/apache/helix/pull/333#issuecomment-517078763","issue_url":"https://api.github.com/repos/apache/helix/issues/333","id":517078763,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzA3ODc2Mw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T01:11:43Z","updated_at":"2019-08-01T01:11:43Z","author_association":"CONTRIBUTOR","body":"Some concerns:\r\n\r\n1. What would help others see that you aren't breaking any features is to keep existing tests the same (not modify any existing tests - adding new test cases is encouraged, however). Could we minimize changes to existing tests?\r\n\r\n2. Do we have the test result?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517078763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517151234","html_url":"https://github.com/apache/helix/pull/362#issuecomment-517151234","issue_url":"https://api.github.com/repos/apache/helix/issues/362","id":517151234,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzE1MTIzNA==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T07:08:44Z","updated_at":"2019-08-01T07:08:44Z","author_association":"CONTRIBUTOR","body":"@i3wangyi Thanks for the comments. For the general comments, I'm trying to answer here.\r\n\r\n> You could just have a blank method without detail implementations since the implementation details are very likely to change as we proceed. It's the same principle of interface oriented programming as well.\r\n\r\nI agree with the idea, but since we have the POC code already, I will just take this low-hanging fruit. With the latest update, all the essential parts are ready.\r\n\r\n> More and detailed comments are more than welcome, at least we need to document better than our current algorithm does.\r\n\r\nAgreed. Especially the algorithm and rebalancer main logic. When we working on those parts later, let's firstly try to keep it simple. Then adding comments whenever necessary.\r\n\r\n> If you agree with item1, let's not worry about the unit test. Things will change.\r\n\r\nUnit test is actually very important. Even with the interface only, I would prefer to have the test frame completed. Of course, they have been already completed anyway.\r\n\r\n> A lot of more basic data model is not well defined (I know we didn't originally have the habit)(. E.g, String class is used everywhere, sometimes it is partition name, sometimes it is a resource name, sometimes it is a state. It's very confusing and inconsistent, my experience tells me putting comments won't make our life easier, a more self-explanatory code is needed.\r\n\r\nI agree with this point in general. But I have two concerns.\r\n1. If all Helix components create their own data model objects, it is a large overhead, from both coding's perspective and performance perspective.\r\n2. If we have multiple data model objects pointing to the same item, it might be very confusing and error-prone. The reason is that most model objects we have now have additional fields other than the name. For example, Resource contains config. If we have multiple Resource objects refer to the same resource, we could modify the wrong one. If it's a String, although we might have duplication, we cannot do anything to it.\r\n\r\nIn general, I think we can do either of the following to improve it.\r\n1. Convert (or create) data model classes to the key classes for different types of objects.\r\n2. Only constructing these data model objects in one place. For example, cluster cache. In this way, there is only one object for each entity. We won't have any confusion.\r\n\r\nI think it's a good call. Although I don't intend to do it in this PR, since it seems to be a larger decision to make, I will follow up with we have a more concrete plan. I will encourage you to think about this point at the whole project scope and maybe initial a discussion with all of us to proceed.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517151234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517424827","html_url":"https://github.com/apache/helix/pull/369#issuecomment-517424827","issue_url":"https://api.github.com/repos/apache/helix/issues/369","id":517424827,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQyNDgyNw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:27:18Z","updated_at":"2019-08-01T19:27:18Z","author_association":"CONTRIBUTOR","body":"Please follow https://github.com/apache/helix/wiki/Pull-Request-Template","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517424827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517424897","html_url":"https://github.com/apache/helix/pull/371#issuecomment-517424897","issue_url":"https://api.github.com/repos/apache/helix/issues/371","id":517424897,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQyNDg5Nw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:27:32Z","updated_at":"2019-08-01T19:27:32Z","author_association":"CONTRIBUTOR","body":"Please follow https://github.com/apache/helix/wiki/Pull-Request-Template","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517424897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517429169","html_url":"https://github.com/apache/helix/pull/371#issuecomment-517429169","issue_url":"https://api.github.com/repos/apache/helix/issues/371","id":517429169,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQyOTE2OQ==","user":{"login":"alirezazamani","id":9290963,"node_id":"MDQ6VXNlcjkyOTA5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9290963?v=4","gravatar_id":"","url":"https://api.github.com/users/alirezazamani","html_url":"https://github.com/alirezazamani","followers_url":"https://api.github.com/users/alirezazamani/followers","following_url":"https://api.github.com/users/alirezazamani/following{/other_user}","gists_url":"https://api.github.com/users/alirezazamani/gists{/gist_id}","starred_url":"https://api.github.com/users/alirezazamani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alirezazamani/subscriptions","organizations_url":"https://api.github.com/users/alirezazamani/orgs","repos_url":"https://api.github.com/users/alirezazamani/repos","events_url":"https://api.github.com/users/alirezazamani/events{/privacy}","received_events_url":"https://api.github.com/users/alirezazamani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:41:23Z","updated_at":"2019-08-01T19:41:23Z","author_association":"NONE","body":"> Please follow https://github.com/apache/helix/wiki/Pull-Request-Template\r\n\r\nDone :)","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517429169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517490244","html_url":"https://github.com/apache/helix/pull/357#issuecomment-517490244","issue_url":"https://api.github.com/repos/apache/helix/issues/357","id":517490244,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQ5MDI0NA==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T23:14:15Z","updated_at":"2019-08-01T23:14:15Z","author_association":"CONTRIBUTOR","body":"Since this API is not that urgent, we will discuss about it in more details offline and complete it later.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517490244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517548807","html_url":"https://github.com/apache/helix/pull/333#issuecomment-517548807","issue_url":"https://api.github.com/repos/apache/helix/issues/333","id":517548807,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzU0ODgwNw==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T04:58:36Z","updated_at":"2019-08-02T04:58:36Z","author_association":"CONTRIBUTOR","body":"> Some concerns:\r\n> \r\n> 1. What would help others see that you aren't breaking any features is to keep existing tests the same (not modify any existing tests - adding new test cases is encouraged, however). Could we minimize changes to existing tests?\r\n> 2. Do we have the test result?\r\n\r\nLike I've replied inline, if you look a little careful, I just make the `validate` method more visible and didn't change any verification methods. I need it cause TestHelper expects a boolean returned interface. \r\n\r\nThe test result is in the second comment and I've just updated it.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517548807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517712533","html_url":"https://github.com/apache/helix/pull/371#issuecomment-517712533","issue_url":"https://api.github.com/repos/apache/helix/issues/371","id":517712533,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzcxMjUzMw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T14:02:42Z","updated_at":"2019-08-02T14:02:42Z","author_association":"CONTRIBUTOR","body":"You could do https://github.com/apache/helix/wiki/Pull-Request-Check-In-Steps to get this checked in. As discussed offline, take your time to test it out locally :)","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517712533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517754114","html_url":"https://github.com/apache/helix/pull/371#issuecomment-517754114","issue_url":"https://api.github.com/repos/apache/helix/issues/371","id":517754114,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzc1NDExNA==","user":{"login":"alirezazamani","id":9290963,"node_id":"MDQ6VXNlcjkyOTA5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9290963?v=4","gravatar_id":"","url":"https://api.github.com/users/alirezazamani","html_url":"https://github.com/alirezazamani","followers_url":"https://api.github.com/users/alirezazamani/followers","following_url":"https://api.github.com/users/alirezazamani/following{/other_user}","gists_url":"https://api.github.com/users/alirezazamani/gists{/gist_id}","starred_url":"https://api.github.com/users/alirezazamani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alirezazamani/subscriptions","organizations_url":"https://api.github.com/users/alirezazamani/orgs","repos_url":"https://api.github.com/users/alirezazamani/repos","events_url":"https://api.github.com/users/alirezazamani/events{/privacy}","received_events_url":"https://api.github.com/users/alirezazamani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T15:57:39Z","updated_at":"2019-08-02T15:57:39Z","author_association":"NONE","body":"These changes have been covered by tests. I also check it manually and the pipeline is triggered.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517754114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517754322","html_url":"https://github.com/apache/helix/pull/371#issuecomment-517754322","issue_url":"https://api.github.com/repos/apache/helix/issues/371","id":517754322,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzc1NDMyMg==","user":{"login":"alirezazamani","id":9290963,"node_id":"MDQ6VXNlcjkyOTA5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9290963?v=4","gravatar_id":"","url":"https://api.github.com/users/alirezazamani","html_url":"https://github.com/alirezazamani","followers_url":"https://api.github.com/users/alirezazamani/followers","following_url":"https://api.github.com/users/alirezazamani/following{/other_user}","gists_url":"https://api.github.com/users/alirezazamani/gists{/gist_id}","starred_url":"https://api.github.com/users/alirezazamani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alirezazamani/subscriptions","organizations_url":"https://api.github.com/users/alirezazamani/orgs","repos_url":"https://api.github.com/users/alirezazamani/repos","events_url":"https://api.github.com/users/alirezazamani/events{/privacy}","received_events_url":"https://api.github.com/users/alirezazamani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T15:58:13Z","updated_at":"2019-08-02T15:58:13Z","author_association":"NONE","body":"This PR is ready to be merged, approved by @jiajunwang and @narendly.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517754322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517781121","html_url":"https://github.com/apache/helix/pull/362#issuecomment-517781121","issue_url":"https://api.github.com/repos/apache/helix/issues/362","id":517781121,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzc4MTEyMQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T17:21:23Z","updated_at":"2019-08-02T17:21:23Z","author_association":"CONTRIBUTOR","body":"This is a big PR! I think it would be a good idea to keep the size of PRs smaller if possible.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517781121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517835182","html_url":"https://github.com/apache/helix/pull/365#issuecomment-517835182","issue_url":"https://api.github.com/repos/apache/helix/issues/365","id":517835182,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzgzNTE4Mg==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T20:30:45Z","updated_at":"2019-08-02T20:30:45Z","author_association":"CONTRIBUTOR","body":"Resolved all the review request. Also passing the test. Next step is to merge into trunk","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517835182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517854427","html_url":"https://github.com/apache/helix/pull/362#issuecomment-517854427","issue_url":"https://api.github.com/repos/apache/helix/issues/362","id":517854427,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzg1NDQyNw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T21:51:11Z","updated_at":"2019-08-02T21:51:11Z","author_association":"CONTRIBUTOR","body":"Thanks for your hard work of reviewing.\r\nI know it is a huge PR. Mainly because it is new classes that are built from scratch, even one file's change has been large enough. And as the initial interface checking, I wish to keep then in one PR.\r\n\r\nThe following functional components will still be a large file, but they will be loosely coupled. So we will be able to make relatively smaller PR.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517854427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517892944","html_url":"https://github.com/apache/helix/pull/362#issuecomment-517892944","issue_url":"https://api.github.com/repos/apache/helix/issues/362","id":517892944,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzg5Mjk0NA==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-03T04:20:00Z","updated_at":"2019-08-03T04:20:00Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @narendly.\r\n\r\nI will do the merge.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517892944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/517893119","html_url":"https://github.com/apache/helix/issues/342#issuecomment-517893119","issue_url":"https://api.github.com/repos/apache/helix/issues/342","id":517893119,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzg5MzExOQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-03T04:23:47Z","updated_at":"2019-08-03T04:23:47Z","author_association":"CONTRIBUTOR","body":"The foundation of the new rebalancer has been built after the interface/cluster model checked in. I'm closing this issue since we will have separate issues to track the following components development.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/517893119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518101703","html_url":"https://github.com/apache/helix/pull/369#issuecomment-518101703","issue_url":"https://api.github.com/repos/apache/helix/issues/369","id":518101703,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODEwMTcwMw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T06:21:53Z","updated_at":"2019-08-05T06:21:53Z","author_association":"CONTRIBUTOR","body":"I just notice the title, this is not a workaround. Please remove this to avoid confusion.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518101703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518325951","html_url":"https://github.com/apache/helix/pull/373#issuecomment-518325951","issue_url":"https://api.github.com/repos/apache/helix/issues/373","id":518325951,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODMyNTk1MQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T17:30:18Z","updated_at":"2019-08-05T17:30:18Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @alirezazamani ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518325951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518348999","html_url":"https://github.com/apache/helix/pull/359#issuecomment-518348999","issue_url":"https://api.github.com/repos/apache/helix/issues/359","id":518348999,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODM0ODk5OQ==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T18:35:38Z","updated_at":"2019-08-05T18:35:38Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @lei-xia ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518348999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518390345","html_url":"https://github.com/apache/helix/pull/367#issuecomment-518390345","issue_url":"https://api.github.com/repos/apache/helix/issues/367","id":518390345,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODM5MDM0NQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T20:38:38Z","updated_at":"2019-08-05T20:38:38Z","author_association":"CONTRIBUTOR","body":"The parallel request still need to be considered. Say you are implementing the locking by keys. We need 100 participants partition level status called from single instance health check. Then you will read one instance partition level status after the other. It is still sequential read. ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518390345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518397174","html_url":"https://github.com/apache/helix/pull/367#issuecomment-518397174","issue_url":"https://api.github.com/repos/apache/helix/issues/367","id":518397174,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODM5NzE3NA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T20:57:49Z","updated_at":"2019-08-05T20:57:49Z","author_association":"CONTRIBUTOR","body":"> The parallel request still need to be considered. Say you are implementing the locking by keys. We need 100 participants partition level status called from single instance health check. Then you will read one instance partition level status after the other. It is still sequential read.\r\n\r\nThe sequential read comes from how the upper class uses the CustomRestClientImpl. Currently, it is sequential but it's the scope of next PR. In this PR, my purpose is to add the cache implementation so we can change the implementation of the upper class (ServiceImpl) and make it parallel.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518397174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518402635","html_url":"https://github.com/apache/helix/pull/367#issuecomment-518402635","issue_url":"https://api.github.com/repos/apache/helix/issues/367","id":518402635,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQwMjYzNQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T21:13:31Z","updated_at":"2019-08-05T21:13:31Z","author_association":"CONTRIBUTOR","body":"> > The parallel request still need to be considered. Say you are implementing the locking by keys. We need 100 participants partition level status called from single instance health check. Then you will read one instance partition level status after the other. It is still sequential read.\r\n> \r\n> The sequential read comes from how the upper class uses the CustomRestClientImpl. Currently, it is sequential but it's the scope of next PR. In this PR, my purpose is to add the cache implementation so we can change the implementation of the upper class (ServiceImpl) and make it parallel.\r\n\r\nWe need to think about it as a whole piece. I can image that you parallel the requests by using thread pool for each key. But in that case, you may end up with have multiple idling threads hanging there because of locking on same key.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518402635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518406925","html_url":"https://github.com/apache/helix/pull/367#issuecomment-518406925","issue_url":"https://api.github.com/repos/apache/helix/issues/367","id":518406925,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQwNjkyNQ==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T21:26:29Z","updated_at":"2019-08-05T21:26:29Z","author_association":"CONTRIBUTOR","body":"> > > The parallel request still need to be considered. Say you are implementing the locking by keys. We need 100 participants partition level status called from single instance health check. Then you will read one instance partition level status after the other. It is still sequential read.\r\n> > \r\n> > \r\n> > The sequential read comes from how the upper class uses the CustomRestClientImpl. Currently, it is sequential but it's the scope of next PR. In this PR, my purpose is to add the cache implementation so we can change the implementation of the upper class (ServiceImpl) and make it parallel.\r\n> \r\n> We need to think about it as a whole piece. I can image that you parallel the requests by using thread pool for each key. But in that case, you may end up with have multiple idling threads hanging there because of locking on the same key.\r\n\r\nFrom the decouple point of view, the PR focuses on CustomRestClient's change and its responsibility IMO is to ensure the same request won't get called twice. It's the upper class' job to make the right parallel requests and I'm planning to address it later in the next PR piece by piece. Is your idea to dedupe the # of threads based on requests, in that case, the dedupe logic needs to be handled in the upper layer.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518406925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518442369","html_url":"https://github.com/apache/helix/pull/374#issuecomment-518442369","issue_url":"https://api.github.com/repos/apache/helix/issues/374","id":518442369,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQ0MjM2OQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T23:51:20Z","updated_at":"2019-08-05T23:51:20Z","author_association":"CONTRIBUTOR","body":"> A lot of duplicate prints, can you check testng's BeforeMethod and AfterMethod annotations\r\n> https://dzone.com/articles/testng-aftermethod-annotation\r\n\r\nThat's a good point. Let me change it.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518442369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518443325","html_url":"https://github.com/apache/helix/pull/374#issuecomment-518443325","issue_url":"https://api.github.com/repos/apache/helix/issues/374","id":518443325,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQ0MzMyNQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T23:56:26Z","updated_at":"2019-08-05T23:56:26Z","author_association":"CONTRIBUTOR","body":"> A lot of duplicate prints, can you check testng's BeforeMethod and AfterMethod annotations\r\n> https://dzone.com/articles/testng-aftermethod-annotation\r\n\r\nNo. I tried that. It is not working. It only shows the \"beforeMethod\" or \"afterMethod\" name, since you dont have a way to memorize which method it is running.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518443325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518453741","html_url":"https://github.com/apache/helix/pull/365#issuecomment-518453741","issue_url":"https://api.github.com/repos/apache/helix/issues/365","id":518453741,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQ1Mzc0MQ==","user":{"login":"kaisun2000","id":52840222,"node_id":"MDQ6VXNlcjUyODQwMjIy","avatar_url":"https://avatars.githubusercontent.com/u/52840222?v=4","gravatar_id":"","url":"https://api.github.com/users/kaisun2000","html_url":"https://github.com/kaisun2000","followers_url":"https://api.github.com/users/kaisun2000/followers","following_url":"https://api.github.com/users/kaisun2000/following{/other_user}","gists_url":"https://api.github.com/users/kaisun2000/gists{/gist_id}","starred_url":"https://api.github.com/users/kaisun2000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaisun2000/subscriptions","organizations_url":"https://api.github.com/users/kaisun2000/orgs","repos_url":"https://api.github.com/users/kaisun2000/repos","events_url":"https://api.github.com/users/kaisun2000/events{/privacy}","received_events_url":"https://api.github.com/users/kaisun2000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T00:54:16Z","updated_at":"2019-08-06T00:54:16Z","author_association":"CONTRIBUTOR","body":"Resolved all the review request. Also passing the test. Next step is to merge into trunk","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518453741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518477931","html_url":"https://github.com/apache/helix/issues/377#issuecomment-518477931","issue_url":"https://api.github.com/repos/apache/helix/issues/377","id":518477931,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQ3NzkzMQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T03:00:10Z","updated_at":"2019-08-06T03:00:10Z","author_association":"CONTRIBUTOR","body":"3 references #375.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518477931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518536237","html_url":"https://github.com/apache/helix/pull/378#issuecomment-518536237","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":518536237,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODUzNjIzNw==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T07:05:43Z","updated_at":"2019-08-06T07:05:43Z","author_association":"CONTRIBUTOR","body":"Thanks for contributing this! Please create an issue for details and follow our PR guidelines/templates. Also please make sure you are using helix format template (helix-style.xml) in the helix codebase.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518536237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518748489","html_url":"https://github.com/apache/helix/pull/378#issuecomment-518748489","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":518748489,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODc0ODQ4OQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T16:39:37Z","updated_at":"2019-08-07T05:33:03Z","author_association":"CONTRIBUTOR","body":"@chenboat Thanks for the PR. Please see https://github.com/apache/helix/wiki/Pull-Request-Guidelines to format the PR description and link your issue :)","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518748489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/518847265","html_url":"https://github.com/apache/helix/pull/379#issuecomment-518847265","issue_url":"https://api.github.com/repos/apache/helix/issues/379","id":518847265,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODg0NzI2NQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T21:16:36Z","updated_at":"2019-08-06T21:16:36Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @jiajunwang ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/518847265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519270389","html_url":"https://github.com/apache/helix/pull/374#issuecomment-519270389","issue_url":"https://api.github.com/repos/apache/helix/issues/374","id":519270389,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI3MDM4OQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T21:10:23Z","updated_at":"2019-08-07T21:10:23Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @narendly ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519270389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519274588","html_url":"https://github.com/apache/helix/pull/376#issuecomment-519274588","issue_url":"https://api.github.com/repos/apache/helix/issues/376","id":519274588,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI3NDU4OA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T21:24:36Z","updated_at":"2019-08-07T21:24:36Z","author_association":"CONTRIBUTOR","body":"> Has this really been properly formatted using helix-style.xml? Why are there so many style changes? Could you please exclude all style changes so that the PR is ready to review?\r\n> \r\n> I'll resume the review once the formatting issue has been resolved. Thanks :)\r\n\r\nThe problem is the classes are not formatted very well at their 1st versions so the PR includes many formatting changes. I did another formatting again, let me know if it looks better now.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519274588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519277504","html_url":"https://github.com/apache/helix/pull/391#issuecomment-519277504","issue_url":"https://api.github.com/repos/apache/helix/issues/391","id":519277504,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI3NzUwNA==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T21:34:08Z","updated_at":"2019-08-07T21:34:08Z","author_association":"CONTRIBUTOR","body":"> I've already had a PR pending with the same purpose, why is it?\r\n\r\nThis is orthogonal with your change. It is an improvement inside generatePartitionHeatlhFromZK() for ZK batch call read.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519277504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519286180","html_url":"https://github.com/apache/helix/pull/391#issuecomment-519286180","issue_url":"https://api.github.com/repos/apache/helix/issues/391","id":519286180,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI4NjE4MA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T22:05:40Z","updated_at":"2019-08-07T22:05:40Z","author_association":"CONTRIBUTOR","body":"> > I've already had a PR pending with the same purpose, why is it?\r\n> \r\n> This is orthogonal with your change. It is an improvement inside generatePartitionHeatlhFromZK() for ZK batch call read.\r\n\r\nLet's move the entire method outside the ServiceImpl class and make it available in Wrapper class ?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519286180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519288181","html_url":"https://github.com/apache/helix/pull/391#issuecomment-519288181","issue_url":"https://api.github.com/repos/apache/helix/issues/391","id":519288181,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI4ODE4MQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T22:13:57Z","updated_at":"2019-08-07T22:13:57Z","author_association":"CONTRIBUTOR","body":"> > > I've already had a PR pending with the same purpose, why is it?\r\n> > \r\n> > \r\n> > This is orthogonal with your change. It is an improvement inside generatePartitionHeatlhFromZK() for ZK batch call read.\r\n> \r\n> Let's move the entire method outside the ServiceImpl class and make it available in Wrapper class ?\r\n\r\nThat's what I suggest to combine ZK read logic + APi direct querying logic as a whole piece. I think this part should be done with you change because the read logics from API are totally changed.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519288181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519301768","html_url":"https://github.com/apache/helix/pull/378#issuecomment-519301768","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":519301768,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTMwMTc2OA==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T23:13:48Z","updated_at":"2019-08-07T23:13:48Z","author_association":"CONTRIBUTOR","body":"Ideally, it would be great if this stuff could be resolved at the library level, but we could have a workaround for Helix. I think this change makes sense and won't break backward-compatibility.\r\n\r\nI'll let other reviewers go through this to see if this change makes sense or if we could add some simple tests.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519301768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519307235","html_url":"https://github.com/apache/helix/pull/381#issuecomment-519307235","issue_url":"https://api.github.com/repos/apache/helix/issues/381","id":519307235,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTMwNzIzNQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T23:40:49Z","updated_at":"2019-08-07T23:40:49Z","author_association":"CONTRIBUTOR","body":"As we discussed, please split the current cluster model into the readonly part (as the input) and the updatable part (as the runtime object and the output).\r\n\r\nI think there is a graceful design, we create a child class based on the readonly cluster model, then open update interfaces in that child class. The constructor of that class shall take the readonly cluster model as the only input.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519307235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519310252","html_url":"https://github.com/apache/helix/pull/391#issuecomment-519310252","issue_url":"https://api.github.com/repos/apache/helix/issues/391","id":519310252,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTMxMDI1Mg==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T23:57:04Z","updated_at":"2019-08-07T23:57:04Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @i3wangyi ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519310252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519387017","html_url":"https://github.com/apache/helix/pull/378#issuecomment-519387017","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":519387017,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTM4NzAxNw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T06:35:56Z","updated_at":"2019-08-08T06:35:56Z","author_association":"CONTRIBUTOR","body":"Thanks for the PR. I have several comments.\r\n1. I agree to make the window configurable. It makes sense.\r\n2. The current implementation passes the configure item all the way from Accessor to the monitor. This is not necessary, in my opinion. Moreover, it would be extremely difficult to apply this solution to all of our monitors. Have you tried to add a global configuration and apply it to all the monitors?\r\n3. FYI, we also did some investigation before. What we found is these code in https://github.com/dropwizard/metrics/blob/3748f09b249f47a24ef868595fed4556ec5e92b1/metrics-core/src/main/java/com/codahale/metrics/SlidingTimeWindowReservoir.java\r\n    @Override\r\n    public Snapshot getSnapshot() {\r\n        trim();\r\n        return new UniformSnapshot(measurements.values());\r\n    }\r\nThis basically means on every get, the metrics lib will clone all the data. And we believe this causes frequent GC and high memory usage.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519387017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519403905","html_url":"https://github.com/apache/helix/issues/331#issuecomment-519403905","issue_url":"https://api.github.com/repos/apache/helix/issues/331","id":519403905,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTQwMzkwNQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:33:05Z","updated_at":"2019-08-08T07:33:05Z","author_association":"CONTRIBUTOR","body":"Close this ticket since the fix has been merged to master. We will have a release soon next week with one more critical fix.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519403905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519570671","html_url":"https://github.com/apache/helix/pull/393#issuecomment-519570671","issue_url":"https://api.github.com/repos/apache/helix/issues/393","id":519570671,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTU3MDY3MQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T15:35:25Z","updated_at":"2019-08-08T15:35:25Z","author_association":"CONTRIBUTOR","body":"Thanks for the PR. We try to stick to the guidelines to keep the quality up, so could you please follow https://github.com/apache/helix/wiki/Pull-Request-Guidelines exactly? Thanks :)","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519570671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519586561","html_url":"https://github.com/apache/helix/pull/378#issuecomment-519586561","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":519586561,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTU4NjU2MQ==","user":{"login":"chenboat","id":2549137,"node_id":"MDQ6VXNlcjI1NDkxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2549137?v=4","gravatar_id":"","url":"https://api.github.com/users/chenboat","html_url":"https://github.com/chenboat","followers_url":"https://api.github.com/users/chenboat/followers","following_url":"https://api.github.com/users/chenboat/following{/other_user}","gists_url":"https://api.github.com/users/chenboat/gists{/gist_id}","starred_url":"https://api.github.com/users/chenboat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenboat/subscriptions","organizations_url":"https://api.github.com/users/chenboat/orgs","repos_url":"https://api.github.com/users/chenboat/repos","events_url":"https://api.github.com/users/chenboat/events{/privacy}","received_events_url":"https://api.github.com/users/chenboat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T16:14:55Z","updated_at":"2019-08-08T16:14:55Z","author_association":"CONTRIBUTOR","body":"Thanks for all the feedbacks. Comments inline below.\r\n> 1. I agree to make the window configurable. It makes sense.\r\n> 2. The current implementation passes the configure item all the way from Accessor to the monitor. This is not necessary, in my opinion. Moreover, it would be extremely difficult to apply this solution to all of our monitors. Have you tried to add a global configuration and apply it to all the monitors?\r\n\r\nGood point. I mainly look at the fix for the accessor we used (i.e., in Pinot). I can work on the global config change. Do you know if there is any global configuration class already in Helix? If not, I can add a new one.  \r\n\r\n> 3. FYI, we also did some investigation before. What we found is these code in https://github.com/dropwizard/metrics/blob/3748f09b249f47a24ef868595fed4556ec5e92b1/metrics-core/src/main/java/com/codahale/metrics/SlidingTimeWindowReservoir.java\r\n>    @override\r\n>    public Snapshot getSnapshot() {\r\n>    trim();\r\n>    return new UniformSnapshot(measurements.values());\r\n>    }\r\n>    This basically means on every get, the metrics lib will clone all the data. And we believe this causes frequent GC and high memory usage.\r\n\r\nFrom our Heapdump analysis (screenshot in the original issue #382), we found the main contributors to the memory are the time bounded linked list  of SlidingTimeWindowReservoir objects in a prod server. That is the reason we want to tune the window length.   \r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519586561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519638967","html_url":"https://github.com/apache/helix/pull/378#issuecomment-519638967","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":519638967,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTYzODk2Nw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T18:38:08Z","updated_at":"2019-08-08T18:38:08Z","author_association":"CONTRIBUTOR","body":"@chenboat Please refer to HelixManagerProperties. We should be able to do something similar for the monitors.\r\n\r\nSome background here. We used to use System Properties for these configurations. You can still find a lot of these usages in our code. But we are trying to migrate to a more flexible way. So I think HelixManagerProperties would be a good example.\r\n\r\nPlease let us know what's your preference.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519638967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519743848","html_url":"https://github.com/apache/helix/pull/393#issuecomment-519743848","issue_url":"https://api.github.com/repos/apache/helix/issues/393","id":519743848,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTc0Mzg0OA==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T01:30:08Z","updated_at":"2019-08-09T01:30:08Z","author_association":"CONTRIBUTOR","body":"@narendly Thanks for your reminder, updated the description.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519743848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519786065","html_url":"https://github.com/apache/helix/pull/393#issuecomment-519786065","issue_url":"https://api.github.com/repos/apache/helix/issues/393","id":519786065,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTc4NjA2NQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T05:42:46Z","updated_at":"2019-08-09T05:42:46Z","author_association":"CONTRIBUTOR","body":"@leesf So I see a lot of failed tests, and this is concerning. But since all the changes are just removing redundant imports, I am convinced that it's the issue with your environment (perhaps your machine isn't powerful enough). Our tests spin up a local ZK and many threads are used to simulate Helix components, so we run tests in big machines. Could you tell us what environment you're using?\r\n\r\nJust to be sure, I'll maybe take a diff out of this and could try to run the test suite myself at some point (if you don't have access to a beefy machine). Will update this thread.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519786065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519787196","html_url":"https://github.com/apache/helix/pull/395#issuecomment-519787196","issue_url":"https://api.github.com/repos/apache/helix/issues/395","id":519787196,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTc4NzE5Ng==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T05:47:53Z","updated_at":"2019-08-09T05:47:53Z","author_association":"CONTRIBUTOR","body":"From you code, my understanding is you do the acquiring leadership once anyway. What if it is already acquired by itself? Will that cause any bad effects?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519787196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519792259","html_url":"https://github.com/apache/helix/pull/393#issuecomment-519792259","issue_url":"https://api.github.com/repos/apache/helix/issues/393","id":519792259,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTc5MjI1OQ==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T06:11:53Z","updated_at":"2019-08-09T06:13:28Z","author_association":"CONTRIBUTOR","body":"@narendly Thanks for your reply, my environment is windows7, 64bit, 16G, Intel(R) Core(TM) i7-6700 CPU @ 3.4GHz.\r\nI would be very grateful if you can help run the tests.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519792259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519804111","html_url":"https://github.com/apache/helix/pull/395#issuecomment-519804111","issue_url":"https://api.github.com/repos/apache/helix/issues/395","id":519804111,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTgwNDExMQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T07:00:07Z","updated_at":"2019-08-09T07:00:07Z","author_association":"CONTRIBUTOR","body":"> From you code, my understanding is you do the acquiring leadership once anyway. What if it is already acquired by itself? Will that cause any bad effects?\r\n\r\nAs commented in the code, the acquiring leadership block has to be idempotent. There seems to be no other way if we are not going to rewrite the DistributedLeaderElection class.\r\nThe current logic is still safe. But in general, I think DistributedLeaderElection does need some heavy refactoring. Just not in this fix.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519804111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519805485","html_url":"https://github.com/apache/helix/pull/392#issuecomment-519805485","issue_url":"https://api.github.com/repos/apache/helix/issues/392","id":519805485,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTgwNTQ4NQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T07:05:00Z","updated_at":"2019-08-09T07:05:00Z","author_association":"CONTRIBUTOR","body":"@pkuwm Thanks for the comment.\r\nBut for the formatting, let's update our style file instead of manual change every file. Please feel free to take the issue https://github.com/apache/helix/issues/349.\r\n\r\nNote that our regulation requires every developer to format the code based on the style file. The codes you reviewed are that result.\r\nI agree that it can be improved. But even I manually change it, whenever I format the code, it will be reverted back.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519805485/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/519807855","html_url":"https://github.com/apache/helix/pull/378#issuecomment-519807855","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":519807855,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTgwNzg1NQ==","user":{"login":"chenboat","id":2549137,"node_id":"MDQ6VXNlcjI1NDkxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2549137?v=4","gravatar_id":"","url":"https://api.github.com/users/chenboat","html_url":"https://github.com/chenboat","followers_url":"https://api.github.com/users/chenboat/followers","following_url":"https://api.github.com/users/chenboat/following{/other_user}","gists_url":"https://api.github.com/users/chenboat/gists{/gist_id}","starred_url":"https://api.github.com/users/chenboat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenboat/subscriptions","organizations_url":"https://api.github.com/users/chenboat/orgs","repos_url":"https://api.github.com/users/chenboat/repos","events_url":"https://api.github.com/users/chenboat/events{/privacy}","received_events_url":"https://api.github.com/users/chenboat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T07:13:32Z","updated_at":"2019-08-12T16:40:48Z","author_association":"CONTRIBUTOR","body":"> @chenboat Please refer to HelixManagerProperties. We should be able to do something similar for the monitors.\r\n> \r\n> Some background here. We used to use System Properties for these configurations. You can still find a lot of these usages in our code. But we are trying to migrate to a more flexible way. So I think HelixManagerProperties would be a good example.\r\n> \r\n> Please let us know what's your preference.\r\n\r\nI used HelixUtil.getSystemPropertyAsLong() which takes the system properties. It seems more fit for this case. HelixManagerProperties does not expose static property field now and I do not find an easy way to use in the monitors Helix core has right now. I just sent the latest commit in PR.\r\n\r\n@jiajunwang ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/519807855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520031065","html_url":"https://github.com/apache/helix/issues/349#issuecomment-520031065","issue_url":"https://api.github.com/repos/apache/helix/issues/349","id":520031065,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAzMTA2NQ==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T19:07:44Z","updated_at":"2019-08-09T19:07:44Z","author_association":"CONTRIBUTOR","body":"I will take this. And let me add more items here to discuss about.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520031065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520031539","html_url":"https://github.com/apache/helix/issues/349#issuecomment-520031539","issue_url":"https://api.github.com/repos/apache/helix/issues/349","id":520031539,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAzMTUzOQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T19:09:30Z","updated_at":"2019-08-09T19:09:30Z","author_association":"CONTRIBUTOR","body":"Wonderful! Many thanks.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520031539/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520044303","html_url":"https://github.com/apache/helix/issues/349#issuecomment-520044303","issue_url":"https://api.github.com/repos/apache/helix/issues/349","id":520044303,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA0NDMwMw==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T19:56:05Z","updated_at":"2019-08-09T19:56:05Z","author_association":"CONTRIBUTOR","body":"Just a reminder, there could be a bug in style file as well. When we format @Override annotation, it moved to same line as function declaration. Let's fix it.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520044303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520065585","html_url":"https://github.com/apache/helix/issues/349#issuecomment-520065585","issue_url":"https://api.github.com/repos/apache/helix/issues/349","id":520065585,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA2NTU4NQ==","user":{"login":"huizhilu","id":5187721,"node_id":"MDQ6VXNlcjUxODc3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5187721?v=4","gravatar_id":"","url":"https://api.github.com/users/huizhilu","html_url":"https://github.com/huizhilu","followers_url":"https://api.github.com/users/huizhilu/followers","following_url":"https://api.github.com/users/huizhilu/following{/other_user}","gists_url":"https://api.github.com/users/huizhilu/gists{/gist_id}","starred_url":"https://api.github.com/users/huizhilu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huizhilu/subscriptions","organizations_url":"https://api.github.com/users/huizhilu/orgs","repos_url":"https://api.github.com/users/huizhilu/repos","events_url":"https://api.github.com/users/huizhilu/events{/privacy}","received_events_url":"https://api.github.com/users/huizhilu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T21:14:09Z","updated_at":"2019-08-09T21:14:09Z","author_association":"CONTRIBUTOR","body":"Sure, will do. Thanks, Junkai.\n\nOn Fri, Aug 9, 2019 at 12:56 PM Junkai Xue <notifications@github.com> wrote:\n\n> Just a reminder, there could be a bug in style file as well. When we\n> format @override <https://github.com/override> annotation, it moved to\n> same line as function declaration. Let's fix it.\n>\n> â\n> You are receiving this because you were assigned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/helix/issues/349?email_source=notifications&email_token=ABHSRCNYZWKVJVXDAPSNLHLQDXDVRA5CNFSM4IFPYGGKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD37T6DY#issuecomment-520044303>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABHSRCL7RYW4MXNLUIXK7WTQDXDVRANCNFSM4IFPYGGA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520065585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520083072","html_url":"https://github.com/apache/helix/issues/394#issuecomment-520083072","issue_url":"https://api.github.com/repos/apache/helix/issues/394","id":520083072,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA4MzA3Mg==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T22:23:16Z","updated_at":"2019-08-09T22:23:16Z","author_association":"CONTRIBUTOR","body":"Do I understand it right? I just want to understand the whole picture more clearly since there's a bunch of race-condition issues happened recently.\r\n \r\n1. The \"frequent\" leadership switch is caused by ZK session expiration.\r\n2. What caused the \"frequent\" ZK session expiration? \r\n3. Why the new controller didn't successfully register the callback handlers?\r\n4. Is it because the 1st new controller hasn't finished the registration and it lost leadership already then the 2nd new controller came to place?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520083072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520085538","html_url":"https://github.com/apache/helix/pull/398#issuecomment-520085538","issue_url":"https://api.github.com/repos/apache/helix/issues/398","id":520085538,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA4NTUzOA==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T22:35:45Z","updated_at":"2019-08-09T22:35:45Z","author_association":"CONTRIBUTOR","body":"Thanks Yi for the approval. I will merge it to branch.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520085538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520086198","html_url":"https://github.com/apache/helix/issues/397#issuecomment-520086198","issue_url":"https://api.github.com/repos/apache/helix/issues/397","id":520086198,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA4NjE5OA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T22:39:14Z","updated_at":"2019-08-09T22:39:14Z","author_association":"CONTRIBUTOR","body":"Sounds great. It's odd to hear participants could update the IdealState on their own, during the task process. \r\n\r\nWhy it's no longer necessary? Was the usage pattern out-dated?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520086198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520087076","html_url":"https://github.com/apache/helix/issues/394#issuecomment-520087076","issue_url":"https://api.github.com/repos/apache/helix/issues/394","id":520087076,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA4NzA3Ng==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T22:43:51Z","updated_at":"2019-08-09T22:44:07Z","author_association":"CONTRIBUTOR","body":"> Do I understand it right? I just want to understand the whole picture more clearly since there's a bunch of race-condition issues happened recently.\r\n> \r\n> 1. The \"frequent\" leadership switch is caused by ZK session expiration.\r\n\r\nYes.\r\n\r\n> 2. What caused the \"frequent\" ZK session expiration?\r\n\r\nThis is not confirmed. Maybe GC, maybe network issue. Or combined. The result is obvious though.\r\n\r\n> 3. Why the new controller didn't successfully register the callback handlers?\r\n\r\nPlease refer to the fix. The previous design cannot handle more than one leader node change event in a graceful way.\r\nThis use case is just not considered.\r\n\r\n> 4. Is it because the 1st new controller hasn't finished the registration and it lost leadership already then the 2nd new controller came to place?\r\n\r\nThe 1st controller does lose the leadership, but that does not cause the problem. The issue was in one controller always. If this one has a leftover controller change event unprocessed, it will for sure fall into this bad situation.\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520087076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520095752","html_url":"https://github.com/apache/helix/pull/399#issuecomment-520095752","issue_url":"https://api.github.com/repos/apache/helix/issues/399","id":520095752,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDA5NTc1Mg==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T23:36:23Z","updated_at":"2019-08-09T23:36:40Z","author_association":"CONTRIBUTOR","body":"Discussed with @narendly and Approved. I will merge it soon.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520095752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520126939","html_url":"https://github.com/apache/helix/pull/400#issuecomment-520126939","issue_url":"https://api.github.com/repos/apache/helix/issues/400","id":520126939,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDEyNjkzOQ==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-10T07:35:22Z","updated_at":"2019-08-10T07:35:22Z","author_association":"CONTRIBUTOR","body":"I think you have the unit test to cover that. Can you add it in this PR?","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520126939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520519430","html_url":"https://github.com/apache/helix/pull/400#issuecomment-520519430","issue_url":"https://api.github.com/repos/apache/helix/issues/400","id":520519430,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDUxOTQzMA==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-12T17:30:59Z","updated_at":"2019-08-12T17:33:04Z","author_association":"CONTRIBUTOR","body":"> I think you have the unit test to cover that. Can you add it in this PR?\r\n\r\nA unit test has been added: TestDropTerminalTasksUponReset. This test will fail if run without the JobDispatcher logic change.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520519430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520526116","html_url":"https://github.com/apache/helix/pull/400#issuecomment-520526116","issue_url":"https://api.github.com/repos/apache/helix/issues/400","id":520526116,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDUyNjExNg==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-12T17:49:02Z","updated_at":"2019-08-12T17:49:02Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @dasahcc","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520526116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520714421","html_url":"https://github.com/apache/helix/issues/401#issuecomment-520714421","issue_url":"https://api.github.com/repos/apache/helix/issues/401","id":520714421,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDcxNDQyMQ==","user":{"login":"brunnsbe","id":1334916,"node_id":"MDQ6VXNlcjEzMzQ5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1334916?v=4","gravatar_id":"","url":"https://api.github.com/users/brunnsbe","html_url":"https://github.com/brunnsbe","followers_url":"https://api.github.com/users/brunnsbe/followers","following_url":"https://api.github.com/users/brunnsbe/following{/other_user}","gists_url":"https://api.github.com/users/brunnsbe/gists{/gist_id}","starred_url":"https://api.github.com/users/brunnsbe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brunnsbe/subscriptions","organizations_url":"https://api.github.com/users/brunnsbe/orgs","repos_url":"https://api.github.com/users/brunnsbe/repos","events_url":"https://api.github.com/users/brunnsbe/events{/privacy}","received_events_url":"https://api.github.com/users/brunnsbe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T07:00:40Z","updated_at":"2019-08-14T10:10:49Z","author_association":"NONE","body":"I forked this repository and made a commit that replaces the old Jackson with the newer FasterXML/Jackson:\r\nhttps://github.com/brunnsbe/helix/commit/ca36d5e51c00e0278fa8526581a9ed9081e619c1\r\nI however have problems running all the tests as quite many of them throws an OutOfMemoryException:\r\n```\r\n...\r\n[ERROR]   TestZkHelixPropertyStore.testSet Â» OutOfMemory unable to create new native thr...\r\n[ERROR]   TestZkHelixPropertyStore.testSetInvalidPath Â» OutOfMemory unable to create new...\r\n[ERROR]   TestZkHelixPropertyStore.testZkClientMonitor Â» OutOfMemory unable to create ne...\r\n[ERROR]   TestZkHelixPropertyStore.testZkTriggeredCallback Â» OutOfMemory unable to creat...\r\n[ERROR]   TestZkManagerWithAutoFallbackStore.testBasic Â» OutOfMemory unable to create ne...\r\n[INFO]\r\n[ERROR] Tests run: 866, Failures: 177, Errors: 0, Skipped: 103\r\n[INFO]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Summary for Apache Helix 0.9.1-SNAPSHOT:\r\n[INFO]\r\n[INFO] Apache Helix ....................................... SUCCESS [  2.061 s]\r\n[INFO] Apache Helix :: Core ............................... FAILURE [  01:00 h]\r\n[INFO] Apache Helix :: Admin Webapp ....................... SKIPPED\r\n[INFO] Apache Helix :: Restful Interface .................. SKIPPED\r\n[INFO] Apache Helix :: HelixAgent ......................... SKIPPED\r\n[INFO] Apache Helix :: Recipes ............................ SKIPPED\r\n[INFO] Apache Helix :: Recipes :: Rabbitmq Consumer Group . SKIPPED\r\n[INFO] Apache Helix :: Recipes :: Rsync Replicated File Store SKIPPED\r\n[INFO] Apache Helix :: Recipes :: distributed lock manager  SKIPPED\r\n[INFO] Apache Helix :: Recipes :: distributed task execution SKIPPED\r\n[INFO] Apache Helix :: Recipes :: service discovery ....... SKIPPED\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  01:00 h\r\n[INFO] Finished at: 2019-08-13T09:23:19+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520714421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520933866","html_url":"https://github.com/apache/helix/pull/378#issuecomment-520933866","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":520933866,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDkzMzg2Ng==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T17:39:44Z","updated_at":"2019-08-13T17:39:44Z","author_association":"CONTRIBUTOR","body":"One more thing, please also revisit the previous comments and resolve them if the problem has been fixed or no longer valid.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520933866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520947396","html_url":"https://github.com/apache/helix/pull/392#issuecomment-520947396","issue_url":"https://api.github.com/repos/apache/helix/issues/392","id":520947396,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk0NzM5Ng==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T18:15:10Z","updated_at":"2019-08-13T18:15:10Z","author_association":"CONTRIBUTOR","body":"Addressed comments. For the format related issues, @pkuwm will be working on refining the format file. We can fix the style after that.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520947396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520951227","html_url":"https://github.com/apache/helix/pull/392#issuecomment-520951227","issue_url":"https://api.github.com/repos/apache/helix/issues/392","id":520951227,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk1MTIyNw==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T18:24:46Z","updated_at":"2019-08-13T18:24:46Z","author_association":"CONTRIBUTOR","body":"Approved by @dasahcc and I will merge it to our working branch soon.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520951227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/520999934","html_url":"https://github.com/apache/helix/pull/376#issuecomment-520999934","issue_url":"https://api.github.com/repos/apache/helix/issues/376","id":520999934,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk5OTkzNA==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T20:39:09Z","updated_at":"2019-08-13T20:39:09Z","author_association":"CONTRIBUTOR","body":"The PR is approved by @dasahcc, ready to be merged","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/520999934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521056458","html_url":"https://github.com/apache/helix/pull/404#issuecomment-521056458","issue_url":"https://api.github.com/repos/apache/helix/issues/404","id":521056458,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTA1NjQ1OA==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T00:20:22Z","updated_at":"2019-08-14T00:20:22Z","author_association":"CONTRIBUTOR","body":"![Screenshot from 2019-08-13 17-11-59](https://user-images.githubusercontent.com/1803880/62986007-9ddec800-bdee-11e9-83ac-60b5e2dcca16.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521056458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521073125","html_url":"https://github.com/apache/helix/pull/381#issuecomment-521073125","issue_url":"https://api.github.com/repos/apache/helix/issues/381","id":521073125,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTA3MzEyNQ==","user":{"login":"i3wangyi","id":2618776,"node_id":"MDQ6VXNlcjI2MTg3NzY=","avatar_url":"https://avatars.githubusercontent.com/u/2618776?v=4","gravatar_id":"","url":"https://api.github.com/users/i3wangyi","html_url":"https://github.com/i3wangyi","followers_url":"https://api.github.com/users/i3wangyi/followers","following_url":"https://api.github.com/users/i3wangyi/following{/other_user}","gists_url":"https://api.github.com/users/i3wangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/i3wangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i3wangyi/subscriptions","organizations_url":"https://api.github.com/users/i3wangyi/orgs","repos_url":"https://api.github.com/users/i3wangyi/repos","events_url":"https://api.github.com/users/i3wangyi/events{/privacy}","received_events_url":"https://api.github.com/users/i3wangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T01:58:04Z","updated_at":"2019-08-14T01:58:04Z","author_association":"CONTRIBUTOR","body":"don't read, I've messed up the commits and will get it reverted","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521073125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521401699","html_url":"https://github.com/apache/helix/pull/406#issuecomment-521401699","issue_url":"https://api.github.com/repos/apache/helix/issues/406","id":521401699,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQwMTY5OQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T20:16:10Z","updated_at":"2019-08-14T20:16:10Z","author_association":"CONTRIBUTOR","body":"Let me know if this is ready to be merged.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521401699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521402113","html_url":"https://github.com/apache/helix/pull/378#issuecomment-521402113","issue_url":"https://api.github.com/repos/apache/helix/issues/378","id":521402113,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQwMjExMw==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T20:17:31Z","updated_at":"2019-08-14T20:17:31Z","author_association":"CONTRIBUTOR","body":"@chenboat If you want this code merged, please review https://github.com/apache/helix/wiki/Pull-Request-Merge-Steps","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521402113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521416049","html_url":"https://github.com/apache/helix/pull/406#issuecomment-521416049","issue_url":"https://api.github.com/repos/apache/helix/issues/406","id":521416049,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQxNjA0OQ==","user":{"login":"jiajunwang","id":1803880,"node_id":"MDQ6VXNlcjE4MDM4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/1803880?v=4","gravatar_id":"","url":"https://api.github.com/users/jiajunwang","html_url":"https://github.com/jiajunwang","followers_url":"https://api.github.com/users/jiajunwang/followers","following_url":"https://api.github.com/users/jiajunwang/following{/other_user}","gists_url":"https://api.github.com/users/jiajunwang/gists{/gist_id}","starred_url":"https://api.github.com/users/jiajunwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiajunwang/subscriptions","organizations_url":"https://api.github.com/users/jiajunwang/orgs","repos_url":"https://api.github.com/users/jiajunwang/repos","events_url":"https://api.github.com/users/jiajunwang/events{/privacy}","received_events_url":"https://api.github.com/users/jiajunwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T20:58:18Z","updated_at":"2019-08-14T20:58:18Z","author_association":"CONTRIBUTOR","body":"Thanks, I will do the merge.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521416049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521459782","html_url":"https://github.com/apache/helix/pull/405#issuecomment-521459782","issue_url":"https://api.github.com/repos/apache/helix/issues/405","id":521459782,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ1OTc4Mg==","user":{"login":"junkaixue","id":6695617,"node_id":"MDQ6VXNlcjY2OTU2MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6695617?v=4","gravatar_id":"","url":"https://api.github.com/users/junkaixue","html_url":"https://github.com/junkaixue","followers_url":"https://api.github.com/users/junkaixue/followers","following_url":"https://api.github.com/users/junkaixue/following{/other_user}","gists_url":"https://api.github.com/users/junkaixue/gists{/gist_id}","starred_url":"https://api.github.com/users/junkaixue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junkaixue/subscriptions","organizations_url":"https://api.github.com/users/junkaixue/orgs","repos_url":"https://api.github.com/users/junkaixue/repos","events_url":"https://api.github.com/users/junkaixue/events{/privacy}","received_events_url":"https://api.github.com/users/junkaixue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T23:44:45Z","updated_at":"2019-08-14T23:44:45Z","author_association":"CONTRIBUTOR","body":"This PR is ready to be merged, approved by @i3wangyi ","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521459782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/helix/issues/comments/521517395","html_url":"https://github.com/apache/helix/pull/410#issuecomment-521517395","issue_url":"https://api.github.com/repos/apache/helix/issues/410","id":521517395,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTUxNzM5NQ==","user":{"login":"narendly","id":10107095,"node_id":"MDQ6VXNlcjEwMTA3MDk1","avatar_url":"https://avatars.githubusercontent.com/u/10107095?v=4","gravatar_id":"","url":"https://api.github.com/users/narendly","html_url":"https://github.com/narendly","followers_url":"https://api.github.com/users/narendly/followers","following_url":"https://api.github.com/users/narendly/following{/other_user}","gists_url":"https://api.github.com/users/narendly/gists{/gist_id}","starred_url":"https://api.github.com/users/narendly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/narendly/subscriptions","organizations_url":"https://api.github.com/users/narendly/orgs","repos_url":"https://api.github.com/users/narendly/repos","events_url":"https://api.github.com/users/narendly/events{/privacy}","received_events_url":"https://api.github.com/users/narendly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T05:20:40Z","updated_at":"2019-08-15T05:20:40Z","author_association":"CONTRIBUTOR","body":"A comment on the test you added. I had a hard time understanding what you're trying to test in your test. I think we could make the test more robust by adding a more intuitive test case, and also add some description in your test so that anyone could see what you're doing clearly.","reactions":{"url":"https://api.github.com/repos/apache/helix/issues/comments/521517395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]