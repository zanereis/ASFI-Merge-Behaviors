[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1231716984","html_url":"https://github.com/apache/accumulo/pull/2894#issuecomment-1231716984","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2894","id":1231716984,"node_id":"IC_kwDOACaFSM5JaoJ4","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T14:04:52Z","updated_at":"2022-08-30T14:04:52Z","author_association":"CONTRIBUTOR","body":"> Could the desired num tservers and sservers per host be placed in the cluster.yaml\r\n\r\nSo, this might be possible given that the cluster.yaml file is parsed and then the output of that is sourced by the `accumulo-cluster` script. I could include the following in the output:\r\n\r\n```\r\nexport NUM_TSERVERS=${NUM_TSERVERS:=1}\r\nexport NUM_SSERVERS=${NUM_SSERVERS:=1}\r\n```\r\n\r\nWith this approach, `accmulo-cluster` would not need to source `accumulo-env.sh`. I will put up a different PR for evaluation and close this one if it's accepted.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1231716984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1231871447","html_url":"https://github.com/apache/accumulo/pull/2894#issuecomment-1231871447","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2894","id":1231871447,"node_id":"IC_kwDOACaFSM5JbN3X","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T16:05:24Z","updated_at":"2022-08-30T16:05:24Z","author_association":"CONTRIBUTOR","body":"See #2903 for alternate implementation","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1231871447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1231975021","html_url":"https://github.com/apache/accumulo/pull/2902#issuecomment-1231975021","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2902","id":1231975021,"node_id":"IC_kwDOACaFSM5JbnJt","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T17:45:52Z","updated_at":"2022-08-30T17:45:52Z","author_association":"MEMBER","body":"@dlmarion, your suggestions should be addressed now","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1231975021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232000399","html_url":"https://github.com/apache/accumulo/pull/2900#issuecomment-1232000399","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2900","id":1232000399,"node_id":"IC_kwDOACaFSM5JbtWP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T18:11:30Z","updated_at":"2022-08-30T18:11:30Z","author_association":"CONTRIBUTOR","body":"I think that both the old approach and the new approach of getting disk usage are *both* estimations. Unless you have ceased all write activity on the cluster, there is a good chance on a busy cluster that something will be written between the time you started the command and the time it returns the result to you. Given that, I would suggest that we could replace the existing Accumulo command to scan the metadata table and state in the documentation that it's an estimation. If the user wants really accurate disk usage information, they can quiesce the cluster and run the `hadoop fs du -s <dir>` command.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232000399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232020669","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1232020669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1232020669,"node_id":"IC_kwDOACaFSM5JbyS9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T18:32:56Z","updated_at":"2022-08-30T18:32:56Z","author_association":"MEMBER","body":"> There are a lot of conflicts in this PR with recent changes. I don't want to loose the design discussion here so I am going to close this in favor of a branch with all the changes merged together.\r\n\r\nCan you link to the new PR here when it exists, so we can follow the conversation to that PR?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232020669/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232061014","html_url":"https://github.com/apache/accumulo/pull/2903#issuecomment-1232061014","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2903","id":1232061014,"node_id":"IC_kwDOACaFSM5Jb8JW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T19:12:06Z","updated_at":"2022-08-30T19:12:06Z","author_association":"CONTRIBUTOR","body":"> One thing I am wondering about is how will someone know about the NUM_TSERVER behavior? The behavior where if its set as an env var it will override whats in the cluster yaml file. Where should this be documented? Maybe a short paragraph in the accumulo_cluster script usage message?\r\n\r\nYeah, that's a good point. It wasn't really documented before either. I can add some comments in the cluster.yaml file","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232061014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232101142","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1232101142","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1232101142,"node_id":"IC_kwDOACaFSM5JcF8W","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T19:54:43Z","updated_at":"2022-08-30T19:54:43Z","author_association":"CONTRIBUTOR","body":"Another option for the enum name could be \"REPO_NAME\", which I think is too vague or \"RUNNING_REPO_NAME\".","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232101142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232130777","html_url":"https://github.com/apache/accumulo/pull/2900#issuecomment-1232130777","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2900","id":1232130777,"node_id":"IC_kwDOACaFSM5JcNLZ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T20:25:52Z","updated_at":"2022-08-30T20:25:52Z","author_association":"CONTRIBUTOR","body":"I think I like the idea of just dropping the old command entirely and having people just use the hadoop command directly if they really want the hdfs size. The estimation from the new updated command should be sufficient.\r\n\r\nBesides having to maintain 2 commands that do nearly the same thing (which may confuse users) the old command would need some work on the RPC/thrift side to send back new data to match the format of the new command I did or we'd have the commands returning different slightly different outputs. The new metrics I added would need to be incorporated and sent back over Thrift and right now all that is sent back is shared table data.\r\n\r\nAlso, considering the old command doesn't even work on large clusters (which was the entire point of doing this in the first place) I think it just makes sense to remove it. I don't really see much of a use case to want or need to scan HDFS directly and you can't just query the cluster directly using hadoop.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232130777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232153569","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1232153569","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1232153569,"node_id":"IC_kwDOACaFSM5JcSvh","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T20:50:09Z","updated_at":"2022-08-30T21:17:40Z","author_association":"CONTRIBUTOR","body":"Maybe I am confusing things - but this change may be misleading. I thought the change to `targetRepo` was the `debug` information.  That node is written with the class name of the operation that is the desired goal of the transaction.  The REPO that starts the processing.  The currently executing REPO is the `top` REPO - a step in the REPO transactions working toward the final goal (target).\r\n\r\nFor example bulk import is a number of steps, which I can't recall exactly, but along the lines of having clean-up, process files, ... when the bulk import starts - that class name is written to the debug / target node. Other REPOs are pushed onto the REPO stack, and the `top` REPO is the currently executing step. As the bulk import is processed, the steps are popped off the top of the stack and executed, the debug/target node remains unchanged - the \"final\" goal of the command.\r\n\r\nThis is a sample from a stand-alone utility that was used to guide the fate summary option (current output may differ slightly)\r\n```\r\ntxid: 73b118d71a7adb78  status: IN_PROGRESS         op: PrepBulkImport   locked: [R:m]           locking: []              top: LoadFiles       created: 2022-07-28T13:35:05.805Z\r\ntxid: 631918efd0301830  status: IN_PROGRESS         op: PrepBulkImport   locked: [R:1h]          locking: []              top: LoadFiles       created: 2022-07-28T13:37:37.37Z\r\n\r\nBoth targets are the successful completion of the PrepBulkImport, and both are currently executing the LoadFiles step.\r\n```\r\n\r\nWith this change, I think you are suggesting that PrepBulkImport would be named runningRepo - and while that is the executing overall operation - the REPO that is currently doing \"work\" is the top node, LoadFiles.\r\n\r\nOr, do I have this change backward?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232153569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232209578","html_url":"https://github.com/apache/accumulo/pull/2903#issuecomment-1232209578","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2903","id":1232209578,"node_id":"IC_kwDOACaFSM5Jcgaq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T21:55:46Z","updated_at":"2022-08-30T21:55:46Z","author_association":"CONTRIBUTOR","body":"> I can add some comments in the cluster.yaml file\r\n\r\nThat is probably the place where its most likely to be seen.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232209578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232461195","html_url":"https://github.com/apache/accumulo/issues/2905#issuecomment-1232461195","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2905","id":1232461195,"node_id":"IC_kwDOACaFSM5Jdd2L","user":{"login":"skirklin","id":2373399,"node_id":"MDQ6VXNlcjIzNzMzOTk=","avatar_url":"https://avatars.githubusercontent.com/u/2373399?v=4","gravatar_id":"","url":"https://api.github.com/users/skirklin","html_url":"https://github.com/skirklin","followers_url":"https://api.github.com/users/skirklin/followers","following_url":"https://api.github.com/users/skirklin/following{/other_user}","gists_url":"https://api.github.com/users/skirklin/gists{/gist_id}","starred_url":"https://api.github.com/users/skirklin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skirklin/subscriptions","organizations_url":"https://api.github.com/users/skirklin/orgs","repos_url":"https://api.github.com/users/skirklin/repos","events_url":"https://api.github.com/users/skirklin/events{/privacy}","received_events_url":"https://api.github.com/users/skirklin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T04:53:22Z","updated_at":"2022-08-31T04:53:22Z","author_association":"CONTRIBUTOR","body":"I can't seem to assign it to myself, but I will make a PR with the (extremely minor) fix momentarily.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232461195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232829982","html_url":"https://github.com/apache/accumulo/pull/2907#issuecomment-1232829982","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2907","id":1232829982,"node_id":"IC_kwDOACaFSM5Je34e","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T11:46:41Z","updated_at":"2022-08-31T11:46:41Z","author_association":"CONTRIBUTOR","body":"I'm getting an error locally when I shutdown using `accumulo-cluster stop` when ZooZap tries to clean up the sserver nodes. I don't think there is an issue in our code, as the sserver znode is created in [ZooKeeperInitalizer](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/init/ZooKeeperInitializer.java#L182) and [Upgrader9To10](https://github.com/apache/accumulo/blob/main/server/manager/src/main/java/org/apache/accumulo/manager/upgrade/Upgrader9to10.java#L183). I'm using an old instance locally, so I assume that the initialization was done pre-scan server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232829982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232857657","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1232857657","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1232857657,"node_id":"IC_kwDOACaFSM5Je-o5","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T12:14:41Z","updated_at":"2022-08-31T12:14:41Z","author_association":"CONTRIBUTOR","body":"I think we are both confused :grin:. OK I figured it out...\r\n\r\nThe weird debug REPO is just the first REPO in the transaction. The only time it ever gets set is during `seedTransaction()`. So sometimes it makes sense as \"target\" like you were thinking but other times it doesn't. For example, the legacy Bulk import it will be `BulkImport` from bulkVer1 package but for the new bulk import it gets set to `PrepBulkImport`. For a compaction, it will be `CompactRange`. For create table it will be `CreateTable`.\r\n\r\nYou were correct that the `top` is actually the current running REPO.\r\n\r\nI guess the name should be something like `INITIAL_REPO` or we can just remove it since its caused so much confusion. The only value I think it has is to see if its the same as the running repo to try and gauge progress. But an admin really doesn't know the REPOs of the TX without looking at the code. Since there is usually only 1 REPO that will hang during a problematic TX, this doesn't really help. \r\n\r\nWe should be passing in the name of the FateOperation ENUM since that is the name of the TX.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232857657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232891498","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1232891498","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1232891498,"node_id":"IC_kwDOACaFSM5JfG5q","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T12:45:55Z","updated_at":"2022-08-31T12:45:55Z","author_association":"CONTRIBUTOR","body":"It is helpful to admin to know both the intent and the current step.  Even with delete table, there are stages that can take awhile - just showing a delete operation is less helpful than showing its a delete, currently running clean-up.  While it would be nice to have the intent clearer, its is better to have something.  If it only reflected the running REPO - say clean-up, that could be a delete, an import,...  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232891498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232906423","html_url":"https://github.com/apache/accumulo/pull/2906#issuecomment-1232906423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2906","id":1232906423,"node_id":"IC_kwDOACaFSM5JfKi3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T12:59:47Z","updated_at":"2022-08-31T13:12:24Z","author_association":"CONTRIBUTOR","body":"PR fails file formatting validation. You can run `mvn clean package -DskipTests` locally which will format the file, among other things.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232906423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232993581","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1232993581","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1232993581,"node_id":"IC_kwDOACaFSM5Jff0t","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T14:12:04Z","updated_at":"2022-08-31T14:12:04Z","author_association":"CONTRIBUTOR","body":"Sunny ITs are passing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1232993581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233089374","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1233089374","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1233089374,"node_id":"IC_kwDOACaFSM5Jf3Ne","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T15:27:39Z","updated_at":"2022-08-31T15:27:39Z","author_association":"CONTRIBUTOR","body":"In my latest change, I passed in a string for the TX_NAME. This works better than using the strong type FateOperation because the shutdown tserver tx doesn't use the FateOperation enum.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233089374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233264863","html_url":"https://github.com/apache/accumulo/pull/2894#issuecomment-1233264863","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2894","id":1233264863,"node_id":"IC_kwDOACaFSM5JgiDf","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T18:17:19Z","updated_at":"2022-08-31T18:17:19Z","author_association":"CONTRIBUTOR","body":"Closing as #2903 has been merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233264863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233281510","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1233281510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1233281510,"node_id":"IC_kwDOACaFSM5JgmHm","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T18:35:08Z","updated_at":"2022-08-31T18:35:08Z","author_association":"CONTRIBUTOR","body":"This fix is good to go now. I like the new name. Here is what `fate -print` will display now:\r\n<pre>\r\nTABLE_COMPACT   txid: 754ab57de33ea843  status: IN_PROGRESS        locked: [R:+default, R:1] locking: []              op: CompactionDriver created: 2022-08-31T17:01:55.523Z\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233281510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233315871","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1233315871","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1233315871,"node_id":"IC_kwDOACaFSM5Jgugf","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T19:04:51Z","updated_at":"2022-08-31T19:04:51Z","author_association":"CONTRIBUTOR","body":"Can you try fate -summary?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233315871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233350858","html_url":"https://github.com/apache/accumulo/pull/2904#issuecomment-1233350858","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2904","id":1233350858,"node_id":"IC_kwDOACaFSM5Jg3DK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T19:45:04Z","updated_at":"2022-08-31T19:45:04Z","author_association":"CONTRIBUTOR","body":"> Can you try fate -summary?\r\n\r\n<pre>\r\nReport Time: 2022-08-31T19:44:00Z\r\nStatus counts:\r\n  IN_PROGRESS: 1\r\n\r\nCommand counts:\r\n  TABLE_COMPACT: 1\r\n\r\nStep counts:\r\n  CompactionDriver: 1\r\n\r\nFate transactions (oldest first):\r\nStatus Filters: [NONE]\r\n\r\nRunning\ttxn_id\t\t\t\tStatus\t\tCommand\t\tStep (top)\t\tlocks held:(table id, name)\tlocks waiting:(table id, name)\r\n0:00:09\t3f94c44c38546f76\tIN_PROGRESS\tTABLE_COMPACT\tCompactionDriver\theld:[R:(+default,ns:), R:(1,t:ci)]\twaiting:[]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233350858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233544930","html_url":"https://github.com/apache/accumulo/issues/2908#issuecomment-1233544930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2908","id":1233544930,"node_id":"IC_kwDOACaFSM5Jhmbi","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T23:21:59Z","updated_at":"2022-08-31T23:22:28Z","author_association":"MEMBER","body":"Closing this as already addressed in the next release. See below for workarounds for previous releases.\r\n\r\nThis only affects older Accumulo versions using a newer version of ZooKeeper that those Accumulo versions were not explicitly designed to work with. While newer versions of ZooKeeper should work with Accumulo 2.0 and 1.10, there may be some newer features in newer ZooKeeper releases that these versions of Accumulo do not explicitly support. Accumulo 1.10 and 2.0 were developed and tested primarily with ZooKeeper 3.4, which did not have an adminServer. The way we support arbitrary ZooKeeper configuration for mini is by providing the ability to use a ZooKeeper instance you start yourself.\r\n\r\nMini itself does not use the adminServer and disables it in 2.1.0-SNAPSHOT (see #1531), so it's will not be an issue in that version, which will be the first version to be written explicitly to support ZooKeeper 3.5 and newer, after the adminServer was introduced.\r\n\r\nThe workaround for this would be to use an existing ZooKeeper instance, which you can set up separately using whatever zoo.cfg you prefer. This is supported in the MiniAccumuloCluster API for Accumulo 1.10 and 2.0. You could use something like https://github.com/revelc/zookeeper-maven-plugin or start ZooKeeper yourself.\r\n\r\nAnother workaround that ZooKeeper itself supports is: `System.setProperty(\"zookeeper.admin.enableServer\", \"false\");`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233544930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233685640","html_url":"https://github.com/apache/accumulo/issues/2908#issuecomment-1233685640","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2908","id":1233685640,"node_id":"IC_kwDOACaFSM5JiIyI","user":{"login":"melaquias","id":80767397,"node_id":"MDQ6VXNlcjgwNzY3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/80767397?v=4","gravatar_id":"","url":"https://api.github.com/users/melaquias","html_url":"https://github.com/melaquias","followers_url":"https://api.github.com/users/melaquias/followers","following_url":"https://api.github.com/users/melaquias/following{/other_user}","gists_url":"https://api.github.com/users/melaquias/gists{/gist_id}","starred_url":"https://api.github.com/users/melaquias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melaquias/subscriptions","organizations_url":"https://api.github.com/users/melaquias/orgs","repos_url":"https://api.github.com/users/melaquias/repos","events_url":"https://api.github.com/users/melaquias/events{/privacy}","received_events_url":"https://api.github.com/users/melaquias/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T03:14:11Z","updated_at":"2022-09-01T03:14:11Z","author_association":"NONE","body":"Okay.  Thanks for the heads-up that this is fixed in the coming release and the work-around suggestions.  I should be able to make use of one of them.  Using v3.4 of ZK is not an option.   The system property for disabling the admin server looks like that should work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233685640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233692550","html_url":"https://github.com/apache/accumulo/issues/2908#issuecomment-1233692550","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2908","id":1233692550,"node_id":"IC_kwDOACaFSM5JiKeG","user":{"login":"melaquias","id":80767397,"node_id":"MDQ6VXNlcjgwNzY3Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/80767397?v=4","gravatar_id":"","url":"https://api.github.com/users/melaquias","html_url":"https://github.com/melaquias","followers_url":"https://api.github.com/users/melaquias/followers","following_url":"https://api.github.com/users/melaquias/following{/other_user}","gists_url":"https://api.github.com/users/melaquias/gists{/gist_id}","starred_url":"https://api.github.com/users/melaquias/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melaquias/subscriptions","organizations_url":"https://api.github.com/users/melaquias/orgs","repos_url":"https://api.github.com/users/melaquias/repos","events_url":"https://api.github.com/users/melaquias/events{/privacy}","received_events_url":"https://api.github.com/users/melaquias/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T03:26:56Z","updated_at":"2022-09-01T03:26:56Z","author_association":"NONE","body":"Except, duh-uh, of course setting the system property doesn't work - because MAC spawns ZK in a separate JVM process.  Sigh ... I'll have to resort to one of the uglier work-arounds.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1233692550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234413246","html_url":"https://github.com/apache/accumulo/pull/2910#issuecomment-1234413246","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2910","id":1234413246,"node_id":"IC_kwDOACaFSM5Jk6a-","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T15:07:57Z","updated_at":"2022-09-01T15:07:57Z","author_association":"CONTRIBUTOR","body":"Ticket replaces Jira issue https://issues.apache.org/jira/browse/ACCUMULO-3447","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234413246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234575819","html_url":"https://github.com/apache/accumulo/issues/2908#issuecomment-1234575819","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2908","id":1234575819,"node_id":"IC_kwDOACaFSM5JliHL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T17:29:05Z","updated_at":"2022-09-01T17:29:05Z","author_association":"MEMBER","body":"> Except, duh-uh, of course setting the system property doesn't work - because MAC spawns ZK in a separate JVM process. Sigh ... I'll have to resort to one of the uglier work-arounds.\r\n\r\nUsing non-public API is not recommended because internal code can change often. However, you might be able to do something like:\r\n\r\n```java\r\nvar config = new MiniAccumuloConfigImpl(new File(\"/\"), \"\");\r\n\r\nvar map = new HashMap<>(config.getSystemProperties());\r\nmap.put(\"zookeeper.admin.enableServer\", \"false\");\r\nconfig.setSystemProperties(map);\r\n\r\nvar mac = new MiniAccumuloClusterImpl(config);\r\nmac.start();\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234575819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234611631","html_url":"https://github.com/apache/accumulo/pull/2906#issuecomment-1234611631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2906","id":1234611631,"node_id":"IC_kwDOACaFSM5Jlq2v","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T18:02:49Z","updated_at":"2022-09-01T18:02:49Z","author_association":"MEMBER","body":"Thanks for the PR @skirklin . It looks like this is your first contribution to this project. If you wish to be added as a contributor to https://accumulo.apache.org/people/ , please open a pull request to add yourself (in alphabetical order) at https://github.com/apache/accumulo-website/edit/main/pages/people.md and leave a reference to `apache/accumulo#2906` in your commit log.\r\n\r\nIf you intend to be a regular contributor to Accumulo projects, please consider subscribing to our developer mailing list (https://accumulo.apache.org/contact-us/) and introducing yourself. :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234611631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234906215","html_url":"https://github.com/apache/accumulo/issues/2820#issuecomment-1234906215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2820","id":1234906215,"node_id":"IC_kwDOACaFSM5Jmyxn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T23:31:24Z","updated_at":"2022-09-01T23:31:24Z","author_association":"MEMBER","body":"See my comments on the PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1234906215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235418223","html_url":"https://github.com/apache/accumulo/pull/2900#issuecomment-1235418223","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2900","id":1235418223,"node_id":"IC_kwDOACaFSM5Jovxv","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T12:03:12Z","updated_at":"2022-09-02T12:46:03Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - Thanks for the detailed feedback, that's very helpful to get some more background. My comments are below to address each of your points.\r\n\r\n1. I agree that we should just have 1 command and no flag. This will make it a lot simpler for the user and less confusing. I will rework my PR to make my changes just the \"du\" command going forward. I think that scanning the metadata should certainly be faster and a worthwhile change for capturing the size information but we would need to benchmark on a large enough cluster to be sure.\r\n2. In regards to how the existing command works with computing the size data used exclusively and shared across tables, I didn't change how any of that logic works and my new command still prints that so this should not be a concern. I just moved it under a verbose flag but this can be changed. I refactored that logic into an abstract class so the computation and output is **exactly** the same as the old command. The only difference is the source of the size data. The computation is done [here](https://github.com/cshannon/accumulo/blob/e807c98771b87c5fc3942694c37cbd2f5e1f767a/core/src/main/java/org/apache/accumulo/core/util/tables/TableDiskUsage.java#L131) which is part of the abstract class and both new/old versions use the method so it's the same result. At the end of my comment I give a few examples of output.\r\n3. In regards to detecting exact or approximate size values how would we detect if it was exact or approximate and does it matter that much? Will the approximate value ever be that far off from the real value to matter? \r\n\r\nFor size missing entirely would there just be a size of 0 in the metadata for the size value for the file and what would trigger this? I'm assuming maybe bulk ingest but I need to dive into the code to see when this could happen. I'm trying to figure out how we can approach this if you wanted to make sure to capture missing data still. If it's missing entirely than maybe we look it up from HDFS then. I would likely need to make a new RPC call to the server with a list of file(s) to query from HDFS to get size data back to fill in the missing gaps.\r\n\r\nIf the data is not missing and just approximate I think we can still use it (assuming it should be close) but just make sure we document it's an approximation.\r\n\r\n### Example output:\r\n\r\n#### Using a Pattern for multiple tables: \r\n**Existing:**\r\n  ```\r\n  root@uno t1> du -p t.*\r\n                       310 [t1]\r\n                       270 [t2, t3]\r\n                       232 [t3]\r\n  ```\r\n  **New:**\r\n  ```\r\n  root@uno t1> dumeta -p t.* -v\r\n  t1  1  used total: 310  hdfs://localhost:8020/accumulo: 310  has_shared: false\r\n  t2  2  used total: 270  hdfs://localhost:8020/accumulo: 270  has_shared: false\r\n  t3  3  used total: 502  hdfs://localhost:8020/accumulo: 502  has_shared: true  shared with:  [2]\r\n  \r\n  Shared usage between tables:\r\n  310 [t1]\r\n  270 [t2, t3]\r\n  232 [t3]\r\n  ```\r\n#### A single table\r\n**Existing:**\r\n```\r\n root@uno t1> du t1\r\n                     310 [t1]\r\n```\r\n  **New:**\r\n```\r\nroot@uno t1> dumeta t1\r\nt1  1  used total: 310  hdfs://localhost:8020/accumulo: 310  has_shared: false\r\n```\r\n```\r\nroot@uno t1> dumeta t1 -v\r\nt1  1  used total: 310  hdfs://localhost:8020/accumulo: 310  has_shared: false\r\n\r\nShared usage between tables:\r\n310 [t1]\r\n```\r\nNote that in some cases my command can actually output more as it detects the shared table from the metadata even if only 1 table given. For example:\r\n\r\n#### A shared table\r\n**Existing:**\r\n```\r\nroot@uno> du t3\r\n                     502 [t3]\r\n```\r\n  **New:**\r\n```\r\nroot@uno> dumeta t3\r\nt3  3  used total: 502  hdfs://localhost:8020/accumulo: 502  has_shared: true  shared with:  [2]\r\n```\r\n```\r\nroot@uno> dumeta t3 -v\r\nt3  3  used total: 502  hdfs://localhost:8020/accumulo: 502  has_shared: true  shared with:  [2]\r\n\r\nShared usage between tables:\r\n270 [t2, t3]\r\n232 [t3]\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235418223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235471469","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235471469","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235471469,"node_id":"IC_kwDOACaFSM5Jo8xt","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T12:54:12Z","updated_at":"2022-09-02T12:54:29Z","author_association":"CONTRIBUTOR","body":"@ctubbsii what do you think of the special methods, `fail()` and `delete()` being called on a `FateTransaction`? These currently require the Manager to be down to free the lock, which I feel is a special circumstance. A user can easily get the `Set<FateTransaction>` while the Manager is running and call these methods. We could easily throw an error if the Manager is running but it seems like that could trip up users.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235471469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235669111","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235669111","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235669111,"node_id":"IC_kwDOACaFSM5JptB3","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T16:01:47Z","updated_at":"2022-09-02T16:01:47Z","author_association":"MEMBER","body":"The Manager is supposed to be off in order to prevent FaTE concurrency issues during a delicate manual failure-handling situation. If we're directly manipulating FaTE by executing these special methods, we're already in a \"special circumstance\". Manual manipulation is not a routine operation. I think it makes sense to continue to leave the requirement to have the Manager be down to prevent issues. That's the current requirement, and changing it could introduce a lot of unforeseen concurrency issues.\r\n\r\nOverall, I'm inclined to scrap the idea of adding a FaTE RPC and API so we can access it from the shell. That's the whole basis for these changes... and it's become bloated with all sorts of issues. The FateAdmin command functionality never should have been rolled into the shell to begin with. Instead, I think it should be merged with the more general purpose Admin command, like some of the other recent utilities, and removed from the shell. That will satisfy the initial issue we were trying to fix, which was removing the shell's dependency on SiteConfiguration. And, it has the advantage of not needing any of these proposed RPC/API changes, or changing anything about the requirements for online/offline servers. But, it does make it more accessible, alongside the other admin utilities for server-side maintenance.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235669111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235685953","html_url":"https://github.com/apache/accumulo/pull/2887#issuecomment-1235685953","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2887","id":1235685953,"node_id":"IC_kwDOACaFSM5JpxJB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T16:18:06Z","updated_at":"2022-09-02T16:18:06Z","author_association":"MEMBER","body":"Ideally, instead of explicitly printing, we should just make sure the exception gets thrown out of the main method... let the JVM do its own printing to STDERR, as this is the expected behavior.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235685953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235686797","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235686797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235686797,"node_id":"IC_kwDOACaFSM5JpxWN","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T16:18:50Z","updated_at":"2022-09-02T16:18:50Z","author_association":"CONTRIBUTOR","body":"> Overall, I'm inclined to scrap the idea of adding a FaTE RPC and API so we can access it from the shell. That's the whole basis for these changes... and it's become bloated with all sorts of issues. \r\n\r\nI have been tinkering with new FaTE RPCs for an API and I am starting to feel the same way. It doesn't really make sense to have the tablet server execute RPCs when we are just messing with ZK. And we can't have RPCs run in the manager that require it to be down. Also, FaTE is internal to the Manager and was never really meant to be exposed at such a high level.\r\n\r\n> I think it should be merged with the more general purpose Admin command.\r\n\r\nI like that idea. It looks like FateAdmin has been deprecated for a few versions. Do you think we could drop it for 2.1?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235686797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235693602","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235693602","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235693602,"node_id":"IC_kwDOACaFSM5JpzAi","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T16:25:42Z","updated_at":"2022-09-02T16:25:42Z","author_association":"MEMBER","body":"> I like that idea. It looks like FateAdmin has been deprecated for a few versions. Do you think we could drop it for 2.1?\r\n\r\nNo. We can drop it in 3, along with the fate stuff in the shell. But we should deprecate the fate stuff in the shell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235693602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235708505","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235708505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235708505,"node_id":"IC_kwDOACaFSM5Jp2pZ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T16:41:11Z","updated_at":"2022-09-02T16:41:11Z","author_association":"CONTRIBUTOR","body":"> But we should deprecate the fate stuff in the shell.\r\n\r\nWhat about the new cancel operation?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235708505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235792391","html_url":"https://github.com/apache/accumulo/pull/2913#issuecomment-1235792391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2913","id":1235792391,"node_id":"IC_kwDOACaFSM5JqLIH","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T18:26:18Z","updated_at":"2022-09-02T18:26:18Z","author_association":"CONTRIBUTOR","body":"This will be obsolete if #2914 is merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235792391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235793511","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235793511","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235793511,"node_id":"IC_kwDOACaFSM5JqLZn","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T18:27:50Z","updated_at":"2022-09-02T18:27:50Z","author_association":"CONTRIBUTOR","body":"I started work to move the new FateCommand options (cancel and summary) added in 2.1 to the Admin command in https://github.com/apache/accumulo/pull/2914","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235793511/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235936071","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1235936071","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1235936071,"node_id":"IC_kwDOACaFSM5JquNH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T22:19:54Z","updated_at":"2022-09-02T22:19:54Z","author_association":"MEMBER","body":"> > But we should deprecate the fate stuff in the shell.\r\n> \r\n> What about the new cancel operation?\r\n\r\nI seem to remember making the point when that was added, that FaTE wasn't really user-facing. It probably makes more sense to expose that as \"cancel scheduled compaction\" or cancelling some other scheduled operation. Perhaps a cancel flag can be added to the relevant tasks? Alternatively, just put the new cancel option in the Admin command with fail and delete, and roll back the changes made in the shell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235936071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235938552","html_url":"https://github.com/apache/accumulo/pull/2912#issuecomment-1235938552","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2912","id":1235938552,"node_id":"IC_kwDOACaFSM5Jquz4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T22:23:39Z","updated_at":"2022-09-02T22:23:39Z","author_association":"MEMBER","body":"I'll need to rebase this on the changes done in #2896 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235938552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235954025","html_url":"https://github.com/apache/accumulo/pull/2900#issuecomment-1235954025","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2900","id":1235954025,"node_id":"IC_kwDOACaFSM5Jqylp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T22:47:38Z","updated_at":"2022-09-02T22:47:38Z","author_association":"CONTRIBUTOR","body":"> The existing DU command works by computing the storage used exclusively by each table provided, as well as computing the storage used by any combination of tables.\r\n\r\nA bit of background. The du command was created when the ability to clone tables was added to Accumulo.  It was created to allow someone to know how much clones had diverged in terms of storage space.  \r\n\r\nAs far as using the estimates in the metadata table instead of going to hdfs, below is an example to be aware of that shows how the metadata table estimates behave over time.\r\n\r\n1. Table foo is created with tablet T1.\r\n2. A minor compaction creates a file F1 in T1 of size 100M.  This size is recorded in the metadata table.\r\n3. Running du on table foo using metadata table estimated sizes reports 100M.\r\n4. Tablet T1 splits into T2 and T3 both referencing file F1.  T2 has a guestimated size of 30M for F1 and T3 has a guestimated size of 70M for file F1.\r\n5. Running du on table foo using metadata table estimated sizes reports 100M.\r\n6. Tablet T3 compacts file F1 into file F2 resulting in a 10M file.\r\n7. Running du on table foo using metadata table estimated sizes reports 40M.  However the actual files (F1 and F2) referenced by the table use 110M.\r\n8. Tablet T2 compacts file F1 into file F3 resulting in a 33M file.\r\n9.  Running du on table foo using metadata table estimated sizes reports 43M.  This agrees with HDFS.\r\n\r\nThis example illustrates the fact that in Accumulo after a tablet splits that the sum of the estimates of the children is correct until one of the tablets compacts. After a single child of a split compacts, the sum of the estimated sizes is suspect.  After both tablets compact, the estimated sizes will be correct again.  Intuitively I feel like these estimate discrepancies across tablets will cancel each other out resulting in a sum that is still in the neighborhood.  Some of the estimates will be high and others will be low.  Not sure how to prove this yet, but using the metadata estimates seems good to me based on this intuition. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1235954025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1236082750","html_url":"https://github.com/apache/accumulo/pull/2912#issuecomment-1236082750","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2912","id":1236082750,"node_id":"IC_kwDOACaFSM5JrSA-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-03T09:26:37Z","updated_at":"2022-09-03T22:46:03Z","author_association":"CONTRIBUTOR","body":"The reason that the mutationCount/attemptNumber existed was because ScanAttemptsImpl used to use guava methods that filtered a concurrent hash map in place. If the map is being copied instead of filtered in place, I think mutationCount/attemptNumber could just be dropped.  \r\n\r\nI was trying to make multiple comments across the diff, but this just got too complicated for a small diff. So I copied the new changes and modified them in a text editor to illustrate what I was thinking. Below is an example of dropping mutationCount/attemptNumber.\r\n\r\n```\r\npublic class ScanAttemptsImpl {\r\n\r\n  private static final Logger LOG = LoggerFactory.getLogger(ScanAttemptsImpl.class);\r\n\r\n  static class ScanAttemptImpl implements ScanAttempt {\r\n\r\n    private final String server;\r\n    private final Result result;\r\n\r\n    private ScanAttemptImpl(Result result, String server) {\r\n      this.result = result;\r\n      this.server = Objects.requireNonNull(server);\r\n    }\r\n\r\n    @Override\r\n    public String getServer() {\r\n      return server;\r\n    }\r\n\r\n    @Override\r\n    public Result getResult() {\r\n      return result;\r\n    }\r\n  }\r\n\r\n  private final Map<TabletId,Collection<ScanAttemptImpl>> attempts = new HashMap<>();\r\n\r\n  public interface ScanAttemptReporter {\r\n    void report(ScanAttempt.Result result);\r\n  }\r\n\r\n  ScanAttemptReporter createReporter(String server, TabletId tablet) {\r\n    return result -> {\r\n      LOG.trace(\"Received result: {}\", result);\r\n      synchronized(ScanAttemptImpl.this){\r\n        attempts.computeIfAbsent(tablet, k -> new ArrayList<>())\r\n          .add(new ScanAttemptImpl(result, server));\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates and returns a snapshot of ScanAttempt objects that were added before this call\r\n   *\r\n   * @return a map of TabletId to a collection ScanAttempt objects associated with that TabletId\r\n   */\r\n  synchronized Map<TabletId,Collection<ScanAttemptImpl>> snapshot() {\r\n    //TODO If the map and collections created below are not immutable, then need to wrap w/ immutable. Snapshot should be immutable.\r\n    return attempts.entrySet().stream().map(sourceEntry ->\r\n      new SimpleEntry(sourceEntry.getKey(), List.copyOf(sourceEntry.getValue()))\r\n    ).collect(Collectors.toMap(Entry::getKey, Entry::getValue));\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1236082750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238345592","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238345592","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238345592,"node_id":"IC_kwDOACaFSM5Jz6d4","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T15:57:41Z","updated_at":"2022-09-06T15:57:41Z","author_association":"CONTRIBUTOR","body":"So, I agree that the [documentation](https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE) says `Flags that control intrinsics now require the option -XX:+UnlockDiagnosticVMOptions.` However, as shown in my comment [above](https://github.com/apache/accumulo/pull/2882#issuecomment-1216515401), supplying *only* the `-XX:+UnlockDiagnosticVMOptions` property does enable some intrinsics. I think the comments on this PR provide enough documentation on this issue. I'm fine if we close this without merging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238345592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238411710","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238411710","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238411710,"node_id":"IC_kwDOACaFSM5J0Km-","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T16:53:07Z","updated_at":"2022-09-06T16:53:07Z","author_association":"MEMBER","body":"> So, I agree that the [documentation](https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE) says `Flags that control intrinsics now require the option -XX:+UnlockDiagnosticVMOptions.` However, as shown in my comment [above](https://github.com/apache/accumulo/pull/2882#issuecomment-1216515401), supplying _only_ the `-XX:+UnlockDiagnosticVMOptions` property does enable some intrinsics. I think the comments on this PR provide enough documentation on this issue. I'm fine if we close this without merging.\r\n\r\nThat's not how I interpret the output you're seeing. I think all you've shown is that supplying only that option when printing the list of options allows the diagnostic options to show up in the printout. When you don't supply that option, none of the diagnostic options are included in the printout. When you do supply that option, it shows the current values of diagnostic options that you can control. I don't think you're actually enabling any options by setting the unlock flag... you're just revealing them. For the example you gave of `UseGHASHIntrinsics`, I think the default is `true`. So it's going to show up as enabled, when you include diagnostic options in the printout. But, it doesn't mean it's turned off when the flag is hidden... it just means you can't see it... because all diagnostic flags are suppressed from the printout unless you add the unlock flag.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238411710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238435353","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238435353","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238435353,"node_id":"IC_kwDOACaFSM5J0QYZ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T17:08:50Z","updated_at":"2022-09-06T17:08:50Z","author_association":"MEMBER","body":"Consider this:\r\n```\r\ndiff -u <(java -XX:+PrintFlagsFinal -version) <(java -XX:+PrintFlagsFinal -XX:+UnlockDiagnosticVMOptions -version)\r\n```\r\n\r\nThis appears to show a mix of options, defaulting to on and off. The extra ones with the unlock flag seems to just include the diagnostic options in the output.\r\n\r\nA related discussion can be seen at `https://github.com/trinodb/trino/issues/12253` and `https://github.com/trinodb/trino/pull/12251`. There, it is clearly suggested that the unlock flag is no longer needed, since the underlying diagnostic option defaults to the value they desire for performance. That would only make sense if the unlock flag is merely revealing the default values for these flags, and not actually altering them. It really wouldn't make sense that unlocking a set of options would alter their values.\r\n\r\nA similar user experience exists on Android phones for developer options, as well as Chrome browser flags for experimental options. It is a common thing to hide flags like these in a locked area. But, unlocking that area to change the flags doesn't actually change them from their defaults. It merely grants you access. It really seems like that's the same design here. Unless we can actually demonstrate that the unlock flag is enabling features, by actually measuring it, and not merely interpreting the printout, I'm inclined to think that is the same design here... and this flag isn't needed at all.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238435353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238451454","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238451454","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238451454,"node_id":"IC_kwDOACaFSM5J0UT-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T17:26:00Z","updated_at":"2022-09-06T17:26:00Z","author_association":"CONTRIBUTOR","body":"> For the example you gave of UseGHASHIntrinsics, I think the default is true. \r\n\r\nThe default is [false](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/hotspot/share/runtime/globals.hpp#L345). I believe it becomes `true` when the JVM is running on hardware that supports it or maybe when the source is compiled for a specific OS.\r\n\r\n> That's not how I interpret the output you're seeing. I think all you've shown is that supplying only that option when printing the list of options allows the diagnostic options to show up in the printout. When you don't supply that option, none of the diagnostic options are included in the printout. When you do supply that option, it shows the current values of diagnostic options that you can control.\r\n\r\nThat could be, I had not considered that.\r\n\r\n> Unless we can actually demonstrate that the unlock flag is enabling features, by actually measuring it, and not merely interpreting the printout, I'm inclined to think that is the same design here... and this flag isn't needed at all.\r\n\r\nI'm happy to concede that I still don't know how this works. You have supplied a sufficient counterpoint that I would have to go back and re-read everything on this topic. My initial [comment](https://github.com/apache/accumulo/pull/2882#issue-1339136794) indicates that merely providing this flag, the customer had a 10x increase in performance. Maybe there is more information that I was not told. Again, I'm fine with closing without merging.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238451454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238494502","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238494502","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238494502,"node_id":"IC_kwDOACaFSM5J0e0m","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T18:13:22Z","updated_at":"2022-09-06T18:13:22Z","author_association":"MEMBER","body":"> > For the example you gave of UseGHASHIntrinsics, I think the default is true.\r\n> \r\n> The default is [false](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/hotspot/share/runtime/globals.hpp#L345). I believe it becomes `true` when the JVM is running on hardware that supports it or maybe when the source is compiled for a specific OS.\r\n\r\nI have been trying to dig through the hotspot code to see if I can understand how the defaults are set. The globals file you link to and the values shown there don't match the default values output to my screen. So, I don't trust that those match the actual defaults for any particular installation.\r\n\r\nThe [description of the unlock flag](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/hotspot/share/runtime/globals.hpp#L272-L273) says that it just \"Enables normal processing of flags\". It doesn't mention anything about turning anything on or off... just how it processes other flags. I've been trying to confirm this in the OpenJDK source code, but I am having a hard time following that code. The closest I've come is finding:\r\n\r\n* [the check that ensures the diagnostic flag is set](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/hotspot/share/runtime/flags/jvmFlag.cpp#L347-L355) to prevent [diagnostic flags from being processed](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/hotspot/share/runtime/flags/jvmFlag.cpp#L367-L372) if it isn't\r\n* [the check that ensures the flag is unlocked](https://github.com/openjdk/jdk/blob/jdk-11%2B28/src/hotspot/share/runtime/flags/jvmFlag.cpp#L1498-L1501) to determine whether or not to print it\r\n\r\nI can't find any code related to altering flags when the unlock field is set... only command-line processing checks and print filtering.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238494502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238498933","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238498933","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238498933,"node_id":"IC_kwDOACaFSM5J0f51","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T18:17:38Z","updated_at":"2022-09-06T18:17:38Z","author_association":"MEMBER","body":"> I'm happy to concede that I still don't know how this works. You have supplied a sufficient counterpoint that I would have to go back and re-read everything on this topic. My initial [comment](https://github.com/apache/accumulo/pull/2882#issue-1339136794) indicates that merely providing this flag, the customer had a 10x increase in performance. Maybe there is more information that I was not told. Again, I'm fine with closing without merging.\r\n\r\nNot really sure I understand myself. It's not very well documented. If somebody is getting 10x increase in performance with this alone, I'd be very surprised. I'd be curious what java build they are using. I suspect there's more going on, and would not be surprised to find them setting an additional flag in conjunction with this... perhaps using one that defaults to false in an older version but is now true in newer versions of Java.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238498933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238531800","html_url":"https://github.com/apache/accumulo/issues/2886#issuecomment-1238531800","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2886","id":1238531800,"node_id":"IC_kwDOACaFSM5J0n7Y","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T18:53:32Z","updated_at":"2022-09-06T18:53:32Z","author_association":"MEMBER","body":"Is somebody working on this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238531800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238555219","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238555219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238555219,"node_id":"IC_kwDOACaFSM5J0tpT","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T19:16:54Z","updated_at":"2022-09-06T19:16:54Z","author_association":"CONTRIBUTOR","body":"> The globals file you link to and the values shown there don't match the default values output to my screen. So, I don't trust that those match the actual defaults for any particular installation.\r\n\r\nMy understanding is that during JVM startup an intrinsic may be enabled due to the machine architecture or presence of certain capabilities on the host. So, the value may default to `false` in the source code, but may be reported as `true` in `PrintFlagsFinal`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238555219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238689447","html_url":"https://github.com/apache/accumulo/pull/2912#issuecomment-1238689447","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2912","id":1238689447,"node_id":"IC_kwDOACaFSM5J1Oan","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T21:46:45Z","updated_at":"2022-09-06T21:46:45Z","author_association":"MEMBER","body":"Okay, thanks @keith-turner . I'll see about simplifying my PR based on what you said. Since we're doing copy anyway now, it's not necessary to have that. I would like to to modify what you have above to make the concurrency a bit more readable, though. Maybe it would make sense to just use some kind of concurrent list, rather than ArrayList and synchronizing on `ScanAttemptImpl.this`, which I find to be not very intuitive. Or just block accesses with an explicit lock/mutex object? I'll have to think about it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238689447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238697799","html_url":"https://github.com/apache/accumulo/pull/2882#issuecomment-1238697799","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2882","id":1238697799,"node_id":"IC_kwDOACaFSM5J1QdH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T22:02:35Z","updated_at":"2022-09-06T22:04:22Z","author_association":"MEMBER","body":"> My understanding is that during JVM startup an intrinsic may be enabled due to the machine architecture or presence of certain capabilities on the host. So, the value may default to `false` in the source code, but may be reported as `true` in `PrintFlagsFinal`.\r\n\r\nYeah, that was my understanding as well. The only \"default\" value we care about for this conversation (and the one I meant before we started linking to source :smiley_cat: ) is \"no flags specified\" default, not the \"hard-coded in source\" default. I'm just not sure how we can get that to prove how it works one way or another.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238697799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238730100","html_url":"https://github.com/apache/accumulo/issues/2886#issuecomment-1238730100","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2886","id":1238730100,"node_id":"IC_kwDOACaFSM5J1YV0","user":{"login":"Codegass","id":10063370,"node_id":"MDQ6VXNlcjEwMDYzMzcw","avatar_url":"https://avatars.githubusercontent.com/u/10063370?v=4","gravatar_id":"","url":"https://api.github.com/users/Codegass","html_url":"https://github.com/Codegass","followers_url":"https://api.github.com/users/Codegass/followers","following_url":"https://api.github.com/users/Codegass/following{/other_user}","gists_url":"https://api.github.com/users/Codegass/gists{/gist_id}","starred_url":"https://api.github.com/users/Codegass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Codegass/subscriptions","organizations_url":"https://api.github.com/users/Codegass/orgs","repos_url":"https://api.github.com/users/Codegass/repos","events_url":"https://api.github.com/users/Codegass/events{/privacy}","received_events_url":"https://api.github.com/users/Codegass/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T22:54:12Z","updated_at":"2022-09-12T17:55:29Z","author_association":"NONE","body":"Sorry about the delay, I was being busy for the last week, I will try to submit the PR in this week. Thanks a lot for the advice!\r\n\r\nSorry for didn't catch the time, and thank you so much for the pull request!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1238730100/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239157105","html_url":"https://github.com/apache/accumulo/pull/2912#issuecomment-1239157105","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2912","id":1239157105,"node_id":"IC_kwDOACaFSM5J3Alx","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T09:42:12Z","updated_at":"2022-09-07T09:42:12Z","author_association":"CONTRIBUTOR","body":"> Maybe it would make sense to just use some kind of concurrent list\r\n\r\nIf the data structure is only accessed in a synchronization block then I would recommend avoiding concurrent data structs.  The concurrent data structs use lots of volatile pointers and therefore can not utilize processor cache as well.  That is why I used hash map and array list.\r\n\r\n> rather than ArrayList and synchronizing on ScanAttemptImpl.this, which I find to be not very intuitive. Or just block accesses with an explicit lock/mutex object?\r\n\r\nThe two synchronized blocks could sync on `attempts`.  Its a final hash map, so should be safe to sync on... this would avoid the sync on `ScanAttemptImpl.this`.  I think that would make the code easier to follow.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239157105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239258826","html_url":"https://github.com/apache/accumulo/pull/2780#issuecomment-1239258826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2780","id":1239258826,"node_id":"IC_kwDOACaFSM5J3ZbK","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T11:20:37Z","updated_at":"2022-09-07T11:20:37Z","author_association":"CONTRIBUTOR","body":"Operators are familiar with the current shell fate operations and may be using them more that expected.  I'm not opposed to moving it to the admin command, but the same functionality  should be preserved.  It would also be nice if the shell could print a message that points to the moved command and at least a hint on how to execute it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239258826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239260751","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1239260751","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1239260751,"node_id":"IC_kwDOACaFSM5J3Z5P","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T11:22:24Z","updated_at":"2022-09-07T11:22:24Z","author_association":"CONTRIBUTOR","body":"Operators are familiar with the current shell fate operations and may be using them more that expected. I'm not opposed to moving it to the admin command, but the same functionality should be preserved. It would also be nice if the shell could print a message that points to the moved command and at least a hint on how to execute it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239260751/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239301247","html_url":"https://github.com/apache/accumulo/pull/2799#issuecomment-1239301247","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2799","id":1239301247,"node_id":"IC_kwDOACaFSM5J3jx_","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T12:05:16Z","updated_at":"2022-09-07T12:05:16Z","author_association":"CONTRIBUTOR","body":"> I took @keith-turner's suggestion and went ahead and updated the modifyProperties() methods to retry on concurrent modification exceptions up to 5 times before giving up and propagating the exception back to the caller of the method. \r\n\r\n@cshannon  where in the code does it retry 5 times? I looked around for this and did not see it.  A lot of things in Accumulo retry forever unless explicitly given a timeout.  I think retrying 5 times is hard to reason about for a user, especially someone who just wants to props to be set and are not too concerned w/ how long it takes.  They would have to write the code to retry and it would probably not be as optimal as if Accumulo was retrying (like a user could not optimally implement exponential back-off on top of code that does some sort of retrying on its own).\r\n\r\n\r\n> I reverted the changes Emily did to the Config command. It doesn't really make sense to try and mutate multiple properties at once with a command since it would blow stuff away. If we do want to have a command I would think we would need an entirely new command (not mess with the current one) and that is probably best with a follow on PR. Maybe we just have a way to script or upload a set of properties.\r\n\r\nI think it does make sense to update the shell command in a separate PR. It would be good to attempt that before any release that has this new API as a it will help validate the new API.  We could possibly update the shell command to support a conditional update with this new API.  Something like update props p1=v11,p2=v21, etc only if the current props are p1=v1 and p2=v2.  This would allow a user to do the following.\r\n\r\n * print the current props\r\n * create a command that updates props only if those props have the values they saw when they printed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239301247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239362915","html_url":"https://github.com/apache/accumulo/pull/2799#issuecomment-1239362915","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2799","id":1239362915,"node_id":"IC_kwDOACaFSM5J3y1j","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T13:04:30Z","updated_at":"2022-09-07T13:04:30Z","author_association":"CONTRIBUTOR","body":"Regarding @keith-turner suggestion - depending on where / how that is implemented the data version of the properties can be used to tell if the  property node has changed. It may not be necessary to actually compare values.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239362915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239372471","html_url":"https://github.com/apache/accumulo/pull/2799#issuecomment-1239372471","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2799","id":1239372471,"node_id":"IC_kwDOACaFSM5J31K3","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T13:12:45Z","updated_at":"2022-09-07T13:12:45Z","author_association":"CONTRIBUTOR","body":"@keith-turner - The retry was removed as it was discussed and determined to not be necessary or wanted and should just fail instead. I forget when but I believe it was an offline conversation with @ctubbsii and others.\r\n\r\nA separate PR to update the shell would be a good idea if we want to do that to keep the scope of this PR smaller as it's already a decent sized change. I could add that as a follow on once his is merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239372471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239519937","html_url":"https://github.com/apache/accumulo/pull/2799#issuecomment-1239519937","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2799","id":1239519937,"node_id":"IC_kwDOACaFSM5J4ZLB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T15:10:24Z","updated_at":"2022-09-07T15:52:44Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I think I misread your comment initially as I was thinking you meant to do the PR after this PR is merged (but before releasing 2.1) but I think you meant to go ahead and do the shell changes first. I can take a look at updating the command later this week or next week to enhance it to help validate this PR. I would need to do some experimenting with it and see how it looks from a user feel perspective. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239519937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239524324","html_url":"https://github.com/apache/accumulo/pull/2900#issuecomment-1239524324","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2900","id":1239524324,"node_id":"IC_kwDOACaFSM5J4aPk","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T15:14:05Z","updated_at":"2022-09-07T15:14:05Z","author_association":"CONTRIBUTOR","body":"@keith-turner - Thanks so much for that detailed explanation and example of how things could be an estimate. I had mostly been looking at bulk imports and hadn't gotten as far to see how the values could be an estimate with compactions. It seems that the values will be eventually correct (at least in this example) so that is good but there is a period of time when it would be not the same as the file system. So I guess the main question to answer is whether or not everyone agrees that the estimate is acceptable or not.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239524324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239536746","html_url":"https://github.com/apache/accumulo/pull/2915#issuecomment-1239536746","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2915","id":1239536746,"node_id":"IC_kwDOACaFSM5J4dRq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T15:24:10Z","updated_at":"2022-09-07T15:24:10Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo - Here's that test class you asked to pull into a PR, if it looks good I guess you can go ahead and merge it and i'll merge main back into my other PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239536746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239742052","html_url":"https://github.com/apache/accumulo/pull/2799#issuecomment-1239742052","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2799","id":1239742052,"node_id":"IC_kwDOACaFSM5J5PZk","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T18:38:34Z","updated_at":"2022-09-07T18:39:15Z","author_association":"CONTRIBUTOR","body":">Regarding @keith-turner suggestion - depending on where / how that is implemented the data version of the properties can be used to tell if the property node has changed. It may not be necessary to actually compare values. \r\n\r\nI suggested comparing values thinking the data version was not available through the public API.  But could still compare values through the public api.  Also the suggestion for the shell was just a WAG about how it should be done. Not exactly sure how the shell command should look.  My main point was that its really good to use a new API before releasing it.\r\n\r\n> I think I misread your comment initially as I was thinking you meant to do the PR after this PR is merged (but before releasing 2.1) but I think you meant to go ahead and do the shell changes first.\r\n\r\nI wasn't thinking it needed to be done before merging this PR, just before release like you were initially thinking.  One way we have handled a situation like this in the past is to create a new issue that is a blocker before merging this.\r\n\r\n> @keith-turner - The retry was removed as it was discussed and determined to not be necessary or wanted and should just fail instead. I forget when but I believe it was an offline conversation with @ctubbsii and others.\r\n\r\nI think building in retry behavior is nice for the following reasons.\r\n\r\n * The concurrent modification exception (CME) is spurious and therefore hard for a user to test.  User would most likely only see it in a production system, not a test system.\r\n * I suspect every user who uses the API would just want it to set the props even if there was CME (its a spurious condition that has nothing to do with the data). So that means each user who uses the API will have to rewrite some sort of retry code (retry code that is hard for them to test).\r\n * If we build in the functionality then we can test it and write a more complex retry strategy like exponential back off that will not retry forever even when there is lot of concurrency.  We can do the hard part instead of pushing that off on every user of the API.\r\n\r\nHowever I don't think implementing retry should hold up this PR. I think it would be fine to do that as a follow on if there is no opposition to it.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239742052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239769476","html_url":"https://github.com/apache/accumulo/pull/2917#issuecomment-1239769476","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2917","id":1239769476,"node_id":"IC_kwDOACaFSM5J5WGE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T19:04:44Z","updated_at":"2022-09-07T19:04:44Z","author_association":"CONTRIBUTOR","body":"@EdColeman  - wanted to get your feedback on this before I spend time writing a test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239769476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239804776","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1239804776","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1239804776,"node_id":"IC_kwDOACaFSM5J5eto","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T19:48:34Z","updated_at":"2022-09-07T19:48:34Z","author_association":"CONTRIBUTOR","body":"@EdColeman while moving the test testSummary() from FateCommandTest, I noticed that it is calling the overridden method in TestFateCommand class. Was that the intention? That class was really only created for testCommandLineOptions(). ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1239804776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1240005527","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1240005527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1240005527,"node_id":"IC_kwDOACaFSM5J6PuX","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T23:10:23Z","updated_at":"2022-09-07T23:10:23Z","author_association":"CONTRIBUTOR","body":"I guess I used it because it was available and used it when testing the command line  - it looks like without it there is a missing config issue that would need to be resolved it it is not to be used.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1240005527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1240564893","html_url":"https://github.com/apache/accumulo/pull/2917#issuecomment-1240564893","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2917","id":1240564893,"node_id":"IC_kwDOACaFSM5J8YSd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T11:04:29Z","updated_at":"2022-09-08T11:04:29Z","author_association":"CONTRIBUTOR","body":"> It required using the ZooKeeper \"super-user\" technique to modify the node's ACLs.\r\n\r\nI think I glossed over that in the issue description. Given that it takes a restart of ZK to set that property, then I agree that this likely won't work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1240564893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1240987208","html_url":"https://github.com/apache/accumulo/pull/2919#issuecomment-1240987208","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2919","id":1240987208,"node_id":"IC_kwDOACaFSM5J9_ZI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T17:07:11Z","updated_at":"2022-09-08T17:07:11Z","author_association":"CONTRIBUTOR","body":"> It may also be desirable to check all paths, keeping a list of any nodes that are incorrect and then failing if the list size is > 0 and providing the complete list. That way they may be able to correct things once and the re-try the upgrade instead of needing to \"find\" each node individually.\r\n\r\nThat's what should happen. It should log all of them, then throw the exception at the end after the visit method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1240987208/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1241108671","html_url":"https://github.com/apache/accumulo/pull/2920#issuecomment-1241108671","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2920","id":1241108671,"node_id":"IC_kwDOACaFSM5J-dC_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T18:59:12Z","updated_at":"2022-09-08T18:59:12Z","author_association":"CONTRIBUTOR","body":"Kicked off full IT build","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1241108671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1241829665","html_url":"https://github.com/apache/accumulo/pull/2920#issuecomment-1241829665","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2920","id":1241829665,"node_id":"IC_kwDOACaFSM5KBNEh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T11:02:44Z","updated_at":"2022-09-09T11:02:44Z","author_association":"CONTRIBUTOR","body":"Full IT build passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1241829665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242052395","html_url":"https://github.com/apache/accumulo/pull/2922#issuecomment-1242052395","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2922","id":1242052395,"node_id":"IC_kwDOACaFSM5KCDcr","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T14:33:54Z","updated_at":"2022-09-09T14:33:54Z","author_association":"CONTRIBUTOR","body":"Kicked off fuill IT build","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242052395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242385736","html_url":"https://github.com/apache/accumulo/pull/2922#issuecomment-1242385736","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2922","id":1242385736,"node_id":"IC_kwDOACaFSM5KDU1I","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T19:34:59Z","updated_at":"2022-09-09T19:34:59Z","author_association":"CONTRIBUTOR","body":"Full IT build successful","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242385736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242505652","html_url":"https://github.com/apache/accumulo/issues/2821#issuecomment-1242505652","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2821","id":1242505652,"node_id":"IC_kwDOACaFSM5KDyG0","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T21:46:08Z","updated_at":"2022-09-09T21:46:08Z","author_association":"CONTRIBUTOR","body":"@EdColeman - this issue can probably be closed as handling concurrent updates are being done in the original issue in #2799 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242505652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242547649","html_url":"https://github.com/apache/accumulo/pull/2900#issuecomment-1242547649","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2900","id":1242547649,"node_id":"IC_kwDOACaFSM5KD8XB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T23:11:15Z","updated_at":"2022-09-09T23:11:15Z","author_association":"CONTRIBUTOR","body":"@milleruntime, @EdColeman  and @ctubbsii - I pushed an update, let me know what you think. It updates the documentation to make it clear that the results are an estimate. The commit also deprecates the old way of computing disk usage with HDFS and updates the \"du\" command to just use the metadata scan. Lastly I fixed up some of the tests for the Shell as the output has been changed based on suggestions from @EdColeman . You can see the old output with the `-v` flag for shared usage.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1242547649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245281678","html_url":"https://github.com/apache/accumulo/pull/2778#issuecomment-1245281678","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2778","id":1245281678,"node_id":"IC_kwDOACaFSM5KOX2O","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T11:33:53Z","updated_at":"2022-09-13T11:33:53Z","author_association":"CONTRIBUTOR","body":"@EdColeman  - 2 approvals, can we merge this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245281678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245283468","html_url":"https://github.com/apache/accumulo/pull/2898#issuecomment-1245283468","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2898","id":1245283468,"node_id":"IC_kwDOACaFSM5KOYSM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T11:35:25Z","updated_at":"2022-09-13T11:35:25Z","author_association":"CONTRIBUTOR","body":"@cfkoehler  - any thoughts on the points/questions raised above?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245283468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245867809","html_url":"https://github.com/apache/accumulo/pull/2928#issuecomment-1245867809","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2928","id":1245867809,"node_id":"IC_kwDOACaFSM5KQm8h","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T19:32:40Z","updated_at":"2022-09-13T19:32:40Z","author_association":"MEMBER","body":"> I'm all in favor of simplicity of user new API methods. I have no issue with what you did here, I was just curious if there was a reason you couldn't do the same thing.\r\n\r\nin 17c37e7 I opted to use `Map.of()` in the places mentioned. @dlmarion, Thanks for the review, I'll merge this in once the checks pass.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245867809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245881953","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1245881953","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1245881953,"node_id":"IC_kwDOACaFSM5KQqZh","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T19:47:18Z","updated_at":"2022-09-13T19:47:18Z","author_association":"CONTRIBUTOR","body":"I want to do more testing with the new commands but this PR is ready for review. I had to make some changes with the commands being moved out of the shell, mainly dropping the FateCommand unit tests and the pagination option, but it was things that didn't translate over to the Admin command.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245881953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245890535","html_url":"https://github.com/apache/accumulo/pull/2913#issuecomment-1245890535","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2913","id":1245890535,"node_id":"IC_kwDOACaFSM5KQsfn","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T19:56:33Z","updated_at":"2022-09-13T19:56:33Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #2914 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1245890535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246665001","html_url":"https://github.com/apache/accumulo/pull/2792#issuecomment-1246665001","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2792","id":1246665001,"node_id":"IC_kwDOACaFSM5KTpkp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T12:05:13Z","updated_at":"2022-09-14T12:09:10Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I implemented your changes. I kind of expected a test failure, but that didn't happen.\r\n\r\nUpdate: I found that I had to make a similar change in GarbageCollectionTest, now it fails....","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246665001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246898102","html_url":"https://github.com/apache/accumulo/pull/2792#issuecomment-1246898102","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2792","id":1246898102,"node_id":"IC_kwDOACaFSM5KUie2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T14:58:32Z","updated_at":"2022-09-14T14:58:32Z","author_association":"CONTRIBUTOR","body":"@dlmarion  I made some updatesto the test  in this commit keith-turner/accumulo@78cf05d9af90bb7ba218a17cda6755df80127702 to use DataLevel and to not have to add the metadata refs","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246898102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246968747","html_url":"https://github.com/apache/accumulo/pull/2925#issuecomment-1246968747","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2925","id":1246968747,"node_id":"IC_kwDOACaFSM5KUzur","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T15:49:38Z","updated_at":"2022-09-14T15:49:38Z","author_association":"CONTRIBUTOR","body":"@milleruntime - Any thoughts on this before merging since you looked at the others?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246968747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246987454","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1246987454","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1246987454,"node_id":"IC_kwDOACaFSM5KU4S-","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T16:04:51Z","updated_at":"2022-09-14T16:04:51Z","author_association":"CONTRIBUTOR","body":"The newlines in the FateSummaryReport were specifically included to visually break up the sections to make it easier for an operator to visually scan and pull out relevant information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246987454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246990161","html_url":"https://github.com/apache/accumulo/pull/2925#issuecomment-1246990161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2925","id":1246990161,"node_id":"IC_kwDOACaFSM5KU49R","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T16:07:00Z","updated_at":"2022-09-14T16:07:00Z","author_association":"CONTRIBUTOR","body":"This looks good but #2914 is a priority and they both touch Admin.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1246990161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247001403","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1247001403","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1247001403,"node_id":"IC_kwDOACaFSM5KU7s7","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T16:15:14Z","updated_at":"2022-09-14T16:15:14Z","author_association":"CONTRIBUTOR","body":"> The newlines in the FateSummaryReport were specifically included to visually break up the sections to make it easier for an operator to visually scan and pull out relevant information.\r\n\r\nRight. There were too many line breaks when it gets called and printed to standard out. I think the extra spaces for indents helps break up the sections fine. Here is what gets printed from Admin:\r\n<pre>\r\nReport Time: 2022-09-14T16:12:00Z\r\nStatus counts:\r\n  IN_PROGRESS: 2\r\nCommand counts:\r\n  TABLE_COMPACT: 2\r\nStep counts:\r\n  CompactionDriver: 2\r\nFate transactions (oldest first):\r\nStatus Filters: [NONE]\r\nRunning\ttxn_id\t\t\t\tStatus\t\tCommand\t\tStep (top)\t\tlocks held:(table id, name)\tlocks waiting:(table id, name)\r\n0:00:16\t70bdabd00c24a451\tIN_PROGRESS\tTABLE_COMPACT\tCompactionDriver\theld:[R:(+default,ns:), R:(1,t:ci)]\twaiting:[]\r\n0:00:07\t5de86f2aefb1b8b6\tIN_PROGRESS\tTABLE_COMPACT\tCompactionDriver\theld:[R:(+default,ns:), R:(1,t:ci)]\twaiting:[]\r\n</pre>\r\nI could add blank lines between sections. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247001403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247029109","html_url":"https://github.com/apache/accumulo/pull/2792#issuecomment-1247029109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2792","id":1247029109,"node_id":"IC_kwDOACaFSM5KVCd1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T16:37:28Z","updated_at":"2022-09-14T16:37:28Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I like it. Can you create a PR against my branch and I will merge it in?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247029109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247044628","html_url":"https://github.com/apache/accumulo/pull/2792#issuecomment-1247044628","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2792","id":1247044628,"node_id":"IC_kwDOACaFSM5KVGQU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T16:50:46Z","updated_at":"2022-09-14T16:50:46Z","author_association":"CONTRIBUTOR","body":"Nevermind, I grabbed the [diff](https://github.com/keith-turner/accumulo/commit/78cf05d9af90bb7ba218a17cda6755df80127702.diff) and applied manually\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247044628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247298369","html_url":"https://github.com/apache/accumulo/issues/2929#issuecomment-1247298369","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2929","id":1247298369,"node_id":"IC_kwDOACaFSM5KWENB","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T21:02:08Z","updated_at":"2022-09-14T21:02:08Z","author_association":"MEMBER","body":"How often does this fail for you? Does it only fail when running `Psunny` or also when you run the test on its own?\r\n\r\nI think I have seen this one fail before as well, but can't reproduce the failure at the moment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247298369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247305846","html_url":"https://github.com/apache/accumulo/issues/2929#issuecomment-1247305846","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2929","id":1247305846,"node_id":"IC_kwDOACaFSM5KWGB2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T21:10:13Z","updated_at":"2022-09-14T21:10:13Z","author_association":"CONTRIBUTOR","body":"I saw it in the output of one of the most recent CI builds, then I saw it just before writing this ticket. I'm running `sunny` again right now to see if it fails again and to check the logs. I was thinking that maybe it was a ZK sync issue, but this test is configured to run 1 tserver with a comment for that exact issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247305846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247318379","html_url":"https://github.com/apache/accumulo/issues/2929#issuecomment-1247318379","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2929","id":1247318379,"node_id":"IC_kwDOACaFSM5KWJFr","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T21:25:15Z","updated_at":"2022-09-14T21:25:15Z","author_association":"CONTRIBUTOR","body":"Failed again, same place. The test sets the `table.split.threshold` property to `345M`, which calls `TableOperationsImpl.setProperty`, which sets the property via the `Manager`. Then it calls `TableOperationsImpl.exportTable`, which starts a FaTE operation in the Manager. I looked at the `table_config.txt` file in the export metadata zipfile and the `table.split.threshold` property is not in there. Seems like there might be a sync issue in the Manager....","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247318379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247994005","html_url":"https://github.com/apache/accumulo/issues/2929#issuecomment-1247994005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2929","id":1247994005,"node_id":"IC_kwDOACaFSM5KYuCV","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T11:47:14Z","updated_at":"2022-09-15T11:47:14Z","author_association":"CONTRIBUTOR","body":"Merged https://github.com/apache/accumulo/pull/2778 - which may help","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1247994005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248028328","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1248028328","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1248028328,"node_id":"IC_kwDOACaFSM5KY2ao","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T12:22:09Z","updated_at":"2022-09-15T12:22:09Z","author_association":"CONTRIBUTOR","body":"There is a section in the docs (fate.md) that will need to be updated when these changes are merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248028328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248072410","html_url":"https://github.com/apache/accumulo/issues/2929#issuecomment-1248072410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2929","id":1248072410,"node_id":"IC_kwDOACaFSM5KZBLa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T13:02:52Z","updated_at":"2022-09-15T13:02:52Z","author_association":"CONTRIBUTOR","body":"I think this fixed it. `sunny` got past ShellServerIT twice locally and was failing before this commit. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248072410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248089644","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1248089644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1248089644,"node_id":"IC_kwDOACaFSM5KZFYs","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T13:17:37Z","updated_at":"2022-09-15T13:17:37Z","author_association":"CONTRIBUTOR","body":"I am not sure that we should have two versions of the same command that use separate options in this release.  The current command should be deprecated, but could still support the additions made in 2.1. \r\n\r\nHaving the new options available in the deprecated version seems like it could easy discovery of the new options and serve as a transition.  If someone is using the \"deprecated\" version - they would see the warning, but they may not realize that there are new options available - I guess that adding to the deprecation warning message that new options are available on in the admin version could help - even better would be if the deprecated version help listed the new options as \"unavailable\" - but it may be easier just to keep the two versions in sync until the deprecated version is removed.\r\n\r\nAs far as the removing line breaks in the summary - I feel they increase readability, but that is a personal preference and can live with it either way.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248089644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248103420","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1248103420","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1248103420,"node_id":"IC_kwDOACaFSM5KZIv8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T13:28:53Z","updated_at":"2022-09-15T13:28:53Z","author_association":"CONTRIBUTOR","body":"> I am not sure that we should have two versions of the same command that use separate options in this release.  The current command should be deprecated, but could still support the additions made in 2.1.\r\n\r\nI could just close this for 2.1. Where do you suggest to move the functionality then? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248103420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248160204","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1248160204","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1248160204,"node_id":"IC_kwDOACaFSM5KZWnM","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T14:12:51Z","updated_at":"2022-09-15T14:12:51Z","author_association":"CONTRIBUTOR","body":"> I am not sure that we should have two versions of the same command that use separate options in this release. The current command should be deprecated, but could still support the additions made in 2.1.\r\n> \r\n> Having the new options available in the deprecated version seems like it could easy discovery of the new options and serve as a transition. If someone is using the \"deprecated\" version - they would see the warning, but they may not realize that there are new options available - I guess that adding to the deprecation warning message that new options are available on in the admin version could help - even better would be if the deprecated version help listed the new options as \"unavailable\" - but it may be easier just to keep the two versions in sync until the deprecated version is removed.\r\n\r\nI think you are right that it will be confusing to split the command up between the shell and the admin command. I think it will be better to just deprecate the command here and then move it completely to Admin in the next version.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248160204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248236900","html_url":"https://github.com/apache/accumulo/pull/2197#issuecomment-1248236900","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2197","id":1248236900,"node_id":"IC_kwDOACaFSM5KZpVk","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T15:08:36Z","updated_at":"2022-09-15T15:08:36Z","author_association":"CONTRIBUTOR","body":"I am going to merge this PR so we can do follow up tasks and more testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248236900/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248357076","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1248357076","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1248357076,"node_id":"IC_kwDOACaFSM5KaGrU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T16:46:29Z","updated_at":"2022-09-15T16:46:29Z","author_association":"MEMBER","body":"> I think you are right that it will be confusing to split the command up between the shell and the admin command. I think it will be better to just deprecate the command here and then move it completely to Admin in the next version.\r\n\r\nI'm not sure I understand this statement. Are you proposing for it to be deprecated without a replacement in 2.1, and then in 3.0 to move it to the Admin command?\r\n\r\nI would prefer it exist in the Admin command at the time we deprecate it (which I prefer in 2.1, so we can remove it in 3.0). I do not care, though, if the new options are available or not in the deprecated shell version.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248357076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248362935","html_url":"https://github.com/apache/accumulo/pull/2925#issuecomment-1248362935","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2925","id":1248362935,"node_id":"IC_kwDOACaFSM5KaIG3","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T16:51:39Z","updated_at":"2022-09-15T16:51:39Z","author_association":"MEMBER","body":"> Found another utility that can be moved to the accumulo admin command. This utility cleans all old instances out of Zookeeper (except the current one). It's a bit different than the DeleteZooInstance command as that command allows deleting a single instance that is specified so it's worth having both.\r\n\r\nI'm not sure it's worth having both. The delete one could just have a flag to delete all non-current ones.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248362935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248390006","html_url":"https://github.com/apache/accumulo/issues/2930#issuecomment-1248390006","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2930","id":1248390006,"node_id":"IC_kwDOACaFSM5KaOt2","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T17:18:53Z","updated_at":"2022-09-15T17:18:53Z","author_association":"CONTRIBUTOR","body":"I am currently working on the first task on this list, \"Create an option for wal-info to just print encryption headers\".","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248390006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248394580","html_url":"https://github.com/apache/accumulo/pull/2914#issuecomment-1248394580","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2914","id":1248394580,"node_id":"IC_kwDOACaFSM5KaP1U","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T17:23:50Z","updated_at":"2022-09-15T17:23:50Z","author_association":"CONTRIBUTOR","body":"> > I think you are right that it will be confusing to split the command up between the shell and the admin command. I think it will be better to just deprecate the command here and then move it completely to Admin in the next version.\r\n> \r\n> I'm not sure I understand this statement. Are you proposing for it to be deprecated without a replacement in 2.1, and then in 3.0 to move it to the Admin command?\r\n\r\nYes.\r\n \r\n> I would prefer it exist in the Admin command at the time we deprecate it (which I prefer in 2.1, so we can remove it in 3.0). I do not care, though, if the new options are available or not in the deprecated shell version.\r\n\r\nWhat do you prefer exists in the Admin command? The entire fate command?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1248394580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]