[{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1297748272","html_url":"https://github.com/apache/ratis/pull/772#issuecomment-1297748272","issue_url":"https://api.github.com/repos/apache/ratis/issues/772","id":1297748272,"node_id":"IC_kwDOBMxbGc5NWhEw","user":{"login":"cnauroth","id":227407,"node_id":"MDQ6VXNlcjIyNzQwNw==","avatar_url":"https://avatars.githubusercontent.com/u/227407?v=4","gravatar_id":"","url":"https://api.github.com/users/cnauroth","html_url":"https://github.com/cnauroth","followers_url":"https://api.github.com/users/cnauroth/followers","following_url":"https://api.github.com/users/cnauroth/following{/other_user}","gists_url":"https://api.github.com/users/cnauroth/gists{/gist_id}","starred_url":"https://api.github.com/users/cnauroth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cnauroth/subscriptions","organizations_url":"https://api.github.com/users/cnauroth/orgs","repos_url":"https://api.github.com/users/cnauroth/repos","events_url":"https://api.github.com/users/cnauroth/events{/privacy}","received_events_url":"https://api.github.com/users/cnauroth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-31T22:09:21Z","updated_at":"2022-10-31T22:09:21Z","author_association":"CONTRIBUTOR","body":"Thank you, @adoroszlai and @szetszwo !","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1297748272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1297894493","html_url":"https://github.com/apache/ratis/pull/771#issuecomment-1297894493","issue_url":"https://api.github.com/repos/apache/ratis/issues/771","id":1297894493,"node_id":"IC_kwDOBMxbGc5NXExd","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-01T01:32:55Z","updated_at":"2022-11-01T01:33:29Z","author_association":"MEMBER","body":"@szetszwo The method `testFollowerLinearizableReadRetryWhenLeaderDown` seems always fail. The error stack is complicated and I found `Caused by: java.io.NotSerializableException: org.apache.ratis.protocol.RaftGroupMemberId`. I suspect that the LeaderNotException returned here [1] contains the RaftGroupMemberId that cannot be serialized. Should we implement `Serializable` for `RaftGroupMemberId`?\r\n[1] https://github.com/apache/ratis/blob/903cd17c0b0615bfec80afeac796354b9d99a1fd/ratis-server/src/main/java/org/apache/ratis/server/impl/LeaderStateImpl.java#L1094","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1297894493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1297983587","html_url":"https://github.com/apache/ratis/pull/771#issuecomment-1297983587","issue_url":"https://api.github.com/repos/apache/ratis/issues/771","id":1297983587,"node_id":"IC_kwDOBMxbGc5NXahj","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-01T03:42:28Z","updated_at":"2022-11-01T03:43:31Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for checking.\r\n\r\nLet's use `RaftGroupMemberIdProto` in LeaderNotReadyException as shown below.  Protos are `Serializable`.\r\n\r\n```java\r\ndiff --git a/ratis-client/src/main/java/org/apache/ratis/client/impl/ClientProtoUtils.java b/ratis-client/src/main/java/org/apache/ratis/client/impl/ClientProtoUtils.java\r\nindex bb7d2516..b3baabf9 100644\r\n--- a/ratis-client/src/main/java/org/apache/ratis/client/impl/ClientProtoUtils.java\r\n+++ b/ratis-client/src/main/java/org/apache/ratis/client/impl/ClientProtoUtils.java\r\n@@ -324,12 +324,9 @@ public interface ClientProtoUtils {\r\n         b.setNotReplicatedException(nreBuilder);\r\n       }\r\n \r\n-      final LeaderNotReadyException lnre = reply.getLeaderNotReadyException();\r\n-      if (lnre != null) {\r\n-        LeaderNotReadyExceptionProto.Builder lnreBuilder = LeaderNotReadyExceptionProto.newBuilder()\r\n-            .setServerId(ProtoUtils.toRaftGroupMemberIdProtoBuilder(lnre.getServerId()));\r\n-        b.setLeaderNotReadyException(lnreBuilder);\r\n-      }\r\n+      Optional.ofNullable(reply.getLeaderNotReadyException())\r\n+          .map(e -> LeaderNotReadyExceptionProto.newBuilder().setServerId(e.getRaftGroupMemberIdProto()))\r\n+          .ifPresent(b::setLeaderNotReadyException);\r\n \r\n       Optional.ofNullable(reply.getStateMachineException())\r\n           .map(ClientProtoUtils::toStateMachineExceptionProtoBuilder)\r\ndiff --git a/ratis-common/src/main/java/org/apache/ratis/protocol/exceptions/LeaderNotReadyException.java b/ratis-common/src/main/java/org/apache/ratis/protocol/exceptions/LeaderNotReadyException.java\r\nindex d441a8dd..fca3c5a7 100644\r\n--- a/ratis-common/src/main/java/org/apache/ratis/protocol/exceptions/LeaderNotReadyException.java\r\n+++ b/ratis-common/src/main/java/org/apache/ratis/protocol/exceptions/LeaderNotReadyException.java\r\n@@ -17,7 +17,9 @@\r\n  */\r\n package org.apache.ratis.protocol.exceptions;\r\n \r\n+import org.apache.ratis.proto.RaftProtos.RaftGroupMemberIdProto;\r\n import org.apache.ratis.protocol.RaftGroupMemberId;\r\n+import org.apache.ratis.util.ProtoUtils;\r\n \r\n /**\r\n  * This exception is sent from the server to a client. The server has just\r\n@@ -26,14 +28,18 @@ import org.apache.ratis.protocol.RaftGroupMemberId;\r\n  * it cannot determine whether a request is just a retry.\r\n  */\r\n public class LeaderNotReadyException extends ServerNotReadyException {\r\n-  private final RaftGroupMemberId serverId;\r\n+  private final RaftGroupMemberIdProto serverId;\r\n \r\n   public LeaderNotReadyException(RaftGroupMemberId id) {\r\n     super(id + \" is in LEADER state but not ready yet.\");\r\n-    this.serverId = id;\r\n+    this.serverId = ProtoUtils.toRaftGroupMemberIdProtoBuilder(id).build();\r\n   }\r\n \r\n   public RaftGroupMemberId getServerId() {\r\n+    return ProtoUtils.toRaftGroupMemberId(serverId);\r\n+  }\r\n+\r\n+  public RaftGroupMemberIdProto getRaftGroupMemberIdProto() {\r\n     return serverId;\r\n   }\r\n }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1297983587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1298007623","html_url":"https://github.com/apache/ratis/pull/771#issuecomment-1298007623","issue_url":"https://api.github.com/repos/apache/ratis/issues/771","id":1298007623,"node_id":"IC_kwDOBMxbGc5NXgZH","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-01T04:19:35Z","updated_at":"2022-11-01T04:19:35Z","author_association":"MEMBER","body":"@szetszwo Thanks for providing the patch! The good news is that this `NotSerializableException` disappears this time. The bad news is there's another error occurred. I'll take a look at it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1298007623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1301609366","html_url":"https://github.com/apache/ratis/pull/773#issuecomment-1301609366","issue_url":"https://api.github.com/repos/apache/ratis/issues/773","id":1301609366,"node_id":"IC_kwDOBMxbGc5NlPuW","user":{"login":"bzheng888","id":42070967,"node_id":"MDQ6VXNlcjQyMDcwOTY3","avatar_url":"https://avatars.githubusercontent.com/u/42070967?v=4","gravatar_id":"","url":"https://api.github.com/users/bzheng888","html_url":"https://github.com/bzheng888","followers_url":"https://api.github.com/users/bzheng888/followers","following_url":"https://api.github.com/users/bzheng888/following{/other_user}","gists_url":"https://api.github.com/users/bzheng888/gists{/gist_id}","starred_url":"https://api.github.com/users/bzheng888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bzheng888/subscriptions","organizations_url":"https://api.github.com/users/bzheng888/orgs","repos_url":"https://api.github.com/users/bzheng888/repos","events_url":"https://api.github.com/users/bzheng888/events{/privacy}","received_events_url":"https://api.github.com/users/bzheng888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T03:49:26Z","updated_at":"2022-11-03T03:49:26Z","author_association":"NONE","body":"@codings-dan Please take a look, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1301609366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1301619278","html_url":"https://github.com/apache/ratis/pull/774#issuecomment-1301619278","issue_url":"https://api.github.com/repos/apache/ratis/issues/774","id":1301619278,"node_id":"IC_kwDOBMxbGc5NlSJO","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T04:10:44Z","updated_at":"2022-11-03T04:10:44Z","author_association":"MEMBER","body":"The branch-2 and master have conflicts. I'll bring the patch to branch-2 and master respectively.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1301619278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1303084106","html_url":"https://github.com/apache/ratis/pull/775#issuecomment-1303084106","issue_url":"https://api.github.com/repos/apache/ratis/issues/775","id":1303084106,"node_id":"IC_kwDOBMxbGc5Nq3xK","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T07:51:36Z","updated_at":"2022-11-04T07:51:36Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for helping review the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1303084106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1304387001","html_url":"https://github.com/apache/ratis/pull/774#issuecomment-1304387001","issue_url":"https://api.github.com/repos/apache/ratis/issues/774","id":1304387001,"node_id":"IC_kwDOBMxbGc5Nv125","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-05T03:05:12Z","updated_at":"2022-11-05T03:05:12Z","author_association":"MEMBER","body":"@szetszwo Thanks for the patch. The `StateMachineStorage` is not initialized in `SnapshotManager` ctor, so I use `MemorizedSupplier` instead. Also I added a unit tests to verify. Please take a look again~","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1304387001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306010402","html_url":"https://github.com/apache/ratis/pull/774#issuecomment-1306010402","issue_url":"https://api.github.com/repos/apache/ratis/issues/774","id":1306010402,"node_id":"IC_kwDOBMxbGc5N2CMi","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-07T18:19:41Z","updated_at":"2022-11-07T18:19:41Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , the test failed.  Could you take a look?\r\n\r\nhttps://github.com/apache/ratis/actions/runs/3399091662/jobs/5678569917#step:5:588","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306010402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306063960","html_url":"https://github.com/apache/ratis/pull/770#issuecomment-1306063960","issue_url":"https://api.github.com/repos/apache/ratis/issues/770","id":1306063960,"node_id":"IC_kwDOBMxbGc5N2PRY","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-07T19:08:46Z","updated_at":"2022-11-07T19:08:46Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , just have finished up reading the doc.  Some more comments; see https://issues.apache.org/jira/secure/attachment/13051904/770_review3.patch","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306063960/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306508889","html_url":"https://github.com/apache/ratis/pull/774#issuecomment-1306508889","issue_url":"https://api.github.com/repos/apache/ratis/issues/774","id":1306508889,"node_id":"IC_kwDOBMxbGc5N375Z","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T02:02:35Z","updated_at":"2022-11-08T02:02:35Z","author_association":"MEMBER","body":"@szetszwo Thanks for the review. Fixed the tests failure.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306508889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306509594","html_url":"https://github.com/apache/ratis/pull/770#issuecomment-1306509594","issue_url":"https://api.github.com/repos/apache/ratis/issues/770","id":1306509594,"node_id":"IC_kwDOBMxbGc5N38Ea","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T02:03:23Z","updated_at":"2022-11-08T02:03:23Z","author_association":"MEMBER","body":"@szetszwo Thanks again for the reviews! Made corresponding changes on the doc.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1306509594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1307689911","html_url":"https://github.com/apache/ratis/pull/774#issuecomment-1307689911","issue_url":"https://api.github.com/repos/apache/ratis/issues/774","id":1307689911,"node_id":"IC_kwDOBMxbGc5N8cO3","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T19:00:52Z","updated_at":"2022-11-08T19:00:52Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for working on this!  Could you also create a pull request for the master branch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1307689911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1311257527","html_url":"https://github.com/apache/ratis/pull/778#issuecomment-1311257527","issue_url":"https://api.github.com/repos/apache/ratis/issues/778","id":1311257527,"node_id":"IC_kwDOBMxbGc5OKDO3","user":{"login":"sumitagrawl","id":23372859,"node_id":"MDQ6VXNlcjIzMzcyODU5","avatar_url":"https://avatars.githubusercontent.com/u/23372859?v=4","gravatar_id":"","url":"https://api.github.com/users/sumitagrawl","html_url":"https://github.com/sumitagrawl","followers_url":"https://api.github.com/users/sumitagrawl/followers","following_url":"https://api.github.com/users/sumitagrawl/following{/other_user}","gists_url":"https://api.github.com/users/sumitagrawl/gists{/gist_id}","starred_url":"https://api.github.com/users/sumitagrawl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sumitagrawl/subscriptions","organizations_url":"https://api.github.com/users/sumitagrawl/orgs","repos_url":"https://api.github.com/users/sumitagrawl/repos","events_url":"https://api.github.com/users/sumitagrawl/events{/privacy}","received_events_url":"https://api.github.com/users/sumitagrawl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T05:47:33Z","updated_at":"2022-11-11T05:47:33Z","author_association":"CONTRIBUTOR","body":"@szetszwo plz review","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1311257527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1311315201","html_url":"https://github.com/apache/ratis/pull/779#issuecomment-1311315201","issue_url":"https://api.github.com/repos/apache/ratis/issues/779","id":1311315201,"node_id":"IC_kwDOBMxbGc5OKRUB","user":{"login":"sumitagrawl","id":23372859,"node_id":"MDQ6VXNlcjIzMzcyODU5","avatar_url":"https://avatars.githubusercontent.com/u/23372859?v=4","gravatar_id":"","url":"https://api.github.com/users/sumitagrawl","html_url":"https://github.com/sumitagrawl","followers_url":"https://api.github.com/users/sumitagrawl/followers","following_url":"https://api.github.com/users/sumitagrawl/following{/other_user}","gists_url":"https://api.github.com/users/sumitagrawl/gists{/gist_id}","starred_url":"https://api.github.com/users/sumitagrawl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sumitagrawl/subscriptions","organizations_url":"https://api.github.com/users/sumitagrawl/orgs","repos_url":"https://api.github.com/users/sumitagrawl/repos","events_url":"https://api.github.com/users/sumitagrawl/events{/privacy}","received_events_url":"https://api.github.com/users/sumitagrawl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T07:16:02Z","updated_at":"2022-11-11T07:16:02Z","author_association":"CONTRIBUTOR","body":"@szetszwo Plz review","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1311315201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1314467742","html_url":"https://github.com/apache/ratis/pull/782#issuecomment-1314467742","issue_url":"https://api.github.com/repos/apache/ratis/issues/782","id":1314467742,"node_id":"IC_kwDOBMxbGc5OWS-e","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T22:04:09Z","updated_at":"2022-11-14T22:04:09Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , this approach still cannot fix the failure of TestStorageContainerManagerHA, even with the buffers moved to Queues.\r\n\r\nIf the byte array are created incrementally, TestStorageContainerManagerHA can pass; see #783 .","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1314467742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1314816431","html_url":"https://github.com/apache/ratis/pull/782#issuecomment-1314816431","issue_url":"https://api.github.com/repos/apache/ratis/issues/782","id":1314816431,"node_id":"IC_kwDOBMxbGc5OXoGv","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T06:04:24Z","updated_at":"2022-11-15T06:04:24Z","author_association":"CONTRIBUTOR","body":"> this approach still cannot fix the failure of TestStorageContainerManagerHA, even with the buffers moved to Queues.\r\n\r\nI think that's because we have a similar leak in `LeaderElectionMetrics`.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1314816431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315068634","html_url":"https://github.com/apache/ratis/pull/782#issuecomment-1315068634","issue_url":"https://api.github.com/repos/apache/ratis/issues/782","id":1315068634,"node_id":"IC_kwDOBMxbGc5OYlra","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T09:59:08Z","updated_at":"2022-11-15T09:59:08Z","author_association":"CONTRIBUTOR","body":"@szetszwo with the latest commit (74619ec) `TestStorageContainerManagerHA` is passing for me.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315068634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315072628","html_url":"https://github.com/apache/ratis/pull/783#issuecomment-1315072628","issue_url":"https://api.github.com/repos/apache/ratis/issues/783","id":1315072628,"node_id":"IC_kwDOBMxbGc5OYmp0","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T10:02:18Z","updated_at":"2022-11-15T10:02:18Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for the patch.  I'd like to actually fix the leak.  If we wanted to reduce the effect, we migth as well revert the shared buffer change (RATIS-1717).","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315072628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315700875","html_url":"https://github.com/apache/ratis/pull/782#issuecomment-1315700875","issue_url":"https://api.github.com/repos/apache/ratis/issues/782","id":1315700875,"node_id":"IC_kwDOBMxbGc5ObACL","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T18:20:59Z","updated_at":"2022-11-15T18:20:59Z","author_association":"CONTRIBUTOR","body":"> ...`TestStorageContainerManagerHA` is passing for me.\r\n\r\n@adoroszlai , You are right.  Let's merge this then.  I somehow thought that this was not able to fix the problem.  Thanks a lot!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315700875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315703960","html_url":"https://github.com/apache/ratis/pull/783#issuecomment-1315703960","issue_url":"https://api.github.com/repos/apache/ratis/issues/783","id":1315703960,"node_id":"IC_kwDOBMxbGc5ObAyY","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T18:24:04Z","updated_at":"2022-11-15T18:24:04Z","author_association":"CONTRIBUTOR","body":"> ... If we wanted to reduce the effect, we migth as well revert the shared buffer change (RATIS-1717).\r\n\r\n@adoroszlai , The shared buffer change (RATIS-1717) is a good change.  We should make it configurable.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1315703960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316226635","html_url":"https://github.com/apache/ratis/pull/782#issuecomment-1316226635","issue_url":"https://api.github.com/repos/apache/ratis/issues/782","id":1316226635,"node_id":"IC_kwDOBMxbGc5OdAZL","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T02:53:56Z","updated_at":"2022-11-16T02:53:56Z","author_association":"CONTRIBUTOR","body":"Tried to fix [LeaderElectionMetrics](https://github.com/apache/ratis/pull/782/commits/e5f08eb1fabf35b3d981620701d0a302e260dedd) but TestStorageContainerManagerHA still fails.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316226635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316288909","html_url":"https://github.com/apache/ratis/pull/784#issuecomment-1316288909","issue_url":"https://api.github.com/repos/apache/ratis/issues/784","id":1316288909,"node_id":"IC_kwDOBMxbGc5OdPmN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T03:53:41Z","updated_at":"2022-11-16T03:53:41Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , just found that simply using `AtomicReference` for the `sharedBuffer` could fix the failure of `TestStorageContainerManagerHA`.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316288909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316302966","html_url":"https://github.com/apache/ratis/pull/784#issuecomment-1316302966","issue_url":"https://api.github.com/repos/apache/ratis/issues/784","id":1316302966,"node_id":"IC_kwDOBMxbGc5OdTB2","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T04:12:59Z","updated_at":"2022-11-16T04:12:59Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing and testing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316302966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316311298","html_url":"https://github.com/apache/ratis/pull/782#issuecomment-1316311298","issue_url":"https://api.github.com/repos/apache/ratis/issues/782","id":1316311298,"node_id":"IC_kwDOBMxbGc5OdVEC","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T04:22:24Z","updated_at":"2022-11-16T04:22:24Z","author_association":"CONTRIBUTOR","body":"This was superseded by #784.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316311298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316449934","html_url":"https://github.com/apache/ratis/pull/784#issuecomment-1316449934","issue_url":"https://api.github.com/repos/apache/ratis/issues/784","id":1316449934,"node_id":"IC_kwDOBMxbGc5Od26O","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T06:35:30Z","updated_at":"2022-11-16T06:35:30Z","author_association":"MEMBER","body":"@szetszwo Bravo! I've been following this issue, \r\n`metricRegistry` holds reference to `SegmentedRaftLogWorker` after close() due to lambda closure. `SegmentedRaftLogWorker` also holds the reference to the memorized supplier of shared buffer. Thus, the shared buffer cannot be automatically collected, we have to manually set it to null in `close()` hook, just as this PR did. Am I getting it right?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316449934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316856005","html_url":"https://github.com/apache/ratis/pull/784#issuecomment-1316856005","issue_url":"https://api.github.com/repos/apache/ratis/issues/784","id":1316856005,"node_id":"IC_kwDOBMxbGc5OfaDF","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T11:35:06Z","updated_at":"2022-11-16T11:35:06Z","author_association":"MEMBER","body":"Also, shall we export this patch to 2.4.1?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316856005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316936729","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1316936729","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1316936729,"node_id":"IC_kwDOBMxbGc5OftwZ","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T12:25:45Z","updated_at":"2022-11-16T12:25:45Z","author_association":"CONTRIBUTOR","body":"Hi @szetszwo , I see currently Ozone is using ratis 2.4.0 release. And it looks like ratis master(3.0) is not compatible with branch-2 in some API.  Will we keep on maintaining both branch-2 and master(3.0) for ratis? ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316936729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316977133","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1316977133","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1316977133,"node_id":"IC_kwDOBMxbGc5Of3nt","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T12:54:08Z","updated_at":"2022-11-16T12:54:08Z","author_association":"CONTRIBUTOR","body":"The failed UT TestWatchRequestWithGrpc is irrelevant.  It passed in local. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1316977133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1317043976","html_url":"https://github.com/apache/ratis/pull/481#issuecomment-1317043976","issue_url":"https://api.github.com/repos/apache/ratis/issues/481","id":1317043976,"node_id":"IC_kwDOBMxbGc5OgH8I","user":{"login":"tokingHong","id":39825820,"node_id":"MDQ6VXNlcjM5ODI1ODIw","avatar_url":"https://avatars.githubusercontent.com/u/39825820?v=4","gravatar_id":"","url":"https://api.github.com/users/tokingHong","html_url":"https://github.com/tokingHong","followers_url":"https://api.github.com/users/tokingHong/followers","following_url":"https://api.github.com/users/tokingHong/following{/other_user}","gists_url":"https://api.github.com/users/tokingHong/gists{/gist_id}","starred_url":"https://api.github.com/users/tokingHong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tokingHong/subscriptions","organizations_url":"https://api.github.com/users/tokingHong/orgs","repos_url":"https://api.github.com/users/tokingHong/repos","events_url":"https://api.github.com/users/tokingHong/events{/privacy}","received_events_url":"https://api.github.com/users/tokingHong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T13:42:11Z","updated_at":"2022-11-16T13:42:11Z","author_association":"NONE","body":"If my project use Metric4   the problem : `https://docs.datastax.com/en/developer/java-driver/3.6/manual/metrics/#metrics-4-compatibility`\r\n\r\nHow can I disable the default Reporter for ratis use Metric3 have conflict with Metric4","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1317043976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1317573641","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1317573641","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1317573641,"node_id":"IC_kwDOBMxbGc5OiJQJ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T19:40:41Z","updated_at":"2022-11-16T19:40:41Z","author_association":"CONTRIBUTOR","body":"> ... Will we keep on maintaining both branch-2 and master(3.0) for ratis?\r\n\r\n@ChenSammi , we should move Ozone to Ratis 3.0 soon.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1317573641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1318001495","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1318001495","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1318001495,"node_id":"IC_kwDOBMxbGc5OjxtX","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T03:12:54Z","updated_at":"2022-11-17T03:12:54Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo .  A new patch is uploaded to address the comments. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1318001495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1319176003","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1319176003","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1319176003,"node_id":"IC_kwDOBMxbGc5OoQdD","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T20:40:54Z","updated_at":"2022-11-17T20:40:54Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , thanks a lot for the update!  There is conflict.  Could you resolve it?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1319176003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1319931724","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1319931724","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1319931724,"node_id":"IC_kwDOBMxbGc5OrI9M","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T12:26:29Z","updated_at":"2022-11-18T12:26:29Z","author_association":"CONTRIBUTOR","body":"Hi @szetszwo , could you help to merge it?  I have re-based the patch against the master because there is some file conflict. There is one unit test failure which is irrelevant. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1319931724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321370102","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1321370102","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1321370102,"node_id":"IC_kwDOBMxbGc5OwoH2","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T02:31:57Z","updated_at":"2022-11-21T02:31:57Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo .   Could you tell me how to publish a ratis 3.0 snapshot? so it can be used in Ozone master branch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321370102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321430939","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1321430939","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1321430939,"node_id":"IC_kwDOBMxbGc5Ow2-b","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T03:56:43Z","updated_at":"2022-11-21T03:56:43Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , please see https://github.com/apache/ratis/blob/master/DEPLOY.md","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321430939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321576672","html_url":"https://github.com/apache/ratis/pull/788#issuecomment-1321576672","issue_url":"https://api.github.com/repos/apache/ratis/issues/788","id":1321576672,"node_id":"IC_kwDOBMxbGc5Oxajg","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T07:37:51Z","updated_at":"2022-11-21T07:37:51Z","author_association":"MEMBER","body":"@szetszwo @codings-dan Could you please help review this PR? Please correct me if there are any misunderstandings.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321576672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321647656","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1321647656","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1321647656,"node_id":"IC_kwDOBMxbGc5Oxr4o","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T08:12:22Z","updated_at":"2022-11-21T08:12:22Z","author_association":"CONTRIBUTOR","body":"I see. I don't have the committer privilege yet.  @szetszwo , could you do me a favor and help to publish a 3.0 SNAPSHOT release at your convenient time? ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1321647656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1325527670","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1325527670","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1325527670,"node_id":"IC_kwDOBMxbGc5PAfJ2","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T18:56:57Z","updated_at":"2022-11-23T18:56:57Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , just have deployed 3.0.0-729d3dc-SNAPSHOT .","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1325527670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1326955224","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1326955224","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1326955224,"node_id":"IC_kwDOBMxbGc5PF7rY","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T02:20:33Z","updated_at":"2022-11-25T02:20:33Z","author_association":"CONTRIBUTOR","body":" @szetszwo , thanks a lot. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1326955224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1327922428","html_url":"https://github.com/apache/ratis/pull/784#issuecomment-1327922428","issue_url":"https://api.github.com/repos/apache/ratis/issues/784","id":1327922428,"node_id":"IC_kwDOBMxbGc5PJnz8","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T23:00:11Z","updated_at":"2022-11-25T23:00:11Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , it is included in 2.4.1 rc2.\r\n\r\n@adoroszlai , could you check and vote for the rc2 when you have time?  Cc @codings-dan ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1327922428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1328411350","html_url":"https://github.com/apache/ratis/pull/788#issuecomment-1328411350","issue_url":"https://api.github.com/repos/apache/ratis/issues/788","id":1328411350,"node_id":"IC_kwDOBMxbGc5PLfLW","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T01:32:35Z","updated_at":"2022-11-28T01:32:35Z","author_association":"MEMBER","body":"@szetszwo @codings-dan Thanks for the reviews! Made corresponding changes on PR, PTAL~","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1328411350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1330978911","html_url":"https://github.com/apache/ratis/pull/791#issuecomment-1330978911","issue_url":"https://api.github.com/repos/apache/ratis/issues/791","id":1330978911,"node_id":"IC_kwDOBMxbGc5PVSBf","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T17:04:50Z","updated_at":"2022-11-29T17:04:50Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks for reviewing this!  I discovered and tested this with Ozone in https://github.com/apache/ozone/pull/3991 .  For unit tests in Ratis, it seems not easy to add one since we have to setup the TlsConfs for multiple servers.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1330978911/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1331751994","html_url":"https://github.com/apache/ratis/pull/792#issuecomment-1331751994","issue_url":"https://api.github.com/repos/apache/ratis/issues/792","id":1331751994,"node_id":"IC_kwDOBMxbGc5PYOw6","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T07:37:58Z","updated_at":"2022-11-30T07:37:58Z","author_association":"MEMBER","body":"@szetszwo Thanks for the reviews! Applied the review patch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1331751994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1332550733","html_url":"https://github.com/apache/ratis/pull/793#issuecomment-1332550733","issue_url":"https://api.github.com/repos/apache/ratis/issues/793","id":1332550733,"node_id":"IC_kwDOBMxbGc5PbRxN","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T18:09:27Z","updated_at":"2022-11-30T18:09:27Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and committing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1332550733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1332665132","html_url":"https://github.com/apache/ratis/pull/792#issuecomment-1332665132","issue_url":"https://api.github.com/repos/apache/ratis/issues/792","id":1332665132,"node_id":"IC_kwDOBMxbGc5Pbtss","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T19:51:35Z","updated_at":"2022-11-30T19:51:35Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , since this set leaderId to null, it becomes easier to get NPE; see #794.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1332665132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1332852843","html_url":"https://github.com/apache/ratis/pull/785#issuecomment-1332852843","issue_url":"https://api.github.com/repos/apache/ratis/issues/785","id":1332852843,"node_id":"IC_kwDOBMxbGc5Pcbhr","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T23:06:25Z","updated_at":"2022-11-30T23:06:25Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , also deployed 2.4.2-8b8bdda-SNAPSHOT.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1332852843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1336471275","html_url":"https://github.com/apache/ratis/pull/794#issuecomment-1336471275","issue_url":"https://api.github.com/repos/apache/ratis/issues/794","id":1336471275,"node_id":"IC_kwDOBMxbGc5PqO7r","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T17:18:52Z","updated_at":"2022-12-04T17:18:52Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1336471275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1339000618","html_url":"https://github.com/apache/ratis/pull/795#issuecomment-1339000618","issue_url":"https://api.github.com/repos/apache/ratis/issues/795","id":1339000618,"node_id":"IC_kwDOBMxbGc5Pz4cq","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T09:07:53Z","updated_at":"2022-12-06T09:07:53Z","author_association":"CONTRIBUTOR","body":"@ChenSammi @lokeshj1703 Could you help to review this PR?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1339000618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340339278","html_url":"https://github.com/apache/ratis/pull/792#issuecomment-1340339278","issue_url":"https://api.github.com/repos/apache/ratis/issues/792","id":1340339278,"node_id":"IC_kwDOBMxbGc5P4_RO","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T03:58:10Z","updated_at":"2022-12-07T03:58:10Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam ,  `ReadOnlyRequestTests.testLinearizableReadTimeout` still fails with NPE, could you rebase this with the master branch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340339278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340340240","html_url":"https://github.com/apache/ratis/pull/789#issuecomment-1340340240","issue_url":"https://api.github.com/repos/apache/ratis/issues/789","id":1340340240,"node_id":"IC_kwDOBMxbGc5P4_gQ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T03:59:31Z","updated_at":"2022-12-07T03:59:31Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks a lot for reviewing and merging this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340340240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340348917","html_url":"https://github.com/apache/ratis/pull/789#issuecomment-1340348917","issue_url":"https://api.github.com/repos/apache/ratis/issues/789","id":1340348917,"node_id":"IC_kwDOBMxbGc5P5Bn1","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T04:12:14Z","updated_at":"2022-12-07T04:12:14Z","author_association":"CONTRIBUTOR","body":"@szetszwo My network cannot access the jira page recently for unkonwn reason. Could you help resolve this jira, thanks!\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340348917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340471446","html_url":"https://github.com/apache/ratis/pull/789#issuecomment-1340471446","issue_url":"https://api.github.com/repos/apache/ratis/issues/789","id":1340471446,"node_id":"IC_kwDOBMxbGc5P5fiW","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T06:45:02Z","updated_at":"2022-12-07T06:45:02Z","author_association":"CONTRIBUTOR","body":"@codings-dan , just have resolved it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340471446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340560258","html_url":"https://github.com/apache/ratis/pull/792#issuecomment-1340560258","issue_url":"https://api.github.com/repos/apache/ratis/issues/792","id":1340560258,"node_id":"IC_kwDOBMxbGc5P51OC","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T08:12:28Z","updated_at":"2022-12-07T08:12:28Z","author_association":"MEMBER","body":"@szetszwo I've rebased the master. The CI is now passed. Thanks again!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1340560258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1342532896","html_url":"https://github.com/apache/ratis/pull/796#issuecomment-1342532896","issue_url":"https://api.github.com/repos/apache/ratis/issues/796","id":1342532896,"node_id":"IC_kwDOBMxbGc5QBW0g","user":{"login":"qian0817","id":45898769,"node_id":"MDQ6VXNlcjQ1ODk4NzY5","avatar_url":"https://avatars.githubusercontent.com/u/45898769?v=4","gravatar_id":"","url":"https://api.github.com/users/qian0817","html_url":"https://github.com/qian0817","followers_url":"https://api.github.com/users/qian0817/followers","following_url":"https://api.github.com/users/qian0817/following{/other_user}","gists_url":"https://api.github.com/users/qian0817/gists{/gist_id}","starred_url":"https://api.github.com/users/qian0817/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qian0817/subscriptions","organizations_url":"https://api.github.com/users/qian0817/orgs","repos_url":"https://api.github.com/users/qian0817/repos","events_url":"https://api.github.com/users/qian0817/events{/privacy}","received_events_url":"https://api.github.com/users/qian0817/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T10:58:45Z","updated_at":"2022-12-08T10:58:45Z","author_association":"CONTRIBUTOR","body":"> Thanks a lot for working on this, @qian0817 !\r\n> \r\n> +1 the change looks good.\r\n> \r\n> Just found that `RaftServerMetricsImpl.followerLastHeartbeatElapsedTimeMap` should use a `ConcurrentHashMap`. Could you also change it?\r\n> \r\n> ```java\r\n> +++ b/ratis-server/src/main/java/org/apache/ratis/server/metrics/RaftServerMetricsImpl.java\r\n> @@ -20,7 +20,6 @@ package org.apache.ratis.server.metrics;\r\n>  \r\n>  import java.util.Optional;\r\n>  import java.util.concurrent.ConcurrentHashMap;\r\n> -import java.util.HashMap;\r\n>  import java.util.Map;\r\n>  import java.util.function.Function;\r\n>  import java.util.function.Supplier;\r\n> @@ -98,7 +97,7 @@ public final class RaftServerMetricsImpl extends RatisMetrics implements RaftSer\r\n>        = newHeartbeatTimer(FOLLOWER_APPEND_ENTRIES_LATENCY);\r\n>  \r\n>    /** Follower Id -> heartbeat elapsed */\r\n> -  private final Map<RaftPeerId, Long> followerLastHeartbeatElapsedTimeMap = new HashMap<>();\r\n> +  private final Map<RaftPeerId, Long> followerLastHeartbeatElapsedTimeMap = new ConcurrentHashMap<>();\r\n>    private final Supplier<Function<RaftPeerId, CommitInfoProto>> commitInfoCache;\r\n>  \r\n>    /** id -> metric */\r\n> ```\r\n\r\nfix.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1342532896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1343277835","html_url":"https://github.com/apache/ratis/pull/797#issuecomment-1343277835","issue_url":"https://api.github.com/repos/apache/ratis/issues/797","id":1343277835,"node_id":"IC_kwDOBMxbGc5QEMsL","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T19:55:53Z","updated_at":"2022-12-08T19:55:53Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , I got some idea to use the Counter example to test Linearizable Read:\r\n- Add a configurable SIMULATED_SLOWNESS to the `CounterStateMachine` -- add a sleep time such that it will sleep in each `applyTransaction(..)` call.\r\n- Setup a 3-node (n0, n1, n2) cluster as following\r\n  - Set n0 to have a higher priority, so it will always be the leader.\r\n  - Set n1 to be slow -- set SIMULATED_SLOWNESS to 1 second or higher.\r\n- After the cluster started\r\n  - run a client to update the leader 10 times.\r\n  - after that, read from the n1 to see if it will wait (~10s) and get the latest value.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1343277835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1343757879","html_url":"https://github.com/apache/ratis/pull/795#issuecomment-1343757879","issue_url":"https://api.github.com/repos/apache/ratis/issues/795","id":1343757879,"node_id":"IC_kwDOBMxbGc5QGB43","user":{"login":"symious","id":14933944,"node_id":"MDQ6VXNlcjE0OTMzOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/14933944?v=4","gravatar_id":"","url":"https://api.github.com/users/symious","html_url":"https://github.com/symious","followers_url":"https://api.github.com/users/symious/followers","following_url":"https://api.github.com/users/symious/following{/other_user}","gists_url":"https://api.github.com/users/symious/gists{/gist_id}","starred_url":"https://api.github.com/users/symious/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symious/subscriptions","organizations_url":"https://api.github.com/users/symious/orgs","repos_url":"https://api.github.com/users/symious/repos","events_url":"https://api.github.com/users/symious/events{/privacy}","received_events_url":"https://api.github.com/users/symious/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T02:25:52Z","updated_at":"2022-12-09T02:25:52Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thank you for the review and merge.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1343757879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1344071099","html_url":"https://github.com/apache/ratis/pull/797#issuecomment-1344071099","issue_url":"https://api.github.com/repos/apache/ratis/issues/797","id":1344071099,"node_id":"IC_kwDOBMxbGc5QHOW7","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T09:33:41Z","updated_at":"2022-12-09T09:33:41Z","author_association":"MEMBER","body":"@szetszwo Thanks for your advices! I've made changes according to these steps and verified linearizable read, see the following screenshot.\r\n![WX20221209-171535](https://user-images.githubusercontent.com/48054931/206670207-c35d5657-13a2-4846-a31a-2b72e96fc502.png)\r\nThe original purpose of this PR is to simply demonstrate linearizable read usages. Hope that this patch will not make it too complicated for users to grasp.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1344071099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1344099289","html_url":"https://github.com/apache/ratis/pull/797#issuecomment-1344099289","issue_url":"https://api.github.com/repos/apache/ratis/issues/797","id":1344099289,"node_id":"IC_kwDOBMxbGc5QHVPZ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T10:01:40Z","updated_at":"2022-12-09T10:01:40Z","author_association":"CONTRIBUTOR","body":"> ... I've made changes according to these steps and verified linearizable read, see the following screenshot. ...\r\n\r\nThanks a lot for trying it!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1344099289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1354546807","html_url":"https://github.com/apache/ratis/pull/798#issuecomment-1354546807","issue_url":"https://api.github.com/repos/apache/ratis/issues/798","id":1354546807,"node_id":"IC_kwDOBMxbGc5QvL53","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T10:51:03Z","updated_at":"2022-12-16T10:51:03Z","author_association":"CONTRIBUTOR","body":"@szetszwo @SzyWilliam Could you help take a look at the pull request? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1354546807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1358808805","html_url":"https://github.com/apache/ratis/pull/798#issuecomment-1358808805","issue_url":"https://api.github.com/repos/apache/ratis/issues/798","id":1358808805,"node_id":"IC_kwDOBMxbGc5Q_cbl","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T03:57:15Z","updated_at":"2022-12-20T03:57:15Z","author_association":"CONTRIBUTOR","body":"@szetszwo @SzyWilliam Thanks for helping review the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1358808805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1364482586","html_url":"https://github.com/apache/ratis/pull/799#issuecomment-1364482586","issue_url":"https://api.github.com/repos/apache/ratis/issues/799","id":1364482586,"node_id":"IC_kwDOBMxbGc5RVFoa","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-24T07:57:23Z","updated_at":"2022-12-24T07:57:23Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks for reviewing this!  Just added some log messages.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1364482586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1366545508","html_url":"https://github.com/apache/ratis/pull/800#issuecomment-1366545508","issue_url":"https://api.github.com/repos/apache/ratis/issues/800","id":1366545508,"node_id":"IC_kwDOBMxbGc5Rc9Rk","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T10:27:33Z","updated_at":"2022-12-28T10:27:33Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks for working on this.  I am reviewing the change.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1366545508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1367946940","html_url":"https://github.com/apache/ratis/pull/800#issuecomment-1367946940","issue_url":"https://api.github.com/repos/apache/ratis/issues/800","id":1367946940,"node_id":"IC_kwDOBMxbGc5RiTa8","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T14:26:51Z","updated_at":"2022-12-30T14:26:51Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing the pull request, just have refactored the code, PTAL, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1367946940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1369326016","html_url":"https://github.com/apache/ratis/pull/800#issuecomment-1369326016","issue_url":"https://api.github.com/repos/apache/ratis/issues/800","id":1369326016,"node_id":"IC_kwDOBMxbGc5RnkHA","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T02:11:34Z","updated_at":"2023-01-03T02:11:34Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks a lot for helping review and merge the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1369326016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1369358194","html_url":"https://github.com/apache/ratis/pull/801#issuecomment-1369358194","issue_url":"https://api.github.com/repos/apache/ratis/issues/801","id":1369358194,"node_id":"IC_kwDOBMxbGc5Rnr9y","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T03:22:23Z","updated_at":"2023-01-03T03:22:23Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviewing this! It's much more precise to remove the first element. Made corresponding changes on code.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1369358194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370540424","html_url":"https://github.com/apache/ratis/pull/802#issuecomment-1370540424","issue_url":"https://api.github.com/repos/apache/ratis/issues/802","id":1370540424,"node_id":"IC_kwDOBMxbGc5RsMmI","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T06:42:47Z","updated_at":"2023-01-04T06:42:47Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviewing this! \r\n\r\nAfter digging deep into the error today, I found the problem is not caused by what I stated previous as \r\n\r\n> The retry attempt will fail because the createDirectories [here](https://github.com/apache/ratis/blob/1b3c61d5dbcdb2b1ac5fd49a624a6cb88ab04744/ratis-server/src/main/java/org/apache/ratis/server/storage/SnapshotManager.java#L105) will throw a file already exist exception. This PR add a if-clause to create directory only when the directory does not exists.\r\n\r\nThe actual cause is, one large snapshot file may require **multiple installSnapshot RPCs** to transfer. The first RPC will create `tmpSnapshotFile`, and the subsequent RPCs will append chunk data to this existed `tmpSnapshotFile`.  These subsequent RPCs will fail when calling `createDirectories` as the `tmpSnapshotFile` already exists.\r\n\r\nTherefore, I think we shall call `createDirectories` once when `tmpSnapshotFile` does not exist. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370540424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370567614","html_url":"https://github.com/apache/ratis/pull/802#issuecomment-1370567614","issue_url":"https://api.github.com/repos/apache/ratis/issues/802","id":1370567614,"node_id":"IC_kwDOBMxbGc5RsTO-","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T07:26:23Z","updated_at":"2023-01-04T07:26:23Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , the javadoc https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#createDirectories-java.nio.file.Path-java.nio.file.attribute.FileAttribute...- said that it won't throw an exception if the path already exists as a directory.  It will throw FileAlreadyExistsException when the path exists but is not a directory.  So, I think we need to delete it in this case.  Let's add `createDirectoriesDeleteExistingNonDirectory` to `FileUtils`.\r\n\r\nBTW, the `dir` parameter becomes unused after RATIS-1734.  Could you also remove it?\r\n\r\n```java\r\ndiff --git a/ratis-common/src/main/java/org/apache/ratis/util/FileUtils.java b/ratis-common/src/main/java/org/apache/ratis/util/FileUtils.java\r\nindex 15ec6ea9..be736b09 100644\r\n--- a/ratis-common/src/main/java/org/apache/ratis/util/FileUtils.java\r\n+++ b/ratis-common/src/main/java/org/apache/ratis/util/FileUtils.java\r\n@@ -71,6 +71,21 @@ public interface FileUtils {\r\n         () -> \"Files.createDirectories \" + dir);\r\n   }\r\n \r\n+  static void createDirectoriesDeleteExistingNonDirectory(File dir) throws IOException {\r\n+    createDirectoriesDeleteExistingNonDirectory(dir.toPath());\r\n+  }\r\n+\r\n+  static void createDirectoriesDeleteExistingNonDirectory(Path dir) throws IOException {\r\n+    try {\r\n+      createDirectories(dir);\r\n+    } catch (FileAlreadyExistsException e) {\r\n+      LOG.warn(\"Failed to create directory \" + dir\r\n+          + \" since it already exists as a non-directory.  Trying to delete it ...\", e);\r\n+      delete(dir);\r\n+      createDirectories(dir);\r\n+    }\r\n+  }\r\n+\r\n   static void move(File src, File dst) throws IOException {\r\n     move(src.toPath(), dst.toPath());\r\n   }\r\ndiff --git a/ratis-server/src/main/java/org/apache/ratis/server/impl/ServerState.java b/ratis-server/src/main/java/org/apache/ratis/server/impl/ServerState.java\r\nindex 826c4cff..e0832c9b 100644\r\n--- a/ratis-server/src/main/java/org/apache/ratis/server/impl/ServerState.java\r\n+++ b/ratis-server/src/main/java/org/apache/ratis/server/impl/ServerState.java\r\n@@ -441,7 +441,7 @@ class ServerState {\r\n     // TODO: verify that we need to install the snapshot\r\n     StateMachine sm = server.getStateMachine();\r\n     sm.pause(); // pause the SM to prepare for install snapshot\r\n-    snapshotManager.installSnapshot(request, sm, getStorage().getStorageDir());\r\n+    snapshotManager.installSnapshot(request, sm);\r\n     updateInstalledSnapshotIndex(TermIndex.valueOf(request.getSnapshotChunk().getTermIndex()));\r\n   }\r\n \r\ndiff --git a/ratis-server/src/main/java/org/apache/ratis/server/storage/SnapshotManager.java b/ratis-server/src/main/java/org/apache/ratis/server/storage/SnapshotManager.java\r\nindex dbde8694..4ee94bf6 100644\r\n--- a/ratis-server/src/main/java/org/apache/ratis/server/storage/SnapshotManager.java\r\n+++ b/ratis-server/src/main/java/org/apache/ratis/server/storage/SnapshotManager.java\r\n@@ -77,8 +77,7 @@ public class SnapshotManager {\r\n         new File(dir.get().getRoot(), c.getFilename()).toPath()).toString();\r\n   }\r\n \r\n-  public void installSnapshot(InstallSnapshotRequestProto request, StateMachine stateMachine, RaftStorageDirectory dir)\r\n-      throws IOException {\r\n+  public void installSnapshot(InstallSnapshotRequestProto request, StateMachine stateMachine) throws IOException {\r\n     final InstallSnapshotRequestProto.SnapshotChunkProto snapshotChunkRequest = request.getSnapshotChunk();\r\n     final long lastIncludedIndex = snapshotChunkRequest.getTermIndex().getIndex();\r\n \r\n@@ -102,7 +101,7 @@ public class SnapshotManager {\r\n       }\r\n \r\n       final File tmpSnapshotFile = new File(tmpDir, getRelativePath.apply(chunk));\r\n-      FileUtils.createDirectories(tmpSnapshotFile);\r\n+      FileUtils.createDirectoriesDeleteExistingNonDirectory(tmpSnapshotFile);\r\n \r\n       FileOutputStream out = null;\r\n       try {\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370567614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370748187","html_url":"https://github.com/apache/ratis/pull/802#issuecomment-1370748187","issue_url":"https://api.github.com/repos/apache/ratis/issues/802","id":1370748187,"node_id":"IC_kwDOBMxbGc5Rs_Ub","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T10:29:22Z","updated_at":"2023-01-04T10:29:22Z","author_association":"MEMBER","body":"@szetszwo Thanks for supplying the patch. I'll remove the unused dir param. \r\nI've read the javadoc and found that `createDirectories` is misused here. The original purpose was to create all non-existing **parent** directories to `tmpSnapshotFile`. However, calling `createDirectories(tmpSnapshot)` will make `tmpSnapshotFile` itself a directory instead of creating parental directories. This mistake somehow passed unit tests and works well, probably due to logic here https://github.com/apache/ratis/blob/1b3c61d5dbcdb2b1ac5fd49a624a6cb88ab04744/ratis-server/src/main/java/org/apache/ratis/server/storage/SnapshotManager.java#L112-L114\r\n\r\nTherefore, I add `tmpSnapshotFile.getParentFile()` in \r\n```java\r\nFileUtils.createDirectoriesDeleteExistingNonDirectory(tmpSnapshotFile.getParentFile());\r\n```\r\n\r\nPTAL, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370748187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370750681","html_url":"https://github.com/apache/ratis/pull/802#issuecomment-1370750681","issue_url":"https://api.github.com/repos/apache/ratis/issues/802","id":1370750681,"node_id":"IC_kwDOBMxbGc5Rs_7Z","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T10:31:58Z","updated_at":"2023-01-04T10:32:18Z","author_association":"MEMBER","body":"There is a streaming-md5 bug related to multi-chunk scene. I'll propose another PR to fix it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1370750681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1373628001","html_url":"https://github.com/apache/ratis/pull/803#issuecomment-1373628001","issue_url":"https://api.github.com/repos/apache/ratis/issues/803","id":1373628001,"node_id":"IC_kwDOBMxbGc5R3-Zh","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-06T13:30:57Z","updated_at":"2023-01-06T13:30:57Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviewing this PR!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1373628001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1374378352","html_url":"https://github.com/apache/ratis/pull/804#issuecomment-1374378352","issue_url":"https://api.github.com/repos/apache/ratis/issues/804","id":1374378352,"node_id":"IC_kwDOBMxbGc5R61lw","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-07T04:49:34Z","updated_at":"2023-01-07T04:49:34Z","author_association":"MEMBER","body":"@szetszwo @codings-dan I've added descriptions to the existing metrics. Please take a look at its correctness if you have time. Thanks very much in advance!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1374378352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1380123497","html_url":"https://github.com/apache/ratis/pull/804#issuecomment-1380123497","issue_url":"https://api.github.com/repos/apache/ratis/issues/804","id":1380123497,"node_id":"IC_kwDOBMxbGc5SQwNp","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-12T10:31:47Z","updated_at":"2023-01-12T10:31:47Z","author_association":"MEMBER","body":"@szetszwo @codings-dan Thanks for the reviews! Made changes on doc, PTAL~","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1380123497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1381424964","html_url":"https://github.com/apache/ratis/pull/806#issuecomment-1381424964","issue_url":"https://api.github.com/repos/apache/ratis/issues/806","id":1381424964,"node_id":"IC_kwDOBMxbGc5SVt9E","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T07:35:44Z","updated_at":"2023-01-13T07:35:44Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing the pull request, PTAL","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1381424964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1382866426","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1382866426","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1382866426,"node_id":"IC_kwDOBMxbGc5SbN36","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-14T17:37:00Z","updated_at":"2023-01-14T17:37:00Z","author_association":"CONTRIBUTOR","body":"Hi @szetszwo, this is a draft implementation of the basic TransferLeadership operation.\r\nI'm wondering how to deal with the client specified timeout in TransferLeadershipRequest. Because a single operation will fail once an electionTimeout is elapsed. Looks like we should retry multiple times in the given timeout? What if the some other node won the election during this timeout?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1382866426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385128458","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1385128458","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1385128458,"node_id":"IC_kwDOBMxbGc5Sj2IK","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T09:58:26Z","updated_at":"2023-01-17T09:58:26Z","author_association":"CONTRIBUTOR","body":"> ...  a single operation will fail once an electionTimeout is elapsed. Looks like we should retry multiple times in the given timeout? What if the some other node won the election during this timeout?\r\n\r\nWhen timeout, the server sends the exception back to the client.  Then, the client could retry (or abort) and wait again.  This is the current logic to handle timeout.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385128458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385418816","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1385418816","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1385418816,"node_id":"IC_kwDOBMxbGc5Sk9BA","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T13:23:36Z","updated_at":"2023-01-17T13:23:36Z","author_association":"MEMBER","body":"@kaijchen Thanks a lot for working on this! It's also a feature very wanted by Apache IoTDB. \r\nA small question. Current transferLeadership implementation will abort if it doesn't succeed for a random election timeout. Can we add a param to let the caller decide the excepted timeout for transferLeadership? We can control the stop-write duration through this param, whether to wait definitely or indefinitely, etc.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385418816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385430203","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1385430203","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1385430203,"node_id":"IC_kwDOBMxbGc5Sk_y7","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T13:32:40Z","updated_at":"2023-01-17T13:32:40Z","author_association":"CONTRIBUTOR","body":"> A small question. Current transferLeadership implementation will abort if it doesn't succeed for a random election timeout. Can we add a param to let the caller decide the excepted timeout for transferLeadership? We can control the stop-write duration through this param, whether to wait definitely or indefinitely, etc.\r\n\r\nThanks for your suggestion. The old priority based TransferLeadership allows a user specified timeout.\r\nI will preserve this behavior. If the timeout is not set, it will default to a random election timeout. Otherwise, the user specified timeout will be used.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385430203/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385562211","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1385562211","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1385562211,"node_id":"IC_kwDOBMxbGc5SlgBj","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T15:01:59Z","updated_at":"2023-01-17T15:01:59Z","author_association":"CONTRIBUTOR","body":"I think the current change is a good first step. @szetszwo @SzyWilliam PTAL, thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1385562211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1386434153","html_url":"https://github.com/apache/ratis/pull/808#issuecomment-1386434153","issue_url":"https://api.github.com/repos/apache/ratis/issues/808","id":1386434153,"node_id":"IC_kwDOBMxbGc5So05p","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T03:31:10Z","updated_at":"2023-01-18T03:31:10Z","author_association":"CONTRIBUTOR","body":"> Sadly this will break backward compatibility. But version 3.0 hasn't been released, so it might be OK.\r\n\r\n@szetszwo @codings-dan what do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1386434153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1386578914","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1386578914","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1386578914,"node_id":"IC_kwDOBMxbGc5SpYPi","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T07:00:33Z","updated_at":"2023-01-18T07:00:33Z","author_association":"CONTRIBUTOR","body":"I have created followup tasks under [RATIS-1247](https://issues.apache.org/jira/browse/RATIS-1247).","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1386578914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1386832518","html_url":"https://github.com/apache/ratis/pull/810#issuecomment-1386832518","issue_url":"https://api.github.com/repos/apache/ratis/issues/810","id":1386832518,"node_id":"IC_kwDOBMxbGc5SqWKG","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T10:33:43Z","updated_at":"2023-01-18T10:33:43Z","author_association":"CONTRIBUTOR","body":"@szetszwo @SzyWilliam Could you help take a look at the pull request? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1386832518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1396630755","html_url":"https://github.com/apache/ratis/pull/811#issuecomment-1396630755","issue_url":"https://api.github.com/repos/apache/ratis/issues/811","id":1396630755,"node_id":"IC_kwDOBMxbGc5TPuTj","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T08:50:07Z","updated_at":"2023-01-19T08:50:07Z","author_association":"CONTRIBUTOR","body":"@kaijchen , thanks a lot for the review and all the ideas!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1396630755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1397074810","html_url":"https://github.com/apache/ratis/pull/811#issuecomment-1397074810","issue_url":"https://api.github.com/repos/apache/ratis/issues/811","id":1397074810,"node_id":"IC_kwDOBMxbGc5TRat6","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T14:35:52Z","updated_at":"2023-01-19T14:35:52Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1397074810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1397316084","html_url":"https://github.com/apache/ratis/pull/809#issuecomment-1397316084","issue_url":"https://api.github.com/repos/apache/ratis/issues/809","id":1397316084,"node_id":"IC_kwDOBMxbGc5TSVn0","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-19T17:06:08Z","updated_at":"2023-01-19T17:06:08Z","author_association":"CONTRIBUTOR","body":"Waiting for further discussion in RATIS-1770.\r\nClosing this for now.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1397316084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1398068022","html_url":"https://github.com/apache/ratis/pull/810#issuecomment-1398068022","issue_url":"https://api.github.com/repos/apache/ratis/issues/810","id":1398068022,"node_id":"IC_kwDOBMxbGc5TVNM2","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T08:35:02Z","updated_at":"2023-01-20T08:35:02Z","author_association":"CONTRIBUTOR","body":"@szetszwo @SzyWilliam Thanks a lot for reviewing and merging the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1398068022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1398200459","html_url":"https://github.com/apache/ratis/pull/812#issuecomment-1398200459","issue_url":"https://api.github.com/repos/apache/ratis/issues/812","id":1398200459,"node_id":"IC_kwDOBMxbGc5TVtiL","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-20T10:36:57Z","updated_at":"2023-01-20T10:36:57Z","author_association":"CONTRIBUTOR","body":"@kaijchen , @codings-dan , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1398200459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1399448205","html_url":"https://github.com/apache/ratis/pull/814#issuecomment-1399448205","issue_url":"https://api.github.com/repos/apache/ratis/issues/814","id":1399448205,"node_id":"IC_kwDOBMxbGc5TaeKN","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-22T10:23:37Z","updated_at":"2023-01-22T10:23:37Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1399448205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1399455290","html_url":"https://github.com/apache/ratis/pull/815#issuecomment-1399455290","issue_url":"https://api.github.com/repos/apache/ratis/issues/815","id":1399455290,"node_id":"IC_kwDOBMxbGc5Taf46","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-22T11:04:55Z","updated_at":"2023-01-22T11:04:55Z","author_association":"CONTRIBUTOR","body":"Sorry, wrong base branch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1399455290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1400220657","html_url":"https://github.com/apache/ratis/pull/816#issuecomment-1400220657","issue_url":"https://api.github.com/repos/apache/ratis/issues/816","id":1400220657,"node_id":"IC_kwDOBMxbGc5Tdavx","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-23T11:53:37Z","updated_at":"2023-01-23T11:53:37Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing this and triggering CI.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1400220657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1410315930","html_url":"https://github.com/apache/ratis/pull/813#issuecomment-1410315930","issue_url":"https://api.github.com/repos/apache/ratis/issues/813","id":1410315930,"node_id":"IC_kwDOBMxbGc5UD7aa","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-31T13:09:20Z","updated_at":"2023-01-31T13:09:20Z","author_association":"CONTRIBUTOR","body":"@kaijchen , @codings-dan , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1410315930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1411547519","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1411547519","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1411547519,"node_id":"IC_kwDOBMxbGc5UIoF_","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T06:50:21Z","updated_at":"2023-02-01T06:50:21Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review. I have a question about the `TransferLeadership` class.\r\n\r\nCurrently a `TransferLeadership` object belongs to a `RaftServerImpl`.\r\nI'm wondering if we can change its scope to a `LeaderStateImpl` (in another Jira).\r\nBecause it's only meaningful when the RaftServerImpl is a leader.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1411547519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1412047019","html_url":"https://github.com/apache/ratis/pull/817#issuecomment-1412047019","issue_url":"https://api.github.com/repos/apache/ratis/issues/817","id":1412047019,"node_id":"IC_kwDOBMxbGc5UKiCr","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T13:19:06Z","updated_at":"2023-02-01T13:19:06Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks a lot for reviewing the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1412047019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1412211221","html_url":"https://github.com/apache/ratis/pull/817#issuecomment-1412211221","issue_url":"https://api.github.com/repos/apache/ratis/issues/817","id":1412211221,"node_id":"IC_kwDOBMxbGc5ULKIV","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T15:05:42Z","updated_at":"2023-02-01T15:05:42Z","author_association":"CONTRIBUTOR","body":"Retrying this on https://github.com/apache/ratis/pull/819","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1412211221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1412214860","html_url":"https://github.com/apache/ratis/pull/819#issuecomment-1412214860","issue_url":"https://api.github.com/repos/apache/ratis/issues/819","id":1412214860,"node_id":"IC_kwDOBMxbGc5ULLBM","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-01T15:07:29Z","updated_at":"2023-02-01T15:07:29Z","author_association":"CONTRIBUTOR","body":"@szetszwo Could you help take a look the pull request? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1412214860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414335386","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1414335386","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1414335386,"node_id":"IC_kwDOBMxbGc5UTQua","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-02T20:30:20Z","updated_at":"2023-02-02T20:30:20Z","author_association":"CONTRIBUTOR","body":"> Currently a `TransferLeadership` object belongs to a `RaftServerImpl`.\r\n> I'm wondering if we can change its scope to a `LeaderStateImpl` (in another Jira).\r\n\r\nThis sounds like a good idea.  Let's try refactoring the code in another JIRA.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414335386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414670056","html_url":"https://github.com/apache/ratis/pull/807#issuecomment-1414670056","issue_url":"https://api.github.com/repos/apache/ratis/issues/807","id":1414670056,"node_id":"IC_kwDOBMxbGc5UUibo","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T02:14:56Z","updated_at":"2023-02-03T02:14:56Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo and @SzyWilliam for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414670056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414706690","html_url":"https://github.com/apache/ratis/pull/808#issuecomment-1414706690","issue_url":"https://api.github.com/repos/apache/ratis/issues/808","id":1414706690,"node_id":"IC_kwDOBMxbGc5UUrYC","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T02:34:15Z","updated_at":"2023-02-03T02:34:15Z","author_association":"CONTRIBUTOR","body":"I have come up with 3 options to preserve backward compatibility.\r\n@szetszwo @codings-dan what do you think?\r\n\r\n1. Check server version first and send command accordingly.\r\n2. Add a new command and deprecate the old command.\r\n3. Just break the backward compatibility, since next version is 3.0.\r\n\r\nPersonally I prever the 2nd way.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414706690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414770574","html_url":"https://github.com/apache/ratis/pull/808#issuecomment-1414770574","issue_url":"https://api.github.com/repos/apache/ratis/issues/808","id":1414770574,"node_id":"IC_kwDOBMxbGc5UU6-O","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-03T03:11:52Z","updated_at":"2023-02-03T03:11:52Z","author_association":"CONTRIBUTOR","body":"@kaijchen Thanks for working on this. I prefer the second option, we can add a new commad to ensure compatibility.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1414770574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1420323212","html_url":"https://github.com/apache/ratis/pull/808#issuecomment-1420323212","issue_url":"https://api.github.com/repos/apache/ratis/issues/808","id":1420323212,"node_id":"IC_kwDOBMxbGc5UqGmM","user":{"login":"kaijchen","id":5821159,"node_id":"MDQ6VXNlcjU4MjExNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5821159?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijchen","html_url":"https://github.com/kaijchen","followers_url":"https://api.github.com/users/kaijchen/followers","following_url":"https://api.github.com/users/kaijchen/following{/other_user}","gists_url":"https://api.github.com/users/kaijchen/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijchen/subscriptions","organizations_url":"https://api.github.com/users/kaijchen/orgs","repos_url":"https://api.github.com/users/kaijchen/repos","events_url":"https://api.github.com/users/kaijchen/events{/privacy}","received_events_url":"https://api.github.com/users/kaijchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-07T07:41:31Z","updated_at":"2023-02-07T07:41:31Z","author_association":"CONTRIBUTOR","body":"@codings-dan @szetszwo PTAL, thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1420323212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]