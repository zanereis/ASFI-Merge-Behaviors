[{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197503185","html_url":"https://github.com/apache/ratis/pull/696#issuecomment-1197503185","issue_url":"https://api.github.com/repos/apache/ratis/issues/696","id":1197503185,"node_id":"IC_kwDOBMxbGc5HYHLR","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-28T00:03:50Z","updated_at":"2022-07-28T00:03:50Z","author_association":"CONTRIBUTOR","body":"@drriguz , just have pushed #698 .  See if you could take a look and try out the updated example.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197503185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197553519","html_url":"https://github.com/apache/ratis/pull/696#issuecomment-1197553519","issue_url":"https://api.github.com/repos/apache/ratis/issues/696","id":1197553519,"node_id":"IC_kwDOBMxbGc5HYTdv","user":{"login":"drriguz","id":6427851,"node_id":"MDQ6VXNlcjY0Mjc4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6427851?v=4","gravatar_id":"","url":"https://api.github.com/users/drriguz","html_url":"https://github.com/drriguz","followers_url":"https://api.github.com/users/drriguz/followers","following_url":"https://api.github.com/users/drriguz/following{/other_user}","gists_url":"https://api.github.com/users/drriguz/gists{/gist_id}","starred_url":"https://api.github.com/users/drriguz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drriguz/subscriptions","organizations_url":"https://api.github.com/users/drriguz/orgs","repos_url":"https://api.github.com/users/drriguz/repos","events_url":"https://api.github.com/users/drriguz/events{/privacy}","received_events_url":"https://api.github.com/users/drriguz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-28T01:40:02Z","updated_at":"2022-07-28T01:40:02Z","author_association":"CONTRIBUTOR","body":"@szetszwo Sure, the new example seems much more clear. BTW, can we add some comments about thread-safety in the `StateMachine` class? I'm not quite sure about that, does Ratis require user to implement a thread safe class of StateMachine? For example, in the counter example, we have `AtomicInteger counter`, will a basic integer work?\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197553519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197555675","html_url":"https://github.com/apache/ratis/pull/687#issuecomment-1197555675","issue_url":"https://api.github.com/repos/apache/ratis/issues/687","id":1197555675,"node_id":"IC_kwDOBMxbGc5HYT_b","user":{"login":"drriguz","id":6427851,"node_id":"MDQ6VXNlcjY0Mjc4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6427851?v=4","gravatar_id":"","url":"https://api.github.com/users/drriguz","html_url":"https://github.com/drriguz","followers_url":"https://api.github.com/users/drriguz/followers","following_url":"https://api.github.com/users/drriguz/following{/other_user}","gists_url":"https://api.github.com/users/drriguz/gists{/gist_id}","starred_url":"https://api.github.com/users/drriguz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drriguz/subscriptions","organizations_url":"https://api.github.com/users/drriguz/orgs","repos_url":"https://api.github.com/users/drriguz/repos","events_url":"https://api.github.com/users/drriguz/events{/privacy}","received_events_url":"https://api.github.com/users/drriguz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-28T01:44:01Z","updated_at":"2022-07-28T01:44:01Z","author_association":"CONTRIBUTOR","body":"This fix seems no longer necessary and I'll close it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197555675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197672102","html_url":"https://github.com/apache/ratis/pull/696#issuecomment-1197672102","issue_url":"https://api.github.com/repos/apache/ratis/issues/696","id":1197672102,"node_id":"IC_kwDOBMxbGc5HYwam","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-28T05:14:17Z","updated_at":"2022-07-28T05:14:17Z","author_association":"CONTRIBUTOR","body":"> ... can we add some comments about thread-safety in the StateMachine class?\r\n\r\nThis is a very good suggestion.  Let's me file a JIRA for adding it.\r\n\r\n> ...  I'm not quite sure about that, does Ratis require user to implement a thread safe class of StateMachine?\r\n\r\nYes, it is because a state machine should support concurrent read/write.\r\n\r\n> ...  For example, in the counter example, we have AtomicInteger counter, will a basic integer work?\r\n\r\nIf the counter is declared as int, then read may not see the most updated value since the query(..) method is not synchronized.  Of course, it would work if we add `synchronized` to query(..) but query(..) will then unnecessarily block the other methods.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1197672102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1198841033","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1198841033","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1198841033,"node_id":"IC_kwDOBMxbGc5HdNzJ","user":{"login":"captainzmc","id":13825159,"node_id":"MDQ6VXNlcjEzODI1MTU5","avatar_url":"https://avatars.githubusercontent.com/u/13825159?v=4","gravatar_id":"","url":"https://api.github.com/users/captainzmc","html_url":"https://github.com/captainzmc","followers_url":"https://api.github.com/users/captainzmc/followers","following_url":"https://api.github.com/users/captainzmc/following{/other_user}","gists_url":"https://api.github.com/users/captainzmc/gists{/gist_id}","starred_url":"https://api.github.com/users/captainzmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captainzmc/subscriptions","organizations_url":"https://api.github.com/users/captainzmc/orgs","repos_url":"https://api.github.com/users/captainzmc/repos","events_url":"https://api.github.com/users/captainzmc/events{/privacy}","received_events_url":"https://api.github.com/users/captainzmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-29T03:24:59Z","updated_at":"2022-07-29T03:24:59Z","author_association":"MEMBER","body":"> * We should support unsafe flush since the existing unsafe flush still has a better performance than async flush.  @SincereXIA , do you need unsafe flush if we have the async flush provided here?\r\n\r\nThanks @szetszwo  @ChenSammi. Yes we'd better keep unsafe flush because of the better performance. We can add a separate safe async flush here.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1198841033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1200446333","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1200446333","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1200446333,"node_id":"IC_kwDOBMxbGc5HjVt9","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-31T15:26:30Z","updated_at":"2022-07-31T15:26:30Z","author_association":"MEMBER","body":"@szetszwo @codings-dan This PR is a draft for [Linearizable Reads](https://issues.apache.org/jira/browse/RATIS-1557), please take a look. Any suggestions on overall design or code details would be great!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1200446333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1200650000","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1200650000","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1200650000,"node_id":"IC_kwDOBMxbGc5HkHcQ","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-01T03:24:40Z","updated_at":"2022-08-01T03:24:40Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo  and @captainzmc for the feedback.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1200650000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1200938843","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1200938843","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1200938843,"node_id":"IC_kwDOBMxbGc5HlN9b","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-01T09:16:50Z","updated_at":"2022-08-01T09:16:50Z","author_association":"CONTRIBUTOR","body":"> @ChenSammi , thanks for working on this. Async flush is a very good idea! Some thoughts\r\n> \r\n>     * We should support unsafe flush since the existing unsafe flush still has a better performance than async flush.  @SincereXIA , do you need unsafe flush if we have the async flush provided here?\r\n> \r\n>     * Async flush needs to honor stateMachineDataPolicy; otherwise, it is unsafe.\r\n\r\n@szetszwo The stateMachineDataPolicy is controlled by raft.server.log.statemachine.data.sync. When it's true, state machine will be flushed before it reaches raft log write and flush.  When it's false,  the current sync flush is unsafe too.  \r\nSince we have defined the raft.server.log.statemachine.data.sync to control the state machine data flush, we can just focus on the write log flush with .async-flush.enabled property.  Otherwise, maybe we should merge this two property into one to guarantee a safe flush of both state machine data and log data with sync and async two modes.  What do you think?  ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1200938843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1201430256","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1201430256","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1201430256,"node_id":"IC_kwDOBMxbGc5HnF7w","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-01T16:25:47Z","updated_at":"2022-08-01T16:25:47Z","author_association":"CONTRIBUTOR","body":"@ChenSammi, yes, when raft.server.log.statemachine.data.sync is false, we don't have to do anything.\r\n\r\nWhen both  raft.server.log.statemachine.data.sync and the new Async flush are true, we should wait for both operations to complete before updating the index.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1201430256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1201915853","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1201915853","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1201915853,"node_id":"IC_kwDOBMxbGc5Ho8fN","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T01:36:25Z","updated_at":"2022-08-02T01:36:25Z","author_association":"CONTRIBUTOR","body":"@szetszwo , Right.  currently when raft.server.log.statemachine.data.sync is true, state machine data will be waited to be synced before ratis moves on to write the corresponding raft log and flush.  So we do not handle any state machine related case in flushIfNecessary(), right?  Let me know if I misunderstand something. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1201915853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1202956449","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1202956449","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1202956449,"node_id":"IC_kwDOBMxbGc5Hs6ih","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-02T16:28:25Z","updated_at":"2022-08-02T16:28:25Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , thanks for working on this!  Will do the review later today.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1202956449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1203386603","html_url":"https://github.com/apache/ratis/pull/565#issuecomment-1203386603","issue_url":"https://api.github.com/repos/apache/ratis/issues/565","id":1203386603,"node_id":"IC_kwDOBMxbGc5Hujjr","user":{"login":"ferhui","id":2336003,"node_id":"MDQ6VXNlcjIzMzYwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2336003?v=4","gravatar_id":"","url":"https://api.github.com/users/ferhui","html_url":"https://github.com/ferhui","followers_url":"https://api.github.com/users/ferhui/followers","following_url":"https://api.github.com/users/ferhui/following{/other_user}","gists_url":"https://api.github.com/users/ferhui/gists{/gist_id}","starred_url":"https://api.github.com/users/ferhui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferhui/subscriptions","organizations_url":"https://api.github.com/users/ferhui/orgs","repos_url":"https://api.github.com/users/ferhui/repos","events_url":"https://api.github.com/users/ferhui/events{/privacy}","received_events_url":"https://api.github.com/users/ferhui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-03T01:39:03Z","updated_at":"2022-08-03T01:39:03Z","author_association":"CONTRIBUTOR","body":"Sure. Close this one.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1203386603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204039974","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1204039974","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1204039974,"node_id":"IC_kwDOBMxbGc5HxDEm","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-03T14:40:17Z","updated_at":"2022-08-03T14:40:17Z","author_association":"MEMBER","body":"@szetszwo I've made corresponding changes. Also I added some doc in getReadIndex() and readOnlyAsync().","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204039974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204647860","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1204647860","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1204647860,"node_id":"IC_kwDOBMxbGc5HzXe0","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T01:11:31Z","updated_at":"2022-08-04T01:18:15Z","author_association":"MEMBER","body":"@szetszwo, Thanks for the review.\r\n1. Raft section 6.4 says a single round of heartbeats can answer any number of read-only requests that accumulate, so we may not have to assign one-one mapping between read only request with heartbeats.\r\n2. Indeed batching read only requests is a great idea.\r\n3. Should we add a method to trigger heartbeat manually?\r\nA possible solution might be:\r\nWhen the first read-only request arrives, we **manually** trigger a heartbeat. Any subsequent read-only requests will only be added to pending queue and **be answered by this heartbeat.** What do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204647860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204743602","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1204743602","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1204743602,"node_id":"IC_kwDOBMxbGc5Hzu2y","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T04:28:57Z","updated_at":"2022-08-04T04:29:25Z","author_association":"CONTRIBUTOR","body":"@szetszwo , the difference is it sticks to call updateIncreasingly on flushIndex in your proposal while updateToMax is called currently.  Is there any known side effect of using  updateToMax?  I'm thinking of using PriorityBlockingList in flushExecutor in another PR to improve the performance by executing the raft flush with high commitIndex in priority, and remove all lower commitIndex flush tasks, so that we will have less actual file flush.  In this case, flushIndex will not be update continuously.  ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204743602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204815158","html_url":"https://github.com/apache/ratis/pull/698#issuecomment-1204815158","issue_url":"https://api.github.com/repos/apache/ratis/issues/698","id":1204815158,"node_id":"IC_kwDOBMxbGc5H0AU2","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T06:24:52Z","updated_at":"2022-08-04T06:24:52Z","author_association":"CONTRIBUTOR","body":"@drriguz , has you got a chance to check this?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204815158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204816228","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1204816228","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1204816228,"node_id":"IC_kwDOBMxbGc5H0Alk","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T06:26:15Z","updated_at":"2022-08-04T06:26:15Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , updateIncreasingly is more strict than updateToMax so that it is preferred.  For flush index, it should be updated increasingly.  Do you agree?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204816228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204865305","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1204865305","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1204865305,"node_id":"IC_kwDOBMxbGc5H0MkZ","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T07:20:33Z","updated_at":"2022-08-04T07:21:06Z","author_association":"CONTRIBUTOR","body":"@szetszwo  IMHO,  the current updateIncreasingly is less strict than updateToMax.  updateToMax will atomically check if the new value is greater than the old value before update the index while updateIncreasingly doesn the check after the value change in a way which has no atomic guarantee.   \r\n\r\nThis async flush just put the flush aside, the number of flush is not reduced.  In a heavy workload cluster, every flush  took up to seconds to finish.  My plan is first make it async, then reduce the actual flush count by reverse order executing,  flush tasks with high commitIndex got executed first.     ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204865305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204994122","html_url":"https://github.com/apache/ratis/pull/698#issuecomment-1204994122","issue_url":"https://api.github.com/repos/apache/ratis/issues/698","id":1204994122,"node_id":"IC_kwDOBMxbGc5H0sBK","user":{"login":"drriguz","id":6427851,"node_id":"MDQ6VXNlcjY0Mjc4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6427851?v=4","gravatar_id":"","url":"https://api.github.com/users/drriguz","html_url":"https://github.com/drriguz","followers_url":"https://api.github.com/users/drriguz/followers","following_url":"https://api.github.com/users/drriguz/following{/other_user}","gists_url":"https://api.github.com/users/drriguz/gists{/gist_id}","starred_url":"https://api.github.com/users/drriguz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drriguz/subscriptions","organizations_url":"https://api.github.com/users/drriguz/orgs","repos_url":"https://api.github.com/users/drriguz/repos","events_url":"https://api.github.com/users/drriguz/events{/privacy}","received_events_url":"https://api.github.com/users/drriguz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T09:22:26Z","updated_at":"2022-08-04T09:23:33Z","author_association":"CONTRIBUTOR","body":"@szetszwo So sorry for not replying sooner! Too many big news those days...\r\n\r\nThe example is now very clear, and the document explains clearly about the key points when implement the statemachine :p\r\n\r\nWhat I was thinking is very close to this, except that I was thinking extract some fileds/methods into a base class, eg. create a `SimpleStateMachine` class and owns a `SimpleStateMachineStorage`, but I did not find a good way to implement it.\r\n\r\nThanks for the excellent example! BTW, could you also invite me(dr@riguz.com) to the slack channel?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1204994122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205003760","html_url":"https://github.com/apache/ratis/pull/698#issuecomment-1205003760","issue_url":"https://api.github.com/repos/apache/ratis/issues/698","id":1205003760,"node_id":"IC_kwDOBMxbGc5H0uXw","user":{"login":"drriguz","id":6427851,"node_id":"MDQ6VXNlcjY0Mjc4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6427851?v=4","gravatar_id":"","url":"https://api.github.com/users/drriguz","html_url":"https://github.com/drriguz","followers_url":"https://api.github.com/users/drriguz/followers","following_url":"https://api.github.com/users/drriguz/following{/other_user}","gists_url":"https://api.github.com/users/drriguz/gists{/gist_id}","starred_url":"https://api.github.com/users/drriguz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drriguz/subscriptions","organizations_url":"https://api.github.com/users/drriguz/orgs","repos_url":"https://api.github.com/users/drriguz/repos","events_url":"https://api.github.com/users/drriguz/events{/privacy}","received_events_url":"https://api.github.com/users/drriguz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T09:30:57Z","updated_at":"2022-08-04T09:30:57Z","author_association":"CONTRIBUTOR","body":"BTW, I think we could also simplify the [ArithmeticStateMachine.java](https://github.com/apache/ratis/blob/master/ratis-examples/src/main/java/org/apache/ratis/examples/arithmetic/ArithmeticStateMachine.java) to use `synchronized` instead of `ReentrantReadWriteLock`, comparing with the benefit of performance, the code is less readable then the counter example.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205003760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205503642","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1205503642","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1205503642,"node_id":"IC_kwDOBMxbGc5H2oaa","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T16:37:04Z","updated_at":"2022-08-04T16:37:04Z","author_association":"CONTRIBUTOR","body":">  ... the current updateIncreasingly is less strict than updateToMax. updateToMax will atomically check if the new value is greater than the old value before update the index while updateIncreasingly doesn the check after the value change in a way which has no atomic guarantee.\r\n\r\nYes, updateIncreasingly does the check after the value change and it will throw an exception if the check failed.  The check is an assertion in order to make sure that the condition always holds.  If it fails, it is a bug in the code.\r\n\r\nSince updateIncreasingly only allows the new value >= the old value while updateToMax allows any value, we say updateIncreasingly more strict than updateToMax in this sense.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205503642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205842220","html_url":"https://github.com/apache/ratis/pull/698#issuecomment-1205842220","issue_url":"https://api.github.com/repos/apache/ratis/issues/698","id":1205842220,"node_id":"IC_kwDOBMxbGc5H37Es","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T22:46:33Z","updated_at":"2022-08-04T22:46:33Z","author_association":"CONTRIBUTOR","body":"> BTW, I think we could also simplify the [ArithmeticStateMachine.java](https://github.com/apache/ratis/blob/master/ratis-examples/src/main/java/org/apache/ratis/examples/arithmetic/ArithmeticStateMachine.java) to use synchronized instead of ReentrantReadWriteLock, comparing with the benefit of performance, the code is less readable then the counter example.\r\n\r\nArithmeticStateMachine indeed is a more complicated state machine than the CounterStateMachine.\r\n\r\nAnyway, let's focus on the Counter example here.\r\n\r\n> ... could you also invite me([dr@riguz.com](mailto:dr@riguz.com)) to the slack channel?\r\n\r\nJust have invited you.  Please check.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205842220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205884743","html_url":"https://github.com/apache/ratis/pull/703#issuecomment-1205884743","issue_url":"https://api.github.com/repos/apache/ratis/issues/703","id":1205884743,"node_id":"IC_kwDOBMxbGc5H4FdH","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T23:44:34Z","updated_at":"2022-08-04T23:44:34Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for testing this.  Then, we have to copy the seqNums before calling `sendMethod.accept(..)`","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1205884743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1206454041","html_url":"https://github.com/apache/ratis/pull/702#issuecomment-1206454041","issue_url":"https://api.github.com/repos/apache/ratis/issues/702","id":1206454041,"node_id":"IC_kwDOBMxbGc5H6QcZ","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-05T13:22:02Z","updated_at":"2022-08-05T13:22:02Z","author_association":"CONTRIBUTOR","body":"Tested `TestInstallSnapshotNotificationWithGrpc` repeatedly both without and with this patch.\r\n\r\n1. [without the patch](https://github.com/adoroszlai/incubator-ratis/actions/runs/2803202957)\r\n   * timeout: 1%\r\n   * `IllegalArgumentException: ...-SegmentedRaftLog is expected to be opened but it is CLOSED`: 10%\r\n2. [with the patch](https://github.com/adoroszlai/incubator-ratis/actions/runs/2803208217)\r\n   * timeout: 8%\r\n   * `IllegalArgumentException: ...-SegmentedRaftLog is expected to be opened but it is CLOSED`: none\r\n\r\nTimeout happens while cluster is shutting down:\r\n\r\n```\r\nTestTimedOutException: test timed out after 100 seconds\r\n\tat org.apache.ratis.server.impl.RaftServerProxy$ImplMap.toString(RaftServerProxy.java:159)\r\n\tat java.lang.String.valueOf(String.java:2994)\r\n\tat java.lang.StringBuilder.append(StringBuilder.java:136)\r\n\tat org.apache.ratis.server.impl.RaftServerProxy.toString(RaftServerProxy.java:637)\r\n\t...\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster.printServers(MiniRaftCluster.java:534)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster.shutdown(MiniRaftCluster.java:832)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:144)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:118)\r\n\tat org.apache.ratis.InstallSnapshotNotificationTests.testInstallSnapshotDuringBootstrap(InstallSnapshotNotificationTests.java:501)\r\n```\r\n\r\nLooking into that I've found `parallelStream` in `RaftServerProxy`: https://github.com/adoroszlai/incubator-ratis/commit/374396d6b6547f479371435f97bb7b0163bd0d77\r\n\r\nWith that additional change\r\n * `testInstallSnapshotDuringBootstrap` [timed out](https://github.com/adoroszlai/incubator-ratis/runs/7691221109?check_suite_focus=true#step:5:1117) 1%\r\n * `testInstallSnapshotInstalledEvent` [timed out](https://github.com/adoroszlai/incubator-ratis/runs/7691221280?check_suite_focus=true#step:5:11127) 1%\r\n * `testInstallSnapshotInstalledEvent` [failed](https://github.com/adoroszlai/incubator-ratis/runs/7691221372?check_suite_focus=true#step:5:3617) 1%\r\n * `testRestartFollower` [failed](https://github.com/adoroszlai/incubator-ratis/runs/7691221280?check_suite_focus=true#step:5:10492) with `IllegalArgumentException` 1%\r\n\r\n```\r\nTestTimedOutException: test timed out after 100 seconds\r\n\t...\r\n\tat org.apache.ratis.grpc.client.GrpcClientProtocolClient.setConfiguration(GrpcClientProtocolClient.java:200)\r\n\tat org.apache.ratis.grpc.client.GrpcClientRpc.sendRequest(GrpcClientRpc.java:102)\r\n\tat org.apache.ratis.client.impl.BlockingImpl.sendRequest(BlockingImpl.java:134)\r\n\tat org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:99)\r\n\tat org.apache.ratis.client.impl.AdminImpl.setConfiguration(AdminImpl.java:46)\r\n\tat org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:51)\r\n\tat org.apache.ratis.client.api.AdminApi.setConfiguration(AdminApi.java:45)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster.setConfiguration(MiniRaftCluster.java:816)\r\n\tat org.apache.ratis.InstallSnapshotNotificationTests.testInstallSnapshotInstalledEvent(InstallSnapshotNotificationTests.java:463)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1206454041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1206697706","html_url":"https://github.com/apache/ratis/pull/702#issuecomment-1206697706","issue_url":"https://api.github.com/repos/apache/ratis/issues/702","id":1206697706,"node_id":"IC_kwDOBMxbGc5H7L7q","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-05T17:46:11Z","updated_at":"2022-08-05T17:46:11Z","author_association":"CONTRIBUTOR","body":"`TestInstallSnapshotNotificationWithGrpc` passed in 100/100 runs with f642b14:\r\nhttps://github.com/adoroszlai/incubator-ratis/actions/runs/2804703023","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1206697706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207124645","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1207124645","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1207124645,"node_id":"IC_kwDOBMxbGc5H80Kl","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T01:55:59Z","updated_at":"2022-08-06T01:55:59Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , before triggering a heartbeat, it should record the current call id.  When it receives a reply, it check if the reply have a later call id.  Then, it can make sure, the reply comes after the trigger.  Let me file a JIRA to so.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207124645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207233219","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1207233219","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1207233219,"node_id":"IC_kwDOBMxbGc5H9OrD","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T15:22:19Z","updated_at":"2022-08-06T15:22:19Z","author_association":"MEMBER","body":"@szetszwo I fixed the review issues. Please take a look at the code again. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207233219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207249933","html_url":"https://github.com/apache/ratis/pull/703#issuecomment-1207249933","issue_url":"https://api.github.com/repos/apache/ratis/issues/703","id":1207249933,"node_id":"IC_kwDOBMxbGc5H9SwN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T17:18:30Z","updated_at":"2022-08-06T17:18:30Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for testing and reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207249933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207262082","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1207262082","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1207262082,"node_id":"IC_kwDOBMxbGc5H9VuC","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T18:39:47Z","updated_at":"2022-08-06T18:39:47Z","author_association":"CONTRIBUTOR","body":"> Should we add a method to trigger heartbeat manually?\r\n\r\nYes, we probably should add a triggerHeartbeat(..) method in LogAppender.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207262082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207262790","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1207262790","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1207262790,"node_id":"IC_kwDOBMxbGc5H9V5G","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T18:44:57Z","updated_at":"2022-08-06T18:44:57Z","author_association":"CONTRIBUTOR","body":"> 2. Indeed batching read only requests is a great idea.\r\n\r\nFor batching the read requests, we may use the commit index as the key so that the read requests with the same commit index will get the same heartbeat future.  Then, the number of triggered heartbeat will be bounded by the number of commit indices.  It won't have too many heartbeats then.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207262790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207270942","html_url":"https://github.com/apache/ratis/pull/702#issuecomment-1207270942","issue_url":"https://api.github.com/repos/apache/ratis/issues/702","id":1207270942,"node_id":"IC_kwDOBMxbGc5H9X4e","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T19:29:58Z","updated_at":"2022-08-06T19:29:58Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for working hard on this!  How about we merge the current change?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207270942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207340947","html_url":"https://github.com/apache/ratis/pull/702#issuecomment-1207340947","issue_url":"https://api.github.com/repos/apache/ratis/issues/702","id":1207340947,"node_id":"IC_kwDOBMxbGc5H9o-T","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-07T06:28:30Z","updated_at":"2022-08-07T06:28:30Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the review.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207340947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207404285","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1207404285","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1207404285,"node_id":"IC_kwDOBMxbGc5H94b9","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-07T13:04:30Z","updated_at":"2022-08-07T13:04:30Z","author_association":"MEMBER","body":"@szetszwo Thanks for the review! I'll add `triggerHeartbeat` & batching mechanism after https://github.com/apache/ratis/pull/706 is merged.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207404285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207571818","html_url":"https://github.com/apache/ratis/pull/707#issuecomment-1207571818","issue_url":"https://api.github.com/repos/apache/ratis/issues/707","id":1207571818,"node_id":"IC_kwDOBMxbGc5H-hVq","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T02:08:36Z","updated_at":"2022-08-08T02:08:36Z","author_association":"MEMBER","body":"@szetszwo Please take a look at this, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207571818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207624032","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1207624032","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1207624032,"node_id":"IC_kwDOBMxbGc5H-uFg","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T03:33:09Z","updated_at":"2022-08-08T03:33:09Z","author_association":"MEMBER","body":"cc @szetszwo, take a look when free, thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207624032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207920009","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1207920009","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1207920009,"node_id":"IC_kwDOBMxbGc5H_2WJ","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T10:03:39Z","updated_at":"2022-08-08T10:03:39Z","author_association":"CONTRIBUTOR","body":"@szetszwo  thanks for the explain.  It makes sense.  Please take a look of the new PR at your convenient time, thanks. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1207920009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208310173","html_url":"https://github.com/apache/ratis/pull/708#issuecomment-1208310173","issue_url":"https://api.github.com/repos/apache/ratis/issues/708","id":1208310173,"node_id":"IC_kwDOBMxbGc5IBVmd","user":{"login":"JoeCqupt","id":12369652,"node_id":"MDQ6VXNlcjEyMzY5NjUy","avatar_url":"https://avatars.githubusercontent.com/u/12369652?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeCqupt","html_url":"https://github.com/JoeCqupt","followers_url":"https://api.github.com/users/JoeCqupt/followers","following_url":"https://api.github.com/users/JoeCqupt/following{/other_user}","gists_url":"https://api.github.com/users/JoeCqupt/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeCqupt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeCqupt/subscriptions","organizations_url":"https://api.github.com/users/JoeCqupt/orgs","repos_url":"https://api.github.com/users/JoeCqupt/repos","events_url":"https://api.github.com/users/JoeCqupt/events{/privacy}","received_events_url":"https://api.github.com/users/JoeCqupt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T15:58:20Z","updated_at":"2022-08-08T15:58:20Z","author_association":"CONTRIBUTOR","body":"@szetszwo  PTAL","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208310173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208373440","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1208373440","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1208373440,"node_id":"IC_kwDOBMxbGc5IBlDA","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T16:57:46Z","updated_at":"2022-08-08T16:57:46Z","author_association":"CONTRIBUTOR","body":"@leo65535 , thanks for working on this.  Will try the change later today.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208373440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208620949","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1208620949","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1208620949,"node_id":"IC_kwDOBMxbGc5ICheV","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T21:18:57Z","updated_at":"2022-08-08T21:18:57Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , since this is a complicated change, could you split this into smaller subtasks?  We could have\r\n# trigger a heartbeat immediately;\r\n# boardcast a heartbeat;\r\n# wait for the applied index.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208620949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208952766","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1208952766","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1208952766,"node_id":"IC_kwDOBMxbGc5IDye-","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-09T06:05:50Z","updated_at":"2022-08-09T09:43:02Z","author_association":"MEMBER","body":"> @leo65535 , thanks a lot for working on this! The change does work.\r\n> I believe their contents are mostly the same. Is there a way to combine them?\r\n\r\nYou are right, but I don't have a good idea to combine them currently, because the example is a complete and independent package structure.\r\n\r\nHow about exclude the `example` folder currently? like before. http://archive.apache.org/dist/ratis/2.3.0/apache-ratis-2.3.0-bin.tar.gz\r\n\r\nAnd, I raised a new issue to solve the problem https://issues.apache.org/jira/browse/RATIS-1667","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1208952766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1209470089","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1209470089","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1209470089,"node_id":"IC_kwDOBMxbGc5IFwyJ","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-09T14:39:53Z","updated_at":"2022-08-09T14:39:53Z","author_association":"MEMBER","body":"@szetszwo OK, I'll split it into subtasks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1209470089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1209715215","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1209715215","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1209715215,"node_id":"IC_kwDOBMxbGc5IGsoP","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-09T18:15:18Z","updated_at":"2022-08-09T18:15:18Z","author_association":"CONTRIBUTOR","body":"> How about exclude the example folder currently? like before. http://archive.apache.org/dist/ratis/2.3.0/apache-ratis-2.3.0-bin.tar.gz\r\n>\r\n> And, I raised a new issue to solve the problem https://issues.apache.org/jira/browse/RATIS-1667\r\n\r\nSure, let's exclude the example folder here and fix it in RATIS-1667.  Thanks.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1209715215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210036621","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1210036621","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1210036621,"node_id":"IC_kwDOBMxbGc5IH7GN","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T01:02:48Z","updated_at":"2022-08-10T01:03:56Z","author_association":"MEMBER","body":"> Sure, let's exclude the example folder here and fix it in RATIS-1667. Thanks.\r\n\r\nWill continue trying to resolve it. Thanks for the suggestion, patch is updated accordingly.\r\n\r\nThe final package structure.\r\n\r\n![image](https://user-images.githubusercontent.com/95013770/183787854-82cc0777-e973-4feb-a645-fbf4baefb1c1.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210036621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210094884","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1210094884","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1210094884,"node_id":"IC_kwDOBMxbGc5IIJUk","user":{"login":"charlesy6","id":86483005,"node_id":"MDQ6VXNlcjg2NDgzMDA1","avatar_url":"https://avatars.githubusercontent.com/u/86483005?v=4","gravatar_id":"","url":"https://api.github.com/users/charlesy6","html_url":"https://github.com/charlesy6","followers_url":"https://api.github.com/users/charlesy6/followers","following_url":"https://api.github.com/users/charlesy6/following{/other_user}","gists_url":"https://api.github.com/users/charlesy6/gists{/gist_id}","starred_url":"https://api.github.com/users/charlesy6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/charlesy6/subscriptions","organizations_url":"https://api.github.com/users/charlesy6/orgs","repos_url":"https://api.github.com/users/charlesy6/repos","events_url":"https://api.github.com/users/charlesy6/events{/privacy}","received_events_url":"https://api.github.com/users/charlesy6/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T03:02:51Z","updated_at":"2022-08-10T03:02:51Z","author_association":"NONE","body":"Right, many modules are missing from the original package structure.  ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210094884/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210109510","html_url":"https://github.com/apache/ratis/pull/705#issuecomment-1210109510","issue_url":"https://api.github.com/repos/apache/ratis/issues/705","id":1210109510,"node_id":"IC_kwDOBMxbGc5IIM5G","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T03:30:32Z","updated_at":"2022-08-10T03:30:32Z","author_association":"MEMBER","body":"> @leo65535 , thanks for the update. If the fileSet commented out are not useful. Let's remove them in the next pull request.\r\n> \r\n> +1 The change looks good.\r\n\r\nWill do.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210109510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210355749","html_url":"https://github.com/apache/ratis/pull/706#issuecomment-1210355749","issue_url":"https://api.github.com/repos/apache/ratis/issues/706","id":1210355749,"node_id":"IC_kwDOBMxbGc5IJJAl","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T08:44:00Z","updated_at":"2022-08-10T08:44:00Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1210355749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1211498534","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1211498534","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1211498534,"node_id":"IC_kwDOBMxbGc5INgAm","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T02:45:23Z","updated_at":"2022-08-11T02:56:10Z","author_association":"MEMBER","body":"hi @szetszwo, take a final check.\r\n\r\nI forget to exclude the `example` from the pkg, but it seems doesn't have a good way to resolve it. Trying to think a best way to solve it.\r\n\r\nDo we need to exclude it in this patch currently?\r\n\r\n![image](https://user-images.githubusercontent.com/95013770/184055959-04db6928-f78e-48a8-b7bd-ffaf58387e08.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1211498534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1211557470","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1211557470","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1211557470,"node_id":"IC_kwDOBMxbGc5INuZe","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T05:08:00Z","updated_at":"2022-08-11T05:08:00Z","author_association":"CONTRIBUTOR","body":"> Do we need to exclude it in this patch currently?\r\n\r\nYour choice.  We may do it here or in the next change.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1211557470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1211577015","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1211577015","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1211577015,"node_id":"IC_kwDOBMxbGc5INzK3","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T05:53:13Z","updated_at":"2022-08-11T05:54:55Z","author_association":"MEMBER","body":"hi @szetszwo, take a final check, keep the `example` in the pkg.\r\n\r\nthe latest pkg structure in local dev environment.\r\n```\r\n[dcadmin@dcadmin-work apache-ratis-3.0.0-SNAPSHOT-bin]$ du -chs *\r\n4.0K\tbin\r\n4.0K\tconf\r\n21M\texamples\r\n23M\tjars\r\n4.0K\tlibexec\r\n16K\tLICENSE\r\n8.0K\tNOTICE\r\n4.0K\tREADME.md\r\n44M\ttotal\r\n\r\n[dcadmin@dcadmin-work apache-ratis-3.0.0-SNAPSHOT-bin]$ ll\r\ntotal 32\r\ndrwxr-xr-x 2 dcadmin dcadmin    19 Jan 22  2020 bin\r\ndrwxr-xr-x 2 dcadmin dcadmin    30 Jan 22  2020 conf\r\ndrwxrwxr-x 5 dcadmin dcadmin    40 Aug 11 13:48 examples\r\ndrwxrwxr-x 2 dcadmin dcadmin  4096 Aug 11 13:48 jars\r\ndrwxr-xr-x 2 dcadmin dcadmin    35 Jan 22  2020 libexec\r\n-rw-r--r-- 1 dcadmin dcadmin 13419 Jan 22  2020 LICENSE\r\n-rw-r--r-- 1 dcadmin dcadmin  5246 Jan 22  2020 NOTICE\r\n-rw-r--r-- 1 dcadmin dcadmin  1201 Jan 22  2020 README.md\r\n\r\n[dcadmin@dcadmin-work apache-ratis-3.0.0-SNAPSHOT-bin]$ ll bin\r\ntotal 4\r\n-rwxr-xr-x 1 dcadmin dcadmin 2152 Jan 22  2020 ratis\r\n\r\n[dcadmin@dcadmin-work apache-ratis-3.0.0-SNAPSHOT-bin]$ ll examples/bin/\r\ntotal 20\r\n-rwxr-xr-x 1 dcadmin dcadmin 1138 Jan 22  2020 client.sh\r\n-rwxr-xr-x 1 dcadmin dcadmin 1859 Jan 22  2020 common.sh\r\n-rwxr-xr-x 1 dcadmin dcadmin  921 Jan 22  2020 server.sh\r\n-rwxr-xr-x 1 dcadmin dcadmin 1598 Jan 22  2020 start-all.sh\r\n-rwxr-xr-x 1 dcadmin dcadmin  922 Jan 22  2020 stop-all.sh\r\n\r\n[dcadmin@dcadmin-work apache-ratis-3.0.0-SNAPSHOT-bin]$ ll jars/\r\ntotal 23124\r\n-rw-r--r-- 1 dcadmin dcadmin    58284 Jan 22  2020 commons-cli-1.5.0.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   851531 Jan 22  2020 javassist-3.28.0-GA.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    19936 Jan 22  2020 jsr305-3.0.2.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   116713 Jan 22  2020 ratis-client-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   333476 Jan 22  2020 ratis-common-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   127010 Jan 22  2020 ratis-grpc-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    27006 Jan 22  2020 ratis-metrics-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   111493 Jan 22  2020 ratis-netty-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin  1419395 Jan 22  2020 ratis-proto-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin     7264 Jan 22  2020 ratis-replicated-map-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    46660 Jan 22  2020 ratis-resource-bundle-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   417972 Jan 22  2020 ratis-server-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    90832 Jan 22  2020 ratis-server-api-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin  1119277 Jan 22  2020 ratis-shell-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin     6825 Jan 22  2020 ratis-test-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin 18685030 Jan 22  2020 ratis-thirdparty-misc-1.0.1.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    11615 Jan 22  2020 ratis-tools-3.0.0-SNAPSHOT.jar\r\n-rw-r--r-- 1 dcadmin dcadmin   130398 Jan 22  2020 reflections-0.10.2.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    41424 Jan 22  2020 slf4j-api-1.7.29.jar\r\n-rw-r--r-- 1 dcadmin dcadmin    15240 Jan 22  2020 slf4j-simple-1.7.29.jar\r\n\r\n[dcadmin@dcadmin-work apache-ratis-3.0.0-SNAPSHOT-bin]$ bin/ratis sh\r\n[main] INFO org.reflections.Reflections - Reflections took 57 ms to scan 1 urls, producing 5 keys and 18 values\r\nUsage: ratis sh [generic options]\r\n\t [election [transfer] [stepDown] [pause] [resume]]         \r\n\t [group [info] [list]]                                     \r\n\t [peer [add] [remove] [setPriority]]                       \r\n\t [snapshot [create]] \r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1211577015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1212345305","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1212345305","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1212345305,"node_id":"IC_kwDOBMxbGc5IQuvZ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-11T18:25:45Z","updated_at":"2022-08-11T18:25:45Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , there is a test failure which can be reproduced.  Could you take a look?\r\nhttps://github.com/apache/ratis/runs/7793088310?check_suite_focus=true#step:5:625\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1212345305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1212634573","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1212634573","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1212634573,"node_id":"IC_kwDOBMxbGc5IR1XN","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T01:05:19Z","updated_at":"2022-08-12T01:07:19Z","author_association":"MEMBER","body":"> @leo65535 , thanks for the update! There are some classes in ratis-shell-3.0.0-SNAPSHOT.jar duplicated with the classes in other jars. \r\n\r\nNice catch, I had remove the shade plugin from the shell module, the patch has been updated, thanks. Also checked the `bin/ratis` command, everything is ok.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1212634573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1212892867","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1212892867","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1212892867,"node_id":"IC_kwDOBMxbGc5IS0bD","user":{"login":"xleoken","id":95013770,"node_id":"U_kgDOBanLig","avatar_url":"https://avatars.githubusercontent.com/u/95013770?v=4","gravatar_id":"","url":"https://api.github.com/users/xleoken","html_url":"https://github.com/xleoken","followers_url":"https://api.github.com/users/xleoken/followers","following_url":"https://api.github.com/users/xleoken/following{/other_user}","gists_url":"https://api.github.com/users/xleoken/gists{/gist_id}","starred_url":"https://api.github.com/users/xleoken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xleoken/subscriptions","organizations_url":"https://api.github.com/users/xleoken/orgs","repos_url":"https://api.github.com/users/xleoken/repos","events_url":"https://api.github.com/users/xleoken/events{/privacy}","received_events_url":"https://api.github.com/users/xleoken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T09:04:54Z","updated_at":"2022-08-12T09:04:54Z","author_association":"MEMBER","body":"> \r\n\r\nNice, will ask someone else check the permission issuce again.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1212892867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1213371038","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1213371038","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1213371038,"node_id":"IC_kwDOBMxbGc5IUpKe","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T17:56:42Z","updated_at":"2022-08-12T17:56:42Z","author_association":"CONTRIBUTOR","body":"@leo65535 , FYI, the scripts in our 2.3.0 release also do not have execute permission after untar:\r\n```shell\r\n$ls -l apache-ratis-2.3.0/dev-support/checks\r\ntotal 72\r\n-rw-r--r--@ 1 szetszwo  staff  3396 Jan 22  2020 _mvn_unit_report.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1189 Jan 22  2020 author.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1000 Jan 22  2020 build.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1937 Jan 22  2020 checkstyle.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1695 Jan 22  2020 findbugs.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1268 Jan 22  2020 rat.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1384 Jan 22  2020 shellcheck.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1197 Jan 22  2020 sonar.sh\r\n-rw-r--r--@ 1 szetszwo  staff  1249 Jan 22  2020 unit.sh\r\n```\r\nIn the project dir, the original scripts do have execute permission\r\n```shell\r\n$ls -l dev-support/checks\r\ntotal 72\r\n-rwxr-xr-x  1 szetszwo  staff  3396 May 19 08:14 _mvn_unit_report.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1189 May 19 08:14 author.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1005 May 19 08:14 build.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1937 May 19 08:14 checkstyle.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1695 May 19 08:14 findbugs.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1268 May 19 08:14 rat.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1384 May 19 08:14 shellcheck.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1197 May 19 08:14 sonar.sh\r\n-rwxr-xr-x  1 szetszwo  staff  1249 May 19 08:14 unit.sh\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1213371038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1213372443","html_url":"https://github.com/apache/ratis/pull/711#issuecomment-1213372443","issue_url":"https://api.github.com/repos/apache/ratis/issues/711","id":1213372443,"node_id":"IC_kwDOBMxbGc5IUpgb","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T17:58:34Z","updated_at":"2022-08-12T17:58:34Z","author_association":"CONTRIBUTOR","body":"The script files inside apache-ratis-2.3.0-bin.tar.gz  also do not have execute permission\r\n```shell\r\n$tar tvf apache-ratis-2.3.0-bin.tar.gz  | grep sh\r\n-rw-r--r--  0 root   root     3396 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/_mvn_unit_report.sh\r\n-rw-r--r--  0 root   root     1189 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/author.sh\r\n-rw-r--r--  0 root   root     1000 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/build.sh\r\n-rw-r--r--  0 root   root     1937 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/checkstyle.sh\r\n-rw-r--r--  0 root   root     1695 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/findbugs.sh\r\n-rw-r--r--  0 root   root     1268 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/rat.sh\r\n-rw-r--r--  0 root   root     1384 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/shellcheck.sh\r\n-rw-r--r--  0 root   root     1197 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/sonar.sh\r\n-rw-r--r--  0 root   root     1249 Jan 22  2020 apache-ratis-2.3.0/dev-support/checks/unit.sh\r\n-rw-r--r--  0 root   root     1690 Jan 22  2020 apache-ratis-2.3.0/dev-support/ci/common.sh\r\n-rw-r--r--  0 root   root     2103 Jan 22  2020 apache-ratis-2.3.0/dev-support/ci/nightly-build.sh\r\n-rw-r--r--  0 root   root     2113 Jan 22  2020 apache-ratis-2.3.0/dev-support/ci/precommit-build.sh\r\n-rw-r--r--  0 root   root     1091 Jan 22  2020 apache-ratis-2.3.0/dev-support/intellij/install-runconfig.sh\r\n-rw-r--r--  0 root   root     6319 Jan 22  2020 apache-ratis-2.3.0/dev-support/make_rc.sh\r\n-rw-r--r--  0 root   root     1382 Jan 22  2020 apache-ratis-2.3.0/dev-support/run-test-repeatedly.sh\r\n-rw-r--r--  0 root   root     1345 Jan 22  2020 apache-ratis-2.3.0/dev-support/vagrant/bin/start_ratis_load_gen.sh\r\n-rw-r--r--  0 root   root     1066 Jan 22  2020 apache-ratis-2.3.0/dev-support/vagrant/bin/start_ratis_server.sh\r\n-rw-r--r--  0 root   root     2509 Jan 22  2020 apache-ratis-2.3.0/dev-support/vagrant/run_all_tests.sh\r\n-rw-r--r--  0 root   root     1594 Jan 22  2020 apache-ratis-2.3.0/dev-support/yetus-personality.sh\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1213372443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216299300","html_url":"https://github.com/apache/ratis/pull/709#issuecomment-1216299300","issue_url":"https://api.github.com/repos/apache/ratis/issues/709","id":1216299300,"node_id":"IC_kwDOBMxbGc5If0Ek","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T08:17:43Z","updated_at":"2022-08-16T08:17:43Z","author_association":"CONTRIBUTOR","body":"@drriguz, could you see if this change is good?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216299300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216379366","html_url":"https://github.com/apache/ratis/pull/713#issuecomment-1216379366","issue_url":"https://api.github.com/repos/apache/ratis/issues/713","id":1216379366,"node_id":"IC_kwDOBMxbGc5IgHnm","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T09:21:32Z","updated_at":"2022-08-16T09:21:32Z","author_association":"MEMBER","body":"@codings-dan Thanks for the review! Here's how I solve these two problem:\r\nI add a callback in `setLeader` to disable firstElectionTimeout whenever server has a known leader. That means,\r\n1. The `firstElectionTimeout` is set to false when a new group leader is successfully elected. \r\n2. The `firstElectionTimeout` in two followers is set to false since Leader's AppendEntries will trigger `setLeader` method.\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216379366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216625923","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1216625923","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1216625923,"node_id":"IC_kwDOBMxbGc5IhD0D","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T13:17:09Z","updated_at":"2022-08-16T13:17:09Z","author_association":"CONTRIBUTOR","body":"TestRaftSnapshotWithNetty failure seems irrelevant. Anyway, it's fixed. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216625923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216670676","html_url":"https://github.com/apache/ratis/pull/715#issuecomment-1216670676","issue_url":"https://api.github.com/repos/apache/ratis/issues/715","id":1216670676,"node_id":"IC_kwDOBMxbGc5IhOvU","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T13:53:39Z","updated_at":"2022-08-16T13:53:39Z","author_association":"CONTRIBUTOR","body":"@szetszwo Could you help take a look at this pull request? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1216670676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217340523","html_url":"https://github.com/apache/ratis/pull/709#issuecomment-1217340523","issue_url":"https://api.github.com/repos/apache/ratis/issues/709","id":1217340523,"node_id":"IC_kwDOBMxbGc5IjyRr","user":{"login":"drriguz","id":6427851,"node_id":"MDQ6VXNlcjY0Mjc4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6427851?v=4","gravatar_id":"","url":"https://api.github.com/users/drriguz","html_url":"https://github.com/drriguz","followers_url":"https://api.github.com/users/drriguz/followers","following_url":"https://api.github.com/users/drriguz/following{/other_user}","gists_url":"https://api.github.com/users/drriguz/gists{/gist_id}","starred_url":"https://api.github.com/users/drriguz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drriguz/subscriptions","organizations_url":"https://api.github.com/users/drriguz/orgs","repos_url":"https://api.github.com/users/drriguz/repos","events_url":"https://api.github.com/users/drriguz/events{/privacy}","received_events_url":"https://api.github.com/users/drriguz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T01:08:16Z","updated_at":"2022-08-17T01:08:16Z","author_association":"CONTRIBUTOR","body":"+1 Change looks good,\r\nJust one suggestion, may be not related to this issue itself:\r\n\r\nCan we clarify what happens when `applyTransaction` failed?  \r\nSee the modifications below(marked with `+`), which is copied from your reply from the mail list: \r\n```\r\n  /**\r\n   * Apply a committed log entry to the state machine. This method is called sequentially in\r\n   * strict serial order that the transactions have been committed in the log. Note that this\r\n   * method, which returns a future, is asynchronous. The state machine implementation may\r\n   * choose to apply the log entries in parallel. In that case, the order of applying entries to\r\n   * state machine could possibly be different from the log commit order.\r\n   *  +\r\n   *  + The implementation should be deterministic so that the log can be replayed in any machine,\r\n   *  + Note that, if there are three or more servers, \r\n   *  + the Raft algorithm makes sure the log remains consistent even if there are hardware errors \r\n   *  + in one machine (or less then the majority number of machines).\r\n   *  +\r\n   *  + Any exception thrown in this method will be treated as unrecoverable error(such as hardware error),\r\n   *  + and the server will be force shut down when it occurs. \r\n   *  + Admin should manually fix the underlying problem and then restart the machine.\r\n\r\n   * @param trx the transaction state including the log entry that has been committed to a quorum\r\n   *            of the raft peers\r\n   */\r\n  CompletableFuture<Message> applyTransaction(TransactionContext trx);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217340523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217359174","html_url":"https://github.com/apache/ratis/pull/709#issuecomment-1217359174","issue_url":"https://api.github.com/repos/apache/ratis/issues/709","id":1217359174,"node_id":"IC_kwDOBMxbGc5Ij21G","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T01:34:59Z","updated_at":"2022-08-17T01:34:59Z","author_association":"CONTRIBUTOR","body":"@drriguz , thanks for the suggestion.  Just have revised the javadoc of applyTransaction(..).","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217359174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217361979","html_url":"https://github.com/apache/ratis/pull/717#issuecomment-1217361979","issue_url":"https://api.github.com/repos/apache/ratis/issues/717","id":1217361979,"node_id":"IC_kwDOBMxbGc5Ij3g7","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T01:40:35Z","updated_at":"2022-08-17T01:40:35Z","author_association":"CONTRIBUTOR","body":"+1.   Thanks @szetszwo . ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217361979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217362385","html_url":"https://github.com/apache/ratis/pull/699#issuecomment-1217362385","issue_url":"https://api.github.com/repos/apache/ratis/issues/699","id":1217362385,"node_id":"IC_kwDOBMxbGc5Ij3nR","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T01:41:23Z","updated_at":"2022-08-17T01:41:23Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo  for the code review. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217362385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217368872","html_url":"https://github.com/apache/ratis/pull/709#issuecomment-1217368872","issue_url":"https://api.github.com/repos/apache/ratis/issues/709","id":1217368872,"node_id":"IC_kwDOBMxbGc5Ij5Mo","user":{"login":"drriguz","id":6427851,"node_id":"MDQ6VXNlcjY0Mjc4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6427851?v=4","gravatar_id":"","url":"https://api.github.com/users/drriguz","html_url":"https://github.com/drriguz","followers_url":"https://api.github.com/users/drriguz/followers","following_url":"https://api.github.com/users/drriguz/following{/other_user}","gists_url":"https://api.github.com/users/drriguz/gists{/gist_id}","starred_url":"https://api.github.com/users/drriguz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drriguz/subscriptions","organizations_url":"https://api.github.com/users/drriguz/orgs","repos_url":"https://api.github.com/users/drriguz/repos","events_url":"https://api.github.com/users/drriguz/events{/privacy}","received_events_url":"https://api.github.com/users/drriguz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T01:55:07Z","updated_at":"2022-08-17T01:55:07Z","author_association":"CONTRIBUTOR","body":"+1 Change looks good! ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217368872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217386040","html_url":"https://github.com/apache/ratis/pull/715#issuecomment-1217386040","issue_url":"https://api.github.com/repos/apache/ratis/issues/715","id":1217386040,"node_id":"IC_kwDOBMxbGc5Ij9Y4","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T02:29:08Z","updated_at":"2022-08-17T02:29:08Z","author_association":"CONTRIBUTOR","body":"@szetszwo I have resolved the conflicts, please take a look again, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217386040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217659170","html_url":"https://github.com/apache/ratis/pull/715#issuecomment-1217659170","issue_url":"https://api.github.com/repos/apache/ratis/issues/715","id":1217659170,"node_id":"IC_kwDOBMxbGc5IlAEi","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T08:09:15Z","updated_at":"2022-08-17T08:09:15Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for helping review the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1217659170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219494581","html_url":"https://github.com/apache/ratis/pull/713#issuecomment-1219494581","issue_url":"https://api.github.com/repos/apache/ratis/issues/713","id":1219494581,"node_id":"IC_kwDOBMxbGc5IsAK1","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-18T13:29:17Z","updated_at":"2022-08-18T13:29:17Z","author_association":"MEMBER","body":"@szetszwo Thanks for the reviews, I've made the corresponding changes. A little question:\r\nthe `fallbackKey` and `fallbackValue` are simply printed in `ConfUtil.java`, they are not actually used to substitute RaftProperties KV pair, see https://github.com/apache/ratis/blob/323bd1017afdbe03f70cccb172412e6fab221797/ratis-common/src/main/java/org/apache/ratis/conf/ConfUtils.java#L233. In that case, what's the meaning of using fallbackKey or fallbackValue?  ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219494581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219652216","html_url":"https://github.com/apache/ratis/pull/651#issuecomment-1219652216","issue_url":"https://api.github.com/repos/apache/ratis/issues/651","id":1219652216,"node_id":"IC_kwDOBMxbGc5Ismp4","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-18T15:45:13Z","updated_at":"2022-08-18T15:45:13Z","author_association":"CONTRIBUTOR","body":"@lokeshj1703 ,  thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219652216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219728245","html_url":"https://github.com/apache/ratis/pull/713#issuecomment-1219728245","issue_url":"https://api.github.com/repos/apache/ratis/issues/713","id":1219728245,"node_id":"IC_kwDOBMxbGc5Is5N1","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-18T17:03:51Z","updated_at":"2022-08-18T17:03:51Z","author_association":"CONTRIBUTOR","body":"> . In that case, what's the meaning of using fallbackKey or fallbackValue?\r\n\r\n@SzyWilliam , Good catch!  It is a bug.  It should be\r\n```java\r\n@@ -236,10 +247,11 @@ public interface ConfUtils {\r\n     T value = get(getter, key, defaultValue, null, assertions);\r\n     if (value != defaultValue) {\r\n       logGet(key, value, defaultValue, logger);\r\n+      return value;\r\n     } else {\r\n       logFallback(key, fallbackKey, fallbackValue, logger);\r\n+      return fallbackValue;\r\n     }\r\n-    return value;\r\n   }\r\n```\r\nCould you include it in this change?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219728245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219758128","html_url":"https://github.com/apache/ratis/pull/719#issuecomment-1219758128","issue_url":"https://api.github.com/repos/apache/ratis/issues/719","id":1219758128,"node_id":"IC_kwDOBMxbGc5ItAgw","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-18T17:37:27Z","updated_at":"2022-08-18T17:37:27Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and committing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1219758128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1220190784","html_url":"https://github.com/apache/ratis/pull/713#issuecomment-1220190784","issue_url":"https://api.github.com/repos/apache/ratis/issues/713","id":1220190784,"node_id":"IC_kwDOBMxbGc5IuqJA","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-19T03:03:42Z","updated_at":"2022-08-19T03:03:42Z","author_association":"MEMBER","body":"@szetszwo Thanks for the review. I've include the fallback bugfix in this change.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1220190784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222363542","html_url":"https://github.com/apache/ratis/pull/722#issuecomment-1222363542","issue_url":"https://api.github.com/repos/apache/ratis/issues/722","id":1222363542,"node_id":"IC_kwDOBMxbGc5I28mW","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T13:28:02Z","updated_at":"2022-08-22T13:28:02Z","author_association":"CONTRIBUTOR","body":"@adoroszlai Could you help take a look at this pull request? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222363542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222400034","html_url":"https://github.com/apache/ratis/pull/722#issuecomment-1222400034","issue_url":"https://api.github.com/repos/apache/ratis/issues/722","id":1222400034,"node_id":"IC_kwDOBMxbGc5I3Fgi","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T13:56:54Z","updated_at":"2022-08-22T13:56:54Z","author_association":"CONTRIBUTOR","body":"@adoroszlai Thanks for helping review the code, let's have a try","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222400034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222414853","html_url":"https://github.com/apache/ratis/pull/722#issuecomment-1222414853","issue_url":"https://api.github.com/repos/apache/ratis/issues/722","id":1222414853,"node_id":"IC_kwDOBMxbGc5I3JIF","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T14:08:35Z","updated_at":"2022-08-22T14:08:35Z","author_association":"CONTRIBUTOR","body":"@adoroszlai hi, it seems that new ci can't be triggered now, do you know what's going on?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222414853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222428766","html_url":"https://github.com/apache/ratis/pull/722#issuecomment-1222428766","issue_url":"https://api.github.com/repos/apache/ratis/issues/722","id":1222428766,"node_id":"IC_kwDOBMxbGc5I3Mhe","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T14:19:06Z","updated_at":"2022-08-22T14:19:06Z","author_association":"CONTRIBUTOR","body":"> it seems that new ci can't be triggered now, do you know what's going on?\r\n\r\nYes, indentation for the new setup-java step does not match the existing one.  Sorry about that.\r\n\r\n[Invalid workflow file: .github/workflows/post-commit.yml#L176](https://github.com/apache/ratis/actions/runs/2904516017/workflow)\r\nYou have an error in your yaml syntax on line 176","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222428766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222506570","html_url":"https://github.com/apache/ratis/pull/722#issuecomment-1222506570","issue_url":"https://api.github.com/repos/apache/ratis/issues/722","id":1222506570,"node_id":"IC_kwDOBMxbGc5I3fhK","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T15:19:15Z","updated_at":"2022-08-22T15:19:15Z","author_association":"CONTRIBUTOR","body":"@adoroszlai Thanks a lot for helping review and merge the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1222506570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1223422081","html_url":"https://github.com/apache/ratis/pull/721#issuecomment-1223422081","issue_url":"https://api.github.com/repos/apache/ratis/issues/721","id":1223422081,"node_id":"IC_kwDOBMxbGc5I6_CB","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T01:52:04Z","updated_at":"2022-08-23T01:52:04Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks a lot for helping review and merge the pull request!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1223422081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1223814307","html_url":"https://github.com/apache/ratis/pull/723#issuecomment-1223814307","issue_url":"https://api.github.com/repos/apache/ratis/issues/723","id":1223814307,"node_id":"IC_kwDOBMxbGc5I8eyj","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T09:34:57Z","updated_at":"2022-08-23T09:34:57Z","author_association":"CONTRIBUTOR","body":"@szetszwo Could you help take a look at the pull request? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1223814307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1223890730","html_url":"https://github.com/apache/ratis/pull/723#issuecomment-1223890730","issue_url":"https://api.github.com/repos/apache/ratis/issues/723","id":1223890730,"node_id":"IC_kwDOBMxbGc5I8xcq","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T10:45:54Z","updated_at":"2022-08-23T10:46:14Z","author_association":"CONTRIBUTOR","body":"> Thanks @codings-dan for the patch.\r\n> \r\n> https://github.com/apache/ratis/blob/fa2ec7c2d520b874377633ac225923b75d8c1830/pom.xml#L212\r\n> \r\n> I think `shaded.grpc.version` should be changed to match:\r\n> \r\n> https://github.com/apache/ratis-thirdparty/blob/1.0.2/pom.xml#L73\r\n\r\n@adoroszlai Good catch! I have matched the grpc version, PTAL, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1223890730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1224326568","html_url":"https://github.com/apache/ratis/pull/723#issuecomment-1224326568","issue_url":"https://api.github.com/repos/apache/ratis/issues/723","id":1224326568,"node_id":"IC_kwDOBMxbGc5I-b2o","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T16:41:39Z","updated_at":"2022-08-23T16:41:55Z","author_association":"CONTRIBUTOR","body":"@codings-dan , could you also remove shaded.dropwizard.* as below?  They are not used anywhere.\r\n```xml\r\n+++ b/pom.xml\r\n@@ -216,10 +216,6 @@\r\n     <test.exclude.pattern>_</test.exclude.pattern>\r\n     <!-- number of threads/forks to use when running tests in parallel, see parallel-tests profile -->\r\n     <testsThreadCount>4</testsThreadCount>\r\n-\r\n-    <!--metrics-->\r\n-    <shaded.dropwizard.version>4.2.9</shaded.dropwizard.version>\r\n-    <shaded.dropwizard.ganglia.version>3.2.6</shaded.dropwizard.ganglia.version>\r\n   </properties>\r\n \r\n   <dependencyManagement>\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1224326568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1225080423","html_url":"https://github.com/apache/ratis/pull/723#issuecomment-1225080423","issue_url":"https://api.github.com/repos/apache/ratis/issues/723","id":1225080423,"node_id":"IC_kwDOBMxbGc5JBT5n","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T01:53:04Z","updated_at":"2022-08-24T01:53:04Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for helping review the code, I have changed it, PTAL, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1225080423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1227934717","html_url":"https://github.com/apache/ratis/pull/718#issuecomment-1227934717","issue_url":"https://api.github.com/repos/apache/ratis/issues/718","id":1227934717,"node_id":"IC_kwDOBMxbGc5JMMv9","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T01:51:19Z","updated_at":"2022-08-26T01:51:19Z","author_association":"CONTRIBUTOR","body":"@lokeshj1703 , thanks a lot for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1227934717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228204283","html_url":"https://github.com/apache/ratis/pull/700#issuecomment-1228204283","issue_url":"https://api.github.com/repos/apache/ratis/issues/700","id":1228204283,"node_id":"IC_kwDOBMxbGc5JNOj7","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T08:22:14Z","updated_at":"2022-08-26T08:22:14Z","author_association":"MEMBER","body":"This PR will be split into subtasks, so I'll just close it now.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228204283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228597622","html_url":"https://github.com/apache/ratis/pull/712#issuecomment-1228597622","issue_url":"https://api.github.com/repos/apache/ratis/issues/712","id":1228597622,"node_id":"IC_kwDOBMxbGc5JOul2","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T14:54:59Z","updated_at":"2022-08-26T15:01:29Z","author_association":"MEMBER","body":"@szetszwo Thanks for the reviews! I've made corresponding changes. However, if we have a function return type `Void` and return value `null`, `Optional.map` will return `Optional.Empty`, and `isPresent` on `Empty` will return false. Therefore, I have the previous code `return true` unmodified so that `sent` is properly assigned. Please take a look at it~","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228597622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228620353","html_url":"https://github.com/apache/ratis/pull/725#issuecomment-1228620353","issue_url":"https://api.github.com/repos/apache/ratis/issues/725","id":1228620353,"node_id":"IC_kwDOBMxbGc5JO0JB","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T15:13:50Z","updated_at":"2022-08-26T15:13:50Z","author_association":"CONTRIBUTOR","body":"@adoroszlai Thanks for help test 2.4.0-rc0, are there any other issues in the process of testing 2.4.0-rc0 with ozone? We can launch 2.4.0-rc1 after all known issues are resolved.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228620353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228680914","html_url":"https://github.com/apache/ratis/pull/726#issuecomment-1228680914","issue_url":"https://api.github.com/repos/apache/ratis/issues/726","id":1228680914,"node_id":"IC_kwDOBMxbGc5JPC7S","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T16:10:45Z","updated_at":"2022-08-26T16:10:45Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and committing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228680914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228681636","html_url":"https://github.com/apache/ratis/pull/725#issuecomment-1228681636","issue_url":"https://api.github.com/repos/apache/ratis/issues/725","id":1228681636,"node_id":"IC_kwDOBMxbGc5JPDGk","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T16:11:30Z","updated_at":"2022-08-26T16:11:30Z","author_association":"CONTRIBUTOR","body":"> Thanks for help test 2.4.0-rc0, are there any other issues in the process of testing 2.4.0-rc0 with ozone?\r\n\r\n@codings-dan So far I've only found [RATIS-1691](https://issues.apache.org/jira/browse/RATIS-1691) in addition to this one.  Currently running Ozone integration tests.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228681636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228714643","html_url":"https://github.com/apache/ratis/pull/725#issuecomment-1228714643","issue_url":"https://api.github.com/repos/apache/ratis/issues/725","id":1228714643,"node_id":"IC_kwDOBMxbGc5JPLKT","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T16:48:29Z","updated_at":"2022-08-26T16:48:29Z","author_association":"CONTRIBUTOR","body":"Thanks @codings-dan for the review, @szetszwo for reviewing and merging it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228714643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228720557","html_url":"https://github.com/apache/ratis/pull/724#issuecomment-1228720557","issue_url":"https://api.github.com/repos/apache/ratis/issues/724","id":1228720557,"node_id":"IC_kwDOBMxbGc5JPMmt","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T16:55:55Z","updated_at":"2022-08-26T16:55:55Z","author_association":"CONTRIBUTOR","body":"Oops.  I accidentally merged this.  Will revert the commit.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228720557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228738336","html_url":"https://github.com/apache/ratis/pull/724#issuecomment-1228738336","issue_url":"https://api.github.com/repos/apache/ratis/issues/724","id":1228738336,"node_id":"IC_kwDOBMxbGc5JPQ8g","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T17:17:12Z","updated_at":"2022-08-26T17:17:12Z","author_association":"CONTRIBUTOR","body":"Retrying this on #728 .","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1228738336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1229392727","html_url":"https://github.com/apache/ratis/pull/730#issuecomment-1229392727","issue_url":"https://api.github.com/repos/apache/ratis/issues/730","id":1229392727,"node_id":"IC_kwDOBMxbGc5JRwtX","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-28T06:46:28Z","updated_at":"2022-08-28T06:46:28Z","author_association":"MEMBER","body":"@szetszwo Thanks for the review. I've made changes on code, please take a look at it~","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1229392727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1229878526","html_url":"https://github.com/apache/ratis/pull/730#issuecomment-1229878526","issue_url":"https://api.github.com/repos/apache/ratis/issues/730","id":1229878526,"node_id":"IC_kwDOBMxbGc5JTnT-","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T07:19:25Z","updated_at":"2022-08-29T07:19:25Z","author_association":"MEMBER","body":"@szetszwo Thanks for reviews! I've made changes on code. Please take a look at it~ ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1229878526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231085803","html_url":"https://github.com/apache/ratis/pull/718#issuecomment-1231085803","issue_url":"https://api.github.com/repos/apache/ratis/issues/718","id":1231085803,"node_id":"IC_kwDOBMxbGc5JYODr","user":{"login":"captainzmc","id":13825159,"node_id":"MDQ6VXNlcjEzODI1MTU5","avatar_url":"https://avatars.githubusercontent.com/u/13825159?v=4","gravatar_id":"","url":"https://api.github.com/users/captainzmc","html_url":"https://github.com/captainzmc","followers_url":"https://api.github.com/users/captainzmc/followers","following_url":"https://api.github.com/users/captainzmc/following{/other_user}","gists_url":"https://api.github.com/users/captainzmc/gists{/gist_id}","starred_url":"https://api.github.com/users/captainzmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captainzmc/subscriptions","organizations_url":"https://api.github.com/users/captainzmc/orgs","repos_url":"https://api.github.com/users/captainzmc/repos","events_url":"https://api.github.com/users/captainzmc/events{/privacy}","received_events_url":"https://api.github.com/users/captainzmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T03:04:27Z","updated_at":"2022-08-30T03:41:53Z","author_association":"MEMBER","body":"Hi @szetszwo, thank you for this fix.\r\nI tested Ratis-2.4.0 rc1 in ozone and I found that we cherry-pick this patch into 2.4.0 release branch.\r\nThere are two possible problems here:\r\n1. The interface compatibility issues, ozone is directly use [GroupManagementRequest.newAdd](https://github.com/captainzmc/hadoop-ozone/commit/bfa69f788d9f9c82218e5a8dc2801a33893df9f2#diff-7048844bed8c3f7f0689c28cdd4edd3ac3a70139e3c01b87fd79add572315ed3R754), this method changes in the PR maybe not compatible.\r\n2. Regardless of whether I set the format in newAdd to true or false, I will see many Storage directory not found exceptions in the UT of Ozone. These exceptions may be caused by this PR.See the test UT, [set format to false](https://github.com/captainzmc/hadoop-ozone/runs/8072516884?check_suite_focus=true#step:5:9813) and [set format to true](https://github.com/captainzmc/hadoop-ozone/runs/8072573474?check_suite_focus=true#step:5:5170) \r\n\r\nSo do we need revert this commit in 2.4.0 branch or make newAdd backwards compatible? cc @codings-dan @adoroszlai ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231085803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231215723","html_url":"https://github.com/apache/ratis/pull/718#issuecomment-1231215723","issue_url":"https://api.github.com/repos/apache/ratis/issues/718","id":1231215723,"node_id":"IC_kwDOBMxbGc5JYtxr","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T06:40:10Z","updated_at":"2022-08-30T06:40:10Z","author_association":"CONTRIBUTOR","body":"@captainzmc , thanks a lot for testing the rc1!\r\n\r\n> The interface compatibility issues, ozone is directly use [GroupManagementRequest.newAdd](https://github.com/captainzmc/hadoop-ozone/commit/bfa69f788d9f9c82218e5a8dc2801a33893df9f2#diff-7048844bed8c3f7f0689c28cdd4edd3ac3a70139e3c01b87fd79add572315ed3R754) ...\r\n\r\nOops, we should add back the old method then.\r\n\r\n>  ... many Storage directory not found  ...\r\n\r\nThe reason is that [the default startup option is RECOVER](https://github.com/apache/ratis/blob/62edc69ebc46d7ac2871fb815c2f86ab4c3e933f/ratis-server-api/src/main/java/org/apache/ratis/server/RaftServer.java#L196).  It probably is better to change the default to FORMAT.\r\n\r\nI am fine if we revert this from branch-2 and release 2.4.0.  A workaround for the bug is to specify exactly one storage dir in the conf.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231215723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231221544","html_url":"https://github.com/apache/ratis/pull/718#issuecomment-1231221544","issue_url":"https://api.github.com/repos/apache/ratis/issues/718","id":1231221544,"node_id":"IC_kwDOBMxbGc5JYvMo","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T06:47:06Z","updated_at":"2022-08-30T06:47:06Z","author_association":"CONTRIBUTOR","body":"Filed [RATIS-1694](https://issues.apache.org/jira/browse/RATIS-1694).","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231221544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231765653","html_url":"https://github.com/apache/ratis/pull/730#issuecomment-1231765653","issue_url":"https://api.github.com/repos/apache/ratis/issues/730","id":1231765653,"node_id":"IC_kwDOBMxbGc5Ja0CV","user":{"login":"SzyWilliam","id":48054931,"node_id":"MDQ6VXNlcjQ4MDU0OTMx","avatar_url":"https://avatars.githubusercontent.com/u/48054931?v=4","gravatar_id":"","url":"https://api.github.com/users/SzyWilliam","html_url":"https://github.com/SzyWilliam","followers_url":"https://api.github.com/users/SzyWilliam/followers","following_url":"https://api.github.com/users/SzyWilliam/following{/other_user}","gists_url":"https://api.github.com/users/SzyWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/SzyWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SzyWilliam/subscriptions","organizations_url":"https://api.github.com/users/SzyWilliam/orgs","repos_url":"https://api.github.com/users/SzyWilliam/repos","events_url":"https://api.github.com/users/SzyWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/SzyWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T14:41:47Z","updated_at":"2022-08-30T14:41:47Z","author_association":"MEMBER","body":"@szetszwo Thanks for the review! I've made changes on code. Maybe we can move AppendEntriesListener and its navigable map to LeaderStateImpl, as \r\n1. AppendEntriesListener is only valid and be called when peer is in valid leadership.\r\n2. AppendEntriesListener map should have the same lifecycle with LeaderState. Remaining pending listeners in map should be cleared when leader steps down, and the map should be recreated empty when peer is reelected as leader again. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1231765653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232244297","html_url":"https://github.com/apache/ratis/pull/730#issuecomment-1232244297","issue_url":"https://api.github.com/repos/apache/ratis/issues/730","id":1232244297,"node_id":"IC_kwDOBMxbGc5Jco5J","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T22:42:02Z","updated_at":"2022-08-30T22:42:02Z","author_association":"CONTRIBUTOR","body":"@SzyWilliam , sorry that I just refreshed the code change previously and missed your question.\r\n\r\nThe entire ReadRequests should belong to LeaderStateImpl since it mainly takes care about broadcasting heartbeats and processing the replies.  We may consider moving it to LeaderStateImpl.  However, I seem to recall that it may be inconvenient to do so.  Please try it in the next JIRA.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232244297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232381754","html_url":"https://github.com/apache/ratis/pull/731#issuecomment-1232381754","issue_url":"https://api.github.com/repos/apache/ratis/issues/731","id":1232381754,"node_id":"IC_kwDOBMxbGc5JdKc6","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T02:36:26Z","updated_at":"2022-08-31T02:36:26Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks for reviewing this!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232381754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232559443","html_url":"https://github.com/apache/ratis/pull/728#issuecomment-1232559443","issue_url":"https://api.github.com/repos/apache/ratis/issues/728","id":1232559443,"node_id":"IC_kwDOBMxbGc5Jd11T","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T07:21:47Z","updated_at":"2022-08-31T07:21:47Z","author_association":"CONTRIBUTOR","body":"@szetszwo Could you fix the conflict and then we can merge this pull request, thanks!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232559443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232685557","html_url":"https://github.com/apache/ratis/pull/728#issuecomment-1232685557","issue_url":"https://api.github.com/repos/apache/ratis/issues/728","id":1232685557,"node_id":"IC_kwDOBMxbGc5JeUn1","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T09:17:20Z","updated_at":"2022-08-31T09:17:20Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks for reviewing this.  Just have updated it with the master branch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1232685557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1234367071","html_url":"https://github.com/apache/ratis/pull/718#issuecomment-1234367071","issue_url":"https://api.github.com/repos/apache/ratis/issues/718","id":1234367071,"node_id":"IC_kwDOBMxbGc5JkvJf","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T14:32:55Z","updated_at":"2022-09-01T14:32:55Z","author_association":"CONTRIBUTOR","body":"@captainzmc , [RATIS-1694](https://issues.apache.org/jira/browse/RATIS-1694) is now merged.  Could you test if it could fix the problem so that we can include RATIS-1677 in 2.4.0?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1234367071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]