[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018134922","html_url":"https://github.com/apache/brpc/pull/1678#issuecomment-1018134922","issue_url":"https://api.github.com/repos/apache/brpc/issues/1678","id":1018134922,"node_id":"IC_kwDOBhmkcs48r4GK","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T03:29:04Z","updated_at":"2022-01-21T03:29:04Z","author_association":"CONTRIBUTOR","body":"Hi @EricccYang , This PR's content is covered by #1679. #1679  comes from #1657 , which has been pushed before 23 days ago, so I will merge #1679 , Thank you for your contribution again!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018134922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018138908","html_url":"https://github.com/apache/brpc/pull/1670#issuecomment-1018138908","issue_url":"https://api.github.com/repos/apache/brpc/issues/1670","id":1018138908,"node_id":"IC_kwDOBhmkcs48r5Ec","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T03:39:49Z","updated_at":"2022-01-21T03:39:49Z","author_association":"CONTRIBUTOR","body":"Thanks, @opheliaKyouko !","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018138908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018154955","html_url":"https://github.com/apache/brpc/pull/1678#issuecomment-1018154955","issue_url":"https://api.github.com/repos/apache/brpc/issues/1678","id":1018154955,"node_id":"IC_kwDOBhmkcs48r8_L","user":{"login":"EricccYang","id":53411596,"node_id":"MDQ6VXNlcjUzNDExNTk2","avatar_url":"https://avatars.githubusercontent.com/u/53411596?v=4","gravatar_id":"","url":"https://api.github.com/users/EricccYang","html_url":"https://github.com/EricccYang","followers_url":"https://api.github.com/users/EricccYang/followers","following_url":"https://api.github.com/users/EricccYang/following{/other_user}","gists_url":"https://api.github.com/users/EricccYang/gists{/gist_id}","starred_url":"https://api.github.com/users/EricccYang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EricccYang/subscriptions","organizations_url":"https://api.github.com/users/EricccYang/orgs","repos_url":"https://api.github.com/users/EricccYang/repos","events_url":"https://api.github.com/users/EricccYang/events{/privacy}","received_events_url":"https://api.github.com/users/EricccYang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T04:06:01Z","updated_at":"2022-01-21T04:06:01Z","author_association":"NONE","body":"Got it. Thank you!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018154955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018186823","html_url":"https://github.com/apache/brpc/issues/1676#issuecomment-1018186823","issue_url":"https://api.github.com/repos/apache/brpc/issues/1676","id":1018186823,"node_id":"IC_kwDOBhmkcs48sExH","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T05:11:31Z","updated_at":"2022-01-21T05:11:31Z","author_association":"CONTRIBUTOR","body":"Hi @LilyWangLL , #1679 also solves this problem, and it has been merged, could you try the master branch? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018186823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018495547","html_url":"https://github.com/apache/brpc/issues/1676#issuecomment-1018495547","issue_url":"https://api.github.com/repos/apache/brpc/issues/1676","id":1018495547,"node_id":"IC_kwDOBhmkcs48tQI7","user":{"login":"LilyWangLL","id":94091114,"node_id":"U_kgDOBZu3ag","avatar_url":"https://avatars.githubusercontent.com/u/94091114?v=4","gravatar_id":"","url":"https://api.github.com/users/LilyWangLL","html_url":"https://github.com/LilyWangLL","followers_url":"https://api.github.com/users/LilyWangLL/followers","following_url":"https://api.github.com/users/LilyWangLL/following{/other_user}","gists_url":"https://api.github.com/users/LilyWangLL/gists{/gist_id}","starred_url":"https://api.github.com/users/LilyWangLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LilyWangLL/subscriptions","organizations_url":"https://api.github.com/users/LilyWangLL/orgs","repos_url":"https://api.github.com/users/LilyWangLL/repos","events_url":"https://api.github.com/users/LilyWangLL/events{/privacy}","received_events_url":"https://api.github.com/users/LilyWangLL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T13:15:41Z","updated_at":"2022-01-21T13:15:41Z","author_association":"NONE","body":"Thanks for fix this error. I have submited a PR https://github.com/microsoft/vcpkg/pull/22685 to merge #1679 to VCPKG.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1018495547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019213452","html_url":"https://github.com/apache/brpc/issues/1674#issuecomment-1019213452","issue_url":"https://api.github.com/repos/apache/brpc/issues/1674","id":1019213452,"node_id":"IC_kwDOBhmkcs48v_aM","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T11:56:09Z","updated_at":"2022-01-22T11:56:09Z","author_association":"CONTRIBUTOR","body":"Hi @hiberabyss , Has your problem been solved?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019213452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019310317","html_url":"https://github.com/apache/brpc/issues/1673#issuecomment-1019310317","issue_url":"https://api.github.com/repos/apache/brpc/issues/1673","id":1019310317,"node_id":"IC_kwDOBhmkcs48wXDt","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T17:05:43Z","updated_at":"2022-01-22T17:05:43Z","author_association":"CONTRIBUTOR","body":"Hi @liujp , you can try the latest master branch,  #1679 may have resolved this problem","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019310317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019311914","html_url":"https://github.com/apache/brpc/issues/1666#issuecomment-1019311914","issue_url":"https://api.github.com/repos/apache/brpc/issues/1666","id":1019311914,"node_id":"IC_kwDOBhmkcs48wXcq","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T17:14:21Z","updated_at":"2022-01-22T17:16:22Z","author_association":"CONTRIBUTOR","body":"@romiguan \r\n\r\n请问server恢复之后，client端有恢复吗？\r\nCPU确定都是在steal_task吗，是否可以提供一下CPU profile的信息？\r\n机器有几个CPU核心，brpc线程数是多少呢？\r\n客户端的业务逻辑是否有重试，不断的在访问下游server呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019311914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019312663","html_url":"https://github.com/apache/brpc/issues/1664#issuecomment-1019312663","issue_url":"https://api.github.com/repos/apache/brpc/issues/1664","id":1019312663,"node_id":"IC_kwDOBhmkcs48wXoX","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T17:18:38Z","updated_at":"2022-01-22T17:18:38Z","author_association":"CONTRIBUTOR","body":"看起来像是FATAL了，有日志信息吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019312663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019312807","html_url":"https://github.com/apache/brpc/pull/1665#issuecomment-1019312807","issue_url":"https://api.github.com/repos/apache/brpc/issues/1665","id":1019312807,"node_id":"IC_kwDOBhmkcs48wXqn","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T17:19:34Z","updated_at":"2022-01-22T17:19:34Z","author_association":"CONTRIBUTOR","body":"Thanks @JiaoZiLang !","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019312807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019661628","html_url":"https://github.com/apache/brpc/issues/1652#issuecomment-1019661628","issue_url":"https://api.github.com/repos/apache/brpc/issues/1652","id":1019661628,"node_id":"IC_kwDOBhmkcs48xs08","user":{"login":"kenshinxf","id":7056720,"node_id":"MDQ6VXNlcjcwNTY3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7056720?v=4","gravatar_id":"","url":"https://api.github.com/users/kenshinxf","html_url":"https://github.com/kenshinxf","followers_url":"https://api.github.com/users/kenshinxf/followers","following_url":"https://api.github.com/users/kenshinxf/following{/other_user}","gists_url":"https://api.github.com/users/kenshinxf/gists{/gist_id}","starred_url":"https://api.github.com/users/kenshinxf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kenshinxf/subscriptions","organizations_url":"https://api.github.com/users/kenshinxf/orgs","repos_url":"https://api.github.com/users/kenshinxf/repos","events_url":"https://api.github.com/users/kenshinxf/events{/privacy}","received_events_url":"https://api.github.com/users/kenshinxf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T02:42:51Z","updated_at":"2022-01-24T02:42:51Z","author_association":"NONE","body":"github id： kenshinxf\r\nbrpc 贡献url：https://github.com/apache/incubator-brpc/pull/98/commits","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019661628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019686856","html_url":"https://github.com/apache/brpc/pull/1669#issuecomment-1019686856","issue_url":"https://api.github.com/repos/apache/brpc/issues/1669","id":1019686856,"node_id":"IC_kwDOBhmkcs48xy_I","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T03:42:00Z","updated_at":"2022-01-24T03:42:00Z","author_association":"CONTRIBUTOR","body":"This branch has conflicts with master now.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019686856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019691419","html_url":"https://github.com/apache/brpc/pull/1653#issuecomment-1019691419","issue_url":"https://api.github.com/repos/apache/brpc/issues/1653","id":1019691419,"node_id":"IC_kwDOBhmkcs48x0Gb","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T03:57:49Z","updated_at":"2022-01-24T03:57:49Z","author_association":"CONTRIBUTOR","body":"这个PR是尝试解决UT失败问题，但看起来并没有解决，先不用合入哈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019691419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019697298","html_url":"https://github.com/apache/brpc/issues/1681#issuecomment-1019697298","issue_url":"https://api.github.com/repos/apache/brpc/issues/1681","id":1019697298,"node_id":"IC_kwDOBhmkcs48x1iS","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T04:09:09Z","updated_at":"2022-01-24T04:09:09Z","author_association":"CONTRIBUTOR","body":"目前没有释放空闲ResourcePool的机制","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019697298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019699861","html_url":"https://github.com/apache/brpc/issues/1659#issuecomment-1019699861","issue_url":"https://api.github.com/repos/apache/brpc/issues/1659","id":1019699861,"node_id":"IC_kwDOBhmkcs48x2KV","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T04:13:21Z","updated_at":"2022-01-24T04:13:21Z","author_association":"CONTRIBUTOR","body":"有没有具体的复现方法？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019699861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019706149","html_url":"https://github.com/apache/brpc/pull/1680#issuecomment-1019706149","issue_url":"https://api.github.com/repos/apache/brpc/issues/1680","id":1019706149,"node_id":"IC_kwDOBhmkcs48x3sl","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T04:23:12Z","updated_at":"2022-01-24T04:23:12Z","author_association":"CONTRIBUTOR","body":"@ehds Thanks for you contribution!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1019706149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1020749287","html_url":"https://github.com/apache/brpc/pull/1417#issuecomment-1020749287","issue_url":"https://api.github.com/repos/apache/brpc/issues/1417","id":1020749287,"node_id":"IC_kwDOBhmkcs4812Xn","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T02:33:04Z","updated_at":"2022-01-25T02:33:04Z","author_association":"CONTRIBUTOR","body":"应该只有 glog 用了 gflags，而且 glog 对 gflags 的依赖应该是可选的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1020749287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021074483","html_url":"https://github.com/apache/brpc/issues/1683#issuecomment-1021074483","issue_url":"https://api.github.com/repos/apache/brpc/issues/1683","id":1021074483,"node_id":"IC_kwDOBhmkcs483Fwz","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T11:07:45Z","updated_at":"2022-01-25T11:07:45Z","author_association":"CONTRIBUTOR","body":"value的内容可以发下吗？比如base64后的内容","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021074483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021104968","html_url":"https://github.com/apache/brpc/issues/1683#issuecomment-1021104968","issue_url":"https://api.github.com/repos/apache/brpc/issues/1683","id":1021104968,"node_id":"IC_kwDOBhmkcs483NNI","user":{"login":"moesakura","id":5019609,"node_id":"MDQ6VXNlcjUwMTk2MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5019609?v=4","gravatar_id":"","url":"https://api.github.com/users/moesakura","html_url":"https://github.com/moesakura","followers_url":"https://api.github.com/users/moesakura/followers","following_url":"https://api.github.com/users/moesakura/following{/other_user}","gists_url":"https://api.github.com/users/moesakura/gists{/gist_id}","starred_url":"https://api.github.com/users/moesakura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moesakura/subscriptions","organizations_url":"https://api.github.com/users/moesakura/orgs","repos_url":"https://api.github.com/users/moesakura/repos","events_url":"https://api.github.com/users/moesakura/events{/privacy}","received_events_url":"https://api.github.com/users/moesakura/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-25T11:47:15Z","updated_at":"2022-01-25T11:47:57Z","author_association":"NONE","body":"> value的内容可以发下吗？比如base64后的内容\r\n\r\n使用 brpc\r\n1.is_nil\r\n2.CAEQABoAIgAoADAAOgBCAEoAUABaAGIAaABwAHgAgAEAiAEAkAEAmgEAoAEAqAEAsgEAuAEAwAEAyAEA0AEA2AEA4AEA6AEA8AEA+AEAgAIAiAIAlQIAAAAAoAIAqAIAsAIAuAIA6gIGSGVhbHRo6gIJTGFyZ2VHYW1l+gIGMTAwNjM2+gIGMTAwNjM4ggMGMTAwNjM2ggMGMTAwNjM4igMGMTAwNjM2igMGMTAwNjM4yh8EbWFsZQ==\r\n3.CAEYxhi6BggSBlF5cXB3WOISBgoEOTI2MYIZERgMKF8wgMKFkLsvSgQzMTQy\r\n4.CAIYpjm6BggSBldLQk11cOISBgoEMzY2M4IZExj+DiikATDY9ffqyC9KBDczMzQ=\r\n\r\n使用 redis-plus-plus\r\n1.EicKBmhYVXFkUBIGdGhFV0N2EgZpdk1CUE0YASCcqQQoxgMw8/+RjQY=\r\n2.CAEaBUNoaW5hmgEHQ2hpbmVzZdABAeABGQ==\r\n3.CAEYxTm6BggSBnZTYlVEZeISBgoEMTEwMYIZDBi51AMoCEoENzM2NQ==\r\n4.CAIY/Dq6BggSBllBQldJSOISBgoEOTM3N4IZChhxKCVKBDc1NDg=\r\n\r\n通过python访问 redis\r\n1.b\"\\x12'\\n\\x06hXUqdP\\x12\\x06thEWCv\\x12\\x06ivMBPM\\x18\\x01 \\x9c\\xa9\\x04(\\xc6\\x030\\xf3\\xff\\x91\\x8d\\x06\"\r\n2.b'\\x08\\x01\\x1a\\x05China\\x9a\\x01\\x07Chinese\\xd0\\x01\\x01\\xe0\\x01\\x19'\r\n3.b'\\x08\\x01\\x18\\xc59\\xba\\x06\\x08\\x12\\x06vSbUDe\\xe2\\x12\\x06\\n\\x041101\\x82\\x19\\x0c\\x18\\xb9\\xd4\\x03(\\x08J\\x047365'\r\n4.b'\\x08\\x02\\x18\\xfc:\\xba\\x06\\x08\\x12\\x06YABWIH\\xe2\\x12\\x06\\n\\x049377\\x82\\x19\\n\\x18q(%J\\x047548'","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021104968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021813160","html_url":"https://github.com/apache/brpc/issues/1683#issuecomment-1021813160","issue_url":"https://api.github.com/repos/apache/brpc/issues/1683","id":1021813160,"node_id":"IC_kwDOBhmkcs4856Go","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T02:53:27Z","updated_at":"2022-01-26T02:53:27Z","author_association":"CONTRIBUTOR","body":"用的是那个method？贴下设置RedisRequest的代码？二进制字符串格式化造成了截断？\r\n参考 https://github.com/apache/incubator-brpc/blob/master/src/brpc/redis.h#L61","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021813160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021814101","html_url":"https://github.com/apache/brpc/issues/1684#issuecomment-1021814101","issue_url":"https://api.github.com/repos/apache/brpc/issues/1684","id":1021814101,"node_id":"IC_kwDOBhmkcs4856VV","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T02:55:44Z","updated_at":"2022-01-26T02:55:44Z","author_association":"CONTRIBUTOR","body":"naming service配置的不对，贴下channel.Init()的代码呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021814101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021832025","html_url":"https://github.com/apache/brpc/issues/1683#issuecomment-1021832025","issue_url":"https://api.github.com/repos/apache/brpc/issues/1683","id":1021832025,"node_id":"IC_kwDOBhmkcs485-tZ","user":{"login":"moesakura","id":5019609,"node_id":"MDQ6VXNlcjUwMTk2MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5019609?v=4","gravatar_id":"","url":"https://api.github.com/users/moesakura","html_url":"https://github.com/moesakura","followers_url":"https://api.github.com/users/moesakura/followers","following_url":"https://api.github.com/users/moesakura/following{/other_user}","gists_url":"https://api.github.com/users/moesakura/gists{/gist_id}","starred_url":"https://api.github.com/users/moesakura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moesakura/subscriptions","organizations_url":"https://api.github.com/users/moesakura/orgs","repos_url":"https://api.github.com/users/moesakura/repos","events_url":"https://api.github.com/users/moesakura/events{/privacy}","received_events_url":"https://api.github.com/users/moesakura/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T03:38:16Z","updated_at":"2022-01-26T03:38:16Z","author_association":"NONE","body":"> 用的是那个method？贴下设置RedisRequest的代码？二进制字符串格式化造成了截断？ 参考 https://github.com/apache/incubator-brpc/blob/master/src/brpc/redis.h#L61\r\n\r\n本来想提供单测的... 在验证的过程中发现了是我自己的问题\r\n如果db不是0 每次请求都需要select一次\r\n之前我只在初始化的时候select了一次\r\n\r\n> req.AddCommand(\"select %s\", db.c_str());\r\nreq.AddCommand(\"GET %s\", key.c_str());\r\n\r\n\r\n是否有更优雅的写法?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021832025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021886327","html_url":"https://github.com/apache/brpc/issues/1683#issuecomment-1021886327","issue_url":"https://api.github.com/repos/apache/brpc/issues/1683","id":1021886327,"node_id":"IC_kwDOBhmkcs486L93","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T05:44:10Z","updated_at":"2022-01-26T05:44:10Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n这个写法是没问题的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021886327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021887320","html_url":"https://github.com/apache/brpc/issues/1684#issuecomment-1021887320","issue_url":"https://api.github.com/repos/apache/brpc/issues/1684","id":1021887320,"node_id":"IC_kwDOBhmkcs486MNY","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T05:47:11Z","updated_at":"2022-01-26T05:47:11Z","author_association":"CONTRIBUTOR","body":"Do you mean that \"LOG(FATAL)\" causes abort so \"return -1\" will not be executed?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021887320/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021887882","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1021887882","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1021887882,"node_id":"IC_kwDOBhmkcs486MWK","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T05:48:50Z","updated_at":"2022-01-26T05:48:50Z","author_association":"CONTRIBUTOR","body":"@chenzhangyi @lorinlee ping~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021887882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021889881","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1021889881","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1021889881,"node_id":"IC_kwDOBhmkcs486M1Z","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T05:54:55Z","updated_at":"2022-01-26T05:54:55Z","author_association":"CONTRIBUTOR","body":"Hi @songdongsheng you can try the latest master branch, #1679 may have resolved this problem","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021889881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021892609","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1021892609","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1021892609,"node_id":"IC_kwDOBhmkcs486NgB","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:02:30Z","updated_at":"2022-01-26T06:02:30Z","author_association":"CONTRIBUTOR","body":"googletest from mazong1123/master is not introduced by brpc source code, you can check you cmake files to see where it is introduced.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021892609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021893021","html_url":"https://github.com/apache/brpc/issues/1683#issuecomment-1021893021","issue_url":"https://api.github.com/repos/apache/brpc/issues/1683","id":1021893021,"node_id":"IC_kwDOBhmkcs486Nmd","user":{"login":"moesakura","id":5019609,"node_id":"MDQ6VXNlcjUwMTk2MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5019609?v=4","gravatar_id":"","url":"https://api.github.com/users/moesakura","html_url":"https://github.com/moesakura","followers_url":"https://api.github.com/users/moesakura/followers","following_url":"https://api.github.com/users/moesakura/following{/other_user}","gists_url":"https://api.github.com/users/moesakura/gists{/gist_id}","starred_url":"https://api.github.com/users/moesakura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moesakura/subscriptions","organizations_url":"https://api.github.com/users/moesakura/orgs","repos_url":"https://api.github.com/users/moesakura/repos","events_url":"https://api.github.com/users/moesakura/events{/privacy}","received_events_url":"https://api.github.com/users/moesakura/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:03:28Z","updated_at":"2022-01-26T06:03:28Z","author_association":"NONE","body":"> > \r\n> \r\n> 这个写法是没问题的\r\n\r\n好的，谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021893021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021893615","html_url":"https://github.com/apache/brpc/issues/1627#issuecomment-1021893615","issue_url":"https://api.github.com/repos/apache/brpc/issues/1627","id":1021893615,"node_id":"IC_kwDOBhmkcs486Nvv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:04:51Z","updated_at":"2022-01-26T06:04:51Z","author_association":"CONTRIBUTOR","body":"Hi @FakerShy you can try the latest master branch, #1679 may have resolved this problem","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021893615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021901888","html_url":"https://github.com/apache/brpc/pull/1677#issuecomment-1021901888","issue_url":"https://api.github.com/repos/apache/brpc/issues/1677","id":1021901888,"node_id":"IC_kwDOBhmkcs486PxA","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:23:49Z","updated_at":"2022-01-26T06:23:49Z","author_association":"CONTRIBUTOR","body":"@372046933 Thanks for you contribution!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021901888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021903165","html_url":"https://github.com/apache/brpc/issues/1448#issuecomment-1021903165","issue_url":"https://api.github.com/repos/apache/brpc/issues/1448","id":1021903165,"node_id":"IC_kwDOBhmkcs486QE9","user":{"login":"wuzhiguocarter","id":6290560,"node_id":"MDQ6VXNlcjYyOTA1NjA=","avatar_url":"https://avatars.githubusercontent.com/u/6290560?v=4","gravatar_id":"","url":"https://api.github.com/users/wuzhiguocarter","html_url":"https://github.com/wuzhiguocarter","followers_url":"https://api.github.com/users/wuzhiguocarter/followers","following_url":"https://api.github.com/users/wuzhiguocarter/following{/other_user}","gists_url":"https://api.github.com/users/wuzhiguocarter/gists{/gist_id}","starred_url":"https://api.github.com/users/wuzhiguocarter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuzhiguocarter/subscriptions","organizations_url":"https://api.github.com/users/wuzhiguocarter/orgs","repos_url":"https://api.github.com/users/wuzhiguocarter/repos","events_url":"https://api.github.com/users/wuzhiguocarter/events{/privacy}","received_events_url":"https://api.github.com/users/wuzhiguocarter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:26:39Z","updated_at":"2022-01-26T06:26:39Z","author_association":"NONE","body":"> 所以更新到新的版本后就没有这个问题了吗 @wuzhiguocarter . 谢谢.\r\n\r\n#1177 按照这个issue的方案修改了brpc源码来修复的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021903165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021903864","html_url":"https://github.com/apache/brpc/pull/1651#issuecomment-1021903864","issue_url":"https://api.github.com/repos/apache/brpc/issues/1651","id":1021903864,"node_id":"IC_kwDOBhmkcs486QP4","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:28:14Z","updated_at":"2022-01-26T06:28:14Z","author_association":"CONTRIBUTOR","body":"@ehds Thanks for you contribution!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021903864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021910313","html_url":"https://github.com/apache/brpc/issues/1652#issuecomment-1021910313","issue_url":"https://api.github.com/repos/apache/brpc/issues/1652","id":1021910313,"node_id":"IC_kwDOBhmkcs486R0p","user":{"login":"gavinchou","id":6919662,"node_id":"MDQ6VXNlcjY5MTk2NjI=","avatar_url":"https://avatars.githubusercontent.com/u/6919662?v=4","gravatar_id":"","url":"https://api.github.com/users/gavinchou","html_url":"https://github.com/gavinchou","followers_url":"https://api.github.com/users/gavinchou/followers","following_url":"https://api.github.com/users/gavinchou/following{/other_user}","gists_url":"https://api.github.com/users/gavinchou/gists{/gist_id}","starred_url":"https://api.github.com/users/gavinchou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gavinchou/subscriptions","organizations_url":"https://api.github.com/users/gavinchou/orgs","repos_url":"https://api.github.com/users/gavinchou/repos","events_url":"https://api.github.com/users/gavinchou/events{/privacy}","received_events_url":"https://api.github.com/users/gavinchou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T06:35:43Z","updated_at":"2022-01-26T06:35:43Z","author_association":"CONTRIBUTOR","body":"github id: gavinchou\r\nbrpc 贡献url: https://github.com/apache/incubator-brpc/commits?author=gavinchou","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021910313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021965920","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1021965920","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1021965920,"node_id":"IC_kwDOBhmkcs486fZg","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T08:20:16Z","updated_at":"2022-01-26T08:20:16Z","author_association":"MEMBER","body":"@wwbmmm 伟冰有空的时候帮看一下我这个PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1021965920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022013520","html_url":"https://github.com/apache/brpc/issues/1685#issuecomment-1022013520","issue_url":"https://api.github.com/repos/apache/brpc/issues/1685","id":1022013520,"node_id":"IC_kwDOBhmkcs486rBQ","user":{"login":"pengpengge","id":33371640,"node_id":"MDQ6VXNlcjMzMzcxNjQw","avatar_url":"https://avatars.githubusercontent.com/u/33371640?v=4","gravatar_id":"","url":"https://api.github.com/users/pengpengge","html_url":"https://github.com/pengpengge","followers_url":"https://api.github.com/users/pengpengge/followers","following_url":"https://api.github.com/users/pengpengge/following{/other_user}","gists_url":"https://api.github.com/users/pengpengge/gists{/gist_id}","starred_url":"https://api.github.com/users/pengpengge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pengpengge/subscriptions","organizations_url":"https://api.github.com/users/pengpengge/orgs","repos_url":"https://api.github.com/users/pengpengge/repos","events_url":"https://api.github.com/users/pengpengge/events{/privacy}","received_events_url":"https://api.github.com/users/pengpengge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T09:23:33Z","updated_at":"2022-01-26T09:23:33Z","author_association":"NONE","body":"closed","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022013520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022090848","html_url":"https://github.com/apache/brpc/issues/1684#issuecomment-1022090848","issue_url":"https://api.github.com/repos/apache/brpc/issues/1684","id":1022090848,"node_id":"IC_kwDOBhmkcs48695g","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T11:01:23Z","updated_at":"2022-01-26T11:01:23Z","author_association":"CONTRIBUTOR","body":"@cdjingit 我补充一下背景。这个问题是这样的，本地的 SD 配置有错误，或者别的什么原因，此时拿到的 server 列表是空的。我们希望能够感知到这一问题，做一些清理再退出。目前的实现有这样 2 种可能：\r\n\r\n1. 直接 `LOG(FATAL)` core 掉，这个不太好，我们还想做点事情\r\n2. 设置 `log_succeed_without_server` 忽略掉这个错误，这个也不好，我们的请求都会卡住，我们希望能够识别出这个问题并进行一些处理","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022090848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022144091","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1022144091","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1022144091,"node_id":"IC_kwDOBhmkcs487K5b","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-26T12:15:10Z","updated_at":"2022-01-26T12:15:10Z","author_association":"MEMBER","body":"> Can you tell me why googletest was going from mazong1123/master\r\nDownload instead of downloading from google/googletest?\r\n\r\nIt's not downloading from `mazong1123/master`,  just a git commit message, which is:\r\n> Merge pull request #821 from mazong1123/master\r\n\r\nSee https://github.com/google/googletest/tree/release-1.8.0","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022144091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022801734","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1022801734","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1022801734,"node_id":"IC_kwDOBhmkcs489rdG","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T03:03:32Z","updated_at":"2022-01-27T03:03:32Z","author_association":"NONE","body":"@wasphin When I use the incubator-brpc@master version, the following error message is displayed on x86_64 that use \"make -j126\":\r\n![image](https://user-images.githubusercontent.com/77763324/151284508-4cfe551c-8fec-4779-8ff3-f90d94bc99b2.png)\r\n![image](https://user-images.githubusercontent.com/77763324/151284568-dc64cd78-abf0-443c-af69-b34f0c59c7f4.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022801734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022803044","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1022803044","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1022803044,"node_id":"IC_kwDOBhmkcs489rxk","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T03:05:53Z","updated_at":"2022-01-27T03:12:21Z","author_association":"NONE","body":"Is there any good way to change it by using the latest google test instead of \"mazong 1123/master\", which is too old.\r\n![image](https://user-images.githubusercontent.com/77763324/151285405-2456663c-8147-45fe-972b-32d1a9faff9d.png)\r\nSee https://github.com/google/googletest/tree/release-1.8.0","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022803044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022806577","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1022806577","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1022806577,"node_id":"IC_kwDOBhmkcs489sox","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T03:13:25Z","updated_at":"2022-01-27T03:13:25Z","author_association":"CONTRIBUTOR","body":"> Is there any good way to change it by using the latest google test instead of \"mazong 1123/master\", which is too old.\r\n\r\nYou can change the \"GIT_TAG release-1.8.0\"  in https://github.com/apache/incubator-brpc/blob/master/cmake/CMakeLists.download_gtest.in to use a new version of googletest","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022806577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022809263","html_url":"https://github.com/apache/brpc/issues/1684#issuecomment-1022809263","issue_url":"https://api.github.com/repos/apache/brpc/issues/1684","id":1022809263,"node_id":"IC_kwDOBhmkcs489tSv","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T03:19:03Z","updated_at":"2022-01-27T03:19:03Z","author_association":"MEMBER","body":"glog的fatal日志，就是会导致core的。这里可以改成error级别。我之前也提过类似的PR #1415 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022809263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022816291","html_url":"https://github.com/apache/brpc/issues/1684#issuecomment-1022816291","issue_url":"https://api.github.com/repos/apache/brpc/issues/1684","id":1022816291,"node_id":"IC_kwDOBhmkcs489vAj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T03:35:27Z","updated_at":"2022-01-27T03:35:27Z","author_association":"CONTRIBUTOR","body":"看了下百度内部版本这块已经改成ERROR级别了，而且是2017年8月改的，不知道为啥没有同步到社区","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022816291/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022816588","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1022816588","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1022816588,"node_id":"IC_kwDOBhmkcs489vFM","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T03:36:20Z","updated_at":"2022-01-27T03:36:20Z","author_association":"NONE","body":"@wwbmmm [root@localhost spack-src]#vim cmake/CMakeLists.download_gtest.in\r\n![image](https://user-images.githubusercontent.com/77763324/151287266-492dab8a-ae32-4c3c-9900-73454ba0e824.png)\r\nThe test was successful:\r\n![image](https://user-images.githubusercontent.com/77763324/151287332-13034d12-ec07-401b-9551-c0fbd74f53b9.png)\r\nDo you have any plans to develop aarch64 test? An error is reported when I compile the test on aarch64:\r\n[root@localhost spack-src]# vim test/CMakeLists.txt\r\n![image](https://user-images.githubusercontent.com/77763324/151287528-d2d7fb75-b3ec-47fb-99de-75625cffd622.png)\r\n![image](https://user-images.githubusercontent.com/77763324/151287467-32cc510d-ca66-4c31-8d7a-a9c0e3a70d19.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022816588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022828058","html_url":"https://github.com/apache/brpc/issues/1632#issuecomment-1022828058","issue_url":"https://api.github.com/repos/apache/brpc/issues/1632","id":1022828058,"node_id":"IC_kwDOBhmkcs489x4a","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T04:05:56Z","updated_at":"2022-01-27T04:05:56Z","author_association":"CONTRIBUTOR","body":"> Do you have any plans to develop aarch64 test? An error is reported when I compile the test on aarch64:\r\n\r\nbrpc has not fully support aarch64 yet. @serverglen will work on this.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022828058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022933802","html_url":"https://github.com/apache/brpc/issues/1686#issuecomment-1022933802","issue_url":"https://api.github.com/repos/apache/brpc/issues/1686","id":1022933802,"node_id":"IC_kwDOBhmkcs48-Lsq","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T07:45:56Z","updated_at":"2022-01-27T07:45:56Z","author_association":"CONTRIBUTOR","body":"same as #1382","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022933802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022940506","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-1022940506","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":1022940506,"node_id":"IC_kwDOBhmkcs48-NVa","user":{"login":"wzhen1999","id":34417523,"node_id":"MDQ6VXNlcjM0NDE3NTIz","avatar_url":"https://avatars.githubusercontent.com/u/34417523?v=4","gravatar_id":"","url":"https://api.github.com/users/wzhen1999","html_url":"https://github.com/wzhen1999","followers_url":"https://api.github.com/users/wzhen1999/followers","following_url":"https://api.github.com/users/wzhen1999/following{/other_user}","gists_url":"https://api.github.com/users/wzhen1999/gists{/gist_id}","starred_url":"https://api.github.com/users/wzhen1999/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzhen1999/subscriptions","organizations_url":"https://api.github.com/users/wzhen1999/orgs","repos_url":"https://api.github.com/users/wzhen1999/repos","events_url":"https://api.github.com/users/wzhen1999/events{/privacy}","received_events_url":"https://api.github.com/users/wzhen1999/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T07:56:50Z","updated_at":"2022-01-27T07:56:50Z","author_association":"NONE","body":"mac m1编译不过，这个修复了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022940506/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022949245","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1022949245","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1022949245,"node_id":"IC_kwDOBhmkcs48-Pd9","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T08:08:28Z","updated_at":"2022-01-27T08:08:28Z","author_association":"CONTRIBUTOR","body":"> 另外做了Host字段的清空操作，因为允许录制ServerA的流量，回放给ServerB。如果带着原先的Host，可能引发不必要的问题，比如ServerB是一个Web Apache，会根据Host路由。\r\n\r\n感觉这个应该是个可选功能，因为有些场景要求带上原先的Host，不然Server端路由不了，是不是可以加个replay选项？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022949245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022992975","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1022992975","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1022992975,"node_id":"IC_kwDOBhmkcs48-aJP","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T09:07:06Z","updated_at":"2022-01-27T09:07:06Z","author_association":"MEMBER","body":"> > 另外做了Host字段的清空操作，因为允许录制ServerA的流量，回放给ServerB。如果带着原先的Host，可能引发不必要的问题，比如ServerB是一个Web Apache，会根据Host路由。\r\n> \r\n> 感觉这个应该是个可选功能，因为有些场景要求带上原先的Host，不然Server端路由不了，是不是可以加个replay选项？\r\n\r\n也可以自己在gflag配置指定：--server=www.abc.com:9999 这个www.abc.com会被拼到Host中。\r\n\r\n当然如果www.abc.com指向的经过dns解析出来的机器，不是使用者想要回放的目标机器的时候，需要改下本机hosts文件配置。从这个角度来说，加个新的gflags选项也可以，自己控制是否使用原始host，但完整的Host不止有ip/机器名 也有端口。比如Host: www.abc.com:8888 实际给 另外一个机器的9999端口回放请求。 这个不匹配的端口号，不知道是否会有其他问题。 \r\n\r\n复杂一点的解法，rpc_replay在保留原Host的时候，再覆盖一下端口号。\r\n@wwbmmm 你觉得呢？\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1022992975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023094454","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1023094454","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1023094454,"node_id":"IC_kwDOBhmkcs48-y62","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T11:06:12Z","updated_at":"2022-01-27T11:06:12Z","author_association":"CONTRIBUTOR","body":"> 也可以自己在gflag配置指定：--server=www.abc.com:9999 这个www.abc.com会被拼到Host中。\r\n\r\n还有一种情况是录制的请求中包含了多个不同Host的请求，这种情况下，无法通过--server的方式去指定不同的Host，所以保留原始Host还是需要的。\r\n\r\n> 但完整的Host不止有ip/机器名 也有端口。比如Host: [www.abc.com:8888](http://www.abc.com:8888) 实际给 另外一个机器的9999端口回放请求。 这个不匹配的端口号，不知道是否会有其他问题。\r\n\r\n如果需要改端口号，是不是通过指定新Host的方式就可以。感觉“保留原Host”+“新端口号”这个组合挺奇怪的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023094454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023105474","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1023105474","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1023105474,"node_id":"IC_kwDOBhmkcs48-1nC","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T11:19:47Z","updated_at":"2022-01-27T11:19:47Z","author_association":"MEMBER","body":"那我改成，新增一个gflag，指定host。未指定的时候保留原host？\r\n```cpp\r\nDEFINE_string(http_host, \"\", \"Host field for http protocol\");\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023105474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023108159","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1023108159","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1023108159,"node_id":"IC_kwDOBhmkcs48-2Q_","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T11:23:00Z","updated_at":"2022-01-27T11:23:00Z","author_association":"CONTRIBUTOR","body":"> 那我改成，新增一个gflag，指定host。未指定的时候保留原host？\r\n\r\n可以的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023108159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023843830","html_url":"https://github.com/apache/brpc/issues/1684#issuecomment-1023843830","issue_url":"https://api.github.com/repos/apache/brpc/issues/1684","id":1023843830,"node_id":"IC_kwDOBhmkcs49Bp32","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T03:08:16Z","updated_at":"2022-01-28T03:08:16Z","author_association":"CONTRIBUTOR","body":"哈哈，这个说法要让社区伤心了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023843830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023847806","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1023847806","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1023847806,"node_id":"IC_kwDOBhmkcs49Bq1-","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T03:17:09Z","updated_at":"2022-01-28T03:17:09Z","author_association":"MEMBER","body":"改好了。\n@wwbmmm ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023847806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023949185","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-1023949185","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":1023949185,"node_id":"IC_kwDOBhmkcs49CDmB","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T07:18:30Z","updated_at":"2022-01-28T07:18:30Z","author_association":"CONTRIBUTOR","body":"我这边没问题了，@zyearn 有空也可以再看一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1023949185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024007368","html_url":"https://github.com/apache/brpc/issues/1688#issuecomment-1024007368","issue_url":"https://api.github.com/repos/apache/brpc/issues/1688","id":1024007368,"node_id":"IC_kwDOBhmkcs49CRzI","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T08:51:06Z","updated_at":"2022-01-28T08:51:06Z","author_association":"CONTRIBUTOR","body":"I guess it's because snappy's codebase is small and doesn't require frequent upgrades.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024007368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024010270","html_url":"https://github.com/apache/brpc/issues/1688#issuecomment-1024010270","issue_url":"https://api.github.com/repos/apache/brpc/issues/1688","id":1024010270,"node_id":"IC_kwDOBhmkcs49CSge","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T08:55:20Z","updated_at":"2022-01-28T08:55:20Z","author_association":"CONTRIBUTOR","body":"Many projects provide 2 ways for linking external dependencies:\r\n\r\n1. link against user-provided dependencies\r\n2. link against bundled dependencies\r\n\r\nI think the vendors are good for would not cause conflict while bad for users controlling the dependencies.\r\n\r\nIt would be appreciate if there was any flag to control it.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024010270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024018057","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1024018057","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1024018057,"node_id":"IC_kwDOBhmkcs49CUaJ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T09:05:39Z","updated_at":"2022-01-28T09:05:39Z","author_association":"CONTRIBUTOR","body":"注释掉这里的pthread_mutex_lock/unlock试试\r\nhttps://github.com/apache/incubator-brpc/blob/master/src/bthread/mutex.cpp#L811","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024018057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024048873","html_url":"https://github.com/apache/brpc/issues/1688#issuecomment-1024048873","issue_url":"https://api.github.com/repos/apache/brpc/issues/1688","id":1024048873,"node_id":"IC_kwDOBhmkcs49Cb7p","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T09:45:55Z","updated_at":"2022-01-28T09:45:55Z","author_association":"CONTRIBUTOR","body":"If you need that flag you can submit a PR, that's welcome. : )","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024048873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024112554","html_url":"https://github.com/apache/brpc/issues/1652#issuecomment-1024112554","issue_url":"https://api.github.com/repos/apache/brpc/issues/1652","id":1024112554,"node_id":"IC_kwDOBhmkcs49Creq","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T11:10:26Z","updated_at":"2022-01-28T11:10:26Z","author_association":"MEMBER","body":"hi， niukuo，kensinxf，gavinchou，\r\nthanks.\r\nwe have 33 contributors involved in this event.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024112554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024202843","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1024202843","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1024202843,"node_id":"IC_kwDOBhmkcs49DBhb","user":{"login":"lday0321","id":3905322,"node_id":"MDQ6VXNlcjM5MDUzMjI=","avatar_url":"https://avatars.githubusercontent.com/u/3905322?v=4","gravatar_id":"","url":"https://api.github.com/users/lday0321","html_url":"https://github.com/lday0321","followers_url":"https://api.github.com/users/lday0321/followers","following_url":"https://api.github.com/users/lday0321/following{/other_user}","gists_url":"https://api.github.com/users/lday0321/gists{/gist_id}","starred_url":"https://api.github.com/users/lday0321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lday0321/subscriptions","organizations_url":"https://api.github.com/users/lday0321/orgs","repos_url":"https://api.github.com/users/lday0321/repos","events_url":"https://api.github.com/users/lday0321/events{/privacy}","received_events_url":"https://api.github.com/users/lday0321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T13:09:34Z","updated_at":"2022-01-28T13:09:34Z","author_association":"NONE","body":"感谢回复! 移除这里的pthread_mutex_lock/pthread_mutex_unlock，combiner.h:310这里的TSAN warning的确没了。但还是些其他的报错，例如：\r\n```bash\r\nWARNING: ThreadSanitizer: data race (pid=12180)\r\n  Write of size 4 at 0x7b4800020080 by main thread (mutexes: write M924):\r\n    #0 butil::BoundedQueue<unsigned long>::push(unsigned long const&) /v/brpc/incubator-brpc/src/butil/containers/bounded_queue.h:103:13 (tsan_test+0x31aee7)\r\n    #1 bthread::RemoteTaskQueue::push_locked(unsigned long) /v/brpc/incubator-brpc/src/bthread/remote_task_queue.h:69 (tsan_test+0x31aee7)\r\n    #2 bthread::TaskGroup::ready_to_run_remote(unsigned long, bool) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:669 (tsan_test+0x31aee7)\r\n    #3 int bthread::TaskGroup::start_background<true>(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:446:9 (tsan_test+0x31fa09)\r\n    #4 bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/bthread.cpp:144:35 (tsan_test+0x2f0411)\r\n    #5 bthread_start_background /v/brpc/incubator-brpc/src/bthread/bthread.cpp:193 (tsan_test+0x2f0411)\r\n    #6 brpc::GlobalInitializeOrDieImpl() /v/brpc/incubator-brpc/src/brpc/global.cpp:612:5 (tsan_test+0x393922)\r\n    #7 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #8 brpc::GlobalInitializeOrDie() /v/brpc/incubator-brpc/src/brpc/global.cpp:617:9 (tsan_test+0x391b44)\r\n    #9 brpc::Server::InitializeOnce() /v/brpc/incubator-brpc/src/brpc/server.cpp:610:5 (tsan_test+0x279436)\r\n    #10 brpc::Server::StartInternal(in_addr const&, brpc::PortRange const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:712:9 (tsan_test+0x2796bc)\r\n    #11 brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:1062:12 (tsan_test+0x27deef)\r\n    #12 my::(anonymous namespace)::MyTest_TSAN_Check_brpc_Test::TestBody() /v/tsan_demo/tsan_test.cc:29:19 (tsan_test+0x23067c)\r\n    #13 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (tsan_test+0x264c1c)\r\n    #14 main /v/tsan_demo/tsan_test.cc:46:10 (tsan_test+0x22fea8)\r\n\r\n  Previous read of size 4 at 0x7b4800020080 by thread T5:\r\n    #0 butil::BoundedQueue<unsigned long>::empty() const /v/brpc/incubator-brpc/src/butil/containers/bounded_queue.h:260:34 (tsan_test+0x30f002)\r\n    #1 bthread::RemoteTaskQueue::pop(unsigned long*) /v/brpc/incubator-brpc/src/bthread/remote_task_queue.h:52 (tsan_test+0x30f002)\r\n    #2 bthread::TaskControl::steal_task(unsigned long*, unsigned long*, unsigned long) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:354 (tsan_test+0x30f002)\r\n    #3 bthread::TaskGroup::steal_task(unsigned long*) /v/brpc/incubator-brpc/src/bthread/task_group.h:221:26 (tsan_test+0x32017f)\r\n    #4 bthread::TaskGroup::wait_task(unsigned long*) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:125:13 (tsan_test+0x31b5cd)\r\n    #5 bthread::TaskGroup::run_main_task() /v/brpc/incubator-brpc/src/bthread/task_group.cpp:152 (tsan_test+0x31b5cd)\r\n    #6 bthread::TaskControl::worker_thread(void*) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:76:8 (tsan_test+0x30c7f3)\r\n\r\n  Location is heap block of size 384 at 0x7b480001ff80 allocated by thread T4:\r\n    #0 operator new(unsigned long, std::nothrow_t const&) <null> (tsan_test+0x22ee53)\r\n    #1 bthread::TaskControl::create_group() /v/brpc/incubator-brpc/src/bthread/task_control.cpp:89:20 (tsan_test+0x30cb8d)\r\n    #2 bthread::TaskControl::worker_thread(void*) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:65:23 (tsan_test+0x30c66d)\r\n\r\n  Mutex M924 (0x7b4800020098) created at:\r\n    #0 pthread_mutex_init <null> (tsan_test+0x1bf03a)\r\n    #1 butil::Mutex::Mutex() /v/brpc/incubator-brpc/src/butil/synchronization/lock.h:51:9 (tsan_test+0x31c007)\r\n    #2 bthread::RemoteTaskQueue::RemoteTaskQueue() /v/brpc/incubator-brpc/src/bthread/remote_task_queue.h:38 (tsan_test+0x31c007)\r\n    #3 bthread::TaskGroup::TaskGroup(bthread::TaskControl*) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:176 (tsan_test+0x31c007)\r\n    #4 bthread::TaskControl::create_group() /v/brpc/incubator-brpc/src/bthread/task_control.cpp:89:39 (tsan_test+0x30cba4)\r\n    #5 bthread::TaskControl::worker_thread(void*) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:65:23 (tsan_test+0x30c66d)\r\n\r\n  Thread T5 (tid=12186, running) created by main thread at:\r\n    #0 pthread_create <null> (tsan_test+0x1bec16)\r\n    #1 bthread::TaskControl::init(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:165:24 (tsan_test+0x30dc40)\r\n    #2 bthread::get_or_new_task_control() /v/brpc/incubator-brpc/src/bthread/bthread.cpp:91:12 (tsan_test+0x2f1753)\r\n    #3 bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/bthread.cpp:128:22 (tsan_test+0x2f03d7)\r\n    #4 bthread_start_background /v/brpc/incubator-brpc/src/bthread/bthread.cpp:193 (tsan_test+0x2f03d7)\r\n    #5 brpc::GlobalInitializeOrDieImpl() /v/brpc/incubator-brpc/src/brpc/global.cpp:612:5 (tsan_test+0x393922)\r\n    #6 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #7 brpc::GlobalInitializeOrDie() /v/brpc/incubator-brpc/src/brpc/global.cpp:617:9 (tsan_test+0x391b44)\r\n    #8 brpc::Server::InitializeOnce() /v/brpc/incubator-brpc/src/brpc/server.cpp:610:5 (tsan_test+0x279436)\r\n    #9 brpc::Server::StartInternal(in_addr const&, brpc::PortRange const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:712:9 (tsan_test+0x2796bc)\r\n    #10 brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:1062:12 (tsan_test+0x27deef)\r\n    #11 my::(anonymous namespace)::MyTest_TSAN_Check_brpc_Test::TestBody() /v/tsan_demo/tsan_test.cc:29:19 (tsan_test+0x23067c)\r\n    #12 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (tsan_test+0x264c1c)\r\n    #13 main /v/tsan_demo/tsan_test.cc:46:10 (tsan_test+0x22fea8)\r\n\r\n  Thread T4 (tid=12185, running) created by main thread at:\r\n    #0 pthread_create <null> (tsan_test+0x1bec16)\r\n    #1 bthread::TaskControl::init(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:165:24 (tsan_test+0x30dc40)\r\n    #2 bthread::get_or_new_task_control() /v/brpc/incubator-brpc/src/bthread/bthread.cpp:91:12 (tsan_test+0x2f1753)\r\n    #3 bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/bthread.cpp:128:22 (tsan_test+0x2f03d7)\r\n    #4 bthread_start_background /v/brpc/incubator-brpc/src/bthread/bthread.cpp:193 (tsan_test+0x2f03d7)\r\n    #5 brpc::GlobalInitializeOrDieImpl() /v/brpc/incubator-brpc/src/brpc/global.cpp:612:5 (tsan_test+0x393922)\r\n    #6 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #7 brpc::GlobalInitializeOrDie() /v/brpc/incubator-brpc/src/brpc/global.cpp:617:9 (tsan_test+0x391b44)\r\n    #8 brpc::Server::InitializeOnce() /v/brpc/incubator-brpc/src/brpc/server.cpp:610:5 (tsan_test+0x279436)\r\n    #9 brpc::Server::StartInternal(in_addr const&, brpc::PortRange const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:712:9 (tsan_test+0x2796bc)\r\n    #10 brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:1062:12 (tsan_test+0x27deef)\r\n    #11 my::(anonymous namespace)::MyTest_TSAN_Check_brpc_Test::TestBody() /v/tsan_demo/tsan_test.cc:29:19 (tsan_test+0x23067c)\r\n    #12 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (tsan_test+0x264c1c)\r\n    #13 main /v/tsan_demo/tsan_test.cc:46:10 (tsan_test+0x22fea8)\r\n\r\nSUMMARY: ThreadSanitizer: data race /v/brpc/incubator-brpc/src/butil/containers/bounded_queue.h:103:13 in butil::BoundedQueue<unsigned long>::push(unsigned long const&)\r\n```\r\n这里我感觉像是brpc有意为之?\r\n![image](https://user-images.githubusercontent.com/3905322/151551398-fc1a0d9d-bf5c-4d60-9007-de782ff78950.png)\r\n\r\n我在另一个报在timer_thread.cpp的data race:\r\n```bash\r\nWARNING: ThreadSanitizer: data race (pid=12180)\r\n  Write of size 8 at 0x7b5c00001650 by thread T7:\r\n    #0 bthread::TimerThread::Bucket::schedule(void (*)(void*), void*, timespec const&) /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:207:20 (tsan_test+0x323497)\r\n    #1 bthread::TimerThread::schedule(void (*)(void*), void*, timespec const&) /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:226:10 (tsan_test+0x3235fa)\r\n    #2 bthread::TaskGroup::_add_sleep_event(void*) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:745:43 (tsan_test+0x31e62a)\r\n    #3 bthread::TaskGroup::sched_to(bthread::TaskGroup**, bthread::TaskMeta*) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:623:9 (tsan_test+0x31def5)\r\n    #4 bthread::TaskGroup::sched_to(bthread::TaskGroup**, unsigned long) /v/brpc/incubator-brpc/src/bthread/task_group_inl.h:78:5 (tsan_test+0x2f4954)\r\n    #5 bthread::TaskGroup::sched(bthread::TaskGroup**) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:561:5 (tsan_test+0x31ea8c)\r\n    #6 bthread::TaskGroup::usleep(bthread::TaskGroup**, unsigned long) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:790 (tsan_test+0x31ea8c)\r\n    #7 bthread_usleep /v/brpc/incubator-brpc/src/bthread/bthread.cpp:364:16 (tsan_test+0x2f0e98)\r\n    #8 brpc::GlobalUpdate(void*) /v/brpc/incubator-brpc/src/brpc/global.cpp:234:17 (tsan_test+0x3944ed)\r\n    #9 bthread::TaskGroup::task_runner(long) /v/brpc/incubator-brpc/src/bthread/task_group.cpp:295:29 (tsan_test+0x31bb3e)\r\n    #10 bthread_make_fcontext <null> (tsan_test+0x2f74c0)\r\n    #11 bthread::TaskGroup::sched_to(bthread::TaskGroup**, unsigned long) /v/brpc/incubator-brpc/src/bthread/task_group_inl.h:78:5 (tsan_test+0x2f4954)\r\n    #12 bthread::TaskGroup::run_main_task() /v/brpc/incubator-brpc/src/bthread/task_group.cpp:153:9 (tsan_test+0x31b5e6)\r\n    #13 bthread::TaskControl::worker_thread(void*) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:76:8 (tsan_test+0x30c7f3)\r\n\r\n  Previous read of size 8 at 0x7b5c00001650 by thread T2:\r\n    #0 bthread::TimerThread::Bucket::consume_tasks() /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:169:9 (tsan_test+0x321e1c)\r\n    #1 bthread::TimerThread::run() /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:354 (tsan_test+0x321e1c)\r\n    #2 bthread::TimerThread::run_this(void*) /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:120:37 (tsan_test+0x321949)\r\n\r\n  Location is heap block of size 896 at 0x7b5c00001500 allocated by main thread:\r\n    #0 operator new[](unsigned long, std::nothrow_t const&) <null> (tsan_test+0x22eef3)\r\n    #1 bthread::TimerThread::start(bthread::TimerThreadOptions const*) /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:154:16 (tsan_test+0x322e84)\r\n    #2 bthread::init_global_timer_thread() /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:465:36 (tsan_test+0x323d1d)\r\n    #3 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #4 bthread::get_or_create_global_timer_thread() /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:474:5 (tsan_test+0x323b81)\r\n    #5 bthread::TaskControl::init(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:158:9 (tsan_test+0x30dae6)\r\n    #6 bthread::get_or_new_task_control() /v/brpc/incubator-brpc/src/bthread/bthread.cpp:91:12 (tsan_test+0x2f1753)\r\n    #7 bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/bthread.cpp:128:22 (tsan_test+0x2f03d7)\r\n    #8 bthread_start_background /v/brpc/incubator-brpc/src/bthread/bthread.cpp:193 (tsan_test+0x2f03d7)\r\n    #9 brpc::GlobalInitializeOrDieImpl() /v/brpc/incubator-brpc/src/brpc/global.cpp:612:5 (tsan_test+0x393922)\r\n    #10 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #11 brpc::GlobalInitializeOrDie() /v/brpc/incubator-brpc/src/brpc/global.cpp:617:9 (tsan_test+0x391b44)\r\n    #12 brpc::Server::InitializeOnce() /v/brpc/incubator-brpc/src/brpc/server.cpp:610:5 (tsan_test+0x279436)\r\n    #13 brpc::Server::StartInternal(in_addr const&, brpc::PortRange const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:712:9 (tsan_test+0x2796bc)\r\n    #14 brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:1062:12 (tsan_test+0x27deef)\r\n    #15 my::(anonymous namespace)::MyTest_TSAN_Check_brpc_Test::TestBody() /v/tsan_demo/tsan_test.cc:29:19 (tsan_test+0x23067c)\r\n    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (tsan_test+0x264c1c)\r\n    #17 main /v/tsan_demo/tsan_test.cc:46:10 (tsan_test+0x22fea8)\r\n\r\n  Thread T7 (tid=12188, running) created by main thread at:\r\n    #0 pthread_create <null> (tsan_test+0x1bec16)\r\n    #1 bthread::TaskControl::init(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:165:24 (tsan_test+0x30dc40)\r\n    #2 bthread::get_or_new_task_control() /v/brpc/incubator-brpc/src/bthread/bthread.cpp:91:12 (tsan_test+0x2f1753)\r\n    #3 bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/bthread.cpp:128:22 (tsan_test+0x2f03d7)\r\n    #4 bthread_start_background /v/brpc/incubator-brpc/src/bthread/bthread.cpp:193 (tsan_test+0x2f03d7)\r\n    #5 brpc::GlobalInitializeOrDieImpl() /v/brpc/incubator-brpc/src/brpc/global.cpp:612:5 (tsan_test+0x393922)\r\n    #6 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #7 brpc::GlobalInitializeOrDie() /v/brpc/incubator-brpc/src/brpc/global.cpp:617:9 (tsan_test+0x391b44)\r\n    #8 brpc::Server::InitializeOnce() /v/brpc/incubator-brpc/src/brpc/server.cpp:610:5 (tsan_test+0x279436)\r\n    #9 brpc::Server::StartInternal(in_addr const&, brpc::PortRange const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:712:9 (tsan_test+0x2796bc)\r\n    #10 brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:1062:12 (tsan_test+0x27deef)\r\n    #11 my::(anonymous namespace)::MyTest_TSAN_Check_brpc_Test::TestBody() /v/tsan_demo/tsan_test.cc:29:19 (tsan_test+0x23067c)\r\n    #12 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (tsan_test+0x264c1c)\r\n    #13 main /v/tsan_demo/tsan_test.cc:46:10 (tsan_test+0x22fea8)\r\n\r\n  Thread T2 (tid=12183, running) created by main thread at:\r\n    #0 pthread_create <null> (tsan_test+0x1bec16)\r\n    #1 bthread::TimerThread::start(bthread::TimerThreadOptions const*) /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:159:21 (tsan_test+0x32313f)\r\n    #2 bthread::init_global_timer_thread() /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:465:36 (tsan_test+0x323d1d)\r\n    #3 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #4 bthread::get_or_create_global_timer_thread() /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:474:5 (tsan_test+0x323b81)\r\n    #5 bthread::TaskControl::init(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:158:9 (tsan_test+0x30dae6)\r\n    #6 bthread::get_or_new_task_control() /v/brpc/incubator-brpc/src/bthread/bthread.cpp:91:12 (tsan_test+0x2f1753)\r\n    #7 bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) /v/brpc/incubator-brpc/src/bthread/bthread.cpp:128:22 (tsan_test+0x2f03d7)\r\n    #8 bthread_start_background /v/brpc/incubator-brpc/src/bthread/bthread.cpp:193 (tsan_test+0x2f03d7)\r\n    #9 brpc::GlobalInitializeOrDieImpl() /v/brpc/incubator-brpc/src/brpc/global.cpp:612:5 (tsan_test+0x393922)\r\n    #10 pthread_once <null> (tsan_test+0x1bf41f)\r\n    #11 brpc::GlobalInitializeOrDie() /v/brpc/incubator-brpc/src/brpc/global.cpp:617:9 (tsan_test+0x391b44)\r\n    #12 brpc::Server::InitializeOnce() /v/brpc/incubator-brpc/src/brpc/server.cpp:610:5 (tsan_test+0x279436)\r\n    #13 brpc::Server::StartInternal(in_addr const&, brpc::PortRange const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:712:9 (tsan_test+0x2796bc)\r\n    #14 brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /v/brpc/incubator-brpc/src/brpc/server.cpp:1062:12 (tsan_test+0x27deef)\r\n    #15 my::(anonymous namespace)::MyTest_TSAN_Check_brpc_Test::TestBody() /v/tsan_demo/tsan_test.cc:29:19 (tsan_test+0x23067c)\r\n    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (tsan_test+0x264c1c)\r\n    #17 main /v/tsan_demo/tsan_test.cc:46:10 (tsan_test+0x22fea8)\r\n\r\nSUMMARY: ThreadSanitizer: data race /v/brpc/incubator-brpc/src/bthread/timer_thread.cpp:207:20 in bthread::TimerThread::Bucket::schedule(void (*)(void*), void*, timespec const&)\r\n```\r\n中看到timer_thread.cpp:169，有一段注释说是为了减少一次mutex访问：\r\n![image](https://user-images.githubusercontent.com/3905322/151551478-2e868a65-cbba-4860-b2f9-dd8806f34948.png)\r\n\r\n类似这类场景，似乎TSAN也无法正确识别。\r\n\r\n完整的error msg见附件:\r\n[tsan_error.log](https://github.com/apache/incubator-brpc/files/7958817/tsan_error.log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024202843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024219849","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1024219849","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1024219849,"node_id":"IC_kwDOBhmkcs49DFrJ","user":{"login":"lday0321","id":3905322,"node_id":"MDQ6VXNlcjM5MDUzMjI=","avatar_url":"https://avatars.githubusercontent.com/u/3905322?v=4","gravatar_id":"","url":"https://api.github.com/users/lday0321","html_url":"https://github.com/lday0321","followers_url":"https://api.github.com/users/lday0321/followers","following_url":"https://api.github.com/users/lday0321/following{/other_user}","gists_url":"https://api.github.com/users/lday0321/gists{/gist_id}","starred_url":"https://api.github.com/users/lday0321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lday0321/subscriptions","organizations_url":"https://api.github.com/users/lday0321/orgs","repos_url":"https://api.github.com/users/lday0321/repos","events_url":"https://api.github.com/users/lday0321/events{/privacy}","received_events_url":"https://api.github.com/users/lday0321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T13:20:25Z","updated_at":"2022-01-28T13:20:25Z","author_association":"NONE","body":"另外，这个UT程序，跑到server.Join的时候就挂掉了, 非TSAN时，能够正常结束。\r\n```cpp\r\nTEST_F(MyTest, TSAN_Check_brpc) {\r\n  LOG(INFO) << \"Hello, TSAN brpc!\";\r\n  butil::ip_t ip = butil::my_ip();\r\n  uint16_t port = 12345;\r\n  brpc::Server server;\r\n  butil::EndPoint end_point = butil::EndPoint(ip, port);\r\n  int rc = server.Start(end_point, NULL);\r\n  ASSERT_EQ(0, rc);\r\n  LOG(INFO) << \"Hello, before sleep\";\r\n  std::this_thread::sleep_for(std::chrono::seconds(10));\r\n  LOG(INFO) << \"Hello, before stop\";\r\n  server.Stop(0);\r\n  LOG(INFO) << \"Hello, before join\";\r\n  server.Join();\r\n  LOG(INFO) << \"Hello, before exit\";\r\n}\r\n```\r\n\r\n出错信息：\r\n```\r\nI0128 20:44:08.095814 12180 tsan_test.cc:33] Hello, before stop\r\nI0128 20:44:08.095880 12180 server.cpp:1101] Server[] is going to quit\r\nI0128 20:44:08.097417 12180 tsan_test.cc:35] Hello, before join\r\nThreadSanitizer:DEADLYSIGNAL\r\n==12180==ERROR: ThreadSanitizer: SEGV on unknown address 0x000000000000 (pc 0x7f25c05052be bp 0x000000000000 sp 0x7f25961fe9e8 T12233)\r\n==12180==The signal is caused by a WRITE memory access.\r\n==12180==Hint: address points to the zero page.\r\n    #0 __sanitizer::internal_memcpy(void*, void const*, unsigned long) <null> (tsan_test+0x1952bd)\r\n    #1 __tsan::VarSizeStackTrace::Init(unsigned long const*, unsigned long, unsigned long) <null> (tsan_test+0x229813)\r\n    #2 __tsan::ReportRace(__tsan::ThreadState*) <null> (tsan_test+0x2278db)\r\n    #3 <null> <null> (tsan_test+0x22c6dd)\r\n    #4 __tsan_write4 <null> (tsan_test+0x21c41c)\r\n    #5 bthread::TaskGroup::task_runner(long) /v/brpc/incubator-brpc/src/bthread/task_group.cpp (tsan_test+0x31bcc7)\r\n    #6 bthread_make_fcontext <null> (tsan_test+0x2f74c0)\r\n\r\nThreadSanitizer can not provide additional info.\r\nSUMMARY: ThreadSanitizer: SEGV (/v/tsan_demo/build_tsan/tsan_test+0x1952bd) in __sanitizer::internal_memcpy(void*, void const*, unsigned long)\r\n==12180==ABORTING\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024219849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024852182","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1024852182","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1024852182,"node_id":"IC_kwDOBhmkcs49FgDW","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T07:00:07Z","updated_at":"2022-01-29T07:00:07Z","author_association":"CONTRIBUTOR","body":"对，这两个地方的原理都是类似的，就是先判断一下非空，是的话再加锁。这个实际上是安全的，但确实会引发检查器报错。\r\n最后的crash，看起来是TSAN和bthread不兼容导致的，bthread的堆栈是从0这个地址开始的，估计TSAN的遍历堆栈的时候没有处理这种情况","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024852182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024853092","html_url":"https://github.com/apache/brpc/issues/1689#issuecomment-1024853092","issue_url":"https://api.github.com/repos/apache/brpc/issues/1689","id":1024853092,"node_id":"IC_kwDOBhmkcs49FgRk","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T07:05:56Z","updated_at":"2022-01-29T07:05:56Z","author_association":"CONTRIBUTOR","body":"看起来是bazel版本太高不兼容，可以试试这个PR：#1657","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024853092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024880132","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1024880132","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1024880132,"node_id":"IC_kwDOBhmkcs49Fm4E","user":{"login":"lday0321","id":3905322,"node_id":"MDQ6VXNlcjM5MDUzMjI=","avatar_url":"https://avatars.githubusercontent.com/u/3905322?v=4","gravatar_id":"","url":"https://api.github.com/users/lday0321","html_url":"https://github.com/lday0321","followers_url":"https://api.github.com/users/lday0321/followers","following_url":"https://api.github.com/users/lday0321/following{/other_user}","gists_url":"https://api.github.com/users/lday0321/gists{/gist_id}","starred_url":"https://api.github.com/users/lday0321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lday0321/subscriptions","organizations_url":"https://api.github.com/users/lday0321/orgs","repos_url":"https://api.github.com/users/lday0321/repos","events_url":"https://api.github.com/users/lday0321/events{/privacy}","received_events_url":"https://api.github.com/users/lday0321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-29T09:59:11Z","updated_at":"2022-01-29T09:59:11Z","author_association":"NONE","body":"我把整个brpc库加到tsan suppression file(.tsan_suppression_file)里面，其他warning没有了，但是最后的那个`ERROR: ThreadSanitizer: SEGV on unknown address 0x000000000000`还是会报错。\r\n\r\n```bash\r\n# .tsan_suppression_file\r\nrace:brpc\r\n```\r\n\r\n执行UT结果：\r\n```bash\r\n#TSAN_OPTIONS=\"suppressions=/v/tsan_demo/.tsan_suppression_file\" ./tsan_test --gtest_filter=MyTest.TSAN_Check_brpc\r\nNote: Google Test filter = MyTest.TSAN_Check_brpc\r\n[==========] Running 1 test from 1 test suite.\r\n[----------] Global test environment set-up.\r\n[----------] 1 test from MyTest\r\n[ RUN      ] MyTest.TSAN_Check_brpc\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nI0129 17:52:53.699350  9388 tsan_test.cc:24] Hello, TSAN brpc!\r\nI0129 17:52:53.865265  9388 server.cpp:1046] Server[] is serving on port=12345.\r\nI0129 17:52:53.865690  9388 server.cpp:1049] Check out http://i39f13438.sqa.eu95:12345 in web browser.\r\nI0129 17:52:53.865866  9388 tsan_test.cc:31] Hello, before sleep\r\nLLVMSymbolizer: error reading file: No such file or directory\r\nI0129 17:53:03.865993  9388 tsan_test.cc:33] Hello, before stop\r\nI0129 17:53:03.866055  9388 server.cpp:1101] Server[] is going to quit\r\nI0129 17:53:03.867576  9388 tsan_test.cc:35] Hello, before join\r\nThreadSanitizer:DEADLYSIGNAL\r\n==9388==ERROR: ThreadSanitizer: SEGV on unknown address 0x000000000000 (pc 0x7f31a05d23de bp 0x000000000000 sp 0x7f31761789e8 T9444)\r\n==9388==The signal is caused by a WRITE memory access.\r\n==9388==Hint: address points to the zero page.\r\n    #0 __sanitizer::internal_memcpy(void*, void const*, unsigned long) <null> (tsan_test+0x1933dd)\r\n    #1 __tsan::VarSizeStackTrace::Init(unsigned long const*, unsigned long, unsigned long) <null> (tsan_test+0x227933)\r\n    #2 __tsan::ReportRace(__tsan::ThreadState*) <null> (tsan_test+0x2259fb)\r\n    #3 <null> <null> (tsan_test+0x22a7fd)\r\n    #4 __tsan_write4 <null> (tsan_test+0x21a53c)\r\n    #5 bthread::TaskGroup::task_runner(long) /v/brpc/incubator-brpc/src/bthread/task_group.cpp (tsan_test+0x313e99)\r\n    #6 bthread_make_fcontext <null> (tsan_test+0x2efe50)\r\n\r\nThreadSanitizer can not provide additional info.\r\nSUMMARY: ThreadSanitizer: SEGV (/v/tsan_demo/build_tsan/tsan_test+0x1933dd) in __sanitizer::internal_memcpy(void*, void const*, unsigned long)\r\n==9388==ABORTING\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1024880132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029136402","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029136402","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029136402,"node_id":"IC_kwDOBhmkcs49V2AS","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T15:57:44Z","updated_at":"2022-02-03T15:57:44Z","author_association":"NONE","body":"yes, compile works fine. but test failed:\r\n\r\n```\r\n90% tests passed, 6 tests failed out of 58\r\n\r\nTotal Test time (real) = 240.97 sec\r\n\r\nThe following tests FAILED:\r\n          8 - bthread_fd_unittest (Subprocess aborted)\r\n         11 - bthread_key_unittest (Subprocess aborted)\r\n         23 - brpc_channel_unittest (Subprocess aborted)\r\n         29 - brpc_grpc_protocol_unittest (Failed)\r\n         34 - brpc_http_rpc_protocol_unittest (Failed)\r\n         38 - brpc_load_balancer_unittest (Subprocess aborted)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029136402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029144725","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029144725","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029144725,"node_id":"IC_kwDOBhmkcs49V4CV","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T16:06:01Z","updated_at":"2022-02-03T16:06:01Z","author_association":"NONE","body":"```\r\n# ./build/test/bthread_fd_unittest\r\nRunning main() from gtest_main.cc\r\n[==========] Running 11 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 11 tests from FDTest\r\n[ RUN      ] FDTest.read_kernel_version\r\nsysname=Linux\r\nnodename=ubi-testing\r\nrelease=5.3.18-24.78-default\r\nversion=#1 SMP Mon Aug 2 21:00:23 UTC 2021 (a13100d)\r\nmachine=x86_64\r\n[       OK ] FDTest.read_kernel_version (0 ms)\r\n[ RUN      ] FDTest.ping_pong\r\nPROFILE: interrupts/evictions/bytes = 1074/23/6784\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nI20220203 16:04:45.948731  8044 bthread_fd_unittest.cpp:327] tid=190334\r\n[       OK ] FDTest.ping_pong (4838 ms)\r\n[ RUN      ] FDTest.mod_closed_fd\r\n[       OK ] FDTest.mod_closed_fd (0 ms)\r\n[ RUN      ] FDTest.add_existing_fd\r\n[       OK ] FDTest.add_existing_fd (0 ms)\r\n[ RUN      ] FDTest.interrupt_pthread\r\nwake up 140024936388352\r\n140024936388352 quits\r\nwake up 140024944781056\r\n140024944781056 quits\r\n[       OK ] FDTest.interrupt_pthread (201 ms)\r\n[ RUN      ] FDTest.invalid_epoll_events\r\nF20220203 16:04:46.250573  8044 fd.cpp:433] Check failed: (uint32_t)poll_events == epoll_events (0 vs. 2147483648)\r\n*** Check failure stack trace: ***\r\nAborted\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029144725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029145593","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029145593","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029145593,"node_id":"IC_kwDOBhmkcs49V4P5","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T16:06:55Z","updated_at":"2022-02-03T16:06:55Z","author_association":"NONE","body":"# ./build/test/bthread_key_unittest\r\nRunning main() from gtest_main.cc\r\n[==========] Running 7 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 7 tests from KeyTest\r\n[ RUN      ] KeyTest.creating_key_in_parallel\r\n[       OK ] KeyTest.creating_key_in_parallel (13 ms)\r\n[ RUN      ] KeyTest.use_one_key_in_different_threads\r\n[       OK ] KeyTest.use_one_key_in_different_threads (1 ms)\r\n[ RUN      ] KeyTest.use_invalid_keys\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nF20220203 16:06:18.533879  8076 key.cpp:197] Check failed: false bthread_setspecific is called on invalid bthread_key_t{index=383 version=123}\r\n*** Check failure stack trace: ***\r\nF20220203 16:06:18.533890  8096 key.cpp:197] Check failed: false bthread_setspecific is called on invalid bthread_key_t{index=383 version=123}\r\nAborted","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029145593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029146351","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029146351","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029146351,"node_id":"IC_kwDOBhmkcs49V4bv","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T16:07:42Z","updated_at":"2022-02-03T16:07:42Z","author_association":"NONE","body":"```\r\n# ./build/test/brpc_channel_unittest\r\n[==========] Running 58 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 58 tests from ChannelTest\r\n[ RUN      ] ChannelTest.intrusive_ptr_sanity\r\n[       OK ] ChannelTest.intrusive_ptr_sanity (1 ms)\r\n[ RUN      ] ChannelTest.init_as_single_server\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nE20220203 16:07:22.407583  8097 channel.cpp:228] Invalid address=`127.0.0.1:12345:asdf'\r\nE20220203 16:07:22.407660  8097 channel.cpp:228] Invalid address=`127.0.0.1:99999'\r\nE20220203 16:07:23.638518  8097 channel.cpp:255] Invalid address=`127.0.0.1asdf'\r\nE20220203 16:07:23.638583  8097 channel.cpp:255] Invalid address=`127.0.0.1'\r\n[       OK ] ChannelTest.init_as_single_server (1234 ms)\r\n[ RUN      ] ChannelTest.init_using_unknown_naming_service\r\nF20220203 16:07:23.638818  8097 load_balancer.cpp:76] Fail to find LoadBalancer by `unknown'\r\n*** Check failure stack trace: ***\r\nAborted\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029146351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029148332","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029148332","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029148332,"node_id":"IC_kwDOBhmkcs49V46s","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T16:09:39Z","updated_at":"2022-02-03T16:09:39Z","author_association":"NONE","body":"```\r\n# ./build/test/brpc_grpc_protocol_unittest\r\nFail to set -crash_on_fatal_log\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029148332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029148850","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029148850","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029148850,"node_id":"IC_kwDOBhmkcs49V5Cy","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T16:10:11Z","updated_at":"2022-02-03T16:10:11Z","author_association":"NONE","body":"```\r\n# ./build/test/brpc_http_rpc_protocol_unittest\r\nFail to set -crash_on_fatal_log\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029148850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029219897","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1029219897","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1029219897,"node_id":"IC_kwDOBhmkcs49WKY5","user":{"login":"songdongsheng","id":68488,"node_id":"MDQ6VXNlcjY4NDg4","avatar_url":"https://avatars.githubusercontent.com/u/68488?v=4","gravatar_id":"","url":"https://api.github.com/users/songdongsheng","html_url":"https://github.com/songdongsheng","followers_url":"https://api.github.com/users/songdongsheng/followers","following_url":"https://api.github.com/users/songdongsheng/following{/other_user}","gists_url":"https://api.github.com/users/songdongsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/songdongsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songdongsheng/subscriptions","organizations_url":"https://api.github.com/users/songdongsheng/orgs","repos_url":"https://api.github.com/users/songdongsheng/repos","events_url":"https://api.github.com/users/songdongsheng/events{/privacy}","received_events_url":"https://api.github.com/users/songdongsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-03T17:21:02Z","updated_at":"2022-02-03T17:21:02Z","author_association":"NONE","body":"```\r\n# ./build/test/brpc_load_balancer_unittest\r\nRunning main() from gtest_main.cc\r\n[==========] Running 12 tests from 1 test case.\r\n[----------] Global test environment set-up.\r\n[----------] 12 tests from LoadBalancerTest\r\n[ RUN      ] LoadBalancerTest.doubly_buffered_data\r\n[       OK ] LoadBalancerTest.doubly_buffered_data (0 ms)\r\n[ RUN      ] LoadBalancerTest.la_sanity\r\nAdded 256\r\nRemoved 128\r\nAdded 128\r\nRemoved 128\r\nAdded 128\r\nRemoved 128\r\nAdded 128\r\nRemoved 128\r\nAdded 128\r\nRemoved 128\r\n[       OK ] LoadBalancerTest.la_sanity (3 ms)\r\n[ RUN      ] LoadBalancerTest.update_while_selection\r\nTime brpc::policy::RoundRobinLoadBalancer ...\r\nWARNING: Logging before InitGoogleLogging() is written to STDERR\r\nI20220203 17:19:31.969134  3408 brpc_load_balancer_unittest.cpp:354] Stop all...\r\nthread 0 selected 1606462 times/s\r\nthread 1 selected 1606956 times/s\r\nthread 2 selected 1460682 times/s\r\nthread 3 selected 1584370 times/s\r\nthread 4 selected 1546276 times/s\r\nthread 5 selected 1678455 times/s\r\nthread 6 selected 1687297 times/s\r\nthread 7 selected 1005559 times/s\r\n0=4529 1=5592 2=5764 3=6159 4=5753 5=6958 6=4535 7=4555 8=6071 9=6930 10=6920 11=5543 12=5676 13=4547 14=6056 15=6778 16=135337 17=8739 18=5783 19=5462 20=5388 21=4559 22=6773 23=4530 24=4551 25=4550 26=4543 27=4541 28=4556 29=4552 30=80666 31=4555 32=6961 33=5700 34=5880 35=7439 36=5426 37=4543 38=5872 39=8685 40=6283 41=4540 42=7186 43=6966 44=4568 45=7148 46=4556 47=6960 48=4564 49=8884 50=4537 51=7114 52=5630 53=6124 54=4538 55=4544 56=6009 57=5643 58=4562 59=4560 60=6029 61=4558 62=4577 63=4559 64=5650 65=5610 66=6218 67=4542 68=8676 69=4552 70=4541 71=4527 72=4537 73=4572 74=4543 75=4545 76=4570 77=4525 78=6831 79=6011 80=4568 81=4535 82=4574 83=7614 84=5393 85=5626 86=4533 87=7227 88=5922 89=4552 90=5622 91=4539 92=4558 93=4578 94=5907 95=4567 96=4541 97=5746 98=17447 99=5706 100=6218 101=4529 102=6339 103=4542 104=4542 105=4554 106=4575 107=4535 108=4520 109=7084 110=5652 111=4549 112=4565 113=6860 114=4543 115=4566 116=177065 117=6055 118=6774 119=7969 120=4569 121=4533 122=4547 123=103917 124=58717 125=4553 126=6817 127=6011 128=4543 129=5773 130=4569 131=4545 132=5842 133=4533 134=5614 135=4565 136=5530 137=5939 138=6077 139=5499 140=84108 141=5684 142=4542 143=4533 144=4543 145=4533 146=87844 147=5716 148=4556 149=5586 150=6238 151=4569 152=145592 153=5361 154=4560 155=4562 156=4563 157=4546 158=4564 159=4532 160=4530 161=6057 162=4542 163=7410 164=4527 165=4533 166=5484 167=5897 168=4574 169=4544 170=4538 171=4554 172=4563 173=4563 174=4573 175=4572 176=4552 177=4567 178=5791 179=4538 180=6298 181=4542 182=4564 183=5726 184=8041 185=4556 186=4544 187=4547 188=4548 189=4528 190=4578 191=5703 192=4533 193=4528 194=4580 195=5845 196=4580 197=7069 198=5930 199=5582 200=4534 201=6688 202=6817 203=4577 204=4546 205=9798 206=5852 207=4555 208=4585 209=5787 210=5977 211=5929 212=5495 213=7258 214=39631 215=4565 216=4555 217=5817 218=6186 219=9248 220=5642 221=4544 222=5565 223=5587 224=5922 225=5512 226=4527 227=6207 228=9503 229=4556 230=4550 231=6890 232=4543 233=4564 234=5680 235=5544 236=6069 237=4546 238=6069 239=4551 240=87297 241=5652 242=4519 243=10035 244=8335 245=4553 246=5977 247=8718 248=44450 249=5388 250=4534 251=6910 252=74971 253=8536 254=6285 255=4568\r\nTime brpc::policy::RandomizedLoadBalancer ...\r\nI20220203 17:19:32.228614  3408 brpc_load_balancer_unittest.cpp:354] Stop all...\r\nthread 0 selected 2328529 times/s\r\nthread 1 selected 2241028 times/s\r\nthread 2 selected 2140237 times/s\r\nthread 3 selected 2321598 times/s\r\nthread 4 selected 2244930 times/s\r\nthread 5 selected 2515333 times/s\r\nthread 6 selected 1754473 times/s\r\nthread 7 selected 2063116 times/s\r\n0=15154 1=13008 2=17906 3=13205 4=14797 5=15778 6=15194 7=14209 8=14389 9=17048 10=15516 11=12878 12=13015 13=18994 14=13116 15=14488 16=14599 17=16076 18=89787 19=15877 20=15847 21=15693 22=13222 23=15757 24=13117 25=14341 26=12973 27=12991 28=13103 29=106929 30=54949 31=12888 32=14618 33=12843 34=15306 35=12917 36=15840 37=12971 38=14432 39=12973 40=13177 41=13051 42=13164 43=12912 44=14410 45=14694 46=14191 47=13068 48=13106 49=14322 50=14049 51=12905 52=13049 53=13199 54=13112 55=13085 56=12977 57=14500 58=14687 59=16235 60=13157 61=14895 62=14346 63=15806 64=94915 65=13109 66=12859 67=13090 68=15470 69=94034 70=15607 71=14343 72=14424 73=12981 74=14592 75=16337 76=15659 77=13121 78=14732 79=14735 80=15722 81=13113 82=14722 83=13167 84=88188 85=12945 86=13061 87=14459 88=13159 89=13157 90=16366 91=95293 92=13184 93=14493 94=61390 95=12856 96=14322 97=12963 98=14202 99=14627 100=14272 101=85139 102=13160 103=14533 104=13085 105=12954 106=15555 107=13072 108=16354 109=14738 110=13054 111=14058 112=12889 113=15115 114=13212 115=15915 116=13247 117=12953 118=15406 119=14534 120=13164 121=13129 122=13016 123=14389 124=14410 125=14414 126=13056 127=13155 128=13147 129=13919 130=15125 131=27864 132=91306 133=14759 134=13110 135=14467 136=14477 137=15413 138=13002 139=13168 140=13257 141=12978 142=14596 143=15831 144=12892 145=13037 146=14253 147=15760 148=14676 149=13267 150=13133 151=15517 152=14458 153=14478 154=12919 155=13068 156=13214 157=13227 158=15510 159=13189 160=14302 161=13117 162=13188 163=14573 164=12989 165=14139 166=12834 167=14510 168=17576 169=13089 170=13182 171=13000 172=16413 173=13058 174=13042 175=16841 176=13083 177=16220 178=13152 179=13102 180=12969 181=14071 182=14631 183=13084 184=18391 185=13033 186=12904 187=13224 188=15688 189=14805 190=14037 191=14016 192=15586 193=21278 194=13177 195=15149 196=13054 197=14798 198=14370 199=13125 200=13046 201=88792 202=13270 203=14600 204=14562 205=13140 206=14646 207=13218 208=16116 209=16105 210=15892 211=13112 212=17350 213=13083 214=13247 215=12971 216=15557 217=12962 218=13036 219=15093 220=13069 221=14214 222=15852 223=14682 224=15512 225=13124 226=13130 227=14977 228=13066 229=13217 230=14233 231=12963 232=13265 233=14187 234=16151 235=13075 236=13216 237=16153 238=13092 239=93424 240=14767 241=15124 242=14641 243=62295 244=14383 245=13178 246=14404 247=12871 248=13149 249=13106 250=12859 251=13347 252=12986 253=13146 254=13079 255=13191\r\nTime brpc::policy::LocalityAwareLoadBalancer ...\r\nI20220203 17:19:34.749984  3408 brpc_load_balancer_unittest.cpp:354] Stop all...\r\nthread 0 selected 3311645 times/s\r\nthread 1 selected 2396468 times/s\r\nthread 2 selected 3223153 times/s\r\nthread 3 selected 3249214 times/s\r\nthread 4 selected 3462593 times/s\r\nthread 5 selected 3680242 times/s\r\nthread 6 selected 4182242 times/s\r\nthread 7 selected 4079338 times/s\r\n0=229120 1=272521 2=250339 3=313053 4=296978 5=241662 6=210786 7=293017 8=307987 9=295441 10=220502 11=290807 12=309379 13=297958 14=292924 15=338865 16=232214 17=254399 18=259461 19=282166 20=320542 21=238306 22=306029 23=255217 24=311119 25=234952 26=316623 27=283006 28=232828 29=251789 30=290282 31=298994 32=241807 33=303388 34=302638 35=282959 36=269467 37=257226 38=286227 39=280172 40=285765 41=263134 42=276877 43=262745 44=221258 45=293913 46=246074 47=279910 48=316452 49=235638 50=287537 51=306702 52=255582 53=251268 54=288676 55=278975 56=255223 57=284847 58=245414 59=246290 60=263064 61=210177 62=304707 63=225759 64=282093 65=293159 66=228067 67=290148 68=282011 69=263047 70=287531 71=277055 72=308199 73=304511 74=259305 75=238577 76=302963 77=356492 78=263860 79=244640 80=249361 81=280570 82=285336 83=272467 84=261911 85=261278 86=288019 87=215411 88=297757 89=257245 90=257862 91=220552 92=262097 93=321967 94=247398 95=264807 96=309128 97=287070 98=267957 99=240477 100=288918 101=255164 102=317226 103=254457 104=304991 105=312181 106=266876 107=301166 108=251859 109=266613 110=250623 111=198528 112=310435 113=211288 114=284523 115=259551 116=296637 117=286553 118=292928 119=247757 120=353933 121=254779 122=263485 123=323705 124=289728 125=270984 126=239590 127=254255 128=252257 129=274595 130=287135 131=248786 132=333669 133=245178 134=301704 135=285509 136=236833 137=315774 138=256656 139=261143 140=249397 141=300865 142=264519 143=238299 144=295757 145=255234 146=290565 147=232154 148=272510 149=291231 150=256336 151=287956 152=264651 153=250051 154=236785 155=264194 156=245228 157=263176 158=313991 159=255295 160=235817 161=311080 162=307322 163=246223 164=218080 165=229030 166=257129 167=240262 168=291700 169=307953 170=224840 171=277633 172=257231 173=316038 174=259186 175=299020 176=283760 177=250763 178=279331 179=281616 180=317355 181=241649 182=272331 183=257705 184=261149 185=278155 186=290144 187=317232 188=242119 189=282409 190=240697 191=308747 192=309229 193=280081 194=249940 195=268230 196=303092 197=279762 198=242881 199=234428 200=262930 201=243003 202=245641 203=265673 204=282473 205=246572 206=264165 207=285447 208=289199 209=288854 210=271834 211=256623 212=282083 213=276046 214=284977 215=292438 216=243673 217=232791 218=295123 219=253844 220=205618 221=272078 222=230197 223=225566 224=255591 225=291023 226=282443 227=265320 228=239282 229=249985 230=279794 231=288885 232=314749 233=278348 234=295682 235=253140 236=272632 237=264708 238=249565 239=284288 240=269290 241=251487 242=297543 243=247955 244=306120 245=304323 246=280658 247=271756 248=252666 249=318598 250=305059 251=241555 252=281932 253=253092 254=244929 255=275748\r\nTime brpc::policy::WeightedRoundRobinLoadBalancer ...\r\nI20220203 17:19:35.121575  3408 brpc_load_balancer_unittest.cpp:354] Stop all...\r\nthread 0 selected 393767 times/s\r\nthread 1 selected 358938 times/s\r\nthread 2 selected 373727 times/s\r\nthread 3 selected 355614 times/s\r\nthread 4 selected 376679 times/s\r\nthread 5 selected 354405 times/s\r\nthread 6 selected 394650 times/s\r\nthread 7 selected 99825 times/s\r\n0=2614 1=3513 2=2631 3=3874 4=4207 5=4642 6=2670 7=3399 8=2653 9=2639 10=2588 11=5704 12=2682 13=3689 14=3764 15=2608 16=2607 17=2641 18=3883 19=73643 20=3631 21=2628 22=2637 23=4179 24=4064 25=4937 26=2577 27=4291 28=6500 29=2657 30=5910 31=4051 32=3963 33=2651 34=5841 35=2572 36=2564 37=4285 38=3765 39=3731 40=2599 41=4141 42=2614 43=2614 44=2575 45=2616 46=4261 47=2563 48=2606 49=9168 50=3819 51=4264 52=2589 53=3855 54=2616 55=3528 56=5083 57=2674 58=2606 59=3478 60=2595 61=2596 62=2601 63=3683 64=4213 65=2580 66=2648 67=4471 68=2660 69=3569 70=4515 71=2600 72=3891 73=5505 74=5225 75=4005 76=2678 77=2572 78=2584 79=2642 80=2638 81=4799 82=2601 83=4126 84=3808 85=5567 86=3882 87=4078 88=3580 89=3987 90=2610 91=2614 92=4216 93=4601 94=2561 95=2557 96=2562 97=4032 98=3771 99=4865 100=2582 101=6180 102=2601 103=2625 104=4245 105=2580 106=7434 107=9130 108=2585 109=6807 110=2668 111=3610 112=2572 113=3796 114=2603 115=3888 116=2622 117=3505 118=5128 119=5053 120=2597 121=4054 122=4677 123=3510 124=2560 125=4630 126=4874 127=2610 128=15098 129=3695 130=6592 131=3642 132=5245 133=2690 134=2589 135=3730 136=2637 137=2606 138=2550 139=2561 140=2558 141=2643 142=2606 143=3487 144=4698 145=4739 146=2635 147=3610 148=4960 149=2659 150=2611 151=4229 152=3634 153=6801 154=2556 155=2598 156=2634 157=2579 158=5280 159=6659 160=5502 161=3650 162=2550 163=2583 164=3981 165=2626 166=3729 167=3940 168=2589 169=3973 170=2665 171=2586 172=8984 173=2653 174=3628 175=2577 176=2629 177=2601 178=3429 179=3665 180=3635 181=2639 182=3588 183=3815 184=3458 185=3905 186=3483 187=4137 188=2573 189=4948 190=2586 191=2634 192=4681 193=3740 194=3711 195=4302 196=3974 197=2594 198=4045 199=5213 200=3455 201=2514 202=2608 203=2598 204=3834 205=3659 206=4255 207=2591 208=2625 209=2669 210=3683 211=4132 212=2544 213=3698 214=2640 215=4404 216=2641 217=3566 218=4470 219=2617 220=3807 221=3734 222=7455 223=3945 224=2646 225=3998 226=5280 227=3703 228=3724 229=2638 230=8456 231=3542 232=4450 233=3689 234=3862 235=2566 236=4661 237=2635 238=2569 239=2586 240=2632 241=5132 242=2622 243=2623 244=5117 245=3672 246=5029 247=2656 248=3652 249=2657 250=2690 251=2572 252=2557 253=2563 254=2618\r\nTime brpc::policy::ConsistentHashingLoadBalancer ...\r\nI20220203 17:19:42.048159  3408 brpc_load_balancer_unittest.cpp:354] Stop all...\r\nthread 0 selected 1861568 times/s\r\nthread 1 selected 1964706 times/s\r\nthread 2 selected 1893361 times/s\r\nthread 3 selected 2038738 times/s\r\nthread 4 selected 1958852 times/s\r\nthread 5 selected 1910641 times/s\r\nthread 6 selected 1938717 times/s\r\nthread 7 selected 1804957 times/s\r\n0=243156 1=397057 2=486537 3=373516 4=531921 5=246322 6=396507 7=270681 8=563122 9=815915 10=569346 11=504150 12=374978 13=333000 14=801339 15=524420 16=228936 17=258430 18=546169 19=446224 20=562146 21=439108 22=276774 23=390958 24=274602 25=1063663 26=667576 27=417637 28=261201 29=283676 30=261865 31=266179 32=528732 33=524404 34=279180 35=647531 36=499084 37=311936 38=345053 39=611898 40=225514 41=730045 42=522378 43=312767 44=363268 45=340634 46=265403 47=231185 48=268035 49=297743 50=362452 51=276870 52=388847 53=261413 54=240954 55=380982 56=240251 57=397284 58=239492 59=363408 60=367419 61=338266 62=462274 63=483981 64=259211 65=267610 66=280158 67=271636 68=389800 69=242511 70=317719 71=258543 72=776014 73=282624 74=309037 75=313950 76=251399 77=361250 78=280561 79=255643 80=323973 81=279515 82=274424 83=358288 84=333243 85=628654 86=242929 87=284037 88=275819 89=441188 90=283734 91=549273 92=683873 93=250861 94=392145 95=562021 96=220747 97=396512 98=652238 99=246704 100=403885 101=619894 102=619580 103=296182 104=243238 105=380903 106=293653 107=320240 108=543494 109=406538 110=591739 111=262674 112=1041339 113=604663 114=281878 115=668412 116=507916 117=291759 118=269407 119=271390 120=313751 121=520354 122=504636 123=494036 124=189727 125=1238842 126=991958 127=253007 128=457019 129=231273 130=295681 131=504208 132=407584 133=268785 134=475299 135=463774 136=937972 137=608225 138=324182 139=267412 140=273412 141=261312 142=219089 143=392091 144=308966 145=719631 146=278657 147=278059 148=405034 149=256663 150=402503 151=325700 152=566468 153=644582 154=249394 155=279762 156=961427 157=340986 158=290037 159=688967 160=391825 161=619893 162=576537 163=287084 164=405452 165=243067 166=408757 167=385110 168=233357 169=310884 170=421774 171=248239 172=248979 173=300359 174=264124 175=371789 176=451813 177=811810 178=220576 179=443772 180=420739 181=594979 182=241973 183=509290 184=439131 185=249969 186=285854 187=419834 188=404607 189=608795 190=1105451 191=243919 192=247750 193=287762 194=731178 195=260505 196=445326 197=470450 198=1356988 199=406420 200=274418 201=277621 202=232065 203=235904 204=434838 205=315098 206=521411 207=544648 208=969196 209=509891 210=282613 211=253025 212=262917 213=463265 214=710653 215=451724 216=481107 217=301521 218=251063 219=245273 220=251949 221=367258 222=226801 223=290116 224=407495 225=622618 226=391739 227=939287 228=276552 229=398037 230=329803 231=364968 232=773742 233=281986 234=524140 235=817957 236=296952 237=404324 238=384602 239=272562 240=289197 241=426656 242=260685 243=255380 244=241651 245=569091 246=623329 247=260739 248=246611 249=255765 250=940245 251=400532 252=280142 253=376312 254=389309 255=238108\r\n[       OK ] LoadBalancerTest.update_while_selection (10283 ms)\r\n[ RUN      ] LoadBalancerTest.fairness\r\nPROFILE: interrupts/evictions/bytes = 102/18/1800\r\nRoundRobinLoadBalancer:\r\n0=48643 1=48647 2=48647 3=48649 4=48648 5=48649 6=48648 7=48650 8=48648 9=48648 10=48648 11=48648 12=48649 13=48650 14=48650 15=48648 16=48648 17=48646 18=48648 19=48649 20=48651 21=48648 22=48647 23=48648 24=48649 25=48648 26=48649 27=48650 28=48650 29=48650 30=48648 31=48649 32=48647 33=48648 34=48649 35=48649 36=48649 37=48648 38=48648 39=48649 40=48649 41=48651 42=48648 43=48647 44=48648 45=48648 46=48649 47=48648 48=48650 49=48649 50=48649 51=48648 52=48649 53=48648 54=48649 55=48650 56=48650 57=48650 58=48647 59=48647 60=48648 61=48648 62=48649 63=48649 64=48648 65=48650 66=48648 67=48648 68=48647 69=48649 70=48650 71=48650 72=48650 73=48649 74=48648 75=48647 76=48649 77=48648 78=48650 79=48648 80=48649 81=48649 82=48649 83=48648 84=48647 85=48649 86=48649 87=48650 88=48648 89=48648 90=48647 91=48648 92=48648 93=48649 94=48649 95=48649 96=48649 97=48649 98=48649 99=48649 100=48647 101=48648 102=48650 103=48649 104=48649 105=48647 106=48648 107=48649 108=48649 109=48649 110=48649 111=48648 112=48649 113=48649 114=48649 115=48649 116=48647 117=48650 118=48648 119=48649 120=48648 121=48648 122=48648 123=48650 124=48649 125=48647 126=48646 127=48647 128=48648 129=48648 130=48649 131=48648 132=48647 133=48646 134=48647 135=48647 136=48648 137=48647 138=48650 139=48647 140=48648 141=48647 142=48646 143=48649 144=48648 145=48650 146=48648 147=48647 148=48647 149=48647 150=48646 151=48649 152=48649 153=48648 154=48648 155=48648 156=48648 157=48645 158=48647 159=48648 160=48649 161=48646 162=48647 163=48646 164=48648 165=48648 166=48649 167=48648 168=48648 169=48648 170=48648 171=48647 172=48646 173=48647 174=48645 175=48647 176=48646 177=48647 178=48644 179=48646 180=48648 181=48648 182=48647 183=48645 184=48646 185=48646 186=48647 187=48647 188=48648 189=48646 190=48647 191=48645 192=48646 193=48647 194=48646 195=48648 196=48648 197=48648 198=48647 199=48645 200=48644 201=48647 202=48647 203=48648 204=48646 205=48646 206=48646 207=48647 208=48645 209=48647 210=48647 211=48648 212=48648 213=48647 214=48648 215=48644 216=48646 217=48646 218=48648 219=48647 220=48646 221=48646 222=48647 223=48646 224=48647 225=48646 226=48647 227=48647 228=48647 229=48647 230=48645 231=48647 232=48646 233=48647 234=48647 235=48648 236=48645 237=48647 238=48647 239=48647 240=48647 241=48646 242=48648 243=48646 244=48647 245=48646 246=48647 247=48646 248=48647 249=48646 250=48647 251=48645 252=48646 253=48648 254=48648 255=48648\r\n: average=48647 deviation=1.36282\r\nPROFILE: interrupts/evictions/bytes = 112/14/2008\r\nRandomizedLoadBalancer:\r\n0=45257 1=45447 2=45349 3=45450 4=45193 5=45170 6=45475 7=45167 8=45267 9=45498 10=45136 11=44808 12=45103 13=45250 14=45270 15=45442 16=45449 17=45373 18=45311 19=45062 20=44876 21=45018 22=45272 23=45354 24=45649 25=45342 26=45243 27=45518 28=45413 29=45373 30=45319 31=45436 32=45139 33=45408 34=45420 35=45448 36=45728 37=45212 38=45244 39=45549 40=44938 41=44894 42=45610 43=45297 44=45188 45=45154 46=45298 47=45474 48=45636 49=45427 50=45670 51=45283 52=45384 53=45225 54=45122 55=45401 56=45697 57=45096 58=45417 59=45453 60=44967 61=45319 62=45643 63=45328 64=45430 65=45457 66=45226 67=45602 68=45040 69=45045 70=45183 71=45370 72=45028 73=45229 74=45298 75=45350 76=45226 77=45368 78=45312 79=45466 80=45274 81=45169 82=45632 83=45082 84=45182 85=45413 86=45431 87=44789 88=45288 89=45142 90=45307 91=45407 92=45641 93=45663 94=44943 95=45511 96=45062 97=45487 98=45725 99=45327 100=45499 101=45267 102=44701 103=45587 104=45566 105=45433 106=45140 107=45749 108=45358 109=45303 110=45113 111=45277 112=45149 113=45348 114=45276 115=45035 116=45489 117=45500 118=45211 119=45393 120=45691 121=45336 122=45141 123=44971 124=45179 125=44956 126=45884 127=45617 128=45423 129=45346 130=45039 131=45244 132=45496 133=45327 134=45205 135=45335 136=45237 137=45427 138=45214 139=45018 140=45081 141=45178 142=45262 143=45460 144=45649 145=45521 146=45515 147=45477 148=45147 149=45350 150=45208 151=44907 152=45294 153=45162 154=45306 155=45293 156=45469 157=45376 158=45346 159=45572 160=45349 161=45200 162=45181 163=45400 164=45332 165=45109 166=45100 167=45414 168=44744 169=45115 170=45166 171=45402 172=45212 173=45451 174=45443 175=45584 176=45123 177=45169 178=45202 179=45564 180=45099 181=45333 182=45478 183=45593 184=45360 185=45533 186=45333 187=45421 188=45681 189=45177 190=45607 191=45316 192=45243 193=45352 194=45676 195=45610 196=45198 197=45063 198=45248 199=45337 200=45523 201=45199 202=45409 203=45280 204=45465 205=45517 206=45261 207=45319 208=45170 209=45635 210=45234 211=45170 212=45034 213=45579 214=45311 215=45387 216=45020 217=45232 218=45406 219=45640 220=45405 221=45532 222=45361 223=45005 224=45261 225=45530 226=45496 227=45496 228=45227 229=45813 230=45268 231=45119 232=45216 233=45506 234=45430 235=45295 236=45390 237=45572 238=45205 239=45184 240=45145 241=44779 242=45554 243=45474 244=45464 245=45231 246=44853 247=45020 248=45619 249=45125 250=45258 251=45209 252=45483 253=44967 254=45005 255=45301\r\n: average=45316 deviation=207.518\r\nPROFILE: interrupts/evictions/bytes = 106/28/2224\r\nLocalityAwareLoadBalancer:\r\n0=33853 1=33727 2=34109 3=34013 4=33695 5=33575 6=34131 7=33867 8=34036 9=33749 10=33931 11=33949 12=33810 13=33522 14=33738 15=33976 16=33923 17=33633 18=33763 19=33722 20=33960 21=33818 22=33913 23=33844 24=34090 25=34213 26=33798 27=33944 28=33820 29=33786 30=33744 31=33764 32=34058 33=33896 34=33558 35=33826 36=34098 37=34031 38=33863 39=34032 40=33935 41=33889 42=33891 43=33917 44=33934 45=33451 46=33932 47=34079 48=33778 49=33898 50=33922 51=33976 52=33810 53=33988 54=34150 55=33970 56=33795 57=34132 58=33684 59=34207 60=34050 61=33995 62=33873 63=34034 64=33938 65=33904 66=33710 67=33572 68=34056 69=33633 70=33638 71=33834 72=34104 73=33956 74=33966 75=33981 76=33843 77=33778 78=33629 79=33795 80=33705 81=34048 82=33722 83=33805 84=34098 85=34150 86=33829 87=33619 88=33941 89=33686 90=33858 91=34085 92=33806 93=34189 94=33493 95=33799 96=33942 97=33757 98=33882 99=33807 100=33803 101=33924 102=33829 103=34011 104=33902 105=33857 106=33924 107=33918 108=33935 109=34026 110=33891 111=33769 112=34085 113=33896 114=33710 115=33884 116=34143 117=34014 118=33896 119=33931 120=34209 121=33829 122=34003 123=33839 124=34341 125=33638 126=33626 127=33989 128=33799 129=33987 130=33475 131=33888 132=34018 133=33501 134=34104 135=33845 136=33764 137=33929 138=34204 139=33981 140=34223 141=33937 142=33946 143=33799 144=34193 145=33929 146=33577 147=33737 148=33936 149=33937 150=34051 151=33858 152=33851 153=34106 154=33974 155=33634 156=33818 157=34058 158=33861 159=33844 160=33854 161=33686 162=34015 163=33624 164=33667 165=33729 166=33861 167=33647 168=33912 169=33758 170=33982 171=34338 172=33666 173=33699 174=34042 175=33774 176=34152 177=34117 178=33944 179=34079 180=33841 181=33793 182=33684 183=34138 184=33905 185=33988 186=33594 187=33840 188=33917 189=33881 190=34004 191=33898 192=33938 193=33754 194=34141 195=34215 196=33825 197=34025 198=33606 199=34016 200=33967 201=33634 202=33849 203=33724 204=34363 205=34122 206=33600 207=33914 208=34127 209=33878 210=33629 211=34149 212=34040 213=33903 214=33825 215=33884 216=33874 217=33893 218=34105 219=33857 220=34251 221=33906 222=34018 223=34065 224=33955 225=33821 226=33988 227=33699 228=33719 229=34382 230=33833 231=33951 232=33802 233=33788 234=33840 235=33981 236=33776 237=33878 238=34117 239=33926 240=33567 241=33775 242=33692 243=33625 244=34102 245=33539 246=34004 247=34179 248=33969 249=33942 250=33846 251=34102 252=33912 253=34095 254=33887 255=34060\r\n: average=33894 deviation=174.421\r\nPROFILE: interrupts/evictions/bytes = 103/13/1832\r\nWeightedRoundRobinLoadBalancer:\r\nconfigured weight:\r\nWeightedRoundRobin{n=256: 94489280586(100) 94489280590(100) 103079215210(100) 85899345996(100) 94489280717(100) 77309411540(100) 103079215118(100) 94489280757(100) 94489280662(100) 85899345980(100) 94489280739(100) 103079215219(100) 103079215273(100) 94489280725(100) 94489280535(100) 85899345954(100) 94489280520(100) 103079215277(100) 94489280702(100) 103079215115(100) 77309411464(100) 94489280704(100) 85899345968(100) 94489280644(100) 85899345970(100) 103079215151(100) 85899346164(100) 94489280642(100) 94489280729(100) 94489280684(100) 85899346069(100) 103079215198(100) 103079215272(100) 111669149750(100) 94489280672(100) 111669149936(100) 111669149797(100) 94489280654(100) 94489280565(100) 94489280621(100) 77309411466(100) 85899345999(100) 85899346124(100) 111669149760(100) 111669149878(100) 94489280630(100) 103079215227(100) 85899346116(100) 94489280636(100) 85899345921(100) 103079215328(100) 85899346156(100) 103079215278(100) 94489280557(100) 111669149851(100) 85899346117(100) 85899346114(100) 94489280518(100) 85899345976(100) 103079215305(100) 94489280670(100) 103079215289(100) 85899346007(100) 103079215293(100) 77309411419(100) 103079215354(100) 85899346015(100) 85899346053(100) 85899346020(100) 94489280614(100) 85899346057(100) 85899346033(100) 111669149778(100) 85899345952(100) 94489280744(100) 103079215339(100) 94489280547(100) 94489280710(100) 85899345932(100) 103079215342(100) 111669149822(100) 103079215335(100) 85899346169(100) 94489280543(100) 94489280637(100) 94489280550(100) 85899346037(100) 77309411561(100) 94489280665(100) 103079215207(100) 94489280529(100) 94489280746(100) 85899346173(100) 94489280521(100) 85899346091(100) 77309411391(100) 103079215106(100) 103079215329(100) 94489280583(100) 103079215176(100) 85899346095(100) 103079215144(100) 85899346162(100) 103079215231(100) 94489280651(100) 85899346087(100) 85899346101(100) 111669149812(100) 103079215303(100) 111669149794(100) 94489280604(100) 85899346054(100) 85899346108(100) 94489280530(100) 111669149847(100) 111669149729(100) 103079215163(100) 94489280633(100) 103079215114(100) 77309411494(100) 94489280677(100) 103079215304(100) 85899346150(100) 94489280675(100) 103079215319(100) 77309411447(100) 94489280517(100) 103079215247(100) 77309411416(100) 94489280553(100) 103079215261(100) 85899346051(100) 94489280622(100) 103079215193(100) 94489280579(100) 94489280549(100) 94489280740(100) 77309411380(100) 85899345988(100) 94489280760(100) 103079215203(100) 77309411489(100) 85899346175(100) 85899346055(100) 103079215356(100) 85899346143(100) 94489280730(100) 85899346106(100) 94489280619(100) 85899346107(100) 85899345978(100) 103079215123(100) 103079215284(100) 103079215295(100) 77309411370(100) 85899345923(100) 94489280755(100) 111669149844(100) 85899345941(100) 77309411348(100) 94489280608(100) 94489280597(100) 103079215310(100) 103079215161(100) 94489280538(100) 103079215245(100) 103079215345(100) 85899345986(100) 103079215173(100) 103079215251(100) 94489280595(100) 94489280624(100) 94489280714(100) 85899346104(100) 103079215233(100) 77309411364(100) 94489280542(100) 103079215274(100) 94489280763(100) 103079215150(100) 94489280719(100) 94489280593(100) 85899345942(100) 94489280731(100) 94489280609(100) 94489280671(100) 94489280573(100) 85899345963(100) 111669149745(100) 94489280556(100) 103079215174(100) 103079215287(100) 103079215313(100) 103079215197(100) 103079215184(100) 94489280632(100) 85899346064(100) 85899346134(100) 103079215120(100) 94489280751(100) 103079215341(100) 94489280652(100) 94489280668(100) 85899346042(100) 77309411328(100) 77309411433(100) 85899346098(100) 103079215320(100) 85899346006(100) 85899346082(100) 94489280536(100) 103079215351(100) 94489280707(100) 103079215350(100) 85899346131(100) 85899345935(100) 85899346113(100) 94489280540(100) 103079215330(100) 94489280623(100) 85899346149(100) 94489280537(100) 94489280732(100) 85899345997(100) 85899346048(100) 103079215249(100) 94489280720(100) 94489280664(100) 94489280689(100) 94489280541(100) 94489280567(100) 94489280676(100) 85899345993(100) 94489280734(100) 103079215250(100) 103079215280(100) 94489280596(100) 94489280551(100) 103079215179(100) 94489280722(100) 103079215108(100) 77309411442(100) 94489280539(100) 94489280715(100) 94489280616(100) 103079215111(100) 77309411390(100) 85899346141(100) 103079215283(100) 103079215358(100) 103079215169(100) 94489280666(100) 103079215194(100) 111669149747(100) 94489280620(100) 94489280525(100)}\r\n0=23568 1=23576 2=23572 3=23566 4=23571 5=23578 6=23568 7=23567 8=23571 9=23579 10=23564 11=23568 12=23575 13=23579 14=23562 15=23567 16=23577 17=23576 18=23564 19=23569 20=23576 21=23574 22=23566 23=23568 24=23577 25=23570 26=23567 27=23572 28=23579 29=23568 30=23567 31=23575 32=23580 33=23564 34=23567 35=23576 36=23578 37=23563 38=23567 39=23576 40=23575 41=23566 42=23569 43=23576 44=23573 45=23566 46=23570 47=23577 48=23569 49=23567 50=23572 51=23579 52=23565 53=23567 54=23573 55=23579 56=23562 57=23568 58=23577 59=23577 60=23564 61=23568 62=23576 63=23574 64=23566 65=23569 66=23577 67=23571 68=23566 69=23570 70=23578 71=23567 72=23567 73=23573 74=23578 75=23563 76=23565 77=23575 78=23577 79=23561 80=23567 81=23576 82=23575 83=23564 84=23567 85=23575 86=23572 87=23566 88=23569 89=23576 90=23569 91=23565 92=23571 93=23577 94=23565 95=23567 96=23574 97=23580 98=23564 99=23569 100=23576 101=23578 102=23565 103=23570 104=23577 105=23576 106=23567 107=23569 108=23577 109=23572 110=23567 111=23571 112=23579 113=23569 114=23568 115=23573 116=23579 117=23564 118=23567 119=23576 120=23579 121=23562 122=23567 123=23577 124=23576 125=23564 126=23568 127=23576 128=23574 129=23566 130=23569 131=23577 132=23569 133=23566 134=23571 135=23577 136=23566 137=23565 138=23573 139=23578 140=23562 141=23566 142=23575 143=23577 144=23562 145=23567 146=23575 147=23574 148=23565 149=23568 150=23575 151=23572 152=23565 153=23569 154=23577 155=23567 156=23566 157=23569 158=23577 159=23563 160=23565 161=23572 162=23576 163=23559 164=23565 165=23574 166=23574 167=23561 168=23566 169=23573 170=23571 171=23564 172=23566 173=23574 174=23568 175=23563 176=23568 177=23575 178=23564 179=23564 180=23571 181=23576 182=23561 183=23565 184=23574 185=23576 186=23561 187=23566 188=23575 189=23575 190=23564 191=23567 192=23575 193=23572 194=23566 195=23569 196=23576 197=23568 198=23566 199=23571 200=23578 201=23564 202=23567 203=23572 204=23578 205=23562 206=23568 207=23575 208=23577 209=23564 210=23569 211=23576 212=23574 213=23566 214=23569 215=23577 216=23571 217=23567 218=23570 219=23578 220=23567 221=23567 222=23572 223=23579 224=23564 225=23567 226=23576 227=23577 228=23561 229=23567 230=23576 231=23575 232=23564 233=23567 234=23576 235=23573 236=23567 237=23569 238=23577 239=23570 240=23567 241=23572 242=23578 243=23566 244=23567 245=23574 246=23579 247=23563 248=23567 249=23575 250=23577 251=23564 252=23568 253=23576 254=23575 255=23565\r\n: scaling average=235.705 scaling deviation=0.0518239\r\nPROFILE: interrupts/evictions/bytes = 94/16/1800\r\nWeightedRoundRobinLoadBalancer:\r\nconfigured weight:\r\nWeightedRoundRobin{n=256: 103079215117(92) 103079215212(98) 120259084339(119) 111669149786(80) 103079215258(100) 111669149761(82) 111669149950(93) 111669149875(99) 94489280733(117) 85899345982(80) 111669149703(103) 103079215208(91) 103079215307(118) 103079215131(81) 85899346034(111) 111669149700(118) 103079215314(112) 111669149771(101) 103079215143(96) 103079215188(114) 111669149872(118) 111669149842(101) 103079215326(86) 94489280585(109) 103079215268(81) 103079215159(105) 103079215133(89) 103079215281(84) 103079215256(96) 103079215312(102) 111669149841(111) 94489280640(97) 94489280589(83) 103079215324(118) 103079215129(118) 94489280741(105) 103079215215(97) 111669149922(106) 103079215132(85) 94489280705(90) 94489280527(99) 94489280723(118) 111669149942(80) 103079215299(87) 111669149943(91) 103079215128(100) 94489280674(85) 94489280598(107) 111669149912(106) 94489280690(115) 85899346025(212) 85899345920(101) 94489280634(115) 103079215260(82) 103079215244(116) 111669149933(109) 103079215343(112) 111669149712(117) 94489280726(88) 94489280656(86) 103079215224(117) 111669149776(116) 111669149789(114) 111669149905(115) 111669149879(101) 111669149766(97) 103079215148(114) 120259084337(93) 94489280555(117) 103079215165(109) 103079215263(99) 103079215201(113) 103079215323(99) 94489280534(102) 103079215185(99) 103079215311(92) 111669149742(94) 103079215355(104) 111669149866(80) 103079215134(81) 85899345956(107) 111669149825(115) 94489280696(98) 103079215306(99) 103079215216(113) 103079215187(118) 111669149843(98) 111669149765(103) 94489280578(98) 111669149937(110) 111669149837(114) 103079215130(91) 111669149753(86) 111669149902(82) 103079215189(119) 103079215200(86) 85899345940(84) 94489280533(115) 120259084436(90) 103079215347(90) 94489280515(284) 85899345962(100) 111669149887(81) 111669149876(105) 111669149715(94) 94489280570(91) 94489280699(106) 103079215211(87) 94489280698(96) 103079215322(92) 94489280735(95) 111669149948(99) 94489280647(89) 94489280767(89) 85899346081(119) 111669149795(111) 103079215352(94) 94489280580(116) 85899345972(113) 103079215332(99) 103079215141(92) 103079215171(101) 111669149785(119) 103079215214(89) 94489280643(114) 111669149853(100) 103079215145(118) 85899346008(85) 111669149839(111) 103079215109(95) 85899346039(96) 111669149911(93) 103079215267(86) 94489280742(82) 111669149896(86) 103079215269(86) 85899346086(110) 111669149706(80) 103079215225(90) 111669149755(105) 120259084321(119) 120259084439(99) 103079215122(90) 94489280700(88) 94489280646(96) 103079215196(90) 120259084386(116) 111669149895(81) 120259084404(104) 94489280693(119) 94489280679(417) 103079215243(119) 111669149823(94) 94489280754(98) 111669149736(81) 94489280687(110) 111669149768(103) 103079215175(91) 111669149921(101) 111669149698(112) 85899345983(98) 94489280683(84) 103079215113(96) 94489280765(102) 103079215338(101) 103079215121(98) 111669149799(88) 103079215257(93) 85899346153(118) 94489280629(106) 103079215142(95) 103079215229(94) 103079215135(118) 94489280761(91) 111669149927(105) 120259084414(103) 111669149934(80) 94489280524(91) 103079215302(107) 103079215139(82) 111669149931(89) 103079215336(80) 94489280544(109) 120259084370(94) 94489280625(112) 94489280649(82) 103079215206(101) 94489280612(101) 94489280645(97) 94489280607(84) 111669149946(81) 85899346011(91) 111669149885(113) 94489280599(113) 111669149881(114) 103079215262(107) 111669149897(103) 94489280568(98) 103079215110(108) 94489280706(119) 94489280709(500) 120259084443(116) 103079215149(86) 111669149870(110) 94489280748(113) 111669149920(86) 94489280513(96) 103079215228(90) 94489280708(95) 111669149819(112) 103079215222(84) 120259084470(95) 120259084352(85) 94489280716(88) 94489280591(84) 85899346058(94) 103079215213(97) 103079215157(114) 103079215246(107) 120259084389(111) 120259084528(99) 103079215264(87) 120259084342(112) 111669149864(119) 111669149790(115) 94489280661(95) 103079215276(115) 103079215321(104) 103079215234(83) 94489280756(101) 111669149743(105) 94489280562(109) 103079215236(95) 94489280560(88) 103079215296(82) 85899346056(103) 111669149707(89) 103079215294(107) 111669149869(117) 103079215112(104) 94489280546(114) 103079215127(81) 103079215317(86) 111669149865(93) 111669149811(92) 103079215331(81) 94489280572(90) 103079215254(118) 103079215349(114) 111669149710(102) 85899346132(610) 103079215309(96) 94489280588(88) 111669149802(108) 103079215182(99) 103079215178(102)}\r\n0=23018 1=24517 2=29769 3=20012 4=25014 5=20516 6=23265 7=24765 8=29270 9=20010 10=25767 11=22766 12=29518 13=20260 14=27769 15=29521 16=28018 17=25266 18=24012 19=28519 20=29519 21=25264 22=21509 23=27266 24=20266 25=26267 26=22264 27=21010 28=24015 29=25517 30=27765 31=24265 32=20758 33=29519 34=29518 35=26265 36=24261 37=26513 38=21265 39=22515 40=24762 41=29516 42=20006 43=21765 44=22760 45=25014 46=21264 47=26765 48=26515 49=28764 50=53031 51=25265 52=28764 53=20516 54=29015 55=27265 56=28015 57=29264 58=22016 59=21509 60=29269 61=29018 62=28514 63=28763 64=25268 65=24265 66=28516 67=23264 68=29268 69=27266 70=24767 71=28265 72=24764 73=25515 74=24763 75=23012 76=23515 77=26015 78=20008 79=20266 80=26765 81=28764 82=24516 83=24765 84=28265 85=29515 86=24517 87=25765 88=24513 89=27518 90=28521 91=22760 92=21514 93=20515 94=29768 95=21513 96=21014 97=28767 98=22518 99=22513 100=71044 101=25016 102=20260 103=26268 104=23518 105=22763 106=26517 107=21761 108=24017 109=23017 110=23762 111=24764 112=22266 113=22267 114=29769 115=27766 116=23518 117=29017 118=28265 119=24769 120=23013 121=25266 122=29770 123=22259 124=28520 125=25012 126=29520 127=21262 128=27765 129=23766 130=24015 131=23262 132=21513 133=20515 134=21509 135=21515 136=27516 137=20011 138=22514 139=26266 140=29766 141=24766 142=22517 143=22012 144=24011 145=22516 146=29016 147=20264 148=26014 149=29770 150=104311 151=29768 152=23513 153=24513 154=20265 155=27517 156=25767 157=22764 158=25265 159=28019 160=24514 161=21015 162=24016 163=25516 164=25265 165=24514 166=22016 167=23267 168=29517 169=26520 170=23768 171=23514 172=29524 173=22762 174=26269 175=25769 176=20017 177=22764 178=26769 179=20515 180=22267 181=20011 182=27269 183=23519 184=28018 185=20517 186=25267 187=25268 188=24266 189=21018 190=20261 191=22768 192=28268 193=28270 194=28520 195=26769 196=25768 197=24518 198=27020 199=29770 200=125092 201=29020 202=21515 203=27519 204=28272 205=21512 206=24019 207=22518 208=23763 209=28021 210=21014 211=23768 212=21265 213=22014 214=21019 215=23513 216=24268 217=28519 218=26769 219=27771 220=24766 221=21768 222=28018 223=29772 224=28771 225=23765 226=28770 227=26017 228=20767 229=25269 230=26269 231=27267 232=23765 233=22011 234=20518 235=25767 236=22262 237=26768 238=29269 239=26017 240=28521 241=20262 242=21518 243=23264 244=23015 245=20265 246=22512 247=29522 248=28521 249=25515 250=152604 251=24017 252=22013 253=27018 254=24765 255=25518\r\n: scaling average=250.159 scaling deviation=0.0252187\r\nPROFILE: interrupts/evictions/bytes = 82/27/2216\r\nConsistentHashingLoadBalancer:\r\n0=32632 1=31725 2=32289 3=31629 4=33284 5=33198 6=31865 7=29023 8=28371 9=29924 10=27943 11=31711 12=35707 13=26774 14=32978 15=32007 16=31519 17=38168 18=35695 19=30289 20=27531 21=34689 22=37190 23=32374 24=25853 25=33681 26=37414 27=33347 28=31394 29=36364 30=34109 31=33249 32=33519 33=32160 34=32191 35=29636 36=30541 37=38362 38=29404 39=32240 40=30999 41=29894 42=38207 43=31939 44=30758 45=38657 46=25029 47=38474 48=31275 49=34718 50=31572 51=34400 52=30017 53=30092 54=33700 55=32480 56=29719 57=33541 58=35001 59=30965 60=31917 61=30249 62=34887 63=38124 64=35781 65=31265 66=30489 67=30522 68=33952 69=32610 70=31185 71=32579 72=29195 73=27271 74=34655 75=35165 76=30253 77=30319 78=33738 79=25485 80=33204 81=32076 82=28402 83=32602 84=26731 85=34515 86=35282 87=30503 88=37194 89=32614 90=30404 91=37099 92=32261 93=35177 94=31131 95=30882 96=31156 97=31146 98=33681 99=26673 100=31261 101=38518 102=34906 103=35115 104=31854 105=29266 106=30196 107=35199 108=27689 109=39136 110=27265 111=33185 112=30317 113=33971 114=30502 115=28415 116=31810 117=34290 118=35661 119=34098 120=33103 121=28857 122=42701 123=39025 124=30323 125=39135 126=28430 127=34826 128=33987 129=35710 130=35354 131=31766 132=29655 133=39232 134=33694 135=26579 136=31794 137=32173 138=27852 139=29742 140=33778 141=42386 142=27344 143=33579 144=31235 145=35931 146=33190 147=34943 148=31520 149=30114 150=31761 151=34484 152=25062 153=37062 154=37546 155=32039 156=29533 157=30461 158=28049 159=32778 160=31608 161=31482 162=37090 163=37750 164=36180 165=29109 166=30020 167=35171 168=30655 169=32733 170=33654 171=35231 172=33098 173=33616 174=31045 175=25500 176=32885 177=30246 178=30573 179=34755 180=29726 181=38331 182=37238 183=30847 184=26061 185=30966 186=29887 187=33806 188=28636 189=30223 190=31475 191=29612 192=30723 193=28527 194=29042 195=33560 196=29417 197=31925 198=38101 199=31811 200=32015 201=28271 202=30448 203=31429 204=29900 205=33412 206=31265 207=27662 208=34466 209=27750 210=32486 211=27496 212=37199 213=37300 214=31681 215=34709 216=35155 217=38298 218=28705 219=37053 220=30683 221=34681 222=34025 223=32154 224=22761 225=31189 226=34704 227=28272 228=30272 229=31929 230=28219 231=29822 232=35100 233=27942 234=37235 235=31992 236=29392 237=32980 238=30419 239=36890 240=35689 241=34367 242=30153 243=34288 244=28281 245=33972 246=40364 247=31147 248=31146 249=35839 250=36104 251=34445 252=33608 253=31143 254=31638 255=26257\r\n: average=32356 deviation=3323.58\r\n[       OK ] LoadBalancerTest.fairness (1927 ms)\r\n[ RUN      ] LoadBalancerTest.consistent_hashing\r\nc_hashc_hashc_hashc_hashc_hashc_hash0=0.99559 1=0.999543 2=1.00111 3=1.00359 4=0.999912 5=0.99559 6=0.999543 7=1.00111 8=1.00359 9=0.999912 10=0.99559 11=0.999543 12=1.00111 13=1.00359 14=0.999912 15=0.99559 16=0.999543 17=1.00111 18=1.00359 19=0.999912 20=0.99559 21=0.999543 22=1.00111 23=1.00359 24=0.999912\r\naverage_normalized_load=0.999948 deviation=0.00259867\r\nc_hashc_hashc_hashc_hashc_hashc_hash0=0.997295 1=0.999644 2=1.00317 3=0.999015 4=1.00116 5=0.997295 6=0.999644 7=1.00317 8=0.999015 9=1.00116 10=0.997295 11=0.999644 12=1.00317 13=0.999015 14=1.00116 15=0.997295 16=0.999644 17=1.00317 18=0.999015 19=1.00116 20=0.997295 21=0.999644 22=1.00317 23=0.999015 24=1.00116\r\naverage_normalized_load=1.00006 deviation=0.00198839\r\nc_hashc_hashc_hashc_hashc_hashc_hash0=0.998484 1=0.998301 2=1.00238 3=0.999324 4=1.00144 5=0.998484 6=0.998301 7=1.00238 8=0.999324 9=1.00144 10=0.998484 11=0.998301 12=1.00238 13=0.999324 14=1.00144 15=0.998484 16=0.998301 17=1.00238 18=0.999324 19=1.00144 20=0.998484 21=0.998301 22=1.00238 23=0.999324 24=1.00144\r\naverage_normalized_load=0.999986 deviation=0.00163631\r\n[       OK ] LoadBalancerTest.consistent_hashing (573 ms)\r\n[ RUN      ] LoadBalancerTest.weighted_round_robin\r\nE20220203 17:19:44.549572  3408 weighted_round_robin_load_balancer.cpp:91] Invalid weight is set: 1ab\r\nE20220203 17:19:44.549615  3408 weighted_round_robin_load_balancer.cpp:91] Invalid weight is set: -1\r\nE20220203 17:19:44.549633  3408 weighted_round_robin_load_balancer.cpp:91] Invalid weight is set: 0\r\n1=10.36.150.32:8833, 1=10.92.115.19:8831, 1=10.36.150.32:8833, 1=10.92.115.19:8831, 1=10.36.150.32:8833, 1=10.36.150.32:8833, 1=10.42.108.25:8832, 1=10.36.150.32:8833, 1=10.92.115.19:8831, 1=10.36.150.32:8833, 1=10.36.150.32:8833, 1=10.42.108.25:8832,\r\n10.92.115.19:8831 result=3 configured=3\r\n10.42.108.25:8832 result=2 configured=2\r\n10.36.150.32:8833 result=7 configured=7\r\n[       OK ] LoadBalancerTest.weighted_round_robin (0 ms)\r\n[ RUN      ] LoadBalancerTest.weighted_round_robin_no_valid_server\r\n[       OK ] LoadBalancerTest.weighted_round_robin_no_valid_server (0 ms)\r\n[ RUN      ] LoadBalancerTest.weighted_randomized\r\nE20220203 17:19:44.549763  3408 weighted_randomized_load_balancer.cpp:49] Invalid weight is set: 1ab\r\nE20220203 17:19:44.549775  3408 weighted_randomized_load_balancer.cpp:49] Invalid weight is set: -1\r\nE20220203 17:19:44.549783  3408 weighted_randomized_load_balancer.cpp:49] Invalid weight is set: 0\r\nweight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.42.108.25:8832, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.42.108.25:8832, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.31:8833, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.31:8833, weight randomized=10.92.115.19:8831, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.32:8899, weight randomized=10.36.150.31:8833, weight randomized=10.36.150.32:8899, weight randomized=10.42.108.25:8832, weight randomized=10.92.115.19:8831,\r\nconfiged_weight_sum=20 run_times=200\r\n10.92.115.19:8831 weight=3 select_times=40 actual_rate=0.2 expect_rate=0.15 expect_rate/2=0.075 expect_rate*2=0.3\r\n10.42.108.25:8832 weight=2 select_times=15 actual_rate=0.075 expect_rate=0.1 expect_rate/2=0.05 expect_rate*2=0.2\r\n10.36.150.31:8833 weight=5 select_times=48 actual_rate=0.24 expect_rate=0.25 expect_rate/2=0.125 expect_rate*2=0.5\r\n10.36.150.32:8899 weight=10 select_times=97 actual_rate=0.485 expect_rate=0.5 expect_rate/2=0.25 expect_rate*2=1\r\n[       OK ] LoadBalancerTest.weighted_randomized (0 ms)\r\n[ RUN      ] LoadBalancerTest.health_check_no_valid_server\r\n[       OK ] LoadBalancerTest.health_check_no_valid_server (1 ms)\r\n[ RUN      ] LoadBalancerTest.revived_from_all_failed_sanity\r\nI20220203 17:19:44.550058  3408 socket.cpp:765] Revived Socket{id=154618822721 addr=10.92.115.19:8832} (0x2d82200) (Connectable)\r\n[       OK ] LoadBalancerTest.revived_from_all_failed_sanity (2020 ms)\r\n[ RUN      ] LoadBalancerTest.invalid_lb_params\r\nE20220203 17:19:46.571709  3408 uri.cpp:285] Invalid space in url=`list://127.0.0.1:7777 50, 127.0.0.1:7778 50'\r\nE20220203 17:19:46.571765  3408 cluster_recover_policy.cpp:134] Failed to set this unknown parameters hold_secon=2\r\nF20220203 17:19:46.571786  3408 load_balancer.cpp:81] Fail to new LoadBalancer\r\n*** Check failure stack trace: ***\r\nAborted\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1029219897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1031174223","html_url":"https://github.com/apache/brpc/issues/1642#issuecomment-1031174223","issue_url":"https://api.github.com/repos/apache/brpc/issues/1642","id":1031174223,"node_id":"IC_kwDOBhmkcs49dnhP","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-07T08:03:26Z","updated_at":"2022-02-07T08:03:26Z","author_association":"CONTRIBUTOR","body":"Maybe it is because you built it with glog so that fatal log causes abort.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1031174223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1031194960","html_url":"https://github.com/apache/brpc/pull/1690#issuecomment-1031194960","issue_url":"https://api.github.com/repos/apache/brpc/issues/1690","id":1031194960,"node_id":"IC_kwDOBhmkcs49dslQ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-07T08:27:30Z","updated_at":"2022-02-07T08:27:30Z","author_association":"CONTRIBUTOR","body":"@hiberabyss Thanks for your contribution! Can you add some unit test for this feature?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1031194960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1031550719","html_url":"https://github.com/apache/brpc/pull/1690#issuecomment-1031550719","issue_url":"https://api.github.com/repos/apache/brpc/issues/1690","id":1031550719,"node_id":"IC_kwDOBhmkcs49fDb_","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-07T14:51:08Z","updated_at":"2022-02-07T14:51:08Z","author_association":"CONTRIBUTOR","body":"> @hiberabyss Thanks for your contribution! Can you add some unit test for this feature?\r\n\r\nIt's a little complicated to run test on M1 macOS, could this MR be merged first? Have tested this with my own service.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1031550719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1032470211","html_url":"https://github.com/apache/brpc/pull/1690#issuecomment-1032470211","issue_url":"https://api.github.com/repos/apache/brpc/issues/1690","id":1032470211,"node_id":"IC_kwDOBhmkcs49ij7D","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-08T10:48:50Z","updated_at":"2022-02-08T10:48:50Z","author_association":"CONTRIBUTOR","body":"> It's a little complicated to run test on M1 macOS\r\n\r\nbrpc has not support M1 macOS yet, you can test it on a linux device. You can follow the compiling and testing guide here: https://github.com/apache/incubator-brpc/blob/master/docs/cn/getting_started.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1032470211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1033289632","html_url":"https://github.com/apache/brpc/issues/699#issuecomment-1033289632","issue_url":"https://api.github.com/repos/apache/brpc/issues/699","id":1033289632,"node_id":"IC_kwDOBhmkcs49lr-g","user":{"login":"kwins","id":20967436,"node_id":"MDQ6VXNlcjIwOTY3NDM2","avatar_url":"https://avatars.githubusercontent.com/u/20967436?v=4","gravatar_id":"","url":"https://api.github.com/users/kwins","html_url":"https://github.com/kwins","followers_url":"https://api.github.com/users/kwins/followers","following_url":"https://api.github.com/users/kwins/following{/other_user}","gists_url":"https://api.github.com/users/kwins/gists{/gist_id}","starred_url":"https://api.github.com/users/kwins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kwins/subscriptions","organizations_url":"https://api.github.com/users/kwins/orgs","repos_url":"https://api.github.com/users/kwins/repos","events_url":"https://api.github.com/users/kwins/events{/privacy}","received_events_url":"https://api.github.com/users/kwins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-09T02:51:03Z","updated_at":"2022-02-09T02:51:22Z","author_association":"NONE","body":"0.9.6 版本 ，我也遇到了，当下掉一个节点后，只剩下一个节点，会出现","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1033289632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1036327069","html_url":"https://github.com/apache/brpc/pull/1692#issuecomment-1036327069","issue_url":"https://api.github.com/repos/apache/brpc/issues/1692","id":1036327069,"node_id":"IC_kwDOBhmkcs49xRid","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-11T15:22:39Z","updated_at":"2022-02-11T15:22:39Z","author_association":"MEMBER","body":"@zyearn 看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1036327069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1039970203","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-1039970203","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":1039970203,"node_id":"IC_kwDOBhmkcs49_K-b","user":{"login":"yukixLLL","id":37356868,"node_id":"MDQ6VXNlcjM3MzU2ODY4","avatar_url":"https://avatars.githubusercontent.com/u/37356868?v=4","gravatar_id":"","url":"https://api.github.com/users/yukixLLL","html_url":"https://github.com/yukixLLL","followers_url":"https://api.github.com/users/yukixLLL/followers","following_url":"https://api.github.com/users/yukixLLL/following{/other_user}","gists_url":"https://api.github.com/users/yukixLLL/gists{/gist_id}","starred_url":"https://api.github.com/users/yukixLLL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yukixLLL/subscriptions","organizations_url":"https://api.github.com/users/yukixLLL/orgs","repos_url":"https://api.github.com/users/yukixLLL/repos","events_url":"https://api.github.com/users/yukixLLL/events{/privacy}","received_events_url":"https://api.github.com/users/yukixLLL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T07:59:40Z","updated_at":"2022-02-15T07:59:40Z","author_association":"NONE","body":"同样的问题！！这个问题要怎么解决有结果了吗？？？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1039970203/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1040001492","html_url":"https://github.com/apache/brpc/issues/1693#issuecomment-1040001492","issue_url":"https://api.github.com/repos/apache/brpc/issues/1693","id":1040001492,"node_id":"IC_kwDOBhmkcs49_SnU","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T08:38:04Z","updated_at":"2022-02-15T08:38:04Z","author_association":"CONTRIBUTOR","body":"谢谢反馈，该问题是因为在编译时指定了选项 -D__const__= 导致的，brpc在编译时需要添加这个宏来避免gcc对errno宏做优化从而[导致未定义行为](https://github.com/apache/incubator-brpc/blob/master/docs/cn/thread_local.md#gcc4%E4%B8%8B%E7%9A%84errno%E9%97%AE%E9%A2%98)\r\n\r\n你的系统文件（/usr/include/x86_64-linux-gnu/sys/cdefs.h） 在 #if 中测试了 `__glibc_has_attribute (__const__)`，这个宏展开之后是` __has_attribute (__const__)`,  由于brpc在编译时将 __const__ 定义成了空，所以报错了。比较快的解决方案是直接删掉后边的 `__glibc_has_attribute (__const__)`  \r\n\r\nps：提issue的时候可以预览一下，编译错误里的`__const__`变成了加粗的 __const__ 了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1040001492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1040044934","html_url":"https://github.com/apache/brpc/issues/1693#issuecomment-1040044934","issue_url":"https://api.github.com/repos/apache/brpc/issues/1693","id":1040044934,"node_id":"IC_kwDOBhmkcs49_dOG","user":{"login":"hthao","id":15084958,"node_id":"MDQ6VXNlcjE1MDg0OTU4","avatar_url":"https://avatars.githubusercontent.com/u/15084958?v=4","gravatar_id":"","url":"https://api.github.com/users/hthao","html_url":"https://github.com/hthao","followers_url":"https://api.github.com/users/hthao/followers","following_url":"https://api.github.com/users/hthao/following{/other_user}","gists_url":"https://api.github.com/users/hthao/gists{/gist_id}","starred_url":"https://api.github.com/users/hthao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hthao/subscriptions","organizations_url":"https://api.github.com/users/hthao/orgs","repos_url":"https://api.github.com/users/hthao/repos","events_url":"https://api.github.com/users/hthao/events{/privacy}","received_events_url":"https://api.github.com/users/hthao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T09:26:00Z","updated_at":"2022-02-15T09:37:25Z","author_association":"NONE","body":"> 谢谢反馈，该问题是因为在编译时指定了选项 -D__const__= 导致的，brpc在编译时需要添加这个宏来避免gcc对errno宏做优化从而[导致未定义行为](https://github.com/apache/incubator-brpc/blob/master/docs/cn/thread_local.md#gcc4%E4%B8%8B%E7%9A%84errno%E9%97%AE%E9%A2%98)\r\n> \r\n> 你的系统文件（/usr/include/x86_64-linux-gnu/sys/cdefs.h） 在 #if 中测试了 `__glibc_has_attribute (__const__)`，这个宏展开之后是` __has_attribute (__const__)`, 由于brpc在编译时将 **const** 定义成了空，所以报错了。比较快的解决方案是直接删掉后边的 `__glibc_has_attribute (__const__)`\r\n> \r\n> ps：提issue的时候可以预览一下，编译错误里的`__const__`变成了加粗的 **const** 了\r\n\r\n谢谢快速反馈，issue格式已修正。\r\n修改系统文件貌似不现实，可能还需要再研究一下解决方案，多谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1040044934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1040049563","html_url":"https://github.com/apache/brpc/pull/1690#issuecomment-1040049563","issue_url":"https://api.github.com/repos/apache/brpc/issues/1690","id":1040049563,"node_id":"IC_kwDOBhmkcs49_eWb","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T09:30:44Z","updated_at":"2022-02-15T09:30:44Z","author_association":"CONTRIBUTOR","body":"> @hiberabyss Thanks for your contribution! Can you add some unit test for this feature?\r\n\r\nFYI, add some ut for proto-text.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1040049563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1041304369","html_url":"https://github.com/apache/brpc/pull/1694#issuecomment-1041304369","issue_url":"https://api.github.com/repos/apache/brpc/issues/1694","id":1041304369,"node_id":"IC_kwDOBhmkcs4-EQsx","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T09:48:55Z","updated_at":"2022-02-16T09:48:55Z","author_association":"CONTRIBUTOR","body":"thanks，可以调整下commit message吗，注明下修改的内容，比如 docs:  fix typo","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1041304369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1041443563","html_url":"https://github.com/apache/brpc/pull/1694#issuecomment-1041443563","issue_url":"https://api.github.com/repos/apache/brpc/issues/1694","id":1041443563,"node_id":"IC_kwDOBhmkcs4-Eyrr","user":{"login":"lovepika","id":17944369,"node_id":"MDQ6VXNlcjE3OTQ0MzY5","avatar_url":"https://avatars.githubusercontent.com/u/17944369?v=4","gravatar_id":"","url":"https://api.github.com/users/lovepika","html_url":"https://github.com/lovepika","followers_url":"https://api.github.com/users/lovepika/followers","following_url":"https://api.github.com/users/lovepika/following{/other_user}","gists_url":"https://api.github.com/users/lovepika/gists{/gist_id}","starred_url":"https://api.github.com/users/lovepika/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lovepika/subscriptions","organizations_url":"https://api.github.com/users/lovepika/orgs","repos_url":"https://api.github.com/users/lovepika/repos","events_url":"https://api.github.com/users/lovepika/events{/privacy}","received_events_url":"https://api.github.com/users/lovepika/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T12:29:41Z","updated_at":"2022-02-16T12:29:41Z","author_association":"CONTRIBUTOR","body":"您好，已经提交新commit message的pr，这个可以关闭了。 \r\nthanks.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1041443563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1042526809","html_url":"https://github.com/apache/brpc/pull/1560#issuecomment-1042526809","issue_url":"https://api.github.com/repos/apache/brpc/issues/1560","id":1042526809,"node_id":"IC_kwDOBhmkcs4-I7JZ","user":{"login":"knightast","id":938693,"node_id":"MDQ6VXNlcjkzODY5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/938693?v=4","gravatar_id":"","url":"https://api.github.com/users/knightast","html_url":"https://github.com/knightast","followers_url":"https://api.github.com/users/knightast/followers","following_url":"https://api.github.com/users/knightast/following{/other_user}","gists_url":"https://api.github.com/users/knightast/gists{/gist_id}","starred_url":"https://api.github.com/users/knightast/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knightast/subscriptions","organizations_url":"https://api.github.com/users/knightast/orgs","repos_url":"https://api.github.com/users/knightast/repos","events_url":"https://api.github.com/users/knightast/events{/privacy}","received_events_url":"https://api.github.com/users/knightast/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T03:12:56Z","updated_at":"2022-02-17T03:12:56Z","author_association":"NONE","body":"这个ipv6的pr为啥一直没合","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1042526809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1043763443","html_url":"https://github.com/apache/brpc/pull/1690#issuecomment-1043763443","issue_url":"https://api.github.com/repos/apache/brpc/issues/1690","id":1043763443,"node_id":"IC_kwDOBhmkcs4-NpDz","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-18T02:36:21Z","updated_at":"2022-02-18T02:36:21Z","author_association":"CONTRIBUTOR","body":"@wwbmmm Could you have a look of this?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1043763443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1044306654","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-1044306654","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":1044306654,"node_id":"IC_kwDOBhmkcs4-Ptre","user":{"login":"jiang4357291","id":38097280,"node_id":"MDQ6VXNlcjM4MDk3Mjgw","avatar_url":"https://avatars.githubusercontent.com/u/38097280?v=4","gravatar_id":"","url":"https://api.github.com/users/jiang4357291","html_url":"https://github.com/jiang4357291","followers_url":"https://api.github.com/users/jiang4357291/followers","following_url":"https://api.github.com/users/jiang4357291/following{/other_user}","gists_url":"https://api.github.com/users/jiang4357291/gists{/gist_id}","starred_url":"https://api.github.com/users/jiang4357291/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiang4357291/subscriptions","organizations_url":"https://api.github.com/users/jiang4357291/orgs","repos_url":"https://api.github.com/users/jiang4357291/repos","events_url":"https://api.github.com/users/jiang4357291/events{/privacy}","received_events_url":"https://api.github.com/users/jiang4357291/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-18T10:38:49Z","updated_at":"2022-02-18T10:38:49Z","author_association":"NONE","body":"> 这个是因为已经链接了glibc里面的pthread_mutex_lock实现，导致brpc里面的hook没有生效\r\n\r\n请教下brpc为什么要hook glibc的实现？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1044306654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1045856706","html_url":"https://github.com/apache/brpc/issues/1698#issuecomment-1045856706","issue_url":"https://api.github.com/repos/apache/brpc/issues/1698","id":1045856706,"node_id":"IC_kwDOBhmkcs4-VoHC","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-19T06:11:26Z","updated_at":"2022-02-19T06:11:26Z","author_association":"MEMBER","body":"我有一个PR #1503","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1045856706/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1047438738","html_url":"https://github.com/apache/brpc/issues/1699#issuecomment-1047438738","issue_url":"https://api.github.com/repos/apache/brpc/issues/1699","id":1047438738,"node_id":"IC_kwDOBhmkcs4-bqWS","user":{"login":"zhangzhiming865","id":5706505,"node_id":"MDQ6VXNlcjU3MDY1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/5706505?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangzhiming865","html_url":"https://github.com/zhangzhiming865","followers_url":"https://api.github.com/users/zhangzhiming865/followers","following_url":"https://api.github.com/users/zhangzhiming865/following{/other_user}","gists_url":"https://api.github.com/users/zhangzhiming865/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangzhiming865/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangzhiming865/subscriptions","organizations_url":"https://api.github.com/users/zhangzhiming865/orgs","repos_url":"https://api.github.com/users/zhangzhiming865/repos","events_url":"https://api.github.com/users/zhangzhiming865/events{/privacy}","received_events_url":"https://api.github.com/users/zhangzhiming865/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-22T05:27:37Z","updated_at":"2022-02-22T05:27:37Z","author_association":"NONE","body":"rdma_memory_pool_tls_cache_num 设置成0也会触发内存泄漏。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1047438738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1047548629","html_url":"https://github.com/apache/brpc/pull/1560#issuecomment-1047548629","issue_url":"https://api.github.com/repos/apache/brpc/issues/1560","id":1047548629,"node_id":"IC_kwDOBhmkcs4-cFLV","user":{"login":"linsibolinhong","id":16970424,"node_id":"MDQ6VXNlcjE2OTcwNDI0","avatar_url":"https://avatars.githubusercontent.com/u/16970424?v=4","gravatar_id":"","url":"https://api.github.com/users/linsibolinhong","html_url":"https://github.com/linsibolinhong","followers_url":"https://api.github.com/users/linsibolinhong/followers","following_url":"https://api.github.com/users/linsibolinhong/following{/other_user}","gists_url":"https://api.github.com/users/linsibolinhong/gists{/gist_id}","starred_url":"https://api.github.com/users/linsibolinhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linsibolinhong/subscriptions","organizations_url":"https://api.github.com/users/linsibolinhong/orgs","repos_url":"https://api.github.com/users/linsibolinhong/repos","events_url":"https://api.github.com/users/linsibolinhong/events{/privacy}","received_events_url":"https://api.github.com/users/linsibolinhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-22T08:37:37Z","updated_at":"2022-02-22T08:37:37Z","author_association":"NONE","body":"大佬，快合了他吧，急用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1047548629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1047685802","html_url":"https://github.com/apache/brpc/issues/611#issuecomment-1047685802","issue_url":"https://api.github.com/repos/apache/brpc/issues/611","id":1047685802,"node_id":"IC_kwDOBhmkcs4-cmqq","user":{"login":"Lowpower","id":3133734,"node_id":"MDQ6VXNlcjMxMzM3MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/3133734?v=4","gravatar_id":"","url":"https://api.github.com/users/Lowpower","html_url":"https://github.com/Lowpower","followers_url":"https://api.github.com/users/Lowpower/followers","following_url":"https://api.github.com/users/Lowpower/following{/other_user}","gists_url":"https://api.github.com/users/Lowpower/gists{/gist_id}","starred_url":"https://api.github.com/users/Lowpower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lowpower/subscriptions","organizations_url":"https://api.github.com/users/Lowpower/orgs","repos_url":"https://api.github.com/users/Lowpower/repos","events_url":"https://api.github.com/users/Lowpower/events{/privacy}","received_events_url":"https://api.github.com/users/Lowpower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-22T11:10:55Z","updated_at":"2022-02-22T11:10:55Z","author_association":"NONE","body":"我这样试了一下貌似不行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1047685802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048541014","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-1048541014","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":1048541014,"node_id":"IC_kwDOBhmkcs4-f3dW","user":{"login":"Sigma711","id":45967756,"node_id":"MDQ6VXNlcjQ1OTY3NzU2","avatar_url":"https://avatars.githubusercontent.com/u/45967756?v=4","gravatar_id":"","url":"https://api.github.com/users/Sigma711","html_url":"https://github.com/Sigma711","followers_url":"https://api.github.com/users/Sigma711/followers","following_url":"https://api.github.com/users/Sigma711/following{/other_user}","gists_url":"https://api.github.com/users/Sigma711/gists{/gist_id}","starred_url":"https://api.github.com/users/Sigma711/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sigma711/subscriptions","organizations_url":"https://api.github.com/users/Sigma711/orgs","repos_url":"https://api.github.com/users/Sigma711/repos","events_url":"https://api.github.com/users/Sigma711/events{/privacy}","received_events_url":"https://api.github.com/users/Sigma711/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-23T08:23:15Z","updated_at":"2022-02-23T22:43:31Z","author_association":"NONE","body":"@VZIKL 现在有说法了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048541014/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":3,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048611433","html_url":"https://github.com/apache/brpc/issues/1541#issuecomment-1048611433","issue_url":"https://api.github.com/repos/apache/brpc/issues/1541","id":1048611433,"node_id":"IC_kwDOBhmkcs4-gIpp","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-23T09:55:12Z","updated_at":"2022-02-23T09:55:12Z","author_association":"CONTRIBUTOR","body":"Have been supported via PR https://github.com/apache/incubator-brpc/pull/1690","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048611433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048629264","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1048629264","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1048629264,"node_id":"IC_kwDOBhmkcs4-gNAQ","user":{"login":"lday0321","id":3905322,"node_id":"MDQ6VXNlcjM5MDUzMjI=","avatar_url":"https://avatars.githubusercontent.com/u/3905322?v=4","gravatar_id":"","url":"https://api.github.com/users/lday0321","html_url":"https://github.com/lday0321","followers_url":"https://api.github.com/users/lday0321/followers","following_url":"https://api.github.com/users/lday0321/following{/other_user}","gists_url":"https://api.github.com/users/lday0321/gists{/gist_id}","starred_url":"https://api.github.com/users/lday0321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lday0321/subscriptions","organizations_url":"https://api.github.com/users/lday0321/orgs","repos_url":"https://api.github.com/users/lday0321/repos","events_url":"https://api.github.com/users/lday0321/events{/privacy}","received_events_url":"https://api.github.com/users/lday0321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-23T10:16:20Z","updated_at":"2022-02-23T10:16:20Z","author_association":"NONE","body":"@wwbmmm 绕开brpc TSAN warning的时候， 把mutex.cpp的pthread_mutex_lock/pthread_mutex_unlock移除是不是还不够？ 我移掉之后，跑简单UT TSAN check（简单的braft case)，报很多mutex相关的错误：\r\nMutex M93303508761559560 is already destroyed.\r\nMutex M92177797832769712 is already destroyed.\r\n\r\n```\r\nWARNING: ThreadSanitizer: data race (pid=17071)\r\n  Read of size 8 at 0x7b080006f080 by thread T69 (mutexes: write M93303508761559560):\r\n    #0 memcmp <null> (braft_tsan_test+0x23169f)\r\n    #1 std::char_traits<char>::compare(char const*, char const*, unsigned long) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/char_traits.h:325:9 (braft_tsan_test+0x4cdb2e)\r\n    #2 std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::compare(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:2859 (braft_tsan_test+0x4cdb2e)\r\n    #3 bool std::operator<<char, std::char_traits<char>, std::allocator<char> >(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:6229 (braft_tsan_test+0x4cdb2e)\r\n    #4 std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >::operator()(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_function.h:386 (braft_tsan_test+0x4cdb2e)\r\n    #5 std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > > >::_M_lower_bound(std::_Rb_tree_node<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > > const*, std::_Rb_tree_node_base const*, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:1945 (braft_tsan_test+0x4cdb2e)\r\n    #6 std::_Rb_tree<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> >, std::_Select1st<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > > >::find(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:2570 (braft_tsan_test+0x4cdb2e)\r\n    #7 void std::__invoke_impl<void, my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>(std::__invoke_other, my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0&&, braft::Node*&&, braft::NodeOptions*&&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/invoke.h:60:14 (braft_tsan_test+0x27be5d)\r\n    #8 std::__invoke_result<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>::type std::__invoke<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>(my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0&&, braft::Node*&&, braft::NodeOptions*&&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/invoke.h:95:14 (braft_tsan_test+0x27bc6a)\r\n    #9 void std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> >::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:244:13 (braft_tsan_test+0x27bbce)\r\n    #10 std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> >::operator()() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:251:11 (braft_tsan_test+0x27bb38)\r\n    #11 std::thread::_State_impl<std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> > >::_M_run() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:195:13 (braft_tsan_test+0x27b8ac)\r\n    #12 <null> <null> (libstdc++.so.6+0xd2bd3)\r\n\r\n  Previous write of size 8 at 0x7b080006f080 by thread T68 (mutexes: write M92177797832769712):\r\n    #0 operator new(unsigned long) <null> (braft_tsan_test+0x2777e7)\r\n    #1 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.tcc:219:14 (braft_tsan_test+0x4cd74f)\r\n    #2 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct_aux<char*>(char*, char*, std::__false_type) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:247 (braft_tsan_test+0x4cd74f)\r\n    #3 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:266 (braft_tsan_test+0x4cd74f)\r\n    #4 std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:451 (braft_tsan_test+0x4cd74f)\r\n    #5 std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> >::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, scoped_refptr<braft::KVBasedMergedMetaStorageImpl>, true>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_pair.h:261 (braft_tsan_test+0x4cd74f)\r\n    #6 std::pair<std::__decay_and_strip<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>::__type, std::__decay_and_strip<scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&>::__type> std::make_pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_pair.h:529 (braft_tsan_test+0x4cd74f)\r\n    #7 braft::MetaStorageManager::_add(std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, scoped_refptr<braft::KVBasedMergedMetaStorageImpl>, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > > >&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&) /v/braft/braft/src/braft/raft_meta.cpp:111 (braft_tsan_test+0x4cd74f)\r\n    #8 void std::__invoke_impl<void, my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>(std::__invoke_other, my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0&&, braft::Node*&&, braft::NodeOptions*&&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/invoke.h:60:14 (braft_tsan_test+0x27be5d)\r\n    #9 std::__invoke_result<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>::type std::__invoke<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>(my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0&&, braft::Node*&&, braft::NodeOptions*&&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/invoke.h:95:14 (braft_tsan_test+0x27bc6a)\r\n    #10 void std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> >::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:244:13 (braft_tsan_test+0x27bbce)\r\n    #11 std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> >::operator()() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:251:11 (braft_tsan_test+0x27bb38)\r\n    #12 std::thread::_State_impl<std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> > >::_M_run() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:195:13 (braft_tsan_test+0x27b8ac)\r\n    #13 <null> <null> (libstdc++.so.6+0xd2bd3)\r\n\r\n  Location is heap block of size 29 at 0x7b080006f080 allocated by thread T68:\r\n    #0 operator new(unsigned long) <null> (braft_tsan_test+0x2777e7)\r\n    #1 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.tcc:219:14 (braft_tsan_test+0x4cd74f)\r\n    #2 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct_aux<char*>(char*, char*, std::__false_type) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:247 (braft_tsan_test+0x4cd74f)\r\n    #3 void std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_construct<char*>(char*, char*) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:266 (braft_tsan_test+0x4cd74f)\r\n    #4 std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/basic_string.h:451 (braft_tsan_test+0x4cd74f)\r\n    #5 std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> >::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, scoped_refptr<braft::KVBasedMergedMetaStorageImpl>, true>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_pair.h:261 (braft_tsan_test+0x4cd74f)\r\n    #6 std::pair<std::__decay_and_strip<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>::__type, std::__decay_and_strip<scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&>::__type> std::make_pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&>(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_pair.h:529 (braft_tsan_test+0x4cd74f)\r\n    #7 braft::MetaStorageManager::_add(std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, scoped_refptr<braft::KVBasedMergedMetaStorageImpl>, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> > > >&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, scoped_refptr<braft::KVBasedMergedMetaStorageImpl> const&) /v/braft/braft/src/braft/raft_meta.cpp:111 (braft_tsan_test+0x4cd74f)\r\n    #8 void std::__invoke_impl<void, my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>(std::__invoke_other, my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0&&, braft::Node*&&, braft::NodeOptions*&&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/invoke.h:60:14 (braft_tsan_test+0x27be5d)\r\n    #9 std::__invoke_result<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>::type std::__invoke<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*>(my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0&&, braft::Node*&&, braft::NodeOptions*&&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/invoke.h:95:14 (braft_tsan_test+0x27bc6a)\r\n    #10 void std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> >::_M_invoke<0ul, 1ul, 2ul>(std::_Index_tuple<0ul, 1ul, 2ul>) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:244:13 (braft_tsan_test+0x27bbce)\r\n    #11 std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> >::operator()() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:251:11 (braft_tsan_test+0x27bb38)\r\n    #12 std::thread::_State_impl<std::thread::_Invoker<std::tuple<my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody()::$_0, braft::Node*, braft::NodeOptions*> > >::_M_run() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/thread:195:13 (braft_tsan_test+0x27b8ac)\r\n    #13 <null> <null> (libstdc++.so.6+0xd2bd3)\r\n\r\n  Mutex M93303508761559560 is already destroyed.\r\n\r\n  Mutex M92177797832769712 is already destroyed.\r\n\r\n  Thread T69 (tid=17142, running) created by main thread at:\r\n    #0 pthread_create <null> (braft_tsan_test+0x207866)\r\n    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xd2e98)\r\n    #2 my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody() /v/tsan_demo/braft_tsan_test.cc:113:15 (braft_tsan_test+0x27a216)\r\n    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (braft_tsan_test+0x2b5abc)\r\n    #4 main /v/tsan_demo/braft_tsan_test.cc:157:10 (braft_tsan_test+0x278a88)\r\n\r\n  Thread T68 (tid=17141, running) created by main thread at:\r\n    #0 pthread_create <null> (braft_tsan_test+0x207866)\r\n    #1 std::thread::_M_start_thread(std::unique_ptr<std::thread::_State, std::default_delete<std::thread::_State> >, void (*)()) <null> (libstdc++.so.6+0xd2e98)\r\n    #2 my::(anonymous namespace)::MyTest_TSAN_Check_braft_Test::TestBody() /v/tsan_demo/braft_tsan_test.cc:111:15 (braft_tsan_test+0x27a19c)\r\n    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (braft_tsan_test+0x2b5abc)\r\n    #4 main /v/tsan_demo/braft_tsan_test.cc:157:10 (braft_tsan_test+0x278a88)\r\n\r\nSUMMARY: ThreadSanitizer: data race (/v/tsan_demo/build_tsan/braft_tsan_test+0x23169f) in memcmp\r\n```\r\n\r\n以及：\r\n```\r\nWARNING: ThreadSanitizer: data race (pid=17071)\r\n  Read of size 8 at 0x7b0c00063108 by thread T38:\r\n    #0 std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_S_right(std::_Rb_tree_node_base*) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:798:45 (braft_tsan_test+0x27f006)\r\n    #1 std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_erase(std::_Rb_tree_node<braft::PeerId>*) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:1913:13 (braft_tsan_test+0x2815d7)\r\n    #2 std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::~_Rb_tree() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:995:9 (braft_tsan_test+0x506d86)\r\n    #3 std::set<braft::PeerId, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::~set() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_set.h:281 (braft_tsan_test+0x506d86)\r\n    #4 braft::NodeImpl::elect_self(std::unique_lock<butil::Mutex>*, bool) /v/braft/braft/src/braft/node.cpp:1707 (braft_tsan_test+0x506d86)\r\n\r\n  Previous write of size 8 at 0x7b0c00063108 by thread T54 (mutexes: write M3894):\r\n    #0 operator new(unsigned long) <null> (braft_tsan_test+0x2777e7)\r\n    #1 __gnu_cxx::new_allocator<std::_Rb_tree_node<braft::PeerId> >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/ext/new_allocator.h:114:27 (braft_tsan_test+0x51b679)\r\n    #2 std::allocator_traits<std::allocator<std::_Rb_tree_node<braft::PeerId> > >::allocate(std::allocator<std::_Rb_tree_node<braft::PeerId> >&, unsigned long) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/alloc_traits.h:444 (braft_tsan_test+0x51b679)\r\n    #3 std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_get_node() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:580 (braft_tsan_test+0x51b679)\r\n    #4 std::_Rb_tree_node<braft::PeerId>* std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_create_node<braft::PeerId const&>(braft::PeerId const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:630 (braft_tsan_test+0x51b679)\r\n    #5 std::_Rb_tree_node<braft::PeerId>* std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node::operator()<braft::PeerId const&>(braft::PeerId const&) const /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:548 (braft_tsan_test+0x51b679)\r\n    #6 std::_Rb_tree_iterator<braft::PeerId> std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_insert_<braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node>(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:1810 (braft_tsan_test+0x51b679)\r\n    #7 std::_Rb_tree_iterator<braft::PeerId> std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_insert_unique_<braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node>(std::_Rb_tree_const_iterator<braft::PeerId>, braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:2261 (braft_tsan_test+0x51b679)\r\n    #8 std::enable_if<__same_value_type<std::_Rb_tree_const_iterator<braft::PeerId> >::value, void>::type std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_insert_range_unique<std::_Rb_tree_const_iterator<braft::PeerId> >(std::_Rb_tree_const_iterator<braft::PeerId>, std::_Rb_tree_const_iterator<braft::PeerId>) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:1113 (braft_tsan_test+0x51b679)\r\n\r\n  Location is heap block of size 48 at 0x7b0c000630f0 allocated by thread T54:\r\n    #0 operator new(unsigned long) <null> (braft_tsan_test+0x2777e7)\r\n    #1 __gnu_cxx::new_allocator<std::_Rb_tree_node<braft::PeerId> >::allocate(unsigned long, void const*) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/ext/new_allocator.h:114:27 (braft_tsan_test+0x51b679)\r\n    #2 std::allocator_traits<std::allocator<std::_Rb_tree_node<braft::PeerId> > >::allocate(std::allocator<std::_Rb_tree_node<braft::PeerId> >&, unsigned long) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/alloc_traits.h:444 (braft_tsan_test+0x51b679)\r\n    #3 std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_get_node() /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:580 (braft_tsan_test+0x51b679)\r\n    #4 std::_Rb_tree_node<braft::PeerId>* std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_create_node<braft::PeerId const&>(braft::PeerId const&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:630 (braft_tsan_test+0x51b679)\r\n    #5 std::_Rb_tree_node<braft::PeerId>* std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node::operator()<braft::PeerId const&>(braft::PeerId const&) const /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:548 (braft_tsan_test+0x51b679)\r\n    #6 std::_Rb_tree_iterator<braft::PeerId> std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_insert_<braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node>(std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:1810 (braft_tsan_test+0x51b679)\r\n    #7 std::_Rb_tree_iterator<braft::PeerId> std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_insert_unique_<braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node>(std::_Rb_tree_const_iterator<braft::PeerId>, braft::PeerId const&, std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_Alloc_node&) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:2261 (braft_tsan_test+0x51b679)\r\n    #8 std::enable_if<__same_value_type<std::_Rb_tree_const_iterator<braft::PeerId> >::value, void>::type std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_M_insert_range_unique<std::_Rb_tree_const_iterator<braft::PeerId> >(std::_Rb_tree_const_iterator<braft::PeerId>, std::_Rb_tree_const_iterator<braft::PeerId>) /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:1113 (braft_tsan_test+0x51b679)\r\n\r\n  Mutex M3894 (0x7b7000002b58) created at:\r\n    #0 pthread_mutex_init <null> (braft_tsan_test+0x207c8a)\r\n    #1 butil::Mutex::Mutex() /install_libs/brpc/include/butil/synchronization/lock.h:51:9 (braft_tsan_test+0x5014e0)\r\n    #2 braft::NodeImpl::NodeImpl(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, braft::PeerId const&) /v/braft/braft/src/braft/node.cpp:136 (braft_tsan_test+0x5014e0)\r\n    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (braft_tsan_test+0x2b5abc)\r\n    #4 main /v/tsan_demo/braft_tsan_test.cc:157:10 (braft_tsan_test+0x278a88)\r\n\r\n  Thread T38 (tid=17110, running) created by main thread at:\r\n    #0 pthread_create <null> (braft_tsan_test+0x207866)\r\n    #1 bthread::TaskControl::add_workers(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:199:24 (braft_tsan_test+0x31f90d)\r\n    #2 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (braft_tsan_test+0x2b5abc)\r\n    #3 main /v/tsan_demo/braft_tsan_test.cc:157:10 (braft_tsan_test+0x278a88)\r\n\r\n  Thread T54 (tid=17126, running) created by main thread at:\r\n    #0 pthread_create <null> (braft_tsan_test+0x207866)\r\n    #1 bthread::TaskControl::add_workers(int) /v/brpc/incubator-brpc/src/bthread/task_control.cpp:199:24 (braft_tsan_test+0x31f90d)\r\n    #2 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) <null> (braft_tsan_test+0x2b5abc)\r\n    #3 main /v/tsan_demo/braft_tsan_test.cc:157:10 (braft_tsan_test+0x278a88)\r\n\r\nSUMMARY: ThreadSanitizer: data race /usr/bin/../lib/gcc/x86_64-redhat-linux/9/../../../../include/c++/9/bits/stl_tree.h:798:45 in std::_Rb_tree<braft::PeerId, braft::PeerId, std::_Identity<braft::PeerId>, std::less<braft::PeerId>, std::allocator<braft::PeerId> >::_S_right(std::_Rb_tree_node_base*)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048629264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048660497","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1048660497","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1048660497,"node_id":"IC_kwDOBhmkcs4-gUoR","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-23T10:54:22Z","updated_at":"2022-02-23T10:54:22Z","author_association":"CONTRIBUTOR","body":"这个可能和braft的代码实现有关，可以给braft提个issue?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1048660497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049293302","html_url":"https://github.com/apache/brpc/issues/1686#issuecomment-1049293302","issue_url":"https://api.github.com/repos/apache/brpc/issues/1686","id":1049293302,"node_id":"IC_kwDOBhmkcs4-ivH2","user":{"login":"Sigma711","id":45967756,"node_id":"MDQ6VXNlcjQ1OTY3NzU2","avatar_url":"https://avatars.githubusercontent.com/u/45967756?v=4","gravatar_id":"","url":"https://api.github.com/users/Sigma711","html_url":"https://github.com/Sigma711","followers_url":"https://api.github.com/users/Sigma711/followers","following_url":"https://api.github.com/users/Sigma711/following{/other_user}","gists_url":"https://api.github.com/users/Sigma711/gists{/gist_id}","starred_url":"https://api.github.com/users/Sigma711/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sigma711/subscriptions","organizations_url":"https://api.github.com/users/Sigma711/orgs","repos_url":"https://api.github.com/users/Sigma711/repos","events_url":"https://api.github.com/users/Sigma711/events{/privacy}","received_events_url":"https://api.github.com/users/Sigma711/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-23T22:52:28Z","updated_at":"2022-02-23T22:52:28Z","author_association":"NONE","body":"Same","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049293302/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049437169","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1049437169","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1049437169,"node_id":"IC_kwDOBhmkcs4-jSPx","user":{"login":"lday0321","id":3905322,"node_id":"MDQ6VXNlcjM5MDUzMjI=","avatar_url":"https://avatars.githubusercontent.com/u/3905322?v=4","gravatar_id":"","url":"https://api.github.com/users/lday0321","html_url":"https://github.com/lday0321","followers_url":"https://api.github.com/users/lday0321/followers","following_url":"https://api.github.com/users/lday0321/following{/other_user}","gists_url":"https://api.github.com/users/lday0321/gists{/gist_id}","starred_url":"https://api.github.com/users/lday0321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lday0321/subscriptions","organizations_url":"https://api.github.com/users/lday0321/orgs","repos_url":"https://api.github.com/users/lday0321/repos","events_url":"https://api.github.com/users/lday0321/events{/privacy}","received_events_url":"https://api.github.com/users/lday0321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-24T02:38:21Z","updated_at":"2022-02-24T02:38:21Z","author_association":"NONE","body":"好的， 我想先确认下， 把mutex.cpp的`pthread_mutex_lock`/`pthread_mutex_unlock`移除是不是，pthread这两个方法的劫持就彻底无效了？因为我看mutex.cpp里，还有一部分和劫持这两个方法相关的逻辑：https://github.com/apache/incubator-brpc/blob/master/src/bthread/mutex.cpp#L407-L430","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049437169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049466505","html_url":"https://github.com/apache/brpc/issues/1687#issuecomment-1049466505","issue_url":"https://api.github.com/repos/apache/brpc/issues/1687","id":1049466505,"node_id":"IC_kwDOBhmkcs4-jZaJ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-24T03:47:52Z","updated_at":"2022-02-24T03:47:52Z","author_association":"CONTRIBUTOR","body":"> 好的， 我想先确认下， 把mutex.cpp的`pthread_mutex_lock`/`pthread_mutex_unlock`移除是不是，pthread这两个方法的劫持就彻底无效了？因为我看mutex.cpp里，还有一部分和劫持这两个方法相关的逻辑：https://github.com/apache/incubator-brpc/blob/master/src/bthread/mutex.cpp#L407-L430\r\n\r\n是的。那个逻辑不影响的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049466505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049485166","html_url":"https://github.com/apache/brpc/pull/922#issuecomment-1049485166","issue_url":"https://api.github.com/repos/apache/brpc/issues/922","id":1049485166,"node_id":"IC_kwDOBhmkcs4-jd9u","user":{"login":"tcp9","id":38188494,"node_id":"MDQ6VXNlcjM4MTg4NDk0","avatar_url":"https://avatars.githubusercontent.com/u/38188494?v=4","gravatar_id":"","url":"https://api.github.com/users/tcp9","html_url":"https://github.com/tcp9","followers_url":"https://api.github.com/users/tcp9/followers","following_url":"https://api.github.com/users/tcp9/following{/other_user}","gists_url":"https://api.github.com/users/tcp9/gists{/gist_id}","starred_url":"https://api.github.com/users/tcp9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tcp9/subscriptions","organizations_url":"https://api.github.com/users/tcp9/orgs","repos_url":"https://api.github.com/users/tcp9/repos","events_url":"https://api.github.com/users/tcp9/events{/privacy}","received_events_url":"https://api.github.com/users/tcp9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-24T04:31:07Z","updated_at":"2022-02-24T04:31:07Z","author_association":"NONE","body":"hello @cdjingit，想尝试使用下您提交的pr来访问后端的cassandra，请问这个pr后续还有bugfix吗？谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049485166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049925753","html_url":"https://github.com/apache/brpc/issues/1701#issuecomment-1049925753","issue_url":"https://api.github.com/repos/apache/brpc/issues/1701","id":1049925753,"node_id":"IC_kwDOBhmkcs4-lJh5","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-24T14:38:49Z","updated_at":"2022-02-24T14:41:03Z","author_association":"CONTRIBUTOR","body":"多谢反馈，最近@Huixxi 刚实现了新版的brpc主页，有问题欢迎大家随时反馈。\r\n@Huixxi 辛苦跟进下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049925753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049937015","html_url":"https://github.com/apache/brpc/issues/1700#issuecomment-1049937015","issue_url":"https://api.github.com/repos/apache/brpc/issues/1700","id":1049937015,"node_id":"IC_kwDOBhmkcs4-lMR3","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-24T14:50:31Z","updated_at":"2022-02-24T14:50:31Z","author_association":"CONTRIBUTOR","body":"多谢反馈，应该改成这样：\r\n```c++\r\n  char tmp[rdma::MAGIC_LENGTH];\r\n  _read_buf.copy_to(tmp, rdma::MAGIC_LENGTH);\r\n```\r\n有兴趣的话可以提个PR修下这个问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1049937015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]