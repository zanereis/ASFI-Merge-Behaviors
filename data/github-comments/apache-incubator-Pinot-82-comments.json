[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765110529","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-765110529","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":765110529,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTExMDUyOQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T04:19:50Z","updated_at":"2021-01-22T04:19:50Z","author_association":"NONE","body":"@fx19880617 do you mean the controller data folder?  I have mapped /var/pinot/controller/data to a SSD and its max size is 10GB however it was only 50% full. I am using 2 controller and both were just around 50% full.\r\n\r\nI have some questions:\r\na) Is it ok if I move this controller data folder to EFS? So it will grow automatically. Or will it cause any latency?. Please note for pinot server I will continue using SSD for performance. I am planning to use EFS just for controller data.\r\n\r\nb) I have to create small segments because the textindex which I am relying heavily. Textindex have an issue where it only scans online or completed segments(https://github.com/apache/incubator-pinot/issues/6431) . Because of this behavior I am creating small segments so that I can get instant results. Is there any way I can merge completed segments with some periodic process?\r\n\r\nc) Once I restarted controller, broker and server at the same time the issue went away and ingestion started working. However individual restart did not helped. Why this is so?\r\n\r\n\r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765110529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765114870","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-765114870","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":765114870,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTExNDg3MA==","user":{"login":"subourbonite","id":10916802,"node_id":"MDQ6VXNlcjEwOTE2ODAy","avatar_url":"https://avatars.githubusercontent.com/u/10916802?v=4","gravatar_id":"","url":"https://api.github.com/users/subourbonite","html_url":"https://github.com/subourbonite","followers_url":"https://api.github.com/users/subourbonite/followers","following_url":"https://api.github.com/users/subourbonite/following{/other_user}","gists_url":"https://api.github.com/users/subourbonite/gists{/gist_id}","starred_url":"https://api.github.com/users/subourbonite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subourbonite/subscriptions","organizations_url":"https://api.github.com/users/subourbonite/orgs","repos_url":"https://api.github.com/users/subourbonite/repos","events_url":"https://api.github.com/users/subourbonite/events{/privacy}","received_events_url":"https://api.github.com/users/subourbonite/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T04:34:55Z","updated_at":"2021-01-22T04:34:55Z","author_association":"CONTRIBUTOR","body":"You can't have two controllers with separate storage. You can run multiple controllers, but they must have a consistent view of the data (S3, EFS, etc).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765114870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765172334","html_url":"https://github.com/apache/pinot/pull/6475#issuecomment-765172334","issue_url":"https://api.github.com/repos/apache/pinot/issues/6475","id":765172334,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3MjMzNA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:38:09Z","updated_at":"2021-01-22T06:38:09Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=h1) Report\n> Merging [#6475](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=desc) (71ed4d9) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `1.41%`.\n> The diff coverage is `59.74%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6475/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6475      +/-   ##\n==========================================\n- Coverage   66.44%   65.03%   -1.42%     \n==========================================\n  Files        1075     1332     +257     \n  Lines       54773    65323   +10550     \n  Branches     8168     9521    +1353     \n==========================================\n+ Hits        36396    42481    +6085     \n- Misses      15700    19807    +4107     \n- Partials     2677     3035     +358     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `65.03% <59.74%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <0.00%> (+9.52%)` | :arrow_up: |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <0.00%> (-13.29%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `10.90% <ø> (-51.10%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `28.00% <ø> (-6.29%)` | :arrow_down: |\n| ... and [1175 more](https://codecov.io/gh/apache/incubator-pinot/pull/6475/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=footer). Last update [f17be35...71ed4d9](https://codecov.io/gh/apache/incubator-pinot/pull/6475?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765172334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765272112","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-765272112","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":765272112,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTI3MjExMg==","user":{"login":"mangrrua","id":17813993,"node_id":"MDQ6VXNlcjE3ODEzOTkz","avatar_url":"https://avatars.githubusercontent.com/u/17813993?v=4","gravatar_id":"","url":"https://api.github.com/users/mangrrua","html_url":"https://github.com/mangrrua","followers_url":"https://api.github.com/users/mangrrua/followers","following_url":"https://api.github.com/users/mangrrua/following{/other_user}","gists_url":"https://api.github.com/users/mangrrua/gists{/gist_id}","starred_url":"https://api.github.com/users/mangrrua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mangrrua/subscriptions","organizations_url":"https://api.github.com/users/mangrrua/orgs","repos_url":"https://api.github.com/users/mangrrua/repos","events_url":"https://api.github.com/users/mangrrua/events{/privacy}","received_events_url":"https://api.github.com/users/mangrrua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T09:35:06Z","updated_at":"2021-01-22T09:35:06Z","author_association":"CONTRIBUTOR","body":"I think it's not a good idea. Pinot will start using SQL instead of PQL completely. Also, connector uses SQL compiler of Pinot, and I don't know SQL compiler supports regexp_like function or not.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765272112/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765281216","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-765281216","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":765281216,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTI4MTIxNg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T09:48:12Z","updated_at":"2021-01-22T09:48:12Z","author_association":"CONTRIBUTOR","body":"> @fx19880617 do you mean the controller data folder? I have mapped /var/pinot/controller/data to a SSD and its max size is 10GB however it was only 50% full. I am using 2 controller and both were just around 50% full.\r\n> \r\n> I have some questions:\r\n> a) Is it ok if I move this controller data folder to EFS? So it will grow automatically. Or will it cause any latency?. Please note for pinot server I will continue using SSD for performance. I am planning to use EFS just for controller data.\r\n> \r\n> b) I have to create small segments because the textindex which I am relying heavily. Textindex have an issue where it only scans online or completed segments(#6431) . Because of this behavior I am creating small segments so that I can get instant results. Is there any way I can merge completed segments with some periodic process?\r\n> \r\n> c) Once I restarted controller, broker and server at the same time the issue went away and ingestion started working. However individual restart did not helped. Why this is so?\r\n\r\na) For controller storage, it's only on data load/backup path, not query path, so it's recommended to use blob store like s3/hdfs. \r\nb) I think we can leverage minion framework to generate tasks to merge small segments, this task is not yet implemented, which we can implement.\r\nc) Do you mean restart server only won't fix? Typically restart servers will fix the error segments issue. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765281216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765324592","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-765324592","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":765324592,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTMyNDU5Mg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T11:02:10Z","updated_at":"2021-01-22T11:03:18Z","author_association":"CONTRIBUTOR","body":"I feel in this case, we can still write the query in SparkSQL `LIKE` syntax. Then in the filter Push Down code (https://github.com/apache/incubator-pinot/blob/master/pinot-connectors/pinot-spark-connector/src/main/scala/org/apache/pinot/connector/spark/connector/FilterPushDown.scala#L54), the connector can rewrite the query to Pinot `regexp_like` expression, then query Pinot.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765324592/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765461480","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-765461480","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":765461480,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTQ2MTQ4MA==","user":{"login":"khanhpv","id":3120540,"node_id":"MDQ6VXNlcjMxMjA1NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3120540?v=4","gravatar_id":"","url":"https://api.github.com/users/khanhpv","html_url":"https://github.com/khanhpv","followers_url":"https://api.github.com/users/khanhpv/followers","following_url":"https://api.github.com/users/khanhpv/following{/other_user}","gists_url":"https://api.github.com/users/khanhpv/gists{/gist_id}","starred_url":"https://api.github.com/users/khanhpv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khanhpv/subscriptions","organizations_url":"https://api.github.com/users/khanhpv/orgs","repos_url":"https://api.github.com/users/khanhpv/repos","events_url":"https://api.github.com/users/khanhpv/events{/privacy}","received_events_url":"https://api.github.com/users/khanhpv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T14:58:00Z","updated_at":"2021-01-22T14:58:00Z","author_association":"NONE","body":"> I feel in this case, we can still write the query in SparkSQL `LIKE` syntax. Then in the filter Push Down code (https://github.com/apache/incubator-pinot/blob/master/pinot-connectors/pinot-spark-connector/src/main/scala/org/apache/pinot/connector/spark/connector/FilterPushDown.scala#L54), the connector can rewrite the query to Pinot `regexp_like` expression, then query Pinot.\r\n\r\nI'll try this. Thank you so much, mangrrua and fx19880617","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765461480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765462272","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-765462272","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":765462272,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTQ2MjI3Mg==","user":{"login":"khanhpv","id":3120540,"node_id":"MDQ6VXNlcjMxMjA1NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3120540?v=4","gravatar_id":"","url":"https://api.github.com/users/khanhpv","html_url":"https://github.com/khanhpv","followers_url":"https://api.github.com/users/khanhpv/followers","following_url":"https://api.github.com/users/khanhpv/following{/other_user}","gists_url":"https://api.github.com/users/khanhpv/gists{/gist_id}","starred_url":"https://api.github.com/users/khanhpv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khanhpv/subscriptions","organizations_url":"https://api.github.com/users/khanhpv/orgs","repos_url":"https://api.github.com/users/khanhpv/repos","events_url":"https://api.github.com/users/khanhpv/events{/privacy}","received_events_url":"https://api.github.com/users/khanhpv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T14:59:03Z","updated_at":"2021-01-22T14:59:03Z","author_association":"NONE","body":"> I think it's not a good idea. Pinot will start using SQL instead of PQL completely. Also, connector uses SQL compiler of Pinot, and I don't know SQL compiler supports regexp_like function or not.\r\n\r\nWhen this release?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765462272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765591119","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-765591119","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":765591119,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTU5MTExOQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T18:05:37Z","updated_at":"2021-01-22T18:06:00Z","author_association":"NONE","body":"@subourbonite  I am running two controllers and two brokers not aware that the controller data should be shared . I can map  same PVC for both controllers. Thanks for pointing it out. \r\n\r\n@fx19880617   \r\na) it is good to know that I can use S3 for controller storage and use it as a backup. Could you share some documents related to setting it up. is it same as the deep store functionality?\r\n\r\nb) Hope there is a PR going on related to minion task?\r\n\r\nc) I tried restarting servers in round robin fashion to avoid outage and that didn't help. I had to restart the entire cluster at same time to make it work again.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765591119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765611219","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-765611219","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":765611219,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTYxMTIxOQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T18:41:20Z","updated_at":"2021-01-22T18:41:20Z","author_association":"CONTRIBUTOR","body":"> > I think it's not a good idea. Pinot will start using SQL instead of PQL completely. Also, connector uses SQL compiler of Pinot, and I don't know SQL compiler supports regexp_like function or not.\r\n> \r\n> When this release?\r\n\r\nwe need to make a code change for this :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765611219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765640917","html_url":"https://github.com/apache/pinot/pull/6361#issuecomment-765640917","issue_url":"https://api.github.com/repos/apache/pinot/issues/6361","id":765640917,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY0MDkxNw==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T19:39:13Z","updated_at":"2021-01-22T19:39:13Z","author_association":"MEMBER","body":"@mayankshriv Regarding performance impact, I've benchmarked this PR with two type use cases. One is with high qps, one is with high number of columns in the schema. Neither of them showed performance degradation.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765640917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765648243","html_url":"https://github.com/apache/pinot/pull/6418#issuecomment-765648243","issue_url":"https://api.github.com/repos/apache/pinot/issues/6418","id":765648243,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY0ODI0Mw==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T19:53:25Z","updated_at":"2021-01-22T19:53:25Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu fixed the message. thanks for bearing with me.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765648243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765662098","html_url":"https://github.com/apache/pinot/issues/6478#issuecomment-765662098","issue_url":"https://api.github.com/repos/apache/pinot/issues/6478","id":765662098,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY2MjA5OA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T20:22:06Z","updated_at":"2021-01-22T20:22:06Z","author_association":"CONTRIBUTOR","body":"This is unexpected. `cast(now() - 172800000 as long)` should be replaced with the actual value on the broker side, and these 2 queries should be identical on the server side. @fx19880617 Can you confirm?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765662098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765673018","html_url":"https://github.com/apache/pinot/issues/6478#issuecomment-765673018","issue_url":"https://api.github.com/repos/apache/pinot/issues/6478","id":765673018,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY3MzAxOA==","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T20:42:01Z","updated_at":"2021-01-22T20:42:01Z","author_association":"CONTRIBUTOR","body":"I did a simple test to compile the query to BrokerRequest, and do see `cast(now() - 172800000 as long)` as LHS. My test did not actually go through any query execution.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765673018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765688325","html_url":"https://github.com/apache/pinot/issues/6478#issuecomment-765688325","issue_url":"https://api.github.com/repos/apache/pinot/issues/6478","id":765688325,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY4ODMyNQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T21:16:08Z","updated_at":"2021-01-22T21:16:08Z","author_association":"CONTRIBUTOR","body":"The problem is that we don't have a scalar function implementation of `cast()`, thus it won't be resolved at compilation","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765688325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765728382","html_url":"https://github.com/apache/pinot/pull/6472#issuecomment-765728382","issue_url":"https://api.github.com/repos/apache/pinot/issues/6472","id":765728382,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTcyODM4Mg==","user":{"login":"JoeFuentes-WebDev","id":66155672,"node_id":"MDQ6VXNlcjY2MTU1Njcy","avatar_url":"https://avatars.githubusercontent.com/u/66155672?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeFuentes-WebDev","html_url":"https://github.com/JoeFuentes-WebDev","followers_url":"https://api.github.com/users/JoeFuentes-WebDev/followers","following_url":"https://api.github.com/users/JoeFuentes-WebDev/following{/other_user}","gists_url":"https://api.github.com/users/JoeFuentes-WebDev/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeFuentes-WebDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeFuentes-WebDev/subscriptions","organizations_url":"https://api.github.com/users/JoeFuentes-WebDev/orgs","repos_url":"https://api.github.com/users/JoeFuentes-WebDev/repos","events_url":"https://api.github.com/users/JoeFuentes-WebDev/events{/privacy}","received_events_url":"https://api.github.com/users/JoeFuentes-WebDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T22:45:34Z","updated_at":"2021-01-22T22:46:45Z","author_association":"CONTRIBUTOR","body":"LGTM 👍🏽 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765728382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765818572","html_url":"https://github.com/apache/pinot/pull/6466#issuecomment-765818572","issue_url":"https://api.github.com/repos/apache/pinot/issues/6466","id":765818572,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTgxODU3Mg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T02:19:25Z","updated_at":"2021-02-17T18:55:38Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=h1) Report\n> Merging [#6466](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=desc) (b9c3f01) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `0.82%`.\n> The diff coverage is `62.18%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6466/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6466      +/-   ##\n==========================================\n- Coverage   66.44%   65.62%   -0.83%     \n==========================================\n  Files        1075     1345     +270     \n  Lines       54773    66138   +11365     \n  Branches     8168     9647    +1479     \n==========================================\n+ Hits        36396    43403    +7007     \n- Misses      15700    19637    +3937     \n- Partials     2677     3098     +421     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `65.62% <62.18%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `10.90% <ø> (-51.10%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| ... and [1214 more](https://codecov.io/gh/apache/incubator-pinot/pull/6466/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=footer). Last update [9708292...b9c3f01](https://codecov.io/gh/apache/incubator-pinot/pull/6466?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765818572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765857360","html_url":"https://github.com/apache/pinot/pull/6466#issuecomment-765857360","issue_url":"https://api.github.com/repos/apache/pinot/issues/6466","id":765857360,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg1NzM2MA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T03:35:10Z","updated_at":"2021-01-23T03:35:10Z","author_association":"CONTRIBUTOR","body":"How would retention manager work on these segments?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765857360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765859442","html_url":"https://github.com/apache/pinot/pull/6440#issuecomment-765859442","issue_url":"https://api.github.com/repos/apache/pinot/issues/6440","id":765859442,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg1OTQ0Mg==","user":{"login":"daniellavoie","id":4403970,"node_id":"MDQ6VXNlcjQ0MDM5NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4403970?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellavoie","html_url":"https://github.com/daniellavoie","followers_url":"https://api.github.com/users/daniellavoie/followers","following_url":"https://api.github.com/users/daniellavoie/following{/other_user}","gists_url":"https://api.github.com/users/daniellavoie/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellavoie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellavoie/subscriptions","organizations_url":"https://api.github.com/users/daniellavoie/orgs","repos_url":"https://api.github.com/users/daniellavoie/repos","events_url":"https://api.github.com/users/daniellavoie/events{/privacy}","received_events_url":"https://api.github.com/users/daniellavoie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T03:52:14Z","updated_at":"2021-01-23T03:52:14Z","author_association":"CONTRIBUTOR","body":"> So, we are still making the assumption that the client credentials are sent via http headers. I suppose that is OK, but maybe we should also add an interface that passes the client's identity (as received via https auth) to the auth interface we have? We do have https now.\r\n\r\nYou mean mTLS identity? Authentication should be decoupled from protocol. Fair point to not assume http headers assumption. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765859442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765860188","html_url":"https://github.com/apache/pinot/pull/6440#issuecomment-765860188","issue_url":"https://api.github.com/repos/apache/pinot/issues/6440","id":765860188,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg2MDE4OA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T03:58:19Z","updated_at":"2021-01-23T03:58:19Z","author_association":"CONTRIBUTOR","body":"> > So, we are still making the assumption that the client credentials are sent via http headers. I suppose that is OK, but maybe we should also add an interface that passes the client's identity (as received via https auth) to the auth interface we have? We do have https now.\r\n> \r\n> You mean mTLS identity? Authentication should be decoupled from protocol. Fair point to not assume http headers assumption.\r\n\r\nAgreed about separating authentication and protocol, but you cannot do much authentication sending cleartext stuff back and forth. Anyone can impersonate easily. Even with https, if we have header based auth, it is easy to just insert some header and do what one wants to do. \r\n\r\nIn these cases, it translates to very weak (if any) authentication.\r\n\r\nWe used this as a first round in trusted environments. With cloud based deployments in place, I am not sure if this holds true all the time","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765860188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765862374","html_url":"https://github.com/apache/pinot/pull/6440#issuecomment-765862374","issue_url":"https://api.github.com/repos/apache/pinot/issues/6440","id":765862374,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg2MjM3NA==","user":{"login":"daniellavoie","id":4403970,"node_id":"MDQ6VXNlcjQ0MDM5NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4403970?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellavoie","html_url":"https://github.com/daniellavoie","followers_url":"https://api.github.com/users/daniellavoie/followers","following_url":"https://api.github.com/users/daniellavoie/following{/other_user}","gists_url":"https://api.github.com/users/daniellavoie/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellavoie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellavoie/subscriptions","organizations_url":"https://api.github.com/users/daniellavoie/orgs","repos_url":"https://api.github.com/users/daniellavoie/repos","events_url":"https://api.github.com/users/daniellavoie/events{/privacy}","received_events_url":"https://api.github.com/users/daniellavoie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T04:07:31Z","updated_at":"2021-01-23T04:07:31Z","author_association":"CONTRIBUTOR","body":"> > > So, we are still making the assumption that the client credentials are sent via http headers. I suppose that is OK, but maybe we should also add an interface that passes the client's identity (as received via https auth) to the auth interface we have? We do have https now.\r\n> > \r\n> > \r\n> > You mean mTLS identity? Authentication should be decoupled from protocol. Fair point to not assume http headers assumption.\r\n> \r\n> Agreed about separating authentication and protocol, but you cannot do much authentication sending cleartext stuff back and forth. Anyone can impersonate easily. Even with https, if we have header based auth, it is easy to just insert some header and do what one wants to do.\r\n> \r\n> In these cases, it translates to very weak (if any) authentication.\r\n> \r\n> We used this as a first round in trusted environments. With cloud based deployments in place, I am not sure if this holds true all the time\r\n\r\nInflight encryption and trusted identity management should not be mixed. Running \"secured\" authentication does requires a \"secured\" transport and a trusted identity provider. But I wouldn't discard the value of authentication without a secured transport since from a functional perspective, processing a request under a specific identity is valuable even though the channel is not secured (I'm thinking contextual user base request processing for dev and local use cases). The end game is you need a secured channel of course but these two aren't bound in my opinion. My takeaway is separation of concern and pluggable interfaces is paramount. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765862374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765862515","html_url":"https://github.com/apache/pinot/pull/6483#issuecomment-765862515","issue_url":"https://api.github.com/repos/apache/pinot/issues/6483","id":765862515,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg2MjUxNQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T04:08:56Z","updated_at":"2021-01-26T03:00:57Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=h1) Report\n> Merging [#6483](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=desc) (0469e82) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `6.65%`.\n> The diff coverage is `78.97%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6483/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6483      +/-   ##\n==========================================\n+ Coverage   66.44%   73.10%   +6.65%     \n==========================================\n  Files        1075     1334     +259     \n  Lines       54773    65595   +10822     \n  Branches     8168     9567    +1399     \n==========================================\n+ Hits        36396    47952   +11556     \n+ Misses      15700    14499    -1201     \n- Partials     2677     3144     +467     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.82% <42.05%> (?)` | |\n| unittests | `64.86% <59.96%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `73.33% <ø> (+16.19%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <ø> (-4.40%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `28.00% <ø> (-6.29%)` | :arrow_down: |\n| ... and [1139 more](https://codecov.io/gh/apache/incubator-pinot/pull/6483/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=footer). Last update [e5bf05b...0469e82](https://codecov.io/gh/apache/incubator-pinot/pull/6483?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765862515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765873995","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-765873995","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":765873995,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg3Mzk5NQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T05:59:44Z","updated_at":"2021-01-23T05:59:44Z","author_association":"NONE","body":"@subourbonite At the moment the helm chart in the repo uses Statefulset for controller. which always creates separate storage. The folder in the chart for controller is /var/pinot/controller/data.  And I used the chart to create the Cluster. \r\nAlso how can I set controller data to S3, I am assuming that involves a whole set of different configuration?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765873995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765892962","html_url":"https://github.com/apache/pinot/pull/6484#issuecomment-765892962","issue_url":"https://api.github.com/repos/apache/pinot/issues/6484","id":765892962,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg5Mjk2Mg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T09:09:11Z","updated_at":"2021-01-23T09:23:43Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=h1) Report\n> Merging [#6484](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=desc) (b946133) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `6.65%`.\n> The diff coverage is `78.88%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6484/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6484      +/-   ##\n==========================================\n+ Coverage   66.44%   73.10%   +6.65%     \n==========================================\n  Files        1075     1334     +259     \n  Lines       54773    65584   +10811     \n  Branches     8168     9565    +1397     \n==========================================\n+ Hits        36396    47942   +11546     \n+ Misses      15700    14498    -1202     \n- Partials     2677     3144     +467     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.78% <42.13%> (?)` | |\n| unittests | `64.87% <59.87%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <0.00%> (-4.40%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `28.00% <ø> (-6.29%)` | :arrow_down: |\n| [...not/common/assignment/InstancePartitionsUtils.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vYXNzaWdubWVudC9JbnN0YW5jZVBhcnRpdGlvbnNVdGlscy5qYXZh) | `78.57% <ø> (+5.40%)` | :arrow_up: |\n| [...common/config/tuner/NoOpTableTableConfigTuner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vY29uZmlnL3R1bmVyL05vT3BUYWJsZVRhYmxlQ29uZmlnVHVuZXIuamF2YQ==) | `100.00% <ø> (ø)` | |\n| ... and [1136 more](https://codecov.io/gh/apache/incubator-pinot/pull/6484/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=footer). Last update [830eb94...b946133](https://codecov.io/gh/apache/incubator-pinot/pull/6484?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/765892962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766331143","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-766331143","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":766331143,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjMzMTE0Mw==","user":{"login":"mangrrua","id":17813993,"node_id":"MDQ6VXNlcjE3ODEzOTkz","avatar_url":"https://avatars.githubusercontent.com/u/17813993?v=4","gravatar_id":"","url":"https://api.github.com/users/mangrrua","html_url":"https://github.com/mangrrua","followers_url":"https://api.github.com/users/mangrrua/followers","following_url":"https://api.github.com/users/mangrrua/following{/other_user}","gists_url":"https://api.github.com/users/mangrrua/gists{/gist_id}","starred_url":"https://api.github.com/users/mangrrua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mangrrua/subscriptions","organizations_url":"https://api.github.com/users/mangrrua/orgs","repos_url":"https://api.github.com/users/mangrrua/repos","events_url":"https://api.github.com/users/mangrrua/events{/privacy}","received_events_url":"https://api.github.com/users/mangrrua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T11:20:10Z","updated_at":"2021-01-24T11:20:10Z","author_association":"CONTRIBUTOR","body":"Actually, methods below uses SQL `like` method. \r\n\r\n```    \r\ncase StringStartsWith(attr, value) => s\"$attr LIKE '$value%'\" \r\ncase StringEndsWith(attr, value) => s\"$attr LIKE '%$value'\"\r\ncase StringContains(attr, value) => s\"$attr LIKE '%$value%'\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766331143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766418350","html_url":"https://github.com/apache/pinot/issues/6293#issuecomment-766418350","issue_url":"https://api.github.com/repos/apache/pinot/issues/6293","id":766418350,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQxODM1MA==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T19:31:38Z","updated_at":"2021-01-24T19:31:38Z","author_association":"CONTRIBUTOR","body":"See a somewhat related issue filed for Flink - [Move test base classes from flink-tests to flink-test-utils](https://issues.apache.org/jira/browse/FLINK-21107)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766418350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766430863","html_url":"https://github.com/apache/pinot/pull/6485#issuecomment-766430863","issue_url":"https://api.github.com/repos/apache/pinot/issues/6485","id":766430863,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQzMDg2Mw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T20:58:36Z","updated_at":"2021-03-07T12:29:34Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=h1) Report\n> Merging [#6485](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=desc) (59d77d8) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.55%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6485/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6485       +/-   ##\n===========================================\n- Coverage   66.44%   43.89%   -22.56%     \n===========================================\n  Files        1075     1361      +286     \n  Lines       54773    66548    +11775     \n  Branches     8168     9703     +1535     \n===========================================\n- Hits        36396    29213     -7183     \n- Misses      15700    34895    +19195     \n+ Partials     2677     2440      -237     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.89% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1387 more](https://codecov.io/gh/apache/incubator-pinot/pull/6485/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=footer). Last update [5137025...59d77d8](https://codecov.io/gh/apache/incubator-pinot/pull/6485?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766430863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766467559","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-766467559","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":766467559,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ2NzU1OQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T00:19:37Z","updated_at":"2021-01-25T00:52:38Z","author_association":"NONE","body":"@siddharthteotia \r\nI dont know much abt Pinot code , However it seems like\r\nMutableSegmentImpl.addNewRow() calls PhysicalColumnIndexContainer._xxxxxIndex to fetch the Index for all type of indices.\r\n\r\nPhysicalColumnIndexContainer._invertedIndex is pulled from PinotDataBuffer (segmentReader.getIndexFor()) which I assume is memory or Consuming segments and it is same for _fstIndex, _rangeIndex, _h3Index, _jsonIndex etc..\r\n\r\nBut for _textIndex it is loading from segmentIndexDir which is Physical file or I guess Completed Segments.\r\n\r\nSo we might have to create a new constructor for LuceneTextIndexReader\r\n new LuceneTextIndexReader(segmentReader.getIndexFor(columnName, ColumnIndexType.TEXT_INDEX));\r\n to read from Buffer ? \r\n\r\nDo you think this make any sense?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766467559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766490730","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-766490730","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":766490730,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ5MDczMA==","user":{"login":"khanhpv","id":3120540,"node_id":"MDQ6VXNlcjMxMjA1NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3120540?v=4","gravatar_id":"","url":"https://api.github.com/users/khanhpv","html_url":"https://github.com/khanhpv","followers_url":"https://api.github.com/users/khanhpv/followers","following_url":"https://api.github.com/users/khanhpv/following{/other_user}","gists_url":"https://api.github.com/users/khanhpv/gists{/gist_id}","starred_url":"https://api.github.com/users/khanhpv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khanhpv/subscriptions","organizations_url":"https://api.github.com/users/khanhpv/orgs","repos_url":"https://api.github.com/users/khanhpv/repos","events_url":"https://api.github.com/users/khanhpv/events{/privacy}","received_events_url":"https://api.github.com/users/khanhpv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T01:58:19Z","updated_at":"2021-01-25T02:00:14Z","author_association":"NONE","body":"It's currently not working, everywhen I execute statements with StringContains, the Pinot server returns LIKE enum not found. I have read the spark connector code, and used any filter push options there, but not luck.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766490730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766829224","html_url":"https://github.com/apache/pinot/issues/4134#issuecomment-766829224","issue_url":"https://api.github.com/repos/apache/pinot/issues/4134","id":766829224,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjgyOTIyNA==","user":{"login":"RogerGMartins","id":2151337,"node_id":"MDQ6VXNlcjIxNTEzMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2151337?v=4","gravatar_id":"","url":"https://api.github.com/users/RogerGMartins","html_url":"https://github.com/RogerGMartins","followers_url":"https://api.github.com/users/RogerGMartins/followers","following_url":"https://api.github.com/users/RogerGMartins/following{/other_user}","gists_url":"https://api.github.com/users/RogerGMartins/gists{/gist_id}","starred_url":"https://api.github.com/users/RogerGMartins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RogerGMartins/subscriptions","organizations_url":"https://api.github.com/users/RogerGMartins/orgs","repos_url":"https://api.github.com/users/RogerGMartins/repos","events_url":"https://api.github.com/users/RogerGMartins/events{/privacy}","received_events_url":"https://api.github.com/users/RogerGMartins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T13:49:46Z","updated_at":"2021-01-25T13:49:46Z","author_association":"NONE","body":"Hi can this be patched in the latest version? The problem persists and I don't see any commit doing the fix.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/766829224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767103431","html_url":"https://github.com/apache/pinot/pull/6440#issuecomment-767103431","issue_url":"https://api.github.com/repos/apache/pinot/issues/6440","id":767103431,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzEwMzQzMQ==","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T20:49:00Z","updated_at":"2021-01-25T20:49:00Z","author_association":"CONTRIBUTOR","body":"> Don't you also need to change PinotQueryResource?\r\n\r\nIt already has access control validation under `getQueryResponse` method.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767103431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767120065","html_url":"https://github.com/apache/pinot/issues/6487#issuecomment-767120065","issue_url":"https://api.github.com/repos/apache/pinot/issues/6487","id":767120065,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzEyMDA2NQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T21:20:34Z","updated_at":"2021-01-25T21:20:34Z","author_association":"CONTRIBUTOR","body":"cc: @Jackie-Jiang ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767120065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767180093","html_url":"https://github.com/apache/pinot/pull/6479#issuecomment-767180093","issue_url":"https://api.github.com/repos/apache/pinot/issues/6479","id":767180093,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzE4MDA5Mw==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T23:31:51Z","updated_at":"2021-01-25T23:46:57Z","author_association":"MEMBER","body":"> I think this is still two pass, right? The second pass is on IntermediateSegment.\r\n> Could you elaborate a bit on where's the memory pressure coming from in the existing implementation? And how does this approach solve it (IntermediateSegment) does need its own storage.\r\n\r\nThis is still two passes, but only one pass on the raw data.\r\nE.g. in spark job where the data type is on row basis (like Dataset\\<Row\\>, RDD\\<Row\\>, Dataset\\<T\\>, RDD\\<T\\>), in order to  traverse the record, the API forEachPartition(iterator) is required to be called. While iterator can only provide the data once, thus the raw data has to be cached in the same executor in order to traverse it two times, if we stick on to the existing segment generation code.\r\n\r\nThe below lists out the possible solutions:\r\n1) cache all the raw data into executor memory in order to reuse the same data (using existing code of segment generation)\r\n2) traverse the raw data once and gathers the intermediate stats, and create offline segment based on the intermediate results (current PR)\r\n3) call forEachPartition(iterator) two times; gathering stats to an extra DF/RDD in the 1st iteration, and ingesting actual raw data based on the former DF/RDD in the 2nd round (code refactor still needed, and one extra DF/RDD involved)\r\n\r\nThe Approach 1) needs to load all the raw data into the singe executor before initializing the `SegmentIndexCreationDriver`( raw data traversal is encapsulated in that class). The Approach 2) and 3) basically have the same idea that spilt the current code into two parts, while the difference is that 2) works on a stats collector and 3) works on the raw data (one extra data traversal). \r\nThe Approach 2) works well if the cardinality of columns is not very high (just like mutable segment for realtime segments), while it could consume the same memory resource if cardinality is high. \r\nThe approach 3) works well if data is cached in the same executor, while the cached raw data itself can still be costly since the deserialized data is stored in the memory.\r\n\r\nOne optimization for this PR is to reused the dictionaries and forwarded indices stored in intermediateSegment, and pass it to immutable segment.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767180093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767180367","html_url":"https://github.com/apache/pinot/pull/6483#issuecomment-767180367","issue_url":"https://api.github.com/repos/apache/pinot/issues/6483","id":767180367,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzE4MDM2Nw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T23:32:30Z","updated_at":"2021-01-25T23:32:30Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang  a couple of files did not have license headers, so my commit was failing. I added them now . can you review please?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767180367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767197174","html_url":"https://github.com/apache/pinot/pull/6483#issuecomment-767197174","issue_url":"https://api.github.com/repos/apache/pinot/issues/6483","id":767197174,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzE5NzE3NA==","user":{"login":"kbastani","id":2095770,"node_id":"MDQ6VXNlcjIwOTU3NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2095770?v=4","gravatar_id":"","url":"https://api.github.com/users/kbastani","html_url":"https://github.com/kbastani","followers_url":"https://api.github.com/users/kbastani/followers","following_url":"https://api.github.com/users/kbastani/following{/other_user}","gists_url":"https://api.github.com/users/kbastani/gists{/gist_id}","starred_url":"https://api.github.com/users/kbastani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbastani/subscriptions","organizations_url":"https://api.github.com/users/kbastani/orgs","repos_url":"https://api.github.com/users/kbastani/repos","events_url":"https://api.github.com/users/kbastani/events{/privacy}","received_events_url":"https://api.github.com/users/kbastani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T00:20:13Z","updated_at":"2021-01-26T00:22:42Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu @kkrugler volunteered to put this into a separate pull request. It's ready for review: https://github.com/apache/incubator-pinot/pull/6489 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767197174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767304859","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-767304859","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":767304859,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzMwNDg1OQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T05:27:28Z","updated_at":"2021-01-26T09:54:02Z","author_association":"CONTRIBUTOR","body":"you can follow this doc to add configs for s3.\r\n[Use S3 as deep store for Pinot](https://docs.pinot.apache.org/users/tutorials/use-s3-as-deep-store-for-pinot)\r\n\r\nMore ref:\r\n[Pinot Amazon S3 filesystem](https://docs.pinot.apache.org/basics/data-import/pinot-file-system/amazon-s3)\r\n[Ingest Parquet Files from S3 Using Spark](https://docs.pinot.apache.org/users/tutorials/ingest-parquet-files-from-s3-using-spark)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767304859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767316922","html_url":"https://github.com/apache/pinot/pull/6466#issuecomment-767316922","issue_url":"https://api.github.com/repos/apache/pinot/issues/6466","id":767316922,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzMxNjkyMg==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T06:02:43Z","updated_at":"2021-01-26T06:02:43Z","author_association":"CONTRIBUTOR","body":"> How would retention manager work on these segments?\r\n\r\nCurrent time will be set as start/end. They will get removed accordingly. Update the description.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767316922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767385927","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-767385927","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":767385927,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzM4NTkyNw==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T08:30:26Z","updated_at":"2021-01-26T08:30:26Z","author_association":"CONTRIBUTOR","body":"I have a proposal to fix this. This is essentially an  enhancement. Let's meet and discuss. Happy to help you make the code changes else I will find time to make the changes. In any case, let's meet. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767385927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767864417","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767864417","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767864417,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg2NDQxNw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T22:18:46Z","updated_at":"2021-01-26T22:18:46Z","author_association":"NONE","body":"```\r\nmy-pinot-server-0 server  [Times: user=0.08 sys=0.00, real=0.02 secs]\r\nmy-pinot-controller-0 controller 2021/01/26 22:17:09.409 WARN [CallbackHandler] [ZkClient-EventThread-29-my-pinot-zk-cp-zookeeper.logging.svc.cluster.local:2181] Callback handler received event in wrong order. Listener: org.apache.helix.controller.GenericHelixController@362617cf, path: /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES, expected types: [INIT] but was CALLBACK\r\nmy-pinot-server-1 server 2021/01/26 22:17:09.588 WARN [ZkBaseDataAccessor] [ZkClient-EventThread-18-my-pinot-zk-cp-zookeeper.logging.svc.cluster.local:2181] Fail to read record for paths: {/pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/7fdbc2b8-d50c-43e0-8aae-8f81149ff9f6=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/ebfe4780-7d65-42a0-9293-8de8be680b52=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5cae61b1-c190-4ba4-8d75-2f55fbef3204=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b3a4690d-8f0b-49f7-a950-6fd56746760c=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/0febb043-2ddb-44b6-8637-ac9ec8e991c4=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/08aa0bbe-ddbc-4a40-8e4b-a94faee38d4c=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/4c94c196-7ed7-46cc-9b48-a7d3928df6c5=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/f8d49a81-2834-4a12-9908-e8f52f6a8b9b=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/2eb95020-540c-46e7-b18b-56232d5079ce=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/ddc77c89-593b-4278-954f-6d0aad4bba4a=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/09a788d4-f94b-4172-a7b5-ed6df22523b7=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b12423f6-22ba-46cb-a23a-84f20dbb7bb8=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b8cb57cc-db6c-414a-a97e-b4fd2147ce14=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/c70e5415-1520-485d-9eb7-2d43940422a3=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/352ead98-9e5d-4572-b4a9-224c7dff6a3d=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b0405375-5316-41ad-b134-ed55d2b54407=-101}\r\nmy-pinot-controller-0 controller 2021/01/26 22:17:09.600 WARN [CallbackHandler] [ZkClient-EventThread-29-my-pinot-zk-cp-zookeeper.logging.svc.cluster.local:2181] Callback handler received event in wrong order. Listener: org.apache.helix.controller.GenericHelixController@362617cf, path: /pinot-quickstart/INSTANCES/Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES, expected types: [INIT] but was CALLBACK\r\nmy-pinot-server-0 server 2021-01-26T22:17:09.358+0000: 113.899: Total time for which application threads were\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767864417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767865939","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767865939","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767865939,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg2NTkzOQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T22:22:00Z","updated_at":"2021-01-26T22:22:00Z","author_association":"NONE","body":"```\r\nmy-pinot-controller-0 controller 2021/01/26 22:17:12.039 WARN [ZkBaseDataAccessor] [HelixController-pipeline-task-pinot-quickstart-(83ee1db3_TASK)] Fail to read record for paths: {/pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/51a431e9-c0e1-4e08-9bcb-aee747608526=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/f9005198-fe85-4cad-84e8-0df918de95d9=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/ef3e0a42-eee4-43a4-bb11-bd1878937e2c=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/2fd3aeea-91d8-446d-b87f-eeb3d99e24c9=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/03239839-70d8-49ed-84eb-6d9d4bc3b777=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/d7c99ffe-7a4d-433b-a265-cf8c9fba6a5f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/d299feba-1781-407e-a7b3-83287fbd0997=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/68902832-2e61-4e6a-b249-e0e74711d493=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/084390ed-cccd-4171-b4c1-45c2f43ddc1a=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/53c3065c-60e3-4355-ab33-9f32221c5407=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/46f7ae44-ee3d-45c0-8781-6cedc67ea518=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/ba4e44c4-15d1-46a7-ac99-3f4fd11db97f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/dd3e8c08-e914-4245-8857-3d1229573c35=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/95ad2084-572f-4651-b009-1f3eaab73e6b=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/cc5bea58-9618-4746-9a6c-a6b8e5afdfaa=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/3491cf67-e305-4767-9d55-0963f9ffdf00=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/c7dca37a-e4d6-4fbf-a244-ec5b92724c9e=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b224f8f5-ea43-419a-a3af-11dace5e3f16=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/ae7c5ede-f7ec-45bb-a095-97210c6a7932=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/15a7fbcc-48b5-4300-9338-a0b009151e9e=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/f46c6152-858f-44f6-8658-f7c7540915f5=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/7a6a008a-33a2-4b08-9aac-db2fd0c00396=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/7819229e-21af-4760-9ce3-c38e446c1e14=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5dcd8621-f658-4c49-be47-41aea30e9cb4=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/92519c36-bcfb-4501-8dbb-0702ebdfd708=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5fa1b752-39e8-4563-847e-4eaef3c3d5b0=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/74263ff4-734d-4529-966c-f0cb0927593f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/98bb3b99-80d8-40bb-bdb6-d34f0b5e1090=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/39114365-1976-42ab-882d-e729eb70c143=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/86c29e7a-c24d-46f1-9efb-865b02b8999a=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/bc02072d-68db-4264-acb6-e6ded758a74a=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/aec1490b-4a0f-4d66-aad7-f2801b172b65=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/d894e3b1-e597-484f-a748-96a470c93f93=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/1b1ec9f0-c17f-44f7-b6a1-26c0c141892f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/8f0d8d0a-ec3a-4b11-bbf8-f44e0b611d3f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/230e18fe-135b-4892-ac34-ae7909874224=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/3d64a6bb-5e6c-4f72-87eb-ac295cb7c0e3=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/4e0b1fb2-f514-4350-92ac-2162c408f947=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b110753b-49e3-42d8-8a92-f635247a5d32=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/3891485f-621c-4a62-a702-4de7b9cda0ca=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/b221af1a-3704-4290-a980-4e6fac076d08=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5b970ff8-8f17-4518-9ffc-7ff72a0bc52b=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/7401939f-83a1-433b-9a4b-801e8b110b49=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/16a027cf-5c09-4b5f-9030-8bc8f0afcded=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/1ef817b6-21cc-48ae-bd16-ed2ad2e80b6d=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/8e9f37bf-25e0-4086-8401-df0f73850a6b=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/88f453a1-eca9-4b2c-9e4f-87e88da6e4ed=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/d0d42bf9-3b12-4686-8c7d-cd7bde6284cc=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/4f2526dc-cdf6-4035-b1b6-bef9f8871583=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/2b020fac-6c46-4eb2-9802-1cb7bd7c586b=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/11b63a38-99d9-442c-9eca-56f7d427c9a1=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/372cec23-e89b-421d-b611-b9bd35ed6bb3=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5a0aa3ae-d134-47e1-8fae-53aa0d70ee99=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/aec9d3ad-f1e9-4429-b031-1207534e9dff=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/fd9592c2-22e9-4536-a8ef-4d4e1eab6d5f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/0c36d8f7-7905-48a7-befe-7f48693f4c17=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/0e31dca5-4234-4842-a5ac-b44ccd01d1cb=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/d998d2e5-1796-42be-8848-9154d0d0be2f=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/3e201c8c-f8cb-431c-9e10-ab7da5a03eef=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/7bb908de-8c97-4cc7-8499-440d2e7ce19c=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/06af6769-999b-4aa9-b1ec-4d3f063eb998=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/84eb9eb3-3ff4-4c47-9bb4-daa685ff7290=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5f3a394a-0f9e-410b-ab9f-fd6989052588=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/42c83d12-35b8-4999-ace6-c51a9c15f5da=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/53e12a60-c891-4182-a8c6-a04cac8f7e9c=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/39ef8da1-1fd3-4de7-a150-1962ccda4194=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/39cb56e1-2dca-4c72-9bb6-ad98e83bd6fe=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/88580d08-3d66-4c48-8678-8d2879687ddc=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5b1e6f1e-51d5-438d-a207-3af761fe960c=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/ad69603f-3ae7-43b0-9449-2f732c8acdfb=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/5514c26b-2d5e-47a3-839f-3c5b98303bc9=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/25c2728e-73eb-4ebe-b2d4-e61708348652=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/0b22e1da-632b-430c-be22-cc0c46ad0a75=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/dfd7e352-76e0-4a24-9294-84b72106d709=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/bea0dc31-8f14-4c54-8097-64f11b0a0f22=-101, /pinot-quickstart/INSTANCES/Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098/MESSAGES/56805ab0-d620-401f-a6de-d2890709151d=-101}\r\nmy-pinot-server-0 server 2021-01-26T22:17:11.909+0000: 116.450: Total time for which application threads were stopped: 0.0134050 seconds, Stopping threads took: 0.0001936 seconds\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767865939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767866668","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767866668","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767866668,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg2NjY2OA==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T22:23:29Z","updated_at":"2021-01-26T22:23:29Z","author_association":"MEMBER","body":"what changed?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767866668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767876403","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767876403","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767876403,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg3NjQwMw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T22:43:54Z","updated_at":"2021-01-26T22:44:33Z","author_association":"NONE","body":"@kishoreg   Nothing Changed it was running for 3 days without a hitch and suddenly keep crashing. I changed the memory from -Xms512M -Xmx4G to -Xms12G -Xmx12G and servers are up . Not sure what happened here..!! Also cannot get hold of coredmp or threaddmp as it is container. I may have to map /opt/pinot to some pvc.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767876403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767878868","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767878868","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767878868,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg3ODg2OA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T22:49:26Z","updated_at":"2021-01-26T22:49:26Z","author_association":"NONE","body":"Anyways all the segments are in corrupted status..!!!  It seems I have to restore the server from backup again..!!!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767878868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767893189","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767893189","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767893189,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg5MzE4OQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T23:18:02Z","updated_at":"2021-01-26T23:18:02Z","author_association":"NONE","body":"I reloaded the segments and the server is back online . Is there any way to speed up the catch up process from the kafka stream?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767893189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767896182","html_url":"https://github.com/apache/pinot/issues/6478#issuecomment-767896182","issue_url":"https://api.github.com/repos/apache/pinot/issues/6478","id":767896182,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzg5NjE4Mg==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T23:25:23Z","updated_at":"2021-01-26T23:25:23Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang will work on adding a scalar function for cast() based on your suggestion offline. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767896182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767904970","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-767904970","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":767904970,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzkwNDk3MA==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T23:47:47Z","updated_at":"2021-01-26T23:47:47Z","author_association":"MEMBER","body":"add more servers and once they catch up, shrink the cluster and rebalance..\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767904970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767928309","html_url":"https://github.com/apache/pinot/issues/6487#issuecomment-767928309","issue_url":"https://api.github.com/repos/apache/pinot/issues/6487","id":767928309,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzkyODMwOQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T00:44:12Z","updated_at":"2021-01-27T00:44:12Z","author_association":"CONTRIBUTOR","body":"Is this mostly for default star-tree where we don't know if a dimension is included?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767928309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767932792","html_url":"https://github.com/apache/pinot/issues/6487#issuecomment-767932792","issue_url":"https://api.github.com/repos/apache/pinot/issues/6487","id":767932792,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzkzMjc5Mg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T00:56:08Z","updated_at":"2021-01-27T00:56:08Z","author_association":"CONTRIBUTOR","body":"Yes, this is a good sign for users to check if the query is fitting for star-tree or not.\r\nThis will also help when we are adding a new star-tree, we can just query to see the rebuild progress","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767932792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767933847","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-767933847","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":767933847,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzkzMzg0Nw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T00:59:04Z","updated_at":"2021-01-27T02:59:29Z","author_association":"NONE","body":"@fx19880617 , Other than adding configs to controller and server I can see a Job spec as well. Is Job spec mandatory? I was expecting controller to push segment directly to s3 and download directly from s3 whenever required without any job. Is it possible to implement S3 backend without Job?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767933847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767937220","html_url":"https://github.com/apache/pinot/pull/6403#issuecomment-767937220","issue_url":"https://api.github.com/repos/apache/pinot/issues/6403","id":767937220,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzkzNzIyMA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T01:08:18Z","updated_at":"2021-01-27T01:08:18Z","author_association":"CONTRIBUTOR","body":"Per the performance concern, can we always parse the String as double? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767937220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767953990","html_url":"https://github.com/apache/pinot/pull/6495#issuecomment-767953990","issue_url":"https://api.github.com/repos/apache/pinot/issues/6495","id":767953990,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzk1Mzk5MA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T01:50:29Z","updated_at":"2021-01-27T01:50:29Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=h1) Report\n> Merging [#6495](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=desc) (2c1e8d5) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `1.56%`.\n> The diff coverage is `59.96%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6495/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6495      +/-   ##\n==========================================\n- Coverage   66.44%   64.88%   -1.57%     \n==========================================\n  Files        1075     1334     +259     \n  Lines       54773    65609   +10836     \n  Branches     8168     9569    +1401     \n==========================================\n+ Hits        36396    42572    +6176     \n- Misses      15700    19992    +4292     \n- Partials     2677     3045     +368     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `64.88% <59.96%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `10.90% <ø> (-51.10%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| ... and [1182 more](https://codecov.io/gh/apache/incubator-pinot/pull/6495/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=footer). Last update [e5bf05b...2c1e8d5](https://codecov.io/gh/apache/incubator-pinot/pull/6495?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/767953990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768113120","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-768113120","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":768113120,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODExMzEyMA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T08:11:21Z","updated_at":"2021-01-27T08:11:21Z","author_association":"NONE","body":"@fx19880617 , I followed the steps and tried to modify JAVA_OPTS to add the se plugin. But it does break kafka. I am seeing the following error. \r\n\r\n [main] {\"code\":500,\"error\":\"org.apache.pinot.plugin.stream.kafka20.KafkaConsumerFactory\"}","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768113120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768184800","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-768184800","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":768184800,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODE4NDgwMA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T10:20:10Z","updated_at":"2021-01-27T10:20:10Z","author_association":"CONTRIBUTOR","body":"> @fx19880617 , I followed the steps and tried to modify JAVA_OPTS to add the se plugin. But it does break kafka. I am seeing the following error.\r\n> \r\n> [main] {\"code\":500,\"error\":\"org.apache.pinot.plugin.stream.kafka20.KafkaConsumerFactory\"}\r\n\r\nCan you check if you set the plugin directory in the JAVA_OPTS? `-Dplugins.dir=/opt/pinot/plugins`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768184800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768186395","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-768186395","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":768186395,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODE4NjM5NQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T10:22:49Z","updated_at":"2021-01-27T10:22:49Z","author_association":"CONTRIBUTOR","body":"> @fx19880617 , Other than adding configs to controller and server I can see a Job spec as well. Is Job spec mandatory? I was expecting controller to push segment directly to s3 and download directly from s3 whenever required without any job. Is it possible to implement S3 backend without Job?\r\n\r\nIf you deploy Pinot minion and enable the CRON scheduler and set the cron expression in table config, then it's possible :)\r\nRef PR: https://github.com/apache/incubator-pinot/pull/6451\r\n\r\nI'm also adding the corresponding documentation for this feature into pinot docs.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768186395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768316478","html_url":"https://github.com/apache/pinot/issues/5590#issuecomment-768316478","issue_url":"https://api.github.com/repos/apache/pinot/issues/5590","id":768316478,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODMxNjQ3OA==","user":{"login":"spaghettifunk","id":1409994,"node_id":"MDQ6VXNlcjE0MDk5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1409994?v=4","gravatar_id":"","url":"https://api.github.com/users/spaghettifunk","html_url":"https://github.com/spaghettifunk","followers_url":"https://api.github.com/users/spaghettifunk/followers","following_url":"https://api.github.com/users/spaghettifunk/following{/other_user}","gists_url":"https://api.github.com/users/spaghettifunk/gists{/gist_id}","starred_url":"https://api.github.com/users/spaghettifunk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spaghettifunk/subscriptions","organizations_url":"https://api.github.com/users/spaghettifunk/orgs","repos_url":"https://api.github.com/users/spaghettifunk/repos","events_url":"https://api.github.com/users/spaghettifunk/events{/privacy}","received_events_url":"https://api.github.com/users/spaghettifunk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T14:19:35Z","updated_at":"2021-01-27T14:19:35Z","author_association":"NONE","body":"I think it would be nice to be able to generate the client once a release is cut. In this way both client and server have the same version. You could use **Github Actions** to do automate the generation. For example, it is sufficient to do `swagger generate client -f ./path/to//swagger.json -a kind -A pinot-sdk` and you have it available. Does it make sense? \r\nMaybe the default generated client is the Java one. While, for other languages the community can maintain themselves by still leveraging `swagger-codegen` or similar.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768316478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768434132","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-768434132","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":768434132,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODQzNDEzMg==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T17:11:08Z","updated_at":"2021-01-27T17:11:08Z","author_association":"NONE","body":"Thanks @kishoreg , The server did not recover. it went to bad state again and Pinot server crashed. I had to do the hard way delete and recreate.  What are the possibilities of server crash in Pino and what steps normally we can take to avoid this? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768434132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768459995","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-768459995","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":768459995,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODQ1OTk5NQ==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T17:49:36Z","updated_at":"2021-01-27T17:49:36Z","author_association":"MEMBER","body":"any logs that you can share. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768459995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768465903","html_url":"https://github.com/apache/pinot/issues/6491#issuecomment-768465903","issue_url":"https://api.github.com/repos/apache/pinot/issues/6491","id":768465903,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODQ2NTkwMw==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T17:59:07Z","updated_at":"2021-01-27T17:59:07Z","author_association":"CONTRIBUTOR","body":"The [Groovy Template Engine documentation](https://docs.groovy-lang.org/docs/next/html/documentation/template-engines.html#_advanced_usage_note) warns about backslashes in text:\r\n\r\n> If you happen to be embedding your template directly in your script (as we did above) you have to be careful about backslash escaping. Because the template string itself will be parsed by Groovy before it is passed to the templating framework, you have to escape any backslashes inside GString expressions or scriptlet 'code' that are entered as part of a Groovy program\r\n\r\nI think an appropriate solution would be to modify `GroovyTemplateUtils.renderTemplate()` to first strip out comment lines (maybe with a boolean parameter to control?) before passing text to the `GROOVY_TEMPLATE_ENGINE`. Or we could try to automatically escape backslashes, but I'd be in favor of removing comments.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768465903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768498727","html_url":"https://github.com/apache/pinot/pull/6403#issuecomment-768498727","issue_url":"https://api.github.com/repos/apache/pinot/issues/6403","id":768498727,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODQ5ODcyNw==","user":{"login":"amrishlal","id":4550395,"node_id":"MDQ6VXNlcjQ1NTAzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4550395?v=4","gravatar_id":"","url":"https://api.github.com/users/amrishlal","html_url":"https://github.com/amrishlal","followers_url":"https://api.github.com/users/amrishlal/followers","following_url":"https://api.github.com/users/amrishlal/following{/other_user}","gists_url":"https://api.github.com/users/amrishlal/gists{/gist_id}","starred_url":"https://api.github.com/users/amrishlal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrishlal/subscriptions","organizations_url":"https://api.github.com/users/amrishlal/orgs","repos_url":"https://api.github.com/users/amrishlal/repos","events_url":"https://api.github.com/users/amrishlal/events{/privacy}","received_events_url":"https://api.github.com/users/amrishlal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T18:53:58Z","updated_at":"2021-01-27T18:53:58Z","author_association":"CONTRIBUTOR","body":"> Per the performance concern, can we always parse the String as double?\r\n\r\nThe main reason why I used BigDecimal was that long to double to long conversion does not give back the original value since both are 64bit. I will look into this a bit more, but it is probably safer to lean in the direction of query correctness as compared to performance.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768498727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768675718","html_url":"https://github.com/apache/pinot/issues/6491#issuecomment-768675718","issue_url":"https://api.github.com/repos/apache/pinot/issues/6491","id":768675718,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY3NTcxOA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T00:46:26Z","updated_at":"2021-01-28T00:46:26Z","author_association":"CONTRIBUTOR","body":"Agreed. Will make the change.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768675718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768768913","html_url":"https://github.com/apache/pinot/issues/6497#issuecomment-768768913","issue_url":"https://api.github.com/repos/apache/pinot/issues/6497","id":768768913,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc2ODkxMw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:16:33Z","updated_at":"2021-01-28T03:16:33Z","author_association":"CONTRIBUTOR","body":"It is still not supported in the latest parquet library, and fyi the title of the linked JIRA is `INT96 to avro not yet implemented error should mention deprecation`, and the latest parquet library just changes the exception message.\r\nAlso, the `INT96` type is already deprecated. I think the only solution would be to regenerate the parquet file without using type `INT96`.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768768913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768788311","html_url":"https://github.com/apache/pinot/issues/6491#issuecomment-768788311","issue_url":"https://api.github.com/repos/apache/pinot/issues/6491","id":768788311,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc4ODMxMQ==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T04:17:43Z","updated_at":"2021-01-28T04:17:43Z","author_association":"CONTRIBUTOR","body":"I just noticed some yaml files have a comment at the end of a line, so the stripping should be from `#` to end of line, not complete lines.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768788311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768884649","html_url":"https://github.com/apache/pinot/pull/6499#issuecomment-768884649","issue_url":"https://api.github.com/repos/apache/pinot/issues/6499","id":768884649,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg4NDY0OQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T08:24:42Z","updated_at":"2021-01-28T08:24:42Z","author_association":"CONTRIBUTOR","body":"@chenboat @mayankshriv Please help check this won't break your metrics system.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/768884649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769222122","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-769222122","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":769222122,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTIyMjEyMg==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T16:53:20Z","updated_at":"2021-01-28T17:04:59Z","author_association":"NONE","body":"@kishoreg  , it crashed again and Pino server stopped consuming messaging and query started to give incorrect results. The errors I can see are below\r\n\r\n```\r\n\r\nmy-pinot-broker-0 broker 2021/01/28 14:15:07.151 ERROR [QueryRouter] [jersey-server-managed-async-executor-3] Caught exception while sending request 549 to server: my-pinot-server-0_R, marking query failed\r\nmy-pinot-broker-0 broker 2021/01/28 14:15:10.917 ERROR [QueryRouter] [jersey-server-managed-async-executor-3] Caught exception while sending request 550 to server: my-pinot-server-0_R, marking query failed\r\nmy-pinot-broker-0 broker 2021-01-28T14:15:10.918+0000: 64927.313: Total time for which application threads were stopped: 0.0000965 seconds, Stopping threads too2021/01/28 14:15:11.008 ERROR [QueryRouter] [jersey-server-managed-async-executor-3] Caught exception while sending request 551 to server: my-pinot-server-0_R, marking query failed\r\nmy-pinot-broker-0 broker 2021/01/28 14:15:12.104 ERROR [DataTableHandler] [nioEventLoopGroup-2-6] Caught exception while handling response from server: my-pinot-server-1_R\r\nmy-pinot-broker-0 broker 2021/01/28 14:15:12.106 ERROR [DataTableHandler] [nioEventLoopGroup-2-6] Channel for server: my-pinot-server-1_R is now inactive, marking server down\r\nmy-pinot-broker-0 broker 2021/01/28 14:20:30.912 ERROR [DataTableHandler] [nioEventLoopGroup-2-4] Channel for server: my-pinot-server-0_R is now inactive, marking server down\r\n```\r\n\r\n ````\r\nStopping threads took: 0.0000264 seconds\r\n2021-01-28T14:29:13.291+0000: 2021/01/28 14:29:13.301 WARN [SegmentColumnarIndexCreator] [Thread-7] Caught exception java.io.IOException: No space left on device while refreshing realtime lucene reader for segment: sblog__0__515__20210128T1354Z\r\nsb-pinot-controller-0sb-pinot-server-0 server 21.588: Total time for which application threads were stopped: 0.0003119 seconds, Stopping threads took: 0.0001239 seconds\r\n\r\n ````\r\n \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769222122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769229939","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-769229939","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":769229939,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTIyOTkzOQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T17:04:49Z","updated_at":"2021-01-28T17:04:49Z","author_association":"NONE","body":"@kishoreg what could be the possible reasons the space is getting filled when I try to catch up messages from the stream? This will  only happen when I recreate the table and try to catch up messages.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769229939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769321248","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-769321248","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":769321248,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMyMTI0OA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:31:25Z","updated_at":"2021-01-28T19:31:25Z","author_association":"CONTRIBUTOR","body":"Storage will be filled up naturally as the servers consume more records, and flush them to the disk. Can you please check the disk space left in your data directory?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769321248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769328717","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-769328717","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":769328717,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMyODcxNw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:42:31Z","updated_at":"2021-01-28T19:42:31Z","author_association":"NONE","body":"@Jackie-Jiang Thanks it was 100% . I deleted some data from stream . But not sure why a full stream catch up takes more disk space that normal realtime consumption. From my understanding data size for three days retention on kafka should remain same whether we consume  in Pinot at one shot or consume in three long days. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769328717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769332486","html_url":"https://github.com/apache/pinot/issues/6449#issuecomment-769332486","issue_url":"https://api.github.com/repos/apache/pinot/issues/6449","id":769332486,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMzMjQ4Ng==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:47:27Z","updated_at":"2021-01-29T21:03:16Z","author_association":"NONE","body":"Thanks @fx19880617 , will try the CRON minion and see. Also as @subourbonite mentioned I mapped the stateful set for controller to use single pvc mount. So controller data is shared across all controller pods. Also I mapped the controller to use an EFS with no restriction in data size. Now my question is\r\n\r\nAs the controller pvc have a copy of all segments will it suffice as a backup if one of the Pinot Server SSD fails? If one of the Pinot Server SSD fails and if I replace the disk will the server catches up the lost segments from controller EFS automatically?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769332486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769367089","html_url":"https://github.com/apache/pinot/pull/6499#issuecomment-769367089","issue_url":"https://api.github.com/repos/apache/pinot/issues/6499","id":769367089,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM2NzA4OQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T20:31:01Z","updated_at":"2021-01-28T20:31:01Z","author_association":"CONTRIBUTOR","body":"@yupeng9 please check your JMX metrics query code to see if this change will break your metrics reporting.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769367089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769367727","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-769367727","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":769367727,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM2NzcyNw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T20:31:52Z","updated_at":"2021-01-28T20:31:52Z","author_association":"CONTRIBUTOR","body":"While consuming, Pinot allocates some mmap'ed files as the off-heap memory buffer. If the consumption rate is very high, the file size could be larger because we will have more records in one segment. I would recommend giving more room for the storage, e.g. keep the usage under 50%","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769367727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769388877","html_url":"https://github.com/apache/pinot/pull/6499#issuecomment-769388877","issue_url":"https://api.github.com/repos/apache/pinot/issues/6499","id":769388877,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM4ODg3Nw==","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T20:59:28Z","updated_at":"2021-01-28T20:59:28Z","author_association":"CONTRIBUTOR","body":"Thanks @fx19880617 for the FYI","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769388877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769453155","html_url":"https://github.com/apache/pinot/pull/6502#issuecomment-769453155","issue_url":"https://api.github.com/repos/apache/pinot/issues/6502","id":769453155,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQ1MzE1NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T22:54:59Z","updated_at":"2021-01-29T07:45:36Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=h1) Report\n> Merging [#6502](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=desc) (4b9d9a8) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.45%`.\n> The diff coverage is `41.96%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6502/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6502       +/-   ##\n===========================================\n- Coverage   66.44%   43.98%   -22.46%     \n===========================================\n  Files        1075     1334      +259     \n  Lines       54773    65798    +11025     \n  Branches     8168     9605     +1437     \n===========================================\n- Hits        36396    28944     -7452     \n- Misses      15700    34416    +18716     \n+ Partials     2677     2438      -239     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.98% <41.96%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1337 more](https://codecov.io/gh/apache/incubator-pinot/pull/6502/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=footer). Last update [cf35e6e...4b9d9a8](https://codecov.io/gh/apache/incubator-pinot/pull/6502?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769453155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769538199","html_url":"https://github.com/apache/pinot/pull/6503#issuecomment-769538199","issue_url":"https://api.github.com/repos/apache/pinot/issues/6503","id":769538199,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTUzODE5OQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T02:50:17Z","updated_at":"2021-01-29T03:49:37Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=h1) Report\n> Merging [#6503](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=desc) (5fe66f7) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.54%`.\n> The diff coverage is `42.05%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6503/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6503       +/-   ##\n===========================================\n- Coverage   66.44%   43.90%   -22.55%     \n===========================================\n  Files        1075     1334      +259     \n  Lines       54773    65650    +10877     \n  Branches     8168     9575     +1407     \n===========================================\n- Hits        36396    28826     -7570     \n- Misses      15700    34413    +18713     \n+ Partials     2677     2411      -266     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.90% <42.05%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1330 more](https://codecov.io/gh/apache/incubator-pinot/pull/6503/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=footer). Last update [cf35e6e...5fe66f7](https://codecov.io/gh/apache/incubator-pinot/pull/6503?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769538199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769539620","html_url":"https://github.com/apache/pinot/pull/6494#issuecomment-769539620","issue_url":"https://api.github.com/repos/apache/pinot/issues/6494","id":769539620,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTUzOTYyMA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T02:54:48Z","updated_at":"2021-01-29T04:02:03Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=h1) Report\n> Merging [#6494](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=desc) (8a032b6) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.45%`.\n> The diff coverage is `42.05%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6494/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6494       +/-   ##\n===========================================\n- Coverage   66.44%   43.99%   -22.46%     \n===========================================\n  Files        1075     1334      +259     \n  Lines       54773    65788    +11015     \n  Branches     8168     9605     +1437     \n===========================================\n- Hits        36396    28944     -7452     \n- Misses      15700    34399    +18699     \n+ Partials     2677     2445      -232     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.99% <42.05%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1331 more](https://codecov.io/gh/apache/incubator-pinot/pull/6494/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=footer). Last update [bacaed2...8a032b6](https://codecov.io/gh/apache/incubator-pinot/pull/6494?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769539620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769948460","html_url":"https://github.com/apache/pinot/issues/6471#issuecomment-769948460","issue_url":"https://api.github.com/repos/apache/pinot/issues/6471","id":769948460,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTk0ODQ2MA==","user":{"login":"mangrrua","id":17813993,"node_id":"MDQ6VXNlcjE3ODEzOTkz","avatar_url":"https://avatars.githubusercontent.com/u/17813993?v=4","gravatar_id":"","url":"https://api.github.com/users/mangrrua","html_url":"https://github.com/mangrrua","followers_url":"https://api.github.com/users/mangrrua/followers","following_url":"https://api.github.com/users/mangrrua/following{/other_user}","gists_url":"https://api.github.com/users/mangrrua/gists{/gist_id}","starred_url":"https://api.github.com/users/mangrrua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mangrrua/subscriptions","organizations_url":"https://api.github.com/users/mangrrua/orgs","repos_url":"https://api.github.com/users/mangrrua/repos","events_url":"https://api.github.com/users/mangrrua/events{/privacy}","received_events_url":"https://api.github.com/users/mangrrua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T17:41:58Z","updated_at":"2021-01-29T17:41:58Z","author_association":"CONTRIBUTOR","body":"@fx19880617 Doesn't pinot sql support `like` keyword? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769948460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769981635","html_url":"https://github.com/apache/pinot/issues/6491#issuecomment-769981635","issue_url":"https://api.github.com/repos/apache/pinot/issues/6491","id":769981635,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTk4MTYzNQ==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T18:46:26Z","updated_at":"2021-01-29T18:46:26Z","author_association":"CONTRIBUTOR","body":"Hi @fx19880617 - thanks for fixing so quickly!\r\n\r\nI am curious, though - since the template engine is inspecting text (even comments), could a poorly-formed substitution pattern in a comment also trigger an issue?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/769981635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770075892","html_url":"https://github.com/apache/pinot/issues/6492#issuecomment-770075892","issue_url":"https://api.github.com/repos/apache/pinot/issues/6492","id":770075892,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDA3NTg5Mg==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T22:06:28Z","updated_at":"2021-01-29T22:06:28Z","author_association":"CONTRIBUTOR","body":"While digging into the code, I found a few more issues that I'm fixing in the same PR:\r\n\r\n- Mapper was creating temp plugin directory in pwd (probably only an issue during tests)\r\n- Mapper wasn't registering Pinot file systems before starting segment generation.\r\n- Mapper was incorrectly using the `overwriteOutput` flag when writing segments to staging dir.\r\n- Job runner wasn't clearing out staging directory at start of execution (partial dir could be left around after a failed run, which would cause the next attempt to fail due to the output sub-dir existing)\r\n- Job runner wasn't adding the scheme to input file paths before writing out to the (temp) Hadoop input files.\r\n- Job runner was setting the job jar class to itself, but this class is inside of the Hadoop batch ingest plugin, which meant the \"pinot-all\" jar wasn't being distributed to Hadoop slaves.\r\n- Job runner wasn't disabling speculative execution, which could cause the job to fail due to two mappers writing to the same output file in the staging directory.\r\n- Job runner was using (very slow) copy command when updating the real output directory with the generated segments from the staging directory, versus the move command. It also wasn't honoring the `overwriteOutput` flag during the copy.\r\n- Job runner was adding the plugin tarball as an archive, but that meant the Hadoop distributed cache system was trying to unpack it, while the mapper code was also trying to expand it. I changed it to just add the tarball as a file, and left the mapper code as-is, but might be cleaner to leverage Hadoop's code.\r\n\r\nI also added a test for standalone batch ingestion, as that's now sharing some code with the Hadoop batch ingestion, and it didn't seem to have any current test.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770075892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770088861","html_url":"https://github.com/apache/pinot/pull/6506#issuecomment-770088861","issue_url":"https://api.github.com/repos/apache/pinot/issues/6506","id":770088861,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDA4ODg2MQ==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T22:42:52Z","updated_at":"2021-01-29T22:42:52Z","author_association":"CONTRIBUTOR","body":"Fix for #6492","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770088861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770105131","html_url":"https://github.com/apache/pinot/pull/6506#issuecomment-770105131","issue_url":"https://api.github.com/repos/apache/pinot/issues/6506","id":770105131,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDEwNTEzMQ==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T23:34:46Z","updated_at":"2021-01-29T23:34:46Z","author_association":"CONTRIBUTOR","body":"Hi @fx19880617 - I see that the Hadoop batch ingest unit test is failing, though it passes on my Mac when running `mvn clean test` from inside the `pinot-plugins/pinot-batch-ingestion/pinot-batch-ingestion-hadoop/` directory. What's the best way to view the build server test logs?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770105131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770111560","html_url":"https://github.com/apache/pinot/pull/6440#issuecomment-770111560","issue_url":"https://api.github.com/repos/apache/pinot/issues/6440","id":770111560,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDExMTU2MA==","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-29T23:58:26Z","updated_at":"2021-01-29T23:58:26Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu @daniellavoie @kishoreg I proposed a declarative approach for access control in a new RP https://github.com/apache/incubator-pinot/pull/6507\r\nI tried to address all comments here. I'm closing this one.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770111560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770116899","html_url":"https://github.com/apache/pinot/pull/6507#issuecomment-770116899","issue_url":"https://api.github.com/repos/apache/pinot/issues/6507","id":770116899,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDExNjg5OQ==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T00:19:55Z","updated_at":"2021-01-30T00:19:55Z","author_association":"CONTRIBUTOR","body":"Hi Sajjad, great timing! I was drawing up ways to introduce generic request authentication and expand on the existing request authorization in pinot. Looks like you literally just built part of this - would you mind sharing a bit more about the specific use-case you're looking to address?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770116899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770121598","html_url":"https://github.com/apache/pinot/pull/6507#issuecomment-770121598","issue_url":"https://api.github.com/repos/apache/pinot/issues/6507","id":770121598,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDEyMTU5OA==","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T00:39:24Z","updated_at":"2021-01-30T00:39:24Z","author_association":"CONTRIBUTOR","body":"> Hi Sajjad, great timing! I was drawing up ways to introduce generic request authentication and expand on the existing request authorization in pinot. Looks like you literally just built part of this - would you mind sharing a bit more about the specific use-case you're looking to address?\r\n\r\nBasically the changes introduced in this PR prevents a malicious user to change the state of the system. It also prevents mistakes from normal users by constraining them to only modify the tables they own.\r\nImplementation of `AccessControl` interface can define ACL, access control list, for each table. Basically owners (and also admins) will be added to the ACL of each table. During authentication, `AccessControll` checks if the requester's is indeed listed as owner of that table/resource. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770121598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770123263","html_url":"https://github.com/apache/pinot/pull/6507#issuecomment-770123263","issue_url":"https://api.github.com/repos/apache/pinot/issues/6507","id":770123263,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDEyMzI2Mw==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T00:47:35Z","updated_at":"2021-01-30T00:47:35Z","author_association":"CONTRIBUTOR","body":"Ok great. I wonder if it's worthwhile to expand this to the existing authorization in broker and server as well. Then again, they shouldn't allow changes / be read-only anyways.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770123263/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770142858","html_url":"https://github.com/apache/pinot/pull/6508#issuecomment-770142858","issue_url":"https://api.github.com/repos/apache/pinot/issues/6508","id":770142858,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDE0Mjg1OA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T02:43:34Z","updated_at":"2021-01-30T02:56:06Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=h1) Report\n> Merging [#6508](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=desc) (6d4381a) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `6.60%`.\n> The diff coverage is `78.87%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6508/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6508      +/-   ##\n==========================================\n+ Coverage   66.44%   73.04%   +6.60%     \n==========================================\n  Files        1075     1334     +259     \n  Lines       54773    65798   +11025     \n  Branches     8168     9605    +1437     \n==========================================\n+ Hits        36396    48065   +11669     \n+ Misses      15700    14570    -1130     \n- Partials     2677     3163     +486     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.70% <41.96%> (?)` | |\n| unittests | `64.84% <59.96%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `73.33% <ø> (+16.19%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <ø> (-4.40%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `28.00% <ø> (-6.29%)` | :arrow_down: |\n| ... and [1147 more](https://codecov.io/gh/apache/incubator-pinot/pull/6508/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=footer). Last update [1ae53fe...6d4381a](https://codecov.io/gh/apache/incubator-pinot/pull/6508?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770142858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770146194","html_url":"https://github.com/apache/pinot/pull/6506#issuecomment-770146194","issue_url":"https://api.github.com/repos/apache/pinot/issues/6506","id":770146194,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDE0NjE5NA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T03:09:44Z","updated_at":"2021-01-30T03:09:44Z","author_association":"CONTRIBUTOR","body":"> Hi @fx19880617 - I see that the Hadoop batch ingest unit test is failing, though it passes on my Mac when running `mvn clean test` from inside the `pinot-plugins/pinot-batch-ingestion/pinot-batch-ingestion-hadoop/` directory. What's the best way to view the build server test logs?\r\n\r\nwill you be able to see the logs: https://github.com/apache/incubator-pinot/pull/6506/checks?check_run_id=1795216286\r\n\r\nSeems that it's trying to copy a directory not a file?\r\n```\r\n[INFO] Running org.apache.pinot.plugin.ingestion.batch.hadoop.HadoopSegmentGenerationJobRunnerTest\r\nError:  Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.752 s <<< FAILURE! - in org.apache.pinot.plugin.ingestion.batch.hadoop.HadoopSegmentGenerationJobRunnerTest\r\nError:  org.apache.pinot.plugin.ingestion.batch.hadoop.HadoopSegmentGenerationJobRunnerTest.testSegmentGeneration  Time elapsed: 1.415 s  <<< FAILURE!\r\njava.io.IOException: Source '/home/runner/work/incubator-pinot/incubator-pinot/pinot-plugins/pinot-input-format/pinot-csv/target/classes' exists but is a directory\r\n\tat org.apache.commons.io.FileUtils.copyFile(FileUtils.java:1077)\r\n\tat org.apache.commons.io.FileUtils.copyFile(FileUtils.java:1038)\r\n\tat org.apache.pinot.plugin.ingestion.batch.hadoop.HadoopSegmentGenerationJobRunnerTest.testSegmentGeneration(HadoopSegmentGenerationJobRunnerTest.java:98)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:108)\r\n\tat org.testng.internal.Invoker.invokeMethod(Invoker.java:661)\r\n\tat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:869)\r\n\tat org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1193)\r\n\tat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:126)\r\n\tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)\r\n\tat org.testng.TestRunner.privateRun(TestRunner.java:744)\r\n\tat org.testng.TestRunner.run(TestRunner.java:602)\r\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:380)\r\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:375)\r\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:340)\r\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:289)\r\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\r\n\tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)\r\n\tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1301)\r\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1226)\r\n\tat org.testng.TestNG.runSuites(TestNG.java:1144)\r\n\tat org.testng.TestNG.run(TestNG.java:1115)\r\n\tat org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:136)\r\n\tat org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeSingleClass(TestNGDirectoryTestSuite.java:112)\r\n\tat org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:99)\r\n\tat org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:145)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:428)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:562)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:548)\r\n\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\nError:  Failures: \r\nError:    HadoopSegmentGenerationJobRunnerTest.testSegmentGeneration:98 » IO Source '/ho...\r\n[INFO] \r\nError:  Tests run: 1, Failures: 1, Errors: 0, Skipped: 0\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770146194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770223264","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-770223264","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":770223264,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDIyMzI2NA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T14:50:35Z","updated_at":"2021-01-30T14:51:20Z","author_association":"NONE","body":"Thanks for the suggestion @Jackie-Jiang , I will allocate more space. Also wondering whether it is possible to set the segment time based on the time field from kafka? So that segments will expire based on kafka time rather than Pinot segment created time. My retention is 3 days , the issue happens when I have to catch up entire 3 days messages at once and all the caught up segment  dates will have same date and will only expire after 3 days and they consume lot of disk space unnecessarily.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770223264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770243816","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-770243816","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":770243816,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDI0MzgxNg==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T16:58:46Z","updated_at":"2021-01-30T16:58:46Z","author_association":"CONTRIBUTOR","body":"Sync'd up with @pabrahamusa . \r\n\r\nThere was a bug in realtime text index. Had provided a custom build to Matt with fix and more logging. The lag issue was fixed with the build. Matt is doing some more testing. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770243816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770247494","html_url":"https://github.com/apache/pinot/issues/6473#issuecomment-770247494","issue_url":"https://api.github.com/repos/apache/pinot/issues/6473","id":770247494,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDI0NzQ5NA==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T17:26:21Z","updated_at":"2021-01-30T17:27:02Z","author_association":"CONTRIBUTOR","body":"What's the size of the forward index for the multi value column? Dctionary IDs in the forward index are bit encoded. Looks like it's very high cardinality and and must be having several millions of rows per segment to result in reasonable size overhead. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770247494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770256463","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-770256463","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":770256463,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDI1NjQ2Mw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T18:25:03Z","updated_at":"2021-01-30T18:25:03Z","author_association":"CONTRIBUTOR","body":"@siddharthteotia can you briefly describe the bug? I thought we had handled text index from within mutable segment? \r\nIn any case, we should add a test case for it.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770256463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770439684","html_url":"https://github.com/apache/pinot/pull/6506#issuecomment-770439684","issue_url":"https://api.github.com/repos/apache/pinot/issues/6506","id":770439684,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDQzOTY4NA==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-31T19:49:32Z","updated_at":"2021-01-31T19:49:32Z","author_association":"CONTRIBUTOR","body":"Hi @fx19880617 - it was a weird issue. Building locally, I would get a URI to a Pinot plugin jar file with:\r\n\r\n``` java\r\nSomePintoClassInPluginJar.class.getProtectionDomain().getCodeSource().getLocation().toURI()\r\n```\r\n\r\nBut on the build server, this returns a URI to the directory containing the `SomePintoClassInPluginJar.class` file. I've changed the code to use a class from some dependency jar that's not part of Pinot (as we're just using it to test creating a tarball of files, and adding a dependency file to the distributed cache). So all checks seem to be passing now.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770439684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770475961","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-770475961","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":770475961,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDQ3NTk2MQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-31T23:59:17Z","updated_at":"2021-02-01T00:01:41Z","author_association":"NONE","body":"@siddharthteotia Afraid to say that further testing revealed the issue is not fully fixed. The lag time is ~20 - 40 seconds when the segment row count is 100000. However, when I bumped it to 900000 the lag time steeped up to ~7 - 9 minutes..! .  Please note that inverted index is always giving stable results ~10 secs no matter the row count of segments. It will be great if we fix the bug in a way that text index also behaves the same as inverted index.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770475961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770522403","html_url":"https://github.com/apache/pinot/issues/6509#issuecomment-770522403","issue_url":"https://api.github.com/repos/apache/pinot/issues/6509","id":770522403,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDUyMjQwMw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T02:31:44Z","updated_at":"2021-02-01T02:31:44Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang ^^","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770522403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770530393","html_url":"https://github.com/apache/pinot/pull/6506#issuecomment-770530393","issue_url":"https://api.github.com/repos/apache/pinot/issues/6506","id":770530393,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDUzMDM5Mw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T02:58:27Z","updated_at":"2021-02-01T02:58:27Z","author_association":"CONTRIBUTOR","body":"> Hi @fx19880617 - it was a weird issue. Building locally, I would get a URI to a Pinot plugin jar file with:\r\n> \r\n> ```java\r\n> SomePintoClassInPluginJar.class.getProtectionDomain().getCodeSource().getLocation().toURI()\r\n> ```\r\n> \r\n> But on the build server, this returns a URI to the directory containing the `SomePintoClassInPluginJar.class` file. I've changed the code to use a class from some dependency jar that's not part of Pinot (as we're just using it to test creating a tarball of files, and adding a dependency file to the distributed cache). So all checks seem to be passing now.\r\n\r\nI think that's fine. We can just test packaging the jar and ensure the unpacked jar is the same.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770530393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770535834","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-770535834","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":770535834,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDUzNTgzNA==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T03:16:57Z","updated_at":"2021-02-01T03:17:21Z","author_association":"CONTRIBUTOR","body":"We can go through the logs tomorrow based on the new build that I gave with additional logging and debug further. I thought you wanted to reduce the lag from 3 mins to 30secs or so which the new build has done.\r\n\r\nAlso, your comparison is not fair. If your functionality can be achieved with inverted index, then text index should not be used at all. Inverted index should always be the first choice..\r\n\r\nBut on the log column in your schema, you can't really use inverted index for the kind of search you want to perform.\r\n\r\nSecondly, arbitrarily increasing the number of rows in consuming segment isn't a good idea either. If 100k is giving the optimal performance, my suggestion would be to stick with it. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770535834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770727546","html_url":"https://github.com/apache/pinot/issues/5694#issuecomment-770727546","issue_url":"https://api.github.com/repos/apache/pinot/issues/5694","id":770727546,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDcyNzU0Ng==","user":{"login":"ayush-bajaj","id":29439021,"node_id":"MDQ6VXNlcjI5NDM5MDIx","avatar_url":"https://avatars.githubusercontent.com/u/29439021?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-bajaj","html_url":"https://github.com/ayush-bajaj","followers_url":"https://api.github.com/users/ayush-bajaj/followers","following_url":"https://api.github.com/users/ayush-bajaj/following{/other_user}","gists_url":"https://api.github.com/users/ayush-bajaj/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-bajaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-bajaj/subscriptions","organizations_url":"https://api.github.com/users/ayush-bajaj/orgs","repos_url":"https://api.github.com/users/ayush-bajaj/repos","events_url":"https://api.github.com/users/ayush-bajaj/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-bajaj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T09:52:22Z","updated_at":"2021-02-01T09:52:22Z","author_association":"CONTRIBUTOR","body":"hey @jackjlli, I've responded to one of your comments. can you please take a look whenever you get a chance to.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770727546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770946372","html_url":"https://github.com/apache/pinot/issues/6431#issuecomment-770946372","issue_url":"https://api.github.com/repos/apache/pinot/issues/6431","id":770946372,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDk0NjM3Mg==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T15:37:09Z","updated_at":"2021-02-01T15:37:09Z","author_association":"NONE","body":"@siddharthteotia, we can go through this and I am sure we can get this fixed. Also the fix you provided last week is working as expected for ~100K rows and thanks a lot for that. \r\n\r\nFrom my preliminary testing query search performance appears same for both text index and inverted index. it is just the NRT lag that have the diff.\r\n\r\nThe queries I tried with inverted index is with term query or exact match  i.e \r\n```\r\nselect * from mytable  where attr_one='value1' and attr_two = 'value2'  order by timemillis desc\r\n```\r\nUnfortunately I cannot use this inverted index search as my requirement is to make a proper text search on a column. As I am migrating from Elastic Search I can use the Lucene index regex patterns supported by pinot text index which makes things easier for me. \r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770946372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770995816","html_url":"https://github.com/apache/pinot/pull/6479#issuecomment-770995816","issue_url":"https://api.github.com/repos/apache/pinot/issues/6479","id":770995816,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MDk5NTgxNg==","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T16:48:36Z","updated_at":"2021-02-01T16:48:36Z","author_association":"CONTRIBUTOR","body":"Thanks for the details @jackjlli, could you also is IntermediateSegment better than existing MutableSegment? For example, you could stream input data to MutableSegment and flush it as needed. This also solves multiple problems:\r\n- Common code base for offline and RT segment generation (at least for the streaming part).\r\n- Sorting can now be done for offline within SegmentGeneration, instead of having users to explicitly do so.\r\n- Auto segment sizing that happens in RT will can also be done with offline now.\r\n\r\nThoughts @jackjlli @Jackie-Jiang?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/770995816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771006968","html_url":"https://github.com/apache/pinot/issues/6509#issuecomment-771006968","issue_url":"https://api.github.com/repos/apache/pinot/issues/6509","id":771006968,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTAwNjk2OA==","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T17:04:44Z","updated_at":"2021-02-01T17:04:44Z","author_association":"CONTRIBUTOR","body":"Tried upgrade to `xerial.larray` latest version (4.2.1) , still not working","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771006968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771020682","html_url":"https://github.com/apache/pinot/pull/6479#issuecomment-771020682","issue_url":"https://api.github.com/repos/apache/pinot/issues/6479","id":771020682,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTAyMDY4Mg==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T17:25:06Z","updated_at":"2021-02-01T17:25:06Z","author_association":"CONTRIBUTOR","body":"> Thanks for the details @jackjlli, could you also is IntermediateSegment better than existing MutableSegment? For example, you could stream input data to MutableSegment and flush it as needed. This also solves multiple problems:\r\n> \r\n> * Common code base for offline and RT segment generation (at least for the streaming part).\r\n> * Sorting can now be done for offline within SegmentGeneration, instead of having users to explicitly do so.\r\n> * Auto segment sizing that happens in RT will can also be done with offline now.\r\n> \r\n> Thoughts @jackjlli @Jackie-Jiang?\r\n\r\nI think this is a good idea to explore, but I suspect memory utilization on the offline side may go up significantly.\r\n\r\nAlso, the auto-segment sizing in realtime is implemented (in the controller) by learning the history of segments already completed. For offline generation, if we can keep a history or some learning mechanism, then it may be possible to implement approximate segment sizing algorithms -- whether we use MutableSegment to build segments or not.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771020682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771067671","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-771067671","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":771067671,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTA2NzY3MQ==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T18:35:48Z","updated_at":"2021-02-01T18:35:48Z","author_association":"CONTRIBUTOR","body":"@pabrahamusa Pinot is using the time column (should be the time field in kafka as well) value to expire the segment, instead of the segment creation time. The segment will still be created, but should be removed once the latest time value is older than the retention.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771067671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]