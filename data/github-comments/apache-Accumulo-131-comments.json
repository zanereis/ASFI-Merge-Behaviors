[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1992658190","html_url":"https://github.com/apache/accumulo/pull/4367#issuecomment-1992658190","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4367","id":1992658190,"node_id":"IC_kwDOACaFSM52xY0O","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-12T22:01:35Z","updated_at":"2024-03-12T22:01:35Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #4354 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1992658190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1994183530","html_url":"https://github.com/apache/accumulo/issues/4256#issuecomment-1994183530","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4256","id":1994183530,"node_id":"IC_kwDOACaFSM523NNq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T11:39:37Z","updated_at":"2024-03-13T11:39:37Z","author_association":"CONTRIBUTOR","body":"Full IT build succeeded. Closing this by merging #4363 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1994183530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1995475831","html_url":"https://github.com/apache/accumulo/issues/4361#issuecomment-1995475831","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4361","id":1995475831,"node_id":"IC_kwDOACaFSM528It3","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T19:22:19Z","updated_at":"2024-03-13T19:22:19Z","author_association":"MEMBER","body":"The changes from #4358, which used Duration in `ReadOnlyTStore.unreserve()`, were causing issues with `MiniAccumuloClusterTest` where it was hanging. 23e17129de0350d5496345c78d7fd86080bb1115 reverted those changes. I think replacing `ReadOnlyTStore.unreserve()` should still be looked into. Need to figure out why it was not working before though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1995475831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1995767112","html_url":"https://github.com/apache/accumulo/issues/4344#issuecomment-1995767112","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4344","id":1995767112,"node_id":"IC_kwDOACaFSM529P1I","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T20:51:00Z","updated_at":"2024-03-13T20:51:00Z","author_association":"CONTRIBUTOR","body":"I can take a look at this\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1995767112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997481281","html_url":"https://github.com/apache/accumulo/issues/4168#issuecomment-1997481281","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4168","id":1997481281,"node_id":"IC_kwDOACaFSM53DyVB","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T13:37:37Z","updated_at":"2024-03-14T13:37:37Z","author_association":"MEMBER","body":"This issue can be closed. Completed by https://github.com/apache/accumulo/pull/4350","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997481281/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997610329","html_url":"https://github.com/apache/accumulo/issues/4219#issuecomment-1997610329","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4219","id":1997610329,"node_id":"IC_kwDOACaFSM53ER1Z","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T14:38:24Z","updated_at":"2024-03-14T14:38:24Z","author_association":"CONTRIBUTOR","body":"When I merged main into elasticity in commit 9550da7c838994f9f6e9547819566b01e4b1dc6e I omitted the changes from 05c2f45042ee91a5fe04702caa77ab19f78c0f9a / #4362 because it would have been a completely different implementation in elasticity and I did not want to reimplement it in a merge commit.  So reopening this issue because the work still need to be done in elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997610329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997783749","html_url":"https://github.com/apache/accumulo/issues/4361#issuecomment-1997783749","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4361","id":1997783749,"node_id":"IC_kwDOACaFSM53E8LF","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T15:54:57Z","updated_at":"2024-03-14T15:54:57Z","author_association":"MEMBER","body":"> In #4364 I made some changes to Manager to use Duration and the new NanoTime type. While working on that realized that AccumuloConfiguration.getTimeInMillis() could be a candidate for switching to Duration. Or we could introduce a new AccumuloConfiguration.getDuration() method.\r\n\r\nThis seems like a good idea so I started looking into it and realized that all of the places that use this method expect it to be in millis so they use it as such. Initially, we would just be converting from Duration back to millis but I guess that is okay and is the first step to converting things. This made me realize that there are probably a ton of places that could benefit from a conversion to `Duration` but it would be a big undertaking due to all the places we use millis (or other units) currently.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997783749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997830067","html_url":"https://github.com/apache/accumulo/pull/4371#issuecomment-1997830067","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4371","id":1997830067,"node_id":"IC_kwDOACaFSM53FHez","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T16:16:51Z","updated_at":"2024-03-14T16:16:51Z","author_association":"CONTRIBUTOR","body":"I confirmed that running -Psunny with these changes passes cleanly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1997830067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1998031816","html_url":"https://github.com/apache/accumulo/pull/4369#issuecomment-1998031816","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4369","id":1998031816,"node_id":"IC_kwDOACaFSM53F4vI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T18:00:26Z","updated_at":"2024-03-14T18:00:26Z","author_association":"CONTRIBUTOR","body":"Closing this, it did not improve build times.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1998031816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1998103428","html_url":"https://github.com/apache/accumulo/pull/4371#issuecomment-1998103428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4371","id":1998103428,"node_id":"IC_kwDOACaFSM53GKOE","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T18:46:33Z","updated_at":"2024-03-14T18:46:33Z","author_association":"CONTRIBUTOR","body":"I've looked through the changes and they look okay - still trying to workout if the test issues that lead to the revert can be duplicated and assigned a reason.  While these changes do not fail, the previous iteration seemed to have a reproducible issue that failed for multiple people.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1998103428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999737675","html_url":"https://github.com/apache/accumulo/pull/4371#issuecomment-1999737675","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4371","id":1999737675,"node_id":"IC_kwDOACaFSM53MZNL","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T14:02:54Z","updated_at":"2024-03-15T14:02:54Z","author_association":"CONTRIBUTOR","body":"> I've looked through the changes and they look okay - still trying to workout if the test issues that lead to the revert can be duplicated and assigned a reason.\r\n\r\nI also took a quick look at the older commit and could not find what the problem was.  I suspect it some time unit conversion issue where the code does something like call sleep with a nanosecond value which basically asking the code sleep forever.  However I could not find any issue like that when looking at the change.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999737675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999737894","html_url":"https://github.com/apache/accumulo/issues/4378#issuecomment-1999737894","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4378","id":1999737894,"node_id":"IC_kwDOACaFSM53MZQm","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T14:03:00Z","updated_at":"2024-03-15T14:03:00Z","author_association":"MEMBER","body":"I will create a PR for this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999737894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999832823","html_url":"https://github.com/apache/accumulo/issues/4376#issuecomment-1999832823","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4376","id":1999832823,"node_id":"IC_kwDOACaFSM53Mwb3","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T14:50:44Z","updated_at":"2024-03-15T14:50:44Z","author_association":"CONTRIBUTOR","body":"@keith-turner and I discussed this today and came up with a plan to create a prototype test Ample that can be used to run tests against a different table that is similar to how the latest Fate changes added tests to run against a different Fate instance and table than the system tablet (#4049, #4202, etc)\r\n\r\nThe goal would be to mostly use the real Ample code but to add in some points (maybe some protected methods) to allow customizing behavior and testing real code but against a different table than actual metadata. Using the real metadata table is problematic since when the mini cluster is running it writes real data and interferes with the tests and what is expected. Using a test table allows us to crate/drop and do whatever we need to test algorithms without interfering.\r\n\r\nWe are thinking something like:\r\n\r\n```java\r\nAmple ample = TestAmple.create(Map.of(DataLevel.USER, \"mytable\"))\r\n\r\n\r\n// use ample to setup expected data prior to test\r\n\r\nample.mutateTablets()...\r\n\r\n\r\n// call metadata algorithm lke split w/ ample\r\n\r\nsplit(ample, splitData)\r\n\r\n\r\n// verify after state using test ample\r\n\r\nample.readTablets()\r\n```\r\n\r\nI will start working on a prototype and if I get something usable can open up a draft PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999832823/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999883939","html_url":"https://github.com/apache/accumulo/issues/4376#issuecomment-1999883939","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4376","id":1999883939,"node_id":"IC_kwDOACaFSM53M86j","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T15:14:58Z","updated_at":"2024-03-15T15:41:32Z","author_association":"CONTRIBUTOR","body":"> @keith-turner and I discussed this today and came up with a plan to create a prototype test Ample that can be used to run tests against a different table that is similar to how the latest Fate changes added tests to run against a different Fate instance and table than the system tablet (https://github.com/apache/accumulo/pull/4049, https://github.com/apache/accumulo/pull/4202, etc)\r\n\r\nThis solves a more general problem than what was described initially in the issue.  We think this more general solution can  solve the initial problem that was described and more.  The elasicity branch stores much more state in the metadata table and being able to more comprehensively test the algorithms that modify this state stored in the metadata table will be huge improvement for verifying the correctness of the elasticity changes.\r\n\r\nHoping the proposed design can improve existing tests like #4321, #4323, and #4352 and also make it possible to test the metadata algorithms for compaction, bulk import, split, merge, tablet location update, minor compaction, etc more comprehensively.  Without something like this it would be hard to get full coverage  for edge case for all of these metadata algorithms.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1999883939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000100064","html_url":"https://github.com/apache/accumulo/pull/4383#issuecomment-2000100064","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4383","id":2000100064,"node_id":"IC_kwDOACaFSM53Nxrg","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T17:14:10Z","updated_at":"2024-03-15T17:14:10Z","author_association":"CONTRIBUTOR","body":"Are the test changes in #4382 not added here because other code changes in elasticity prevent that?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000100064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000104041","html_url":"https://github.com/apache/accumulo/pull/4383#issuecomment-2000104041","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4383","id":2000104041,"node_id":"IC_kwDOACaFSM53Nypp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T17:16:35Z","updated_at":"2024-03-15T17:16:35Z","author_association":"CONTRIBUTOR","body":"> Are the test changes in #4382 not added here because other code changes in elasticity prevent that?\r\n\r\nI didn't consider backporting those changes. Let me see what happens if I do that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000104041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000107651","html_url":"https://github.com/apache/accumulo/pull/4383#issuecomment-2000107651","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4383","id":2000107651,"node_id":"IC_kwDOACaFSM53NziD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T17:18:50Z","updated_at":"2024-03-15T17:18:50Z","author_association":"CONTRIBUTOR","body":"Property.COMPACTOR_CANCEL_CHECK_INTERVAL doesn't exist in 2.1. It would require backporting more changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000107651/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000154230","html_url":"https://github.com/apache/accumulo/pull/4370#issuecomment-2000154230","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4370","id":2000154230,"node_id":"IC_kwDOACaFSM53N-52","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T17:48:13Z","updated_at":"2024-03-15T17:48:13Z","author_association":"CONTRIBUTOR","body":"As a follow-on - has the documentation been reviewed to see if these changes require documentation updates?  It seems possible that the troubleshooting section fate and fate print and fate summary commands and the examples may be different after these changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000154230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000169994","html_url":"https://github.com/apache/accumulo/pull/4377#issuecomment-2000169994","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4377","id":2000169994,"node_id":"IC_kwDOACaFSM53OCwK","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T17:58:41Z","updated_at":"2024-03-15T17:58:41Z","author_association":"MEMBER","body":"> I resurrected and fixed the test.\r\n\r\nWhen was this removed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000169994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000362127","html_url":"https://github.com/apache/accumulo/pull/4387#issuecomment-2000362127","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4387","id":2000362127,"node_id":"IC_kwDOACaFSM53OxqP","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T19:55:33Z","updated_at":"2024-03-15T19:56:07Z","author_association":"MEMBER","body":"Is this a duplicate of #4386\r\n\r\nEdit: nevermind I see this is for 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000362127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000370814","html_url":"https://github.com/apache/accumulo/pull/4387#issuecomment-2000370814","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4387","id":2000370814,"node_id":"IC_kwDOACaFSM53Ozx-","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-15T20:04:32Z","updated_at":"2024-03-15T20:04:32Z","author_association":"CONTRIBUTOR","body":"The idea was to start at 2.1 and then merge forward, closing this in passing","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2000370814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002037292","html_url":"https://github.com/apache/accumulo/pull/4388#issuecomment-2002037292","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4388","id":2002037292,"node_id":"IC_kwDOACaFSM53VKos","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-16T16:25:48Z","updated_at":"2024-03-16T16:25:48Z","author_association":"CONTRIBUTOR","body":"I am going to open a follow on PR w/ the unit test changes I suggested","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002037292/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002043141","html_url":"https://github.com/apache/accumulo/pull/4390#issuecomment-2002043141","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4390","id":2002043141,"node_id":"IC_kwDOACaFSM53VMEF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-16T16:47:48Z","updated_at":"2024-03-16T16:47:48Z","author_association":"CONTRIBUTOR","body":"Plan to merge this after GH actions passed.  It fixes a compile error caused by merging #4388 after #4370.  The merge was w/o conflicts, but the two PRs together cause a compile error.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002043141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002087181","html_url":"https://github.com/apache/accumulo/issues/4253#issuecomment-2002087181","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4253","id":2002087181,"node_id":"IC_kwDOACaFSM53VW0N","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-16T18:52:53Z","updated_at":"2024-03-16T18:52:53Z","author_association":"CONTRIBUTOR","body":"I talked to @keith-turner and I am going to go with `MetaFateStore` and `UserFateStore` since it aligns with the `FateInstanceType` enum.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002087181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002096916","html_url":"https://github.com/apache/accumulo/issues/4378#issuecomment-2002096916","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4378","id":2002096916,"node_id":"IC_kwDOACaFSM53VZMU","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-16T19:21:11Z","updated_at":"2024-03-16T19:21:11Z","author_association":"CONTRIBUTOR","body":"FYI, ZooStoreFateIT has been renamed in #4393","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2002096916/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003681565","html_url":"https://github.com/apache/accumulo/pull/4377#issuecomment-2003681565","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4377","id":2003681565,"node_id":"IC_kwDOACaFSM53bcEd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T11:37:42Z","updated_at":"2024-03-18T11:37:42Z","author_association":"CONTRIBUTOR","body":"> > I resurrected and fixed the test.\r\n> \r\n> When was this removed?\r\n\r\nI'm not sure. I think it exists in `main`, so it must have been removed as part of development in `elasticity` for some reason.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003681565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003742850","html_url":"https://github.com/apache/accumulo/pull/4386#issuecomment-2003742850","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4386","id":2003742850,"node_id":"IC_kwDOACaFSM53brCC","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T12:08:34Z","updated_at":"2024-03-18T12:08:34Z","author_association":"MEMBER","body":"Closing as already completed when #4387 was merged up into main,","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003742850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003742916","html_url":"https://github.com/apache/accumulo/pull/4386#issuecomment-2003742916","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4386","id":2003742916,"node_id":"IC_kwDOACaFSM53brDE","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T12:08:36Z","updated_at":"2024-03-18T12:08:36Z","author_association":"CONTRIBUTOR","body":"OK, I won't notify you again about this release, but will get in touch when a new version is available. If you'd rather skip all updates until the next major or minor version, let me know by commenting `@dependabot ignore this major version` or `@dependabot ignore this minor version`.\n\nIf you change your mind, just re-open this PR and I'll resolve any conflicts on it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003742916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":29110,"client_id":"Iv1.4f9a6346434f815e","slug":"dependabot","node_id":"MDM6QXBwMjkxMTA=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Dependabot","description":"","external_url":"https://dependabot-api.githubapp.com","html_url":"https://github.com/apps/dependabot","created_at":"2019-04-16T22:34:25Z","updated_at":"2024-03-20T21:06:35Z","permissions":{"actions":"read","checks":"write","contents":"write","issues":"write","members":"read","metadata":"read","pull_requests":"write","statuses":"read","vulnerability_alerts":"read","workflows":"write"},"events":["check_suite","issues","issue_comment","label","pull_request","pull_request_review","pull_request_review_comment","repository"]}},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003821184","html_url":"https://github.com/apache/accumulo/issues/4396#issuecomment-2003821184","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4396","id":2003821184,"node_id":"IC_kwDOACaFSM53b-KA","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T12:48:06Z","updated_at":"2024-03-18T12:48:06Z","author_association":"MEMBER","body":"Could also look into using a `Multimap` here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003821184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003964688","html_url":"https://github.com/apache/accumulo/issues/4275#issuecomment-2003964688","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4275","id":2003964688,"node_id":"IC_kwDOACaFSM53chMQ","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T13:48:34Z","updated_at":"2024-03-18T13:48:34Z","author_association":"MEMBER","body":"This issue can be closed now","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003964688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003988779","html_url":"https://github.com/apache/accumulo/issues/4044#issuecomment-2003988779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4044","id":2003988779,"node_id":"IC_kwDOACaFSM53cnEr","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T13:57:07Z","updated_at":"2024-03-18T13:57:07Z","author_association":"MEMBER","body":"All above TODOs have been completed. I believe this issue can be closed now","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2003988779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004077047","html_url":"https://github.com/apache/accumulo/issues/4275#issuecomment-2004077047","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4275","id":2004077047,"node_id":"IC_kwDOACaFSM53c8n3","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T14:31:29Z","updated_at":"2024-03-18T14:31:29Z","author_association":"MEMBER","body":"Closed via #4370","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004077047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004147886","html_url":"https://github.com/apache/accumulo/pull/4381#issuecomment-2004147886","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4381","id":2004147886,"node_id":"IC_kwDOACaFSM53dN6u","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T14:59:04Z","updated_at":"2024-03-18T14:59:04Z","author_association":"CONTRIBUTOR","body":"> It would be good to add a test to `AmpleConditionalWriterIT` to verify that the condition for `SUSPEND` in requireSame works as intended\r\n\r\nTest added in 309ffa2","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004147886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004215397","html_url":"https://github.com/apache/accumulo/pull/4379#issuecomment-2004215397","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4379","id":2004215397,"node_id":"IC_kwDOACaFSM53deZl","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T15:26:37Z","updated_at":"2024-03-18T15:26:37Z","author_association":"MEMBER","body":"Added the requested changes","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004215397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004431429","html_url":"https://github.com/apache/accumulo/pull/4397#issuecomment-2004431429","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4397","id":2004431429,"node_id":"IC_kwDOACaFSM53eTJF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T16:47:26Z","updated_at":"2024-03-18T16:47:26Z","author_association":"CONTRIBUTOR","body":"#4398 was opened to deprecate this functionality in main","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004431429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004605235","html_url":"https://github.com/apache/accumulo/issues/4399#issuecomment-2004605235","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4399","id":2004605235,"node_id":"IC_kwDOACaFSM53e9kz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T18:08:14Z","updated_at":"2024-03-18T18:08:14Z","author_association":"CONTRIBUTOR","body":"It may be worthwhile to add this test to 2.1 and forward.  The implementations are very different, but for this case hopefully the behavior is the same.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004605235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004771080","html_url":"https://github.com/apache/accumulo/issues/4347#issuecomment-2004771080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4347","id":2004771080,"node_id":"IC_kwDOACaFSM53fmEI","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T19:37:37Z","updated_at":"2024-03-18T19:37:37Z","author_association":"MEMBER","body":"It looks like the code in 2.1 might be functioning how you are proposing it should function already:\r\nhttps://github.com/apache/accumulo/blob/f3e75f0e46a320d10f222546c33ada896c371e7c/core/src/main/java/org/apache/accumulo/core/file/rfile/GenerateSplits.java#L280-L290\r\nWhich differs from the code you referenced above which does not throw an exception. If I am interpreting this correctly, I am wondering what the reason behind going from throwing an exception in 2.1 to logging in main. Either way, maybe this ticket only applies to main and up. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004771080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004840005","html_url":"https://github.com/apache/accumulo/issues/4399#issuecomment-2004840005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4399","id":2004840005,"node_id":"IC_kwDOACaFSM53f25F","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T20:03:09Z","updated_at":"2024-03-18T20:03:09Z","author_association":"MEMBER","body":"I can start looking into this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2004840005/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2005329061","html_url":"https://github.com/apache/accumulo/pull/4118#issuecomment-2005329061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4118","id":2005329061,"node_id":"IC_kwDOACaFSM53huSl","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T23:47:20Z","updated_at":"2024-03-18T23:47:20Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 - there are some todo's in the description that seem like they might be worth while for someone to pursue.  Have those been captured in an issue?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2005329061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007251853","html_url":"https://github.com/apache/accumulo/pull/4381#issuecomment-2007251853","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4381","id":2007251853,"node_id":"IC_kwDOACaFSM53pDuN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T13:57:22Z","updated_at":"2024-03-19T13:57:22Z","author_association":"CONTRIBUTOR","body":"> The test LGTM but it takes a long time to run, it takes 4 minutes when I run it so it might be worth tweaking some of the test configs. For example, I tried changing the `TABLE_SUSPEND_DURATION` property to 30 seconds from 3 minutes and that cut down the test run time to 2 minutes. I'm not sure if there are any other tweaks that could be made too (maybe the `MANAGER_TABLET_GROUP_WATCHER_INTERVAL` to speed up the check but that's not a table config)\r\n\r\n`MANAGER_TABLET_GROUP_WATCHER_INTERVAL` is set to `5s` in MiniAccumuloClusterImpl already. Setting `TABLE_SUSPEND_DURATION` to `30s` does not have the same effect for me. The test run time is still around 4m.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007251853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007475938","html_url":"https://github.com/apache/accumulo/pull/4384#issuecomment-2007475938","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4384","id":2007475938,"node_id":"IC_kwDOACaFSM53p6bi","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T15:20:35Z","updated_at":"2024-03-19T15:20:35Z","author_association":"CONTRIBUTOR","body":"I would like to merge this as it stands now - I agree with the points made by @ctubbsii and will look at incorporating them into future PRs.  This is one of a series of changes to unify the metrics initialization and tagging.  I'm trying to keep each focused on a single area.\r\n\r\nWith #4342 merged, the next step will be to modify other services to follow the same convention.  Those changes can leverage changes in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007475938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007492089","html_url":"https://github.com/apache/accumulo/pull/4384#issuecomment-2007492089","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4384","id":2007492089,"node_id":"IC_kwDOACaFSM53p-X5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T15:27:31Z","updated_at":"2024-03-19T15:27:31Z","author_association":"CONTRIBUTOR","body":"I have no issues with you merging this now. I don't think my issues with the Builder pattern are an issue in this PR as many of the thread pools are started once and are long lived. If it was the case that the Builder pattern code was going to be executed frequently, then I would have a concern.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007492089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007594986","html_url":"https://github.com/apache/accumulo/pull/4377#issuecomment-2007594986","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4377","id":2007594986,"node_id":"IC_kwDOACaFSM53qXfq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T16:11:36Z","updated_at":"2024-03-19T16:11:36Z","author_association":"CONTRIBUTOR","body":"CompactionDriverTest was removed in ff5148a8c65d6ffa036e82330fa42378fc5dd9af","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007594986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007761063","html_url":"https://github.com/apache/accumulo/pull/4397#issuecomment-2007761063","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4397","id":2007761063,"node_id":"IC_kwDOACaFSM53rACn","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T17:32:29Z","updated_at":"2024-03-19T17:32:29Z","author_association":"CONTRIBUTOR","body":"I found some other places where compaction selectors are still referenced.\r\n\r\n**CompactionConfig**\r\nhttps://github.com/apache/accumulo/blob/a8cdaadb9f4b0fe4dcdb28a0cda4cd75d06e1dba/core/src/main/java/org/apache/accumulo/core/client/admin/CompactionConfig.java#L142-L160\r\n\r\n**ExtCEnv**\r\nhttps://github.com/apache/accumulo/blob/a8cdaadb9f4b0fe4dcdb28a0cda4cd75d06e1dba/server/compactor/src/main/java/org/apache/accumulo/compactor/ExtCEnv.java#L93 \r\n\r\nWe could probably remove the SELECTOR encode/decode methods from the `UserCompactionUtils`\r\nhttps://github.com/apache/accumulo/blob/a8cdaadb9f4b0fe4dcdb28a0cda4cd75d06e1dba/core/src/main/java/org/apache/accumulo/core/clientImpl/UserCompactionUtils.java#L158-L174 \r\n\r\nThe largest change would be removing the selector type from the thrift code as this causes a thrift regeneration:\r\nhttps://github.com/apache/accumulo/blob/a8cdaadb9f4b0fe4dcdb28a0cda4cd75d06e1dba/core/src/main/thrift/tabletserver.thrift#L119 \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2007761063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2008713578","html_url":"https://github.com/apache/accumulo/issues/4347#issuecomment-2008713578","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4347","id":2008713578,"node_id":"IC_kwDOACaFSM53uolq","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T06:08:11Z","updated_at":"2024-03-20T06:08:11Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo My Bad, this is still open due to a case of poor ticket linking.  #4348 was already merged in to fix this issue. \r\n\r\nConfirmed that the fix was originally merged into 2.1 and has been merged into main and elasticity branches as well.\r\nTicket has been completed. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2008713578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009500281","html_url":"https://github.com/apache/accumulo/pull/4404#issuecomment-2009500281","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4404","id":2009500281,"node_id":"IC_kwDOACaFSM53xop5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T12:53:08Z","updated_at":"2024-03-20T12:53:08Z","author_association":"CONTRIBUTOR","body":"@keith-turner -  A couple of issues here:\r\n\r\n1. I don't see any code that removes the lock column from the metadata. I'm assuming that this should happen when the Tablet is unloaded from the TabletServer? \r\n\r\n2. MergeTabletsTest and UpdateTabletsTest fail with an error regarding the new lock column. Assuming that issue 1 is resolved and the lock column is removed from the metadata, then I assume that the lock column can be ignored in the merge and split code as it should not exist because the Tablet should be unloaded for the merge/split Fate operation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009500281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009876048","html_url":"https://github.com/apache/accumulo/pull/4400#issuecomment-2009876048","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4400","id":2009876048,"node_id":"IC_kwDOACaFSM53zEZQ","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T15:40:13Z","updated_at":"2024-03-20T15:40:13Z","author_association":"MEMBER","body":"The constructor may return before anything is initialized, so I don't believe the fields can be final. I did change locksHeld and locksWaiting to be declared unmodifiable in the constructor though","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009876048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009887749","html_url":"https://github.com/apache/accumulo/issues/4389#issuecomment-2009887749","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4389","id":2009887749,"node_id":"IC_kwDOACaFSM53zHQF","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T15:44:15Z","updated_at":"2024-03-20T15:44:15Z","author_association":"MEMBER","body":"I can work on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009887749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009919226","html_url":"https://github.com/apache/accumulo/pull/4400#issuecomment-2009919226","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4400","id":2009919226,"node_id":"IC_kwDOACaFSM53zO76","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T15:57:08Z","updated_at":"2024-03-20T15:57:08Z","author_association":"CONTRIBUTOR","body":"I realize that this is contradictory to Dave's comment and the latest changes - likely its a matter of preference.\r\n\r\nMaybe updating (adding) the javadocs for those methods calling out they return an unmodified list could help?\r\n\r\nWrapping the list with unmodifiable in the method makes it clear that the list is not expected to be changed by the caller.  Moving that to the constructor means that you'd need to dig for that info if it ever was important.\r\n\r\nI do not know what the best practices are for making / marking things immutable - but anything that would help reason about thread safety seems beneficial.  \r\n\r\nWith this class, and the way that it's used it may not matter much, but it may be something we should look to adopt / strive for. \r\n\r\nThis is likely a personal preference and can be ignored with this PR - but I did want to add this comment to prompt that we should be thinking about documenting thread safety as we modify code.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2009919226/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2010360127","html_url":"https://github.com/apache/accumulo/pull/4407#issuecomment-2010360127","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4407","id":2010360127,"node_id":"IC_kwDOACaFSM5306k_","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T18:50:42Z","updated_at":"2024-03-20T18:50:42Z","author_association":"MEMBER","body":"Do the charts and endpoints for the compactions numbers work now?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2010360127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2010521858","html_url":"https://github.com/apache/accumulo/pull/4407#issuecomment-2010521858","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4407","id":2010521858,"node_id":"IC_kwDOACaFSM531iEC","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T20:03:00Z","updated_at":"2024-03-20T20:03:00Z","author_association":"CONTRIBUTOR","body":"> Do the charts and endpoints for the compactions numbers work now?\r\n\r\nNot sure. The entire monitor is one big `todo` in the elasticity branch. We have not spent much (if any) time on keeping it working because we don't know how it will work if we have to go to multiple managers. Multiple managers may be required to scale out the tablet management operations that have been moved from the TabletServer to the Manager. \r\nI see a couple of options for the Monitor if we have to go to multiple Managers:\r\n\r\n  1. Modify the Monitor to communicate with multiple managers\r\n  2. Remove all of the Monitor specific code and turn the Monitor into a metric sink\r\n  3. Remove the Monitor and tell users to use tools that do the job better - we could still provide a reference implementation in the form of some Grafana dashboards that users can import into their deployment. If they decide to use something else, then they can figure out it for themselves from our example.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2010521858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2010754847","html_url":"https://github.com/apache/accumulo/pull/4397#issuecomment-2010754847","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4397","id":2010754847,"node_id":"IC_kwDOACaFSM532a8f","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T22:24:43Z","updated_at":"2024-03-20T22:24:43Z","author_association":"CONTRIBUTOR","body":"@ddanielr  cleaned up thrift and ExtCEnv in [df2ec1c](https://github.com/apache/accumulo/pull/4397/commits/df2ec1c22ebb4d1124e6d6b7dd0ccb2a34630529).  \r\n\r\nCompactionConfig and UserCompactionUtils are ok to leave as is.  The CompactionSelector plugin could be used in two ways. The first way was a table property could be set to use it and would periodically force compactions on whatever files it selected. The second way was that a table compaction initiated via the API could optionally specify the plugin to select subsets of files per tablet.   This PR is dropping that first way of using the plugin, but the second way will still be available.  The CompactionConfig and UserCompactionUtils code referenced were related to the second way of using the plugin.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2010754847/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2011009945","html_url":"https://github.com/apache/accumulo/pull/4403#issuecomment-2011009945","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4403","id":2011009945,"node_id":"IC_kwDOACaFSM533ZOZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T01:14:51Z","updated_at":"2024-03-21T01:14:51Z","author_association":"CONTRIBUTOR","body":"Seems like there is an existing catch-22 in the code that we may want to fix.  The existing problem is that if a compactor has never checked in for a group then there will be no entry in TIME_COMPACTOR_LAST_CHECKED and no warning will ever be logged.   So then groups that have jobs queued and are never being serviced will never get a warning logged. \r\n\r\nWondering if we can fix the current code and do the needed cleanup of `TIME_COMPACTOR_LAST_CHECKED` in the existing `idleCompactionWarning()` method.  Was playing around with the following trying to work through this, it calls functions that do no currently exist in the code.  Was just trying to work out the concept.\r\n\r\n```java\r\nprivate void idleCompactionWarning() {\r\n\r\n    // The set of groups that currently have >0 jobs queued\r\n    Set<CompactorGroupId> queuedGroups =  jobQueues.getCurrentActiveGroups();\r\n    \r\n    // The set of groups that have >0 live compactors w/ a ZK lock.  These are groups that have running compactors.\r\n    Set<CompactorGroupId> liveGroups = getLiveGroups();\r\n\r\n    long now = System.currentTimeMillis();\r\n    for(var groupName : queuedGroups) {\r\n      // If the group has running compactors then do not want to log a warning.  Looking for groups that have jobs queued, no compactors running, and the situation has been like this for a while.\r\n      if(!liveGroups.contains(groupName)) {\r\n        long lastCheckTime = TIME_COMPACTOR_LAST_CHECKED.getOrDefault(groupName, 0);\r\n        if ((now - lastCheckTime) > getMissingCompactorWarningTime()){\r\n          LOG.warn(\"No compactors have checked in with coordinator for group {} in {}ms\", groupName,\r\n                  getMissingCompactorWarningTime());\r\n        }\r\n      }\r\n    }\r\n\r\n    // Only care about tracking check in times for groups with compactions currently queued\r\n    TIME_COMPACTOR_LAST_CHECKED.keySet().retainAll(queuedGroups);\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2011009945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2011054049","html_url":"https://github.com/apache/accumulo/pull/4337#issuecomment-2011054049","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4337","id":2011054049,"node_id":"IC_kwDOACaFSM533j_h","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T02:08:31Z","updated_at":"2024-03-21T02:08:31Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2011054049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012312917","html_url":"https://github.com/apache/accumulo/pull/4403#issuecomment-2012312917","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4403","id":2012312917,"node_id":"IC_kwDOACaFSM538XVV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T13:33:14Z","updated_at":"2024-03-21T13:33:14Z","author_association":"CONTRIBUTOR","body":"We have the following maintenance tasks running in the Coordinator.\r\n\r\n```\r\nDeadCompactionDetector - fails compactions that Coordinator thinks are running, but are not\r\ncleanUpCompactors - remove nodes in ZooKeeper for empty groups and compactors\r\ncleanUpRunning - remove compactions from RUNNING_CACHE that are not actually running\r\nIdle compaction warning - warn no compactors for group checked in\r\nGroup check thread - remove non-existent groups from TIME_COMPACTOR_LAST_CHECKED\r\n```\r\n\r\nI'm thinking that we might be able to combine the last 4 into one method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012312917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012497803","html_url":"https://github.com/apache/accumulo/pull/4410#issuecomment-2012497803","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4410","id":2012497803,"node_id":"IC_kwDOACaFSM539EeL","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T14:47:03Z","updated_at":"2024-03-21T14:47:03Z","author_association":"CONTRIBUTOR","body":"NOTE to reviewers: I am not sure if this will address the problem - it will depend on how often the DefaultCompactionPlanner is instantiated because this fix will only work if a new instances of the Planner is NOT created each run.  I wanted to get this up early in case it is sufficient.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012497803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012690924","html_url":"https://github.com/apache/accumulo/pull/4403#issuecomment-2012690924","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4403","id":2012690924,"node_id":"IC_kwDOACaFSM539zns","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T15:39:19Z","updated_at":"2024-03-21T15:39:19Z","author_association":"CONTRIBUTOR","body":"> I'm thinking that we might be able to combine the last 4 into one method.\r\n\r\nSomething like:\r\n\r\n```\r\n  private void cleaner() {\r\n    \r\n    // This method does the following:\r\n    //\r\n    // 1. Removes entries from RUNNING_CACHE that are not really running\r\n    // 2. Cancels running compactions for groups that are not in the current configuration\r\n    // 3. Remove groups not in configuration from TIME_COMPACTOR_LAST_CHECKED\r\n    // 4. Log groups with no compactors\r\n    // 5. Log compactors with no groups\r\n    // 6. Log groups with compactors that have not checked in\r\n    \r\n    // ** BEGIN Contents of cleanupRunning **//\r\n    \r\n    // grab a snapshot of the ids in the set before reading the metadata table. This is done to\r\n    // avoid removing things that are added while reading the metadata.\r\n    Set<ExternalCompactionId> idsSnapshot = Set.copyOf(RUNNING_CACHE.keySet());\r\n\r\n    // grab the ids that are listed as running in the metadata table. It important that this is done\r\n    // after getting the snapshot.\r\n    Set<ExternalCompactionId> idsInMetadata = readExternalCompactionIds();\r\n\r\n    var idsToRemove = Sets.difference(idsSnapshot, idsInMetadata);\r\n\r\n    // remove ids that are in the running set but not in the metadata table\r\n    idsToRemove.forEach(this::recordCompletion);\r\n\r\n    if (idsToRemove.size() > 0) {\r\n      LOG.debug(\"Removed stale entries from RUNNING_CACHE : {}\", idsToRemove);\r\n    }\r\n\r\n    // ** END Contents of cleanupRunning **//\r\n    \r\n    // Get the set of groups being referenced in the current configuration\r\n    // Needs Dan's changes for this\r\n    Set<CompactorGroupId> groupsInConfiguration = new HashSet<>();\r\n    \r\n    // Compaction jobs are created in the TabletGroupWatcher and added to the Coordinator\r\n    // via the addJobs method which adds the job to the CompactionJobQueues object.\r\n    Set<CompactorGroupId> groupsWithJobs = jobQueues.getQueueIds();\r\n    \r\n    Set<CompactorGroupId> jobGroupsNotInConfiguration = Sets.difference(groupsWithJobs, groupsInConfiguration);\r\n\r\n    if (jobGroupsNotInConfiguration != null && !jobGroupsNotInConfiguration.isEmpty()) {\r\n      RUNNING_CACHE.values().forEach(rc -> {\r\n        if (jobGroupsNotInConfiguration.contains(CompactorGroupId.of(rc.getGroupName()))) {\r\n          LOG.warn(\"External compaction {} running in group {} on compactor {},\"\r\n              + \" but group not found in current configuration. Failing compaction...\",\r\n              rc.getJob().getExternalCompactionId(), rc.getGroupName(), rc.getCompactorAddress());\r\n          cancelCompactionOnCompactor(rc.getCompactorAddress(), rc.getJob().getExternalCompactionId());\r\n        }\r\n      });\r\n      \r\n      // Remove groups not in configuration from TIME_COMPACTOR_LAST_CHECKED\r\n      LOG.debug(\"No longer tracking compactor check-in times for groups: {}\", jobGroupsNotInConfiguration);\r\n      jobGroupsNotInConfiguration.forEach(TIME_COMPACTOR_LAST_CHECKED::remove);\r\n    }\r\n    \r\n    final Set<CompactorGroupId> runningCompactorGroups = new HashSet<>();\r\n    ExternalCompactionUtil.getCompactorAddrs(ctx).keySet()\r\n      .forEach(group -> runningCompactorGroups.add(CompactorGroupId.of(group)));\r\n    \r\n    Set<CompactorGroupId> groupsWithNoCompactors = Sets.difference(groupsInConfiguration, runningCompactorGroups);\r\n    if (groupsWithNoCompactors != null && !groupsWithNoCompactors.isEmpty()) {\r\n      LOG.warn(\"The following groups have no running compactors: {}\", groupsWithNoCompactors);\r\n    }\r\n\r\n    Set<CompactorGroupId> compactorsWithNoGroups = Sets.difference(runningCompactorGroups, groupsInConfiguration);\r\n    if (compactorsWithNoGroups != null && !compactorsWithNoGroups.isEmpty()) {\r\n      LOG.warn(\"The following groups have running compactors, but are not in the current configuration: {}\",\r\n          compactorsWithNoGroups);\r\n    }\r\n    \r\n    //** BEGIN IdleCompactionWarning code **/\r\n    long now = System.currentTimeMillis();\r\n    Map<String,Set<HostAndPort>> idleCompactors = getIdleCompactors();\r\n    TIME_COMPACTOR_LAST_CHECKED.forEach((groupName, lastCheckTime) -> {\r\n      if ((now - lastCheckTime) > getMissingCompactorWarningTime()\r\n          && jobQueues.getQueuedJobs(groupName) > 0\r\n          && idleCompactors.containsKey(groupName.canonical())) {\r\n        LOG.warn(\"No compactors have checked in with coordinator for group {} in {}ms\", groupName,\r\n            getMissingCompactorWarningTime());\r\n      }\r\n    });\r\n    //** End IdleCompactionWarning code **/\r\n\r\n  }\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012690924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012716066","html_url":"https://github.com/apache/accumulo/pull/4410#issuecomment-2012716066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4410","id":2012716066,"node_id":"IC_kwDOACaFSM5395wi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T15:45:38Z","updated_at":"2024-03-21T15:45:38Z","author_association":"CONTRIBUTOR","body":"I wonder if NanoTime from #4364 should have been merged into 2.1 vs main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012716066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012774796","html_url":"https://github.com/apache/accumulo/pull/4410#issuecomment-2012774796","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4410","id":2012774796,"node_id":"IC_kwDOACaFSM53-IGM","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T15:59:42Z","updated_at":"2024-03-21T15:59:42Z","author_association":"CONTRIBUTOR","body":"@EdColeman I had worked up a WIP fix for this here https://github.com/keith-turner/accumulo/commit/2877bc9e97e3eb456e4bbebfd858bf9292368fdc .  Not sure if it works or is a good approach though.  One thing I was trying to do was to reuse code for rate limiting logging.  I thnik we have multiple places in the code that do something custom for this, would be good to consolidate the pattern in the code somehow and have one way to do it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012774796/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012919715","html_url":"https://github.com/apache/accumulo/pull/4410#issuecomment-2012919715","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4410","id":2012919715,"node_id":"IC_kwDOACaFSM53-rej","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T16:34:34Z","updated_at":"2024-03-21T16:34:34Z","author_association":"CONTRIBUTOR","body":"I have no issues with a more general solution.  This can be closed if that's the way we want to go. My rational for this narrow PR was that, if the approach is correct then it would be a small patch that others could use quickly.\r\n\r\nWe may want to use this approach and then, as a follow-on. replace it the more general solution when it is ready?\r\n\r\nEither way, it assumes that the instantiation of the DefaultCompactPlanner is suitable for using per-instance local variables to control the log rate.  If not, then there is no point to using this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2012919715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013539123","html_url":"https://github.com/apache/accumulo/pull/4411#issuecomment-2013539123","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4411","id":2013539123,"node_id":"IC_kwDOACaFSM54BCsz","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T19:49:54Z","updated_at":"2024-03-21T19:49:54Z","author_association":"CONTRIBUTOR","body":"I'm working this - starting back at 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013539123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013629037","html_url":"https://github.com/apache/accumulo/pull/4411#issuecomment-2013629037","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4411","id":2013629037,"node_id":"IC_kwDOACaFSM54BYpt","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T20:10:48Z","updated_at":"2024-03-21T20:10:48Z","author_association":"CONTRIBUTOR","body":"This can be closed with #4412 when merged forward from 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013629037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013815609","html_url":"https://github.com/apache/accumulo/pull/4412#issuecomment-2013815609","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4412","id":2013815609,"node_id":"IC_kwDOACaFSM54CGM5","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T21:35:14Z","updated_at":"2024-03-21T21:35:14Z","author_association":"CONTRIBUTOR","body":"I reviewed the rel notes at https://commons.apache.org/proper/commons-configuration/changes-report.html#a2.10.1 and nothing jumps out.\r\n\r\nThere are a number of other dependency bumps that they have made - some of which I know we use.  I'm including them in this PR.\r\n\r\n- slf4j from 2.0.11 to 2.0.12\r\n- log4j from 2.22.1 to 2.23.1\r\n- commons-configuration2 from 2.9.0 to 2.10.1\r\n- commons-lang3 from 3.12.0 to 3.14.0\r\n- commons-text from 1.10.0 to 1.11.0\r\n\r\nThe change in commons-lang3 deprecated Range.between in favor of Range.of (used in Property)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013815609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013936506","html_url":"https://github.com/apache/accumulo/pull/4412#issuecomment-2013936506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4412","id":2013936506,"node_id":"IC_kwDOACaFSM54Cjt6","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T22:11:45Z","updated_at":"2024-03-21T22:14:06Z","author_association":"CONTRIBUTOR","body":"Reviewers:  Please feel to make any desired changes and merge.  Also, #4411 should be closed when merged into main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2013936506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2014916291","html_url":"https://github.com/apache/accumulo/pull/4411#issuecomment-2014916291","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4411","id":2014916291,"node_id":"IC_kwDOACaFSM54GS7D","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T11:49:33Z","updated_at":"2024-03-22T11:49:33Z","author_association":"CONTRIBUTOR","body":"OK, I won't notify you again about this release, but will get in touch when a new version is available. If you'd rather skip all updates until the next major or minor version, let me know by commenting `@dependabot ignore this major version` or `@dependabot ignore this minor version`.\n\nIf you change your mind, just re-open this PR and I'll resolve any conflicts on it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2014916291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":29110,"client_id":"Iv1.4f9a6346434f815e","slug":"dependabot","node_id":"MDM6QXBwMjkxMTA=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Dependabot","description":"","external_url":"https://dependabot-api.githubapp.com","html_url":"https://github.com/apps/dependabot","created_at":"2019-04-16T22:34:25Z","updated_at":"2024-03-20T21:06:35Z","permissions":{"actions":"read","checks":"write","contents":"write","issues":"write","members":"read","metadata":"read","pull_requests":"write","statuses":"read","vulnerability_alerts":"read","workflows":"write"},"events":["check_suite","issues","issue_comment","label","pull_request","pull_request_review","pull_request_review_comment","repository"]}},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2015526298","html_url":"https://github.com/apache/accumulo/pull/4404#issuecomment-2015526298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4404","id":2015526298,"node_id":"IC_kwDOACaFSM54In2a","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T17:04:05Z","updated_at":"2024-03-22T17:04:05Z","author_association":"CONTRIBUTOR","body":"I took a look at the lock column and as far as I can tell it's never removed, at least not using the static schema variable. I searched around and don't see it cleared even on offline but not sure if I missed something.\r\n\r\nIt's only used by MetadataConstraints on updates to [check](https://github.com/apache/accumulo/blob/98b994ce0ad7d67a0e9d028b227909f7b7882ac7/server/base/src/main/java/org/apache/accumulo/server/constraints/MetadataConstraints.java#L382-L406) that the value being written matches the zookeeper instance. This also matches the [documentation](https://accumulo.apache.org/docs/2.x/troubleshooting/system-metadata-tables): \r\n\r\n> srv:lock [] tservers/127.0.0.1:9997/zlock-0000000001\\$13fe86cd27101e5 - This is the lock information for the tablet holding the present lock. This information is checked against zookeeper whenever this is updated, which prevents a metadata update from a tablet server that no longer holds its lock.\r\n\r\nSo my impression is you probably don't need to add it to TabletMetadata at all or check it in the conditional mutation which would make the tests pass. If you do add it then the point of those test failures is to make sure that we \"consider\" the column for splits and merges. Since splits and merges can happen on tables that are not hosted in elasticity we don't really care about the lock column but I wonder if it should be cleaned up at least if the tablets are not hosted.\r\n\r\nThe other comment I have is that the TODO makes mention of using conditional mutations for removeUnusedWALEntries but it doesn't specify what should be required to succeed. Besides requireAbsentOperation() I am wondering what other conditions to validate, if any.  I was thinking about this and I feel like we might want to make sure WALs are the same, so maybe the code should look like:\r\n\r\n```java\r\n      ConditionalTabletMutator mut = mutator.mutateTablet(extent).requireAbsentOperation()\r\n          .requireSame(tm, LOGS)\r\n          .putZooLock(context.getZooKeeperRoot(), zooLock);\r\n      entries.forEach(mut::deleteWal);\r\n      mut.submit(tabletMetadata -> tabletMetadata.getLogs() == null || tabletMetadata.getLogs().isEmpty());\r\n\r\n```\r\n\r\nThis would require passing in the TabletMetadata as an argument of course\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2015526298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2015837594","html_url":"https://github.com/apache/accumulo/pull/4404#issuecomment-2015837594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4404","id":2015837594,"node_id":"IC_kwDOACaFSM54Jz2a","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T20:14:49Z","updated_at":"2024-03-22T20:14:49Z","author_association":"CONTRIBUTOR","body":"I'm wondering if we can just remove the lock column now from the tablet metadata. If its purpose was to restrict Tablet metadata updates to the TabletServer hosting the Tablet, that restriction no longer applies in elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2015837594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2016121409","html_url":"https://github.com/apache/accumulo/issues/3412#issuecomment-2016121409","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3412","id":2016121409,"node_id":"IC_kwDOACaFSM54K5JB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T23:27:47Z","updated_at":"2024-03-22T23:27:47Z","author_association":"CONTRIBUTOR","body":"I started this aternoon working on an attempt at a PR for the first checklist item:\r\n\r\n> Add code to offline wait operation that scans tables metadata and waits for no location, no external compaction id, and no operation ids. \r\n\r\nAfter talking to @keith-turner about this, there might be some race condition issues still to solve and more work to do here but the first attempt will at least update TableOperationsImpl to check no external compaction is or op id. I'm working on some tests now and should have a PR up tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2016121409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2018054340","html_url":"https://github.com/apache/accumulo/pull/4118#issuecomment-2018054340","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4118","id":2018054340,"node_id":"IC_kwDOACaFSM54SRDE","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-25T13:51:40Z","updated_at":"2024-03-25T13:51:40Z","author_association":"MEMBER","body":"@EdColeman thanks for pointing these out. The external compactions todo has been completed in this issue (I originally wasn't sure if my changes also worked for external compactions, but they do). The todo about moving the class probably isn't needed and is probably better suited for where it is now since it's currently only used in CompactionIT.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2018054340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2018573461","html_url":"https://github.com/apache/accumulo/issues/4231#issuecomment-2018573461","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4231","id":2018573461,"node_id":"IC_kwDOACaFSM54UPyV","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-25T17:50:57Z","updated_at":"2024-03-25T17:50:57Z","author_association":"CONTRIBUTOR","body":"I think this is being addressed in [issue4344](https://github.com/apache/accumulo/issues/4344)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2018573461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2018691801","html_url":"https://github.com/apache/accumulo/pull/4338#issuecomment-2018691801","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4338","id":2018691801,"node_id":"IC_kwDOACaFSM54UsrZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-25T18:57:02Z","updated_at":"2024-03-25T18:57:02Z","author_association":"CONTRIBUTOR","body":"IT build successful","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2018691801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2020667541","html_url":"https://github.com/apache/accumulo/pull/4404#issuecomment-2020667541","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4404","id":2020667541,"node_id":"IC_kwDOACaFSM54cPCV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-26T14:58:56Z","updated_at":"2024-03-26T14:58:56Z","author_association":"CONTRIBUTOR","body":"I did some looking at how `srv:lock` is used in #4420, and I don't think we can remove it. It looks like it's added to the Mutation by the client so that it can be evaluated server-side in MetadataConstraints. The server-side check confirms that the server that sent the mutation still holds a lock in ZooKeeper. This is likely to prevent a half-dead server from updating the metadata table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2020667541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2022621395","html_url":"https://github.com/apache/accumulo/issues/4420#issuecomment-2022621395","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4420","id":2022621395,"node_id":"IC_kwDOACaFSM54jsDT","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T12:13:20Z","updated_at":"2024-03-27T12:13:20Z","author_association":"CONTRIBUTOR","body":"> The differences in these lists makes me question whether if we missed something when updating the code. I'm also wondering in which cases the ServiceLock should not be checked when updating that metadata and root tables - should it always be checked?\r\n\r\nI created #4421 so that the `srv:lock` is always set when updating tablet metadata. There were just a few places in the code where `putZooLock` was being called, now it should always being called unless I missed a spot.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2022621395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2022664116","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2022664116","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2022664116,"node_id":"IC_kwDOACaFSM54j2e0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T12:37:36Z","updated_at":"2024-03-27T12:37:36Z","author_association":"CONTRIBUTOR","body":"I don't know if there is a downside to *always* setting `srv:lock` when updating the metadata table. MetadataConstraints uses ZooCache when [checking](https://github.com/apache/accumulo/blob/elasticity/server/base/src/main/java/org/apache/accumulo/server/constraints/MetadataConstraints.java#L382) the ServiceLock so the load on ZooKeeper, in theory, should not be increased. Given that a good portion of the updates are now coming from a Manager vs the TabletServer hosting the Tablet, and that some of these operations can be performed on unhosted tablets, the number of entries in ZooCache could be much less than in previous releases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2022664116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023123580","html_url":"https://github.com/apache/accumulo/pull/4414#issuecomment-2023123580","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4414","id":2023123580,"node_id":"IC_kwDOACaFSM54lmp8","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T15:54:44Z","updated_at":"2024-03-27T15:54:44Z","author_association":"MEMBER","body":"Relates to #3860 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023123580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023157682","html_url":"https://github.com/apache/accumulo/issues/4409#issuecomment-2023157682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4409","id":2023157682,"node_id":"IC_kwDOACaFSM54lu-y","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T16:08:36Z","updated_at":"2024-03-27T16:08:36Z","author_association":"CONTRIBUTOR","body":"also update the ration to ratio spelling","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023157682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023250702","html_url":"https://github.com/apache/accumulo/issues/4422#issuecomment-2023250702","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4422","id":2023250702,"node_id":"IC_kwDOACaFSM54mFsO","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T16:39:55Z","updated_at":"2024-03-27T16:39:55Z","author_association":"CONTRIBUTOR","body":"This could also be solved by excluding the entries written from the progress bar if they are coming from bulk import files","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023250702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023451261","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2023451261","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2023451261,"node_id":"IC_kwDOACaFSM54m2p9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T18:04:08Z","updated_at":"2024-03-27T18:04:08Z","author_association":"MEMBER","body":"This might be a bug in earlier versions as well. Also, it's not clear that we need to store the srv:lock column... just that we need to check it in a mutation. I'm not sure how easy it is to have a constraint check a mutation, but then alter it to omit the field, or if this should be done by some other means, like sending the lock information in the RPC message as a separate parameter from the mutation data.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023451261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023959231","html_url":"https://github.com/apache/accumulo/issues/3986#issuecomment-2023959231","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3986","id":2023959231,"node_id":"IC_kwDOACaFSM54oyq_","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T20:49:00Z","updated_at":"2024-03-27T20:49:00Z","author_association":"CONTRIBUTOR","body":"I can take a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023959231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023962405","html_url":"https://github.com/apache/accumulo/issues/4268#issuecomment-2023962405","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4268","id":2023962405,"node_id":"IC_kwDOACaFSM54ozcl","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T20:51:10Z","updated_at":"2024-03-27T20:51:10Z","author_association":"CONTRIBUTOR","body":"I can try taking a look at this\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2023962405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2024955205","html_url":"https://github.com/apache/accumulo/issues/4426#issuecomment-2024955205","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4426","id":2024955205,"node_id":"IC_kwDOACaFSM54sl1F","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T11:25:15Z","updated_at":"2024-03-28T11:25:15Z","author_association":"CONTRIBUTOR","body":"I'm not sure what this accomplishes. If a user already has a cluster.yaml file generated and stored in their CM system that they lay down on the system, they will never see that a new version number is expected. There is some validation that happens in [ClusterConfigParser](https://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/conf/cluster/ClusterConfigParser.java). We could make that more robust or we could start using yaml/json schema and performing validation as the first step in ClusterConfigParser.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2024955205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2024971946","html_url":"https://github.com/apache/accumulo/issues/4424#issuecomment-2024971946","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4424","id":2024971946,"node_id":"IC_kwDOACaFSM54sp6q","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T11:35:48Z","updated_at":"2024-03-28T11:35:48Z","author_association":"CONTRIBUTOR","body":"I think the script may support this in a rudimentary way (but I have not tested this). A top level `compactors_per_host` setting was added in #4329. I wonder if using different hostnames in the lists would allow you to start multiples of that setting. For example:\r\n\r\n```\r\n  compactor:\r\n    - q1:\r\n        - localhost\r\n    - q2:\r\n        - localhost\r\n        - 127.0.0.1\r\n    - q3:\r\n        - localhost\r\n        - localhost.localdomain\r\n        - 127.0.0.1\r\n...\r\n  compactors_per_host: 1        \r\n```\r\n\r\nI'm curious if that would satisfy your need. I'm wary of making the `accumulo-cluster` script some full-blown cluster management solution.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2024971946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027557688","html_url":"https://github.com/apache/accumulo/issues/4089#issuecomment-2027557688","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4089","id":2027557688,"node_id":"IC_kwDOACaFSM542hM4","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T18:04:24Z","updated_at":"2024-03-29T18:04:24Z","author_association":"MEMBER","body":"I believe this issue can be closed from https://github.com/apache/accumulo/pull/4143","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027557688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027565170","html_url":"https://github.com/apache/accumulo/issues/4422#issuecomment-2027565170","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4422","id":2027565170,"node_id":"IC_kwDOACaFSM542jBy","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T18:12:15Z","updated_at":"2024-03-29T18:12:15Z","author_association":"MEMBER","body":"I can work on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027565170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027686361","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2027686361","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2027686361,"node_id":"IC_kwDOACaFSM543AnZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T20:04:47Z","updated_at":"2024-03-29T20:04:47Z","author_association":"CONTRIBUTOR","body":"I think the only test failing at this point is BigRootTabletIT. I've spent probably 4 hours trying to track down the issue, and I'm unable to figure it out. After the split on the metadata table happens, the Manager doesn't appear to be hosting the new metadata tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027686361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027789505","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2027789505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2027789505,"node_id":"IC_kwDOACaFSM543ZzB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T22:23:13Z","updated_at":"2024-03-29T22:23:13Z","author_association":"CONTRIBUTOR","body":"> I think the only test failing at this point is BigRootTabletIT. I've spent probably 4 hours trying to track down the issue, and I'm unable to figure it out. After the split on the metadata table happens, the Manager doesn't appear to be hosting the new metadata tablets.\r\n\r\nI looked at this for a while to and it seems to be related to the low memory check inside `TabletBase`. The `TABLE_SCAN_MAXMEM` config is used in a couple spots, but if I bump the `maxResultsSize` value when testing specifically just on [this](https://github.com/dlmarion/accumulo/blob/7e5c7ebc96300d4063b242f6fb7dbc0c02997ae1/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/TabletBase.java#L421) line the test works again. That maxResultsSize is controlled by that config property so I'm wondering if the extra data being written pushes it over the edge for being able to continue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2027789505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030200321","html_url":"https://github.com/apache/accumulo/issues/4422#issuecomment-2030200321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4422","id":2030200321,"node_id":"IC_kwDOACaFSM55AmYB","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T17:24:44Z","updated_at":"2024-04-01T17:24:44Z","author_association":"CONTRIBUTOR","body":"When the estimated entries is zero, the compactor process could open rfile index and sum up the entries for the range covered by the compactor.  Thinking this would be a minimal change for 2.1.x.  Modifying bulk import to compute the estimated entries would probably be a much larger change for 2.1.x","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030200321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030253940","html_url":"https://github.com/apache/accumulo/issues/4089#issuecomment-2030253940","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4089","id":2030253940,"node_id":"IC_kwDOACaFSM55Azd0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T17:59:06Z","updated_at":"2024-04-01T17:59:06Z","author_association":"CONTRIBUTOR","body":"Looking at the comment on this issue, #4127 was work done as a result of the discussion on this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030253940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030283680","html_url":"https://github.com/apache/accumulo/issues/4424#issuecomment-2030283680","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4424","id":2030283680,"node_id":"IC_kwDOACaFSM55A6ug","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T18:16:36Z","updated_at":"2024-04-01T18:16:36Z","author_association":"CONTRIBUTOR","body":"Another way this could be done is by making the information parallel.\r\n\r\n```yaml\r\n\r\n  compactor:\r\n    - q1:\r\n      - localhost1\r\n      - localhost2\r\n    - q2:\r\n      - localhost1\r\n      - localhost2 \r\n    - q3:\r\n      - localhost1\r\n      - localhost2 \r\n\r\ncompactors_per_host: 1\r\n   -q1: 5\r\n   -q2: 2\r\n```\r\n\r\nIn the above example q3 would have 1 compactor per host, q1 5 compactors per host, and q2 2 compactors per host.  The drawback of this approach is that runtime checks and errors are needed to ensure consistency of queue names specified in two places.  Only suggested this because it seems easier to implement from a compatibility standpoint.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030283680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030286961","html_url":"https://github.com/apache/accumulo/issues/4426#issuecomment-2030286961","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4426","id":2030286961,"node_id":"IC_kwDOACaFSM55A7hx","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T18:19:02Z","updated_at":"2024-04-01T18:19:02Z","author_association":"CONTRIBUTOR","body":"> f a user already has a cluster.yaml file generated and stored in their CM system that they lay down on the system, they will never see that a new version number is expected.\r\n\r\nOne possible way to deal with this is that absence of a version number implies version 1 and its associated schema.  To use newer schema than version 1, must specify a version number.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030286961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030295319","html_url":"https://github.com/apache/accumulo/issues/4424#issuecomment-2030295319","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4424","id":2030295319,"node_id":"IC_kwDOACaFSM55A9kX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T18:24:29Z","updated_at":"2024-04-01T18:24:29Z","author_association":"CONTRIBUTOR","body":"Could we optionally add a struct after  a queue name?  Looking at the yaml spec, seems like this could be done.  But not sure if its needed everywhere then. Using a struct allows adding more field in the future.\r\n\r\n\r\n```yaml\r\n  compactor:\r\n    - q1: {compactors_per_host: 5}\r\n      - localhost1\r\n      - localhost2\r\n    - q2: {compactors_per_host: 2} \r\n      - localhost1\r\n      - localhost2 \r\n    - q3:\r\n      - localhost1\r\n      - localhost2 \r\n\r\ncompactors_per_host: 1\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030295319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030587231","html_url":"https://github.com/apache/accumulo/pull/4404#issuecomment-2030587231","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4404","id":2030587231,"node_id":"IC_kwDOACaFSM55CE1f","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-01T21:28:01Z","updated_at":"2024-04-01T21:28:19Z","author_association":"CONTRIBUTOR","body":"> This is likely to prevent a half-dead server from updating the metadata table.\r\n\r\nYeah the lock column is a best effort attempt to avoid writes from dead servers.  Its not guaranteed to stop all writes because it uses zoocache in the metadata constraint check, so the check in the metadata constraint is eventually consistent.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2030587231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2034687145","html_url":"https://github.com/apache/accumulo/pull/4429#issuecomment-2034687145","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4429","id":2034687145,"node_id":"IC_kwDOACaFSM55Rtyp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-03T13:55:00Z","updated_at":"2024-04-03T13:55:00Z","author_association":"CONTRIBUTOR","body":"I moved this from 2.1 to main.  I think this is a good change, however its possible that using the lock less results in uncovering some existing concurrency bug.  The intention of the lock was to only have one tablet do log recovery at a time within a tserver to prevent OOME.  However the way it was being used it was making it so that only one tablet could be constructed at a time in the tablet server.  If there were any existing concurrency bugs in that table constructor, removing the lock could uncover them.  We can always back port this change to 2.1 at a later point if its needed for performance reasons.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2034687145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2035000641","html_url":"https://github.com/apache/accumulo/pull/4430#issuecomment-2035000641","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4430","id":2035000641,"node_id":"IC_kwDOACaFSM55S6VB","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-03T15:58:57Z","updated_at":"2024-04-03T15:58:57Z","author_association":"CONTRIBUTOR","body":"This is an example of defining which tables the scanner should use eventual scan consistency vs immediate. \r\nThis allows the client code behavior to be modified based on properties vs a client source code change. \r\n\r\nThe downside to this is that multiple clients with different properties will return different scan results. \r\n\r\nA different implementation could set the allowed scan behavior at the table prop level so users can enable scan servers to use individual tables as the data in the system grows over time.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2035000641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2035042020","html_url":"https://github.com/apache/accumulo/pull/4430#issuecomment-2035042020","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4430","id":2035042020,"node_id":"IC_kwDOACaFSM55TEbk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-03T16:21:12Z","updated_at":"2024-04-03T16:21:12Z","author_association":"CONTRIBUTOR","body":"I'm not sure I fully understand how this property is used. Does this provide a default consistencyLevel setting in the client for the configured tables? If so, then I think this might cause issues in a multi-tenant situation if you have different applications running from the same client host / configuration. Lets say you have two apps (appA and appB). appA is time-sensitive and cannot afford eventual consistency. If appA and appB were to run from the same host/configuration for whatever reason, then that would present a problem for appA. Making the application change the code to use the consistency level feature allows the developers of the application to make an informed choice based on the behavior and requirements of their application. It allows them to opt-in to using the feature.\r\n ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2035042020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2035833852","html_url":"https://github.com/apache/accumulo/pull/4338#issuecomment-2035833852","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4338","id":2035833852,"node_id":"IC_kwDOACaFSM55WFv8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-04T00:09:44Z","updated_at":"2024-04-04T00:09:44Z","author_association":"CONTRIBUTOR","body":"In https://github.com/keith-turner/accumulo/commit/b6ff59cd494977841a5fb491800bd12c124428be I experimented with moving the validation from an SPI interface to internal interfaces.  The idea being that custom internal code would be created for each type of plugin in Accumulo that knows how to validate that plugin.  Experimented with this approach after noticing the following.\r\n\r\n * Saw multiple places where the new implementations of the SPI interface were calling non-spi code.  This indicates that a user implementing these interfaces may need to also call non SPI code.\r\n * The Accumulo plugins have a lot of individual quirks that makes creating a one size fits all validation API difficult.  For example iterators and cyrpto services have scopes,  balancers have a unique way of doing per table plugins.\r\n\r\nThis approach does not require any changes to existing plugins, it just initializes each plugin with config and sees if errors are thrown.  This is done using existing SPI calls by internal code.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2035833852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039638429","html_url":"https://github.com/apache/accumulo/pull/4432#issuecomment-2039638429","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4432","id":2039638429,"node_id":"IC_kwDOACaFSM55kmmd","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T12:10:40Z","updated_at":"2024-04-05T12:10:40Z","author_association":"CONTRIBUTOR","body":"Have you noticed any improvements in speed for any of the ITs with this change? I know the previous change sped up tests quite a bit and I am wondering if this is as noticeable ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039638429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039675893","html_url":"https://github.com/apache/accumulo/pull/4421#issuecomment-2039675893","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4421","id":2039675893,"node_id":"IC_kwDOACaFSM55kvv1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T12:31:19Z","updated_at":"2024-04-05T12:31:19Z","author_association":"CONTRIBUTOR","body":"BigRootTabletIT is still failing, but the build succeeds now","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039675893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039770658","html_url":"https://github.com/apache/accumulo/issues/4426#issuecomment-2039770658","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4426","id":2039770658,"node_id":"IC_kwDOACaFSM55lG4i","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T13:11:23Z","updated_at":"2024-04-05T13:11:23Z","author_association":"CONTRIBUTOR","body":"> One possible way to deal with this is that absence of a version number implies version 1 and its associated schema. To use newer schema than version 1, must specify a version number.\r\n\r\nSure, but I was trying to say that just because there is a version number in the yaml, it doesn't necessarily make it valid. We could add a version number to the yaml and immediately fail in ClusterConfigParser if it doesn't match what is expected. I don't think we should support different schemas though. A version of Accumulo should support one version of cluster.yaml. If it's not correct, then the software should fail and the user should have to fix it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039770658/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039973585","html_url":"https://github.com/apache/accumulo/pull/4338#issuecomment-2039973585","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4338","id":2039973585,"node_id":"IC_kwDOACaFSM55l4bR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-05T14:41:12Z","updated_at":"2024-04-05T14:41:12Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I'm fine with closing this PR in favor of one you put up from your branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2039973585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]