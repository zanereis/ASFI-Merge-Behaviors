[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276308732","html_url":"https://github.com/apache/pulsar/pull/178#issuecomment-276308732","issue_url":"https://api.github.com/repos/apache/pulsar/issues/178","id":276308732,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjMwODczMg==","user":{"login":"nkurihar","id":22067228,"node_id":"MDQ6VXNlcjIyMDY3MjI4","avatar_url":"https://avatars.githubusercontent.com/u/22067228?v=4","gravatar_id":"","url":"https://api.github.com/users/nkurihar","html_url":"https://github.com/nkurihar","followers_url":"https://api.github.com/users/nkurihar/followers","following_url":"https://api.github.com/users/nkurihar/following{/other_user}","gists_url":"https://api.github.com/users/nkurihar/gists{/gist_id}","starred_url":"https://api.github.com/users/nkurihar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkurihar/subscriptions","organizations_url":"https://api.github.com/users/nkurihar/orgs","repos_url":"https://api.github.com/users/nkurihar/repos","events_url":"https://api.github.com/users/nkurihar/events{/privacy}","received_events_url":"https://api.github.com/users/nkurihar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T08:57:21Z","updated_at":"2017-01-31T08:57:21Z","author_association":"CONTRIBUTOR","body":"> end-to-end test using Athenz\r\n\r\nDo you mean unit tests ?\r\nOK, I think the test is necessary too, I'll try it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276308732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276360335","html_url":"https://github.com/apache/pulsar/issues/151#issuecomment-276360335","issue_url":"https://api.github.com/repos/apache/pulsar/issues/151","id":276360335,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjM2MDMzNQ==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T13:17:51Z","updated_at":"2017-01-31T13:17:51Z","author_association":"NONE","body":"Looking at a random ledger metadata, we can see the ensemble members are all from different AZs, but we don't know if it's just a coincidence or if the affinity is really working and that WARN is expected.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276360335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276444114","html_url":"https://github.com/apache/pulsar/pull/183#issuecomment-276444114","issue_url":"https://api.github.com/repos/apache/pulsar/issues/183","id":276444114,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjQ0NDExNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T18:11:23Z","updated_at":"2017-01-31T18:11:23Z","author_association":"CONTRIBUTOR","body":"Wouldn't it be easier to chain the 2 tasks in the same thread? Compute the load report and then check for bundles to be split.\r\n\r\nThough, my concern is that the exception in #172 could happen anyway, cause a bundle could be unloaded after the report was generated. We should just ignore that bundle and move on at that point.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276444114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276471132","html_url":"https://github.com/apache/pulsar/pull/183#issuecomment-276471132","issue_url":"https://api.github.com/repos/apache/pulsar/issues/183","id":276471132,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjQ3MTEzMg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T19:47:47Z","updated_at":"2017-01-31T19:47:47Z","author_association":"CONTRIBUTOR","body":"Make sense. I will make the change.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276471132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276505932","html_url":"https://github.com/apache/pulsar/pull/183#issuecomment-276505932","issue_url":"https://api.github.com/repos/apache/pulsar/issues/183","id":276505932,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjUwNTkzMg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T21:57:53Z","updated_at":"2017-01-31T21:57:53Z","author_association":"CONTRIBUTOR","body":"updated PR by merging loadReportGeneration and splitBundleTask.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276505932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276526633","html_url":"https://github.com/apache/pulsar/pull/183#issuecomment-276526633","issue_url":"https://api.github.com/repos/apache/pulsar/issues/183","id":276526633,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjUyNjYzMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-31T23:25:13Z","updated_at":"2017-01-31T23:25:13Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Anything else for 1.16 ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276526633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276534131","html_url":"https://github.com/apache/pulsar/issues/184#issuecomment-276534131","issue_url":"https://api.github.com/repos/apache/pulsar/issues/184","id":276534131,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjUzNDEzMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-01T00:06:25Z","updated_at":"2017-02-01T00:06:25Z","author_association":"CONTRIBUTOR","body":"Few random ideas (haven't looked at the code yet): \r\n * Mark dynamic settings with an annotation in `ServiceConfiguration`\r\n * Have a way to register for config changes events (this may be useful for certain class of variables)\r\n * Otherwise, just read the \"dirty\" value from the `ServiceConfiguration` instance (don't store it in local variable and don't use any mutex\r\n * Add a REST handle to change key/value pairs, that only accept variables marked as dynamic\r\n * Store all dynamically configured variables in a single z-node in \"properties\" format\r\n * At startup log the content of that z-node and log each time a change is detected","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276534131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276535805","html_url":"https://github.com/apache/pulsar/issues/184#issuecomment-276535805","issue_url":"https://api.github.com/repos/apache/pulsar/issues/184","id":276535805,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NjUzNTgwNQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-01T00:16:03Z","updated_at":"2017-02-01T00:16:03Z","author_association":"CONTRIBUTOR","body":"* Mark dynamic settings with an annotation in `ServiceConfiguration` : **[Yes, Included in commit]**\r\n * Have a way to register for config changes events (this may be useful for certain class of variables) **[Yes, Included in commit]**\r\n * Otherwise, just read the \"dirty\" value from the `ServiceConfiguration` instance (don't store it in local variable and don't use any mutex **[Have done similar change]**\r\n * Add a REST handle to change key/value pairs, that only accept variables marked as dynamic **[Yes, Included in commit]**\r\n * Store all dynamically configured variables in a single z-node in \"properties\" format **[Yes, Included in commit]**\r\n * At startup log the content of that z-node and log each time a change is detected **[Yes, Will do]**\r\n\r\nThis commit includes almost all above suggestions. Once you review and if you think it is fine then I will go ahead and complete full changes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/276535805/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277102211","html_url":"https://github.com/apache/pulsar/pull/187#issuecomment-277102211","issue_url":"https://api.github.com/repos/apache/pulsar/issues/187","id":277102211,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzEwMjIxMQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-02T22:16:20Z","updated_at":"2017-02-02T22:16:20Z","author_association":"CONTRIBUTOR","body":"should we include it in 1.16 release.? we can merge it and then can do the release today.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277102211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277106530","html_url":"https://github.com/apache/pulsar/pull/187#issuecomment-277106530","issue_url":"https://api.github.com/repos/apache/pulsar/issues/187","id":277106530,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzEwNjUzMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-02T22:34:23Z","updated_at":"2017-02-02T22:34:23Z","author_association":"CONTRIBUTOR","body":"@rdhabalia Ok, this is a small change. I'll merge now","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277106530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277280485","html_url":"https://github.com/apache/pulsar/pull/188#issuecomment-277280485","issue_url":"https://api.github.com/repos/apache/pulsar/issues/188","id":277280485,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzI4MDQ4NQ==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T15:41:13Z","updated_at":"2017-02-03T15:41:13Z","author_association":"NONE","body":"We had setup Prometheus. We'll be happy to switch.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277280485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277301773","html_url":"https://github.com/apache/pulsar/pull/188#issuecomment-277301773","issue_url":"https://api.github.com/repos/apache/pulsar/issues/188","id":277301773,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMwMTc3Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T16:58:24Z","updated_at":"2017-02-03T16:58:24Z","author_association":"CONTRIBUTOR","body":"@agarman This is more like solution to display tabular sortable data for each topic. The is no historic metric right now, just the last interval values. \r\n\r\nThis is kind of complementary to having time series graphs, perhaps at the namespace level granularity. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277301773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277304113","html_url":"https://github.com/apache/pulsar/pull/188#issuecomment-277304113","issue_url":"https://api.github.com/repos/apache/pulsar/issues/188","id":277304113,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMwNDExMw==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T17:07:19Z","updated_at":"2017-03-01T16:29:37Z","author_association":"NONE","body":"We weren't using historic data from Prometheus...the metrics were driving grafana dashboards. As someone else may find the historic data useful, I'll check to see if we can share the Prometheus + grafana setup via docker.\r\n\r\nUpdate: working through getting approval for making our Prometheus et al docker setup open source","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277304113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277315555","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277315555","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277315555,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMxNTU1NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T17:53:31Z","updated_at":"2017-02-03T17:53:31Z","author_association":"CONTRIBUTOR","body":"@merlimat this has happened again for different consumers when restarting a broker. We have the following persistence for the namespace settings:\r\n```\r\n{\r\n  \"bookkeeperEnsemble\" : 3,\r\n  \"bookkeeperWriteQuorum\" : 3,\r\n  \"bookkeeperAckQuorum\" : 3,\r\n  \"managedLedgerMaxMarkDeleteRate\" : 0.0\r\n}\r\n```\r\nThis is absolutely not tolerable, we must find a way to fix this","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277315555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277315969","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277315969","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277315969,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMxNTk2OQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T17:55:15Z","updated_at":"2017-02-03T17:56:39Z","author_association":"CONTRIBUTOR","body":"By the way, this are all partitioned topics with 10 partitions.\r\nAnother thing, maybe it's unrelated, but we restarted brokers because they we're trying to connect to bookies which have been replaced, and do not exist in zookeeper.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277315969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277321896","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277321896","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277321896,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMyMTg5Ng==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T18:19:33Z","updated_at":"2017-02-03T18:19:33Z","author_association":"CONTRIBUTOR","body":"@sschepens as @merlimat mentioned: is it possible to get stats-internal for a given topic before restarting the server.\r\n```bin/pulsar-admin persistent stats-internal persistent://property/cluster/ns/topic```\r\nit provides current state of the cursor and importantly  `markDeletePosition` and `individuallyDeletedMessages`. if consumer missed to ack one of the message then `markDeletePosition` position will not move. So, if possible can we try to capture if it happens next time.\r\n```\r\nSample output:\r\n\"cursors\" : {\r\n    \"subscription1\" : {\r\n      \"markDeletePosition\" : \"7029:1506\",\r\n      \"individuallyDeletedMessages\" : \"[]\",\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277321896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277322218","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277322218","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277322218,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMyMjIxOA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T18:20:58Z","updated_at":"2017-02-03T18:20:58Z","author_association":"CONTRIBUTOR","body":"@rdhabalia i'm checking this, we restarted another broker and the backlog bumped up yet again, and the consumer had no individuallyDeletedMessages pending...\r\nWe're going to try one more time capturing stats-internal before and after restart, but, anyways, this doesn't seem to be the case that one messages was not acked.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277322218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277322937","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277322937","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277322937,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMyMjkzNw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T18:24:02Z","updated_at":"2017-02-03T18:24:02Z","author_association":"CONTRIBUTOR","body":"This is the behavior we're experiencing with backlog, the bumps are in the order of millions of messages.\r\nAnd as I said, there are no, or maybe just a few unacked messages at a given time.\r\n![screenshot from 2017-02-03 15-22-46](https://cloud.githubusercontent.com/assets/3072509/22603085/a805e7fa-ea24-11e6-9d1f-5e46a3ac5a3f.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277322937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277324798","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277324798","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277324798,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMyNDc5OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T18:31:14Z","updated_at":"2017-02-03T18:31:14Z","author_association":"CONTRIBUTOR","body":"@sschepens In the stats internal you can see also the real cursor position, apart from the individuallyDeletedMessages. That could give few hints on where to look. Also can you attach the logs for that particular topic, before/after restart? That might be useful as well.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277324798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277327111","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277327111","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277327111,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMyNzExMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T18:40:41Z","updated_at":"2017-02-03T18:40:41Z","author_association":"CONTRIBUTOR","body":"@sschepens also, having both internal and normal stats, might be useful in setting up a quick test to try to reproduce the issue.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277327111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277332911","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277332911","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277332911,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzMjkxMQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:02:54Z","updated_at":"2017-02-03T19:02:54Z","author_association":"CONTRIBUTOR","body":"@merlimat here I upload topic stats-internal for each partition before and after restart.\r\nThe consumers that got bumped are:\r\nf6f49168781f402c99ddfa871bc0e90c-fury-orderfeed-test2.loyal-api (blue)\r\nf6f49168781f402c99ddfa871bc0e90c-fury-orders.purchases-api (violet)\r\n\r\nAs the name specifies, the first one is a test consumer, i'm more interested in the second one. I can see that the first did have several unacked messages before restarting, even though, with each restart it seems to get more and more lagged.\r\n\r\nThis is the screenshot of the last restart:\r\n![screenshot from 2017-02-03 16-02-22](https://cloud.githubusercontent.com/assets/3072509/22604408/33eb7afa-ea2a-11e6-86b1-35263869485e.png)\r\n\r\n[topic-stats.zip](https://github.com/yahoo/pulsar/files/751310/topic-stats.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277332911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277332949","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277332949","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277332949,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzMjk0OQ==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:03:00Z","updated_at":"2017-02-03T19:03:00Z","author_association":"NONE","body":"I'm attaching the logs of the instance before and after restart.\r\n[logs_instance_i-04cd666923f24ceaf.zip](https://github.com/yahoo/pulsar/files/751318/logs_instance_i-04cd666923f24ceaf.zip)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277332949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277334180","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277334180","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277334180,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNDE4MA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:07:45Z","updated_at":"2017-02-03T19:07:45Z","author_association":"CONTRIBUTOR","body":"we're collectiong logs mentioning the topic from all other instances after the restart","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277334180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277334268","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277334268","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277334268,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNDI2OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:08:05Z","updated_at":"2017-02-03T19:08:05Z","author_association":"CONTRIBUTOR","body":"@sschepens Do you have message retention on time enabled, correct? (I'm seeing older ledgers are not being deleted, just wanted to make sure)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277334268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277335436","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277335436","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277335436,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNTQzNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:12:28Z","updated_at":"2017-02-03T19:12:28Z","author_association":"CONTRIBUTOR","body":"@sschepens about the violet consumer, in the logs you pasted, does it gets backlog on all the partitions? I don't see any problem in the \"after\" stats for that subscription.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277335436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277335999","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277335999","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277335999,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNTk5OQ==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:14:46Z","updated_at":"2017-02-03T19:14:46Z","author_association":"NONE","body":"These are the logs of all of our brokers before and after restart.\r\n[logs_all_instances.zip](https://github.com/yahoo/pulsar/files/751352/logs_all_instances.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277335999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277336117","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277336117","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277336117,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNjExNw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:15:14Z","updated_at":"2017-02-03T19:15:14Z","author_association":"CONTRIBUTOR","body":"> @sschepens about the violet consumer, in the logs you pasted, does it gets backlog on all the partitions?  I don't see any problem in the \"after\" stats for that subscription.\r\n\r\nI cannot now that right now, we don't have our metrics split by partition, and we didn't get the normal stats before and after.\r\nMaybe the issue is not related to what is shown on the stats-internal, but the issue is certainly present.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277336117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277336712","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277336712","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277336712,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNjcxMg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:17:41Z","updated_at":"2017-02-03T19:17:41Z","author_association":"CONTRIBUTOR","body":"> @sschepens Do you have message retention on time enabled, correct? (I'm seeing older ledgers are not being deleted, just wanted to make sure)\r\n\r\n Yes, this is our retention policy:\r\n```json\r\n{\r\n  \"retentionTimeInMinutes\" : 10080,\r\n  \"retentionSizeInMB\" : 2147483647\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277336712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277337341","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277337341","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277337341,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNzM0MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:20:08Z","updated_at":"2017-02-03T19:20:20Z","author_association":"CONTRIBUTOR","body":"> @sschepens about the violet consumer, in the logs you pasted, does it gets backlog on all the partitions? I don't see any problem in the \"after\" stats for that subscription.\r\n\r\n@merlimat I would expect that the increased backlog should come from partitions that got unloaded from the restarted broker only. Which should be visible in the logs","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277337341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277337665","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277337665","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277337665,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNzY2NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:21:33Z","updated_at":"2017-02-03T19:21:33Z","author_association":"CONTRIBUTOR","body":"@sschepens My point is that, looking that  \"after\" internal stats, the cursor for f6f49168781f402c99ddfa871bc0e90c-fury-orders.purchases-api doens't show backlog : \r\n\r\n```json\r\n{\r\n  \"entriesAddedCounter\": 36299,\r\n  \"numberOfEntries\": 6101124,\r\n  \"totalSize\": 784103746,\r\n  \"currentLedgerEntries\": 36299,\r\n  \"currentLedgerSize\": 4663005,\r\n  \"lastLedgerCreatedTimestamp\": \"2017-02-03 17:47:24.912\",\r\n  \"lastLedgerCreationFailureTimestamp\": null,\r\n  \"waitingCursorsCount\": 5,\r\n  \"pendingAddEntriesCount\": 0,\r\n  \"lastConfirmedEntry\": \"69312:36298\",\r\n  \"state\": \"LedgerOpened\",\r\n  \"ledgers\": [\r\n....\r\n\r\n    \"f6f49168781f402c99ddfa871bc0e90c-fury-orders.purchases-api\": {\r\n      \"markDeletePosition\": \"69312:36297\",\r\n      \"readPosition\": \"69312:36299\",\r\n      \"waitingReadOp\": true,\r\n      \"pendingReadOps\": 0,\r\n      \"messagesConsumedCounter\": 36298,\r\n      \"cursorLedger\": 69336,\r\n      \"cursorLedgerLastEntry\": 31461,\r\n      \"individuallyDeletedMessages\": \"[]\",\r\n      \"lastLedgerSwitchTimestamp\": \"2017-02-03 17:47:24.972\",\r\n      \"state\": \"Open\"\r\n    },\r\n....\r\n```\r\n\r\nIf you subtract `entriesAddedCounter - messagesConsumedCounter` you get the backlog that it gets reported by brokers.  In this case, 1 single in-flight message. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277337665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277337856","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277337856","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277337856,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzNzg1Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:22:26Z","updated_at":"2017-02-03T19:22:45Z","author_association":"CONTRIBUTOR","body":".. Ok, found the same thing on partition-6: \r\n\r\n```json\r\n    \"f6f49168781f402c99ddfa871bc0e90c-fury-orders.purchases-api\": {\r\n      \"markDeletePosition\": \"59439:44524\",\r\n      \"readPosition\": \"61542:30970\",\r\n      \"waitingReadOp\": false,\r\n      \"pendingReadOps\": 0,\r\n      \"messagesConsumedCounter\": -986146,\r\n      \"cursorLedger\": -1,\r\n      \"cursorLedgerLastEntry\": -1,\r\n      \"individuallyDeletedMessages\": \"[(59439:44525‥60577:45163], (60577:45164‥60886:818], (60886:819‥60886:21168], (60886:21169‥60886:27590], (60886:27591‥60886:41528], (60886:41529‥60886:49252], (60886:49253‥61145:10375], (61145:10376‥61145:36353], (61145:36354‥61542:7158], (61542:7159‥61542:14589], (61542:14590‥61542:26054], (61542:26055‥61542:29862], (61542:29863‥61542:30509], (61542:30510‥61542:30515], (61542:30516‥61542:30517], (61542:30518‥61542:30534], (61542:30535‥61542:30537], (61542:30538‥61542:30556], (61542:30557‥61542:30559], (61542:30560‥61542:30563], (61542:30565‥61542:30566], (61542:30567‥61542:30568], (61542:30569‥61542:30573], (61542:30577‥61542:30581], (61542:30582‥61542:30583], (61542:30585‥61542:30587], (61542:30589‥61542:30591], (61542:30610‥61542:30613], (61542:30619‥61542:30637], (61542:30638‥61542:30640], (61542:30641‥61542:30643], (61542:30647‥61542:30649], (61542:30672‥61542:30674], (61542:30675‥61542:30677], (61542:30678‥61542:30679]]\",\r\n      \"lastLedgerSwitchTimestamp\": \"2017-02-03 18:33:43.431\",\r\n      \"state\": \"NoLedger\"\r\n    },\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277337856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277338253","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277338253","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277338253,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzODI1Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:24:08Z","updated_at":"2017-02-03T19:24:08Z","author_association":"CONTRIBUTOR","body":"So, that cursors had 1 single unacked message (59439:44525) before restart : \r\n\r\n\r\n```json\r\n    \"f6f49168781f402c99ddfa871bc0e90c-fury-orders.purchases-api\": {\r\n      \"markDeletePosition\": \"59439:44524\",\r\n      \"readPosition\": \"70009:12925\",\r\n      \"waitingReadOp\": true,\r\n      \"pendingReadOps\": 0,\r\n      \"messagesConsumedCounter\": 12922,\r\n      \"cursorLedger\": -1,\r\n      \"cursorLedgerLastEntry\": -1,\r\n      \"individuallyDeletedMessages\": \"[(59439:44525‥70009:12922]]\",\r\n      \"lastLedgerSwitchTimestamp\": \"2017-02-03 18:16:48.247\",\r\n      \"state\": \"NoLedger\"\r\n    },\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277338253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277338917","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277338917","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277338917,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzMzODkxNw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:26:45Z","updated_at":"2017-02-03T19:26:45Z","author_association":"CONTRIBUTOR","body":"The same message still appears as \"unacked\" even after restart. Is there the possibility that the consumer is getting some unexpected data and fails to consume that particular message? \r\n\r\nYou can dump the content of the message by doing : \r\n```shell\r\n$ pulsar-admin persistent peek-messages $MY_TOPIC -s $MY_SUBSCRIPTION\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277338917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277341010","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277341010","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277341010,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM0MTAxMA==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:35:01Z","updated_at":"2017-02-03T19:35:01Z","author_association":"NONE","body":"The contents of the message seems to be fine. For some reason is still unacked.\r\n\r\n[message_id_59439_44525.txt](https://github.com/yahoo/pulsar/files/751388/message_id_59439_44525.txt)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277341010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277341618","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277341618","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277341618,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM0MTYxOA==","user":{"login":"estebangarcia","id":16657038,"node_id":"MDQ6VXNlcjE2NjU3MDM4","avatar_url":"https://avatars.githubusercontent.com/u/16657038?v=4","gravatar_id":"","url":"https://api.github.com/users/estebangarcia","html_url":"https://github.com/estebangarcia","followers_url":"https://api.github.com/users/estebangarcia/followers","following_url":"https://api.github.com/users/estebangarcia/following{/other_user}","gists_url":"https://api.github.com/users/estebangarcia/gists{/gist_id}","starred_url":"https://api.github.com/users/estebangarcia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/estebangarcia/subscriptions","organizations_url":"https://api.github.com/users/estebangarcia/orgs","repos_url":"https://api.github.com/users/estebangarcia/repos","events_url":"https://api.github.com/users/estebangarcia/events{/privacy}","received_events_url":"https://api.github.com/users/estebangarcia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:37:32Z","updated_at":"2017-02-03T19:37:32Z","author_association":"NONE","body":"The message is from yesterday for some reason it was never consumed. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277341618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277342119","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277342119","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277342119,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM0MjExOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:39:38Z","updated_at":"2017-02-03T19:39:38Z","author_association":"CONTRIBUTOR","body":"So, if you have set the ack-timeout, this message should be keeping getting resent to the consumer. You can enable debug logs (either on broker or consumer) to check that.\r\nAnother option is to get a tcpdump capture of the traffic to the consumer (for port 6650).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277342119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277347026","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277347026","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277347026,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM0NzAyNg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T19:58:50Z","updated_at":"2017-02-03T19:58:50Z","author_association":"CONTRIBUTOR","body":"@merlimat this messages is effectively being redelivered constantly.\r\nThis brings up the question, should pulsar support dead-letter queues?\r\nI don't know what we can use to detect this realtime to prevent this issues.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277347026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277348986","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277348986","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277348986,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM0ODk4Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T20:07:05Z","updated_at":"2017-02-03T20:07:05Z","author_association":"CONTRIBUTOR","body":"Just to clarify, is the consumer acknowledging the message? \r\n\r\nAbout how to detect that, one way is to monitor the storage size constantly increasing (though in your case, with retention that is not feasible). Otherwise, monitor the re-delivery rate for the consumers (in the topic stats).\r\n\r\nAbout dead-letter queue. It's an interesting topic and I'd would support that, just not enabled by default. Potentially it could be an option on the namespace itself to define a dead-letter topic where to dump messages after N delivery attempts. \r\nWhen placing messages there, the broker could attach few properties to the messages themselves.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277348986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277350197","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277350197","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277350197,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM1MDE5Nw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T20:12:23Z","updated_at":"2017-02-03T20:12:23Z","author_association":"CONTRIBUTOR","body":"> Just to clarify, is the consumer acknowledging the message?\r\n\r\nNo, because it's failing to process it.\r\n\r\n> About how to detect that, one way is to monitor the storage size constantly increasing (though in your case, with retention that is not feasible). Otherwise, monitor the re-delivery rate for the consumers (in the topic stats).\r\n\r\nI don't think message re-delivery rate is going to work, messages are potentially constantly being redelivered because they could spend `ackTimeout` in the internal queue of the consumers.\r\nPlus, we would like to identify which precise messages are being constantly redelivered.\r\n\r\n> About dead-letter queue. It's an interesting topic and I'd would support that, just not enabled by default. Potentially it could be an option on the namespace itself to define a dead-letter topic where to dump messages after N delivery attempts.\r\nWhen placing messages there, the broker could attach few properties to the messages themselves.\r\n\r\nOf course, dead-letter queues should be optional, but there are also things to consider, should there be a dead-letter topic for each consumer? if not, how would we handle this?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277350197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277353640","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277353640","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277353640,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM1MzY0MA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T20:27:23Z","updated_at":"2017-02-03T20:33:58Z","author_association":"CONTRIBUTOR","body":"Another thought @merlimat \r\nWould it be possible for brokers to store the value of `individuallyDeletedMessages` every given time or something, and have new brokers read that value to restore the actual state of that consumer?\r\nThe only issue I can think of is that the value of `individuallyDeletedMessages` could grow forever, maybe we could allow for a given number of unacked messages and then print warnings or errors for that consumer?\r\n\r\nThe line of thought is: what can we possibly do to prevent this from happening? (a consumer re-processing all messages when a broker restarts because it did not acknowledge a message)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277353640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277371830","html_url":"https://github.com/apache/pulsar/issues/189#issuecomment-277371830","issue_url":"https://api.github.com/repos/apache/pulsar/issues/189","id":277371830,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzM3MTgzMA==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-03T21:50:27Z","updated_at":"2017-02-03T21:50:27Z","author_association":"NONE","body":"I am writing rejected messages to \"TopicName{{RejectedMessage}}\" then acknowledging the message. It'd be nice to have the broker handle this atomically.\r\n\r\nAn API like:\r\n```java\r\nreject(msgId); // sends message into dead letter box for subscription; acknowledged in process\r\nreroute(msgId, specificTopic); // same but into a specific topic\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277371830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277401077","html_url":"https://github.com/apache/pulsar/pull/188#issuecomment-277401077","issue_url":"https://api.github.com/repos/apache/pulsar/issues/188","id":277401077,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzQwMTA3Nw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-04T00:37:17Z","updated_at":"2017-02-04T00:37:17Z","author_association":"CONTRIBUTOR","body":"That would be great to have an out of the box default dashboard and collection mechanism.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277401077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277701077","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277701077","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277701077,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzcwMTA3Nw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T14:39:40Z","updated_at":"2017-02-06T14:39:40Z","author_association":"CONTRIBUTOR","body":"@merlimat I'm thinking, what would happen if a consumer like the one we had issues with has a single messages that it cannot process and that message get expired via ttl or retention policies, would broker immediately discard it from `individuallyDeletedMessages` list.\r\nMy concern is, when this message gets expired the broker could advance the `markDeletePosition`, if it would not do this, when bundle gets unloaded it would reset the consumer back to the beginning, wouldn't it?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277701077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277775212","html_url":"https://github.com/apache/pulsar/pull/178#issuecomment-277775212","issue_url":"https://api.github.com/repos/apache/pulsar/issues/178","id":277775212,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc3NTIxMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T18:49:37Z","updated_at":"2017-02-06T18:49:37Z","author_association":"CONTRIBUTOR","body":"@nkurihar The change looks good to me. If it's feasible, it would be good to have a unit test that spawns up an Athenz service and verify the authentication end-to-end. \r\n\r\nAlso, it would be good to have a new page in the documentation to show how to enable and configure the authentication with Athenz 😄 . But that can go in a different PR.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277775212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277784007","html_url":"https://github.com/apache/pulsar/issues/189#issuecomment-277784007","issue_url":"https://api.github.com/repos/apache/pulsar/issues/189","id":277784007,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc4NDAwNw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T19:21:07Z","updated_at":"2017-02-06T19:21:07Z","author_association":"CONTRIBUTOR","body":"The primary concern I have with dead-letter queue is how to avoid that some misconfiguration can lead to send everything into that topic.\r\n\r\nIn some cases the application can have a pretty good idea that a message is bad/corrupted and thus triggering the rerouting of the message, but if for example a new field is introduced and the consumer is not updated, it might start sending everything to DLQ. \r\n\r\nAbout doing the work in client vs server. I don't think there is a big functional difference. The 2 operations cannot be atomically executed anyway, we have to first publish and then skip the bad message.\r\n\r\nMy preference would go to doing that in client lib, to avoid scalability concern in broker.\r\n\r\nAdding on what proposed by @agarman, what about configuring the DLQ on consumer config? \r\n\r\n```java\r\nconsumerConf.setDeadLetterQueue(\"persistent://.....\");\r\nconsumerConf.sendToDeadLetterQueueAfterRetries(10);\r\n```\r\n\r\nThen in consumer code:\r\n\r\n```java\r\nwhile (true) {\r\n    Message msg = consumer.receive();\r\n    try {\r\n        // processMessage()\r\n    } catch (Exception e) {\r\n       consumer.reject(msg);\r\n       continue;\r\n    }\r\n\r\n   consumer.acknowledge(msg);\r\n}\r\n```\r\n\r\nThe difficult part would be how to support transient vs persistent errors and rejections.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277784007/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277825950","html_url":"https://github.com/apache/pulsar/pull/185#issuecomment-277825950","issue_url":"https://api.github.com/repos/apache/pulsar/issues/185","id":277825950,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzgyNTk1MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T21:52:51Z","updated_at":"2017-02-06T21:52:51Z","author_association":"CONTRIBUTOR","body":"@saandrews @rdhabalia Added reading version from inside cmake definition here: \r\nhttps://github.com/merlimat/pulsar/commit/6aa7c9926a9286f358c24064ab0028d77dad4147","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277825950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277843406","html_url":"https://github.com/apache/pulsar/issues/191#issuecomment-277843406","issue_url":"https://api.github.com/repos/apache/pulsar/issues/191","id":277843406,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg0MzQwNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T23:04:08Z","updated_at":"2017-02-06T23:04:08Z","author_association":"CONTRIBUTOR","body":"The thing with retention is that it applies to acknowledged messages. It will keep them around for a minimum amount of time (based on the publish time).\r\n\r\nTo expire a non-acked message after a certain amount of time, you need to configure TTL.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277843406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277860308","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-277860308","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":277860308,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg2MDMwOA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T00:29:43Z","updated_at":"2017-02-07T00:29:43Z","author_association":"CONTRIBUTOR","body":"> Would it be possible for brokers to store the value of individuallyDeletedMessages every given time or something, and have new brokers read that value to restore the actual state of that consumer?\r\n\r\nYes, we thought about that many times. The thing is storing that information, avoids the big backlog on restart but doesn't address the root cause of why the message wasn't acked. \r\n\r\nAt the end, having a hole in the ack-sequence is always the symptom of a separate problem. And for the system, the data cannot be removed from disk because the storage is not a traditional key-value store where you can point-delete data.\r\n\r\nAbout the size of the `individuallyDeletedMessages` data itself, the good thing is that we have\r\nintroduced a max amount of \"unacked\" messages that a consumer can have. After that, the broker will stop pushing messages to the consumer. I think default is 50K.\r\n\r\nTo summarize my point of view\r\n * It would be nice to address the ack-hole problem, even if only to a limited degree, in a way that has no performance impact when it's not needed:\r\n     - eg: only do that if mark-delete falls behind more than X thousand messages compared to read-positition\r\n * Give an intuitive and easy to use way to reject messages\r\n * Better report in stats when an \"ack-hole\" is detected, for quicker identification or alerting\r\n\r\n> My concern is, when this message gets expired the broker could advance the markDeletePosition, if it would not do this, when bundle gets unloaded it would reset the consumer back to the beginning, wouldn't it?\r\n\r\nWhen the broker applies TTL, it will acknowledge the messages and thus close the gap and move the `markDeletePosition` forward.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277860308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277996652","html_url":"https://github.com/apache/pulsar/issues/191#issuecomment-277996652","issue_url":"https://api.github.com/repos/apache/pulsar/issues/191","id":277996652,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzk5NjY1Mg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T13:16:54Z","updated_at":"2017-02-07T13:16:54Z","author_association":"CONTRIBUTOR","body":"@merlimat perhaps this should be clarified on the documentaiton, right?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/277996652/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278022528","html_url":"https://github.com/apache/pulsar/issues/191#issuecomment-278022528","issue_url":"https://api.github.com/repos/apache/pulsar/issues/191","id":278022528,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAyMjUyOA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T14:53:17Z","updated_at":"2017-02-07T14:53:17Z","author_association":"CONTRIBUTOR","body":"Yes, we should have a page in the features section to describe how to use retention and ttl. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278022528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278035280","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-278035280","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":278035280,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAzNTI4MA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T15:31:19Z","updated_at":"2017-02-07T15:31:19Z","author_association":"CONTRIBUTOR","body":"@merlimat any idea what could be happening? We had all brokers connecting to bookies which no longer existed, and continued doing so for days, we had to restart them for them to realize those bookies did not exist.\r\nIs this an issue with Bookkeeper client or with brokers themselves?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278035280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278036578","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-278036578","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":278036578,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAzNjU3OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T15:35:41Z","updated_at":"2017-02-07T15:35:41Z","author_association":"CONTRIBUTOR","body":"I think this is due to the BK client still having the old metadata, pointing to the retired bookies. I know that in broker if we have a read error, we close the ledger to make sure we get the updated metadata. \r\n\r\nI'm not sure in this case at which point it might have got stuck. Need to reproduce it in a simple scenario to debug it further. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278036578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278036991","html_url":"https://github.com/apache/pulsar/issues/173#issuecomment-278036991","issue_url":"https://api.github.com/repos/apache/pulsar/issues/173","id":278036991,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAzNjk5MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T15:37:07Z","updated_at":"2017-02-07T15:37:07Z","author_association":"CONTRIBUTOR","body":"@merlimat any idea about this?\r\nI realized brokers use a couple of ThreadPools to synchronously execute tasks, such as ledger rolling and other stuff, could this be related? Maybe with many topics and consumers, and many rolling tasks those threadpools are causing some waiting?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278036991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278037971","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-278037971","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":278037971,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAzNzk3MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T15:40:28Z","updated_at":"2017-02-07T15:40:28Z","author_association":"CONTRIBUTOR","body":"> I think this is due to the BK client still having the old metadata, pointing to the retired bookies. I know that in broker if we have a read error, we close the ledger to make sure we get the updated metadata.\r\n\r\nWe had lot's of failures and broker didn't seem to be updating the metadata, If I can find the related logs, I'll attach them.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278037971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278043995","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-278043995","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":278043995,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODA0Mzk5NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T15:59:20Z","updated_at":"2017-02-07T15:59:20Z","author_association":"CONTRIBUTOR","body":"@merlimat i'm checking logs, the mostly complain of failing to write to the replaced bookies, and then they get quarantined, but eventually, they get removed from quarantine and start failing again.\r\nNo errors seem to come from reading, maybe that's why metadata doesn't get refreshed?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278043995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278103859","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-278103859","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":278103859,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEwMzg1OQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:55:24Z","updated_at":"2017-02-07T18:55:24Z","author_association":"CONTRIBUTOR","body":"Uhm, that sound strange. If the bookies are down, they should not be being picked up for new ledgers ensembles. Can you indeed post the logs here? Also, can you verify that the bookies are really not registered in ZK anymore? \r\n\r\n```\r\nbin/bookkeeper shell listbookies  --readwrite\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278103859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278111239","html_url":"https://github.com/apache/pulsar/issues/190#issuecomment-278111239","issue_url":"https://api.github.com/repos/apache/pulsar/issues/190","id":278111239,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODExMTIzOQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T19:21:07Z","updated_at":"2017-02-07T19:21:07Z","author_association":"CONTRIBUTOR","body":"> Also, can you verify that the bookies are really not registered in ZK anymore?\r\n\r\nI did that when we had the issue and they were indeeed not registered.\r\n\r\nHere I attach some logs for a single broker which is failing against bookie 10.64.103.176 which did not exist at the time. The logs are only those mentioning that bookie.\r\n\r\n[logs.txt](https://github.com/yahoo/pulsar/files/758745/logs.txt)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278111239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278115461","html_url":"https://github.com/apache/pulsar/pull/129#issuecomment-278115461","issue_url":"https://api.github.com/repos/apache/pulsar/issues/129","id":278115461,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODExNTQ2MQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T19:35:58Z","updated_at":"2017-02-07T19:35:58Z","author_association":"CONTRIBUTOR","body":"@merlimat I think we can merge this PR now.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278115461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278118685","html_url":"https://github.com/apache/pulsar/pull/185#issuecomment-278118685","issue_url":"https://api.github.com/repos/apache/pulsar/issues/185","id":278118685,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODExODY4NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T19:47:33Z","updated_at":"2017-02-07T19:47:33Z","author_association":"CONTRIBUTOR","body":"Looks good to me. One final minor aks: can you rename build.sh into travis-build.sh?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278118685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278126114","html_url":"https://github.com/apache/pulsar/pull/185#issuecomment-278126114","issue_url":"https://api.github.com/repos/apache/pulsar/issues/185","id":278126114,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEyNjExNA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T20:14:13Z","updated_at":"2017-02-07T20:14:13Z","author_association":"CONTRIBUTOR","body":"Updated. I will merge once CI is complete?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278126114/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278166812","html_url":"https://github.com/apache/pulsar/pull/176#issuecomment-278166812","issue_url":"https://api.github.com/repos/apache/pulsar/issues/176","id":278166812,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE2NjgxMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T22:39:55Z","updated_at":"2017-02-07T22:39:55Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #181 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278166812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278168427","html_url":"https://github.com/apache/pulsar/pull/129#issuecomment-278168427","issue_url":"https://api.github.com/repos/apache/pulsar/issues/129","id":278168427,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE2ODQyNw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T22:45:23Z","updated_at":"2017-02-07T22:45:23Z","author_association":"CONTRIBUTOR","body":"Actually, in `conf/client.conf` we only have one `serviceUrl` key.. don't know if it would make sense to add also the `webServiceUrl` with the 8080 port.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278168427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278405739","html_url":"https://github.com/apache/pulsar/pull/178#issuecomment-278405739","issue_url":"https://api.github.com/repos/apache/pulsar/issues/178","id":278405739,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQwNTczOQ==","user":{"login":"nkurihar","id":22067228,"node_id":"MDQ6VXNlcjIyMDY3MjI4","avatar_url":"https://avatars.githubusercontent.com/u/22067228?v=4","gravatar_id":"","url":"https://api.github.com/users/nkurihar","html_url":"https://github.com/nkurihar","followers_url":"https://api.github.com/users/nkurihar/followers","following_url":"https://api.github.com/users/nkurihar/following{/other_user}","gists_url":"https://api.github.com/users/nkurihar/gists{/gist_id}","starred_url":"https://api.github.com/users/nkurihar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkurihar/subscriptions","organizations_url":"https://api.github.com/users/nkurihar/orgs","repos_url":"https://api.github.com/users/nkurihar/repos","events_url":"https://api.github.com/users/nkurihar/events{/privacy}","received_events_url":"https://api.github.com/users/nkurihar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T17:47:13Z","updated_at":"2017-02-08T17:47:13Z","author_association":"CONTRIBUTOR","body":"@merlimat\r\nThank you for your reviewing.\r\n\r\n> new page in the documentation to show how to enable and configure the authentication with Athenz\r\n\r\nI'll add documents as another PR.\r\n\r\n> have a unit test that spawns up an Athenz service and verify the authentication end-to-end\r\n\r\nI'll investigate and if feasible, add the end-to-end unit test as another PR.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278405739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278418571","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278418571","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278418571,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQxODU3MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T18:29:39Z","updated_at":"2017-02-08T18:29:39Z","author_association":"CONTRIBUTOR","body":"Change looks good, though there are few tests failing in travis build. eg: \r\n\r\n```\r\n2017-02-08 17:29:48,710 - INFO  - [main:TestListener@53] - @@@@@@@@@@@@@ STARTING TEST - com.yahoo.pulsar.broker.service.ResendRequestTest / testExclusiveCumulativeAckedNormalTopic -- attrs: []\r\n2017-02-08 17:30:19,760 - ERROR - [main:TestListener@41] - ------------ Test Failed - \r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278418571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278429143","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278429143","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278429143,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQyOTE0Mw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:07:14Z","updated_at":"2017-02-08T19:07:14Z","author_association":"CONTRIBUTOR","body":"@merlimat couldn't reproduce this errors on my machine, but I did realize that Travis is running extremely slow, maybe this is producing the failures?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278429143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278436948","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278436948","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278436948,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQzNjk0OA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:34:47Z","updated_at":"2017-02-08T19:34:47Z","author_association":"CONTRIBUTOR","body":"Do you know of any performance impact in switching to this, since it uses reflection?\r\nFor the build issue, Can you restart and see if it succeeds? Travis build env is super slow.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278436948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278440081","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278440081","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278440081,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ0MDA4MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:45:54Z","updated_at":"2017-02-08T19:50:02Z","author_association":"CONTRIBUTOR","body":"@saandrews it shouldn't have any performance impact that I know of, in fact it should benefit performance, since it reduces memory usage, and so gc pauses.\r\n\r\nI cannot restart the build in Travis, maybe @merlimat can\r\n\r\nEdit: I'm going to run a comparison of tests time of this branch against master on my machine to see if I get any significant difference.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278440081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278441509","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278441509","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278441509,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ0MTUwOQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:50:56Z","updated_at":"2017-02-08T19:50:56Z","author_association":"CONTRIBUTOR","body":"> Do you know of any performance impact in switching to this, since it uses reflection?\r\n\r\n@saandrews  The reflection is only used at static load time of the class. Using the updater is actually faster because is treated as an intrinsic operation by jvm (apart from the spared allocation).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278441509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278463306","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278463306","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278463306,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ2MzMwNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T21:13:11Z","updated_at":"2017-02-08T21:13:11Z","author_association":"CONTRIBUTOR","body":"@sschepens \r\n>I cannot restart the build in Travis, maybe @merlimat can\r\n\r\nAfter restarting the build: It took around 49 mins and then it has been terminated as it reached max time-limit of build-job: https://api.travis-ci.org/jobs/199668485/log.txt?deansi=true\r\nDo you want to check it or I can trigger another time.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278463306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278465612","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278465612","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278465612,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ2NTYxMg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T21:22:24Z","updated_at":"2017-02-08T21:22:24Z","author_association":"CONTRIBUTOR","body":"@rdhabalia I will indeed check it","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278465612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278468516","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278468516","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278468516,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ2ODUxNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T21:33:25Z","updated_at":"2017-02-08T21:33:25Z","author_association":"CONTRIBUTOR","body":"I am not in favor of storing `individualDeletedMessages` list into zookeeper as sometimes this list can be significantly huge for some subscribers and increasing size of zookeeper-snapshot due to this data is something which we want to avoid.\r\n**Another solution which I can think of:**\r\n- everytime when broker starts it creates a dedicated ledger which will just store individualDeletedMessages list for each subscriber when the topic gets unloaded.\r\n- broker stores ledger-position into cursor-metadata while closing the cursor for a given subscriber\r\n- at the time of topic loading broker can read the list from bookkeeper and recover it\r\n\r\n**It will raise a question: when can we delete the ledger?**\r\n- Probably broker can switchover ledger after X hour and we need to invent ledger_TTL to purge it\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278468516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278478372","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278478372","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278478372,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ3ODM3Mg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T22:10:58Z","updated_at":"2017-02-08T22:10:58Z","author_association":"CONTRIBUTOR","body":"@saandrews @merlimat @rdhabalia the issue seemed to be that I accidentally defaulted OwnedBundles to `isActive = false`.\r\nTests should run now.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278478372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278501875","html_url":"https://github.com/apache/pulsar/pull/197#issuecomment-278501875","issue_url":"https://api.github.com/repos/apache/pulsar/issues/197","id":278501875,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUwMTg3NQ==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T23:53:49Z","updated_at":"2017-02-08T23:53:49Z","author_association":"NONE","body":"Thank you for submitting this pull request, however I do not see a valid CLA on file for you. Before we can merge this request please visit https://yahoocla.herokuapp.com/ and agree to the terms. Thanks! :smile:","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278501875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278634713","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278634713","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278634713,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODYzNDcxMw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T13:04:53Z","updated_at":"2017-02-09T13:38:41Z","author_association":"CONTRIBUTOR","body":"@rdhabalia this would require much more work and yet another ledger for every cursor.\r\n\r\nAlso, if a broker were to crash unexpectedly, it would not have persisted `individualDeletedMessages` and that would trigger the same behavior we see now.\r\n\r\nMaybe we could use the same ledger we have now, and force a read to it's last entry on recover.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278634713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278706808","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278706808","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278706808,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcwNjgwOA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:09:35Z","updated_at":"2017-02-09T19:03:54Z","author_association":"CONTRIBUTOR","body":"@merlimat @rdhabalia I'm investigating test failues.\r\nApparently the issue seems to be that we're creating [spies of Producer](https://github.com/sschepens/pulsar/blob/01869030c2c46e070ea8158afb6c5dbcaec9e7b4/pulsar-broker/src/test/java/com/yahoo/pulsar/client/impl/MessageIdTest.java#L331)\r\nThis creates a new instance of a class, and so when updating the [state](https://github.com/sschepens/pulsar/blob/01869030c2c46e070ea8158afb6c5dbcaec9e7b4/pulsar-client/src/main/java/com/yahoo/pulsar/client/impl/HandlerBase.java#L29) it actually updates the internal state of the spy and not of the original producer.\r\n\r\nMaybe we can change the test to not spy on the producer, or have all changes to state go through methods so they get proxied to the original instance.\r\n\r\nWhat do you guys think? \r\n\r\nEDIT: this did not happen before, because the spy got a copy of the AtomicReference and modified the same object.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278706808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278707362","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278707362","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278707362,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcwNzM2Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:11:22Z","updated_at":"2017-02-09T17:11:22Z","author_association":"CONTRIBUTOR","body":"What about persisting a max number of intervals, stopping after that?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278707362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278708220","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278708220","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278708220,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcwODIyMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:14:08Z","updated_at":"2017-02-09T17:14:08Z","author_association":"CONTRIBUTOR","body":"This way we can control how big the BK entry or z-node can grow. It will not be perfectly accurate, though better than today. I think storing 1k intervals should be pretty safe. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278708220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278729452","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278729452","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278729452,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcyOTQ1Mg==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T18:27:49Z","updated_at":"2017-02-09T18:27:49Z","author_association":"CONTRIBUTOR","body":"Can we persist this info into a ledger instead of storing it in zookeeper? Else we will introduce far more reads to zk during startup, which will be an issue when topic grows.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278729452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278730405","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278730405","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278730405,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODczMDQwNQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T18:31:17Z","updated_at":"2017-02-09T18:31:17Z","author_association":"CONTRIBUTOR","body":"@saandrews The mark-delete position is already stored either in a ledger or in a z-node. \r\n\r\nNormally it just gets written into the cursor ledger. During cursor ledger roll-over it also gets written in the z-node (and used as a fallback, in case the cursor ledgers fails to recover). \r\n\r\nThe other time when mark-delete position is stored in the z-node is when we do the graceful close of the topic. We store in the z-node and throw away the cursor ledger.\r\n\r\nWith this change, the number of writes stays exactly the same. It only changes (potentially) the amount of information stored.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278730405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278732620","html_url":"https://github.com/apache/pulsar/issues/198#issuecomment-278732620","issue_url":"https://api.github.com/repos/apache/pulsar/issues/198","id":278732620,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODczMjYyMA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T18:38:40Z","updated_at":"2017-02-09T18:38:40Z","author_association":"CONTRIBUTOR","body":"@jai1 Can you also add instructions on how to install dependencies on Mac in the c++ readme page?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278732620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278739490","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278739490","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278739490,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODczOTQ5MA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:03:10Z","updated_at":"2017-02-09T19:03:10Z","author_association":"CONTRIBUTOR","body":"@merlimat if we're concerned with storing too much on ZK, we can always force a read to the last position in the last ledger to get the list of `individualDeletedMessages`. This would require not setting ledger to -1 when closing it.\r\nIf not we can probably make the amount of ranges stored configurable on brokers, or even be disabled.\r\nWe could also probably add configurations to specify the behavior when max amount of ranges is reached, one could probably want to discard the older ranges (meaning those ranges will effectively be acked), and some would like to discard the newer ones, but face potential backlog on bundle unload.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278739490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278740600","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278740600","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278740600,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc0MDYwMA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:07:27Z","updated_at":"2017-02-09T19:07:27Z","author_association":"CONTRIBUTOR","body":">this would require much more work and yet another ledger for every cursor.\r\n\r\nNo, broker will create only one ledger where all the cursors will write their list when bundle will be unloaded/or on some interval. And broker can roll-over that ledger with expiry time stored at some zk-location and one of the task at leader-broker can purge expired ledger.\r\n\r\n>Also, if a broker were to crash unexpectedly, it would not have persisted individualDeletedMessages and that would trigger the same behavior we see now.\r\n\r\nyes, when broker crashes it also fails to update metadata into zk as well. So, broker crashing always fails to store current state and it falls back to recovery with fallback information.\r\n\r\n>What about persisting a max number of intervals, stopping after that? This way we can control how big the BK entry or z-node can grow. It will not be perfectly accurate, though better than today. I think storing 1k intervals should be pretty safe.\r\n\r\nYes, but I am just thinking it may not solve the problem entirely if there will be many intervals in a initial range of messages which will prevent to store latest individualDeletedMessageList and it resets cursor to old message range only. \r\n- Also rollback strategy need to be think of with this change while initializing cursor.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278740600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278741971","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278741971","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278741971,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc0MTk3MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:12:34Z","updated_at":"2017-02-09T19:12:34Z","author_association":"CONTRIBUTOR","body":"> No, broker will create only one ledger where all the cursors will write their list when bundle will be unloaded/or on some interval. And broker can roll-over that ledger with expiry time stored at some zk-location and one of the task at leader-broker can purge expired ledger.\r\n\r\nBut this entry will potentially grow very large and hit some limit?\r\n\r\n> yes, when broker crashes it also fails to update metadata into zk as well. So, broker crashing always fails to store current state and it falls back to recovery with fallback information.\r\n\r\nYes, but with what I've currently done, this information is also stored on the cursor ledger.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278741971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278746605","html_url":"https://github.com/apache/pulsar/issues/198#issuecomment-278746605","issue_url":"https://api.github.com/repos/apache/pulsar/issues/198","id":278746605,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc0NjYwNQ==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:29:18Z","updated_at":"2017-02-09T19:29:18Z","author_association":"CONTRIBUTOR","body":"Along with that, Jai1 is trying to find ways to install platform\ndependancies through cmake itself.\n\nOn Thu, Feb 9, 2017 at 10:38 AM, Matteo Merli <notifications@github.com>\nwrote:\n\n> @jai1 <https://github.com/jai1> Can you also add instructions on how to\n> install dependencies on Mac in the c++ readme page?\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/yahoo/pulsar/issues/198#issuecomment-278732620>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/ATk4LKmSLy_200y2NED40hQvYG5GpNVtks5ra10zgaJpZM4L7iYs>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278746605/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278751468","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278751468","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278751468,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc1MTQ2OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:47:09Z","updated_at":"2017-02-09T19:47:09Z","author_association":"CONTRIBUTOR","body":"> No, broker will create only one ledger where all the cursors will write their list when bundle will be unloaded/or on some interval. And broker can roll-over that ledger with expiry time stored at some zk-location and one of the task at leader-broker can purge expired ledger.\r\n\r\n@rdhabalia That would require to open and recover one more ledger when loading the topic.\r\nI like the current approach more, though with a safety limit.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278751468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278754346","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278754346","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278754346,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc1NDM0Ng==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:57:23Z","updated_at":"2017-02-09T19:57:23Z","author_association":"CONTRIBUTOR","body":"@merlimat another approach to reduce the size a bit, would be to only store the unacked messages of the ranges, and then build the ranges on runtime, this would require more logic that just picking up the ranges though","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278754346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278757615","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278757615","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278757615,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc1NzYxNQ==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T20:08:22Z","updated_at":"2017-02-09T20:08:22Z","author_association":"CONTRIBUTOR","body":"I was mostly concerned about the amount of data stored in Zk. Storing ranges or having a limit is better to contain its growth. Though it won't help with one unacked message pockets.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278757615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278761354","html_url":"https://github.com/apache/pulsar/pull/195#issuecomment-278761354","issue_url":"https://api.github.com/repos/apache/pulsar/issues/195","id":278761354,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc2MTM1NA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T20:21:41Z","updated_at":"2017-02-09T20:21:41Z","author_association":"CONTRIBUTOR","body":"@merlimat @rdhabalia I managed to fix the failing tests making spies proxy method calls to original instances, please check the tests I modified","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278761354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278764474","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278764474","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278764474,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc2NDQ3NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T20:32:22Z","updated_at":"2017-02-09T20:32:22Z","author_association":"CONTRIBUTOR","body":"> I was mostly concerned about the amount of data stored in Zk. Storing ranges or having a limit is better to contain its growth. Though it won't help with one unacked message pockets.\r\n\r\nIt will help, right? If you put a cap on 1000 (or whatever number) intervals, that means that, that we can record 1000 disjointed \"holes\" and remember about acked messages. After that, the rest will be replayed in case of broker restart (like today we're replaying everything).","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278764474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278804955","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-278804955","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":278804955,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgwNDk1NQ==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T23:09:25Z","updated_at":"2017-02-09T23:09:25Z","author_association":"CONTRIBUTOR","body":"It will help. In a bigger cluster 1000 itself might be big. In a bigger cluster, knowing the overall size of individually deleted entries across topics might help to realize and contain its growth. But it's not straightforward. We can go with this for now.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/278804955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279319303","html_url":"https://github.com/apache/pulsar/pull/205#issuecomment-279319303","issue_url":"https://api.github.com/repos/apache/pulsar/issues/205","id":279319303,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTMxOTMwMw==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T08:11:15Z","updated_at":"2017-02-13T08:11:15Z","author_association":"NONE","body":"Thank you for submitting this pull request, however I do not see a valid CLA on file for you. Before we can merge this request please visit https://yahoocla.herokuapp.com/ and agree to the terms. Thanks! :smile:","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279319303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279421732","html_url":"https://github.com/apache/pulsar/pull/205#issuecomment-279421732","issue_url":"https://api.github.com/repos/apache/pulsar/issues/205","id":279421732,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTQyMTczMg==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T15:20:22Z","updated_at":"2017-02-13T15:20:22Z","author_association":"NONE","body":"'Whether' indicates there is an alternative. A persistent topic is one that is expected to be durably persisted  to a replicated on disk data store with no alternative.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279421732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279528870","html_url":"https://github.com/apache/pulsar/issues/116#issuecomment-279528870","issue_url":"https://api.github.com/repos/apache/pulsar/issues/116","id":279528870,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTUyODg3MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T21:31:16Z","updated_at":"2017-02-13T21:31:16Z","author_association":"CONTRIBUTOR","body":"@rdhabalia `testBrokerDiscoveryRoundRobin` is still failing from time to time","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279528870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279537545","html_url":"https://github.com/apache/pulsar/issues/116#issuecomment-279537545","issue_url":"https://api.github.com/repos/apache/pulsar/issues/116","id":279537545,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTUzNzU0NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T22:03:28Z","updated_at":"2017-02-13T22:03:28Z","author_association":"CONTRIBUTOR","body":"yes, I will look into it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279537545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279539075","html_url":"https://github.com/apache/pulsar/pull/204#issuecomment-279539075","issue_url":"https://api.github.com/repos/apache/pulsar/issues/204","id":279539075,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTUzOTA3NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T22:09:13Z","updated_at":"2017-02-13T22:09:13Z","author_association":"CONTRIBUTOR","body":"@merlimat this fix has caught a bug in [test-case](https://github.com/yahoo/pulsar/blob/master/pulsar-broker/src/test/java/com/yahoo/pulsar/discovery/service/web/DiscoveryServiceWebTest.java#L99) as well:\r\n\r\n```\r\nFailed tests: \r\n  DiscoveryServiceWebTest.testRiderectUrlWithServerStarted:99 expected [Cannot set replication on a non-global namespace] but found [Cannot get the replication clusters for a non-global namespace]\r\n```\r\n\r\nCan we change assert-string as : `Cannot set replication on a non-global namespace`","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279539075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279539706","html_url":"https://github.com/apache/pulsar/pull/204#issuecomment-279539706","issue_url":"https://api.github.com/repos/apache/pulsar/issues/204","id":279539706,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTUzOTcwNg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T22:11:40Z","updated_at":"2017-02-13T22:11:40Z","author_association":"CONTRIBUTOR","body":"Yes, the test was sending a POST and comparing with the response for the GET operation. I'll fix that","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279539706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279563158","html_url":"https://github.com/apache/pulsar/pull/200#issuecomment-279563158","issue_url":"https://api.github.com/repos/apache/pulsar/issues/200","id":279563158,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU2MzE1OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T23:57:47Z","updated_at":"2017-02-13T23:57:47Z","author_association":"CONTRIBUTOR","body":"@saandrews @rdhabalia Please take a look","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279563158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279576562","html_url":"https://github.com/apache/pulsar/pull/188#issuecomment-279576562","issue_url":"https://api.github.com/repos/apache/pulsar/issues/188","id":279576562,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU3NjU2Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T01:14:37Z","updated_at":"2017-02-14T01:14:37Z","author_association":"CONTRIBUTOR","body":"@merlimat Just minor comments. It looks good to me and great effort. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279576562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279805574","html_url":"https://github.com/apache/pulsar/pull/204#issuecomment-279805574","issue_url":"https://api.github.com/repos/apache/pulsar/issues/204","id":279805574,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTgwNTU3NA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T19:14:43Z","updated_at":"2017-02-14T19:14:43Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279805574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279869858","html_url":"https://github.com/apache/pulsar/pull/200#issuecomment-279869858","issue_url":"https://api.github.com/repos/apache/pulsar/issues/200","id":279869858,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg2OTg1OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T23:27:53Z","updated_at":"2017-02-14T23:27:53Z","author_association":"CONTRIBUTOR","body":"@yush1ga : minor comments. looks good to me. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/279869858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]