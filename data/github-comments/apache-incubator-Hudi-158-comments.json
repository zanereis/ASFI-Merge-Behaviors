[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930043315","html_url":"https://github.com/apache/hudi/issues/3731#issuecomment-930043315","issue_url":"https://api.github.com/repos/apache/hudi/issues/3731","id":930043315,"node_id":"IC_kwDOBI7nWM43b1Wz","user":{"login":"parisni","id":9535350,"node_id":"MDQ6VXNlcjk1MzUzNTA=","avatar_url":"https://avatars.githubusercontent.com/u/9535350?v=4","gravatar_id":"","url":"https://api.github.com/users/parisni","html_url":"https://github.com/parisni","followers_url":"https://api.github.com/users/parisni/followers","following_url":"https://api.github.com/users/parisni/following{/other_user}","gists_url":"https://api.github.com/users/parisni/gists{/gist_id}","starred_url":"https://api.github.com/users/parisni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parisni/subscriptions","organizations_url":"https://api.github.com/users/parisni/orgs","repos_url":"https://api.github.com/users/parisni/repos","events_url":"https://api.github.com/users/parisni/events{/privacy}","received_events_url":"https://api.github.com/users/parisni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T10:17:43Z","updated_at":"2021-09-29T10:17:43Z","author_association":"CONTRIBUTOR","body":"tried to dig the source code, there is nothing about partition level lock. Apparently the lock mecanism is on the database+table level only.\r\n\r\nhttps://github.com/apache/hudi/blob/f52cb32f5f0c9e31b5addf29adbb886ca6d167dd/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/client/transaction/TransactionManager.java#L52\r\nhttps://github.com/apache/hudi/blob/f52cb32f5f0c9e31b5addf29adbb886ca6d167dd/hudi-client/hudi-client-common/src/main/java/org/apache/hudi/client/transaction/lock/LockManager.java\r\nhttps://github.com/apache/hudi/blob/f52cb32f5f0c9e31b5addf29adbb886ca6d167dd/hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/HiveMetastoreBasedLockProvider.java#L104\r\n\r\nAlso according to  the hivemestastore implementation SHALL have a zookeeper. This is not mentionned in the documentation\r\nhttps://github.com/apache/hudi/blob/f52cb32f5f0c9e31b5addf29adbb886ca6d167dd/hudi-sync/hudi-hive-sync/src/main/java/org/apache/hudi/hive/HiveMetastoreBasedLockProvider.java#L68\r\n\r\n> This feature is currently experimental and requires either Zookeeper or HiveMetastore to acquire locks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930043315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930059601","html_url":"https://github.com/apache/hudi/issues/2439#issuecomment-930059601","issue_url":"https://api.github.com/repos/apache/hudi/issues/2439","id":930059601,"node_id":"IC_kwDOBI7nWM43b5VR","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T10:42:10Z","updated_at":"2021-09-29T10:42:10Z","author_association":"MEMBER","body":"@rakeshramakrishnan For hive sync to work inline through Hudi, the hive-site.xml at <hive_install_dir>/conf should also be placed under <spark_install_dir>/conf and it should have the correct metastore uri. Can you check the hive metastore uri in hive-site.xml inside <spark_install_dir>/conf? \r\n\r\nI tried to reproduce with a remote MySQL database as metastore. My jdbc specific configs in hive-site.xml look like as follows:\r\n```\r\n\"javax.jdo.option.ConnectionURL\": \"jdbc:mysql://hostname:3306/hive?createDatabaseIfNotExist=true\",\r\n\"javax.jdo.option.ConnectionDriverName\": \"org.mariadb.jdbc.Driver\",\r\n\"javax.jdo.option.ConnectionUserName\": \"username\",\r\n\"javax.jdo.option.ConnectionPassword\": \"password\"  \r\n```\r\n\r\nThen the following pyspark script works:\r\n```\r\npyspark \\\r\n>  --conf \"spark.serializer=org.apache.spark.serializer.KryoSerializer\" \\\r\n>  --conf \"spark.sql.hive.convertMetastoreParquet=false\" \\\r\n>  --jars /home/hadoop/hudi-spark3-bundle_2.12-0.10.0-SNAPSHOT.jar,/usr/lib/spark/external/lib/spark-avro.jar\r\n...\r\n...\r\nUsing Python version 3.7.9 (default, Aug 27 2020 21:59:41)\r\nSparkSession available as 'spark'.\r\n>>> from pyspark.sql import functions as F\r\n>>>\r\n>>> inputDF = spark.createDataFrame([\r\n...  (\"100\", \"2015/01/01\", \"2015-01-01T13:51:39.340396Z\"),\r\n...  (\"101\", \"2015/01/01\", \"2015-01-01T12:14:58.597216Z\"),\r\n...  (\"102\", \"2015/01/01\", \"2015-01-01T13:51:40.417052Z\"),\r\n...  (\"103\", \"2015/01/01\", \"2015-01-01T13:51:40.519832Z\"),\r\n...  (\"104\", \"2015/01/02\", \"2015-01-01T12:15:00.512679Z\"),\r\n...  (\"105\", \"2015/01/02\", \"2015-01-01T13:51:42.248818Z\")],\r\n...  [\"id\", \"creation_date\", \"last_update_time\"])\r\n>>>\r\n>>> hudiOptions = {\r\n...   \"hoodie.table.name\" : \"hudi_hive_table\",\r\n...   \"hoodie.datasource.write.table.type\" : \"COPY_ON_WRITE\",\r\n...   \"hoodie.datasource.write.operation\" : \"insert\",\r\n...   \"hoodie.datasource.write.recordkey.field\" : \"id\",\r\n...   \"hoodie.datasource.write.partitionpath.field\" : \"creation_date\",\r\n...   \"hoodie.datasource.write.precombine.field\" : \"last_update_time\",\r\n...   \"hoodie.datasource.hive_sync.enable\" : \"true\",\r\n...   \"hoodie.datasource.hive_sync.table\" : \"hudi_hive_table\",\r\n...   \"hoodie.datasource.hive_sync.partition_fields\" : \"creation_date\"\r\n... }\r\n>>>\r\n>>> inputDF.write.format(\"org.apache.hudi\").options(**hudiOptions).mode(\"overwrite\").save(\"s3://huditestbkt/hive_sync/\")\r\n21/09/29 10:22:08 WARN HoodieSparkSqlWriter$: hoodie table at s3://huditestbkt/hive_sync already exists. Deleting existing data & overwriting with new data.\r\n21/09/29 10:22:34 WARN HiveConf: HiveConf of name hive.server2.thrift.url does not exist\r\n>>>\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930059601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930078959","html_url":"https://github.com/apache/hudi/issues/2544#issuecomment-930078959","issue_url":"https://api.github.com/repos/apache/hudi/issues/2544","id":930078959,"node_id":"IC_kwDOBI7nWM43b-Dv","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T11:12:06Z","updated_at":"2021-09-29T11:12:06Z","author_association":"MEMBER","body":"This issue has been fixed and is no longer reproducible. Here's the gist with the latest master code: https://gist.github.com/codope/fea4455d84d37496e8f518afdc803795","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930078959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930088089","html_url":"https://github.com/apache/hudi/issues/2564#issuecomment-930088089","issue_url":"https://api.github.com/repos/apache/hudi/issues/2564","id":930088089,"node_id":"IC_kwDOBI7nWM43cASZ","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T11:26:31Z","updated_at":"2021-09-29T11:26:31Z","author_association":"CONTRIBUTOR","body":"@mauropelucchi @bgt-cdedels : This issue is already very long. Would you mind starting a new one, please. I would like to keep this for the original issue raised by the author. I will check out your posts here in the mean time. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930088089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930090310","html_url":"https://github.com/apache/hudi/issues/2564#issuecomment-930090310","issue_url":"https://api.github.com/repos/apache/hudi/issues/2564","id":930090310,"node_id":"IC_kwDOBI7nWM43cA1G","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T11:30:03Z","updated_at":"2021-09-29T11:30:03Z","author_association":"CONTRIBUTOR","body":"@mauropelucchi : curious as to your table type choice. I see you are setting max delta commits to compact to 1. So, you might as well choose COW to easier operability. wondering if you are doing some POC or something, but intend to bump this number up later. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930090310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930092640","html_url":"https://github.com/apache/hudi/issues/2992#issuecomment-930092640","issue_url":"https://api.github.com/repos/apache/hudi/issues/2992","id":930092640,"node_id":"IC_kwDOBI7nWM43cBZg","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T11:33:39Z","updated_at":"2021-09-29T11:33:39Z","author_association":"CONTRIBUTOR","body":"@am-cpp @ayush71994 . sorry, missed from the radar. Are you folks still interested in triaging this? I can assist you on this. Let me know. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930092640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930100937","html_url":"https://github.com/apache/hudi/issues/2688#issuecomment-930100937","issue_url":"https://api.github.com/repos/apache/hudi/issues/2688","id":930100937,"node_id":"IC_kwDOBI7nWM43cDbJ","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T11:46:52Z","updated_at":"2021-09-29T11:46:52Z","author_association":"MEMBER","body":"There was an issue that got fixed recently by #3712 \r\n@rubenssoto @niloo-sh  @stym06 Can you give the latest master a try on EMR? I could not reproduce the issue on EMR 6.2 and below is what my script looks like.\r\n```\r\n$ spark-shell \\\r\n> --conf \"spark.serializer=org.apache.spark.serializer.KryoSerializer\" \\\r\n> --conf \"spark.sql.hive.convertMetastoreParquet=false\" \\\r\n> --jars /home/hadoop/hudi-spark3-bundle_2.12-0.10.0-SNAPSHOT.jar,/usr/lib/spark/external/lib/spark-avro.jar\r\n...\r\n...\r\nimport org.apache.spark.sql.SaveMode\r\nimport org.apache.spark.sql.functions._\r\nimport org.apache.hudi.DataSourceWriteOptions\r\nimport org.apache.hudi.DataSourceReadOptions\r\nimport org.apache.hudi.config.HoodieWriteConfig\r\nimport org.apache.hudi.hive.MultiPartKeysValueExtractor\r\n\r\nval inputDF = Seq(\r\n (\"100\", \"2015-01-01\", \"2015-01-01T13:51:39.340396Z\"),\r\n (\"101\", \"2015-01-01\", \"2015-01-01T12:14:58.597216Z\"),\r\n (\"102\", \"2015-01-01\", \"2015-01-01T13:51:40.417052Z\"),\r\n (\"103\", \"2015-01-01\", \"2015-01-01T13:51:40.519832Z\"),\r\n (\"104\", \"2015-01-02\", \"2015-01-01T12:15:00.512679Z\"),\r\n (\"105\", \"2015-01-02\", \"2015-01-01T13:51:42.248818Z\")\r\n ).toDF(\"id\", \"creation_date\", \"last_update_time\")\r\n\r\nval hudiOptions = Map[String,String](\r\n  HoodieWriteConfig.TBL_NAME.key -> \"my_hudi_table\",\r\n  DataSourceWriteOptions.TABLE_TYPE.key -> \"COPY_ON_WRITE\", \r\n  DataSourceWriteOptions.RECORDKEY_FIELD.key -> \"id\",\r\n  DataSourceWriteOptions.PARTITIONPATH_FIELD.key -> \"creation_date\",\r\n  DataSourceWriteOptions.PRECOMBINE_FIELD.key -> \"last_update_time\",\r\n  DataSourceWriteOptions.HIVE_SYNC_ENABLED.key -> \"true\",\r\n  DataSourceWriteOptions.HIVE_TABLE.key -> \"my_hudi_table\",\r\n  DataSourceWriteOptions.HIVE_PARTITION_FIELDS.key -> \"creation_date\",\r\n  DataSourceWriteOptions.HIVE_PARTITION_EXTRACTOR_CLASS.key -> classOf[MultiPartKeysValueExtractor].getName\r\n)\r\n\r\n// Write the DataFrame as a Hudi dataset\r\ninputDF.write\r\n  .format(\"org.apache.hudi\")\r\n  .option(DataSourceWriteOptions.OPERATION.key, DataSourceWriteOptions.INSERT_OPERATION_OPT_VAL)\r\n  .options(hudiOptions)\r\n  .mode(SaveMode.Overwrite)\r\n  .save(\"s3://huditestbkt/hive_sync/\")\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930100937/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930110816","html_url":"https://github.com/apache/hudi/issues/3607#issuecomment-930110816","issue_url":"https://api.github.com/repos/apache/hudi/issues/3607","id":930110816,"node_id":"IC_kwDOBI7nWM43cF1g","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T12:02:10Z","updated_at":"2021-09-29T12:02:10Z","author_association":"MEMBER","body":"@zhangyue19921010 You're right. I think you're talking about #3623 \r\nJust left a small comment there. If that works let's merge it. I can also help in testing the dependency changes.\r\nFYI, there is an [open PR](https://github.com/prestodb/presto/pull/15866) for Presto to integrate with Hudi's metadata listing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930110816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930112068","html_url":"https://github.com/apache/hudi/issues/3713#issuecomment-930112068","issue_url":"https://api.github.com/repos/apache/hudi/issues/3713","id":930112068,"node_id":"IC_kwDOBI7nWM43cGJE","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T12:03:54Z","updated_at":"2021-09-29T12:04:05Z","author_association":"MEMBER","body":"> The end-goal is to have a docker image which can be used to run tests locally on a dev machine.\r\n\r\nFor this I would suggest to give our readymade [docker setup](https://hudi.apache.org/docs/docker_demo/) a try.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930112068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930123547","html_url":"https://github.com/apache/hudi/issues/2992#issuecomment-930123547","issue_url":"https://api.github.com/repos/apache/hudi/issues/2992","id":930123547,"node_id":"IC_kwDOBI7nWM43cI8b","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T12:20:25Z","updated_at":"2021-09-29T12:20:25Z","author_association":"CONTRIBUTOR","body":"I could not reproduce in latest master. \r\nhttps://gist.github.com/nsivabalan/23caa2f57c41bc9356ed7fa29590c147\r\n\r\nHere is my understanding. \r\nINSERT_DROP_DUPES will delete records from incoming df with those matching in existing hudi table. when this is used along with INSERT_OVERRIDE operation, first insert_drop_dupes kicks in and so, possible some records from incoming batch will be dropped. and then INSERT_OVERRIDE is performed. and any matching partitions will be overritten. In my gist link, I did not use insert_drop_dupes for INSERT_OVERRIDE, just to show that it works. You need to set combine.before.insert/upsert to true to drop duplicates among incoming batch. \r\n\r\nHere is the output if I use insert_drop_dupes with insert_override \r\n\r\n+------+---------+---+\r\n|typeId|recordKey|str|\r\n+------+---------+---+\r\n|2     |key4     |mno|\r\n|1     |key1     |def|\r\n|3     |key5     |pqr|\r\n+------+---------+---+\r\n\r\nAs you could see, key2 is not present here, bcoz, it was dropped since it was already in hudi table. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930123547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930129481","html_url":"https://github.com/apache/hudi/issues/3242#issuecomment-930129481","issue_url":"https://api.github.com/repos/apache/hudi/issues/3242","id":930129481,"node_id":"IC_kwDOBI7nWM43cKZJ","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T12:29:02Z","updated_at":"2021-09-29T12:29:02Z","author_association":"MEMBER","body":"> @moranyuwen can you solve this problem? I have this problem, but I can not solve it. I don't know how set mysql database instead derby, in Hudi config in spark code.\r\n\r\n@niloo-sh Ensure that the following configs are set properly in hive-site.xml\r\n```\r\n\"javax.jdo.option.ConnectionURL\": \"jdbc:mysql://hostname:3306/hive?createDatabaseIfNotExist=true\",\r\n\"javax.jdo.option.ConnectionDriverName\": \"org.mariadb.jdbc.Driver\",\r\n\"javax.jdo.option.ConnectionUserName\": \"username\",\r\n\"javax.jdo.option.ConnectionPassword\": \"password\"\r\n```\r\n\r\nThen, you need to specify the following Hudi configs to run hive sync:\r\n```\r\n\"hoodie.datasource.meta.sync.enable\": \"true\",\r\n\"hoodie.datasource.hive_sync.use_jdbc\": \"true\",\r\n\"hoodie.datasource.hive_sync.jdbcurl\": \"jdbc:mysql://hostname:3306/hive?createDatabaseIfNotExist=true\",\r\n\"hoodie.datasource.hive_sync.username\": \"username\",\r\n\"hoodie.datasource.hive_sync.password\": \"password\",\r\n\"hoodie.datasource.hive_sync.table\": \"my_hudi_table_name\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930129481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930199853","html_url":"https://github.com/apache/hudi/pull/3732#issuecomment-930199853","issue_url":"https://api.github.com/repos/apache/hudi/issues/3732","id":930199853,"node_id":"IC_kwDOBI7nWM43cbkt","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T13:54:38Z","updated_at":"2021-09-29T14:38:14Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"546b457005237b5f7c2c51b9e1aef4b121110dc1\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2462\",\n    \"triggerID\" : \"546b457005237b5f7c2c51b9e1aef4b121110dc1\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 546b457005237b5f7c2c51b9e1aef4b121110dc1 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2462) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930199853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930255663","html_url":"https://github.com/apache/hudi/issues/3297#issuecomment-930255663","issue_url":"https://api.github.com/repos/apache/hudi/issues/3297","id":930255663,"node_id":"IC_kwDOBI7nWM43cpMv","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T14:55:24Z","updated_at":"2021-09-29T14:55:24Z","author_association":"CONTRIBUTOR","body":"@zxding : can you respond to Sagar's question above. I am going to try reproducing this issue. would appreciate if you can give more specifics. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930255663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930269121","html_url":"https://github.com/apache/hudi/issues/3499#issuecomment-930269121","issue_url":"https://api.github.com/repos/apache/hudi/issues/3499","id":930269121,"node_id":"IC_kwDOBI7nWM43csfB","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T15:10:01Z","updated_at":"2021-09-29T15:12:21Z","author_association":"CONTRIBUTOR","body":"@codejoyan : whats the key generator you are using? Can you confirm you are setting those params (key gen, record key, partition path) while setting these clustering configs as well. \r\nbecause, from stack trace this is what I see. \r\nSince you don't set any value for \"hoodie.clustering.plan.strategy.sort.columns\", we resot to using built in BulkInsertSort mode. by default we do global sorting here depending on (partition path, record key) pair. \r\n\r\nWe can try out one thing here. We can try to set no sorting mode and see what happens. \r\n \"hoodie.bulkinsert.sort.mode\" = \"NONE\"\r\n\r\nAlternatively, can you give it a shot by setting \"hoodie.clustering.plan.strategy.sort.columns\" to record key field may be. We can also see how that pans out. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930269121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930287792","html_url":"https://github.com/apache/hudi/pull/3671#issuecomment-930287792","issue_url":"https://api.github.com/repos/apache/hudi/issues/3671","id":930287792,"node_id":"IC_kwDOBI7nWM43cxCw","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T15:30:22Z","updated_at":"2021-09-29T15:30:22Z","author_association":"CONTRIBUTOR","body":"> > @fengjian428 Check CI again?\r\n> \r\n> what you mean? the checks below all passed\r\n\r\nI mean the Azure CI, please check [here](https://github.com/apache/hudi/pull/3671#issuecomment-920215882).\r\n\r\nNow, Hudi's CI contains two parts.\r\n\r\nPart 1: The github workflows;\r\nPart 2: The Azure CI;\r\n\r\nThe merge condition is that the two parts are both successful.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930287792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930335250","html_url":"https://github.com/apache/hudi/issues/3670#issuecomment-930335250","issue_url":"https://api.github.com/repos/apache/hudi/issues/3670","id":930335250,"node_id":"IC_kwDOBI7nWM43c8oS","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T16:25:49Z","updated_at":"2021-09-29T16:27:40Z","author_association":"MEMBER","body":"i can replicate the issue in local env, even by setting `ComplexKeyGenerator`, datasource delete not working, while delete via spark sql worked. Filing a JIRA to have detailed scripts\r\nhttps://issues.apache.org/jira/browse/HUDI-2500\r\n\r\nThanks @parisni for raising this.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930335250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930488974","html_url":"https://github.com/apache/hudi/issues/3733#issuecomment-930488974","issue_url":"https://api.github.com/repos/apache/hudi/issues/3733","id":930488974,"node_id":"IC_kwDOBI7nWM43diKO","user":{"login":"davehagman","id":73851873,"node_id":"MDQ6VXNlcjczODUxODcz","avatar_url":"https://avatars.githubusercontent.com/u/73851873?v=4","gravatar_id":"","url":"https://api.github.com/users/davehagman","html_url":"https://github.com/davehagman","followers_url":"https://api.github.com/users/davehagman/followers","following_url":"https://api.github.com/users/davehagman/following{/other_user}","gists_url":"https://api.github.com/users/davehagman/gists{/gist_id}","starred_url":"https://api.github.com/users/davehagman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davehagman/subscriptions","organizations_url":"https://api.github.com/users/davehagman/orgs","repos_url":"https://api.github.com/users/davehagman/repos","events_url":"https://api.github.com/users/davehagman/events{/privacy}","received_events_url":"https://api.github.com/users/davehagman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T19:45:11Z","updated_at":"2021-09-29T19:45:11Z","author_association":"CONTRIBUTOR","body":"I would also like to show some graphs comparing the baseline and what they look like during these latency spikes.\r\n\r\nThis is a graph of the number of files Created vs. Updated per batch (`commit.totalFilesInsert` and `commit.totalFilesUpdate` respectively). The number of updated files explodes:\r\n![image](https://user-images.githubusercontent.com/73851873/135337594-6b4d5f25-04ed-442b-bf06-0912a581220d.png)\r\n\r\nThe next graph shows that the number of bytes being written is magnitudes higher than baseline, according to Hudi metrics (`commit.totalBytesWritten`):\r\n![image](https://user-images.githubusercontent.com/73851873/135337855-e0bbc108-73f3-466c-a168-772dc85ea171.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930488974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930614238","html_url":"https://github.com/apache/hudi/pull/3727#issuecomment-930614238","issue_url":"https://api.github.com/repos/apache/hudi/issues/3727","id":930614238,"node_id":"IC_kwDOBI7nWM43eAve","user":{"login":"yihua","id":2497195,"node_id":"MDQ6VXNlcjI0OTcxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2497195?v=4","gravatar_id":"","url":"https://api.github.com/users/yihua","html_url":"https://github.com/yihua","followers_url":"https://api.github.com/users/yihua/followers","following_url":"https://api.github.com/users/yihua/following{/other_user}","gists_url":"https://api.github.com/users/yihua/gists{/gist_id}","starred_url":"https://api.github.com/users/yihua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihua/subscriptions","organizations_url":"https://api.github.com/users/yihua/orgs","repos_url":"https://api.github.com/users/yihua/repos","events_url":"https://api.github.com/users/yihua/events{/privacy}","received_events_url":"https://api.github.com/users/yihua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T23:16:25Z","updated_at":"2021-09-29T23:16:25Z","author_association":"CONTRIBUTOR","body":"I'm going to split this PR into two given the complexity of the compaction.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930614238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930614516","html_url":"https://github.com/apache/hudi/pull/3727#issuecomment-930614516","issue_url":"https://api.github.com/repos/apache/hudi/issues/3727","id":930614516,"node_id":"IC_kwDOBI7nWM43eAz0","user":{"login":"yihua","id":2497195,"node_id":"MDQ6VXNlcjI0OTcxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2497195?v=4","gravatar_id":"","url":"https://api.github.com/users/yihua","html_url":"https://github.com/yihua","followers_url":"https://api.github.com/users/yihua/followers","following_url":"https://api.github.com/users/yihua/following{/other_user}","gists_url":"https://api.github.com/users/yihua/gists{/gist_id}","starred_url":"https://api.github.com/users/yihua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihua/subscriptions","organizations_url":"https://api.github.com/users/yihua/orgs","repos_url":"https://api.github.com/users/yihua/repos","events_url":"https://api.github.com/users/yihua/events{/privacy}","received_events_url":"https://api.github.com/users/yihua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T23:16:58Z","updated_at":"2021-09-29T23:16:58Z","author_association":"CONTRIBUTOR","body":"@nsivabalan I'll address your comments in the PR of refactoring compaction.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930614516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930618920","html_url":"https://github.com/apache/hudi/pull/3734#issuecomment-930618920","issue_url":"https://api.github.com/repos/apache/hudi/issues/3734","id":930618920,"node_id":"IC_kwDOBI7nWM43eB4o","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-29T23:26:32Z","updated_at":"2021-09-30T19:14:08Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"3cec644131a4fda77510a97d548d3633b4731e78\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2464\",\n    \"triggerID\" : \"3cec644131a4fda77510a97d548d3633b4731e78\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"3cec644131a4fda77510a97d548d3633b4731e78\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2465\",\n    \"triggerID\" : \"930657396\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"68a20446360cb258d8f896d0d6bc0d49696f2788\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2476\",\n    \"triggerID\" : \"68a20446360cb258d8f896d0d6bc0d49696f2788\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 68a20446360cb258d8f896d0d6bc0d49696f2788 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2476) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930618920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930657396","html_url":"https://github.com/apache/hudi/pull/3734#issuecomment-930657396","issue_url":"https://api.github.com/repos/apache/hudi/issues/3734","id":930657396,"node_id":"IC_kwDOBI7nWM43eLR0","user":{"login":"yihua","id":2497195,"node_id":"MDQ6VXNlcjI0OTcxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2497195?v=4","gravatar_id":"","url":"https://api.github.com/users/yihua","html_url":"https://github.com/yihua","followers_url":"https://api.github.com/users/yihua/followers","following_url":"https://api.github.com/users/yihua/following{/other_user}","gists_url":"https://api.github.com/users/yihua/gists{/gist_id}","starred_url":"https://api.github.com/users/yihua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihua/subscriptions","organizations_url":"https://api.github.com/users/yihua/orgs","repos_url":"https://api.github.com/users/yihua/repos","events_url":"https://api.github.com/users/yihua/events{/privacy}","received_events_url":"https://api.github.com/users/yihua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T00:55:54Z","updated_at":"2021-09-30T00:55:54Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930657396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930677502","html_url":"https://github.com/apache/hudi/pull/3668#issuecomment-930677502","issue_url":"https://api.github.com/repos/apache/hudi/issues/3668","id":930677502,"node_id":"IC_kwDOBI7nWM43eQL-","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T01:33:12Z","updated_at":"2021-09-30T01:33:12Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930677502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930703026","html_url":"https://github.com/apache/hudi/issues/3735#issuecomment-930703026","issue_url":"https://api.github.com/repos/apache/hudi/issues/3735","id":930703026,"node_id":"IC_kwDOBI7nWM43eWay","user":{"login":"peanut-chenzhong","id":58263343,"node_id":"MDQ6VXNlcjU4MjYzMzQz","avatar_url":"https://avatars.githubusercontent.com/u/58263343?v=4","gravatar_id":"","url":"https://api.github.com/users/peanut-chenzhong","html_url":"https://github.com/peanut-chenzhong","followers_url":"https://api.github.com/users/peanut-chenzhong/followers","following_url":"https://api.github.com/users/peanut-chenzhong/following{/other_user}","gists_url":"https://api.github.com/users/peanut-chenzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/peanut-chenzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peanut-chenzhong/subscriptions","organizations_url":"https://api.github.com/users/peanut-chenzhong/orgs","repos_url":"https://api.github.com/users/peanut-chenzhong/repos","events_url":"https://api.github.com/users/peanut-chenzhong/events{/privacy}","received_events_url":"https://api.github.com/users/peanut-chenzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T02:40:15Z","updated_at":"2021-09-30T02:40:15Z","author_association":"CONTRIBUTOR","body":"@n3nash could you kindly help check this is an issue?\r\nIf yes I can rise an PR to solve it soom. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930703026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930715835","html_url":"https://github.com/apache/hudi/pull/3736#issuecomment-930715835","issue_url":"https://api.github.com/repos/apache/hudi/issues/3736","id":930715835,"node_id":"IC_kwDOBI7nWM43eZi7","user":{"login":"tangyoupeng","id":25345780,"node_id":"MDQ6VXNlcjI1MzQ1Nzgw","avatar_url":"https://avatars.githubusercontent.com/u/25345780?v=4","gravatar_id":"","url":"https://api.github.com/users/tangyoupeng","html_url":"https://github.com/tangyoupeng","followers_url":"https://api.github.com/users/tangyoupeng/followers","following_url":"https://api.github.com/users/tangyoupeng/following{/other_user}","gists_url":"https://api.github.com/users/tangyoupeng/gists{/gist_id}","starred_url":"https://api.github.com/users/tangyoupeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tangyoupeng/subscriptions","organizations_url":"https://api.github.com/users/tangyoupeng/orgs","repos_url":"https://api.github.com/users/tangyoupeng/repos","events_url":"https://api.github.com/users/tangyoupeng/events{/privacy}","received_events_url":"https://api.github.com/users/tangyoupeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T03:02:14Z","updated_at":"2021-09-30T03:02:14Z","author_association":"CONTRIBUTOR","body":"#3729 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930715835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930774206","html_url":"https://github.com/apache/hudi/issues/2564#issuecomment-930774206","issue_url":"https://api.github.com/repos/apache/hudi/issues/2564","id":930774206,"node_id":"IC_kwDOBI7nWM43eny-","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T04:33:32Z","updated_at":"2021-09-30T04:33:32Z","author_association":"NONE","body":"> @mauropelucchi : curious as to your table type choice. I see you are setting max delta commits to compact to 1. So, you might as well choose COW to easier operability. wondering if you are doing some POC or something, but intend to bump this number up later.\r\n\r\nHi @nsivabalan, we changed the configuration 'hoodie.cleaner.commits.retained': 4 from 1 during our test.\r\n\r\nAs @rswagatika mentioned:\r\n> UPDATE => Today morning when I ran the above query I could see the cleaning triggered and it did delete the files. So for production use I changed my config 'hoodie.cleaner.commits.retained': 4 from 1 and ran the test and it did work.\r\n\r\nFollowing your suggestion, I will open today a new issue about this behaviour \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930774206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930860695","html_url":"https://github.com/apache/hudi/pull/3674#issuecomment-930860695","issue_url":"https://api.github.com/repos/apache/hudi/issues/3674","id":930860695,"node_id":"IC_kwDOBI7nWM43e86X","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T06:42:56Z","updated_at":"2021-09-30T06:42:56Z","author_association":"CONTRIBUTOR","body":"@xushiyan I have addresses some suggestions. Any new inputs?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/930860695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931010144","html_url":"https://github.com/apache/hudi/pull/3738#issuecomment-931010144","issue_url":"https://api.github.com/repos/apache/hudi/issues/3738","id":931010144,"node_id":"IC_kwDOBI7nWM43fhZg","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T08:19:41Z","updated_at":"2021-09-30T09:01:40Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"4a58d8dd619b830e735c33d1f9c40b1359b50812\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2471\",\n    \"triggerID\" : \"4a58d8dd619b830e735c33d1f9c40b1359b50812\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 4a58d8dd619b830e735c33d1f9c40b1359b50812 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2471) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931010144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931027124","html_url":"https://github.com/apache/hudi/issues/1083#issuecomment-931027124","issue_url":"https://api.github.com/repos/apache/hudi/issues/1083","id":931027124,"node_id":"IC_kwDOBI7nWM43fli0","user":{"login":"stym06","id":20970728,"node_id":"MDQ6VXNlcjIwOTcwNzI4","avatar_url":"https://avatars.githubusercontent.com/u/20970728?v=4","gravatar_id":"","url":"https://api.github.com/users/stym06","html_url":"https://github.com/stym06","followers_url":"https://api.github.com/users/stym06/followers","following_url":"https://api.github.com/users/stym06/following{/other_user}","gists_url":"https://api.github.com/users/stym06/gists{/gist_id}","starred_url":"https://api.github.com/users/stym06/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stym06/subscriptions","organizations_url":"https://api.github.com/users/stym06/orgs","repos_url":"https://api.github.com/users/stym06/repos","events_url":"https://api.github.com/users/stym06/events{/privacy}","received_events_url":"https://api.github.com/users/stym06/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T08:27:46Z","updated_at":"2021-09-30T08:27:46Z","author_association":"CONTRIBUTOR","body":"@lamberken this is still happening. Do we always need to have the checkpoint in place?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931027124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931133022","html_url":"https://github.com/apache/hudi/issues/3735#issuecomment-931133022","issue_url":"https://api.github.com/repos/apache/hudi/issues/3735","id":931133022,"node_id":"IC_kwDOBI7nWM43f_Ze","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T09:29:35Z","updated_at":"2021-09-30T09:29:35Z","author_association":"MEMBER","body":"I think this is a bug. What's happening here is that the [overwrite check](https://github.com/apache/hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/common/model/OverwriteWithLatestAvroPayload.java#L102) in OverwriteWithLatestAvroPayload is simply checking whether the two objects are equal or not. Since the nullable column gets converted to avro schema, the [defaultVal() method](https://avro.apache.org/docs/1.8.2/api/java/org/apache/avro/Schema.Field.html#defaultVal()) returns the corresponding `JsonProperties.Null` but the other object in the check is not the same type. So, the check returns false and hence that field gets overwritten. Instead we should modify that method to something like:\r\n```\r\npublic Boolean overwriteField(Object value, Object defaultValue) {\r\n    if (value == null) {\r\n      return defaultValue instanceof JsonProperties.Null;\r\n    }\r\n    return Objects.equals(value, defaultValue);\r\n}\r\n```\r\n\r\n@peanut-chenzhong  I have filed [a bug](https://issues.apache.org/jira/browse/HUDI-2509). Please raise a PR if you have the fix.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931133022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931167837","html_url":"https://github.com/apache/hudi/pull/3203#issuecomment-931167837","issue_url":"https://api.github.com/repos/apache/hudi/issues/3203","id":931167837,"node_id":"IC_kwDOBI7nWM43gH5d","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T09:53:34Z","updated_at":"2021-09-30T09:53:34Z","author_association":"CONTRIBUTOR","body":"@danny0405 @leesf  already update the code。 could you pls review again","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931167837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931199668","html_url":"https://github.com/apache/hudi/issues/1867#issuecomment-931199668","issue_url":"https://api.github.com/repos/apache/hudi/issues/1867","id":931199668,"node_id":"IC_kwDOBI7nWM43gPq0","user":{"login":"absognety","id":25507554,"node_id":"MDQ6VXNlcjI1NTA3NTU0","avatar_url":"https://avatars.githubusercontent.com/u/25507554?v=4","gravatar_id":"","url":"https://api.github.com/users/absognety","html_url":"https://github.com/absognety","followers_url":"https://api.github.com/users/absognety/followers","following_url":"https://api.github.com/users/absognety/following{/other_user}","gists_url":"https://api.github.com/users/absognety/gists{/gist_id}","starred_url":"https://api.github.com/users/absognety/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/absognety/subscriptions","organizations_url":"https://api.github.com/users/absognety/orgs","repos_url":"https://api.github.com/users/absognety/repos","events_url":"https://api.github.com/users/absognety/events{/privacy}","received_events_url":"https://api.github.com/users/absognety/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T10:32:19Z","updated_at":"2021-09-30T10:32:19Z","author_association":"NONE","body":"@tsolanki95 what resolved this issue, I am facing the same issue when reading data written in hudi format from S3","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931199668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931261175","html_url":"https://github.com/apache/hudi/issues/3603#issuecomment-931261175","issue_url":"https://api.github.com/repos/apache/hudi/issues/3603","id":931261175,"node_id":"IC_kwDOBI7nWM43ger3","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T12:07:10Z","updated_at":"2021-09-30T12:07:10Z","author_association":"CONTRIBUTOR","body":"@fengjian428 : looks like its related to null in extra metadata. would you mind trying out the patch given by Sagar [here](https://github.com/codope/hudi/commit/750a3315badeb362d3b57cfc016e3661f4e25564). Solution you proposed will not archive only. May be it could solve the problem at hand, but don't think thats the right fix.\r\nWould appreciate if you can try it out and let us know how it goes. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931261175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931267143","html_url":"https://github.com/apache/hudi/issues/3603#issuecomment-931267143","issue_url":"https://api.github.com/repos/apache/hudi/issues/3603","id":931267143,"node_id":"IC_kwDOBI7nWM43ggJH","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T12:15:32Z","updated_at":"2021-09-30T12:16:26Z","author_association":"CONTRIBUTOR","body":"I do see from [code](https://github.com/apache/hudi/blob/47ed91799943271f219419cf209793a98b3f09b5/hudi-utilities/src/main/java/org/apache/hudi/utilities/deltastreamer/DeltaSync.java#L506) that we do add entry to extra metadata as below\r\n```\r\nHashMap<String, String> checkpointCommitMetadata = new HashMap<>();\r\n      checkpointCommitMetadata.put(CHECKPOINT_KEY, checkpointStr);\r\n      if (cfg.checkpoint != null) {\r\n        checkpointCommitMetadata.put(CHECKPOINT_RESET_KEY, cfg.checkpoint);\r\n      }\r\n```\r\n\r\nSo, entire map is not null for sure. Can you enable logs and see whats the checkpointStr after reading from source. may be its null w/ SqlSource in this case. \r\nAlso, have you set --commit-on-errors config in deltastreamer by any chance? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931267143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931358701","html_url":"https://github.com/apache/hudi/issues/2564#issuecomment-931358701","issue_url":"https://api.github.com/repos/apache/hudi/issues/2564","id":931358701,"node_id":"IC_kwDOBI7nWM43g2ft","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T14:09:59Z","updated_at":"2021-09-30T14:09:59Z","author_association":"NONE","body":"> @mauropelucchi : curious as to your table type choice. I see you are setting max delta commits to compact to 1. So, you might as well choose COW to easier operability. wondering if you are doing some POC or something, but intend to bump this number up later.\r\n\r\nAbout our solution --> we are in production on EMR 5.31 and hudi 0.6.0-amzn-0","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931358701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931364899","html_url":"https://github.com/apache/hudi/issues/2564#issuecomment-931364899","issue_url":"https://api.github.com/repos/apache/hudi/issues/2564","id":931364899,"node_id":"IC_kwDOBI7nWM43g4Aj","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T14:17:06Z","updated_at":"2021-09-30T14:17:06Z","author_association":"NONE","body":"@nsivabalan Here the new issue https://github.com/apache/hudi/issues/3739","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931364899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931369093","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931369093","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931369093,"node_id":"IC_kwDOBI7nWM43g5CF","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T14:21:52Z","updated_at":"2021-09-30T14:21:52Z","author_association":"NONE","body":"Attached the data for the \r\n\r\n1 - first execution of the spark job\r\n![1](https://user-images.githubusercontent.com/16307145/135472666-f65ceccd-da45-4747-82b4-5180478f5644.png)\r\n![1_commit](https://user-images.githubusercontent.com/16307145/135472680-b9981444-9919-4ceb-bd24-dfbc4f35b656.png)\r\n![1_data](https://user-images.githubusercontent.com/16307145/135472685-59119e9f-4726-4c99-a20f-ebdb82b962a5.png)\r\n![1_jobs](https://user-images.githubusercontent.com/16307145/135472689-0396e298-fb20-49b1-91be-9bba8f234803.png)\r\n\r\n2 - second execution of the spark job\r\n![2_commit](https://user-images.githubusercontent.com/16307145/135472954-7ee273e7-e453-40d8-818e-5e2d9046af2d.png)\r\n![2_data](https://user-images.githubusercontent.com/16307145/135472956-ba68db23-f1de-4ef4-b8a4-dea1f1be044a.png)\r\n![2_jobs](https://user-images.githubusercontent.com/16307145/135472958-9fc29adc-19d9-4c47-8619-1aa7d7f47862.png)\r\n![2](https://user-images.githubusercontent.com/16307145/135472946-897834f3-3cdf-41d3-8bf2-129e06962670.png)\r\n\r\n\r\n3 - 3![4_jobs](https://user-images.githubusercontent.com/16307145/135473159-2fb70cef-e5d9-41d7-add7-dbbe988257c7.png)\r\n![3](https://user-images.githubusercontent.com/16307145/135473059-129d3262-2062-4ebe-8e89-e7f3f0bfda0f.png)\r\n![3_commit](https://user-images.githubusercontent.com/16307145/135473067-ef91c1ac-9407-45db-9fa7-a5fc40465db3.png)\r\n![3_jobs](https://user-images.githubusercontent.com/16307145/135473073-022efb1c-8f66-4713-a3d3-c014edf13d8b.png)\r\n\r\n4 - 4° execution of the spark job\r\n![4](https://user-images.githubusercontent.com/16307145/135473139-abc33d87-e95a-4cd2-b728-c9aba6e3ed06.png)\r\n![4_commit](https://user-images.githubusercontent.com/16307145/135473151-811b3335-1a9a-4ca9-96cf-d5343d170b97.png)\r\n![4_data](https://user-images.githubusercontent.com/16307145/135473154-f90efb54-3d91-4d24-85bb-5d46842b0328.png)\r\n\r\n5 - 5° execution of the spark job\r\n![5_commit](https://user-images.githubusercontent.com/16307145/135473200-a224a26a-b1fe-418e-87d4-6db62bbce59c.png)\r\n![5_data](https://user-images.githubusercontent.com/16307145/135473209-085bd33b-fb6e-4887-8a04-deeec17b895d.png)\r\n![5_jobs](https://user-images.githubusercontent.com/16307145/135473212-2d6d7a54-415e-4b63-9d92-ba26d61693c1.png)\r\n\r\n![5](https://user-images.githubusercontent.com/16307145/135473187-5af622e7-8557-4293-9bc2-b60c08408145.png)\r\n\r\n6 - 6° execution of the spark job\r\n![6](https://user-images.githubusercontent.com/16307145/135473286-f4e8f201-d473-41e0-bdb2-d420b62eb957.png)\r\n![6_commit](https://user-images.githubusercontent.com/16307145/135473296-01ac1bef-1229-43b8-a98a-8fd041ac494b.png)\r\n![6_data](https://user-images.githubusercontent.com/16307145/135473301-6c12174a-2bdd-44b7-af4d-f28a15b0147c.png)\r\n![6_jobs](https://user-images.githubusercontent.com/16307145/135473304-37cd461f-5afd-43a4-911b-5fb9339ffc04.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931369093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931381693","html_url":"https://github.com/apache/hudi/pull/3740#issuecomment-931381693","issue_url":"https://api.github.com/repos/apache/hudi/issues/3740","id":931381693,"node_id":"IC_kwDOBI7nWM43g8G9","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T14:36:10Z","updated_at":"2021-10-08T21:27:10Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"f354e5708d11ffa375c3758e21eeb41d2e0566ed\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2473\",\n    \"triggerID\" : \"f354e5708d11ffa375c3758e21eeb41d2e0566ed\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"e4b4c092dc5e911ba265e6386d736faa932e5c7c\",\n    \"status\" : \"UNKNOWN\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"e4b4c092dc5e911ba265e6386d736faa932e5c7c\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"82de5a505690e819b35040390c3e35b95ec9b45e\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2482\",\n    \"triggerID\" : \"82de5a505690e819b35040390c3e35b95ec9b45e\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"849c3476ecd00486984052ce2b33c25924532add\",\n    \"status\" : \"UNKNOWN\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"849c3476ecd00486984052ce2b33c25924532add\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"6fcad17b918536cc5bfeb71a95f719bd71cae664\",\n    \"status\" : \"UNKNOWN\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"6fcad17b918536cc5bfeb71a95f719bd71cae664\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"563cfd4dac38bc36641579dc090d2f6bf4ec1d8e\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2483\",\n    \"triggerID\" : \"563cfd4dac38bc36641579dc090d2f6bf4ec1d8e\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"c169b3d838c37098448308522f2eb71d6352cc61\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2504\",\n    \"triggerID\" : \"c169b3d838c37098448308522f2eb71d6352cc61\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"d75e97d529e95eb4cbf46f7585f57309721ecc4b\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2505\",\n    \"triggerID\" : \"d75e97d529e95eb4cbf46f7585f57309721ecc4b\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"364f5489d68a530a36b150e6f370e5ff44803248\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2533\",\n    \"triggerID\" : \"364f5489d68a530a36b150e6f370e5ff44803248\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"27c313ba63f10a9ffeb8e2ae44a175a9b9d5f82b\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2534\",\n    \"triggerID\" : \"27c313ba63f10a9ffeb8e2ae44a175a9b9d5f82b\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"159f85af4cc63de1199636ad69746789c607210a\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2541\",\n    \"triggerID\" : \"159f85af4cc63de1199636ad69746789c607210a\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"bd32e53983967a9c261c7def3588118625f5130a\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2553\",\n    \"triggerID\" : \"bd32e53983967a9c261c7def3588118625f5130a\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* e4b4c092dc5e911ba265e6386d736faa932e5c7c UNKNOWN\n* 849c3476ecd00486984052ce2b33c25924532add UNKNOWN\n* 6fcad17b918536cc5bfeb71a95f719bd71cae664 UNKNOWN\n* bd32e53983967a9c261c7def3588118625f5130a Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2553) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931381693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931404620","html_url":"https://github.com/apache/hudi/issues/3724#issuecomment-931404620","issue_url":"https://api.github.com/repos/apache/hudi/issues/3724","id":931404620,"node_id":"IC_kwDOBI7nWM43hBtM","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T15:02:41Z","updated_at":"2021-09-30T15:02:41Z","author_association":"MEMBER","body":"Generally, for incremental queries we need to set following configs:\r\n```\r\n\"hoodie.datasource.query.type\" : \"incremental\",\r\n\"hoodie.datasource.read.begin.instanttime\" : \"commit_time_to_read_from\"\r\n```\r\nDid you try using these configs? You can also take a look at [TestStructuredStreaming](https://github.com/apache/hudi/blob/master/hudi-spark-datasource/hudi-spark/src/test/scala/org/apache/hudi/functional/TestStructuredStreaming.scala#L101) for an example usage.\r\n\r\n> What I'm trying to do is to obtain changes that are happening in one hudi dataset to then create incremental pipeline in spark and process them further.\r\n\r\nFor this, I would also suggest to take a look at HoodieIncrSource and setup a deltastreamer job using that source. For an example, take a look at [TestHoodieDeltaStreamer](https://github.com/apache/hudi/blob/47ed91799943271f219419cf209793a98b3f09b5/hudi-utilities/src/test/java/org/apache/hudi/utilities/functional/TestHoodieDeltaStreamer.java#L1225).","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931404620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931414918","html_url":"https://github.com/apache/hudi/issues/3582#issuecomment-931414918","issue_url":"https://api.github.com/repos/apache/hudi/issues/3582","id":931414918,"node_id":"IC_kwDOBI7nWM43hEOG","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T15:14:16Z","updated_at":"2021-09-30T15:45:35Z","author_association":"CONTRIBUTOR","body":"I got it working. not sure what was the issue earlier. \r\nhere is the script. \r\n\r\nNon-partitioned.\r\n```\r\n\r\nval df = spark.read.format(\"parquet\").load(\"/Users/nsb/Documents/personal/datasets/parquet_ny_4parts/\")\r\n\r\ndf.printSchema\r\nroot\r\n |-- VendorID: integer (nullable = true)\r\n |-- tpep_pickup_datetime: string (nullable = true)\r\n |-- tpep_dropoff_datetime: string (nullable = true)\r\n |-- passenger_count: integer (nullable = true)\r\n |-- trip_distance: double (nullable = true)\r\n |-- RatecodeID: integer (nullable = true)\r\n |-- store_and_fwd_flag: string (nullable = true)\r\n |-- PULocationID: integer (nullable = true)\r\n |-- DOLocationID: integer (nullable = true)\r\n |-- payment_type: integer (nullable = true)\r\n |-- fare_amount: double (nullable = true)\r\n |-- extra: double (nullable = true)\r\n |-- mta_tax: double (nullable = true)\r\n |-- tip_amount: double (nullable = true)\r\n |-- tolls_amount: double (nullable = true)\r\n |-- improvement_surcharge: double (nullable = true)\r\n |-- total_amount: double (nullable = true)\r\n |-- congestion_surcharge: double (nullable = true)\r\n |-- date_col: string (nullable = true)\r\n\r\nval basePath = \"/tmp/bootstrap_test\"\r\n\r\nval bootstrapDF = spark.emptyDataFrame\r\n\r\nbootstrapDF.write.\r\n      format(\"hudi\").\r\n      option(HoodieWriteConfig.TABLE_NAME, \"bootstrap_test\").\r\n      option(DataSourceWriteOptions.OPERATION_OPT_KEY, DataSourceWriteOptions.BOOTSTRAP_OPERATION_OPT_VAL).\r\n      option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, \"tpep_pickup_datetime\").\r\n      option(HoodieBootstrapConfig.BOOTSTRAP_BASE_PATH_PROP, \"/Users/nsb/Documents/personal/datasets/parquet_ny_4parts/\").\r\n      option(HoodieBootstrapConfig.BOOTSTRAP_KEYGEN_CLASS, \"org.apache.hudi.keygen.NonpartitionedKeyGenerator\").\r\n      option(\"hoodie.bootstrap.parallelism\",\"10\").\r\n      mode(SaveMode.Overwrite).\r\n      save(basePath)\r\n      \r\n\r\nvar hudiDf = spark.\r\n        read.\r\n        format(\"hudi\").\r\n        load(basePath + \"/*\")\r\n\r\nhudiDf.registerTempTable(\"hudi_tbl\")\r\n\r\nspark.sql(\"select count(distinct tpep_pickup_datetime) from hudi_tbl\").show()\r\nspark.sql(\"select * from hudi_tbl limit 10\").show(false)\r\n\r\n```\r\n\r\n\r\nand here is what worked for partitioned dataset.\r\n```\r\n\r\n val basePath = \"/tmp/bootstrap_test_partitioned\"\r\n\r\nval bootstrapDF = spark.emptyDataFrame\r\n\r\n\r\n// worked as well. \r\n\r\nbootstrapDF.write.\r\n      format(\"hudi\").\r\n      option(HoodieWriteConfig.TABLE_NAME, \"bootstrap_test\").\r\n      option(DataSourceWriteOptions.OPERATION_OPT_KEY, DataSourceWriteOptions.BOOTSTRAP_OPERATION_OPT_VAL).\r\n      option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, \"tpep_pickup_datetime\").\r\n      option(DataSourceWriteOptions.PARTITIONPATH_FIELD_OPT_KEY, \"date_col\").\r\n      option(\"hoodie.datasource.write.precombine.field\", \"tpep_dropoff_datetime\").\r\n      option(HoodieBootstrapConfig.BOOTSTRAP_BASE_PATH_PROP, \"/Users/nsb/Documents/personal/datasets/parquet_ny_4parts/\").\r\n      option(HoodieBootstrapConfig.BOOTSTRAP_KEYGEN_CLASS, \"org.apache.hudi.keygen.SimpleKeyGenerator\").\r\n      option(\"hoodie.bootstrap.parallelism\",\"50\").\r\n      mode(SaveMode.Overwrite).\r\n      save(basePath)\r\n      \r\n\r\n\r\nvar hudiDf1 = spark.\r\n        read.\r\n        format(\"hudi\").\r\n        load(basePath + \"/*\")\r\n\r\nhudiDf1.registerTempTable(\"hudi_tbl1\")\r\n\r\nspark.sql(\"select count(distinct tpep_pickup_datetime) from hudi_tbl1\").show()\r\nspark.sql(\"select * from hudi_tbl1 limit 10\").show(false)\r\n\r\n```\r\n\r\nAn upsert following this\r\n\r\n```\r\n val df = spark.read.format(\"parquet\").load(\"/Users/nsb/Documents/personal/datasets/parquet_ny_4parts/\").limit(1000)\r\nimport org.apache.hudi.QuickstartUtils._\r\nimport org.apache.spark.sql.SaveMode._\r\n\r\n\r\ndf.write.format(\"hudi\").\r\n  options(getQuickstartWriteConfigs).\r\n  option(DataSourceWriteOptions.PRECOMBINE_FIELD_OPT_KEY, \"tpep_dropoff_datetime\").\r\n  option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, \"tpep_pickup_datetime\").\r\n  option(DataSourceWriteOptions.PARTITIONPATH_FIELD_OPT_KEY, \"date_col\").\r\n  option(HoodieWriteConfig.TABLE_NAME, \"bootstrap_test\").\r\n  mode(Append).\r\n  save(basePath)\r\n```\r\n\r\nContents of .hoodie/\r\n```\r\nls -ltr /tmp/bootstrap_test_partitioned/.hoodie\r\ntotal 72\r\ndrwxr-xr-x  2 nsb  wheel     64 Sep 30 11:10 archived\r\n-rw-r--r--  1 nsb  wheel    583 Sep 30 11:10 hoodie.properties\r\ndrwxr-xr-x  4 nsb  wheel    128 Sep 30 11:10 metadata\r\n-rw-r--r--  1 nsb  wheel      0 Sep 30 11:10 00000000000001.commit.requested\r\n-rw-r--r--  1 nsb  wheel      0 Sep 30 11:10 00000000000001.inflight\r\n-rw-r--r--  1 nsb  wheel  20168 Sep 30 11:10 00000000000001.commit\r\n-rw-r--r--  1 nsb  wheel      0 Sep 30 11:44 20210930114415.commit.requested\r\n-rw-r--r--  1 nsb  wheel   3152 Sep 30 11:44 20210930114415.inflight\r\n-rw-r--r--  1 nsb  wheel   5791 Sep 30 11:44 20210930114415.commit\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931414918/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931435751","html_url":"https://github.com/apache/hudi/issues/3598#issuecomment-931435751","issue_url":"https://api.github.com/repos/apache/hudi/issues/3598","id":931435751,"node_id":"IC_kwDOBI7nWM43hJTn","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T15:36:57Z","updated_at":"2021-09-30T15:36:57Z","author_association":"CONTRIBUTOR","body":"@Tandoy : any updates please. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931435751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931514853","html_url":"https://github.com/apache/hudi/issues/3297#issuecomment-931514853","issue_url":"https://api.github.com/repos/apache/hudi/issues/3297","id":931514853,"node_id":"IC_kwDOBI7nWM43hcnl","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:19:24Z","updated_at":"2021-09-30T17:19:59Z","author_association":"CONTRIBUTOR","body":"I could not reproduce the issue where enabling metadata is failing. I tried locally. Can you try w/ latest master and let us know how it goes. \r\n\r\n```\r\n\r\ncreate table hudi_gh_ext2 using hudi location 'file:/tmp/hudi_testing/hudi_2/' options (\r\n  type = 'cow',\r\n  primaryKey = 'id',\r\n  preCombineField = 'created_at'\r\n ) \r\npartitioned by (type) as select public, repo, actor, org, id, other, created_at, type from pqt_raw;\r\n\r\n\r\nselect count(*) from hudi_gh_ext2;\r\n\r\n// upsert into hudi table\r\n\r\n\r\n\r\nMERGE INTO hudi_gh_ext2\r\nUSING (select public, repo, actor, org, id, other, created_at, type from pqt_updates) tbl1\r\nON hudi_gh_ext2.id = tbl1.id\r\nWHEN MATCHED THEN\r\n  UPDATE SET *\r\nWHEN NOT MATCHED\r\n  THEN INSERT * ;\r\n\r\n\r\nset hoodie.metadata.enable = true;\r\n\r\n\r\nMERGE INTO hudi_gh_ext2\r\nUSING (select public, repo, actor, org, id, other, created_at, type from pqt_updates) tbl1\r\nON hudi_gh_ext2.id = tbl1.id\r\nWHEN MATCHED THEN\r\n  UPDATE SET *\r\nWHEN NOT MATCHED\r\n  THEN INSERT * ;\r\n\r\n```\r\n\r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931514853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931525996","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931525996","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931525996,"node_id":"IC_kwDOBI7nWM43hfVs","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:35:45Z","updated_at":"2021-09-30T17:40:01Z","author_association":"CONTRIBUTOR","body":"thanks. Here is what is possibly happening. If you can tigger more updates, eventually you will see cleaning kicking in. \r\nIn short, this has something to do w/ MOR table. cleaner need to see N commits before it can clean things up not delta commits. I will try to explain what that means, but its gonna be lengthy. \r\n\r\nLet me first try to explains data files and delta log files. \r\nIn hudi, base or data files are parquet format and delta log files are avro with .log extension. base files are created w/ commits and log files are created w/ delta commits. \r\n\r\nEach data file could have 0 or more log files. They represent updates to data in the respective data files/base files.\r\n\r\n\r\nFor instance, here is a simple example.\r\n```\r\nbase_file_1_c1, \r\n  log_file_1_c1_v1\r\n  log_file_1_c1_v2\r\nbase_file_2_c2\r\n```\r\n\r\nIn above example, there are two commits made, c1, c2 and c3. \r\nC1 : \r\nbase_file_1_c1\r\nC2:\r\nbase_file_2_c2\r\nand add some updates to base_file_1 and so log_file_1_c1_v1 got created.\r\nC3:\r\nAdded some updates to base_file_1 and so log_file_1_c1_v2 got created.\r\n\r\nSo, if we make making more commits similar to C3, only new log files will be added. These are not considered as commits from a cleaning stand point. \r\nHudi has something called compaction which compacts base files and corresponding log files into a new version of the base file. \r\n\r\nLets say compaction kicks in with commit time C4. \r\n```\r\nbase_file_1_c1, \r\n   log_file_1_c1_v1\r\n   log_file_1_c1_v2\r\nbase_file_2_c2\r\nbase_file_1_c4\r\n```\r\n\r\nbase_file_1_c4 is nothing but (base_file_1_c1 + log_file_1_c1_v1 + log_file_1_c1_v2)\r\n\r\nNow, lets say you have configured cleaner commits retained as 1, then (base_file_1_c1 + log_file_1_c1_v1 + log_file_1_c1_v2) would have been cleaned up. But as you could see, compaction created a newer version of this base file and hence older version is eligible to be cleaned up. which is not the case for base_file_2_c2. Bcoz, there is only one version.\r\n\r\nSo, in your case, only when 4 or 5 compactions happen, you could possibly see cleaner kicking in. From your last snapshot, I see only 3 compactions so far. \r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931525996/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931533803","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931533803","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931533803,"node_id":"IC_kwDOBI7nWM43hhPr","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:46:22Z","updated_at":"2021-09-30T17:49:59Z","author_association":"CONTRIBUTOR","body":"sorry, I see that you do have 5 compactions. Let me dig in more. \r\nCan you enable info logs and share it here. I don't even see cleaning getting triggered. else we would have seen a clean.requested meta file atleast. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931533803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931535592","html_url":"https://github.com/apache/hudi/issues/3418#issuecomment-931535592","issue_url":"https://api.github.com/repos/apache/hudi/issues/3418","id":931535592,"node_id":"IC_kwDOBI7nWM43hhro","user":{"login":"hickfrey","id":23214920,"node_id":"MDQ6VXNlcjIzMjE0OTIw","avatar_url":"https://avatars.githubusercontent.com/u/23214920?v=4","gravatar_id":"","url":"https://api.github.com/users/hickfrey","html_url":"https://github.com/hickfrey","followers_url":"https://api.github.com/users/hickfrey/followers","following_url":"https://api.github.com/users/hickfrey/following{/other_user}","gists_url":"https://api.github.com/users/hickfrey/gists{/gist_id}","starred_url":"https://api.github.com/users/hickfrey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hickfrey/subscriptions","organizations_url":"https://api.github.com/users/hickfrey/orgs","repos_url":"https://api.github.com/users/hickfrey/repos","events_url":"https://api.github.com/users/hickfrey/events{/privacy}","received_events_url":"https://api.github.com/users/hickfrey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:49:00Z","updated_at":"2021-09-30T17:49:00Z","author_association":"NONE","body":"Hey @nsivabalan @vinothchandar sorry to trouble you again, but anything you can suggested here? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931535592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931537607","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931537607","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931537607,"node_id":"IC_kwDOBI7nWM43hiLH","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:52:06Z","updated_at":"2021-09-30T17:52:06Z","author_association":"CONTRIBUTOR","body":"may be a dumb thought. can you try setting the config values as string. \r\n'hoodie.compact.inline': 'true'\r\n'hoodie.cleaner.commits.retained':'4'\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931537607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931540799","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931540799","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931540799,"node_id":"IC_kwDOBI7nWM43hi8_","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T17:56:57Z","updated_at":"2021-09-30T17:56:57Z","author_association":"CONTRIBUTOR","body":"also, can you try setting this to higher no\r\nhoodie.keep.max.commits: may be 10. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931540799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931544474","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931544474","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931544474,"node_id":"IC_kwDOBI7nWM43hj2a","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T18:02:16Z","updated_at":"2021-09-30T18:02:16Z","author_association":"CONTRIBUTOR","body":"likely its the archival thats coming into play. let me know how it goes if you set higher value for hoodie.keep.max.commits. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931544474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931656856","html_url":"https://github.com/apache/hudi/pull/3727#issuecomment-931656856","issue_url":"https://api.github.com/repos/apache/hudi/issues/3727","id":931656856,"node_id":"IC_kwDOBI7nWM43h_SY","user":{"login":"yihua","id":2497195,"node_id":"MDQ6VXNlcjI0OTcxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2497195?v=4","gravatar_id":"","url":"https://api.github.com/users/yihua","html_url":"https://github.com/yihua","followers_url":"https://api.github.com/users/yihua/followers","following_url":"https://api.github.com/users/yihua/following{/other_user}","gists_url":"https://api.github.com/users/yihua/gists{/gist_id}","starred_url":"https://api.github.com/users/yihua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihua/subscriptions","organizations_url":"https://api.github.com/users/yihua/orgs","repos_url":"https://api.github.com/users/yihua/repos","events_url":"https://api.github.com/users/yihua/events{/privacy}","received_events_url":"https://api.github.com/users/yihua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:51:11Z","updated_at":"2021-09-30T20:51:11Z","author_association":"CONTRIBUTOR","body":"@nsivabalan I addressed your comments in this PR on refactoring compaction actions: https://github.com/apache/hudi/pull/3741","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931656856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931660346","html_url":"https://github.com/apache/hudi/pull/3741#issuecomment-931660346","issue_url":"https://api.github.com/repos/apache/hudi/issues/3741","id":931660346,"node_id":"IC_kwDOBI7nWM43iAI6","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T20:52:49Z","updated_at":"2021-10-22T07:04:58Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"0425dc32bc4b1acca25feef0d3481570ff7f2dbc\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2477\",\n    \"triggerID\" : \"0425dc32bc4b1acca25feef0d3481570ff7f2dbc\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"f744c0b01de34df48d29508f1cb142a9d16abc99\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2479\",\n    \"triggerID\" : \"f744c0b01de34df48d29508f1cb142a9d16abc99\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"f744c0b01de34df48d29508f1cb142a9d16abc99\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2480\",\n    \"triggerID\" : \"932058470\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"f744c0b01de34df48d29508f1cb142a9d16abc99\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2484\",\n    \"triggerID\" : \"932310153\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"fae23e34d01a8f6d6f56503ebfe6b28c1362c530\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2509\",\n    \"triggerID\" : \"fae23e34d01a8f6d6f56503ebfe6b28c1362c530\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"095d325883c4fcbf4acdc2fcab3065cbd8923690\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2510\",\n    \"triggerID\" : \"095d325883c4fcbf4acdc2fcab3065cbd8923690\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"afa26cb34e05fd49056b2e072457b3d92bacaa91\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2514\",\n    \"triggerID\" : \"afa26cb34e05fd49056b2e072457b3d92bacaa91\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7c97e48c93c985ba989e83b7716aef87a73a5773\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2588\",\n    \"triggerID\" : \"7c97e48c93c985ba989e83b7716aef87a73a5773\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7c97e48c93c985ba989e83b7716aef87a73a5773\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2591\",\n    \"triggerID\" : \"940757505\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"3b08956e6b53ba25be60a659ac6d28d147d9a77b\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2625\",\n    \"triggerID\" : \"3b08956e6b53ba25be60a659ac6d28d147d9a77b\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"333c80ea94b4ed248108d68357e5729bd6613104\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2629\",\n    \"triggerID\" : \"333c80ea94b4ed248108d68357e5729bd6613104\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"9e51355f0d6efbcab88aeb5debe361ee6600dc9b\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2657\",\n    \"triggerID\" : \"9e51355f0d6efbcab88aeb5debe361ee6600dc9b\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"66c5aba2321a7866c54d65f9d0f02612d55442c3\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2664\",\n    \"triggerID\" : \"66c5aba2321a7866c54d65f9d0f02612d55442c3\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"2041348d5eee4cd13358450e6f9b0d6fca7ff1b8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2785\",\n    \"triggerID\" : \"2041348d5eee4cd13358450e6f9b0d6fca7ff1b8\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"22fcc9a43ce070ae2aaa298acd67d71a6a15c2b6\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2786\",\n    \"triggerID\" : \"22fcc9a43ce070ae2aaa298acd67d71a6a15c2b6\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 22fcc9a43ce070ae2aaa298acd67d71a6a15c2b6 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2786) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931660346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931718635","html_url":"https://github.com/apache/hudi/issues/3598#issuecomment-931718635","issue_url":"https://api.github.com/repos/apache/hudi/issues/3598","id":931718635,"node_id":"IC_kwDOBI7nWM43iOXr","user":{"login":"davehagman","id":73851873,"node_id":"MDQ6VXNlcjczODUxODcz","avatar_url":"https://avatars.githubusercontent.com/u/73851873?v=4","gravatar_id":"","url":"https://api.github.com/users/davehagman","html_url":"https://github.com/davehagman","followers_url":"https://api.github.com/users/davehagman/followers","following_url":"https://api.github.com/users/davehagman/following{/other_user}","gists_url":"https://api.github.com/users/davehagman/gists{/gist_id}","starred_url":"https://api.github.com/users/davehagman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davehagman/subscriptions","organizations_url":"https://api.github.com/users/davehagman/orgs","repos_url":"https://api.github.com/users/davehagman/repos","events_url":"https://api.github.com/users/davehagman/events{/privacy}","received_events_url":"https://api.github.com/users/davehagman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T21:29:17Z","updated_at":"2021-09-30T21:29:47Z","author_association":"CONTRIBUTOR","body":"@nsivabalan I created an issue ([here](https://issues.apache.org/jira/browse/HUDI-2275)) for this a while ago that has since been updated to `blocker` but it remains unresolved. I was unable to figure out a workaround and was unable to continue investigating as I had other tasks. I plan to revisit this ASAP but I'm not sure when I will be able to. This will soon become a blocker for us as well as well because we have a need to run Deltastreamer + concurrent backfill/modification jobs.\r\n\r\nAdding `hoodie.datasource.write.commitmeta.key.prefix=\"deltastreamer.checkpoint.key\"` did not work for me.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931718635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931730823","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931730823","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931730823,"node_id":"IC_kwDOBI7nWM43iRWH","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T21:51:57Z","updated_at":"2021-09-30T21:51:57Z","author_association":"NONE","body":"@nsivabalan We already use your suggestions, so our actual conf is\r\n\r\n'hoodie.table.name': table_name,\r\n                'hoodie.datasource.write.recordkey.field': 'posting_key',\r\n                'hoodie.datasource.write.partitionpath.field': 'range_partition',\r\n                'hoodie.datasource.write.table.name': table_name,\r\n                'hoodie.datasource.write.precombine.field': 'update_date',\r\n                'hoodie.datasource.write.table.type': 'MERGE_ON_READ',\r\n                'hoodie.cleaner.policy': 'KEEP_LATEST_COMMITS',\r\n                'hoodie.consistency.check.enabled': True,\r\n                'hoodie.bloom.index.filter.type': 'dynamic_v0',\r\n                'hoodie.bloom.index.bucketized.checking': False,\r\n                'hoodie.memory.merge.max.size': '2004857600000',\r\n                'hoodie.upsert.shuffle.parallelism': parallelism,\r\n                'hoodie.insert.shuffle.parallelism': parallelism,\r\n                'hoodie.bulkinsert.shuffle.parallelism': parallelism,\r\n                'hoodie.parquet.small.file.limit': '204857600',\r\n                'hoodie.parquet.max.file.size': str(self.__parquet_max_file_size_byte),\r\n                'hoodie.memory.compaction.fraction': '384402653184',\r\n                'hoodie.write.buffer.limit.bytes': str(128 * 1024 * 1024),\r\n                **'hoodie.compact.inline': True,**\r\n                'hoodie.compact.inline.max.delta.commits': 1,\r\n                'hoodie.datasource.compaction.async.enable': False,\r\n                'hoodie.parquet.compression.ratio': '0.35',\r\n                'hoodie.logfile.max.size': '268435456',\r\n                'hoodie.logfile.to.parquet.compression.ratio': '0.5',\r\n                'hoodie.datasource.write.hive_style_partitioning': True,\r\n                'hoodie.keep.min.commits': 5,\r\n                **'hoodie.keep.max.commits': 6,**\r\n                'hoodie.copyonwrite.record.size.estimate': 32,\r\n                **'hoodie.cleaner.commits.retained': 4,**\r\n                'hoodie.clean.automatic': True","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931730823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931743495","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-931743495","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":931743495,"node_id":"IC_kwDOBI7nWM43iUcH","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-30T22:18:10Z","updated_at":"2021-09-30T22:18:10Z","author_association":"CONTRIBUTOR","body":"sure. can we try \r\nhoodie.keep.max.commits: 20\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931743495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931816793","html_url":"https://github.com/apache/hudi/issues/3598#issuecomment-931816793","issue_url":"https://api.github.com/repos/apache/hudi/issues/3598","id":931816793,"node_id":"IC_kwDOBI7nWM43imVZ","user":{"login":"Tandoy","id":56899730,"node_id":"MDQ6VXNlcjU2ODk5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/56899730?v=4","gravatar_id":"","url":"https://api.github.com/users/Tandoy","html_url":"https://github.com/Tandoy","followers_url":"https://api.github.com/users/Tandoy/followers","following_url":"https://api.github.com/users/Tandoy/following{/other_user}","gists_url":"https://api.github.com/users/Tandoy/gists{/gist_id}","starred_url":"https://api.github.com/users/Tandoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tandoy/subscriptions","organizations_url":"https://api.github.com/users/Tandoy/orgs","repos_url":"https://api.github.com/users/Tandoy/repos","events_url":"https://api.github.com/users/Tandoy/events{/privacy}","received_events_url":"https://api.github.com/users/Tandoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T01:11:52Z","updated_at":"2021-10-01T01:11:52Z","author_association":"NONE","body":"> @Tandoy : any updates please.\r\nI'm very sorry that I didn't test it in time due to the holiday and other arrangements, but I will try it as soon as possible.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931816793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931957889","html_url":"https://github.com/apache/hudi/pull/3671#issuecomment-931957889","issue_url":"https://api.github.com/repos/apache/hudi/issues/3671","id":931957889,"node_id":"IC_kwDOBI7nWM43jIyB","user":{"login":"fengjian428","id":4403474,"node_id":"MDQ6VXNlcjQ0MDM0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4403474?v=4","gravatar_id":"","url":"https://api.github.com/users/fengjian428","html_url":"https://github.com/fengjian428","followers_url":"https://api.github.com/users/fengjian428/followers","following_url":"https://api.github.com/users/fengjian428/following{/other_user}","gists_url":"https://api.github.com/users/fengjian428/gists{/gist_id}","starred_url":"https://api.github.com/users/fengjian428/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fengjian428/subscriptions","organizations_url":"https://api.github.com/users/fengjian428/orgs","repos_url":"https://api.github.com/users/fengjian428/repos","events_url":"https://api.github.com/users/fengjian428/events{/privacy}","received_events_url":"https://api.github.com/users/fengjian428/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T06:52:24Z","updated_at":"2021-10-01T06:52:24Z","author_association":"CONTRIBUTOR","body":"> > > @fengjian428 Check CI again?\r\n> > \r\n> > \r\n> > what you mean? the checks below all passed\r\n> \r\n> I mean the Azure CI, please check [here](https://github.com/apache/hudi/pull/3671#issuecomment-920215882).\r\n> \r\n> Now, Hudi's CI contains two parts.\r\n> \r\n> Part 1: The github workflows; Part 2: The Azure CI;\r\n> \r\n> The merge condition is that the two parts are both successful.\r\n\r\nok , added the missed dependency","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931957889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931964479","html_url":"https://github.com/apache/hudi/issues/3161#issuecomment-931964479","issue_url":"https://api.github.com/repos/apache/hudi/issues/3161","id":931964479,"node_id":"IC_kwDOBI7nWM43jKY_","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T07:04:21Z","updated_at":"2021-10-01T07:04:21Z","author_association":"MEMBER","body":"@cb149 Is your application running fine now? given this issue is not reproducible, closing it now. If you have further findings or able to reproduce, feel free to follow up here. thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/931964479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932016039","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-932016039","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":932016039,"node_id":"IC_kwDOBI7nWM43jW-n","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T08:09:05Z","updated_at":"2021-10-01T08:09:05Z","author_association":"NONE","body":"Hi @nsivabalan... something is moving! With your suggestion (**hoodie.keep.max.commits: 20**)\r\nthis is the result:\r\n\r\n![20_data](https://user-images.githubusercontent.com/16307145/135586912-26ae6738-8c0e-43eb-9a9b-4888158cfe65.png)\r\n![20_commit_1](https://user-images.githubusercontent.com/16307145/135586922-bc5d8afb-c8fa-4fa9-9020-ded66efa806f.png)\r\n![20_commit_4](https://user-images.githubusercontent.com/16307145/135586925-c28f6997-3b32-49ea-a82f-a48bd9bd6655.png)\r\n![20_commit_2](https://user-images.githubusercontent.com/16307145/135586928-c2547e3b-cd70-4ec4-a5b8-86b8c58af184.png)\r\n![20_commit_5](https://user-images.githubusercontent.com/16307145/135586930-69685246-c81a-4351-9c0d-a31afb05f398.png)\r\n\r\n\r\nCan you explain what is happening and how each parameter of our hudi conf is involved?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932016039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932112769","html_url":"https://github.com/apache/hudi/issues/1083#issuecomment-932112769","issue_url":"https://api.github.com/repos/apache/hudi/issues/1083","id":932112769,"node_id":"IC_kwDOBI7nWM43jumB","user":{"login":"stym06","id":20970728,"node_id":"MDQ6VXNlcjIwOTcwNzI4","avatar_url":"https://avatars.githubusercontent.com/u/20970728?v=4","gravatar_id":"","url":"https://api.github.com/users/stym06","html_url":"https://github.com/stym06","followers_url":"https://api.github.com/users/stym06/followers","following_url":"https://api.github.com/users/stym06/following{/other_user}","gists_url":"https://api.github.com/users/stym06/gists{/gist_id}","starred_url":"https://api.github.com/users/stym06/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stym06/subscriptions","organizations_url":"https://api.github.com/users/stym06/orgs","repos_url":"https://api.github.com/users/stym06/repos","events_url":"https://api.github.com/users/stym06/events{/privacy}","received_events_url":"https://api.github.com/users/stym06/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T10:30:58Z","updated_at":"2021-10-01T10:30:58Z","author_association":"CONTRIBUTOR","body":"@bhasudha fyr","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932112769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932188466","html_url":"https://github.com/apache/hudi/issues/3676#issuecomment-932188466","issue_url":"https://api.github.com/repos/apache/hudi/issues/3676","id":932188466,"node_id":"IC_kwDOBI7nWM43kBEy","user":{"login":"FelixKJose","id":22526075,"node_id":"MDQ6VXNlcjIyNTI2MDc1","avatar_url":"https://avatars.githubusercontent.com/u/22526075?v=4","gravatar_id":"","url":"https://api.github.com/users/FelixKJose","html_url":"https://github.com/FelixKJose","followers_url":"https://api.github.com/users/FelixKJose/followers","following_url":"https://api.github.com/users/FelixKJose/following{/other_user}","gists_url":"https://api.github.com/users/FelixKJose/gists{/gist_id}","starred_url":"https://api.github.com/users/FelixKJose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FelixKJose/subscriptions","organizations_url":"https://api.github.com/users/FelixKJose/orgs","repos_url":"https://api.github.com/users/FelixKJose/repos","events_url":"https://api.github.com/users/FelixKJose/events{/privacy}","received_events_url":"https://api.github.com/users/FelixKJose/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T12:31:45Z","updated_at":"2021-10-01T12:31:45Z","author_association":"NONE","body":"@nsivabalan Ok, got it,  but kind of confused because, I was hoping all inserts will to one parquet file until it reaches the given max size (128 MB). Seems like my understanding is not correct, and I don't see anywhere this is described like this. Could you point me to any docs describing this behavior?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932188466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932199950","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-932199950","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":932199950,"node_id":"IC_kwDOBI7nWM43kD4O","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T12:52:32Z","updated_at":"2021-10-01T12:52:57Z","author_association":"CONTRIBUTOR","body":"awesome, good to know. So here is the thing. \r\nHudi has something called active timeline and archived timeline. Archival will kick in for every commit and move some older commits from active to archived. This is to keep the no of active commits within bounds. (contents of .hoodie folder)\r\nall operations within hudi will operate only on commits in active timeline(inserts, upserts, compaction, cleaning etc). \r\nSince we have very aggressive archival configs, archival keeps the no of commits in active timeline to a lower no always. And so when cleaner tries to check if there are any eligible commits to be cleaned up, it can't find more than the configured value. so, if we increase the max commits for archival to kick in, lets say 20, until there are 20 commits, archival will not kick in. And so cleaner should be able to find more than configured value for cleaning to trigger. \r\nMay be we can add a warning or even throw exception if archival configs are aggressive compared to cleaner. bcoz, then silently cleaning becomes moot. \r\n\r\nI have filed a [jira](https://issues.apache.org/jira/browse/HUDI-2511) on this regard and will follow up.\r\n\r\nLet me know if you need any more details. If not, can we close this issue out. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932199950/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932208472","html_url":"https://github.com/apache/hudi/issues/3598#issuecomment-932208472","issue_url":"https://api.github.com/repos/apache/hudi/issues/3598","id":932208472,"node_id":"IC_kwDOBI7nWM43kF9Y","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T13:03:40Z","updated_at":"2021-10-01T13:07:30Z","author_association":"CONTRIBUTOR","body":"@davehagman @Tandoy : I was able to reproduce the issue. \r\nI have put up a temp fix on this regard https://github.com/apache/hudi/pull/3742. Filed a [jira](https://issues.apache.org/jira/browse/HUDI-2512) as well.\r\nCan you folks give it a try. \r\nPlease do set hoodie.datasource.write.commitmeta.key.prefix=\"deltastreamer.checkpoint.key\" with spark datasource writes. \r\n\r\nbtw, I am yet to discuss with other devs (who worked on the multi-writer support) on the right fix on this regard. Is there a cleaner way to support multi-writer across deltastreamer and spark ds(for eg, can we avoid asking the user to set the commit meta key prefix, etc). but this should work for now. \r\nLet me know how it goes. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932208472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932209027","html_url":"https://github.com/apache/hudi/pull/3742#issuecomment-932209027","issue_url":"https://api.github.com/repos/apache/hudi/issues/3742","id":932209027,"node_id":"IC_kwDOBI7nWM43kGGD","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T13:04:21Z","updated_at":"2021-10-01T13:50:03Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"5bb333177ef1f7bb68480c2b890df6c236a30624\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2481\",\n    \"triggerID\" : \"5bb333177ef1f7bb68480c2b890df6c236a30624\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 5bb333177ef1f7bb68480c2b890df6c236a30624 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2481) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932209027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932269697","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-932269697","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":932269697,"node_id":"IC_kwDOBI7nWM43kU6B","user":{"login":"mauropelucchi","id":16307145,"node_id":"MDQ6VXNlcjE2MzA3MTQ1","avatar_url":"https://avatars.githubusercontent.com/u/16307145?v=4","gravatar_id":"","url":"https://api.github.com/users/mauropelucchi","html_url":"https://github.com/mauropelucchi","followers_url":"https://api.github.com/users/mauropelucchi/followers","following_url":"https://api.github.com/users/mauropelucchi/following{/other_user}","gists_url":"https://api.github.com/users/mauropelucchi/gists{/gist_id}","starred_url":"https://api.github.com/users/mauropelucchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauropelucchi/subscriptions","organizations_url":"https://api.github.com/users/mauropelucchi/orgs","repos_url":"https://api.github.com/users/mauropelucchi/repos","events_url":"https://api.github.com/users/mauropelucchi/events{/privacy}","received_events_url":"https://api.github.com/users/mauropelucchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T14:16:34Z","updated_at":"2021-10-01T14:16:34Z","author_association":"NONE","body":"@nsivabalan Ok, what is the right conf in our scenario?\r\nIt is unusual for us to have 20 commits by partition, usually we have from 4 to 10... ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932269697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932310153","html_url":"https://github.com/apache/hudi/pull/3741#issuecomment-932310153","issue_url":"https://api.github.com/repos/apache/hudi/issues/3741","id":932310153,"node_id":"IC_kwDOBI7nWM43keyJ","user":{"login":"yihua","id":2497195,"node_id":"MDQ6VXNlcjI0OTcxOTU=","avatar_url":"https://avatars.githubusercontent.com/u/2497195?v=4","gravatar_id":"","url":"https://api.github.com/users/yihua","html_url":"https://github.com/yihua","followers_url":"https://api.github.com/users/yihua/followers","following_url":"https://api.github.com/users/yihua/following{/other_user}","gists_url":"https://api.github.com/users/yihua/gists{/gist_id}","starred_url":"https://api.github.com/users/yihua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yihua/subscriptions","organizations_url":"https://api.github.com/users/yihua/orgs","repos_url":"https://api.github.com/users/yihua/repos","events_url":"https://api.github.com/users/yihua/events{/privacy}","received_events_url":"https://api.github.com/users/yihua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-01T15:04:47Z","updated_at":"2021-10-01T15:04:47Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932310153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932639881","html_url":"https://github.com/apache/hudi/pull/3743#issuecomment-932639881","issue_url":"https://api.github.com/repos/apache/hudi/issues/3743","id":932639881,"node_id":"IC_kwDOBI7nWM43lvSJ","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-02T00:01:02Z","updated_at":"2021-10-06T08:20:36Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"6d1055c84694e617e658ac41edec2aea60c48bb0\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2486\",\n    \"triggerID\" : \"6d1055c84694e617e658ac41edec2aea60c48bb0\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"f1b1e029c31046ee4bd0489dac9568c037353499\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2487\",\n    \"triggerID\" : \"f1b1e029c31046ee4bd0489dac9568c037353499\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7ba73cb76255dd2dfc85a078cc03120595ad36dd\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2488\",\n    \"triggerID\" : \"7ba73cb76255dd2dfc85a078cc03120595ad36dd\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"3464963ae47ca4bddc4c57f5c1f9e14c2d87b318\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2516\",\n    \"triggerID\" : \"3464963ae47ca4bddc4c57f5c1f9e14c2d87b318\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"eec99609d3670d390be3bb8e1da6b6aacec10168\",\n    \"status\" : \"UNKNOWN\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"eec99609d3670d390be3bb8e1da6b6aacec10168\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"21f5296fc6ec0e4b2de6e22762f3dd189c878e01\",\n    \"status\" : \"UNKNOWN\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"21f5296fc6ec0e4b2de6e22762f3dd189c878e01\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"b64b1696fc135b92386f0c1f252b9101c8e8ed5a\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2517\",\n    \"triggerID\" : \"b64b1696fc135b92386f0c1f252b9101c8e8ed5a\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* eec99609d3670d390be3bb8e1da6b6aacec10168 UNKNOWN\n* 21f5296fc6ec0e4b2de6e22762f3dd189c878e01 UNKNOWN\n* b64b1696fc135b92386f0c1f252b9101c8e8ed5a Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2517) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932639881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932869164","html_url":"https://github.com/apache/hudi/pull/3744#issuecomment-932869164","issue_url":"https://api.github.com/repos/apache/hudi/issues/3744","id":932869164,"node_id":"IC_kwDOBI7nWM43mnQs","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-03T05:58:25Z","updated_at":"2021-10-03T05:58:25Z","author_association":"MEMBER","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/932869164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933086527","html_url":"https://github.com/apache/hudi/pull/3746#issuecomment-933086527","issue_url":"https://api.github.com/repos/apache/hudi/issues/3746","id":933086527,"node_id":"IC_kwDOBI7nWM43ncU_","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T02:02:36Z","updated_at":"2021-11-02T05:36:10Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"6dfd7a9da05c858c5246eebc20395c7d7ad62738\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2500\",\n    \"triggerID\" : \"6dfd7a9da05c858c5246eebc20395c7d7ad62738\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"0ce19d7f978e39f95ac777a58e99e74af92e66fc\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2788\",\n    \"triggerID\" : \"0ce19d7f978e39f95ac777a58e99e74af92e66fc\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"0ce19d7f978e39f95ac777a58e99e74af92e66fc\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2792\",\n    \"triggerID\" : \"949388633\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"bc2c849af2a376bae8c46f10a9386963faf0ccbf\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2793\",\n    \"triggerID\" : \"bc2c849af2a376bae8c46f10a9386963faf0ccbf\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"bc2c849af2a376bae8c46f10a9386963faf0ccbf\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2794\",\n    \"triggerID\" : \"949400995\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"bc2c849af2a376bae8c46f10a9386963faf0ccbf\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2793\",\n    \"triggerID\" : \"949400995\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"5531fdbbb2adf2484ac3ff19f3a404df01ac27c9\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2806\",\n    \"triggerID\" : \"5531fdbbb2adf2484ac3ff19f3a404df01ac27c9\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"17812e35590546b3bc1eb4059de811f699df6217\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=3037\",\n    \"triggerID\" : \"17812e35590546b3bc1eb4059de811f699df6217\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 17812e35590546b3bc1eb4059de811f699df6217 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=3037) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933086527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933538622","html_url":"https://github.com/apache/hudi/issues/3733#issuecomment-933538622","issue_url":"https://api.github.com/repos/apache/hudi/issues/3733","id":933538622,"node_id":"IC_kwDOBI7nWM43pKs-","user":{"login":"davehagman","id":73851873,"node_id":"MDQ6VXNlcjczODUxODcz","avatar_url":"https://avatars.githubusercontent.com/u/73851873?v=4","gravatar_id":"","url":"https://api.github.com/users/davehagman","html_url":"https://github.com/davehagman","followers_url":"https://api.github.com/users/davehagman/followers","following_url":"https://api.github.com/users/davehagman/following{/other_user}","gists_url":"https://api.github.com/users/davehagman/gists{/gist_id}","starred_url":"https://api.github.com/users/davehagman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davehagman/subscriptions","organizations_url":"https://api.github.com/users/davehagman/orgs","repos_url":"https://api.github.com/users/davehagman/repos","events_url":"https://api.github.com/users/davehagman/events{/privacy}","received_events_url":"https://api.github.com/users/davehagman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T14:23:51Z","updated_at":"2021-10-04T14:30:30Z","author_association":"CONTRIBUTOR","body":"More details on this issue. The root cause is a when a single batch of records results in a large number of partitions being scanned for index lookup (for record de-duplication). \r\n\r\nFor example, our data is partitioned by `year/month/day/hour`.  Normally an entire batch of records \"matches\" only 1-8 partitions depending on the timestamp of the event (they are usually all very recent and fit into several hourly partitions). \r\n\r\nThe issue here is that a process was kicked off which loaded very old records into the kafka stream which resulted in many more partitions being involved in the batch (100's of not thousands of partitions in a single batch of records). \r\n\r\nExample ideal case within a single batch:\r\n```\r\nRecord 1: year=2021/month=10/day=04/hour=11\r\nRecord 2: year=2021/month=10/day=04/hour=11\r\nRecord 3: year=2021/month=10/day=04/hour=10\r\nRecord 4: year=2021/month=10/day=04/hour=10\r\nRecord 5: year=2021/month=10/day=04/hour=10\r\n...\r\n``` \r\nAs you can see this is ideal because very few partitions that are evaluated within this batch.\r\n\r\nHere is an example of a much worse dataset where we have recent data mixed in with a lot of old data:\r\n```\r\nRecord 1: year=2020/month=1/day=04/hour=04\r\nRecord 2: year=2021/month=10/day=13/hour=11\r\nRecord 3: year=2020/month=06/day=20/hour=22\r\nRecord 4: year=2019/month=07/day=19/hour=05\r\nRecord 5: year=2018/month=02/day=23/hour=18\r\n...\r\n```\r\nOur record batch size max is `20Million` so this quickly explodes to many partitions which results in very slow index comparison times (the step in the insert process which checks the bloom filter based on the record key). \r\n\r\nMy main question at the moment is, should I expect very poor performance when the incoming data contains many different partition paths? The code that actually evaluates the records against the bloom filter lives here:\r\nhttps://github.com/apache/hudi/blob/master/hudi-client/hudi-spark-client/src/main/java/org/apache/hudi/index/bloom/HoodieBloomIndexCheckFunction.java#L78\r\n\r\nThe reason it can be slow is because we iterate over each record serially (`while (inputItr.hasNext())`) and check the bloom filter. This is within a pre-sorted RDD where the records are ordered by record key field. Would a batched/async operation be possible here (at least within a given partition)? I could try to PR something to speed up this part of the process. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933538622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933549405","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-933549405","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":933549405,"node_id":"IC_kwDOBI7nWM43pNVd","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T14:35:52Z","updated_at":"2021-10-04T14:35:52Z","author_association":"CONTRIBUTOR","body":"You can set it to 10. should work out. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933549405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933549686","html_url":"https://github.com/apache/hudi/issues/3739#issuecomment-933549686","issue_url":"https://api.github.com/repos/apache/hudi/issues/3739","id":933549686,"node_id":"IC_kwDOBI7nWM43pNZ2","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T14:36:09Z","updated_at":"2021-10-04T14:36:09Z","author_association":"CONTRIBUTOR","body":"Let me know if you need anything. else we can close this issue out. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933549686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933592326","html_url":"https://github.com/apache/hudi/issues/3737#issuecomment-933592326","issue_url":"https://api.github.com/repos/apache/hudi/issues/3737","id":933592326,"node_id":"IC_kwDOBI7nWM43pX0G","user":{"login":"fengjian428","id":4403474,"node_id":"MDQ6VXNlcjQ0MDM0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4403474?v=4","gravatar_id":"","url":"https://api.github.com/users/fengjian428","html_url":"https://github.com/fengjian428","followers_url":"https://api.github.com/users/fengjian428/followers","following_url":"https://api.github.com/users/fengjian428/following{/other_user}","gists_url":"https://api.github.com/users/fengjian428/gists{/gist_id}","starred_url":"https://api.github.com/users/fengjian428/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fengjian428/subscriptions","organizations_url":"https://api.github.com/users/fengjian428/orgs","repos_url":"https://api.github.com/users/fengjian428/repos","events_url":"https://api.github.com/users/fengjian428/events{/privacy}","received_events_url":"https://api.github.com/users/fengjian428/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T15:20:58Z","updated_at":"2021-10-04T15:20:58Z","author_association":"CONTRIBUTOR","body":" you can use DeltaStreamer's SqlSource,  select data from old table and ingest them into new table\r\nSqlSource can query exist table with Spark SQL, whether the table is Hudi table or Normal table","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933592326/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933618714","html_url":"https://github.com/apache/hudi/pull/3742#issuecomment-933618714","issue_url":"https://api.github.com/repos/apache/hudi/issues/3742","id":933618714,"node_id":"IC_kwDOBI7nWM43peQa","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T15:50:57Z","updated_at":"2021-10-04T15:50:57Z","author_association":"CONTRIBUTOR","body":"@n3nash @vinothchandar : Wanted to discuss how we can support multi-writer across deltastreamer and spark-ds. As of now, looks like copying the metadata from previous commit to current one is missing in spark-ds and I have fixed it here. But this requires users to set hoodie.datasource.write.commitmeta.key.prefix=\"deltastreamer.checkpoint.key\" with spark-ds. wondering if this is the right fix. If yes, do we really need the user to set this config? can't we infer automatically. \r\n ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933618714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933829540","html_url":"https://github.com/apache/hudi/issues/3733#issuecomment-933829540","issue_url":"https://api.github.com/repos/apache/hudi/issues/3733","id":933829540,"node_id":"IC_kwDOBI7nWM43qRuk","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T20:26:36Z","updated_at":"2021-10-04T20:26:36Z","author_association":"CONTRIBUTOR","body":"Hey Dave. \r\nso, my understanding is that, just partitioning on year, month and day did not work out for you and hence you have to go w/ hour as well? bcoz, cardinality of partitions is now very huge( ~ 8750 for 1 year of data). so I would expect some perf hit when you have such large no of partitions in general. \r\nalso, are you seeing spikes only in those batches where records are spread across older partitions. or once such traffic completes, if you have regular traffic which updates only the last few partitions, are the perf back to normal ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933829540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933830007","html_url":"https://github.com/apache/hudi/issues/3733#issuecomment-933830007","issue_url":"https://api.github.com/repos/apache/hudi/issues/3733","id":933830007,"node_id":"IC_kwDOBI7nWM43qR13","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T20:27:18Z","updated_at":"2021-10-04T20:27:18Z","author_association":"CONTRIBUTOR","body":"But you are most welcome for contributions. I can help review it if you have some patch helping hudi improve index look up. This is very core to hudi and will definitely help everyone in the community. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933830007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933845183","html_url":"https://github.com/apache/hudi/issues/3733#issuecomment-933845183","issue_url":"https://api.github.com/repos/apache/hudi/issues/3733","id":933845183,"node_id":"IC_kwDOBI7nWM43qVi_","user":{"login":"davehagman","id":73851873,"node_id":"MDQ6VXNlcjczODUxODcz","avatar_url":"https://avatars.githubusercontent.com/u/73851873?v=4","gravatar_id":"","url":"https://api.github.com/users/davehagman","html_url":"https://github.com/davehagman","followers_url":"https://api.github.com/users/davehagman/followers","following_url":"https://api.github.com/users/davehagman/following{/other_user}","gists_url":"https://api.github.com/users/davehagman/gists{/gist_id}","starred_url":"https://api.github.com/users/davehagman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davehagman/subscriptions","organizations_url":"https://api.github.com/users/davehagman/orgs","repos_url":"https://api.github.com/users/davehagman/repos","events_url":"https://api.github.com/users/davehagman/events{/privacy}","received_events_url":"https://api.github.com/users/davehagman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T20:51:16Z","updated_at":"2021-10-04T20:51:27Z","author_association":"CONTRIBUTOR","body":">  just partitioning on year, month and day did not work out for you and hence you have to go w/ hour as well?\r\n\r\nWe tested multiple partitioning schemes and this gave us a good tradeoff between read and write performance (especially under multi-hour processing delays when we need to ingest large amounts of more recent data to catch up to real-time). Removing the hour partition _could_ be feasible now though, I'm not sure how much testing we did originally with and without the hour specifically. \r\n\r\n> are you seeing spikes only in those batches where records are spread across older partitions. if you have regular traffic which updates only the last few partitions, are the perf back to normal ?\r\n\r\nYes exactly. We ended up splitting these very old sparse events out of the ingestion process and this allowed the performance to return to normal. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933845183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933893616","html_url":"https://github.com/apache/hudi/issues/3697#issuecomment-933893616","issue_url":"https://api.github.com/repos/apache/hudi/issues/3697","id":933893616,"node_id":"IC_kwDOBI7nWM43qhXw","user":{"login":"Rap70r","id":22181358,"node_id":"MDQ6VXNlcjIyMTgxMzU4","avatar_url":"https://avatars.githubusercontent.com/u/22181358?v=4","gravatar_id":"","url":"https://api.github.com/users/Rap70r","html_url":"https://github.com/Rap70r","followers_url":"https://api.github.com/users/Rap70r/followers","following_url":"https://api.github.com/users/Rap70r/following{/other_user}","gists_url":"https://api.github.com/users/Rap70r/gists{/gist_id}","starred_url":"https://api.github.com/users/Rap70r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rap70r/subscriptions","organizations_url":"https://api.github.com/users/Rap70r/orgs","repos_url":"https://api.github.com/users/Rap70r/repos","events_url":"https://api.github.com/users/Rap70r/events{/privacy}","received_events_url":"https://api.github.com/users/Rap70r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T22:08:59Z","updated_at":"2021-10-04T22:15:15Z","author_association":"NONE","body":"Hi @xushiyan,\r\n\r\nHere is an update for our latest tests. I have switched to d3.xlarge instance type and used the following configs:\r\n`spark-submit --deploy-mode cluster --conf spark.scheduler.mode=FAIR --conf spark.shuffle.service.enabled=true --conf spark.sql.hive.convertMetastoreParquet=false --conf spark.driver.maxResultSize=6g --conf spark.driver.memory=17g --conf spark.executor.cores=2 --conf spark.hadoop.parquet.enable.summary-metadata=false --conf spark.driver.memoryOverhead=6g --conf spark.network.timeout=600s --conf spark.executor.instances=50 --conf spark.executor.memoryOverhead=4g --conf spark.driver.cores=2 --conf spark.executor.memory=8g --conf spark.memory.storageFraction=0.1 --conf spark.executor.heartbeatInterval=120s --conf spark.memory.fraction=0.4 --conf spark.rdd.compress=true --conf spark.kryoserializer.buffer.max=200m --conf spark.serializer=org.apache.spark.serializer.KryoSerializer --conf spark.sql.shuffle.partitions=200 --conf spark.default.parallelism=200 --conf spark.task.cpus=2`\r\n\r\nI also removed \"spark.sql.parquet.mergeSchema\".\r\n\r\nI have noticed a significant increase of speed for all the steps except the one that extracts events from Kafka. That step I can't seem to improve. We are using st1 high throughput ebs that is attached to the emr's master node. The topic is compacted and it contains ~50 million records across 50 partitions. Even with the above powerful instance it takes 40 minutes to extract all records.\r\nBasically, the part that is slow is the partition seeking part. It takes couple of minutes to seek from offset 50000 to 100000.\r\nDo you have any suggestions on how to improve data ingestion from kafka using spark structured streaming?\r\n\r\nThank you","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933893616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933930608","html_url":"https://github.com/apache/hudi/pull/3590#issuecomment-933930608","issue_url":"https://api.github.com/repos/apache/hudi/issues/3590","id":933930608,"node_id":"IC_kwDOBI7nWM43qqZw","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T23:24:44Z","updated_at":"2021-10-04T23:24:44Z","author_association":"CONTRIBUTOR","body":"@hudi-bot azure run","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933930608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933938711","html_url":"https://github.com/apache/hudi/pull/3590#issuecomment-933938711","issue_url":"https://api.github.com/repos/apache/hudi/issues/3590","id":933938711,"node_id":"IC_kwDOBI7nWM43qsYX","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T23:44:26Z","updated_at":"2021-10-04T23:46:01Z","author_association":"CONTRIBUTOR","body":"> @nsivabalan have we unit tested `HoodieBackedTableMetadata` or `BaseTableMetadata` here?\r\n\r\nI started writing unit tests and later realized that all of our existing validation is happening using apis in BaseTableMetadata (getAllPartitionPaths and getAllFilesInPartition). Also there are tests to test reader wrt valid instants separately. So, I just enhanced existing tests and added extra validation that fileSystemMetadata is not used during these validations(or in other words only metadata table is used strictly during these validations). \r\nIn summary, I ensured we have tests covering HoodieBackedTableMetadata and HoodieBackedTableMetadataWriter for all of its methods.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/933938711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934016721","html_url":"https://github.com/apache/hudi/pull/3416#issuecomment-934016721","issue_url":"https://api.github.com/repos/apache/hudi/issues/3416","id":934016721,"node_id":"IC_kwDOBI7nWM43q_bR","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T02:58:10Z","updated_at":"2021-10-05T02:58:10Z","author_association":"CONTRIBUTOR","body":"Can you please update the description of the patch as well. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934016721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934016862","html_url":"https://github.com/apache/hudi/pull/3416#issuecomment-934016862","issue_url":"https://api.github.com/repos/apache/hudi/issues/3416","id":934016862,"node_id":"IC_kwDOBI7nWM43q_de","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T02:58:31Z","updated_at":"2021-10-05T02:58:31Z","author_association":"CONTRIBUTOR","body":"@xushiyan : I will let you review this PR. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934016862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934032408","html_url":"https://github.com/apache/hudi/pull/3590#issuecomment-934032408","issue_url":"https://api.github.com/repos/apache/hudi/issues/3590","id":934032408,"node_id":"IC_kwDOBI7nWM43rDQY","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T03:41:20Z","updated_at":"2021-10-05T03:41:20Z","author_association":"CONTRIBUTOR","body":"@hudi-bot azure run","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934032408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934056856","html_url":"https://github.com/apache/hudi/pull/3748#issuecomment-934056856","issue_url":"https://api.github.com/repos/apache/hudi/issues/3748","id":934056856,"node_id":"IC_kwDOBI7nWM43rJOY","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T04:44:57Z","updated_at":"2021-10-05T04:44:57Z","author_association":"MEMBER","body":"put on hold as i look further into why CI env does not trigger the FT tests with the new annotations while local env does.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934056856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934330091","html_url":"https://github.com/apache/hudi/issues/3647#issuecomment-934330091","issue_url":"https://api.github.com/repos/apache/hudi/issues/3647","id":934330091,"node_id":"IC_kwDOBI7nWM43sL7r","user":{"login":"novakov-alexey-zz","id":11204284,"node_id":"MDQ6VXNlcjExMjA0Mjg0","avatar_url":"https://avatars.githubusercontent.com/u/11204284?v=4","gravatar_id":"","url":"https://api.github.com/users/novakov-alexey-zz","html_url":"https://github.com/novakov-alexey-zz","followers_url":"https://api.github.com/users/novakov-alexey-zz/followers","following_url":"https://api.github.com/users/novakov-alexey-zz/following{/other_user}","gists_url":"https://api.github.com/users/novakov-alexey-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/novakov-alexey-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novakov-alexey-zz/subscriptions","organizations_url":"https://api.github.com/users/novakov-alexey-zz/orgs","repos_url":"https://api.github.com/users/novakov-alexey-zz/repos","events_url":"https://api.github.com/users/novakov-alexey-zz/events{/privacy}","received_events_url":"https://api.github.com/users/novakov-alexey-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T11:40:33Z","updated_at":"2021-10-05T11:40:33Z","author_association":"NONE","body":"@xushiyan yes, it seems you are right. I can confirm that if I write to a table with bulk_insert and `hoodie.datasource.write.row.writer.enable=false`, then upsert is working afterwards. So this is a bug with row.writer flag.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934330091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934371202","html_url":"https://github.com/apache/hudi/issues/3647#issuecomment-934371202","issue_url":"https://api.github.com/repos/apache/hudi/issues/3647","id":934371202,"node_id":"IC_kwDOBI7nWM43sV-C","user":{"login":"ChaladiMohanVamsi","id":24913482,"node_id":"MDQ6VXNlcjI0OTEzNDgy","avatar_url":"https://avatars.githubusercontent.com/u/24913482?v=4","gravatar_id":"","url":"https://api.github.com/users/ChaladiMohanVamsi","html_url":"https://github.com/ChaladiMohanVamsi","followers_url":"https://api.github.com/users/ChaladiMohanVamsi/followers","following_url":"https://api.github.com/users/ChaladiMohanVamsi/following{/other_user}","gists_url":"https://api.github.com/users/ChaladiMohanVamsi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChaladiMohanVamsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChaladiMohanVamsi/subscriptions","organizations_url":"https://api.github.com/users/ChaladiMohanVamsi/orgs","repos_url":"https://api.github.com/users/ChaladiMohanVamsi/repos","events_url":"https://api.github.com/users/ChaladiMohanVamsi/events{/privacy}","received_events_url":"https://api.github.com/users/ChaladiMohanVamsi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T12:37:11Z","updated_at":"2021-10-05T12:37:11Z","author_association":"NONE","body":"https://issues.apache.org/jira/browse/HUDI-2526\r\n\r\nI faced the similar issue. The community team found that legacy writer config is hard-coded to false, so it is ignoring external config.\r\nThe workaround is to disable row writer while using bulk_insert.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934371202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934384095","html_url":"https://github.com/apache/hudi/pull/3691#issuecomment-934384095","issue_url":"https://api.github.com/repos/apache/hudi/issues/3691","id":934384095,"node_id":"IC_kwDOBI7nWM43sZHf","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T12:53:24Z","updated_at":"2021-10-05T12:53:24Z","author_association":"CONTRIBUTOR","body":"@YannByron : so apart from building/packing, were you looking for any assistance in running the test suite jobs a such ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934384095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934473332","html_url":"https://github.com/apache/hudi/issues/3647#issuecomment-934473332","issue_url":"https://api.github.com/repos/apache/hudi/issues/3647","id":934473332,"node_id":"IC_kwDOBI7nWM43su50","user":{"login":"novakov-alexey-zz","id":11204284,"node_id":"MDQ6VXNlcjExMjA0Mjg0","avatar_url":"https://avatars.githubusercontent.com/u/11204284?v=4","gravatar_id":"","url":"https://api.github.com/users/novakov-alexey-zz","html_url":"https://github.com/novakov-alexey-zz","followers_url":"https://api.github.com/users/novakov-alexey-zz/followers","following_url":"https://api.github.com/users/novakov-alexey-zz/following{/other_user}","gists_url":"https://api.github.com/users/novakov-alexey-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/novakov-alexey-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/novakov-alexey-zz/subscriptions","organizations_url":"https://api.github.com/users/novakov-alexey-zz/orgs","repos_url":"https://api.github.com/users/novakov-alexey-zz/repos","events_url":"https://api.github.com/users/novakov-alexey-zz/events{/privacy}","received_events_url":"https://api.github.com/users/novakov-alexey-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T14:39:03Z","updated_at":"2021-10-05T14:39:03Z","author_association":"NONE","body":"Row writer is giving huge speed up with bulk-insert. Looking forward for the proper fix to this issue ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934473332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934478106","html_url":"https://github.com/apache/hudi/pull/3590#issuecomment-934478106","issue_url":"https://api.github.com/repos/apache/hudi/issues/3590","id":934478106,"node_id":"IC_kwDOBI7nWM43swEa","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T14:45:00Z","updated_at":"2021-10-05T14:45:00Z","author_association":"CONTRIBUTOR","body":"@hudi-bot azure run","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934478106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934504077","html_url":"https://github.com/apache/hudi/pull/3750#issuecomment-934504077","issue_url":"https://api.github.com/repos/apache/hudi/issues/3750","id":934504077,"node_id":"IC_kwDOBI7nWM43s2aN","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T15:17:10Z","updated_at":"2021-10-08T15:00:33Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"6f2bc4169918ef270a1982605ffe6025be466f3e\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2508\",\n    \"triggerID\" : \"6f2bc4169918ef270a1982605ffe6025be466f3e\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"99d1ec58c8fcb418986ccba294969aea414c6abb\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2550\",\n    \"triggerID\" : \"99d1ec58c8fcb418986ccba294969aea414c6abb\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 99d1ec58c8fcb418986ccba294969aea414c6abb Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2550) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934504077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934816311","html_url":"https://github.com/apache/hudi/pull/3752#issuecomment-934816311","issue_url":"https://api.github.com/repos/apache/hudi/issues/3752","id":934816311,"node_id":"IC_kwDOBI7nWM43uCo3","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T20:52:47Z","updated_at":"2021-10-05T21:35:16Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"c4ad910dcdb1d36ac4f59be2ef36c91f8dcde5cb\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2511\",\n    \"triggerID\" : \"c4ad910dcdb1d36ac4f59be2ef36c91f8dcde5cb\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* c4ad910dcdb1d36ac4f59be2ef36c91f8dcde5cb Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2511) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934816311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934887878","html_url":"https://github.com/apache/hudi/pull/3590#issuecomment-934887878","issue_url":"https://api.github.com/repos/apache/hudi/issues/3590","id":934887878,"node_id":"IC_kwDOBI7nWM43uUHG","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-05T21:42:50Z","updated_at":"2021-10-05T21:42:50Z","author_association":"CONTRIBUTOR","body":"@hudi-bot azure run","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/934887878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935132854","html_url":"https://github.com/apache/hudi/issues/3731#issuecomment-935132854","issue_url":"https://api.github.com/repos/apache/hudi/issues/3731","id":935132854,"node_id":"IC_kwDOBI7nWM43vP62","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T00:19:52Z","updated_at":"2021-10-06T00:19:52Z","author_association":"CONTRIBUTOR","body":"Can you set these configs as well\r\nhoodie.write.lock.wait_time_ms_between_retry=2000\r\nhoodie.write.lock.hivemetastore.uris= \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935132854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935135814","html_url":"https://github.com/apache/hudi/issues/3737#issuecomment-935135814","issue_url":"https://api.github.com/repos/apache/hudi/issues/3737","id":935135814,"node_id":"IC_kwDOBI7nWM43vQpG","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T00:22:17Z","updated_at":"2021-10-06T00:22:17Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @bvaradar @n3nash @bhasudha : any recommendations here. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935135814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935136426","html_url":"https://github.com/apache/hudi/issues/3747#issuecomment-935136426","issue_url":"https://api.github.com/repos/apache/hudi/issues/3747","id":935136426,"node_id":"IC_kwDOBI7nWM43vQyq","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T00:22:48Z","updated_at":"2021-10-06T00:22:48Z","author_association":"CONTRIBUTOR","body":"@codope can you follow up on this.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935136426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935138968","html_url":"https://github.com/apache/hudi/issues/3749#issuecomment-935138968","issue_url":"https://api.github.com/repos/apache/hudi/issues/3749","id":935138968,"node_id":"IC_kwDOBI7nWM43vRaY","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T00:24:56Z","updated_at":"2021-10-06T00:24:56Z","author_association":"CONTRIBUTOR","body":"I assume you got your answer from dev mailing list ? if yes, can we close this out. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935138968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935142290","html_url":"https://github.com/apache/hudi/issues/3751#issuecomment-935142290","issue_url":"https://api.github.com/repos/apache/hudi/issues/3751","id":935142290,"node_id":"IC_kwDOBI7nWM43vSOS","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T00:27:40Z","updated_at":"2021-10-06T00:27:40Z","author_association":"CONTRIBUTOR","body":"If you are doing lot of small writes, would recommend looking at MOR table type. curious to know why you folks went with COW ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935142290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935186342","html_url":"https://github.com/apache/hudi/pull/3648#issuecomment-935186342","issue_url":"https://api.github.com/repos/apache/hudi/issues/3648","id":935186342,"node_id":"IC_kwDOBI7nWM43vc-m","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T01:04:55Z","updated_at":"2021-10-06T01:05:03Z","author_association":"CONTRIBUTOR","body":"@fengjian428 : can you please address the feedback when you get a chance. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935186342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935186881","html_url":"https://github.com/apache/hudi/pull/3646#issuecomment-935186881","issue_url":"https://api.github.com/repos/apache/hudi/issues/3646","id":935186881,"node_id":"IC_kwDOBI7nWM43vdHB","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T01:05:24Z","updated_at":"2021-10-06T01:05:24Z","author_association":"CONTRIBUTOR","body":"@prashantwason : can you please address the feedback when you get a chance. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935186881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935187682","html_url":"https://github.com/apache/hudi/pull/3630#issuecomment-935187682","issue_url":"https://api.github.com/repos/apache/hudi/issues/3630","id":935187682,"node_id":"IC_kwDOBI7nWM43vdTi","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T01:06:05Z","updated_at":"2021-10-06T01:06:26Z","author_association":"CONTRIBUTOR","body":"@codope : Did you get a chance to repro this as vinoth suggested?  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935187682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935475881","html_url":"https://github.com/apache/hudi/pull/3753#issuecomment-935475881","issue_url":"https://api.github.com/repos/apache/hudi/issues/3753","id":935475881,"node_id":"IC_kwDOBI7nWM43wjqp","user":{"login":"vingov","id":1142498,"node_id":"MDQ6VXNlcjExNDI0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1142498?v=4","gravatar_id":"","url":"https://api.github.com/users/vingov","html_url":"https://github.com/vingov","followers_url":"https://api.github.com/users/vingov/followers","following_url":"https://api.github.com/users/vingov/following{/other_user}","gists_url":"https://api.github.com/users/vingov/gists{/gist_id}","starred_url":"https://api.github.com/users/vingov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vingov/subscriptions","organizations_url":"https://api.github.com/users/vingov/orgs","repos_url":"https://api.github.com/users/vingov/repos","events_url":"https://api.github.com/users/vingov/events{/privacy}","received_events_url":"https://api.github.com/users/vingov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T05:15:29Z","updated_at":"2021-10-06T05:15:29Z","author_association":"CONTRIBUTOR","body":"@rmahindra123 -  I have explored the option to add a redirect in the config file, but for some reason, it's not allowing/working, hence I create a new quickstart page and did the redirection using JS. \r\n\r\nPlease review, thanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935475881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935480787","html_url":"https://github.com/apache/hudi/pull/3754#issuecomment-935480787","issue_url":"https://api.github.com/repos/apache/hudi/issues/3754","id":935480787,"node_id":"IC_kwDOBI7nWM43wk3T","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T05:19:41Z","updated_at":"2021-10-19T12:07:31Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"497ffa10f0e02708acc500487007dea82efb760f\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2513\",\n    \"triggerID\" : \"497ffa10f0e02708acc500487007dea82efb760f\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"4ffe620924253875d15475125124ac1faef365c6\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2528\",\n    \"triggerID\" : \"4ffe620924253875d15475125124ac1faef365c6\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"42ea9882efc540dfe36610a5b343b672b1eeaee8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2542\",\n    \"triggerID\" : \"42ea9882efc540dfe36610a5b343b672b1eeaee8\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"42ea9882efc540dfe36610a5b343b672b1eeaee8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2557\",\n    \"triggerID\" : \"939206082\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"42ea9882efc540dfe36610a5b343b672b1eeaee8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2561\",\n    \"triggerID\" : \"939220103\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"42ea9882efc540dfe36610a5b343b672b1eeaee8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2603\",\n    \"triggerID\" : \"941850211\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"fed6ee27b9f36b17ca668d008f038beccaa1577a\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2659\",\n    \"triggerID\" : \"fed6ee27b9f36b17ca668d008f038beccaa1577a\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"fed6ee27b9f36b17ca668d008f038beccaa1577a\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2676\",\n    \"triggerID\" : \"944889039\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"efe74a2ed328a1c3bcf969efac78afd89472c8de\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2713\",\n    \"triggerID\" : \"efe74a2ed328a1c3bcf969efac78afd89472c8de\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* efe74a2ed328a1c3bcf969efac78afd89472c8de Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=2713) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run travis` re-run the last Travis build\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935480787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935527868","html_url":"https://github.com/apache/hudi/issues/3657#issuecomment-935527868","issue_url":"https://api.github.com/repos/apache/hudi/issues/3657","id":935527868,"node_id":"IC_kwDOBI7nWM43wwW8","user":{"login":"guan-yq","id":28823113,"node_id":"MDQ6VXNlcjI4ODIzMTEz","avatar_url":"https://avatars.githubusercontent.com/u/28823113?v=4","gravatar_id":"","url":"https://api.github.com/users/guan-yq","html_url":"https://github.com/guan-yq","followers_url":"https://api.github.com/users/guan-yq/followers","following_url":"https://api.github.com/users/guan-yq/following{/other_user}","gists_url":"https://api.github.com/users/guan-yq/gists{/gist_id}","starred_url":"https://api.github.com/users/guan-yq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guan-yq/subscriptions","organizations_url":"https://api.github.com/users/guan-yq/orgs","repos_url":"https://api.github.com/users/guan-yq/repos","events_url":"https://api.github.com/users/guan-yq/events{/privacy}","received_events_url":"https://api.github.com/users/guan-yq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-06T05:57:54Z","updated_at":"2021-10-06T05:57:54Z","author_association":"NONE","body":"I have the same problem.........","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/935527868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]