[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358130672","html_url":"https://github.com/apache/couchdb/issues/896#issuecomment-358130672","issue_url":"https://api.github.com/repos/apache/couchdb/issues/896","id":358130672,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzMDY3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:34:25Z","updated_at":"2018-01-16T22:34:25Z","author_association":"MEMBER","body":"@janl What needs to be done here to move forward?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358130672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358131725","html_url":"https://github.com/apache/couchdb/issues/908#issuecomment-358131725","issue_url":"https://api.github.com/repos/apache/couchdb/issues/908","id":358131725,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzMTcyNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:38:58Z","updated_at":"2018-01-16T22:38:58Z","author_association":"MEMBER","body":"Closed by #907:\r\n\r\n> To bump the version number, you'll still need to modify both version.mk and rel/reltool.config. I'll update the release procedure with this info for now.\r\n\r\n> The new command for building an RC, say RC2, is COUCH_RC=2 make dist. The [wiki page](https://cwiki.apache.org/confluence/display/COUCHDB/Release+Procedure) has been updated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358131725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358132462","html_url":"https://github.com/apache/couchdb/issues/1053#issuecomment-358132462","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1053","id":358132462,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzMjQ2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:42:09Z","updated_at":"2018-01-16T22:42:09Z","author_association":"MEMBER","body":"Were you able to resolve this on your own?\r\n\r\nCan you get us copies of the couch log files from these machines when this happens?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358132462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358134149","html_url":"https://github.com/apache/couchdb/issues/1055#issuecomment-358134149","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1055","id":358134149,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNDE0OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:49:33Z","updated_at":"2018-01-16T22:49:33Z","author_association":"MEMBER","body":"Moved to apache/couchdb-documentation#234","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358134149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358134368","html_url":"https://github.com/apache/couchdb/issues/844#issuecomment-358134368","issue_url":"https://api.github.com/repos/apache/couchdb/issues/844","id":358134368,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNDM2OA==","user":{"login":"realulim","id":17084846,"node_id":"MDQ6VXNlcjE3MDg0ODQ2","avatar_url":"https://avatars.githubusercontent.com/u/17084846?v=4","gravatar_id":"","url":"https://api.github.com/users/realulim","html_url":"https://github.com/realulim","followers_url":"https://api.github.com/users/realulim/followers","following_url":"https://api.github.com/users/realulim/following{/other_user}","gists_url":"https://api.github.com/users/realulim/gists{/gist_id}","starred_url":"https://api.github.com/users/realulim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/realulim/subscriptions","organizations_url":"https://api.github.com/users/realulim/orgs","repos_url":"https://api.github.com/users/realulim/repos","events_url":"https://api.github.com/users/realulim/events{/privacy}","received_events_url":"https://api.github.com/users/realulim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:50:27Z","updated_at":"2018-01-16T22:50:27Z","author_association":"NONE","body":"I absolutely agree that JWT is not the way to go. Cookies are great, because they are immune to XSS attacks. We need to keep them around for XSS-immunity and in a web application can today already add a custom token (like JWT) for CSRF protection. Only that combination is secure.\r\n\r\nMaking CouchDB's cookies revokable does not have to backwards incompatible. You'll only add a new API endpoint for revocation and one internal timestamp per user. This makes CouchDB slightly more stateful in theory, but I don't think the effect on scalability is measurable.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358134368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358135010","html_url":"https://github.com/apache/couchdb/issues/1057#issuecomment-358135010","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1057","id":358135010,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNTAxMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:53:16Z","updated_at":"2018-01-16T22:53:16Z","author_association":"MEMBER","body":"There's no built-in way, but: your list function receives the `req` object. You should be able to implement your own pagination if desired.\r\n\r\nPrototype: `function(head, req) {... }`\r\n\r\nMore info: http://guide.couchdb.org/draft/transforming.html\r\n\r\nPaging @flimzy this is a good one for us to consider adding to the documentation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358135010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358135286","html_url":"https://github.com/apache/couchdb/issues/1057#issuecomment-358135286","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1057","id":358135286,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNTI4Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:54:21Z","updated_at":"2018-01-16T22:54:21Z","author_association":"MEMBER","body":"Because of how lists are implemented, we must stream all of the data to the `couchjs` process. There is no way we can allow you to \"jump ahead,\" but you can easily loop over (and discard) rows until you reach the desired row yourself.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358135286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358135616","html_url":"https://github.com/apache/couchdb/pull/1066#issuecomment-358135616","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1066","id":358135616,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNTYxNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:55:47Z","updated_at":"2018-01-16T22:55:47Z","author_association":"MEMBER","body":"+1 lgtm, needs rebasing and another Travis run.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358135616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358136343","html_url":"https://github.com/apache/couchdb/issues/1060#issuecomment-358136343","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1060","id":358136343,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNjM0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T22:58:58Z","updated_at":"2018-01-16T22:58:58Z","author_association":"MEMBER","body":"The 5986 port is in the process of being deprecated; no more references to it are being added to the documentation.\r\n\r\nThis is a documentation bug, so I'm moving it over to apache/couchdb-documentation#235.\r\n\r\nFYI: As of 2.1.1 we also now support `/_node/_local/_stats` which was documented in the [release notes only](http://docs.couchdb.org/en/2.1.1/whatsnew/2.1.html#version-2-1-1).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358136343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358136842","html_url":"https://github.com/apache/couchdb/issues/1070#issuecomment-358136842","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1070","id":358136842,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzNjg0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:01:13Z","updated_at":"2018-01-16T23:01:13Z","author_association":"MEMBER","body":"Have you seen this in 1.7.1 as well?\r\n\r\nHow about in 2.x? Major improvements to replication were introduced with the 2.x series.\r\n\r\nIt is highly unlikely that there will be another 1.x release at this point except for security issues.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358136842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358138570","html_url":"https://github.com/apache/couchdb/issues/1071#issuecomment-358138570","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1071","id":358138570,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzODU3MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:09:28Z","updated_at":"2018-01-16T23:09:28Z","author_association":"MEMBER","body":"So in the first paste, CouchDB is saying that an external OS process (couchjs) terminated with exit code 137.\r\n\r\n137=128+9, which means some other process has sent you a signal 9, which is SIGKILL. Presumably the kernel oomkiller killed your couchjs process.\r\n\r\nMy guess? It's your alteration of +A and os_process_limit.\r\n\r\nDo not modify +A to such a large number. Our default of `+A 16` is correct for most machines, only needing to be *lowered* for smaller machines. (The default Erlang value is 10.) Read more about it here: https://stackoverflow.com/questions/13479142/when-is-it-appropriate-to-increase-the-async-thread-size-from-zero#13497717\r\n\r\nThe `os_process_limit` value defines how many `couchjs` processes can run at once. Typically you want this to be `# of cores - 1` at most (leaving a core for Erlang and I/O handling), but sometimes less, if you are running more than just CouchDB on a machine (say, the clouseau/dreyfus full-text indexing functionality.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358138570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358139605","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358139605","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358139605,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODEzOTYwNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:14:21Z","updated_at":"2018-01-16T23:14:21Z","author_association":"MEMBER","body":"My guess is this the same as issue #796. I'll leave this open for a bit, but I expect it's the same problem.\r\n\r\nYou should know that there are reports of performance issues with CouchDB running inside of Docker, and especially on Windows as a host platform. To be absolutely sure, you may want to try running this on similar Azure machines running Linux natively under Hyper-V instead of inside a Windows host, or if possible, directly on Linux without Docker at all.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358139605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358140940","html_url":"https://github.com/apache/couchdb/issues/1076#issuecomment-358140940","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1076","id":358140940,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0MDk0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:20:39Z","updated_at":"2018-01-16T23:20:39Z","author_association":"MEMBER","body":"Only if you are enabling httpsd in your `local.ini` file.\r\n\r\nRepeated issues with Erlang's TLS implementation is why Apache CouchDB officially recommends using `haproxy` as a reverse proxy server/load balancer in front of CouchDB itself. Terminate your SSL connections there and set up firewall rules to allow access to CouchDB only through haproxy.\r\n\r\nIf you find you are exposed, update your Erlang installation and recompile/redeploy CouchDB.\r\n\r\nSo-called 'convenience binaries' from Apache CouchDB may take some time to be updated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358140940/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358141742","html_url":"https://github.com/apache/couchdb/issues/1077#issuecomment-358141742","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1077","id":358141742,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0MTc0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:24:33Z","updated_at":"2018-01-16T23:24:33Z","author_association":"MEMBER","body":"Interesting enhancement request, and definitely non-trivial.\r\n\r\nIf you are concerned about security, as a workaround you can disable `_all_dbs` by removing its handler from `[httpd_global_handlers]`, or firewall off access through a reverse proxy (such as `haproxy`).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358141742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358144752","html_url":"https://github.com/apache/couchdb/issues/1084#issuecomment-358144752","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1084","id":358144752,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NDc1Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:39:25Z","updated_at":"2018-01-16T23:39:25Z","author_association":"MEMBER","body":"Replace `nonode@nohost` with `couchdb@localhost` and this will work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358144752/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358145342","html_url":"https://github.com/apache/couchdb/issues/1086#issuecomment-358145342","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1086","id":358145342,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NTM0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:42:35Z","updated_at":"2018-01-16T23:42:35Z","author_association":"MEMBER","body":"0. You actually want CouchDB 1.7.1, see [this post](https://blog.couchdb.org/2017/11/11/1-7-1/)\r\n1. Backup all of your data.\r\n2. Install CouchDB 1.7.1 and Ubuntu 16.04 on a new machine\r\n3. Copy over your ini file changes (if any) and restart CouchDB\r\n4. Test that CouchDB works\r\n5. Copy over your entire data directory to the new servers\r\n6. Test that your databases present correctly, as expected. Test your application against it\r\n7. Block client/user access to the old CouchDB servers\r\n8. Replicate any changes from the old servers to the new ones.\r\n9. Swap the new servers in for the old ones\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358145342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358145730","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-358145730","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":358145730,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NTczMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:44:37Z","updated_at":"2018-01-16T23:44:37Z","author_association":"MEMBER","body":"My guess is this is the same issue as in #796. Have you tried increasing your fd limit and max_open_dbs? Are you running all of your databases with the default `q=8` or have you tried `q=1` databases?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358145730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358146139","html_url":"https://github.com/apache/couchdb/issues/1094#issuecomment-358146139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1094","id":358146139,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NjEzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:46:45Z","updated_at":"2018-01-16T23:46:45Z","author_association":"MEMBER","body":"Can you provide more logfiles? I cannot reproduce this locally.\r\n\r\nTry editing `/var/lib/dpkg/info/couchdb.postinst` so that the first line is `#!/bin/sh +x` and see if that gives us more to go on.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358146139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358146381","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-358146381","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":358146381,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NjM4MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:48:01Z","updated_at":"2018-01-16T23:48:01Z","author_association":"MEMBER","body":"My guess is this is similar to what we're seeing in #796 .\r\n\r\nWe see this issue more frequently with people running in containers and virtualisation, especially Docker. /cc @kocolosk ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358146381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358146472","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-358146472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":358146472,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NjQ3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:48:31Z","updated_at":"2018-01-16T23:48:31Z","author_association":"MEMBER","body":"Can you share the exact line from `couch.log` please? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358146472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358147243","html_url":"https://github.com/apache/couchdb/issues/1103#issuecomment-358147243","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1103","id":358147243,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NzI0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:52:57Z","updated_at":"2018-01-16T23:52:57Z","author_association":"MEMBER","body":"Your StackExchange post makes it sound like Erlang isn't running correctly on your device - your error 139 is a segmentation fault. Without a RPi to test on, I can't help further.\r\n\r\nFeel free to use this ticket to collect others who can help, or to describe any patches/changes required to get your build to work.\r\n\r\nPRs welcome!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358147243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358147822","html_url":"https://github.com/apache/couchdb/issues/1106#issuecomment-358147822","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1106","id":358147822,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0NzgyMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:56:19Z","updated_at":"2018-01-16T23:56:19Z","author_association":"MEMBER","body":"Do you get the exact same error on every node, or does the shard in the error line change?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358147822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358148358","html_url":"https://github.com/apache/couchdb/issues/1107#issuecomment-358148358","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1107","id":358148358,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0ODM1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-16T23:58:57Z","updated_at":"2018-01-16T23:58:57Z","author_association":"MEMBER","body":"Please re-file this ticket over at https://github.com/apache/couchdb-documentation/issues , please :)\r\n\r\nRight before that, it says: \"The rewrite rules are defined in array or string field of the design document called rewrites.\" So, the two sections are referring to the differences between whether the rewrites key-value pair is an array or a string.\r\n\r\nAny PR against apache/couchdb-documentation is welcome :)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358148358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358148572","html_url":"https://github.com/apache/couchdb/issues/1112#issuecomment-358148572","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1112","id":358148572,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0ODU3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T00:00:06Z","updated_at":"2018-01-17T00:00:06Z","author_association":"MEMBER","body":"paging @rnewson who may be able to shed some light on the 412 vs. 409 distinction.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358148572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358149801","html_url":"https://github.com/apache/couchdb/pull/1082#issuecomment-358149801","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1082","id":358149801,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE0OTgwMQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T00:05:40Z","updated_at":"2018-01-17T00:05:40Z","author_association":"CONTRIBUTOR","body":"hi @wohali, with introduction of `_dbs_info` endpoint, the current intention is not to introduce _all_dbs?info=true anymore. I think the reason includes\r\n- `_dbs_info` can have same function as _all_dbs?info=true and clearer\r\n- using `_dbs_info` instead of _all_dbs?info=true  can avoid to have implication of query of information of a large set of databases.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358149801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358150338","html_url":"https://github.com/apache/couchdb/issues/1051#issuecomment-358150338","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1051","id":358150338,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE1MDMzOA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T00:08:39Z","updated_at":"2018-01-17T00:08:39Z","author_association":"CONTRIBUTOR","body":"@wohali thanks a lot for your tip. Will do later.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358150338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358151166","html_url":"https://github.com/apache/couchdb/issues/996#issuecomment-358151166","issue_url":"https://api.github.com/repos/apache/couchdb/issues/996","id":358151166,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE1MTE2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T00:13:26Z","updated_at":"2018-01-17T00:13:26Z","author_association":"MEMBER","body":"OK, thanks for the report. Patches welcome.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358151166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358152233","html_url":"https://github.com/apache/couchdb/issues/1112#issuecomment-358152233","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1112","id":358152233,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE1MjIzMw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T00:18:57Z","updated_at":"2018-01-17T00:18:57Z","author_association":"MEMBER","body":"That decision predates my involvement with the project. I agree that 412 is being used inappropriately as 412 is for when a request has If-Match, If-None-Match or If-Unmodified-Since headers and one of them evaluates to false. 409 would be more appropriate.\r\n\r\nOP is also correct on appropriate use of 201 vs 200 for PUT /_config. 201 is correct for resource creation, 200 for update.\r\n\r\nThere are more issues with the HTTP API than these. It's unclear if we should address them given the decade or so that CouchDB has behaved this way. I doubt we'll see changes here any sooner than the planned (but not scheduled) replacement of mochiweb for something more modern.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358152233/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358160318","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358160318","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358160318,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE2MDMxOA==","user":{"login":"style95","id":3447251,"node_id":"MDQ6VXNlcjM0NDcyNTE=","avatar_url":"https://avatars.githubusercontent.com/u/3447251?v=4","gravatar_id":"","url":"https://api.github.com/users/style95","html_url":"https://github.com/style95","followers_url":"https://api.github.com/users/style95/followers","following_url":"https://api.github.com/users/style95/following{/other_user}","gists_url":"https://api.github.com/users/style95/gists{/gist_id}","starred_url":"https://api.github.com/users/style95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/style95/subscriptions","organizations_url":"https://api.github.com/users/style95/orgs","repos_url":"https://api.github.com/users/style95/repos","events_url":"https://api.github.com/users/style95/events{/privacy}","received_events_url":"https://api.github.com/users/style95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T01:04:37Z","updated_at":"2018-01-17T01:04:37Z","author_association":"MEMBER","body":"Actually I am facing same issue on CentOS with apache/docker image.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358160318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358160898","html_url":"https://github.com/apache/couchdb/issues/1071#issuecomment-358160898","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1071","id":358160898,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODE2MDg5OA==","user":{"login":"style95","id":3447251,"node_id":"MDQ6VXNlcjM0NDcyNTE=","avatar_url":"https://avatars.githubusercontent.com/u/3447251?v=4","gravatar_id":"","url":"https://api.github.com/users/style95","html_url":"https://github.com/style95","followers_url":"https://api.github.com/users/style95/followers","following_url":"https://api.github.com/users/style95/following{/other_user}","gists_url":"https://api.github.com/users/style95/gists{/gist_id}","starred_url":"https://api.github.com/users/style95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/style95/subscriptions","organizations_url":"https://api.github.com/users/style95/orgs","repos_url":"https://api.github.com/users/style95/repos","events_url":"https://api.github.com/users/style95/events{/privacy}","received_events_url":"https://api.github.com/users/style95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T01:07:55Z","updated_at":"2018-01-17T01:07:55Z","author_association":"MEMBER","body":"The reason why I increased the value is because I am facing this issue:  #1073\r\nIs there any way to prevent this issue?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358160898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358242009","html_url":"https://github.com/apache/couchdb/issues/1103#issuecomment-358242009","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1103","id":358242009,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODI0MjAwOQ==","user":{"login":"ericclack","id":903568,"node_id":"MDQ6VXNlcjkwMzU2OA==","avatar_url":"https://avatars.githubusercontent.com/u/903568?v=4","gravatar_id":"","url":"https://api.github.com/users/ericclack","html_url":"https://github.com/ericclack","followers_url":"https://api.github.com/users/ericclack/followers","following_url":"https://api.github.com/users/ericclack/following{/other_user}","gists_url":"https://api.github.com/users/ericclack/gists{/gist_id}","starred_url":"https://api.github.com/users/ericclack/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericclack/subscriptions","organizations_url":"https://api.github.com/users/ericclack/orgs","repos_url":"https://api.github.com/users/ericclack/repos","events_url":"https://api.github.com/users/ericclack/events{/privacy}","received_events_url":"https://api.github.com/users/ericclack/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T09:10:22Z","updated_at":"2018-01-17T09:10:22Z","author_association":"NONE","body":"From the blog posts I followed the recommendation was to install Erlang from packages.erlang-solutions.com, rather than the Raspian (Debian) repos. \r\n\r\n```\r\nwget http://packages.erlang-solutions.com/debian/erlang_solutions.asc\r\nsudo apt-key add erlang_solutions.asc\r\nsudo apt-get update\r\nsudo apt-get install -y erlang-nox erlang-dev erlang-reltool\r\nsudo apt-get install -y build-essential\r\nsudo apt-get install -y libmozjs185-1.0 libmozjs185-dev\r\nsudo apt-get install -y libcurl4-openssl-dev libicu-dev \r\n\r\n```\r\nSo I think my first step is to try Erlang from Raspian and see if that makes a difference. \r\n\r\nIf you can give me any advice on how to report the errors I see, and where to raise them (e.g. the Erlang team) that would be much appreciated.\r\n\r\nMany thanks, \r\n-Eric. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358242009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358302271","html_url":"https://github.com/apache/couchdb/issues/1047#issuecomment-358302271","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1047","id":358302271,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODMwMjI3MQ==","user":{"login":"anlexN","id":8686739,"node_id":"MDQ6VXNlcjg2ODY3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/8686739?v=4","gravatar_id":"","url":"https://api.github.com/users/anlexN","html_url":"https://github.com/anlexN","followers_url":"https://api.github.com/users/anlexN/followers","following_url":"https://api.github.com/users/anlexN/following{/other_user}","gists_url":"https://api.github.com/users/anlexN/gists{/gist_id}","starred_url":"https://api.github.com/users/anlexN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anlexN/subscriptions","organizations_url":"https://api.github.com/users/anlexN/orgs","repos_url":"https://api.github.com/users/anlexN/repos","events_url":"https://api.github.com/users/anlexN/events{/privacy}","received_events_url":"https://api.github.com/users/anlexN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T13:21:46Z","updated_at":"2018-01-17T13:21:46Z","author_association":"NONE","body":"Execuse me. please review and update your document very often!\r\n# I am willing to be your contributor. But i think i don't master couchdb. Could you please train me?\r\n@Couchdb team","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358302271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358302434","html_url":"https://github.com/apache/couchdb/issues/822#issuecomment-358302434","issue_url":"https://api.github.com/repos/apache/couchdb/issues/822","id":358302434,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODMwMjQzNA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T13:22:19Z","updated_at":"2018-01-17T13:22:19Z","author_association":"CONTRIBUTOR","body":"You are right on both fronts `update_seq` and `purge_seq` could be retrieved and `do-not-cache` approach might work. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358302434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358315383","html_url":"https://github.com/apache/couchdb/pull/1032#issuecomment-358315383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1032","id":358315383,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODMxNTM4Mw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T14:10:03Z","updated_at":"2018-01-17T14:10:03Z","author_association":"CONTRIBUTOR","body":"Thanks @wohali. Already addressed conflict in commit 7aec581. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358315383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358367303","html_url":"https://github.com/apache/couchdb/issues/1103#issuecomment-358367303","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1103","id":358367303,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODM2NzMwMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T16:50:08Z","updated_at":"2018-01-17T16:50:08Z","author_association":"MEMBER","body":"The Erlang team won't take reports if they are packaging related. \r\n\r\nIf you're fairly sure that you have an Erlang bug, you'll need to compile Erlang from scratch and reproduce it before reporting it.\r\n\r\nhttps://github.com/erlang/otp/wiki/Bug-reports has the instructions on how to do it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358367303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358377844","html_url":"https://github.com/apache/couchdb/issues/1102#issuecomment-358377844","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1102","id":358377844,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODM3Nzg0NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T17:22:52Z","updated_at":"2018-01-17T17:22:52Z","author_association":"MEMBER","body":"\"Please note that node.js and npm is required. Specifically, Fauxton requires at least Node 6 and npm 3.\"\r\n\r\nFrom your paste:\r\n```\r\nnpm WARN engine babel-eslint@8.2.1: wanted: {\"node\":\">=4\"} (current: {\"node\":\"v0.10.25\",\"npm\":\"1.3.10\"})\r\n```\r\n\r\nhttps://github.com/apache/couchdb-fauxton/blob/master/readme.md","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358377844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358413642","html_url":"https://github.com/apache/couchdb/issues/609#issuecomment-358413642","issue_url":"https://api.github.com/repos/apache/couchdb/issues/609","id":358413642,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQxMzY0Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T19:22:26Z","updated_at":"2018-01-17T19:22:26Z","author_association":"MEMBER","body":"Yes I think it makes sense to close this one @wohali ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358413642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358457829","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-358457829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":358457829,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ1NzgyOQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T21:45:39Z","updated_at":"2018-01-17T21:45:39Z","author_association":"NONE","body":"I have just increased max open files from 1024 to 65535.\r\nI will update the ticket is this solves the issue","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358457829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358459718","html_url":"https://github.com/apache/couchdb/issues/1106#issuecomment-358459718","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1106","id":358459718,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ1OTcxOA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T21:51:52Z","updated_at":"2018-01-19T06:48:05Z","author_association":"NONE","body":"It is the exact same shard when error appears in other nodes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358459718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358460094","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-358460094","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":358460094,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ2MDA5NA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T21:52:57Z","updated_at":"2018-01-17T21:53:20Z","author_association":"NONE","body":"Of course:\r\n\r\n```\r\n[warning] 2018-01-14T03:30:37.531777Z couchdb@X.X.X.X <0.263.0> -------- Compaction daemon - unable to calculate free space for `/run/user/0`: `enoent`\r\n[warning] 2018-01-14T03:35:37.710059Z couchdb@X.X.X.X <0.263.0> -------- Compaction daemon - unable to calculate free space for `/run/user/0`: `enoent`\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358460094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358487048","html_url":"https://github.com/apache/couchdb/issues/1071#issuecomment-358487048","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1071","id":358487048,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ4NzA0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T23:41:02Z","updated_at":"2018-01-17T23:41:02Z","author_association":"MEMBER","body":"Let's continue the discussion over there...but the tweaks you applied aren't appropriate for the environment you're running in.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358487048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358487115","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358487115","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358487115,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ4NzExNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T23:41:25Z","updated_at":"2018-01-17T23:41:25Z","author_association":"MEMBER","body":"So it sounds like possibly a virtualisation issue.\r\n\r\n@kocolosk has been spending more time with Docker as of late, perhaps he has an idea?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358487115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358488443","html_url":"https://github.com/apache/couchdb/issues/1047#issuecomment-358488443","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1047","id":358488443,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ4ODQ0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-17T23:48:02Z","updated_at":"2018-01-17T23:48:02Z","author_association":"MEMBER","body":"Thanks for expressing interest in contributing!\r\n\r\nDo you want to help with our documentation? That's a great place to start. You can help fix the bug that you identified, and you don't have to be a coder at all.\r\n\r\nFirst, read this: https://github.com/apache/couchdb/blob/master/CONTRIBUTING.md\r\nWe also have a code of conduct: https://couchdb.apache.org/conduct.html\r\n\r\nThen, if you know GitHub, you can fork the [apache/couchdb-documentation](https://github.com/apache/couchdb-documentation) repository, create a branch (we recommend starting the branch name with the bug #, so something like 231-remove-restart), editing the right file (probably [this one](https://github.com/apache/couchdb-documentation/blob/7f8c3abc8882e2ff171ac304a8d9584b7e638845/src/api/server/common.rst), though there are other references that should be removed as well), checking in your code, pushing it to GitHub, and opening a Pull Request (PR).\r\n\r\nAs for training on CouchDB, you might want to start by reading our backlog of mailing list messages: [couchdb-user](https://lists.apache.org/list.html?user@couchdb.apache.org) and [couchdb-dev](https://lists.apache.org/list.html?dev@couchdb.apache.org). There's a lot of valuable information in there.\r\n\r\nOnce again, so happy to have you working with us!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358488443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358499653","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358499653","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358499653,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODQ5OTY1Mw==","user":{"login":"style95","id":3447251,"node_id":"MDQ6VXNlcjM0NDcyNTE=","avatar_url":"https://avatars.githubusercontent.com/u/3447251?v=4","gravatar_id":"","url":"https://api.github.com/users/style95","html_url":"https://github.com/style95","followers_url":"https://api.github.com/users/style95/followers","following_url":"https://api.github.com/users/style95/following{/other_user}","gists_url":"https://api.github.com/users/style95/gists{/gist_id}","starred_url":"https://api.github.com/users/style95/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/style95/subscriptions","organizations_url":"https://api.github.com/users/style95/orgs","repos_url":"https://api.github.com/users/style95/repos","events_url":"https://api.github.com/users/style95/events{/privacy}","received_events_url":"https://api.github.com/users/style95/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T00:46:32Z","updated_at":"2018-01-18T00:46:32Z","author_association":"MEMBER","body":"I just want to provide more information for this issue, and I run my tests on physical machine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358499653/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358502458","html_url":"https://github.com/apache/couchdb/pull/1032#issuecomment-358502458","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1032","id":358502458,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODUwMjQ1OA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T01:02:07Z","updated_at":"2018-01-18T01:02:07Z","author_association":"CONTRIBUTOR","body":"I already rebased again. @wohali or any other committer, can you help merge it to master branch? Thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358502458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358507235","html_url":"https://github.com/apache/couchdb/pull/1032#issuecomment-358507235","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1032","id":358507235,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODUwNzIzNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T01:28:30Z","updated_at":"2018-01-18T01:28:30Z","author_association":"MEMBER","body":"Done! Feel free to do the documentation too if you have time :)\r\n\r\nThank you again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358507235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358510809","html_url":"https://github.com/apache/couchdb/pull/1032#issuecomment-358510809","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1032","id":358510809,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODUxMDgwOQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T01:48:25Z","updated_at":"2018-01-18T01:48:25Z","author_association":"CONTRIBUTOR","body":"Thanks wohali. Will update document later. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358510809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358549541","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-358549541","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":358549541,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU0OTU0MQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T06:20:46Z","updated_at":"2018-01-18T06:20:46Z","author_association":"NONE","body":"Increasing max open files does not help. I have just changed max_dbs_open = 2500 in local.ini.\r\nWaiting if that change helps.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358549541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358550893","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-358550893","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":358550893,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU1MDg5Mw==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T06:29:17Z","updated_at":"2018-01-18T06:29:17Z","author_association":"NONE","body":"Take in account that:\r\n\r\n1.- Each virtual machine is the only machine running on each hardware node.\r\n2.- Couchdb is the only service running in each machine\r\n\r\nRegards","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358550893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358563286","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-358563286","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":358563286,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU2MzI4Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T07:39:49Z","updated_at":"2018-01-18T08:20:21Z","author_association":"MEMBER","body":"Thank you for your patience everybody. Could you all please give this a spin. And make sure to `brew uninstall nspr` (or `brew unlink nspr`) first:\r\n\r\n~http://jan.prima.de/u/Apache-CouchDB-2.1.1.zip~\r\n\r\nEDIT: Apologies, made a silly mistake here, new binary coming up in a few minutes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358563286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358571929","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-358571929","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":358571929,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODU3MTkyOQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T08:22:10Z","updated_at":"2018-01-18T08:22:10Z","author_association":"MEMBER","body":"New binary: http://jan.prima.de/u/Apache-CouchDB-2.1.1-fix2.zip\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358571929/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358617759","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-358617759","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":358617759,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODYxNzc1OQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T11:21:04Z","updated_at":"2018-01-18T11:21:04Z","author_association":"NONE","body":"Today, Zabbix has reported \"**Free swap space in % (X.X.X.X:system.swap.size[,pfree]): 0 %**\"\r\n\r\nEach machine has 100 Gigas of swap space (and 40G of RAM). They need more swap space?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358617759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358644333","html_url":"https://github.com/apache/couchdb/issues/603#issuecomment-358644333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/603","id":358644333,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODY0NDMzMw==","user":{"login":"ChiragMoradiya","id":2399621,"node_id":"MDQ6VXNlcjIzOTk2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2399621?v=4","gravatar_id":"","url":"https://api.github.com/users/ChiragMoradiya","html_url":"https://github.com/ChiragMoradiya","followers_url":"https://api.github.com/users/ChiragMoradiya/followers","following_url":"https://api.github.com/users/ChiragMoradiya/following{/other_user}","gists_url":"https://api.github.com/users/ChiragMoradiya/gists{/gist_id}","starred_url":"https://api.github.com/users/ChiragMoradiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChiragMoradiya/subscriptions","organizations_url":"https://api.github.com/users/ChiragMoradiya/orgs","repos_url":"https://api.github.com/users/ChiragMoradiya/repos","events_url":"https://api.github.com/users/ChiragMoradiya/events{/privacy}","received_events_url":"https://api.github.com/users/ChiragMoradiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T13:21:14Z","updated_at":"2018-01-18T13:21:14Z","author_association":"NONE","body":"I also have observed same behavior for my production cluster. Any idea, when it's going to be fixed? Is it targeted for specific release?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358644333/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358646659","html_url":"https://github.com/apache/couchdb/issues/603#issuecomment-358646659","issue_url":"https://api.github.com/repos/apache/couchdb/issues/603","id":358646659,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODY0NjY1OQ==","user":{"login":"ChiragMoradiya","id":2399621,"node_id":"MDQ6VXNlcjIzOTk2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/2399621?v=4","gravatar_id":"","url":"https://api.github.com/users/ChiragMoradiya","html_url":"https://github.com/ChiragMoradiya","followers_url":"https://api.github.com/users/ChiragMoradiya/followers","following_url":"https://api.github.com/users/ChiragMoradiya/following{/other_user}","gists_url":"https://api.github.com/users/ChiragMoradiya/gists{/gist_id}","starred_url":"https://api.github.com/users/ChiragMoradiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChiragMoradiya/subscriptions","organizations_url":"https://api.github.com/users/ChiragMoradiya/orgs","repos_url":"https://api.github.com/users/ChiragMoradiya/repos","events_url":"https://api.github.com/users/ChiragMoradiya/events{/privacy}","received_events_url":"https://api.github.com/users/ChiragMoradiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T13:30:38Z","updated_at":"2018-01-18T13:30:38Z","author_association":"NONE","body":"In addition to this, When I was testing behavior with 3 nodes cluster. Whenever 1 of the node is down then I was able to create database and receiving 200 status code.\r\n\r\nBut, it sends 500 status code when 2 nodes (out of 3) are down & only 1 is up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358646659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358700688","html_url":"https://github.com/apache/couchdb/issues/1053#issuecomment-358700688","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1053","id":358700688,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODcwMDY4OA==","user":{"login":"marcinrozanski","id":3663562,"node_id":"MDQ6VXNlcjM2NjM1NjI=","avatar_url":"https://avatars.githubusercontent.com/u/3663562?v=4","gravatar_id":"","url":"https://api.github.com/users/marcinrozanski","html_url":"https://github.com/marcinrozanski","followers_url":"https://api.github.com/users/marcinrozanski/followers","following_url":"https://api.github.com/users/marcinrozanski/following{/other_user}","gists_url":"https://api.github.com/users/marcinrozanski/gists{/gist_id}","starred_url":"https://api.github.com/users/marcinrozanski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcinrozanski/subscriptions","organizations_url":"https://api.github.com/users/marcinrozanski/orgs","repos_url":"https://api.github.com/users/marcinrozanski/repos","events_url":"https://api.github.com/users/marcinrozanski/events{/privacy}","received_events_url":"https://api.github.com/users/marcinrozanski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T16:27:25Z","updated_at":"2018-01-18T16:28:18Z","author_association":"NONE","body":"I had the same problem, the following worked for me.\r\n\r\n/opt/couchdb/bin/couchup replicate -a --login admin --password {ADMIN_PASSWORD}\r\n\r\nI suggest looking at code of 'couchup' tool for more useful arguments.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358700688/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358720461","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-358720461","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":358720461,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODcyMDQ2MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T17:28:08Z","updated_at":"2018-01-18T17:28:08Z","author_association":"MEMBER","body":"Understood, this is similar to other issues that have recently been filed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358720461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358721567","html_url":"https://github.com/apache/couchdb/issues/1053#issuecomment-358721567","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1053","id":358721567,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODcyMTU2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T17:31:45Z","updated_at":"2018-01-18T17:31:45Z","author_association":"MEMBER","body":"Yes, if you don't specify the correct login and password arguments, couchup won't work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358721567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358725087","html_url":"https://github.com/apache/couchdb/issues/1086#issuecomment-358725087","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1086","id":358725087,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODcyNTA4Nw==","user":{"login":"sajeeval","id":29610949,"node_id":"MDQ6VXNlcjI5NjEwOTQ5","avatar_url":"https://avatars.githubusercontent.com/u/29610949?v=4","gravatar_id":"","url":"https://api.github.com/users/sajeeval","html_url":"https://github.com/sajeeval","followers_url":"https://api.github.com/users/sajeeval/followers","following_url":"https://api.github.com/users/sajeeval/following{/other_user}","gists_url":"https://api.github.com/users/sajeeval/gists{/gist_id}","starred_url":"https://api.github.com/users/sajeeval/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajeeval/subscriptions","organizations_url":"https://api.github.com/users/sajeeval/orgs","repos_url":"https://api.github.com/users/sajeeval/repos","events_url":"https://api.github.com/users/sajeeval/events{/privacy}","received_events_url":"https://api.github.com/users/sajeeval/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T17:44:04Z","updated_at":"2018-01-18T18:04:15Z","author_association":"NONE","body":"Hello Wohali,\r\nThank you for your reply. I have few more questions.\r\nDirectly copying the data directory from an older version to a newer version will not introduce any compatibility issues?\r\nDon't database files include version specific metadata? If we take a database file, it can be copied to another couchdb instance regardless of the version?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358725087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358732617","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358732617","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358732617,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODczMjYxNw==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T18:09:52Z","updated_at":"2018-01-18T18:09:52Z","author_association":"NONE","body":"I started one node couchdb docker instance and got similar error. Looks like issue not related to cluster config\r\n```\r\n[root@node1.docker tmp]# cat import.log | grep -v \"Request to create\"| head\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.441419Z couchdb@node1.docker.rcsnet.ru <0.14020.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.441429Z couchdb@node1.docker.rcsnet.ru <0.14026.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.441546Z couchdb@node1.docker.rcsnet.ru <0.14022.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.442220Z couchdb@node1.docker.rcsnet.ru <0.14028.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.442334Z couchdb@node1.docker.rcsnet.ru <0.14025.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.442524Z couchdb@node1.docker.rcsnet.ru <0.14027.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.442602Z couchdb@node1.docker.rcsnet.ru <0.14023.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:27:57 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:27:57.442760Z couchdb@node1.docker.rcsnet.ru <0.14021.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.14018.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]}]\r\n 18 13:28:40 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:28:40.922262Z couchdb@node1.docker.rcsnet.ru <0.26046.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.26035.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n 18 13:28:40 node1.docker.rcsnet.ru sh[28967]: [error] 2018-01-18T13:28:40.922386Z couchdb@node1.docker.rcsnet.ru <0.26048.0> -------- rexi_server: from: couchdb@node1.docker.rcsnet.ru(<0.26035.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n```\r\nNext test on bare metal server on CentOS 7 from rpm package","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358732617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358771442","html_url":"https://github.com/apache/couchdb/issues/1086#issuecomment-358771442","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1086","id":358771442,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODc3MTQ0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T20:27:13Z","updated_at":"2018-01-18T20:27:13Z","author_association":"MEMBER","body":"CouchDB knows how to update that metadata on first open. You can safely upgrade from anything newer than I think 1.0.2 to any newer 1.x version.\r\n\r\nBut it is not \"regardless of the version,\" you need to be careful about upgrading to 2.x. We have documentation about the process for 2.x here: http://docs.couchdb.org/en/2.1.1/install/upgrading.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358771442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358798003","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-358798003","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":358798003,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODc5ODAwMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-18T22:08:28Z","updated_at":"2018-01-18T22:11:34Z","author_association":"CONTRIBUTOR","body":"Leaving it here as it might be relevant:\r\n\r\nA similar issue was noticed with someone using attachments in the 10MB range. One attachment had larger size around 50MB.\r\n\r\nInvestigating on #couchdb-dev IRC channel, implicated the `couch_doc,'-doc_from_multi_part_stream/4-fun-1-',1,` function (it looks ugly because it was an anonymous function with its name mangled).\r\n\r\nAlso possibly related in that case was that there were intermittent network problems - nodes being connected and disconnected.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358798003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358870957","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358870957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358870957,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODg3MDk1Nw==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T05:31:43Z","updated_at":"2018-01-19T05:31:43Z","author_association":"NONE","body":"I installed CouchDB from [couchdb-2.1.1-2.el7.centos.x86_64.rpm](http://apache.bintray.com/couchdb-rpm/el7/x86_64)\r\n```\r\n[root@node1.docker tmp]# grep error /var/log/couchdb/couchdb.log | grep rexi_server | head\r\n[error] 2018-01-18T18:57:41.932949Z couchdb@127.0.0.1 <0.12764.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.933954Z couchdb@127.0.0.1 <0.12760.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.933996Z couchdb@127.0.0.1 <0.12765.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934089Z couchdb@127.0.0.1 <0.12762.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934061Z couchdb@127.0.0.1 <0.12763.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934294Z couchdb@127.0.0.1 <0.12766.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934416Z couchdb@127.0.0.1 <0.12759.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.935568Z couchdb@127.0.0.1 <0.12761.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]}]\r\n[error] 2018-01-18T18:58:25.372933Z couchdb@127.0.0.1 <0.23503.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23501.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:58:25.373010Z couchdb@127.0.0.1 <0.23509.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23501.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n```\r\n\r\n**Other types of errors**\r\nFile operation error\r\n```\r\n[root@node1.docker tmp]# grep error /var/log/couchdb/couchdb.log | grep \"File operation error\" | head\r\n[error] 2018-01-18T18:56:02.373572Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: /opt/couchdb/bin/../lib/stdlib-2.8/ebin/erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.377095Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.378314Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: /opt/couchdb/bin/../lib/stdlib-2.8/ebin/erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.381081Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.381934Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: /opt/couchdb/bin/../lib/stdlib-2.8/ebin/erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.384896Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.385662Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: /opt/couchdb/bin/../lib/stdlib-2.8/ebin/erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.388574Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.389582Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: /opt/couchdb/bin/../lib/stdlib-2.8/ebin/erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n[error] 2018-01-18T18:56:02.392229Z couchdb@127.0.0.1 <0.12.0> -------- File operation error: emfile. Target: erl_posix_msg.beam. Function: get_file. Process: code_server.\r\n```\r\ndied with reason\r\n```\r\n[root@node1.docker tmp]# grep error /var/log/couchdb/couchdb.log | grep \"died with reason\" | head\r\n[info] 2018-01-18T18:56:11.273221Z couchdb@127.0.0.1 <0.207.0> -------- db shards/80000000-9fffffff/account/39/6e/a348ae21457aa78854638ca364e8.1516301771 died with reason {{badmatch,{error,{{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,init,1,[{file,\"src/couch_db_updater.erl\"},{line,67}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}}},[{couch_db,start_link,3,[{file,\"src/couch_db.erl\"},{line,136}]},{couch_server,'-open_async/5-fun-0-',5,[{file,\"src/couch_server.erl\"},{line,310}]}]}\r\n[info] 2018-01-18T18:56:11.273522Z couchdb@127.0.0.1 <0.207.0> -------- db shards/a0000000-bfffffff/account/39/6e/a348ae21457aa78854638ca364e8.1516301771 died with reason {{badmatch,{error,{{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,init,1,[{file,\"src/couch_db_updater.erl\"},{line,67}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}}},[{couch_db,start_link,3,[{file,\"src/couch_db.erl\"},{line,136}]},{couch_server,'-open_async/5-fun-0-',5,[{file,\"src/couch_server.erl\"},{line,310}]}]}\r\n[info] 2018-01-18T18:56:11.273854Z couchdb@127.0.0.1 <0.207.0> -------- db shards/60000000-7fffffff/account/39/6e/a348ae21457aa78854638ca364e8.1516301771 died with reason {{badmatch,{error,{{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,init,1,[{file,\"src/couch_db_updater.erl\"},{line,67}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}}},[{couch_db,start_link,3,[{file,\"src/couch_db.erl\"},{line,136}]},{couch_server,'-open_async/5-fun-0-',5,[{file,\"src/couch_server.erl\"},{line,310}]}]}\r\n[info] 2018-01-18T18:56:11.532489Z couchdb@127.0.0.1 <0.207.0> -------- db shards/80000000-9fffffff/account/39/6e/a348ae21457aa78854638ca364e8.1516301771 died with reason {{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,init,1,[{file,\"src/couch_db_updater.erl\"},{line,67}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n[info] 2018-01-18T18:57:05.184325Z couchdb@127.0.0.1 <0.207.0> -------- db shards/80000000-9fffffff/account/42/f7/db16e5f11dc86e01cbaa653cf6e3.1516301823 died with reason {{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,handle_info,2,[{file,\"src/couch_db_updater.erl\"},{line,338}]},{gen_server,try_dispatch,4,[{file,\"gen_server.erl\"},{line,615}]},{gen_server,handle_msg,5,[{file,\"gen_server.erl\"},{line,681}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n[info] 2018-01-18T18:57:05.184600Z couchdb@127.0.0.1 <0.207.0> -------- db shards/e0000000-ffffffff/account/42/f7/db16e5f11dc86e01cbaa653cf6e3.1516301823 died with reason {{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,handle_info,2,[{file,\"src/couch_db_updater.erl\"},{line,338}]},{gen_server,try_dispatch,4,[{file,\"gen_server.erl\"},{line,615}]},{gen_server,handle_msg,5,[{file,\"gen_server.erl\"},{line,681}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n[info] 2018-01-18T18:57:05.184843Z couchdb@127.0.0.1 <0.207.0> -------- db shards/60000000-7fffffff/account/42/f7/db16e5f11dc86e01cbaa653cf6e3.1516301823 died with reason {{badmatch,{error,emfile}},[{couch_file,sync,1,[{file,\"src/couch_file.erl\"},{line,216}]},{couch_db_updater,sync_header,2,[{file,\"src/couch_db_updater.erl\"},{line,1008}]},{couch_db_updater,handle_info,2,[{file,\"src/couch_db_updater.erl\"},{line,338}]},{gen_server,try_dispatch,4,[{file,\"gen_server.erl\"},{line,615}]},{gen_server,handle_msg,5,[{file,\"gen_server.erl\"},{line,681}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n[info] 2018-01-18T19:01:13.389304Z couchdb@127.0.0.1 <0.207.0> -------- db shards/80000000-9fffffff/system_media.1516301568 died with reason {{badmatch,{error,emfile}},[{couch_file,init,1,[{file,\"src/couch_file.erl\"},{line,398}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n[info] 2018-01-18T19:01:13.390153Z couchdb@127.0.0.1 <0.207.0> -------- db shards/80000000-9fffffff/tasks.1516301582 died with reason {{badmatch,{error,emfile}},[{couch_file,init,1,[{file,\"src/couch_file.erl\"},{line,398}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n[info] 2018-01-18T19:01:13.391205Z couchdb@127.0.0.1 <0.207.0> -------- db shards/80000000-9fffffff/brand_provisioner.1516301513 died with reason {{badmatch,{error,emfile}},[{couch_file,init,1,[{file,\"src/couch_file.erl\"},{line,398}]},{gen_server,init_it,6,[{file,\"gen_server.erl\"},{line,328}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,240}]}]}\r\n```\r\nneighbors exited with reason\r\n```\r\n[root@node1.docker tmp]# grep error /var/log/couchdb/couchdb.log | grep \"neighbors exited with reason\" | head\r\n[error] 2018-01-18T18:56:11.273943Z couchdb@127.0.0.1 <0.1669.2> -------- CRASH REPORT Process  (<0.1669.2>) with 1 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:sync/1(line:216) <= couch_db_updater:sync_header/2(line:1008) <= couch_db_updater:init/1(line:67) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:init_it/6(line:352) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_db_updater,init,['Argument__1']}, ancestors: [<0.1655.2>], messages: [], links: [<0.1655.2>], dictionary: [{io_priority,{db_update,<<\"shards/80000000-9fffffff/account/39/6e/a348ae...\">>}},...], trap_exit: false, status: running, heap_size: 1598, stack_size: 27, reductions: 2610\r\n[error] 2018-01-18T18:56:11.274595Z couchdb@127.0.0.1 <0.1671.2> -------- CRASH REPORT Process  (<0.1671.2>) with 0 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:sync/1(line:216) <= couch_db_updater:sync_header/2(line:1008) <= couch_db_updater:init/1(line:67) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:init_it/6(line:352) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_db_updater,init,['Argument__1']}, ancestors: [<0.1659.2>], messages: [], links: [<0.1659.2>], dictionary: [{io_priority,{db_update,<<\"shards/60000000-7fffffff/account/39/6e/a348ae...\">>}},...], trap_exit: false, status: running, heap_size: 1598, stack_size: 27, reductions: 2610\r\n[error] 2018-01-18T18:56:11.532530Z couchdb@127.0.0.1 <0.1701.2> -------- CRASH REPORT Process  (<0.1701.2>) with 2 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:sync/1(line:216) <= couch_db_updater:sync_header/2(line:1008) <= couch_db_updater:init/1(line:67) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:init_it/6(line:352) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_db_updater,init,['Argument__1']}, ancestors: [<0.1697.2>], messages: [], links: [<0.1697.2>], dictionary: [{io_priority,{db_update,<<\"shards/80000000-9fffffff/account/39/6e/a348ae...\">>}},...], trap_exit: false, status: running, heap_size: 1598, stack_size: 27, reductions: 1278\r\n[error] 2018-01-18T18:57:00.102237Z couchdb@127.0.0.1 <0.4660.2> -------- CRASH REPORT Process  (<0.4660.2>) with 0 neighbors exited with reason: {error,accept_failed} at mochiweb_acceptor:init/4(line:55) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {mochiweb_acceptor,init,['Argument__1','Argument__2',...]}, ancestors: [chttpd,chttpd_sup,<0.328.0>], messages: [], links: [<0.336.0>], dictionary: [], trap_exit: false, status: running, heap_size: 376, stack_size: 27, reductions: 267\r\n[error] 2018-01-18T18:57:05.184346Z couchdb@127.0.0.1 <0.5458.2> -------- CRASH REPORT Process  (<0.5458.2>) with 0 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:sync/1(line:216) <= couch_db_updater:sync_header/2(line:1008) <= couch_db_updater:handle_info/2(line:338) <= gen_server:try_dispatch/4(line:615) <= gen_server:handle_msg/5(line:681) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:terminate/7(line:826) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_db_updater,init,['Argument__1']}, ancestors: [<0.5444.2>], messages: [{'DOWN',#Ref<0.0.5.32558>,process,<0.5446.2>,normal}], links: [<0.207.0>], dictionary: [{io_priority,{db_update,<<\"shards/80000000-9fffffff/account/42/f7/d...\">>}},...], trap_exit: false, status: running, heap_size: 4185, stack_size: 27, reductions: 6779\r\n[error] 2018-01-18T18:57:05.184669Z couchdb@127.0.0.1 <0.5455.2> -------- CRASH REPORT Process  (<0.5455.2>) with 0 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:sync/1(line:216) <= couch_db_updater:sync_header/2(line:1008) <= couch_db_updater:handle_info/2(line:338) <= gen_server:try_dispatch/4(line:615) <= gen_server:handle_msg/5(line:681) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:terminate/7(line:826) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_db_updater,init,['Argument__1']}, ancestors: [<0.5439.2>], messages: [{'DOWN',#Ref<0.0.4.60859>,process,<0.5440.2>,normal}], links: [<0.207.0>], dictionary: [{io_priority,{db_update,<<\"shards/e0000000-ffffffff/account/42/f7/d...\">>}},...], trap_exit: false, status: running, heap_size: 4185, stack_size: 27, reductions: 6544\r\n[error] 2018-01-18T18:57:05.184976Z couchdb@127.0.0.1 <0.5459.2> -------- CRASH REPORT Process  (<0.5459.2>) with 0 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:sync/1(line:216) <= couch_db_updater:sync_header/2(line:1008) <= couch_db_updater:handle_info/2(line:338) <= gen_server:try_dispatch/4(line:615) <= gen_server:handle_msg/5(line:681) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:terminate/7(line:826) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_db_updater,init,['Argument__1']}, ancestors: [<0.5447.2>], messages: [{'DOWN',#Ref<0.0.2.68255>,process,<0.5448.2>,normal}], links: [<0.207.0>], dictionary: [{io_priority,{db_update,<<\"shards/60000000-7fffffff/account/42/f7/d...\">>}},...], trap_exit: false, status: running, heap_size: 4185, stack_size: 27, reductions: 7479\r\n[error] 2018-01-18T19:01:03.968059Z couchdb@127.0.0.1 <0.27902.3> -------- CRASH REPORT Process  (<0.27902.3>) with 2 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:init/1(line:398) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:init_it/6(line:352) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_file,init,['Argument__1']}, ancestors: [<0.27901.3>,<0.27900.3>], messages: [], links: [#Port<0.20470>,<0.27901.3>], dictionary: [{read_timestamp,{1516,302063,967577}}], trap_exit: false, status: running, heap_size: 610, stack_size: 27, reductions: 768\r\n[error] 2018-01-18T19:01:03.981875Z couchdb@127.0.0.1 <0.214.0> -------- CRASH REPORT Process couch_index_server (<0.214.0>) with 1 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:init/1(line:398) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:terminate/7(line:826) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_index_server,init,['Argument__1']}, ancestors: [couch_secondary_services,couch_sup,<0.201.0>], messages: [], links: [<0.216.0>,<0.210.0>], dictionary: [], trap_exit: true, status: running, heap_size: 4185, stack_size: 27, reductions: 584992\r\n[error] 2018-01-18T19:01:05.849952Z couchdb@127.0.0.1 <0.32628.3> -------- CRASH REPORT Process  (<0.32628.3>) with 2 neighbors exited with reason: no match of right hand value {error,emfile} at couch_file:init/1(line:398) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:init_it/6(line:352) <= proc_lib:init_p_do_apply/3(line:240); initial_call: {couch_file,init,['Argument__1']}, ancestors: [<0.32627.3>,<0.32626.3>], messages: [], links: [#Port<0.21996>,<0.32627.3>], dictionary: [{read_timestamp,{1516,302065,849433}}], trap_exit: false, status: running, heap_size: 610, stack_size: 27, reductions: 768\r\n```\r\nmfa: fabric_rpc:all_docs\r\n```\r\n[root@node1.docker tmp]# grep error /var/log/couchdb/couchdb.log | grep \"mfa: fabric_rpc:all_docs\" | head\r\n[error] 2018-01-18T18:57:41.932949Z couchdb@127.0.0.1 <0.12764.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.933954Z couchdb@127.0.0.1 <0.12760.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.933996Z couchdb@127.0.0.1 <0.12765.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934089Z couchdb@127.0.0.1 <0.12762.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934061Z couchdb@127.0.0.1 <0.12763.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934294Z couchdb@127.0.0.1 <0.12766.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.934416Z couchdb@127.0.0.1 <0.12759.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:57:41.935568Z couchdb@127.0.0.1 <0.12761.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.12752.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]}]\r\n[error] 2018-01-18T18:58:25.372933Z couchdb@127.0.0.1 <0.23503.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23501.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-18T18:58:25.373010Z couchdb@127.0.0.1 <0.23509.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23501.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n```\r\ntoo many open files\r\n```\r\n[root@node1.docker tmp]# grep error /var/log/couchdb/couchdb.log | grep \"too many open files\" | head\r\n[error] 2018-01-18T19:01:17.795630Z couchdb@127.0.0.1 <0.18880.4> -------- Could not open file ./data/shards/a0000000-bfffffff/system_media.1516301568.couch: too many open files\r\n[error] 2018-01-18T19:01:17.817397Z couchdb@127.0.0.1 <0.18939.4> -------- Could not open file ./data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/69e3a57e087bac7b9667b7602970e56c.view: too many open files\r\n[error] 2018-01-18T19:01:17.817488Z couchdb@127.0.0.1 <0.18939.4> -------- Failed to open view file './data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/69e3a57e087bac7b9667b7602970e56c.view': too many open files\r\n[error] 2018-01-18T19:01:17.819229Z couchdb@127.0.0.1 <0.18945.4> -------- Could not open file ./data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/665c8a92ba7daaf86a989aee308fbbe5.view: too many open files\r\n[error] 2018-01-18T19:01:17.819320Z couchdb@127.0.0.1 <0.18945.4> -------- Failed to open view file './data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/665c8a92ba7daaf86a989aee308fbbe5.view': too many open files\r\n[error] 2018-01-18T19:01:17.820790Z couchdb@127.0.0.1 <0.18951.4> -------- Could not open file ./data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/3f703b0b07ced5a4c9804a63d7a15af9.view: too many open files\r\n[error] 2018-01-18T19:01:17.820882Z couchdb@127.0.0.1 <0.18951.4> -------- Failed to open view file './data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/3f703b0b07ced5a4c9804a63d7a15af9.view': too many open files\r\n[error] 2018-01-18T19:01:17.822353Z couchdb@127.0.0.1 <0.18957.4> -------- Could not open file ./data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/ae24bf2461ecaaa8d6368a29badc5eb1.view: too many open files\r\n[error] 2018-01-18T19:01:17.822429Z couchdb@127.0.0.1 <0.18957.4> -------- Failed to open view file './data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/ae24bf2461ecaaa8d6368a29badc5eb1.view': too many open files\r\n[error] 2018-01-18T19:01:17.823900Z couchdb@127.0.0.1 <0.18963.4> -------- Could not open file ./data/.shards/60000000-7fffffff/account/6e/25/3aeb9cd6754a47b0c921dc184ae5.1516301928_design/mrview/f836e93763ffb225e3b1079db74acbbe.view: too many open files\r\n```\r\nI will configure to allow daemon open 999999 files and make test again","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358870957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358880957","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-358880957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":358880957,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODg4MDk1Nw==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T06:45:04Z","updated_at":"2018-01-19T06:45:04Z","author_association":"NONE","body":"Increasing max_dbs_open to 2500 does not help. Tonight the same error happens two times.\r\nAny clue? Could I try something more? Is is possible to avoid those errores?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358880957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358922252","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358922252","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358922252,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODkyMjI1Mg==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T10:09:28Z","updated_at":"2018-01-19T10:09:28Z","author_association":"NONE","body":"I added string 'LimitNOFILE=999999' to `/usr/lib/systemd/system/couchdb.service`\r\nNow systemd unit file looks like:\r\n```\r\n[Unit]\r\nDescription=Apache CouchDB\r\nWants=network-online.target\r\nAfter=network-online.target\r\n\r\n[Service]\r\nLimitNOFILE=999999\r\nRuntimeDirectory=couchdb\r\nUser=couchdb\r\nGroup=couchdb\r\nExecStart=/opt/couchdb/bin/couchdb\r\nRestart=always\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\nAll errors is resolved except one\r\n```\r\n[root@node1.docker ~]# grep error /var/log/couchdb/couchdb.log | grep -v \"Request to create N=3 DB but only 1 node\" | head\r\n[error] 2018-01-19T06:03:27.362521Z couchdb@127.0.0.1 <0.16326.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:03:27.363595Z couchdb@127.0.0.1 <0.16318.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:03:27.363671Z couchdb@127.0.0.1 <0.16325.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:03:27.363895Z couchdb@127.0.0.1 <0.16324.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:03:27.363911Z couchdb@127.0.0.1 <0.16323.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:03:27.363992Z couchdb@127.0.0.1 <0.16319.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]}]\r\n[error] 2018-01-19T06:03:27.364032Z couchdb@127.0.0.1 <0.16320.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:03:27.364488Z couchdb@127.0.0.1 <0.16322.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.16317.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:04:05.524625Z couchdb@127.0.0.1 <0.26308.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.26296.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T06:04:05.524713Z couchdb@127.0.0.1 <0.26303.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.26296.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n``` \r\nAbout 11316 such errors when replicated 1500 databases (25Gb total size).\r\n```\r\n[root@node1.docker ~]# grep error /var/log/couchdb/couchdb.log | grep -v \"Request to create N=3 DB but only 1 node\" | wc -l\r\n11316\r\n```\r\nCould you add more logging about what is document is replicated from other server?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358922252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358927765","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358927765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358927765,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODkyNzc2NQ==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T10:32:04Z","updated_at":"2018-01-19T10:32:04Z","author_association":"NONE","body":"I enabled `debug` logs. Log for one database with error follows\r\n```\r\n[error] 2018-01-19T10:20:33.050143Z couchdb@127.0.0.1 <0.13106.3> 90be7ab7ff Request to create N=3 DB but only 1 node(s)\r\n[notice] 2018-01-19T10:20:33.352923Z couchdb@127.0.0.1 <0.13106.3> 90be7ab7ff 217.12.247.99:5984 217.12.247.99 undefined PUT /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/ 201 ok 305\r\n[notice] 2018-01-19T10:20:33.355705Z couchdb@127.0.0.1 <0.13106.3> 57ba46b662 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/ 200 ok 2\r\n[notice] 2018-01-19T10:20:33.361529Z couchdb@127.0.0.1 <0.13106.3> 065fc7460e 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/ 200 ok 2\r\n[notice] 2018-01-19T10:20:33.618505Z couchdb@127.0.0.1 <0.13106.3> edf1a78b7d 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_local/5b44abf4a8cd8c74e0dae4c180c323df 404 ok 1\r\n[notice] 2018-01-19T10:20:33.620543Z couchdb@127.0.0.1 <0.13106.3> 49d4b34503 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_local/de43dfe7e561450208e7a38e73707c3c 404 ok 1\r\n[notice] 2018-01-19T10:20:33.622778Z couchdb@127.0.0.1 <0.13106.3> c8e128ce33 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_local/39ded5f138a77eb000f9403a741b3dd1 404 ok 1\r\n[notice] 2018-01-19T10:20:33.624903Z couchdb@127.0.0.1 <0.13106.3> 8b5ae30bb6 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_local/bdfed711151ad361f55cf094fb27bded 404 ok 1\r\n[notice] 2018-01-19T10:20:33.632078Z couchdb@127.0.0.1 <0.13108.3> b6acd943ec 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_revs_diff 200 ok 1\r\n[notice] 2018-01-19T10:20:33.632547Z couchdb@127.0.0.1 <0.13109.3> 60c1d3c53a 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_revs_diff 200 ok 1\r\n[notice] 2018-01-19T10:20:33.632585Z couchdb@127.0.0.1 <0.13110.3> 5e2d7f23c1 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_revs_diff 200 ok 1\r\n[notice] 2018-01-19T10:20:33.651400Z couchdb@127.0.0.1 <0.13057.3> -------- Starting replication 5b44abf4a8cd8c74e0dae4c180c323df+create_target (http://217.12.247.210:5984/account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/ -> http://217.12.247.99:5984/account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/) from _replicate endpoint worker_procesess:4 worker_batch_size:500 session_id:a939d07237a0b1517be4477caebdbaa3\r\n[notice] 2018-01-19T10:20:33.670336Z couchdb@127.0.0.1 <0.13106.3> eb10cda3e2 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_revs_diff 200 ok 40\r\n[notice] 2018-01-19T10:20:33.686133Z couchdb@127.0.0.1 <0.13109.3> 18c598dfa9 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_bulk_docs 201 ok 49\r\n[notice] 2018-01-19T10:20:33.702962Z couchdb@127.0.0.1 <0.13108.3> d8b6f1fe6c 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_bulk_docs 201 ok 44\r\n[notice] 2018-01-19T10:20:33.707057Z couchdb@127.0.0.1 <0.13110.3> 3eb0fdb75d 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_bulk_docs 201 ok 47\r\n[notice] 2018-01-19T10:20:33.729765Z couchdb@127.0.0.1 <0.13109.3> e64350d9dd 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_revs_diff 200 ok 42\r\n[notice] 2018-01-19T10:20:33.759715Z couchdb@127.0.0.1 <0.13106.3> 98af90e7e4 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_bulk_docs 201 ok 46\r\n[notice] 2018-01-19T10:20:33.955858Z couchdb@127.0.0.1 <0.13109.3> 8e0d9e28d9 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_bulk_docs 201 ok 106\r\n[notice] 2018-01-19T10:20:33.957526Z couchdb@127.0.0.1 <0.13109.3> 2ba1a50443 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_ensure_full_commit 201 ok 1\r\n[notice] 2018-01-19T10:20:33.957854Z couchdb@127.0.0.1 <0.13057.3> -------- recording a checkpoint for `http://217.12.247.210:5984/account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/` -> `http://217.12.247.99:5984/account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/` at source update_seq [67,<<\"g1AAAACreJzLYWBgYM5gTmGQT8pMT84vTc5wyMtPSTXSS8lPzk4t0itKLs5LLdErKs0BKmRKZEgKDQ0NyUoUIloLSENoHgvDylWrVmUlyhCtD6gFqGMVkPoPBFmJolkABcY5ew\">>]\r\n[notice] 2018-01-19T10:20:34.083245Z couchdb@127.0.0.1 <0.13109.3> 7726e23a50 217.12.247.99:5984 217.12.247.99 undefined PUT /account%2f73%2fc2%2f51b213d0f6c919aa2159079eb55d/_local/5b44abf4a8cd8c74e0dae4c180c323df 201 ok 41\r\n[notice] 2018-01-19T10:20:34.084075Z couchdb@127.0.0.1 <0.396.0> -------- couch_replicator_scheduler: Job {\"5b44abf4a8cd8c74e0dae4c180c323df\",\"+create_target\"} completed normally\r\n[notice] 2018-01-19T10:20:34.084514Z couchdb@127.0.0.1 <0.12894.3> 2876ab6c9a 217.12.247.99:5984 217.12.247.99 undefined POST /_replicate 200 ok 5233\r\n[notice] 2018-01-19T10:20:34.151996Z couchdb@127.0.0.1 <0.396.0> -------- couch_replicator_scheduler: Job {\"cb9ca1f8d9afafcc4c96917b3e547561\",\"+create_target\"} started as <0.13869.3>\r\n[error] 2018-01-19T10:20:34.354523Z couchdb@127.0.0.1 <0.23314.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T10:20:34.354598Z couchdb@127.0.0.1 <0.23309.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T10:20:34.354637Z couchdb@127.0.0.1 <0.23326.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T10:20:34.355452Z couchdb@127.0.0.1 <0.23323.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T10:20:34.355480Z couchdb@127.0.0.1 <0.23318.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T10:20:34.355520Z couchdb@127.0.0.1 <0.23319.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T10:20:34.355634Z couchdb@127.0.0.1 <0.23325.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T10:20:34.355927Z couchdb@127.0.0.1 <0.23311.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.23308.0>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T10:20:37.859158Z couchdb@127.0.0.1 <0.13109.3> ec41f07f3d Request to create N=3 DB but only 1 node(s)\r\n```\r\nI will add 30 sec delay between starting next database replication.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358927765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358942936","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-358942936","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":358942936,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODk0MjkzNg==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T11:41:11Z","updated_at":"2018-01-19T11:41:11Z","author_association":"NONE","body":"This log when exist 30 sec delay between database replication\r\n```\r\n[notice] 2018-01-19T11:22:37.879643Z couchdb@127.0.0.1 <0.398.0> -------- couch_replicator_scheduler: Job {\"f8021a32ba235a68302e165b8594fc3f\",\"+create_target\"} started as <0.14235.1>\r\n[error] 2018-01-19T11:22:41.277632Z couchdb@127.0.0.1 <0.12984.1> 3cb83ef90b Request to create N=3 DB but only 1 node(s)\r\n[notice] 2018-01-19T11:22:41.671914Z couchdb@127.0.0.1 <0.12984.1> 3cb83ef90b 217.12.247.99:5984 217.12.247.99 undefined PUT /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/ 201 ok 395\r\n[notice] 2018-01-19T11:22:41.674402Z couchdb@127.0.0.1 <0.12984.1> 31fe3520ef 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/ 200 ok 2\r\n[notice] 2018-01-19T11:22:41.678557Z couchdb@127.0.0.1 <0.12984.1> fa64a0f610 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/ 200 ok 1\r\n[notice] 2018-01-19T11:22:41.847889Z couchdb@127.0.0.1 <0.12984.1> 93855d1e2a 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_local/f8021a32ba235a68302e165b8594fc3f 404 ok 1\r\n[notice] 2018-01-19T11:22:41.849746Z couchdb@127.0.0.1 <0.12984.1> 23948381f8 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_local/322f6d0122cdfe6f2bc50a7a1d517cb4 404 ok 1\r\n[notice] 2018-01-19T11:22:41.851548Z couchdb@127.0.0.1 <0.12984.1> 733f302e03 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_local/fb2de1a5c13bb1b964f91e00608e9548 404 ok 1\r\n[notice] 2018-01-19T11:22:41.853539Z couchdb@127.0.0.1 <0.12984.1> 700eb93122 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_local/30124e4fbfcc51a01ee063fdd33c472e 404 ok 1\r\n[notice] 2018-01-19T11:22:41.856901Z couchdb@127.0.0.1 <0.14235.1> -------- Starting replication f8021a32ba235a68302e165b8594fc3f+create_target (http://217.12.247.210:5984/account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/ -> http://217.12.247.99:5984/account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/) from _replicate endpoint worker_procesess:4 worker_batch_size:500 session_id:89fc5fc8dabfbb2c6e65851a59286bb4\r\n[notice] 2018-01-19T11:22:41.898276Z couchdb@127.0.0.1 <0.12984.1> febe2351dc 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_revs_diff 200 ok 40\r\n[notice] 2018-01-19T11:22:41.898332Z couchdb@127.0.0.1 <0.12974.1> 63c0b3ba2a 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_revs_diff 200 ok 39\r\n[notice] 2018-01-19T11:22:41.898361Z couchdb@127.0.0.1 <0.12982.1> f930be65d3 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_revs_diff 200 ok 40\r\n[notice] 2018-01-19T11:22:41.898478Z couchdb@127.0.0.1 <0.12983.1> 9b9f9c80da 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_revs_diff 200 ok 40\r\n[notice] 2018-01-19T11:22:41.946928Z couchdb@127.0.0.1 <0.12984.1> 7620d7df1b 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_bulk_docs 201 ok 44\r\n[notice] 2018-01-19T11:22:41.947011Z couchdb@127.0.0.1 <0.12983.1> e05ecc5c19 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_bulk_docs 201 ok 43\r\n[notice] 2018-01-19T11:22:41.948407Z couchdb@127.0.0.1 <0.12982.1> 340faf367a 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_bulk_docs 201 ok 45\r\n[notice] 2018-01-19T11:22:41.953472Z couchdb@127.0.0.1 <0.12974.1> 07ad9e1124 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_bulk_docs 201 ok 49\r\n[notice] 2018-01-19T11:22:41.990657Z couchdb@127.0.0.1 <0.12984.1> 1c618702f8 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_revs_diff 200 ok 42\r\n[notice] 2018-01-19T11:22:42.215544Z couchdb@127.0.0.1 <0.12984.1> b572660a41 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_bulk_docs 201 ok 100\r\n[notice] 2018-01-19T11:22:42.217546Z couchdb@127.0.0.1 <0.12984.1> 48806332e3 217.12.247.99:5984 217.12.247.99 undefined POST /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_ensure_full_commit 201 ok 1\r\n[notice] 2018-01-19T11:22:42.217908Z couchdb@127.0.0.1 <0.14235.1> -------- recording a checkpoint for `http://217.12.247.210:5984/account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/` -> `http://217.12.247.99:5984/account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/` at source update_seq [74,<<\"g1AAAACreJzLYWBgYM5gTmGQT8pMT84vTc5wyMtPSTXSS8lPzk4t0itKLs5LLdErKs0BKmRKZEgKDQ0NyUqUIFoLSENoHgvDylWrVmUlyhOtD6gFqGMVkPoPBFmJwlkACS45gg\">>]\r\n[notice] 2018-01-19T11:22:42.342623Z couchdb@127.0.0.1 <0.12984.1> 5eba670cad 217.12.247.99:5984 217.12.247.99 undefined PUT /account%2f0d%2fbb%2ffb1874be1b7360713c26588e9b82/_local/f8021a32ba235a68302e165b8594fc3f 201 ok 41\r\n[notice] 2018-01-19T11:22:42.343058Z couchdb@127.0.0.1 <0.398.0> -------- couch_replicator_scheduler: Job {\"f8021a32ba235a68302e165b8594fc3f\",\"+create_target\"} completed normally\r\n[notice] 2018-01-19T11:22:42.343341Z couchdb@127.0.0.1 <0.14217.1> 9354efdd10 217.12.247.99:5984 217.12.247.99 undefined POST /_replicate 200 ok 4466\r\n[error] 2018-01-19T11:23:09.315208Z couchdb@127.0.0.1 <0.2741.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T11:23:09.315224Z couchdb@127.0.0.1 <0.2742.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T11:23:09.315259Z couchdb@127.0.0.1 <0.2740.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T11:23:09.316323Z couchdb@127.0.0.1 <0.2745.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T11:23:09.316374Z couchdb@127.0.0.1 <0.2746.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T11:23:09.316501Z couchdb@127.0.0.1 <0.2744.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,finish_fold,2,[{file,\"src/couch_mrview.erl\"},{line,642}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-01-19T11:23:09.316625Z couchdb@127.0.0.1 <0.2738.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[error] 2018-01-19T11:23:09.317073Z couchdb@127.0.0.1 <0.2739.1> -------- rexi_server: from: couchdb@127.0.0.1(<0.2737.1>) mfa: fabric_rpc:all_docs/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,view_cb,2,[{file,\"src/fabric_rpc.erl\"},{line,308}]},{couch_mrview,map_fold,3,[{file,\"src/couch_mrview.erl\"},{line,511}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,enum_docs,5,[{file,\"src/couch_db.erl\"},{line,1450}]},{couch_mrview,all_docs_fold,4,[{file,\"src/couch_mrview.erl\"},{line,425}]}]\r\n[notice] 2018-01-19T11:23:12.394370Z couchdb@127.0.0.1 <0.398.0> -------- couch_replicator_scheduler: Job {\"9bcd18316a671dbd7367c932e7083abc\",\"+create_target\"} started as <0.15559.1>\r\n[error] 2018-01-19T11:23:12.465643Z couchdb@127.0.0.1 <0.12984.1> 9101974cf8 Request to create N=3 DB but only 1 node(s)\r\n[notice] 2018-01-19T11:23:12.786568Z couchdb@127.0.0.1 <0.12984.1> 9101974cf8 217.12.247.99:5984 217.12.247.99 undefined PUT /account%2f0d%2fc1%2fc97c58fd658391cc05fdc219b0d7/ 201 ok 322\r\n[notice] 2018-01-19T11:23:12.788976Z couchdb@127.0.0.1 <0.12984.1> 598275b62f 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fc1%2fc97c58fd658391cc05fdc219b0d7/ 200 ok 2\r\n[notice] 2018-01-19T11:23:12.793112Z couchdb@127.0.0.1 <0.12984.1> 546fa3d0da 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fc1%2fc97c58fd658391cc05fdc219b0d7/ 200 ok 1\r\n[notice] 2018-01-19T11:23:12.963100Z couchdb@127.0.0.1 <0.12984.1> 0aabd63bd6 217.12.247.99:5984 217.12.247.99 undefined GET /account%2f0d%2fc1%2fc97c58fd658391cc05fdc219b0d7/_local/9bcd18316a671dbd7367c932e7083abc 404 ok 1\r\n```\r\nPlease look at message timestamp. From `2018-01-19T11:22:37.879643Z` to `2018-01-19T11:23:09.317073Z` one replication.\r\nAfter `2018-01-19T11:23:12.394370Z` next\r\n\r\nReplication is finished at `2018-01-19T11:22:42.343058Z` then executed `sleep 30` command. At this sleep time couchdb is idle. and we got error messages.\r\nAt `2018-01-19T11:23:12.394370Z` sleep command is finished adn started next replication. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358942936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358950756","html_url":"https://github.com/apache/couchdb/pull/1082#issuecomment-358950756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1082","id":358950756,"node_id":"MDEyOklzc3VlQ29tbWVudDM1ODk1MDc1Ng==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T12:18:03Z","updated_at":"2018-01-19T12:18:03Z","author_association":"CONTRIBUTOR","body":"@iilyak thanks a lot for your review. I addressed your comments in couchdb. Could you please review again? Thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/358950756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359057911","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359057911","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359057911,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA1NzkxMQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T18:58:34Z","updated_at":"2018-01-19T18:58:34Z","author_association":"MEMBER","body":"You might try writing the doc creation with `?w=3` to see if that fixes things. I'd wager you're probably getting a race against the first write if you happen to snag a node that didn't get the write yet on the second request. If that seems to fix it we can take a look at attachment writing to see if we can make it robust if it tries to write to a node that would generate a conflict.\r\n\r\nOh, and alternatively a more straightforward test would be to create a doc, then write an attachment to it with an random revision. I'd think that might fail in roughly the same way.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359057911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359060231","html_url":"https://github.com/apache/couchdb/issues/796#issuecomment-359060231","issue_url":"https://api.github.com/repos/apache/couchdb/issues/796","id":359060231,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA2MDIzMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T19:07:53Z","updated_at":"2018-01-19T19:07:53Z","author_association":"MEMBER","body":"@FelipeTaiarol **Please respond** if this issue is still a problem with `max_dbs_open` increased to 15k and using `q=2`.\r\n\r\nIf and when CouchDB ends up in an unresponsive state, please check the output of `localhost:5986/_system` and look at the message queue sizes. Is the `couch_server` message queue high?\r\n\r\nWhat those fabric timeout errors mean: Couch is trying to open a shard quickly to grab the security properties, and that's why the timeout is set to 100ms. If the request fails, it tries a different shard on a different node, and doubles the timeout. It will keep trying, doubling the timeout each time, until it runs out of shards, at which point you will get the `No DB shards could be opened` error.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359060231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359060816","html_url":"https://github.com/apache/couchdb/issues/796#issuecomment-359060816","issue_url":"https://api.github.com/repos/apache/couchdb/issues/796","id":359060816,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA2MDgxNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T19:10:13Z","updated_at":"2018-01-19T19:10:13Z","author_association":"MEMBER","body":"@FelipeTaiarol and any future Google search people, another option to set is the update_lru_on_read option. This significantly decreases the message volume that couch_server has to deal with.\r\n\r\nJust add this to your config (more specifically, just add that option to the `[couchdb]` section):\r\n\r\n```\r\n[couchdb]\r\nupdate_lru_on_read = false\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359060816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359074916","html_url":"https://github.com/apache/couchdb/issues/796#issuecomment-359074916","issue_url":"https://api.github.com/repos/apache/couchdb/issues/796","id":359074916,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA3NDkxNg==","user":{"login":"FelipeTaiarol","id":859559,"node_id":"MDQ6VXNlcjg1OTU1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/859559?v=4","gravatar_id":"","url":"https://api.github.com/users/FelipeTaiarol","html_url":"https://github.com/FelipeTaiarol","followers_url":"https://api.github.com/users/FelipeTaiarol/followers","following_url":"https://api.github.com/users/FelipeTaiarol/following{/other_user}","gists_url":"https://api.github.com/users/FelipeTaiarol/gists{/gist_id}","starred_url":"https://api.github.com/users/FelipeTaiarol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FelipeTaiarol/subscriptions","organizations_url":"https://api.github.com/users/FelipeTaiarol/orgs","repos_url":"https://api.github.com/users/FelipeTaiarol/repos","events_url":"https://api.github.com/users/FelipeTaiarol/events{/privacy}","received_events_url":"https://api.github.com/users/FelipeTaiarol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T20:05:24Z","updated_at":"2018-01-19T20:05:24Z","author_association":"NONE","body":"We stopped listening to all databases' _changes feed and switched to listen only to /_db_updates, at the same time we increased the max_dbs_open to 15k and the set [cluster] q=2, not sure which one of the two solved the issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359074916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359077826","html_url":"https://github.com/apache/couchdb/issues/796#issuecomment-359077826","issue_url":"https://api.github.com/repos/apache/couchdb/issues/796","id":359077826,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA3NzgyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T20:17:57Z","updated_at":"2018-01-19T20:17:57Z","author_association":"MEMBER","body":"@FelipeTaiarol OK, thanks. FYI for /_db_updates be aware of this recently reported issue: https://github.com/apache/couchdb/issues/1063","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359077826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359082667","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-359082667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":359082667,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA4MjY2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T20:39:25Z","updated_at":"2018-01-19T20:39:25Z","author_association":"MEMBER","body":"When you are seeing this problem, please do a `GET /_node/_local/_system` and look at the message queue sizes. Do you see any that have a high number, such as `couch_server`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359082667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359085699","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-359085699","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":359085699,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA4NTY5OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T20:52:12Z","updated_at":"2018-01-19T20:52:12Z","author_association":"MEMBER","body":"Some of these errors are expected - couch is noisy in logging.\r\n\r\nAre you actually experiencing problems with replication or is this a request for our logging to be less noisy?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359085699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359087494","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-359087494","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":359087494,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA4NzQ5NA==","user":{"login":"geordanr","id":334985,"node_id":"MDQ6VXNlcjMzNDk4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/334985?v=4","gravatar_id":"","url":"https://api.github.com/users/geordanr","html_url":"https://github.com/geordanr","followers_url":"https://api.github.com/users/geordanr/followers","following_url":"https://api.github.com/users/geordanr/following{/other_user}","gists_url":"https://api.github.com/users/geordanr/gists{/gist_id}","starred_url":"https://api.github.com/users/geordanr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geordanr/subscriptions","organizations_url":"https://api.github.com/users/geordanr/orgs","repos_url":"https://api.github.com/users/geordanr/repos","events_url":"https://api.github.com/users/geordanr/events{/privacy}","received_events_url":"https://api.github.com/users/geordanr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T20:59:56Z","updated_at":"2018-01-19T20:59:56Z","author_association":"NONE","body":"We increased max open files for CouchDB processes to 1048576; `max_dbs_open` is 500.\r\n\r\nWe lowered to `q=4`, but we can try lowering it further to 1.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359087494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359089695","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-359089695","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":359089695,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA4OTY5NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T21:09:41Z","updated_at":"2018-01-19T21:09:41Z","author_association":"MEMBER","body":"FYI the intermittent network problems are not a prerequisite for this problem to surface.\r\n\r\nHowever, I think we are going in the right direction thinking this is related to incorrect attachment length calculation and/or incomplete network transfers.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359089695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359090162","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-359090162","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":359090162,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA5MDE2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T21:11:52Z","updated_at":"2018-01-19T21:11:52Z","author_association":"MEMBER","body":"Remember that `max_dbs_open` is actually # of shards open, so you have to consider `# of dbs * # of shards`.\r\n\r\nIf you expect to be running with a lot of databases, you may also want to set this in your local.ini:\r\n\r\n```\r\n[couchdb]\r\nupdate_lru_on_read = false\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359090162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359092280","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-359092280","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":359092280,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA5MjI4MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T21:21:09Z","updated_at":"2018-01-19T21:21:09Z","author_association":"MEMBER","body":"One other thing - there was a previous attempt at changing some of this behaviour that never landed that references some old JIRA tickets:\r\n\r\nhttps://github.com/apache/couchdb/pull/138","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359092280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359092909","html_url":"https://github.com/apache/couchdb/issues/1101#issuecomment-359092909","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1101","id":359092909,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTA5MjkwOQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T21:23:37Z","updated_at":"2018-01-19T21:23:37Z","author_association":"MEMBER","body":"Going over this on IRC I'm pretty sure the root cause of this bug is here:\r\n\r\nhttps://github.com/apache/couchdb/blob/master/src/mango/src/mango_cursor_view.erl#L285-L287\r\n\r\nUsing a partial filter index and removing the _conflicts check results in the correct results. Theoretically specifying r=2 in the options would also fix it but Fauxton apparently has issues encoding that and is passing [50] (i.e., ASCII \"2\") which is then ignored by Mango.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359092909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359107953","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-359107953","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":359107953,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTEwNzk1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T22:31:25Z","updated_at":"2018-01-19T22:31:25Z","author_association":"MEMBER","body":"@ReeceStevens I'm unable to run your test case on my test environment (2GB RAM) - Python throws a MemoryError on line 28.\r\n\r\nCan you provide a script that generates entropy without the use of numpy? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359107953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359109976","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-359109976","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":359109976,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTEwOTk3Ng==","user":{"login":"ReeceStevens","id":5847947,"node_id":"MDQ6VXNlcjU4NDc5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5847947?v=4","gravatar_id":"","url":"https://api.github.com/users/ReeceStevens","html_url":"https://github.com/ReeceStevens","followers_url":"https://api.github.com/users/ReeceStevens/followers","following_url":"https://api.github.com/users/ReeceStevens/following{/other_user}","gists_url":"https://api.github.com/users/ReeceStevens/gists{/gist_id}","starred_url":"https://api.github.com/users/ReeceStevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReeceStevens/subscriptions","organizations_url":"https://api.github.com/users/ReeceStevens/orgs","repos_url":"https://api.github.com/users/ReeceStevens/repos","events_url":"https://api.github.com/users/ReeceStevens/events{/privacy}","received_events_url":"https://api.github.com/users/ReeceStevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-19T22:41:22Z","updated_at":"2018-01-19T22:41:22Z","author_association":"NONE","body":"@wohali I have modified the script to remove the numpy dependency-- let me know if that works for you. I will be following up on your previous comments soon, thanks for your patience.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359109976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359149324","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-359149324","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":359149324,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTE0OTMyNA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T06:21:48Z","updated_at":"2018-01-20T06:30:29Z","author_association":"NONE","body":"@wohali Hello Joan\r\n`rexi_server` messages have severity level `error` and I expects that replication is completed with errors.\r\nHow i can check integrity of couchdb  server?\r\nMay be set severity level for `rexi_server` messages to `notice`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359149324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359152858","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359152858","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359152858,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTE1Mjg1OA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T07:35:33Z","updated_at":"2018-01-20T07:35:33Z","author_association":"NONE","body":"It seems the problem is solved. Definitely increasing file descriptors has solved the problem (tonight there were no errors). \r\n\r\nFirst time I increased file descriptors I did it wrongly.\r\n\r\nThanks!!!\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359152858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359152971","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-359152971","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":359152971,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTE1Mjk3MQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T07:37:34Z","updated_at":"2018-01-20T07:37:34Z","author_association":"NONE","body":"Any clue about \"unable to calculate free space for `/run/user/0`: `enoent`\"","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359152971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359165277","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359165277","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359165277,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTE2NTI3Nw==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T11:40:29Z","updated_at":"2018-01-20T11:40:29Z","author_association":"NONE","body":"Sorry but errors appears again. 65000 file descriptors is enough of I have to increase it?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359165277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359201671","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359201671","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359201671,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwMTY3MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T20:58:39Z","updated_at":"2018-01-20T20:58:39Z","author_association":"MEMBER","body":"It depends on the # of databases and # of shards you are creating (`q` value). This is increased by the number of design documents you have. As an example:\r\n\r\n* 1 database\r\n* q=16\r\n* 10 different ddocs or Mango indexes\r\n\r\n(1 + 10) * 16 = 176 file handles required to open this database and use those views.\r\n\r\nPlus a couple more for things like couch logging and so on.\r\n\r\nIt is usually quite safe to set the limit of file descriptors quite high on modern servers.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359201671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359201869","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-359201869","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":359201869,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwMTg2OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T21:01:52Z","updated_at":"2018-01-20T21:01:52Z","author_association":"MEMBER","body":"Sure sounds like you ran out of memory.\r\n\r\nThe `/run` file system is virtualised as a temporary filesystem, meaning it runs out of a ramdisk. On my system, that's potentially about 800MB of RAM:\r\n\r\n```\r\n$ df -h /run\r\nFilesystem      Size  Used Avail Use% Mounted on\r\ntmpfs           801M  2.2M  799M   1% /run\r\n```\r\n\r\nFor the load you're placing on your cluster, it sounds like your machines need more RAM. You could add swap in a pinch, but ideally I'd start by doubling the RAM on the machine. Also, it is best if your CouchDB nodes are not running any other processes (except for basic monitoring and system maintenance). For instance, move your web server and application servers to different machines.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359201869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359201955","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359201955","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359201955,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwMTk1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T21:03:15Z","updated_at":"2018-01-20T21:03:15Z","author_association":"MEMBER","body":"I'm closing this provisionally for now - looks like the problem is lack of file handles (for people who search through tickets in the future)\r\n\r\nPlease reopen if necessary.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359201955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359202170","html_url":"https://github.com/apache/couchdb/issues/1073#issuecomment-359202170","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1073","id":359202170,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwMjE3MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T21:07:00Z","updated_at":"2018-01-20T21:07:00Z","author_association":"MEMBER","body":"No, it's a valid error, but it doesn't mean that replication completed with errors. It's one that CouchDB recovers from on its own. It is possible something else is wrong with your setup, of course, but that doesn't mean replication failed on its own.\r\n\r\nYou can determine if the replication completed successfully via the standard API, not our logfile. I encourage use of the `/_replicator` database.\r\n\r\nMore information is available here: http://docs.couchdb.org/en/latest/replication/replicator.html#replication-states\r\n\r\nI'm closing this for now. If you can show that you are actually having failed replication, or 500 errors via the HTTP API, not just errors in the logfile, then please reopen.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359202170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359203811","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359203811","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359203811,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwMzgxMQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T21:32:39Z","updated_at":"2018-01-20T21:32:39Z","author_association":"NONE","body":"Dear davisp , I have test with w=3 and everything works well. Take in account that we are experimenting this issue sporadically: 1 request for every 10.000, so it is very difficult to reproduce.\r\nEvery day we have 3 or 4 issues like this.\r\n\r\nAlso I have test with random revision and I get 409=Conflict response but in server is not generated any error or warning.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359203811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359204424","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359204424","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359204424,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwNDQyNA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T21:42:37Z","updated_at":"2018-01-20T21:42:37Z","author_association":"NONE","body":"Dear wohali, we only have 3 database (with q=16) with no ddocs or Mango indexes. We use it by now for storing email attachments. \r\n\r\n(1 + 10) * 16 * 3 = 528\r\n\r\nMax open files could reach until 65000.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359204424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359204488","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-359204488","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":359204488,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwNDQ4OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T21:43:46Z","updated_at":"2018-01-20T21:43:46Z","author_association":"MEMBER","body":"OK, reopening. @davisp Sounds like your race on attachment write is the issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359204488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359206670","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-359206670","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":359206670,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwNjY3MA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T22:21:33Z","updated_at":"2018-01-20T22:21:33Z","author_association":"NONE","body":"Each node has 40 GIGAS of RAM:\r\n```\r\n free -h\r\n              total        used        free      shared  buff/cache   available\r\nMem:            40G        244M        112K        1,3M         39G         36G\r\n```\r\n\r\n```\r\ndf -h\r\nS.ficheros        Tamao Usados  Disp Uso% Montado en\r\n/dev/ploop23569p1   9,9T   276G  9,2T   3% /\r\nnone                 31G      0   31G   0% /sys/fs/cgroup\r\nnone                 31G      0   31G   0% /dev\r\ntmpfs                20G      0   20G   0% /dev/shm\r\ntmpfs                20G   144K   20G   1% /run\r\ntmpfs               4,0G      0  4,0G   0% /run/user/0\r\n```\r\n\r\n\r\nAnd we are using only 3 databases.\r\n\r\nI was not expecting that CouchDB requires so much memory.\r\n\r\nThanks,\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359206670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359208238","html_url":"https://github.com/apache/couchdb/issues/1106#issuecomment-359208238","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1106","id":359208238,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIwODIzOA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-20T22:48:53Z","updated_at":"2018-01-20T22:48:53Z","author_association":"NONE","body":"How can I check if everything is OK with the shard (shards/50000000-5fffffff/_users.1510390507)?\r\nError is reported only when we restart couchdb\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359208238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359222786","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-359222786","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":359222786,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTIyMjc4Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-21T04:19:40Z","updated_at":"2018-01-21T04:19:40Z","author_association":"MEMBER","body":"Can you share your `local.ini` or any changes to CouchDB config please? thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359222786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359275448","html_url":"https://github.com/apache/couchdb/issues/1097#issuecomment-359275448","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1097","id":359275448,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTI3NTQ0OA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-21T19:53:27Z","updated_at":"2018-01-21T19:54:52Z","author_association":"NONE","body":"Some logs with debug activated:\r\n\r\n```\r\n\r\n[debug] 2018-01-21T19:48:26.334147Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for view group `_auth` (database `shards/50000000-5fffffff/_users.1510390507`) is 0%, estimated space for compaction is 51 bytes.\r\n[debug] 2018-01-21T19:48:26.335236Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/50000000-5fffffff/_replicator.1510390507` is 0%, estimated space for compaction is 4248 bytes.\r\n[debug] 2018-01-21T19:48:26.336555Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/50000000-5fffffff/grabaciones.1510391138` is 9%, estimated space for compaction is 45813786228 bytes.\r\n[debug] 2018-01-21T19:48:26.336936Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/50000000-5fffffff/_global_changes.1510390507` is 0%, estimated space for compaction is 4248 bytes.\r\n[debug] 2018-01-21T19:48:26.338248Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/50000000-5fffffff/pruebas.1510391087` is 48%, estimated space for compaction is 1973958 bytes.\r\n[debug] 2018-01-21T19:48:26.338866Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/30000000-3fffffff/_users.1510390507` is 0%, estimated space for compaction is 4248 bytes.\r\n[debug] 2018-01-21T19:48:26.339851Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/30000000-3fffffff/_replicator.1510390507` is 0%, estimated space for compaction is 4248 bytes.\r\n[debug] 2018-01-21T19:48:26.341106Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/30000000-3fffffff/grabaciones.1510391138` is 8%, estimated space for compaction is 45798847378 bytes.\r\n[debug] 2018-01-21T19:48:26.341834Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/30000000-3fffffff/_global_changes.1510390507` is 87%, estimated space for compaction is 91708 bytes.\r\n[warning] 2018-01-21T19:48:26.342346Z couchdb@X.X.X.X <0.241.0> -------- Compaction daemon - unable to calculate free space for `/run/user/0`: `enoent`\r\n[info] 2018-01-21T19:48:26.342923Z couchdb@X.X.X.X <0.32222.0> -------- Starting compaction for db \"shards/30000000-3fffffff/_global_changes.1510390507\"\r\n[debug] 2018-01-21T19:48:26.343025Z couchdb@X.X.X.X <0.8153.1> -------- Compaction process spawned for db \"shards/30000000-3fffffff/_global_changes.1510390507\"\r\n[debug] 2018-01-21T19:48:26.351314Z couchdb@X.X.X.X <0.210.0> -------- New task status for <0.8153.1>: [{changes_done,2},{database,<<\"shards/30000000-3fffffff/_global_changes.1510390507\">>},{progress,100},{started_on,1516564106},{total_changes,2},{type,database_compaction},{updated_on,1516564106}]\r\n[notice] 2018-01-21T19:48:26.364450Z couchdb@X.X.X.X <0.32222.0> -------- Compaction swap for db: ./data/shards/30000000-3fffffff/_global_changes.1510390507.couch 356558 53448\r\n[info] 2018-01-21T19:48:26.365003Z couchdb@X.X.X.X <0.32222.0> -------- Compaction for db \"shards/30000000-3fffffff/_global_changes.1510390507\" completed.\r\n[debug] 2018-01-21T19:48:26.366648Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/30000000-3fffffff/pruebas.1510391087` is 27%, estimated space for compaction is 1806452 bytes.\r\n[debug] 2018-01-21T19:48:26.367095Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/10000000-1fffffff/_users.1510390507` is 0%, estimated space for compaction is 4248 bytes.\r\n[debug] 2018-01-21T19:48:26.368076Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/10000000-1fffffff/_replicator.1510390507` is 0%, estimated space for compaction is 4248 bytes.\r\n[debug] 2018-01-21T19:48:26.369259Z couchdb@X.X.X.X <0.241.0> -------- Fragmentation for database `shards/10000000-1fffffff/grabaciones.1510391138` is 9%, estimated space for compaction is 44659295380 bytes.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359275448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359363295","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-359363295","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":359363295,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTM2MzI5NQ==","user":{"login":"lornajane","id":172607,"node_id":"MDQ6VXNlcjE3MjYwNw==","avatar_url":"https://avatars.githubusercontent.com/u/172607?v=4","gravatar_id":"","url":"https://api.github.com/users/lornajane","html_url":"https://github.com/lornajane","followers_url":"https://api.github.com/users/lornajane/followers","following_url":"https://api.github.com/users/lornajane/following{/other_user}","gists_url":"https://api.github.com/users/lornajane/gists{/gist_id}","starred_url":"https://api.github.com/users/lornajane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lornajane/subscriptions","organizations_url":"https://api.github.com/users/lornajane/orgs","repos_url":"https://api.github.com/users/lornajane/repos","events_url":"https://api.github.com/users/lornajane/events{/privacy}","received_events_url":"https://api.github.com/users/lornajane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-22T09:08:41Z","updated_at":"2018-01-22T09:08:41Z","author_association":"NONE","body":"This package fixes the problem for me.  With `nspr` uninstalled, the build from the main website doesn't verify and can't create views.  This build can do both of those and seems to be working well.  Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359363295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359462344","html_url":"https://github.com/apache/couchdb/issues/1119#issuecomment-359462344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1119","id":359462344,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTQ2MjM0NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-22T15:41:12Z","updated_at":"2018-01-22T15:41:12Z","author_association":"MEMBER","body":"Paging @kocolosk once again this feels like a problem with a Docker image. CouchDB in the default image should be flushing to disk after every operation; is it possible that Docker doesn't allow that and this is a virtualisation error?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359462344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359496713","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-359496713","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":359496713,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTQ5NjcxMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-22T17:14:37Z","updated_at":"2018-01-22T17:14:37Z","author_association":"MEMBER","body":"@nickva @davisp The client has stated that the \"similar issue\" (with the `couch_doc,'-doc_from_multi_part_stream/4-fun-1-',1,` function) only started after an upgrade from `2.0.0rc3` to `2.1.1`. \r\n\r\nHopefully that narrows the git bisect a bit further?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359496713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359508819","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-359508819","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":359508819,"node_id":"MDEyOklzc3VlQ29tbWVudDM1OTUwODgxOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-01-22T17:54:46Z","updated_at":"2018-01-22T17:54:46Z","author_association":"CONTRIBUTOR","body":"@wohali thanks, it does help!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/359508819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]