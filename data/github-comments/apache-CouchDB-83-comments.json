[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581629784","html_url":"https://github.com/apache/couchdb/pull/2515#issuecomment-581629784","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2515","id":581629784,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTYyOTc4NA==","user":{"login":"Antonio-Maranhao","id":30349380,"node_id":"MDQ6VXNlcjMwMzQ5Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/30349380?v=4","gravatar_id":"","url":"https://api.github.com/users/Antonio-Maranhao","html_url":"https://github.com/Antonio-Maranhao","followers_url":"https://api.github.com/users/Antonio-Maranhao/followers","following_url":"https://api.github.com/users/Antonio-Maranhao/following{/other_user}","gists_url":"https://api.github.com/users/Antonio-Maranhao/gists{/gist_id}","starred_url":"https://api.github.com/users/Antonio-Maranhao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Antonio-Maranhao/subscriptions","organizations_url":"https://api.github.com/users/Antonio-Maranhao/orgs","repos_url":"https://api.github.com/users/Antonio-Maranhao/repos","events_url":"https://api.github.com/users/Antonio-Maranhao/events{/privacy}","received_events_url":"https://api.github.com/users/Antonio-Maranhao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-03T21:35:30Z","updated_at":"2020-02-03T21:35:30Z","author_association":"NONE","body":"I updated the Fauxton `v1.2.3` tag, so you're good to go.\r\nAlso added Fauxton changes to the 3.0.0 release notes in https://github.com/apache/couchdb-documentation/pull/494","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581629784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581834674","html_url":"https://github.com/apache/couchdb/issues/2369#issuecomment-581834674","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2369","id":581834674,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTgzNDY3NA==","user":{"login":"m90","id":1662740,"node_id":"MDQ6VXNlcjE2NjI3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/1662740?v=4","gravatar_id":"","url":"https://api.github.com/users/m90","html_url":"https://github.com/m90","followers_url":"https://api.github.com/users/m90/followers","following_url":"https://api.github.com/users/m90/following{/other_user}","gists_url":"https://api.github.com/users/m90/gists{/gist_id}","starred_url":"https://api.github.com/users/m90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m90/subscriptions","organizations_url":"https://api.github.com/users/m90/orgs","repos_url":"https://api.github.com/users/m90/repos","events_url":"https://api.github.com/users/m90/events{/privacy}","received_events_url":"https://api.github.com/users/m90/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T10:09:13Z","updated_at":"2020-02-04T10:09:13Z","author_association":"NONE","body":"Ok, we finally found out where this was coming from (although it still doesn't make too much sense): the Cluster that was causing the issues was (for reasons unknown to me) running behind a __Cloudflare Proxy__ which does some interesting and unexpected things to headers and such. Turning the proxy back off again made the log spam go away, just like I can reenable it by turning the proxy back on.\r\n\r\nThis still does not explain why it's a single database only, but it must be something in the combination of the two.\r\n\r\n---\r\n\r\nThere is no `validate_doc_update` on the database.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581834674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581970414","html_url":"https://github.com/apache/couchdb/issues/2369#issuecomment-581970414","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2369","id":581970414,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTk3MDQxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T15:41:52Z","updated_at":"2020-02-04T15:41:52Z","author_association":"MEMBER","body":"Would you be willing to share the name of the database? My guess is Cloudflare has some sort of rule that's kicking in due to the nature of the data it thinks is in place.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581970414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581987997","html_url":"https://github.com/apache/couchdb/issues/2517#issuecomment-581987997","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2517","id":581987997,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTk4Nzk5Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T16:16:10Z","updated_at":"2020-02-04T16:16:10Z","author_association":"MEMBER","body":"I just had a PR to fix this today:\r\n\r\nhttps://github.com/davisp/jiffy/pull/185\r\n\r\nThought it appears that there's issues with the Erlang versions on travis breaking Travis so will have to check into that first.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/581987997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582086220","html_url":"https://github.com/apache/couchdb/pull/2519#issuecomment-582086220","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2519","id":582086220,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjA4NjIyMA==","user":{"login":"ksnavely","id":1530988,"node_id":"MDQ6VXNlcjE1MzA5ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1530988?v=4","gravatar_id":"","url":"https://api.github.com/users/ksnavely","html_url":"https://github.com/ksnavely","followers_url":"https://api.github.com/users/ksnavely/followers","following_url":"https://api.github.com/users/ksnavely/following{/other_user}","gists_url":"https://api.github.com/users/ksnavely/gists{/gist_id}","starred_url":"https://api.github.com/users/ksnavely/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksnavely/subscriptions","organizations_url":"https://api.github.com/users/ksnavely/orgs","repos_url":"https://api.github.com/users/ksnavely/repos","events_url":"https://api.github.com/users/ksnavely/events{/privacy}","received_events_url":"https://api.github.com/users/ksnavely/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T19:54:04Z","updated_at":"2020-02-04T19:54:04Z","author_association":"CONTRIBUTOR","body":"Thanks for this fix Ilya","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582086220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582336887","html_url":"https://github.com/apache/couchdb/issues/2369#issuecomment-582336887","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2369","id":582336887,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjMzNjg4Nw==","user":{"login":"m90","id":1662740,"node_id":"MDQ6VXNlcjE2NjI3NDA=","avatar_url":"https://avatars.githubusercontent.com/u/1662740?v=4","gravatar_id":"","url":"https://api.github.com/users/m90","html_url":"https://github.com/m90","followers_url":"https://api.github.com/users/m90/followers","following_url":"https://api.github.com/users/m90/following{/other_user}","gists_url":"https://api.github.com/users/m90/gists{/gist_id}","starred_url":"https://api.github.com/users/m90/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/m90/subscriptions","organizations_url":"https://api.github.com/users/m90/orgs","repos_url":"https://api.github.com/users/m90/repos","events_url":"https://api.github.com/users/m90/events{/privacy}","received_events_url":"https://api.github.com/users/m90/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T10:17:11Z","updated_at":"2020-02-05T10:17:11Z","author_association":"NONE","body":"The database name sounds relatively unsuspicious (to me), it's `van-shipments`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582336887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582370876","html_url":"https://github.com/apache/couchdb/pull/2521#issuecomment-582370876","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2521","id":582370876,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjM3MDg3Ng==","user":{"login":"vmatyus","id":26717393,"node_id":"MDQ6VXNlcjI2NzE3Mzkz","avatar_url":"https://avatars.githubusercontent.com/u/26717393?v=4","gravatar_id":"","url":"https://api.github.com/users/vmatyus","html_url":"https://github.com/vmatyus","followers_url":"https://api.github.com/users/vmatyus/followers","following_url":"https://api.github.com/users/vmatyus/following{/other_user}","gists_url":"https://api.github.com/users/vmatyus/gists{/gist_id}","starred_url":"https://api.github.com/users/vmatyus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmatyus/subscriptions","organizations_url":"https://api.github.com/users/vmatyus/orgs","repos_url":"https://api.github.com/users/vmatyus/repos","events_url":"https://api.github.com/users/vmatyus/events{/privacy}","received_events_url":"https://api.github.com/users/vmatyus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T11:46:50Z","updated_at":"2020-02-05T11:46:50Z","author_association":"NONE","body":"This is indeed the problem. With parameter `highlight_pos_tag` the functionality can be used.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582370876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582442839","html_url":"https://github.com/apache/couchdb/pull/2522#issuecomment-582442839","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2522","id":582442839,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjQ0MjgzOQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T14:48:50Z","updated_at":"2020-02-05T14:48:50Z","author_association":"MEMBER","body":"This doesn't strike me as a proper fix. I don't know what admin creds are doing in fdb connection  string in a first place, but you are altering behaviour of server module's `init` to addresscan auxiliary tool's problem. I'll defer decision to @davisp who has more solid idea of what's going on here, but to me this looks rather backwards.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582442839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582454253","html_url":"https://github.com/apache/couchdb/pull/2522#issuecomment-582454253","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2522","id":582454253,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjQ1NDI1Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T15:12:33Z","updated_at":"2020-02-05T15:12:33Z","author_association":"CONTRIBUTOR","body":"You are right. The connection string is `description:ID@IP:PORT`\r\n* The `description` is a logical description of the database using alphanumeric characters (a-z, A-Z, 0-9) and underscores.\r\n* The `ID` is an arbitrary value containing alphanumeric characters (a-z, A-Z, 0-9). We recommend using a random eight-character identifier (such as the output of mktemp -u XXXXXXXX). Note that the ID will change when coordinators change\r\n\r\nSo it should be fine. I got confused because my content string is:\r\n```\r\ncat /usr/local/etc/foundationdb/fdb.cluster\r\nadm:pass@127.0.0.1:4689\r\n```\r\nTherefore when I saw `db.instance` value equal to `adm:pass@127.0.0.1:4689` I friked out. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582454253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582468563","html_url":"https://github.com/apache/couchdb/pull/2522#issuecomment-582468563","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2522","id":582468563,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjQ2ODU2Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T15:41:04Z","updated_at":"2020-02-05T15:41:04Z","author_association":"MEMBER","body":"I think that's from me originally thinking it was a user/pass pair based on the docs not realizing the password looking thing was just a token. Might be useful to change it to something like \"test-cluster:token\".","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582468563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582884018","html_url":"https://github.com/apache/couchdb/pull/2498#issuecomment-582884018","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2498","id":582884018,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mjg4NDAxOA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-06T12:29:22Z","updated_at":"2020-02-06T12:29:22Z","author_association":"CONTRIBUTOR","body":"This is a draft PR so I am assuming it is not yet complete. Are you planing to remove `couch_auth_cache` module itself (or just from supervision tree of a couch application)? \r\n\r\nThe reason I ask is because it is mentioned few times in chttpd application.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582884018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582981885","html_url":"https://github.com/apache/couchdb/issues/2517#issuecomment-582981885","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2517","id":582981885,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mjk4MTg4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-06T16:15:12Z","updated_at":"2020-02-06T16:15:12Z","author_association":"MEMBER","body":"Intended to be fixed by #2523 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/582981885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583004366","html_url":"https://github.com/apache/couchdb/issues/2308#issuecomment-583004366","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2308","id":583004366,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzAwNDM2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-06T16:59:21Z","updated_at":"2020-02-06T16:59:21Z","author_association":"MEMBER","body":"Hi @DennisSchuenemann ,\r\n\r\nOpen an Administrator prompt, `cd` into the `CouchDB\\bin` directory, and run the `couchdb.cmd` file. What do you see?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583004366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583014258","html_url":"https://github.com/apache/couchdb/pull/2526#issuecomment-583014258","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2526","id":583014258,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzAxNDI1OA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-06T17:21:26Z","updated_at":"2020-02-06T17:21:26Z","author_association":"CONTRIBUTOR","body":"there is a similar draft PR here https://github.com/apache/couchdb/pull/2498","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583014258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583101574","html_url":"https://github.com/apache/couchdb/pull/2526#issuecomment-583101574","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2526","id":583101574,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzEwMTU3NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-06T20:43:52Z","updated_at":"2020-02-06T20:43:52Z","author_association":"CONTRIBUTOR","body":"@iilyak after some discussion couchdb-dev IRC channel @davisp suggested this approach as it wouldn't reduce test coverage ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583101574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583178992","html_url":"https://github.com/apache/couchdb/pull/2525#issuecomment-583178992","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2525","id":583178992,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzE3ODk5Mg==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-07T00:34:01Z","updated_at":"2020-02-07T00:34:01Z","author_association":"CONTRIBUTOR","body":"@wohali thanks for the reminder, but as an old FORTRAN hax0r, I will always be an 80 column guy ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583178992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583264368","html_url":"https://github.com/apache/couchdb/issues/2308#issuecomment-583264368","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2308","id":583264368,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzI2NDM2OA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-07T07:13:28Z","updated_at":"2020-02-07T07:13:28Z","author_association":"NONE","body":"Hello @wohali,\r\n\r\nI get the following output:\r\n\r\n`kernel-poll not supported; \"K\" parameter ignored\r\n{\"Kernel pid terminated\",application_controller,\"{application_start_failure,couch,{{shutdown,{failed_to_start_child,couch_secondary_services,{shutdown,{failed_to_start_child,httpd,eacces}}}},{couch_app,start,[normal,[]]}}}\"}\r\nKernel pid terminated (application_controller) ({application_start_failure,couch,{{shutdown,{failed_to_start_child,couch_secondary_services,{shutdown,{failed_to_start_child,httpd,eacces}}}},{couch_app`\r\n\r\nI attached you the erl_crash.dump file, that was created. (as zip, .dump is not supported by github)\r\n\r\nWe use Windows Server 2019 (1809)\r\n\r\n[erl_crash.zip](https://github.com/apache/couchdb/files/4169422/erl_crash.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583264368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583552233","html_url":"https://github.com/apache/couchdb/issues/2308#issuecomment-583552233","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2308","id":583552233,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzU1MjIzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-07T18:51:33Z","updated_at":"2020-02-07T18:51:33Z","author_association":"MEMBER","body":"`eacces` in that error message means that the folder structure is not owned by the right user. Kindly check the permissions on the folder structure and ensure that CouchDB can both read and write all of the files in the `etc` and `data` subdirectories. Most likely, some aggressive administrator policy set on your machine kicked in and denied access to the files.\r\n\r\nThat should resolve this issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583552233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583569987","html_url":"https://github.com/apache/couchdb/issues/2517#issuecomment-583569987","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2517","id":583569987,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzU2OTk4Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-07T19:37:30Z","updated_at":"2020-02-07T19:38:17Z","author_association":"MEMBER","body":"Closed by #2527 \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583569987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583585306","html_url":"https://github.com/apache/couchdb/issues/2435#issuecomment-583585306","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2435","id":583585306,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzU4NTMwNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-07T19:54:46Z","updated_at":"2020-02-07T19:54:46Z","author_association":"MEMBER","body":"This is done!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583585306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583592608","html_url":"https://github.com/apache/couchdb/issues/2528#issuecomment-583592608","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2528","id":583592608,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzU5MjYwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-07T20:15:39Z","updated_at":"2020-02-07T20:15:39Z","author_association":"MEMBER","body":"First one is addressed by https://github.com/apache/couchdb/pull/2531\r\n\r\nSecond one is a refcount error: cpse_incref_decref in couch-bt_engine","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583592608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583699055","html_url":"https://github.com/apache/couchdb/issues/2528#issuecomment-583699055","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2528","id":583699055,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzY5OTA1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-08T03:44:51Z","updated_at":"2020-02-08T03:44:51Z","author_association":"MEMBER","body":"Moving this out of 3.0.0 now that it passes (at least sometimes.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583699055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583709816","html_url":"https://github.com/apache/couchdb/issues/1418#issuecomment-583709816","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1418","id":583709816,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MzcwOTgxNg==","user":{"login":"komorebi-san","id":8327827,"node_id":"MDQ6VXNlcjgzMjc4Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/8327827?v=4","gravatar_id":"","url":"https://api.github.com/users/komorebi-san","html_url":"https://github.com/komorebi-san","followers_url":"https://api.github.com/users/komorebi-san/followers","following_url":"https://api.github.com/users/komorebi-san/following{/other_user}","gists_url":"https://api.github.com/users/komorebi-san/gists{/gist_id}","starred_url":"https://api.github.com/users/komorebi-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/komorebi-san/subscriptions","organizations_url":"https://api.github.com/users/komorebi-san/orgs","repos_url":"https://api.github.com/users/komorebi-san/repos","events_url":"https://api.github.com/users/komorebi-san/events{/privacy}","received_events_url":"https://api.github.com/users/komorebi-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-08T06:53:13Z","updated_at":"2020-02-08T06:53:13Z","author_association":"NONE","body":"I have got the same issue as well for the database. \r\n\r\nCurrently, i dont allow to delete but only remarked as \"deleted\". Haha","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583709816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583948212","html_url":"https://github.com/apache/couchdb/pull/2535#issuecomment-583948212","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2535","id":583948212,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mzk0ODIxMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-10T04:17:01Z","updated_at":"2020-02-10T04:17:01Z","author_association":"MEMBER","body":"@jiangphcn you're going to want https://github.com/apache/couchdb/pull/2534/files#diff-0c65e7bb4bafbb8cf147cc0001ccd436 too, at least L202-207 if not the rest.\r\n\r\nbut if `prototype/fdb-layer` is going to hit `master` soon, now that `3.x` has forked, is this necessray?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583948212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583978544","html_url":"https://github.com/apache/couchdb/pull/2535#issuecomment-583978544","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2535","id":583978544,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Mzk3ODU0NA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-10T06:42:11Z","updated_at":"2020-02-10T06:42:11Z","author_association":"CONTRIBUTOR","body":"@wohali thanks for your tips. I added L202-207 for now.  This PR arises when working with @garrensmith on one issue in his Mac environment. We got segment fault on Catalina with spidermonkey 1.8.5 (might be related to 32 bit compatibility issue)and work fine after switching to 60. Knowing that this doesn't happen in every development environment, but it is helpful to add spidermonkey 60 support in fdb-layer branch to continue. \r\n\r\nThanks for forking `3.x`, and thus we can have `prototype/fdb-layer` to hit `master` soon. In `master` branch, knowing that there is spidermonkey 60 support already. However, still need to merge codes from fdb-layer branch to master branch. If my understanding is correct, this looks like that two small branch rivers (fdb-layer branch and master branch) converge into one big river, and we need to make big river to work fine. The commits on these 2 branches need to be reviewed and some commit in master might need to be replaced/rewritten by commits in fdb-layer branch. I am quite open to have this PR to merge or not. For now, it can leave chance to have spidermonkey 60 support to work with fdb-layer ealier.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/583978544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584017826","html_url":"https://github.com/apache/couchdb/issues/2430#issuecomment-584017826","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2430","id":584017826,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDAxNzgyNg==","user":{"login":"fne","id":6025622,"node_id":"MDQ6VXNlcjYwMjU2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6025622?v=4","gravatar_id":"","url":"https://api.github.com/users/fne","html_url":"https://github.com/fne","followers_url":"https://api.github.com/users/fne/followers","following_url":"https://api.github.com/users/fne/following{/other_user}","gists_url":"https://api.github.com/users/fne/gists{/gist_id}","starred_url":"https://api.github.com/users/fne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fne/subscriptions","organizations_url":"https://api.github.com/users/fne/orgs","repos_url":"https://api.github.com/users/fne/repos","events_url":"https://api.github.com/users/fne/events{/privacy}","received_events_url":"https://api.github.com/users/fne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-10T08:53:50Z","updated_at":"2020-02-10T08:53:50Z","author_association":"NONE","body":"I also have this error and couchdb restart every day : \r\n`stderr,\"[notice] 2020-02-10T05:38:21.730591Z couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local u003c0.356.0u003e -------- couch_replicator_clustering : cluster unstable \",\"2020-02-10T05:38:21.819Z\",\"aks-nodepool1-33780697-2\",,,54f99bab651526d6b30c03971db90dc9f445713a34320a6592213271cc655077\r\nstderr,\"[notice] 2020-02-10T05:38:21.803308Z couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local u003c0.277.0u003e -------- rexi_buffer : cluster unstable \",\"2020-02-10T05:38:21.819Z\",\"aks-nodepool1-33780697-2\",,,54f99bab651526d6b30c03971db90dc9f445713a34320a6592213271cc655077\r\nstderr,\"[notice] 2020-02-10T05:38:21.814623Z couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local u003c0.274.0u003e -------- rexi_server_mon : cluster unstable \",\"2020-02-10T05:38:21.819Z\",\"aks-nodepool1-33780697-2\",,,54f99bab651526d6b30c03971db90dc9f445713a34320a6592213271cc655077\r\nstderr,\"[notice] 2020-02-10T05:38:21.803005Z couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local u003c0.278.0u003e -------- rexi_server_mon : cluster unstable \",\"2020-02-10T05:38:21.819Z\",\"aks-nodepool1-33780697-2\",,,54f99bab651526d6b30c03971db90dc9f445713a34320a6592213271cc655077\r\nstderr,\"[notice] 2020-02-10T05:38:21.815623Z couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local u003c0.273.0u003e -------- rexi_server : cluster unstable \",\"2020-02-10T05:38:21.819Z\",\"aks-nodepool1-33780697-2\",,,54f99bab651526d6b30c03971db90dc9f445713a34320a6592213271cc655077\r\nstderr,\"[notice] 2020-02-10T05:38:21.811468Z couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local u003c0.428.0u003e -------- Stopping replicator db changes listener u003c0.7246.0u003e \",\"2020-02-10T05:38:21.819Z\",\"aks-nodepool1-33780697-2\",,,54f99bab651526d6b30c03971db90dc9f445713a34320a6592213271cc655077\r\n`\r\n\r\nIs it a bad config ?? We had a cluster of 3 nodes with 4gigas dedicated to each couchdb node","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584017826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584196840","html_url":"https://github.com/apache/couchdb/issues/2430#issuecomment-584196840","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2430","id":584196840,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDE5Njg0MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-10T16:04:13Z","updated_at":"2020-02-10T16:04:13Z","author_association":"CONTRIBUTOR","body":"Those message might indicate that the connections between nodes get interrupted.\r\n\r\nMake sure you have a stable and relatively low latency connection between your cluster nodes.\r\n\r\nFor additional debugging could check out these ares:\r\n\r\n1) Does `http $DB/_membership` return the expected set of nodes under all nodes and cluster nodes fields:\r\n\r\nAn example on my machine:\r\n\r\n```\r\n$ http $DB/_membership\r\n\r\n{\r\n    \"all_nodes\": [\r\n        \"node1@127.0.0.1\",\r\n        \"node2@127.0.0.1\",\r\n        \"node3@127.0.0.1\"\r\n    ],\r\n    \"cluster_nodes\": [\r\n        \"node1@127.0.0.1\",\r\n        \"node2@127.0.0.1\",\r\n        \"node3@127.0.0.1\"\r\n    ]\r\n}\r\n```\r\n\r\n2) Then if it does inspect _stats/rexi and _stats/fabric on some of the nodes:\r\n\r\n```\r\nhttp $DB/_node/_local/_stats/fabric\r\n\r\n{\r\n    \"doc_update\": {\r\n        \"errors\": {\r\n            \"desc\": \"number of document update errors\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        },\r\n        \"mismatched_errors\": {\r\n            \"desc\": \"number of document update errors with multiple error types\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        },\r\n        \"write_quorum_errors\": {\r\n            \"desc\": \"number of write quorum errors\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        }\r\n    },\r\n    \"open_shard\": {\r\n        \"timeouts\": {\r\n            \"desc\": \"number of open shard timeouts\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        }\r\n    },\r\n    \"read_repairs\": {\r\n        \"failure\": {\r\n            \"desc\": \"number of failed read repair operations\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        },\r\n        \"success\": {\r\n            \"desc\": \"number of successful read repair operations\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        }\r\n    },\r\n    \"worker\": {\r\n        \"timeouts\": {\r\n            \"desc\": \"number of worker timeouts\",\r\n            \"type\": \"counter\",\r\n            \"value\": 0\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\nhttp $DB/_node/_local/_stats/rexi\r\n\r\n{\r\n    \"buffered\": {\r\n        \"desc\": \"number of rexi messages buffered\",\r\n        \"type\": \"counter\",\r\n        \"value\": 0\r\n    },\r\n    \"down\": {\r\n        \"desc\": \"number of rexi_DOWN messages handled\",\r\n        \"type\": \"counter\",\r\n        \"value\": 0\r\n    },\r\n    \"dropped\": {\r\n        \"desc\": \"number of rexi messages dropped from buffers\",\r\n        \"type\": \"counter\",\r\n        \"value\": 0\r\n    },\r\n    \"streams\": {\r\n        \"timeout\": {\r\n            \"init_stream\": {\r\n                \"desc\": \"number of rexi stream initialization timeouts\",\r\n                \"type\": \"counter\",\r\n                \"value\": 0\r\n            },\r\n            \"stream\": {\r\n                \"desc\": \"number of rexi stream timeouts\",\r\n                \"type\": \"counter\",\r\n                \"value\": 0\r\n            },\r\n            \"wait_for_ack\": {\r\n                \"desc\": \"number of rexi stream timeouts while waiting for acks\",\r\n                \"type\": \"counter\",\r\n                \"value\": 0\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n3) If you have remsh installed (in later releases it is part of the release in bin/ folder) you can run it see if connect you to the Erlang VM on one of the nodes and run `mem3:compare_nodelists()`\r\n\r\n```\r\n$ remsh\r\nErlang/OTP 21 [erts-10.3.5.3] [source] [64-bit] [smp:12:12] [ds:12:12:10] [async-threads:1] [hipe]\r\n\r\nEshell V10.3.5.3  (abort with ^G)\r\n(node1@127.0.0.1)1> mem3:compare_nodelists().\r\n[{non_member_nodes,[]},\r\n {bad_nodes,[]},\r\n {{cluster_nodes,['node1@127.0.0.1','node2@127.0.0.1',\r\n                  'node3@127.0.0.1']},\r\n  ['node1@127.0.0.1','node2@127.0.0.1','node3@127.0.0.1']}]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584196840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584209608","html_url":"https://github.com/apache/couchdb/issues/2490#issuecomment-584209608","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2490","id":584209608,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDIwOTYwOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-10T16:30:38Z","updated_at":"2020-02-10T16:30:38Z","author_association":"CONTRIBUTOR","body":"Hi @valpa sorry for delayed response.\r\n\r\nIn CouchDB the revs are generated based on parent revisions. That helps for example when the same document is created and edited in the same way on two different servers and then those dbs get replicated together, because revisions are deterministic based on content and parent revision, no conflicts should be generated. If revisions are completely random the would be conflicts.\r\n\r\nHere is the place where it happens: \r\n\r\nhttps://github.com/apache/couchdb/blob/master/src/couch/src/couch_db.erl#L1125-L1140\r\n\r\nHaving a random uuid generated there would result in a proliferation of document conflicts.\r\n\r\nIt might also be easier to just add a timestamp to your document and simply inspect that timestamp value later.\r\n\r\nHave, having said that, now you also know of a good place to experiment :-). So give it a try and see what would happen if you replace it a uuid1 generated value there.\r\n\r\nBut I think I'll close the issue, as I don't think there is much of a chance to change the CouchDB behavior there. If you think it deserves a proper discussion for others to chime in, start a mailing list discussion.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584209608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584399909","html_url":"https://github.com/apache/couchdb/issues/2528#issuecomment-584399909","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2528","id":584399909,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDM5OTkwOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-10T22:59:18Z","updated_at":"2020-02-10T22:59:18Z","author_association":"MEMBER","body":"This is pretty common on FreeBSD now:\r\n\r\nhttps://jenkins-cm1.apache.org/blue/organizations/jenkins/jenkins-cm1%2FFullPlatformMatrix/detail/3.0.x/5/pipeline\r\n\r\nhttps://jenkins-cm1.apache.org/blue/organizations/jenkins/jenkins-cm1%2FFullPlatformMatrix/detail/3.0.x/4/pipeline","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584399909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584726695","html_url":"https://github.com/apache/couchdb/pull/2539#issuecomment-584726695","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2539","id":584726695,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDcyNjY5NQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T16:37:38Z","updated_at":"2020-02-11T16:37:38Z","author_association":"MEMBER","body":"@davisp : Hi Paul, I'm almost done with this, the only thing I'm still wrestling is a limiter on a depth of flattening JSON. Can you please take a look at `fabric2_fdb` part if I'm missing something or off the mark on how it suppose to be done? Thank you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584726695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584781401","html_url":"https://github.com/apache/couchdb/issues/1271#issuecomment-584781401","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1271","id":584781401,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDc4MTQwMQ==","user":{"login":"tabeth","id":5572859,"node_id":"MDQ6VXNlcjU1NzI4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/5572859?v=4","gravatar_id":"","url":"https://api.github.com/users/tabeth","html_url":"https://github.com/tabeth","followers_url":"https://api.github.com/users/tabeth/followers","following_url":"https://api.github.com/users/tabeth/following{/other_user}","gists_url":"https://api.github.com/users/tabeth/gists{/gist_id}","starred_url":"https://api.github.com/users/tabeth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tabeth/subscriptions","organizations_url":"https://api.github.com/users/tabeth/orgs","repos_url":"https://api.github.com/users/tabeth/repos","events_url":"https://api.github.com/users/tabeth/events{/privacy}","received_events_url":"https://api.github.com/users/tabeth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T18:26:35Z","updated_at":"2020-02-11T18:26:35Z","author_association":"NONE","body":"Hi @wohali.\r\n\r\nI was looking at this issue, and the [referenced file](https://github.com/apache/couchdb/blob/master/src/couch/priv/stats_descriptions.cfg). It seems like there are units referenced in the description:\r\n\r\n\r\n```erlang\r\n{[couchdb, auth_cache_hits], [\r\n    {type, counter},\r\n    {desc, <<\"number of authentication cache hits\">>}\r\n]}.\r\n```\r\nOr were you thinking something like\r\n```erlang\r\n{[couchdb, auth_cache_hits], [\r\n    {type, counter},\r\n    {unit, Integer},\r\n    {desc, <<\"number of authentication cache hits\">>}\r\n]}.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584781401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584794999","html_url":"https://github.com/apache/couchdb/issues/1303#issuecomment-584794999","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1303","id":584794999,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDc5NDk5OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T18:56:06Z","updated_at":"2020-02-11T18:56:06Z","author_association":"MEMBER","body":"I spent a bit of time today looking at this and considering http://erlang.org/doc/man/erlsrv.html  as an alternative.\r\n\r\nThe problem is that `erlsrv.exe` doesn't provide the full flexibility we expect for the startup process here: https://github.com/apache/couchdb/blob/master/rel/files/couchdb.cmd.in\r\n\r\nSpecifically, users can modify that file (or write their own) to change environment variables for the JS/CoffeeScript query servers and the Fauxton docroot, plus of course change the config file search path/chain.\r\n\r\nAlso, `erlsrv.exe` always installs and runs a service as Administrator, which is higher privilege than we require - arguably, too high. The manual page says the user can be changed later via the Service control panel, but that's too late for us.\r\n\r\nHere's a better option: https://github.com/oze4/New-PSService","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584794999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584796044","html_url":"https://github.com/apache/couchdb/issues/1303#issuecomment-584796044","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1303","id":584796044,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDc5NjA0NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T18:58:18Z","updated_at":"2020-02-11T18:58:18Z","author_association":"MEMBER","body":"Unfortunately that last link depends on https://github.com/DSorlov/Sorlov.PowerShell which is GPL v3. :(","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584796044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584801079","html_url":"https://github.com/apache/couchdb/issues/1303#issuecomment-584801079","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1303","id":584801079,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDgwMTA3OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T19:09:56Z","updated_at":"2020-02-11T19:09:56Z","author_association":"MEMBER","body":"An alternative: https://github.com/kohsuke/winsw This requires the .NET Framework as a dependency, though, which would balloon our installer. It also doesn't natively support overriding of parameters.\r\n\r\nI think writing a custom C# wrapper like https://docs.microsoft.com/en-us/archive/msdn-magazine/2016/may/windows-powershell-writing-windows-services-in-powershell would be best. Full example code is here: https://github.com/JFLarvoire/SysToolsLib/blob/master/PowerShell/PSService.ps1\r\n\r\nApache License v2","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584801079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584813023","html_url":"https://github.com/apache/couchdb/issues/1271#issuecomment-584813023","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1271","id":584813023,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDgxMzAyMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T19:36:50Z","updated_at":"2020-02-11T19:36:50Z","author_association":"MEMBER","body":"Hey @tabeth , thanks for looking at this.\r\n\r\nThere's a lot of files:\r\n\r\n```\r\n./src/couch/priv/stats_descriptions.cfg\r\n./src/dreyfus/priv/stats_descriptions.cfg\r\n./src/couch_log/priv/stats_descriptions.cfg\r\n./src/mem3/priv/stats_descriptions.cfg\r\n./src/couch_replicator/priv/stats_descriptions.cfg\r\n./src/ddoc_cache/priv/stats_descriptions.cfg\r\n./src/chttpd/priv/stats_descriptions.cfg\r\n./src/rexi/priv/stats_descriptions.cfg\r\n./src/couch_mrview/priv/stats_descriptions.cfg\r\n./src/global_changes/priv/stats_descriptions.cfg\r\n./src/fabric/priv/stats_descriptions.cfg\r\n```\r\n\r\nIt's a concern primarily for anything that isn't a counter - for instance, looking at the histograms for length of time, are those in milliseconds? microseconds? \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584813023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584814649","html_url":"https://github.com/apache/couchdb/issues/1271#issuecomment-584814649","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1271","id":584814649,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDgxNDY0OQ==","user":{"login":"tabeth","id":5572859,"node_id":"MDQ6VXNlcjU1NzI4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/5572859?v=4","gravatar_id":"","url":"https://api.github.com/users/tabeth","html_url":"https://github.com/tabeth","followers_url":"https://api.github.com/users/tabeth/followers","following_url":"https://api.github.com/users/tabeth/following{/other_user}","gists_url":"https://api.github.com/users/tabeth/gists{/gist_id}","starred_url":"https://api.github.com/users/tabeth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tabeth/subscriptions","organizations_url":"https://api.github.com/users/tabeth/orgs","repos_url":"https://api.github.com/users/tabeth/repos","events_url":"https://api.github.com/users/tabeth/events{/privacy}","received_events_url":"https://api.github.com/users/tabeth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T19:40:34Z","updated_at":"2020-02-11T19:40:55Z","author_association":"NONE","body":"Ah, I see @wohali \r\n\r\nSo this is more investigative, where we want (for all of the `stats_descriptions.cfg` files)\r\n\r\nThis:\r\n\r\n```erlang\r\n{[dreyfus, rpc, search], [\r\n    {type, histogram},\r\n    {desc, <<\"length of a search RPC worker\">>}\r\n]}.\r\n```\r\n\r\nTo be something more like this:\r\n```erlang\r\n{[dreyfus, rpc, search], [\r\n    {type, histogram},\r\n    {desc, <<\"length (milliseconds) of a search RPC worker \">>}\r\n]}.\r\n```\r\n\r\nSo to successfully complete this we need to traverse each file and then figure out what the true values are and update the descriptions. Is that about right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584814649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584814923","html_url":"https://github.com/apache/couchdb/issues/1271#issuecomment-584814923","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1271","id":584814923,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDgxNDkyMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T19:41:11Z","updated_at":"2020-02-11T19:41:11Z","author_association":"MEMBER","body":"You got it! Anything that isn't a counter should be reviewed and ensure the description contains the correct unit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584814923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584836884","html_url":"https://github.com/apache/couchdb/issues/1271#issuecomment-584836884","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1271","id":584836884,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDgzNjg4NA==","user":{"login":"tabeth","id":5572859,"node_id":"MDQ6VXNlcjU1NzI4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/5572859?v=4","gravatar_id":"","url":"https://api.github.com/users/tabeth","html_url":"https://github.com/tabeth","followers_url":"https://api.github.com/users/tabeth/followers","following_url":"https://api.github.com/users/tabeth/following{/other_user}","gists_url":"https://api.github.com/users/tabeth/gists{/gist_id}","starred_url":"https://api.github.com/users/tabeth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tabeth/subscriptions","organizations_url":"https://api.github.com/users/tabeth/orgs","repos_url":"https://api.github.com/users/tabeth/repos","events_url":"https://api.github.com/users/tabeth/events{/privacy}","received_events_url":"https://api.github.com/users/tabeth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T20:31:27Z","updated_at":"2020-02-11T20:35:35Z","author_association":"NONE","body":"@wohali \r\nOK. I'll take a look at the files and start trying to update the descriptions. \r\n\r\nSo for example (to make sure I'm doing this right):\r\nWe have this:\r\n\r\n```erlang\r\n{[dreyfus, index, search], [\r\n    {type, histogram},\r\n    {desc, <<\"length of an dreyfus_index search request\">>}\r\n]}.\r\n```\r\n\r\nWhich seems to be implemented [here](https://github.com/apache/couchdb/blob/75e3acb426516e2ede8e70f55d72a73419cdeef3/src/dreyfus/src/dreyfus_index.erl#L57). `dreyfus_util:time/2` seems to call `timer:now_diff/2` [here](https://github.com/apache/couchdb/blob/75e3acb426516e2ede8e70f55d72a73419cdeef3/src/dreyfus/src/dreyfus_util.erl#L248), which returns microseconds. However it's divided by 1000, so the answer to the original question posed in the beginning should be *milliseconds*. \r\n\r\nSo our original example can be \r\n```erlang\r\n{[dreyfus, index, search], [\r\n    {type, histogram},\r\n    {desc, <<\"length (in milliseconds) of an dreyfus_index search request\">>}\r\n]}.\r\n```\r\n\r\nIs that right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584836884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584845472","html_url":"https://github.com/apache/couchdb/pull/2539#issuecomment-584845472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2539","id":584845472,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDg0NTQ3Mg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T20:52:10Z","updated_at":"2020-02-11T20:52:10Z","author_association":"MEMBER","body":"I read through this and am not seeing where you're limiting depth at all. In terms of implementing it, if I'm not mistaken that's just extending your json_explode function with an extra parameter that tracks where you are in the JSON object.\r\n\r\nAlthough, I don't think depth is the correct metric here? It should be based on the length of the key path that's constructed so that its guaranteed to fit within FoundationDB's key size requirements, right? Same idea, just have to count differently.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584845472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584851873","html_url":"https://github.com/apache/couchdb/pull/2539#issuecomment-584851873","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2539","id":584851873,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDg1MTg3Mw==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T21:06:28Z","updated_at":"2020-02-11T21:06:28Z","author_association":"MEMBER","body":"@davisp sorry for confusion, when I said \"still wrestling\" I meant as in \"not pushed out yet\", should've been clearer. For implementation, yes, limit on the keypath length is how I'm doing it, I'm now on the tests.\r\n\r\nFor key size vs depth it's kind of both. We want to keep packed key sizes under 10k, but there also was an advice from fdb's Document Layer team to @kocolosk that we might want to limit the total number of \"exploded\" keys, hence the idea to have an option to limit key-path's depth and consequently final number of keys.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584851873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584879908","html_url":"https://github.com/apache/couchdb/issues/1271#issuecomment-584879908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1271","id":584879908,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NDg3OTkwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-11T22:08:43Z","updated_at":"2020-02-11T22:08:43Z","author_association":"MEMBER","body":"@tabeth Careful. On Windows, `erlang:system_time/0` will return time only in ms, not us. You'll need to check the code to be sure this does the right thing on that platform. We may need a source code change here if it does the wrong thing, similar to https://github.com/apache/couchdb/commit/24e2c8bf61a4e82504ea6e6ba2caa779980b9597#diff-7470c79716cb3e7f1b3d572732277d94R349\r\n\r\n/cc @rnewson \r\n\r\nBut yes, that's the right approach.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/584879908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585081402","html_url":"https://github.com/apache/couchdb/pull/2541#issuecomment-585081402","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2541","id":585081402,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTA4MTQwMg==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T08:05:48Z","updated_at":"2020-02-12T08:05:48Z","author_association":"MEMBER","body":"I'm re-opening this since this looks good to me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585081402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585142128","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-585142128","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":585142128,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTE0MjEyOA==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T10:37:31Z","updated_at":"2020-02-12T10:37:31Z","author_association":"NONE","body":"@wohali and @janl Any chance we can get that in v3 when it's released?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585142128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585340067","html_url":"https://github.com/apache/couchdb/pull/2539#issuecomment-585340067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2539","id":585340067,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTM0MDA2Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T18:09:26Z","updated_at":"2020-02-12T18:09:26Z","author_association":"MEMBER","body":"I don't see anything technical/algorithmic that's gonna help here. You've already enumerated the major first ways I can think of that we'd want to add thresholds. Beyond that its just a definitions game of how things behave when those thresholds are exceeded.\r\n\r\nOne new thing that does occur to me with the depth limit though. The exploded storage model was always thought of as a path to getting sub-document updates to be more efficient. Assuming that when we hit a certain depth we just store anything further down in the value, it strikes me as something we'll need to ponder extra hard when defining that subdoc update stuff. The transition at that threshold seems like it'd be an easy off-by-one territory.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585340067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585482688","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-585482688","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":585482688,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTQ4MjY4OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T00:11:07Z","updated_at":"2020-02-13T00:11:07Z","author_association":"MEMBER","body":"@natcohen This is slated for the CouchDB 3.x release stream, but was moved out of the 3.0 release due to scheduling conflicts. Sorry about that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585482688/reactions","total_count":4,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":3,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585502943","html_url":"https://github.com/apache/couchdb/issues/1858#issuecomment-585502943","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1858","id":585502943,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTUwMjk0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T01:25:44Z","updated_at":"2020-02-13T01:25:44Z","author_association":"MEMBER","body":"Hey there @kangu ,\r\n\r\nJust realized you can look at `HKLM\\SYSTEM\\CurrentControlSet\\services\\Apache CouchDB\\Parameters\\AppDirectory` to find this out.\r\n\r\nAs of the 3.0 installer (to be released in the next few days), you can access this at `HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{4CD776E0-FADF-4831-AF56-E80E39F34CFC}\\InstallLocation`. Hope that helps.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585502943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585503094","html_url":"https://github.com/apache/couchdb/issues/1735#issuecomment-585503094","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1735","id":585503094,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTUwMzA5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T01:26:18Z","updated_at":"2020-02-13T01:26:18Z","author_association":"MEMBER","body":"Not seeing these now that we moved to `n=1`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585503094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585507440","html_url":"https://github.com/apache/couchdb/issues/1989#issuecomment-585507440","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1989","id":585507440,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTUwNzQ0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T01:43:12Z","updated_at":"2020-02-13T01:43:12Z","author_association":"MEMBER","body":"This is now fixed in the new Windows CouchDB 3.0 installer (to be uploaded with the 3.0 release), as part of changes necessary to support prompting for the admin user/password on install.\r\n\r\nThe new installer now takes these actions, in order:\r\n* prompts for the mandatory admin user & password\r\n* Installs the user-editable config files as `vm.args.dist` and `local.ini.dist`\r\n* Creates the file `etc\\local.d\\10-admins.ini` with the admin user specified in the installer, but **only if** the file does not yet exist\r\n* Copies the `vm.args.dist` file to `vm.args`, but **only if** that file doesn't exist yet\r\n* Copies the `local.ini.dist` file to `local.ini`, but **only if** that file doesn't exist yet\r\n* Starts the CouchDB service, which encrypts the plaintext password in `etc\\local.d\\10-admins.ini` immediately\r\n\r\nOn uninstall, the new uninstaller:\r\n* correctly stops both the Apache CouchDB service and the `epmd.exe` process\r\n* only removes the `vm.args` file, but **only if** it exactly matches the `vm.args.dist` file\r\n* only removes the `local.ini` file, but **only if** it exactly matches the `local.ini.dist` file\r\n* removes the `vm.args.dist` and `local.ini.dist` files along with the rest of the install\r\n* leaves behind the `etc\\local.d\\10-admins.ini` file, along with the contents of `data\\`\r\n\r\nThe new behaviour above is supported through a WiX custom action written in C#.\r\n\r\nUpgrades for now are still uninstall-then-reinstall, but the above safeguards mean that both your data and the user configurations are untouched during the process.\r\n\r\n@popojargo Keep in mind that when you uninstall CouchDB 2.3.1, it'll still remove the user config files, but after you install 3.0.0, it won't happen again.\r\n\r\nOne final note, since people may want to know: if you want to do a silent install of CouchDB,  here's how:\r\n\r\n```\r\nmsiexec /i apache-couchdb-3.0.0.msi /quiet ADMINUSER=admin ADMINPASSWORD=hunter2 /norestart\r\n```\r\n\r\nThe uninstall is similar:\r\n\r\n```\r\nmsiexec /x apache-couchdb-3.0.0.msi /quiet /norestart\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585507440/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585693261","html_url":"https://github.com/apache/couchdb/issues/2188#issuecomment-585693261","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2188","id":585693261,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTY5MzI2MQ==","user":{"login":"florianb","id":983507,"node_id":"MDQ6VXNlcjk4MzUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/983507?v=4","gravatar_id":"","url":"https://api.github.com/users/florianb","html_url":"https://github.com/florianb","followers_url":"https://api.github.com/users/florianb/followers","following_url":"https://api.github.com/users/florianb/following{/other_user}","gists_url":"https://api.github.com/users/florianb/gists{/gist_id}","starred_url":"https://api.github.com/users/florianb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florianb/subscriptions","organizations_url":"https://api.github.com/users/florianb/orgs","repos_url":"https://api.github.com/users/florianb/repos","events_url":"https://api.github.com/users/florianb/events{/privacy}","received_events_url":"https://api.github.com/users/florianb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T11:32:30Z","updated_at":"2020-02-13T11:32:30Z","author_association":"NONE","body":"I'm pretty new to Erlang but this is what i found out on my search for implemented escape-mechanisms.\r\n\r\nI think this issue is caused by a malicious call or implementation of `config_utils:implode` (see [config_util.erl:48](https://github.com/apache/couchdb-config/blob/8e0dbf5d6bb27c831b3bd27a020be07cab0e96d0/src/config_util.erl#L48)):\r\n\r\n```erlang\r\nimplode(List, Sep) ->\r\n    implode(List, Sep, []).\r\n\r\nimplode([], _Sep, Acc) ->\r\n    lists:flatten(lists:reverse(Acc)); % \r\nimplode([H], Sep, Acc) ->\r\n    implode([], Sep, [H|Acc]);\r\nimplode([H|T], Sep, Acc) ->\r\n    implode(T, Sep, [Sep,H|Acc]).\r\n```\r\n\r\nIt seems like that formerly removed equal signs (see [config.erl:396](https://github.com/apache/couchdb-config/blob/8e0dbf5d6bb27c831b3bd27a020be07cab0e96d0/src/config.erl#L396)):\r\n\r\n```erlang\r\ncase re:split(Line2, \"\\s?=\\s?\", [{return, list}]) of\r\n% ...\r\n[ValueName|LineValues] -> % yeehaw, got a line!\r\n    RemainingLine = config_util:implode(LineValues, \"=\"),\r\n```\r\n\r\n(which are passed to the `Sep` argument) are not reinserted. At this place a `string.join` might be the better alternative.\r\n\r\nHowever, the ini parser itself doesn't seem to handle edge cases safely.\r\nFrom my work at editorconfig (and our efforts there to create a strict ini grammar) i can say the current implementation also forbids semicolons in values which might be the next problem to deal with.\r\nAnd it looks like the parser could be simplified to gain robustness.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585693261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585817080","html_url":"https://github.com/apache/couchdb/pull/2539#issuecomment-585817080","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2539","id":585817080,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTgxNzA4MA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T15:31:57Z","updated_at":"2020-02-13T15:31:57Z","author_association":"MEMBER","body":"@davisp good call on complications for subdoc update! To be honest I'm confused how that suppose to work even without limiter, I mean we have revision as a part of keys and we are not keeping sub-part of old revision docs around. So even for subdoc update it'll be \"read the whole range or keypath-values, update some, insert all back\". This doesn't strike me as massivly superior to just reading doc body as a whole and patching it with diff send as PATCH's payload.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585817080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585914395","html_url":"https://github.com/apache/couchdb/pull/2546#issuecomment-585914395","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2546","id":585914395,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTkxNDM5NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T18:49:29Z","updated_at":"2020-02-13T18:49:29Z","author_association":"MEMBER","body":"Oops, this has commits I don't want in it. Closing...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585914395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585914535","html_url":"https://github.com/apache/couchdb/pull/2545#issuecomment-585914535","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2545","id":585914535,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTkxNDUzNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T18:49:50Z","updated_at":"2020-02-13T18:49:50Z","author_association":"MEMBER","body":"Unwanted commits; closing","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/585914535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586178919","html_url":"https://github.com/apache/couchdb/issues/2430#issuecomment-586178919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2430","id":586178919,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjE3ODkxOQ==","user":{"login":"fne","id":6025622,"node_id":"MDQ6VXNlcjYwMjU2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6025622?v=4","gravatar_id":"","url":"https://api.github.com/users/fne","html_url":"https://github.com/fne","followers_url":"https://api.github.com/users/fne/followers","following_url":"https://api.github.com/users/fne/following{/other_user}","gists_url":"https://api.github.com/users/fne/gists{/gist_id}","starred_url":"https://api.github.com/users/fne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fne/subscriptions","organizations_url":"https://api.github.com/users/fne/orgs","repos_url":"https://api.github.com/users/fne/repos","events_url":"https://api.github.com/users/fne/events{/privacy}","received_events_url":"https://api.github.com/users/fne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T09:37:33Z","updated_at":"2020-02-14T09:37:33Z","author_association":"NONE","body":"Hello\r\nWe have those results :\r\n\r\n/_node/_local/_stats/fabric\r\n`{\r\nworker: {\r\ntimeouts: {\r\nvalue: 2,\r\ntype: \"counter\",\r\ndesc: \"number of worker timeouts\"\r\n}\r\n},\r\nopen_shard: {\r\ntimeouts: {\r\nvalue: 5,\r\ntype: \"counter\",\r\ndesc: \"number of open shard timeouts\"\r\n}\r\n},\r\nread_repairs: {\r\nsuccess: {\r\nvalue: 403,\r\ntype: \"counter\",\r\ndesc: \"number of successful read repair operations\"\r\n},\r\nfailure: {\r\nvalue: 0,\r\ntype: \"counter\",\r\ndesc: \"number of failed read repair operations\"\r\n}\r\n},\r\ndoc_update: {\r\nerrors: {\r\nvalue: 2039,\r\ntype: \"counter\",\r\ndesc: \"number of document update errors\"\r\n},\r\nmismatched_errors: {\r\nvalue: 0,\r\ntype: \"counter\",\r\ndesc: \"number of document update errors with multiple error types\"\r\n},\r\nwrite_quorum_errors: {\r\nvalue: 82,\r\ntype: \"counter\",\r\ndesc: \"number of write quorum errors\"\r\n}\r\n}\r\n}`\r\n\r\n/_membership:\r\n{\r\nall_nodes: [\r\n\"couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local\",\r\n\"couchdb@couchdb-prod-couchdb-1.couchdb-prod-couchdb.prod.svc.cluster.local\",\r\n\"couchdb@couchdb-prod-couchdb-2.couchdb-prod-couchdb.prod.svc.cluster.local\"\r\n],\r\ncluster_nodes: [\r\n\"couchdb@couchdb-prod-couchdb-0.couchdb-prod-couchdb.prod.svc.cluster.local\",\r\n\"couchdb@couchdb-prod-couchdb-1.couchdb-prod-couchdb.prod.svc.cluster.local\",\r\n\"couchdb@couchdb-prod-couchdb-2.couchdb-prod-couchdb.prod.svc.cluster.local\"\r\n]\r\n}\r\n\r\n/_node/_local/_stats/rexi:\r\n`{\r\nbuffered: {\r\nvalue: 897,\r\ntype: \"counter\",\r\ndesc: \"number of rexi messages buffered\"\r\n},\r\ndown: {\r\nvalue: 4207,\r\ntype: \"counter\",\r\ndesc: \"number of rexi_DOWN messages handled\"\r\n},\r\ndropped: {\r\nvalue: 0,\r\ntype: \"counter\",\r\ndesc: \"number of rexi messages dropped from buffers\"\r\n},\r\nstreams: {\r\ntimeout: {\r\ninit_stream: {\r\nvalue: 0,\r\ntype: \"counter\",\r\ndesc: \"number of rexi stream initialization timeouts\"\r\n},\r\nstream: {\r\nvalue: 0,\r\ntype: \"counter\",\r\ndesc: \"number of rexi stream timeouts\"\r\n},\r\nwait_for_ack: {\r\nvalue: 0,\r\ntype: \"counter\",\r\ndesc: \"number of rexi stream timeouts while waiting for acks\"\r\n}\r\n}\r\n}\r\n}`\r\n\r\nBut when we execute remsh we have this error message :\r\n![image](https://user-images.githubusercontent.com/6025622/74519258-a89d2580-4f15-11ea-90e6-50da939d7b2b.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586178919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586379430","html_url":"https://github.com/apache/couchdb/pull/2553#issuecomment-586379430","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2553","id":586379430,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjM3OTQzMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T17:07:44Z","updated_at":"2020-02-14T17:07:44Z","author_association":"MEMBER","body":"Hi @jaydoane , be sure to merge these into the 3.x branch as well? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586379430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586407107","html_url":"https://github.com/apache/couchdb/pull/2553#issuecomment-586407107","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2553","id":586407107,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjQwNzEwNw==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T18:15:31Z","updated_at":"2020-02-14T18:15:31Z","author_association":"CONTRIBUTOR","body":"Hi @wohali I think these are _mostly_ broken due to the current FDB rebase work, but good call. I will double check.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586407107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586506315","html_url":"https://github.com/apache/couchdb/pull/2508#issuecomment-586506315","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2508","id":586506315,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjUwNjMxNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T22:40:45Z","updated_at":"2020-02-14T22:40:45Z","author_association":"CONTRIBUTOR","body":"A simpler version of this was merged:\r\n\r\nhttps://github.com/apache/couchdb/pull/2540","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586506315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586569507","html_url":"https://github.com/apache/couchdb/issues/2430#issuecomment-586569507","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2430","id":586569507,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjU2OTUwNw==","user":{"login":"fne","id":6025622,"node_id":"MDQ6VXNlcjYwMjU2MjI=","avatar_url":"https://avatars.githubusercontent.com/u/6025622?v=4","gravatar_id":"","url":"https://api.github.com/users/fne","html_url":"https://github.com/fne","followers_url":"https://api.github.com/users/fne/followers","following_url":"https://api.github.com/users/fne/following{/other_user}","gists_url":"https://api.github.com/users/fne/gists{/gist_id}","starred_url":"https://api.github.com/users/fne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fne/subscriptions","organizations_url":"https://api.github.com/users/fne/orgs","repos_url":"https://api.github.com/users/fne/repos","events_url":"https://api.github.com/users/fne/events{/privacy}","received_events_url":"https://api.github.com/users/fne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-15T08:55:36Z","updated_at":"2020-03-13T23:10:02Z","author_association":"NONE","body":"Our configuration \r\n```\r\n## clusterSize is the initial size of the CouchDB cluster.\r\nclusterSize: 3\r\n\r\n## If allowAdminParty is enabled the cluster will start up without any database\r\n## administrator account; i.e., all users will be granted administrative\r\n## access. Otherwise, the system will look for a Secret called\r\n## <ReleaseName>-couchdb containing `adminUsername`, `adminPassword` and\r\n## `cookieAuthSecret` keys. See the `createAdminSecret` flag.\r\n## ref: https://kubernetes.io/docs/concepts/configuration/secret/\r\nallowAdminParty: false\r\n\r\n## If createAdminSecret is enabled a Secret called <ReleaseName>-couchdb will\r\n## be created containing auto-generated credentials. Users who prefer to set\r\n## these values themselves have a couple of options:\r\n##\r\n## 1) The `adminUsername`, `adminPassword`, and `cookieAuthSecret` can be\r\n##    defined directly in the chart's values. Note that all of a chart's values\r\n##    are currently stored in plaintext in a ConfigMap in the tiller namespace.\r\n##\r\n## 2) This flag can be disabled and a Secret with the required keys can be\r\n##    created ahead of time.\r\ncreateAdminSecret: true\r\n\r\nadminUsername:\r\nadminPassword: \r\n# cookieAuthSecret: neither_is_this\r\n\r\n## The storage volume used by each Pod in the StatefulSet. If a\r\n## persistentVolume is not enabled, the Pods will use `emptyDir` ephemeral\r\n## local storage. Setting the storageClass attribute to \"-\" disables dynamic\r\n## provisioning of Persistent Volumes; leaving it unset will invoke the default\r\n## provisioner.\r\npersistentVolume:\r\n  enabled: true\r\n  accessModes:\r\n    - ReadWriteOnce\r\n  size: 500Gi\r\n  storageClass: managed-premium\r\n\r\n## The CouchDB image\r\nimage:\r\n  repository: couchdb\r\n  tag: 2.3.0\r\n  pullPolicy: IfNotPresent\r\n\r\n## Sidecar that connects the individual Pods into a cluster\r\nhelperImage:\r\n  repository: kocolosk/couchdb-statefulset-assembler\r\n  tag: 1.1.0\r\n  pullPolicy: IfNotPresent\r\n\r\n## CouchDB is happy to spin up cluster nodes in parallel, but if you encounter\r\n## problems you can try setting podManagementPolicy to the StatefulSet default\r\n## `OrderedReady`\r\npodManagementPolicy: Parallel\r\n\r\n## To better tolerate Node failures, we can prevent Kubernetes scheduler from\r\n## assigning more than one Pod of CouchDB StatefulSet per Node using podAntiAffinity.\r\naffinity:\r\n  # podAntiAffinity:\r\n  #   requiredDuringSchedulingIgnoredDuringExecution:\r\n  #     - labelSelector:\r\n  #         matchExpressions:\r\n  #           - key: \"app\"\r\n  #             operator: In\r\n  #             values:\r\n  #             - couchdb\r\n  #       topologyKey: \"kubernetes.io/hostname\"\r\n\r\n## A StatefulSet requires a headless Service to establish the stable network\r\n## identities of the Pods, and that Service is created automatically by this\r\n## chart without any additional configuration. The Service block below refers\r\n## to a second Service that governs how clients connect to the CouchDB cluster.\r\nservice:\r\n  enabled: true\r\n  type: ClusterIP\r\n  externalPort: 5984\r\n\r\n## An Ingress resource can provide name-based virtual hosting and TLS\r\n## termination among other things for CouchDB deployments which are accessed\r\n## from outside the Kubernetes cluster.\r\n## ref: https://kubernetes.io/docs/concepts/services-networking/ingress/\r\ningress:\r\n  enabled: false\r\n  hosts:\r\n    - chart-example.local\r\n  annotations:\r\n    # kubernetes.io/ingress.class: nginx\r\n    # kubernetes.io/tls-acme: \"true\"\r\n  tls:\r\n    # Secrets must be manually created in the namespace.\r\n    # - secretName: chart-example-tls\r\n    #   hosts:\r\n    #     - chart-example.local\r\n\r\n## Optional resource requests and limits for the CouchDB container\r\n## ref: http://kubernetes.io/docs/user-guide/compute-resources/\r\nresources:\r\n  # requests:\r\n  #  cpu: 100m\r\n  #  memory: 128Mi\r\n limits:\r\n  cpu: 2000m\r\n  memory: 4096Mi\r\n\r\n## erlangFlags is a map that is passed to the Erlang VM as flags using the\r\n## ERL_FLAGS env. `name` and `setcookie` flags are minimally required to\r\n## establish connectivity between cluster nodes.\r\n## ref: http://erlang.org/doc/man/erl.html#init_flags\r\nerlangFlags:\r\n  name: couchdb\r\n  setcookie: monster\r\n\r\n## couchdbConfig will override default CouchDB configuration settings.\r\n## The contents of this map are reformatted into a .ini file laid down\r\n## by a ConfigMap object.\r\n## ref: http://docs.couchdb.org/en/latest/config/index.html\r\ncouchdbConfig:\r\n  # cluster:\r\n  #   q: 8 # Create 8 shards for each database\r\n  chttpd:\r\n    bind_address: any\r\n    # chttpd.require_valid_user disables all the anonymous requests to the port\r\n    # 5984 when is set to true.\r\n    require_valid_user: true\r\n  httpd:\r\n    WWW-Authenticate: Basic realm=\"administrator\"\r\n  #compacte db \r\n  compactions:\r\n    _default: [{db_fragmentation, \"50%\"}, {view_fragmentation, \"50%\"}]\r\n    licensees: [{db_fragmentation, \"50%\"}, {view_fragmentation, \"50%\"}]\r\n    licensees_qualities: [{db_fragmentation, \"50%\"}, {view_fragmentation, \"50%\"}]\r\n    licensees_diplomas: [{db_fragmentation, \"50%\"}, {view_fragmentation, \"50%\"}]\r\n    structures: [{db_fragmentation, \"50%\"}, {view_fragmentation, \"50%\"}]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586569507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586623854","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586623854","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586623854,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjYyMzg1NA==","user":{"login":"ahaus","id":1169145,"node_id":"MDQ6VXNlcjExNjkxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1169145?v=4","gravatar_id":"","url":"https://api.github.com/users/ahaus","html_url":"https://github.com/ahaus","followers_url":"https://api.github.com/users/ahaus/followers","following_url":"https://api.github.com/users/ahaus/following{/other_user}","gists_url":"https://api.github.com/users/ahaus/gists{/gist_id}","starred_url":"https://api.github.com/users/ahaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahaus/subscriptions","organizations_url":"https://api.github.com/users/ahaus/orgs","repos_url":"https://api.github.com/users/ahaus/repos","events_url":"https://api.github.com/users/ahaus/events{/privacy}","received_events_url":"https://api.github.com/users/ahaus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-15T17:41:21Z","updated_at":"2020-02-15T17:41:21Z","author_association":"NONE","body":"![couchdb-failed-install](https://user-images.githubusercontent.com/1169145/74592547-b68c9c80-5022-11ea-872c-635ade5760cc.png)\r\nAdded Screenshot for failed installation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586623854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586624207","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586624207","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586624207,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjYyNDIwNw==","user":{"login":"ahaus","id":1169145,"node_id":"MDQ6VXNlcjExNjkxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1169145?v=4","gravatar_id":"","url":"https://api.github.com/users/ahaus","html_url":"https://github.com/ahaus","followers_url":"https://api.github.com/users/ahaus/followers","following_url":"https://api.github.com/users/ahaus/following{/other_user}","gists_url":"https://api.github.com/users/ahaus/gists{/gist_id}","starred_url":"https://api.github.com/users/ahaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahaus/subscriptions","organizations_url":"https://api.github.com/users/ahaus/orgs","repos_url":"https://api.github.com/users/ahaus/repos","events_url":"https://api.github.com/users/ahaus/events{/privacy}","received_events_url":"https://api.github.com/users/ahaus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-15T17:44:55Z","updated_at":"2020-02-15T17:50:17Z","author_association":"NONE","body":"Windows Event Logs shows:\r\nProduct: Apache CouchDB -- Installation failed.\r\n\r\nWindows Event message:\r\n`\r\n<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\r\n  <System>\r\n    <Provider Name=\"MsiInstaller\" />\r\n    <EventID Qualifiers=\"0\">11708</EventID>\r\n    <Level>4</Level>\r\n    <Task>0</Task>\r\n    <Keywords>0x80000000000000</Keywords>\r\n    <TimeCreated SystemTime=\"2020-02-15T17:32:57.021024000Z\" />\r\n    <EventRecordID>5057</EventRecordID>\r\n    <Channel>Application</Channel>\r\n    <Computer>XXXXXX</Computer>\r\n    <Security UserID=\"S-1-5-21-143990235-1749869768-1250630748-1001\" />\r\n  </System>\r\n  <EventData>\r\n    <Data>Product: Apache CouchDB -- Installation failed.</Data>\r\n    <Data>(NULL)</Data>\r\n    <Data>(NULL)</Data>\r\n    <Data>(NULL)</Data>\r\n    <Data>(NULL)</Data>\r\n    <Data>(NULL)</Data>\r\n    <Data>\r\n    </Data>\r\n    <Binary>7B34434437373645302D464144462D343833312D414635362D4538304533394633344346437D</Binary>\r\n  </EventData>\r\n</Event>`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586624207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586624680","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586624680","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586624680,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjYyNDY4MA==","user":{"login":"ahaus","id":1169145,"node_id":"MDQ6VXNlcjExNjkxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1169145?v=4","gravatar_id":"","url":"https://api.github.com/users/ahaus","html_url":"https://github.com/ahaus","followers_url":"https://api.github.com/users/ahaus/followers","following_url":"https://api.github.com/users/ahaus/following{/other_user}","gists_url":"https://api.github.com/users/ahaus/gists{/gist_id}","starred_url":"https://api.github.com/users/ahaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahaus/subscriptions","organizations_url":"https://api.github.com/users/ahaus/orgs","repos_url":"https://api.github.com/users/ahaus/repos","events_url":"https://api.github.com/users/ahaus/events{/privacy}","received_events_url":"https://api.github.com/users/ahaus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-15T17:49:18Z","updated_at":"2020-02-15T17:49:18Z","author_association":"NONE","body":"Windows Event Logs shows another message with error code: 1603\r\n\r\n> Das Produkt wurde durch Windows Installer installiert. Produktname: Apache CouchDB. Produktversion: 3.0.0. Produktsprache: 1033. Hersteller: The Apache Software Foundation. Erfolg- bzw. Fehlerstatus der Installation: 1603.\r\n\r\nEvent Message (XML):\r\n`<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\r\n  <System>\r\n    <Provider Name=\"MsiInstaller\" />\r\n    <EventID Qualifiers=\"0\">1033</EventID>\r\n    <Level>4</Level>\r\n    <Task>0</Task>\r\n    <Keywords>0x80000000000000</Keywords>\r\n    <TimeCreated SystemTime=\"2020-02-15T17:32:57.021024000Z\" />\r\n    <EventRecordID>5058</EventRecordID>\r\n    <Channel>Application</Channel>\r\n    <Computer>XXXXXX</Computer>\r\n    <Security UserID=\"S-1-5-21-143990235-1749869768-1250630748-1001\" />\r\n  </System>\r\n  <EventData>\r\n    <Data>Apache CouchDB</Data>\r\n    <Data>3.0.0</Data>\r\n    <Data>1033</Data>\r\n    <Data>1603</Data>\r\n    <Data>The Apache Software Foundation</Data>\r\n    <Data>(NULL)</Data>\r\n    <Data>\r\n    </Data>\r\n    <Binary>7B34434437373645302D464144462D343833312D414635362D4538304533394633344346437D3030303032303962336337333131663365656538666466303436376138663764366263363030303030393034</Binary>\r\n  </EventData>\r\n</Event>`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586624680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586629138","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586629138","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586629138,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjYyOTEzOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-15T18:37:48Z","updated_at":"2020-02-15T18:37:48Z","author_association":"MEMBER","body":"@ahaus Thanks for this report. I've tested on Win10 Pro (English) locally and can't reproduce.\r\n\r\nCan you please do the following. From an administrative command prompt, change to the directory in which the `.msi` is stored, then run:\r\n\r\n```\r\nmsiexec /l* log.txt /i apache-couchdb-3.0.0.msi\r\n```\r\n\r\ndo the exact same thing you did to cause the failure above, and attach the `log.txt` file to this bug? Thanks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586629138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586653684","html_url":"https://github.com/apache/couchdb/issues/2430#issuecomment-586653684","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2430","id":586653684,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjY1MzY4NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T00:05:50Z","updated_at":"2020-02-16T00:05:50Z","author_association":"CONTRIBUTOR","body":"Thanks for stats and the additional info, @fne \r\n\r\nBased on the stats from fabric and `rexi`, it looks like there are interment connection errors between nodes in the cluster. It seems some nodes in the cluster, get disconnected from other nodes. I was specifically looking at `rexi_DOWN` messages, write with quorum errors.\r\n`rexi` in this case is an internal component which performs inter-node RPC.\r\n\r\nThese disconnects can also be seen in the original logs as `rexi_buffer : cluster unstable` lines. . Those are expected during the initial cluster startup and shutdown. \r\n\r\nMonitor to see when those errors start going up and how it relates to RAM usage. In other words see if increase in connection errors coincide with increased RAM usage.\r\n\r\nAlso there was bug in 2.3.1 release where sometimes requests like _changes feed workers were not cleaned up sometimes after the client connection ends. Is your RAM usage increase correlated with specific types of requests?\r\n\r\nAnother experiment could be, for debugging purposes, to start single node cluster and see if it experiences the same issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586653684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586743462","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586743462","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586743462,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc0MzQ2Mg==","user":{"login":"ahaus","id":1169145,"node_id":"MDQ6VXNlcjExNjkxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1169145?v=4","gravatar_id":"","url":"https://api.github.com/users/ahaus","html_url":"https://github.com/ahaus","followers_url":"https://api.github.com/users/ahaus/followers","following_url":"https://api.github.com/users/ahaus/following{/other_user}","gists_url":"https://api.github.com/users/ahaus/gists{/gist_id}","starred_url":"https://api.github.com/users/ahaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahaus/subscriptions","organizations_url":"https://api.github.com/users/ahaus/orgs","repos_url":"https://api.github.com/users/ahaus/repos","events_url":"https://api.github.com/users/ahaus/events{/privacy}","received_events_url":"https://api.github.com/users/ahaus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T19:30:36Z","updated_at":"2020-02-16T19:30:36Z","author_association":"NONE","body":"[log.txt](https://github.com/apache/couchdb/files/4210718/log.txt)\r\nAttached log.txt","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586743462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586779919","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586779919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586779919,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc3OTkxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T01:12:02Z","updated_at":"2020-02-17T01:12:02Z","author_association":"MEMBER","body":"I won't be able to look at this until Tuesday earliest. Here's the problem:\r\n\r\n```\r\nAction 20:19:57: WriteAdminIniFile. \r\nSFXCA: Extracting custom action to temporary directory: C:\\WINDOWS\\Installer\\MSI14D0.tmp-\\\r\nSFXCA: Failed to get requested CLR info. Error code 0x80131700\r\nSFXCA: Ensure that the proper version of the .NET Framework is installed, or that there is a matching supportedRuntime element in CustomAction.config. If you are binding to .NET 4 or greater add useLegacyV2RuntimeActivationPolicy=true to the <startup> element.\r\nCustomAction WriteAdminIniFile returned actual error code 1603 (note this may not be 100% accurate if translation happened inside sandbox)\r\nAction ended 20:19:58: InstallFinalize. Return value 3.\r\n```\r\n\r\nWhat happens if you install the .NET Framework 3.5 SP1 offline installer first?\r\n\r\nhttps://docs.microsoft.com/en-us/dotnet/framework/install/dotnet-35-windows-10  Use the Control Panel way to install this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586779919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586919344","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586919344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586919344,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjkxOTM0NA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T10:18:39Z","updated_at":"2020-02-17T10:18:39Z","author_association":"CONTRIBUTOR","body":"I can run `CouchDB 3.0.0-RC1 installer` on one of Windows 10 box, and it is working. \r\n\r\nFrom Windows registry, `.Net Framework 3.5.30729.4926` was installed on this box. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586919344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586921088","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586921088","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586921088,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjkyMTA4OA==","user":{"login":"ahaus","id":1169145,"node_id":"MDQ6VXNlcjExNjkxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1169145?v=4","gravatar_id":"","url":"https://api.github.com/users/ahaus","html_url":"https://github.com/ahaus","followers_url":"https://api.github.com/users/ahaus/followers","following_url":"https://api.github.com/users/ahaus/following{/other_user}","gists_url":"https://api.github.com/users/ahaus/gists{/gist_id}","starred_url":"https://api.github.com/users/ahaus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahaus/subscriptions","organizations_url":"https://api.github.com/users/ahaus/orgs","repos_url":"https://api.github.com/users/ahaus/repos","events_url":"https://api.github.com/users/ahaus/events{/privacy}","received_events_url":"https://api.github.com/users/ahaus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T10:22:24Z","updated_at":"2020-02-17T10:22:24Z","author_association":"NONE","body":"@jiangphcn Thanks for the hint. Installing the .NET Framework 3.5 SP1 resolved the issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586921088/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586971736","html_url":"https://github.com/apache/couchdb/issues/2554#issuecomment-586971736","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2554","id":586971736,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njk3MTczNg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T12:29:00Z","updated_at":"2020-02-17T12:29:00Z","author_association":"CONTRIBUTOR","body":"Great and closing","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/586971736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587009795","html_url":"https://github.com/apache/couchdb/issues/2559#issuecomment-587009795","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2559","id":587009795,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzAwOTc5NQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T14:06:41Z","updated_at":"2020-02-17T14:06:41Z","author_association":"MEMBER","body":"cc @kocolosk ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587009795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587021981","html_url":"https://github.com/apache/couchdb/issues/2559#issuecomment-587021981","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2559","id":587021981,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzAyMTk4MQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T14:33:52Z","updated_at":"2020-02-17T14:33:52Z","author_association":"MEMBER","body":"it seems like this was okay as of [83bdcf6](https://github.com/apache/couchdb/compare/83bdcf6...3.0.0-RC1)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587021981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587029013","html_url":"https://github.com/apache/couchdb/issues/2559#issuecomment-587029013","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2559","id":587029013,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzAyOTAxMw==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T14:49:55Z","updated_at":"2020-02-17T15:13:07Z","author_association":"MEMBER","body":"my suspicion is that the auth cache changes in https://github.com/apache/couchdb/commit/27bb45043435828915bdcbdc130b685e5533bbd8  mean we no longer call `couch_auth_cache:ensure_users_db_exists/0` at startup, so the local db sync that is part of the seeding process fails. Is there another point at which this should be created?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587029013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587055703","html_url":"https://github.com/apache/couchdb/issues/2559#issuecomment-587055703","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2559","id":587055703,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzA1NTcwMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T15:51:43Z","updated_at":"2020-02-17T15:51:43Z","author_association":"CONTRIBUTOR","body":"@willholley You're probably right. \r\n\r\nWith the https://github.com/apache/couchdb/commit/27bb45043435828915bdcbdc130b685e5533bbd8 commit the db will be auto-created when it is used the first time.\r\n\r\nIt seems we could either auto-create it again on startup or check if db exists before attempting to sync it:\r\n\r\nhttps://github.com/apache/couchdb/blob/bb30e984c653640b5ef9b80d3e5a2801bad14efe/src/mem3/src/mem3_rpc.erl#L192\r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587055703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587085446","html_url":"https://github.com/apache/couchdb/issues/2559#issuecomment-587085446","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2559","id":587085446,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzA4NTQ0Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T17:02:34Z","updated_at":"2020-02-17T17:02:34Z","author_association":"CONTRIBUTOR","body":"Created a PR to not include users db in local_dbs output if it doesn't exist:\r\n\r\nhttps://github.com/apache/couchdb/pull/2560","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587085446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587143019","html_url":"https://github.com/apache/couchdb/pull/2560#issuecomment-587143019","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2560","id":587143019,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE0MzAxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T20:12:42Z","updated_at":"2020-02-17T20:12:42Z","author_association":"MEMBER","body":"@nickva Don't forget to merge this into `3.x` as well. Cherry-pick is fine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587143019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587145915","html_url":"https://github.com/apache/couchdb/pull/2560#issuecomment-587145915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2560","id":587145915,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE0NTkxNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T20:23:10Z","updated_at":"2020-02-17T20:23:10Z","author_association":"CONTRIBUTOR","body":"@wohali thanks for reminder, I created the PR https://github.com/apache/couchdb/pull/2561","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587145915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587209856","html_url":"https://github.com/apache/couchdb/pull/2562#issuecomment-587209856","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2562","id":587209856,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzIwOTg1Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T00:07:10Z","updated_at":"2020-02-18T00:07:10Z","author_association":"CONTRIBUTOR","body":"Benchmarking this vs prototype/fdb-layer get about a 2x speed up on macos with a single fdbserver with 1 million docs:\r\n\r\nprototype/fdb-layer\r\n``` \r\n$ time http $DB/deebee/_changes?include_docs=true > changes_1m_incude_docs.json_2.json\r\n\r\nreal\t7m58.086s\r\nuser\t0m4.157s\r\nsys\t0m2.404s\r\n```\r\n\r\nThis PR:\r\n```\r\n$ time http $DB/deebee/_changes?include_docs=true > changes_1m_incude_docs.json_3.json\r\n\r\nreal\t4m54.697s\r\nuser\t0m3.687s\r\nsys\t0m2.200s\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587209856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587349201","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587349201","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587349201,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM0OTIwMQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T08:56:23Z","updated_at":"2020-02-18T08:56:23Z","author_association":"CONTRIBUTOR","body":"thanks for reporting. Is there `/usr/local/opt/icu4c/lib/libicui18n.64.dylib` in your environment? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587349201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587357790","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587357790","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587357790,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM1Nzc5MA==","user":{"login":"nkev","id":5410916,"node_id":"MDQ6VXNlcjU0MTA5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/5410916?v=4","gravatar_id":"","url":"https://api.github.com/users/nkev","html_url":"https://github.com/nkev","followers_url":"https://api.github.com/users/nkev/followers","following_url":"https://api.github.com/users/nkev/following{/other_user}","gists_url":"https://api.github.com/users/nkev/gists{/gist_id}","starred_url":"https://api.github.com/users/nkev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkev/subscriptions","organizations_url":"https://api.github.com/users/nkev/orgs","repos_url":"https://api.github.com/users/nkev/repos","events_url":"https://api.github.com/users/nkev/events{/privacy}","received_events_url":"https://api.github.com/users/nkev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T09:17:44Z","updated_at":"2020-02-18T09:18:54Z","author_association":"NONE","body":"No, I don't see the `icu4c` folder. What application is it from?\r\n\r\n![image](https://user-images.githubusercontent.com/5410916/74721501-990e3b80-528b-11ea-9448-0427379cc338.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587357790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587365133","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587365133","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587365133,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM2NTEzMw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T09:33:55Z","updated_at":"2020-02-18T09:33:55Z","author_association":"CONTRIBUTOR","body":"can you try with `brew install icu4c` and then run again?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587365133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587366159","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587366159","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587366159,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM2NjE1OQ==","user":{"login":"nkev","id":5410916,"node_id":"MDQ6VXNlcjU0MTA5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/5410916?v=4","gravatar_id":"","url":"https://api.github.com/users/nkev","html_url":"https://github.com/nkev","followers_url":"https://api.github.com/users/nkev/followers","following_url":"https://api.github.com/users/nkev/following{/other_user}","gists_url":"https://api.github.com/users/nkev/gists{/gist_id}","starred_url":"https://api.github.com/users/nkev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkev/subscriptions","organizations_url":"https://api.github.com/users/nkev/orgs","repos_url":"https://api.github.com/users/nkev/repos","events_url":"https://api.github.com/users/nkev/events{/privacy}","received_events_url":"https://api.github.com/users/nkev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T09:36:16Z","updated_at":"2020-02-18T09:36:48Z","author_association":"NONE","body":"Ok. But I now have CouchDB v2.3.1 installed. Can I keep that installed?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587366159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587369526","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587369526","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587369526,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM2OTUyNg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T09:43:11Z","updated_at":"2020-02-18T09:43:11Z","author_association":"CONTRIBUTOR","body":"In general, there should be CouchDB version installed. However, you can install icu4c first, and check the version of CouchDB 3.0.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587369526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587370277","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587370277","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587370277,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzM3MDI3Nw==","user":{"login":"nkev","id":5410916,"node_id":"MDQ6VXNlcjU0MTA5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/5410916?v=4","gravatar_id":"","url":"https://api.github.com/users/nkev","html_url":"https://github.com/nkev","followers_url":"https://api.github.com/users/nkev/followers","following_url":"https://api.github.com/users/nkev/following{/other_user}","gists_url":"https://api.github.com/users/nkev/gists{/gist_id}","starred_url":"https://api.github.com/users/nkev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkev/subscriptions","organizations_url":"https://api.github.com/users/nkev/orgs","repos_url":"https://api.github.com/users/nkev/repos","events_url":"https://api.github.com/users/nkev/events{/privacy}","received_events_url":"https://api.github.com/users/nkev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T09:44:36Z","updated_at":"2020-02-18T09:44:36Z","author_association":"NONE","body":"I have now deleted the old version of Apache CouchDB.app and replaced with v3.0RC and it seems to work ok for now. I will report back here if it crashes again. Feel free to close if that is your normal procedure.\r\n\r\nThank your for helping. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587370277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587432299","html_url":"https://github.com/apache/couchdb/issues/2565#issuecomment-587432299","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2565","id":587432299,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzQzMjI5OQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T12:15:43Z","updated_at":"2020-02-18T12:15:43Z","author_association":"CONTRIBUTOR","body":"cool and closing","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587432299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587471810","html_url":"https://github.com/apache/couchdb/pull/2562#issuecomment-587471810","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2562","id":587471810,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzQ3MTgxMA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T13:56:33Z","updated_at":"2020-02-18T13:56:33Z","author_association":"MEMBER","body":"just for my understanding, what'd happen if changes transaction times out and restarts, but db was updated in-between? will changes get the different result?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587471810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587490247","html_url":"https://github.com/apache/couchdb/pull/2562#issuecomment-587490247","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2562","id":587490247,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzQ5MDI0Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T14:36:04Z","updated_at":"2020-02-18T14:36:04Z","author_association":"CONTRIBUTOR","body":"@eiri good question. The changes feed will continue with the next db sequence. (Next key after the last emitted one in the changes key range). Between transaction a document which was already emitted could be updated. In that case a document could be emitted again in the same changes feed later on.\r\n\r\nIt could be something like:\r\n```\r\n{\"seq\": \"1\", \"id\":\"doc1\", ...}\r\n{\"seq\": \"2\": \"id\":\"doc2\", ...}\r\nTx timeout\r\ndoc1 updated\r\n{\"seq\": 3\", \"id\":\"doc3\",...}\r\n{\"seq\", \"4\", \"id\":\"doc1\", ...}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587490247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587533976","html_url":"https://github.com/apache/couchdb/pull/2566#issuecomment-587533976","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2566","id":587533976,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzUzMzk3Ng==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T15:59:31Z","updated_at":"2020-02-18T16:12:08Z","author_association":"MEMBER","body":"@nickva yeah, I see elixir tests are failing on `prototype/fdb-layer` in the same way.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587533976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587595124","html_url":"https://github.com/apache/couchdb/pull/2567#issuecomment-587595124","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2567","id":587595124,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzU5NTEyNA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T18:03:18Z","updated_at":"2020-02-18T18:03:18Z","author_association":"CONTRIBUTOR","body":"I was mainly copy and pasting from https://apple.github.io/foundationdb/api-error-codes.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587595124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587639385","html_url":"https://github.com/apache/couchdb/pull/2568#issuecomment-587639385","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2568","id":587639385,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzYzOTM4NQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T18:43:26Z","updated_at":"2020-02-18T18:43:26Z","author_association":"MEMBER","body":"Closing since @nickva has a better idea on this","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587639385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587949493","html_url":"https://github.com/apache/couchdb/pull/2569#issuecomment-587949493","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2569","id":587949493,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Nzk0OTQ5Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T23:06:36Z","updated_at":"2020-02-18T23:06:36Z","author_association":"CONTRIBUTOR","body":"Test with `make eunit apps=fabric,couch_jobs,couch_views`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/587949493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588207133","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588207133","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588207133,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODIwNzEzMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T12:42:18Z","updated_at":"2020-02-19T12:42:18Z","author_association":"MEMBER","body":"Good find! Agreed that this is a little confusing. CouchDB internals dont really care about cluster vs. single node. A single node just happens to be a cluster of one, hence the confusion. The introduction of the new setting requires one more clause in this function:\r\n\r\nhttps://github.com/apache/couchdb/blob/3f64ef2b98796ba8e0391fb80483502fdafc6a8c/src/setup/src/setup_httpd.erl#L30-L54\r\n\r\nIt should be easy enough to add, using `config:get_boolean()` like here https://github.com/apache/couchdb/blob/3f64ef2b98796ba8e0391fb80483502fdafc6a8c/src/setup/src/setup_sup.erl#L38\r\n\r\n@gesellix wanna try a PR?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588207133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588210056","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588210056","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588210056,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODIxMDA1Ng==","user":{"login":"gesellix","id":432791,"node_id":"MDQ6VXNlcjQzMjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/432791?v=4","gravatar_id":"","url":"https://api.github.com/users/gesellix","html_url":"https://github.com/gesellix","followers_url":"https://api.github.com/users/gesellix/followers","following_url":"https://api.github.com/users/gesellix/following{/other_user}","gists_url":"https://api.github.com/users/gesellix/gists{/gist_id}","starred_url":"https://api.github.com/users/gesellix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gesellix/subscriptions","organizations_url":"https://api.github.com/users/gesellix/orgs","repos_url":"https://api.github.com/users/gesellix/repos","events_url":"https://api.github.com/users/gesellix/events{/privacy}","received_events_url":"https://api.github.com/users/gesellix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T12:48:14Z","updated_at":"2020-02-19T12:48:14Z","author_association":"NONE","body":"> wanna try a PR?\r\n\r\nOh yes, the code pointers help a lot. I'll try!\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588210056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588292798","html_url":"https://github.com/apache/couchdb/pull/2572#issuecomment-588292798","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2572","id":588292798,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODI5Mjc5OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T15:58:11Z","updated_at":"2020-02-19T15:58:11Z","author_association":"MEMBER","body":"er this looks like a haunted branch, let me try again\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588292798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588368884","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588368884","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588368884,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODM2ODg4NA==","user":{"login":"gesellix","id":432791,"node_id":"MDQ6VXNlcjQzMjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/432791?v=4","gravatar_id":"","url":"https://api.github.com/users/gesellix","html_url":"https://github.com/gesellix","followers_url":"https://api.github.com/users/gesellix/followers","following_url":"https://api.github.com/users/gesellix/following{/other_user}","gists_url":"https://api.github.com/users/gesellix/gists{/gist_id}","starred_url":"https://api.github.com/users/gesellix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gesellix/subscriptions","organizations_url":"https://api.github.com/users/gesellix/orgs","repos_url":"https://api.github.com/users/gesellix/repos","events_url":"https://api.github.com/users/gesellix/events{/privacy}","received_events_url":"https://api.github.com/users/gesellix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T18:21:17Z","updated_at":"2020-02-19T18:21:17Z","author_association":"NONE","body":"Fixed with #2574 - thx @janl!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588368884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588437261","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588437261","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588437261,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODQzNzI2MQ==","user":{"login":"gesellix","id":432791,"node_id":"MDQ6VXNlcjQzMjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/432791?v=4","gravatar_id":"","url":"https://api.github.com/users/gesellix","html_url":"https://github.com/gesellix","followers_url":"https://api.github.com/users/gesellix/followers","following_url":"https://api.github.com/users/gesellix/following{/other_user}","gists_url":"https://api.github.com/users/gesellix/gists{/gist_id}","starred_url":"https://api.github.com/users/gesellix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gesellix/subscriptions","organizations_url":"https://api.github.com/users/gesellix/orgs","repos_url":"https://api.github.com/users/gesellix/repos","events_url":"https://api.github.com/users/gesellix/events{/privacy}","received_events_url":"https://api.github.com/users/gesellix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T20:37:06Z","updated_at":"2020-02-19T20:37:06Z","author_association":"NONE","body":"Not sure if #2574 fixes this issue.\r\n\r\n@janl can you confirm that `is_single_node_enabled` will be called in case of a single_node-configured instance?\r\n\r\nI think that it won't be called, because `GET /_node/_local/_config` yields `cluster.n = 3` for me. `is_single_node_enabled` will only be called in case of `cluster.n = 1`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588437261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588452291","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588452291","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588452291,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODQ1MjI5MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T20:49:38Z","updated_at":"2020-02-19T20:49:38Z","author_association":"MEMBER","body":"Ah shoot, you're right! Cc @wohali ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588452291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588460915","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588460915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588460915,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODQ2MDkxNQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T20:58:26Z","updated_at":"2020-02-19T20:58:26Z","author_association":"MEMBER","body":"Thanks @gesellix ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588460915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588461817","html_url":"https://github.com/apache/couchdb/issues/2557#issuecomment-588461817","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2557","id":588461817,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODQ2MTgxNw==","user":{"login":"gesellix","id":432791,"node_id":"MDQ6VXNlcjQzMjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/432791?v=4","gravatar_id":"","url":"https://api.github.com/users/gesellix","html_url":"https://github.com/gesellix","followers_url":"https://api.github.com/users/gesellix/followers","following_url":"https://api.github.com/users/gesellix/following{/other_user}","gists_url":"https://api.github.com/users/gesellix/gists{/gist_id}","starred_url":"https://api.github.com/users/gesellix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gesellix/subscriptions","organizations_url":"https://api.github.com/users/gesellix/orgs","repos_url":"https://api.github.com/users/gesellix/repos","events_url":"https://api.github.com/users/gesellix/events{/privacy}","received_events_url":"https://api.github.com/users/gesellix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T20:59:01Z","updated_at":"2020-02-19T20:59:01Z","author_association":"NONE","body":" you're welcome","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588461817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588601449","html_url":"https://github.com/apache/couchdb/pull/2571#issuecomment-588601449","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2571","id":588601449,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODYwMTQ0OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T04:19:11Z","updated_at":"2020-02-20T04:19:11Z","author_association":"CONTRIBUTOR","body":"I think the bug here is in the sizes PR a few commits back:\r\n\r\nhttps://github.com/apache/couchdb/commit/eb1a09e114dafc55fa9511d477b9ada4350134eb#diff-32274bcb4785f432811085d2e08c3580\r\n\r\n(And I did miss it during the review, sorry about that)\r\n\r\nThere are compatibility clauses there https://github.com/apache/couchdb/blob/prototype/fdb-layer/src/fabric/src/fabric2_fdb.erl#L1272 to upgrade from rev format `0 -> 1` and `1 -> 2`. However `0 -> 1` became broken because it uses the `?CURR_REV_FORMAT` macro which was bumped from `1` to `2` in that commit. So we are effectively doing a `0` -> `2` jump but with version `1` tuple format. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588601449/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588869115","html_url":"https://github.com/apache/couchdb/pull/2571#issuecomment-588869115","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2571","id":588869115,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODg2OTExNQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T09:50:22Z","updated_at":"2020-02-20T09:50:22Z","author_association":"CONTRIBUTOR","body":"Good find @nickva! I backed out my previous commit, and just changed the two buggy compatibility clauses, and the code now seems to read my old data fine. Seems like maybe we should have some tests for these upgrade clauses?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/588869115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589330949","html_url":"https://github.com/apache/couchdb/pull/2571#issuecomment-589330949","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2571","id":589330949,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTMzMDk0OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T21:37:45Z","updated_at":"2020-02-20T21:37:45Z","author_association":"CONTRIBUTOR","body":"@jaydoane if you feel up to a challenge :-) we have something similar to check reading in older local doc formats:\r\n\r\nhttps://github.com/apache/couchdb/blob/prototype/fdb-layer/src/fabric/test/fabric2_doc_crud_tests.erl#L845-L893\r\n\r\nIf you start from version 0 that would run through version 1 and version 2 so you'd exercise all that code. If building those rev tuples from scratch is hard, maybe it's easier to create a few revisions via `fabric2_db:...` then read the tuples, shorten them and write them back (with plain old `erlfdb:set` as version 0). Then go through `fabric2_db` to read the revision and assert they were read correctly.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589330949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589402122","html_url":"https://github.com/apache/couchdb/pull/2571#issuecomment-589402122","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2571","id":589402122,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTQwMjEyMg==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T23:13:32Z","updated_at":"2020-02-20T23:13:32Z","author_association":"CONTRIBUTOR","body":"@nickva I opted for a simple unit test, which adds coverage to the formerly buggy code, and should help ensure the same type of bug is not re-introduced. I'm happy to pursue a more robust test if you think it's necessary, however.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/589402122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]