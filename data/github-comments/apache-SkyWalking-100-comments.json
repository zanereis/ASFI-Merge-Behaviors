[{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511080075","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511080075","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511080075,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4MDA3NQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T02:26:21Z","updated_at":"2019-07-13T02:26:21Z","author_association":"CONTRIBUTOR","body":"@wu-sheng  where the right example of asyncFinish?  I try to fix the vertx plugin, but can not fix the logic...\r\n\r\n可否给个样例","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511080075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511080495","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511080495","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511080495,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4MDQ5NQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T02:33:47Z","updated_at":"2019-07-13T02:33:47Z","author_association":"MEMBER","body":"How to finish it is plugin responsibility. You could use dynamic field or anything you like to coordinate it. But basically, I don't know vertx, so I need you to make it clear why you can't be sure about when to close it, and why you try to finish it duplicatedly.\r\n\r\nI am just saying, your proposal doesn't change anything, because think in this way, if there is two async spans, what happens? Is this API change still helpful? I think it isn't, no one should check the context in this way.\r\n\r\nIt is same when you called span#close twice, you close other plugin span.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511080495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511087090","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511087090","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511087090,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4NzA5MA==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T04:24:18Z","updated_at":"2019-07-13T04:24:18Z","author_association":"CONTRIBUTOR","body":"@wu-sheng \r\n1.  just one span\r\n2. span.prepareForAsync()  then  span.asyncFinish() will not finished the span\r\n   async code not work as the [async-span-apis doc](https://github.com/apache/skywalking/blob/master/docs/en/guides/Java-Plugin-Development-Guide.md#async-span-apis)\r\n3. sorrry for my poor english\r\n我还是用中文表述：\r\n   虽然之前给出的API用例是不正确，但这个API的改除了插件要重新才能使用编译外没其他影响\r\n   可能是API使用不当，也可能是API内部实施逻辑有欠缺，今天我再验证一下\r\n没找到对应的API的使用样例，有的话麻烦提供一下：）\r\n\r\nQuestion:\r\n1. maybe just one span or maybe not, how to code the plugin on the last code ? should I use span.prepareForAsync()  then  span.asyncFinish() ?  \r\n\r\n2. should [asyncStop](\r\nhttps://github.com/apache/skywalking/blob/535878054313d94e00f81c6a647bac2f92559207/apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/TracingContext.java#L426) the pop logic same as [stopSpan](https://github.com/apache/skywalking/blob/535878054313d94e00f81c6a647bac2f92559207/apm-sniffer/apm-agent-core/src/main/java/org/apache/skywalking/apm/agent/core/context/TracingContext.java#L390)\r\n\r\n\r\n   \r\n   ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511087090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511087746","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511087746","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511087746,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4Nzc0Ng==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T04:35:58Z","updated_at":"2019-07-13T04:55:15Z","author_association":"CONTRIBUTOR","body":"@wu-sheng \r\nprepareAsync first, then asyncFinish at somewhere else  not work:\r\ncase checkFinishConditions() is false(activeSpanStack is not empty)\r\n```\r\nimport org.apache.skywalking.apm.agent.core.conf.RemoteDownstreamConfig;\r\nimport org.apache.skywalking.apm.agent.core.context.ContextCarrier;\r\nimport org.apache.skywalking.apm.agent.core.context.ContextManager;\r\nimport org.apache.skywalking.apm.agent.core.context.tag.Tags;\r\nimport org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\r\nimport org.apache.skywalking.apm.agent.core.context.trace.SpanLayer;\r\nimport org.apache.skywalking.apm.agent.core.dictionary.DictionaryUtil;\r\nimport org.apache.skywalking.apm.network.trace.component.ComponentsDefine;\r\n\r\npublic class TestAsyncStop {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        long start = System.currentTimeMillis();\r\n        // wait for skywalking agent ready\r\n        while (true) {\r\n            Thread.sleep(200l);\r\n            if (RemoteDownstreamConfig.Agent.SERVICE_ID != DictionaryUtil.nullValue()\r\n                    && RemoteDownstreamConfig.Agent.SERVICE_INSTANCE_ID != DictionaryUtil.nullValue()) {\r\n                System.out.println(\"skywalking is ready:\" + (System.currentTimeMillis() - start) + \" ms\");\r\n                break;\r\n            }\r\n        }\r\n\r\n        ContextCarrier contextCarrier = new ContextCarrier();\r\n        final String opName = \"/abc123\";\r\n        AbstractSpan span = ContextManager.createEntrySpan(opName, contextCarrier);\r\n\r\n        span.setComponent(ComponentsDefine.VERTX);\r\n        SpanLayer.asHttp(span);\r\n\r\n        Tags.HTTP.METHOD.set(span, \"GET\");\r\n        Tags.URL.set(span, opName);\r\n        span.prepareForAsync();\r\n        Thread.sleep(1l);\r\n        span.asyncFinish();\r\n        try {// wait for skywalking to finish\r\n            Thread.sleep(200l);\r\n        } catch (InterruptedException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n }\r\n```\r\nplease fix the code:)","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511087746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511087808","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511087808","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511087808,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4NzgwOA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T04:36:45Z","updated_at":"2019-07-13T04:36:45Z","author_association":"MEMBER","body":"I am not following, your descriptions are not consistent. I don't understand how you want to do. But your proposal to return the count, the reason I am arguing, is we should not do that, it is a wrong design.\r\n\r\nFor 1, The document tolds you very clear, prepareAsync first, then finish at somewhere else. What is your question?\r\nFor 2, simple answer is no. \r\n\r\nI think you haven't understood what is async finish. Async finish is only for make span finished out of current tracing context, and keep tag and duration right.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511087808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511088895","html_url":"https://github.com/apache/skywalking/issues/3035#issuecomment-511088895","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3035","id":511088895,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4ODg5NQ==","user":{"login":"MrZhengliang","id":4627746,"node_id":"MDQ6VXNlcjQ2Mjc3NDY=","avatar_url":"https://avatars.githubusercontent.com/u/4627746?v=4","gravatar_id":"","url":"https://api.github.com/users/MrZhengliang","html_url":"https://github.com/MrZhengliang","followers_url":"https://api.github.com/users/MrZhengliang/followers","following_url":"https://api.github.com/users/MrZhengliang/following{/other_user}","gists_url":"https://api.github.com/users/MrZhengliang/gists{/gist_id}","starred_url":"https://api.github.com/users/MrZhengliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrZhengliang/subscriptions","organizations_url":"https://api.github.com/users/MrZhengliang/orgs","repos_url":"https://api.github.com/users/MrZhengliang/repos","events_url":"https://api.github.com/users/MrZhengliang/events{/privacy}","received_events_url":"https://api.github.com/users/MrZhengliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T04:58:05Z","updated_at":"2019-07-13T04:58:05Z","author_association":"NONE","body":"Thanks a lot! Our revision was successful . We'll be more precise when coding this piece！","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511088895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511089595","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511089595","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511089595,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA4OTU5NQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T05:11:22Z","updated_at":"2019-07-13T05:11:22Z","author_association":"CONTRIBUTOR","body":"In the same tracing context, should not use prepareAsync ?\r\nAPI should have sample use case test code  :)\r\n\r\nAPI强壮性还有待提高： API设计上应该防止不当使用， A plugin的bug却影响了B plugin的功能:(\r\n ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511089595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511090755","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511090755","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511090755,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MDc1NQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T05:30:41Z","updated_at":"2019-07-13T05:30:41Z","author_association":"MEMBER","body":"You can use in same thread for sure. I am keep talking, you look like just guessing, and use a main to test, rather than read codes.\r\n\r\nWe wouldn't do the thinga you said, check how you use API. Agent is a hijack and black tech, we are focusing on performance as always highest priority. So, we are not other library you used. In real world, no matter what API you do, you could effect other plugin, if you know what is distributed tracing.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511090755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511090813","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511090813","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511090813,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MDgxMw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T05:31:40Z","updated_at":"2019-07-13T05:31:40Z","author_association":"MEMBER","body":"You are entering a wrong direction, and trying to ask the wrong question.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511090813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511090926","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511090926","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511090926,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MDkyNg==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T05:34:12Z","updated_at":"2019-07-13T05:34:32Z","author_association":"MEMBER","body":"The truth is, you could make connection leak if you use the connection pool in wrong way, and crash application. Nothing could stop you to do that.\r\n\r\nAlso, the thing you said about the check, is even not performance related, it is just wrong. You are solving a question and bringing more to the core.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511090926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511092345","html_url":"https://github.com/apache/skywalking/pull/3063#issuecomment-511092345","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3063","id":511092345,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MjM0NQ==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:00:14Z","updated_at":"2019-07-13T06:00:14Z","author_association":"MEMBER","body":"> I think you misunderstand my point. We have source code in two places, one is GitHub, the other Apache source release. They are different, Apache soure release doesn't need git submodule thing, because we did that in source release procedure.\r\n\r\nHi, @wu-sheng . I got it. So here's the case with code clone from GitHub. \r\n> **If you clone the codes from Github**, please make sure that you had finished step 1 to 7 in section Build from GitHub\r\n\r\nIf download Apache soure release, we don't need that.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511092345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511092883","html_url":"https://github.com/apache/skywalking/pull/3063#issuecomment-511092883","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3063","id":511092883,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5Mjg4Mw==","user":{"login":"kezhenxu94","id":15965696,"node_id":"MDQ6VXNlcjE1OTY1Njk2","avatar_url":"https://avatars.githubusercontent.com/u/15965696?v=4","gravatar_id":"","url":"https://api.github.com/users/kezhenxu94","html_url":"https://github.com/kezhenxu94","followers_url":"https://api.github.com/users/kezhenxu94/followers","following_url":"https://api.github.com/users/kezhenxu94/following{/other_user}","gists_url":"https://api.github.com/users/kezhenxu94/gists{/gist_id}","starred_url":"https://api.github.com/users/kezhenxu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kezhenxu94/subscriptions","organizations_url":"https://api.github.com/users/kezhenxu94/orgs","repos_url":"https://api.github.com/users/kezhenxu94/repos","events_url":"https://api.github.com/users/kezhenxu94/events{/privacy}","received_events_url":"https://api.github.com/users/kezhenxu94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:08:37Z","updated_at":"2019-07-13T06:35:26Z","author_association":"MEMBER","body":"> If download Apache soure release, we don't need that.\r\n\r\n@dmsolr  You still need that steps in **Build from Apache source code release** to generate some source codes from `.proto` files\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511092883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093197","html_url":"https://github.com/apache/skywalking/issues/3035#issuecomment-511093197","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3035","id":511093197,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MzE5Nw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:13:42Z","updated_at":"2019-07-13T06:13:42Z","author_association":"MEMBER","body":"@candyleer I noticed this discussion. It looks like a little complex, if we supports don't implement EnhancedInstance, which is easy, but how do we do Spring plugin in good way?\r\n\r\nDo you think we worth to open an issue to discuss this and add a FAQ document for next user?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093271","html_url":"https://github.com/apache/skywalking/issues/3011#issuecomment-511093271","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3011","id":511093271,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MzI3MQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:14:56Z","updated_at":"2019-07-13T06:14:56Z","author_association":"MEMBER","body":"No update in one week.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093698","html_url":"https://github.com/apache/skywalking/issues/2925#issuecomment-511093698","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2925","id":511093698,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5MzY5OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:20:45Z","updated_at":"2019-07-13T06:20:45Z","author_association":"MEMBER","body":"No update in a month","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093889","html_url":"https://github.com/apache/skywalking/issues/2850#issuecomment-511093889","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2850","id":511093889,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5Mzg4OQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:23:50Z","updated_at":"2019-07-13T06:23:50Z","author_association":"MEMBER","body":"@TinyAllen could you check the layout codes with the sample data?  Is this caused by any means missing segment? If so, I recommend UI consider to provide someway to show break trace, which could happen even in design and real world.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511093889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511094276","html_url":"https://github.com/apache/skywalking/pull/3063#issuecomment-511094276","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3063","id":511094276,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5NDI3Ng==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T06:30:36Z","updated_at":"2019-07-13T06:30:36Z","author_association":"MEMBER","body":"> > If download Apache soure release, we don't need that.\r\n> \r\n> @dmsolr You still need that to generate some source codes from `.proto` files\r\n\r\nYes. There are `Run ./mvnw compile -Dmaven.test.skip=true to compile project and generate source codes. Because we use gRPC and protobuf` in the steps. \r\nBut it is ok that we say it twice. ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511094276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511099979","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511099979","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511099979,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTA5OTk3OQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T07:57:08Z","updated_at":"2019-07-13T11:04:40Z","author_association":"CONTRIBUTOR","body":"我发现问题点了，代码调用顺序如下调整可以发送数据到skywalking系统。\r\n```\r\n       span.prepareForAsync();\r\n        Thread.sleep(3l);\r\n        span.asyncFinish();  \r\n        Thread.sleep(1l);\r\n        ContextManager.stopSpan(span); \r\n```\r\n**must invoke ContextManager.stopSpan to close then span**\r\n个人建议如果可能的话尽能使用`ContextManager.stopSpan(span)`方式来关闭span：关闭顺序如果不会直接报错，能做到fail-fast\r\n 另如再在stopSpan API实现中识别调用prepareForAsync,而没asyncFinish这种编码错误，就是更完美了-- 为了性能加条件性开关需要时，在需要时开启以便做到fail-fast","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511099979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511111684","html_url":"https://github.com/apache/skywalking/pull/3065#issuecomment-511111684","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3065","id":511111684,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTExMTY4NA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T10:38:34Z","updated_at":"2019-07-13T10:38:34Z","author_association":"MEMBER","body":"I wouldn't do more discussion, unless yoi change this to English. Sorry. \r\nThis is unfriendly to others.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511111684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511122115","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511122115","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511122115,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyMjExNQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T13:26:53Z","updated_at":"2019-07-13T13:26:53Z","author_association":"MEMBER","body":"Hi, I am back from travell, so we could work on this now.\r\n\r\nFor your prev tests\r\n![image](https://user-images.githubusercontent.com/5441976/61172239-1a924280-a5b4-11e9-9074-f85828611ec6.png)\r\n1. You set consume size to 4k, from my prev calculation, it should at least 40k, is it your mistake or mine?\r\n1. You didn't clear the link after each consume cycle, I assume it is a bug? If you don't add, the link size keeps increasing.\r\n\r\nHow about improving this as the first step?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511122115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511123331","html_url":"https://github.com/apache/skywalking/pull/2644#issuecomment-511123331","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2644","id":511123331,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyMzMzMQ==","user":{"login":"SkyWalkingRobot","id":35362890,"node_id":"MDQ6VXNlcjM1MzYyODkw","avatar_url":"https://avatars.githubusercontent.com/u/35362890?v=4","gravatar_id":"","url":"https://api.github.com/users/SkyWalkingRobot","html_url":"https://github.com/SkyWalkingRobot","followers_url":"https://api.github.com/users/SkyWalkingRobot/followers","following_url":"https://api.github.com/users/SkyWalkingRobot/following{/other_user}","gists_url":"https://api.github.com/users/SkyWalkingRobot/gists{/gist_id}","starred_url":"https://api.github.com/users/SkyWalkingRobot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkyWalkingRobot/subscriptions","organizations_url":"https://api.github.com/users/SkyWalkingRobot/orgs","repos_url":"https://api.github.com/users/SkyWalkingRobot/repos","events_url":"https://api.github.com/users/SkyWalkingRobot/events{/privacy}","received_events_url":"https://api.github.com/users/SkyWalkingRobot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T13:45:55Z","updated_at":"2019-07-13T13:45:55Z","author_association":"NONE","body":"Here is the [test report](http://github.com/SkywalkingTest/agent-integration-test-report/tree/master/2019/7/wayilau/testReport-master-2019-07-13-21-45.md) and [validate logs](http://35.227.88.23:49001/job/skywalking-agent-test/174/artifact/workspace/logs/validate_2019-07-13-21-45.log)","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511123331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511124323","html_url":"https://github.com/apache/skywalking/pull/2644#issuecomment-511124323","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2644","id":511124323,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyNDMyMw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T14:00:41Z","updated_at":"2019-07-13T14:00:41Z","author_association":"MEMBER","body":"Still failing.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511124323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511127898","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511127898","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511127898,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyNzg5OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T14:51:16Z","updated_at":"2019-07-13T14:51:16Z","author_association":"MEMBER","body":"Follow this to do performance-related PR.\r\n1. https://github.com/apache/skywalking/pull/2766#issuecomment-496240702\r\n1. Recommend to add performance test cases into the PR(test/*), and also add the benchmark result in test case comment. Take `AtomicRangeIntegerTest` as a good example.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511127898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511127988","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511127988","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511127988,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyNzk4OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T14:52:17Z","updated_at":"2019-07-13T14:52:17Z","author_association":"MEMBER","body":"Also, run the benchmark in JDK8 at least, if you like JDK11 is welcome of course. Because JDK8 is the real widely used one.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511127988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511135923","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511135923","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511135923,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEzNTkyMw==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T16:36:09Z","updated_at":"2019-07-13T17:40:12Z","author_association":"CONTRIBUTOR","body":"How to run  the  AtomicRangeIntegerTest  Benchmark in command line, I will try if have time:)\r\n \r\nfinally I found:\r\n```\r\nmvn exec:java -Dexec.mainClass=\"org.openjdk.jmh.Main\" -Dexec.args=\"org.apache.skywalking.apm.commons.datacarrier.common.AtomicRangeIntegerTest  -w 1 -r 1   -wi 5 -i 10 -f 0 -tu ms\"  -Dexec.classpathScope=test  -f apm-commons/apm-datacarrier/pom.xml\r\n```\r\nand must not be fork ( -f 0 )","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511135923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511163710","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511163710","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511163710,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2MzcxMA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T00:36:46Z","updated_at":"2019-07-14T00:36:46Z","author_association":"MEMBER","body":"Hi, just remind, in most cases, don't run benchmark on CI env, especially ci provided by free. It is unstable and inconsistent performance env. Run it on certain cpu/memory and include the env inform in the PR.\r\n\r\n(I am not familar with gitlab CI)\r\n\r\nPlease add new comments, rather than update old ones, confusing people read this PR.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511163710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511166121","html_url":"https://github.com/apache/skywalking/issues/3010#issuecomment-511166121","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3010","id":511166121,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2NjEyMQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T01:41:29Z","updated_at":"2019-07-14T01:41:29Z","author_association":"MEMBER","body":"This is free(not used), UI calculates from backend used.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511166121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511166787","html_url":"https://github.com/apache/skywalking/pull/2973#issuecomment-511166787","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2973","id":511166787,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2Njc4Nw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:00:31Z","updated_at":"2019-07-14T02:00:31Z","author_association":"MEMBER","body":"@kezhenxu94 @JaredTan95 Please review the codes.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511166787/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167098","html_url":"https://github.com/apache/skywalking/issues/3069#issuecomment-511167098","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3069","id":511167098,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2NzA5OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:08:35Z","updated_at":"2019-07-14T02:08:35Z","author_association":"MEMBER","body":"> When the node is set to Receiver mode, #registerRemote is not invoker and the ZookeeperCoordinator#queryRemoteNodes NacosCoordinator#queryRemoteNodes ConsulCoordinator#queryRemoteNodes return empty list,at this point MetricsRemoteWorker will not work properly, right?\r\n\r\nThis is a bug for those coordinators. We add this in k8s coordinator, but miss to check others. `registerRemote` should not be called in `receiver` mode, that is correct, but the queryList should still work.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167104","html_url":"https://github.com/apache/skywalking/issues/3069#issuecomment-511167104","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3069","id":511167104,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2NzEwNA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:08:44Z","updated_at":"2019-07-14T02:08:44Z","author_association":"MEMBER","body":"FYI @peng-yongsheng ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167130","html_url":"https://github.com/apache/skywalking/issues/3069#issuecomment-511167130","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3069","id":511167130,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2NzEzMA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:09:28Z","updated_at":"2019-07-14T02:09:28Z","author_association":"MEMBER","body":"@arugal Are you going to fix this?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167577","html_url":"https://github.com/apache/skywalking/issues/3069#issuecomment-511167577","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3069","id":511167577,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2NzU3Nw==","user":{"login":"rainbend","id":26432832,"node_id":"MDQ6VXNlcjI2NDMyODMy","avatar_url":"https://avatars.githubusercontent.com/u/26432832?v=4","gravatar_id":"","url":"https://api.github.com/users/rainbend","html_url":"https://github.com/rainbend","followers_url":"https://api.github.com/users/rainbend/followers","following_url":"https://api.github.com/users/rainbend/following{/other_user}","gists_url":"https://api.github.com/users/rainbend/gists{/gist_id}","starred_url":"https://api.github.com/users/rainbend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rainbend/subscriptions","organizations_url":"https://api.github.com/users/rainbend/orgs","repos_url":"https://api.github.com/users/rainbend/repos","events_url":"https://api.github.com/users/rainbend/events{/privacy}","received_events_url":"https://api.github.com/users/rainbend/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:20:00Z","updated_at":"2019-07-14T02:20:00Z","author_association":"MEMBER","body":"Now I have an idea, all schemas register nodes, add a ```role``` attribute to ```RemoteInstance``` to mark it, and finally filter it in ```RemoteClientManager``` and ```DataTTLKeeperTimer```\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167958","html_url":"https://github.com/apache/skywalking/issues/3069#issuecomment-511167958","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3069","id":511167958,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2Nzk1OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:30:56Z","updated_at":"2019-07-14T02:30:56Z","author_association":"MEMBER","body":"Check how `ClusterModuleKubernetesProvider` did. You will notice, we don't need to change that :)","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511167958/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511168201","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511168201","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511168201,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2ODIwMQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:36:48Z","updated_at":"2019-07-14T03:03:16Z","author_association":"CONTRIBUTOR","body":"```\r\n# JMH version: 1.21\r\n# VM version: JDK 11.0.3, Java HotSpot(TM) 64-Bit Server VM, 11.0.3+12-LTS\r\n# VM invoker: D:\\JDK\\jdk-11.x\\bin\\java.exe\r\n# VM options: -Dclassworlds.conf=D:\\maven\\maven\\bin\\..\\bin\\m2.conf -Dmaven.home=D:\\maven\\maven\\bin\\.. -Dlibrary.jansi.path=D:\\maven\\maven\\bin\\..\\lib\\jansi-native -Dmaven.multiModuleProjectDirectory=E:\\GitHub\\dev4skywalking1 -Djava.library.path=D:/java/nativelib\r\n# Warmup: 5 iterations, 1 s each\r\n# Measurement: 10 iterations, 1 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: org.apache.skywalking.apm.agent.core.context.ThreadLocalGetXTimeBenchmark.getThreadLocalFourTime\r\n\r\nthe test T480 ComputerInfo [\r\nCPU=8 cpu\tIntel Core(TM) i5-8250U CPU @ 1.60GHz\t1800MHz\r\nSYS\ttotal:31 GB\tfree:16 GB\tused:15 GB\r\nOS=Windows 8.1\tamd64\t6.3\t\r\n]\r\n\r\nBenchmark                                             Mode  Cnt       Score       Error   Units  Score/min\r\nThreadLocalGetXTimeBenchmark.getThreadLocalFourTime  thrpt   10   62499.613 ±   394.732  ops/ms      1.000\r\nThreadLocalGetXTimeBenchmark.getThreadLocalOnce1     thrpt   10  261239.953 ±  1319.958  ops/ms      4.180\r\nThreadLocalGetXTimeBenchmark.getThreadLocalTwice     thrpt   10  160433.026 ± 17864.714  ops/ms      2.567\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511168201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511168430","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511168430","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511168430,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE2ODQzMA==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T02:43:14Z","updated_at":"2019-07-14T03:03:29Z","author_association":"CONTRIBUTOR","body":"for java8:\r\n```\r\nmvn exec:java -Dexec.mainClass=\"org.openjdk.jmh.Main\" -Dexec.args=\"org.apache.skywalking.apm.agent.core.context.ThreadLocalGetXTimeBenchmark -w 1 -r 1   -wi 5 -i 10 -f 0 -tu ms\"  -Dexec.classpathScope=test   -f apm-sniffer/apm-agent-core/pom.xml\r\n\r\n# VM version: JDK 1.8.0_211, Java HotSpot(TM) 64-Bit Server VM, 25.211-b12\r\n# VM invoker: D:\\JDK\\jdk1.8.0X64\\jre\\bin\\java.exe\r\n# VM options: -Dclassworlds.conf=D:\\maven\\maven\\bin\\..\\bin\\m2.conf -Dmaven.home=D:\\maven\\maven\\bin\\.. -Dlibrary.jansi.path=D:\\maven\\maven\\bin\\..\\lib\\jansi-native -Dmaven.multiModuleProjectDirectory=E:\\GitHub\\dev4skywalking1 -Djava.library.path=D:/java/nativelib\r\n# Warmup: 5 iterations, 1 s each\r\n# Measurement: 10 iterations, 1 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n# Benchmark: org.apache.skywalking.apm.agent.core.context.ThreadLocalGetXTimeBenchmark.getThreadLocalOnce1\r\n\r\nthe test T480 ComputerInfo [\r\nCPU=8 cpu\tIntel Core(TM) i5-8250U CPU @ 1.60GHz\t1800MHz\r\nSYS\ttotal:31 GB\tfree:16 GB\tused:15 GB\r\nOS=Windows 8.1\tamd64\t6.3\t\r\n]\r\n\r\nBenchmark                                             Mode  Cnt       Score      Error   Units  Score/min\r\nThreadLocalGetXTimeBenchmark.getThreadLocalFourTime  thrpt   10   74873.499 ±  787.621  ops/ms      1.000\r\nThreadLocalGetXTimeBenchmark.getThreadLocalOnce1     thrpt   10  330795.756 ± 1954.710  ops/ms      4.418\r\nThreadLocalGetXTimeBenchmark.getThreadLocalTwice     thrpt   10  191911.226 ± 1084.482  ops/ms      2.563\r\n```","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511168430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511170161","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511170161","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511170161,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE3MDE2MQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T03:31:32Z","updated_at":"2019-07-14T03:31:32Z","author_association":"CONTRIBUTOR","body":"Should we change ContextManager.get from \"private\" to \"default\", so I change commit JMH Benchmark for ContextManager\r\n```\r\nmvn exec:java -Dexec.mainClass=\"org.openjdk.jmh.Main\" -Dexec.args=\"org.apache.skywalking.apm.agent.core.context.ContextManageStopSpanBenchmark -w 1 -r 1   -wi 5 -i 10 -f 0 -tu ms\"  -Dexec.classpathScope=test   -f apm-sniffer/apm-agent-core/pom.xml\r\n\r\n# VM version: JDK 1.8.0_211, Java HotSpot(TM) 64-Bit Server VM, 25.211-b12\r\n# VM invoker: D:\\JDK\\jdk1.8.0X64\\jre\\bin\\java.exe\r\n# VM options: -Dclassworlds.conf=D:\\maven\\maven\\bin\\..\\bin\\m2.conf -Dmaven.home=D:\\maven\\maven\\bin\\.. -Dlibrary.jansi.path=D:\\maven\\maven\\bin\\..\\lib\\jansi-native -Dmaven.multiModuleProjectDirectory=E:\\GitHub\\dev4skywalking1 -Djava.library.path=D:/java/nativelib\r\n# Warmup: 5 iterations, 1 s each\r\n# Measurement: 10 iterations, 1 s each\r\n# Timeout: 10 min per iteration\r\n# Threads: 1 thread, will synchronize iterations\r\n# Benchmark mode: Throughput, ops/time\r\n\r\nthe test T480 ComputerInfo [\r\nCPU=8 cpu\tIntel Core(TM) i5-8250U CPU @ 1.60GHz\t1800MHz\r\nSYS\ttotal:31 GB\tfree:16 GB\tused:15 GB\r\nOS=Windows 8.1\tamd64\t6.3\t\r\n]\r\n\r\nBenchmark                                            Mode  Cnt      Score     Error   Units  Score/min\r\nContextManageStopSpanBenchmark.getThreadLocalFour   thrpt   10  24136.954 ± 392.072  ops/ms      1.000\r\nContextManageStopSpanBenchmark.getThreadLocalOnce1  thrpt   10  27836.886 ± 170.766  ops/ms      1.153\r\nContextManageStopSpanBenchmark.getThreadLocalTwice  thrpt   10  26757.700 ± 349.324  ops/ms      1.109\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511170161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511170686","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511170686","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511170686,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE3MDY4Ng==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T03:45:58Z","updated_at":"2019-07-14T03:45:58Z","author_association":"MEMBER","body":"Fix CI please.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511170686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511172365","html_url":"https://github.com/apache/skywalking/issues/3069#issuecomment-511172365","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3069","id":511172365,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE3MjM2NQ==","user":{"login":"rainbend","id":26432832,"node_id":"MDQ6VXNlcjI2NDMyODMy","avatar_url":"https://avatars.githubusercontent.com/u/26432832?v=4","gravatar_id":"","url":"https://api.github.com/users/rainbend","html_url":"https://github.com/rainbend","followers_url":"https://api.github.com/users/rainbend/followers","following_url":"https://api.github.com/users/rainbend/following{/other_user}","gists_url":"https://api.github.com/users/rainbend/gists{/gist_id}","starred_url":"https://api.github.com/users/rainbend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rainbend/subscriptions","organizations_url":"https://api.github.com/users/rainbend/orgs","repos_url":"https://api.github.com/users/rainbend/repos","events_url":"https://api.github.com/users/rainbend/events{/privacy}","received_events_url":"https://api.github.com/users/rainbend/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T04:30:39Z","updated_at":"2019-07-14T04:30:39Z","author_association":"MEMBER","body":"I will fix this","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511172365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511187066","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511187066","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511187066,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE4NzA2Ng==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T09:22:06Z","updated_at":"2019-07-14T09:22:06Z","author_association":"MEMBER","body":"/run e2e","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511187066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511187078","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511187078","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511187078,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE4NzA3OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T09:22:12Z","updated_at":"2019-07-14T09:22:12Z","author_association":"MEMBER","body":"/run ci","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511187078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511188979","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511188979","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511188979,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE4ODk3OQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T09:54:20Z","updated_at":"2019-07-14T09:54:20Z","author_association":"MEMBER","body":"/run e2e","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511188979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511193466","html_url":"https://github.com/apache/skywalking/issues/3071#issuecomment-511193466","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3071","id":511193466,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE5MzQ2Ng==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T11:08:45Z","updated_at":"2019-07-14T11:08:45Z","author_association":"MEMBER","body":"This threadlocal wouldn't cause leak. Because it is removed if thread is gone, and also always necessary when trace is there.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511193466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511194668","html_url":"https://github.com/apache/skywalking/issues/3071#issuecomment-511194668","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3071","id":511194668,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTE5NDY2OA==","user":{"login":"kezhenxu94","id":15965696,"node_id":"MDQ6VXNlcjE1OTY1Njk2","avatar_url":"https://avatars.githubusercontent.com/u/15965696?v=4","gravatar_id":"","url":"https://api.github.com/users/kezhenxu94","html_url":"https://github.com/kezhenxu94","followers_url":"https://api.github.com/users/kezhenxu94/followers","following_url":"https://api.github.com/users/kezhenxu94/following{/other_user}","gists_url":"https://api.github.com/users/kezhenxu94/gists{/gist_id}","starred_url":"https://api.github.com/users/kezhenxu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kezhenxu94/subscriptions","organizations_url":"https://api.github.com/users/kezhenxu94/orgs","repos_url":"https://api.github.com/users/kezhenxu94/repos","events_url":"https://api.github.com/users/kezhenxu94/events{/privacy}","received_events_url":"https://api.github.com/users/kezhenxu94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T11:26:30Z","updated_at":"2019-07-14T11:26:30Z","author_association":"MEMBER","body":"@dmsolr FYI, here is what the [JavaDoc (Jdk 1.7)](https://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html) says\r\n> Each thread holds an implicit reference to its copy of a thread-local variable as long as the thread is alive and the ThreadLocal instance is accessible; after a thread goes away, all of its copies of thread-local instances are subject to garbage collection (unless other references to these copies exist).","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511194668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511201116","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511201116","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511201116,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwMTExNg==","user":{"login":"kezhenxu94","id":15965696,"node_id":"MDQ6VXNlcjE1OTY1Njk2","avatar_url":"https://avatars.githubusercontent.com/u/15965696?v=4","gravatar_id":"","url":"https://api.github.com/users/kezhenxu94","html_url":"https://github.com/kezhenxu94","followers_url":"https://api.github.com/users/kezhenxu94/followers","following_url":"https://api.github.com/users/kezhenxu94/following{/other_user}","gists_url":"https://api.github.com/users/kezhenxu94/gists{/gist_id}","starred_url":"https://api.github.com/users/kezhenxu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kezhenxu94/subscriptions","organizations_url":"https://api.github.com/users/kezhenxu94/orgs","repos_url":"https://api.github.com/users/kezhenxu94/repos","events_url":"https://api.github.com/users/kezhenxu94/events{/privacy}","received_events_url":"https://api.github.com/users/kezhenxu94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T13:05:35Z","updated_at":"2019-07-14T13:05:35Z","author_association":"MEMBER","body":"/run e2e","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511201116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511202873","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511202873","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511202873,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwMjg3Mw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T13:27:47Z","updated_at":"2019-07-14T13:27:47Z","author_association":"MEMBER","body":"Remove `ThreadLocalGetXTimeBenchmark` in change files, and post them here.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511202873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205068","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511205068","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511205068,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNTA2OA==","user":{"login":"kezhenxu94","id":15965696,"node_id":"MDQ6VXNlcjE1OTY1Njk2","avatar_url":"https://avatars.githubusercontent.com/u/15965696?v=4","gravatar_id":"","url":"https://api.github.com/users/kezhenxu94","html_url":"https://github.com/kezhenxu94","followers_url":"https://api.github.com/users/kezhenxu94/followers","following_url":"https://api.github.com/users/kezhenxu94/following{/other_user}","gists_url":"https://api.github.com/users/kezhenxu94/gists{/gist_id}","starred_url":"https://api.github.com/users/kezhenxu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kezhenxu94/subscriptions","organizations_url":"https://api.github.com/users/kezhenxu94/orgs","repos_url":"https://api.github.com/users/kezhenxu94/repos","events_url":"https://api.github.com/users/kezhenxu94/events{/privacy}","received_events_url":"https://api.github.com/users/kezhenxu94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T13:57:13Z","updated_at":"2019-07-14T13:57:13Z","author_association":"MEMBER","body":"/run ci","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205263","html_url":"https://github.com/apache/skywalking/pull/2644#issuecomment-511205263","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2644","id":511205263,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNTI2Mw==","user":{"login":"wayilau","id":3197838,"node_id":"MDQ6VXNlcjMxOTc4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/3197838?v=4","gravatar_id":"","url":"https://api.github.com/users/wayilau","html_url":"https://github.com/wayilau","followers_url":"https://api.github.com/users/wayilau/followers","following_url":"https://api.github.com/users/wayilau/following{/other_user}","gists_url":"https://api.github.com/users/wayilau/gists{/gist_id}","starred_url":"https://api.github.com/users/wayilau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wayilau/subscriptions","organizations_url":"https://api.github.com/users/wayilau/orgs","repos_url":"https://api.github.com/users/wayilau/repos","events_url":"https://api.github.com/users/wayilau/events{/privacy}","received_events_url":"https://api.github.com/users/wayilau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T13:59:35Z","updated_at":"2019-07-14T13:59:35Z","author_association":"MEMBER","body":"> Still failing.\r\n\r\nI will check why it is always fails but fine on local env.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205721","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511205721","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511205721,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNTcyMQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T14:05:49Z","updated_at":"2019-07-14T14:27:32Z","author_association":"CONTRIBUTOR","body":"the ThreadLocalGetXTimeBenchmark  code:\r\n```\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport org.openjdk.jmh.annotations.Benchmark;\r\nimport org.openjdk.jmh.annotations.BenchmarkMode;\r\nimport org.openjdk.jmh.annotations.Fork;\r\nimport org.openjdk.jmh.annotations.Measurement;\r\nimport org.openjdk.jmh.annotations.Mode;\r\nimport org.openjdk.jmh.annotations.OutputTimeUnit;\r\nimport org.openjdk.jmh.annotations.Scope;\r\nimport org.openjdk.jmh.annotations.State;\r\nimport org.openjdk.jmh.annotations.Warmup;\r\nimport org.openjdk.jmh.runner.Runner;\r\nimport org.openjdk.jmh.runner.RunnerException;\r\nimport org.openjdk.jmh.runner.options.Options;\r\nimport org.openjdk.jmh.runner.options.OptionsBuilder;\r\nimport org.openjdk.jmh.runner.options.TimeValue;\r\n\r\n@Fork(5)\r\n@Warmup(iterations = 5,time = 1,timeUnit = TimeUnit.SECONDS)\r\n@Measurement(iterations = 10,time = 1,timeUnit = TimeUnit.SECONDS)\r\n@BenchmarkMode(Mode.Throughput)\r\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n@State(Scope.Benchmark)\r\npublic class ThreadLocalGetXTimeBenchmark {\r\n\r\n    private static class Bean {\r\n        private String name = \"ABC\";\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n\r\n        public String stop(Bean bean) {\r\n            return bean.getName();\r\n        }\r\n    }\r\n    private static final ThreadLocal<Bean> CONTEXT = new ThreadLocal<Bean>() {\r\n\r\n        @Override\r\n        protected Bean initialValue() {\r\n            return new Bean();\r\n        }\r\n\r\n    };\r\n\r\n    protected String stop(Bean bean) {\r\n        return bean.stop(bean);\r\n    }\r\n\r\n\r\n    @Benchmark\r\n    public String getThreadLocalTwice() {\r\n        return get().stop(get());\r\n    }\r\n\r\n    @Benchmark\r\n    public String getThreadLocalFourTime() {\r\n        get();\r\n        get();\r\n        get();\r\n        get();\r\n        return get().stop(get());\r\n    }\r\n\r\n    @Benchmark\r\n    public String getThreadLocalOnce1() {\r\n        final Bean bean = get();\r\n        return bean.stop(bean);\r\n    }\r\n\r\n//@Benchmark\r\n    public String getThreadLocalOnce2() {\r\n        return stop(get());\r\n    }\r\n\r\n\r\n    protected Bean get() {\r\n        return CONTEXT.get();\r\n    }\r\n\r\n    public static void main(String[] args) throws RunnerException {\r\n        Options opt = new OptionsBuilder().include(ThreadLocalGetXTimeBenchmark.class.getSimpleName())\r\n            .mode(Mode.Throughput)\r\n            .warmupIterations(8).measurementIterations(8).forks(0)\r\n            .measurementTime(TimeValue.seconds(1)).warmupTime(TimeValue.seconds(1))\r\n            .threads(4)\r\n            .timeUnit(TimeUnit.MILLISECONDS)\r\n            .build();\r\n        new Runner(opt).run();\r\n    }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205887","html_url":"https://github.com/apache/skywalking/pull/2409#issuecomment-511205887","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2409","id":511205887,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNTg4Nw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T14:08:13Z","updated_at":"2019-07-14T14:08:13Z","author_association":"MEMBER","body":"Relaced by https://github.com/apache/skywalking/issues/3072","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205893","html_url":"https://github.com/apache/skywalking/pull/2409#issuecomment-511205893","issue_url":"https://api.github.com/repos/apache/skywalking/issues/2409","id":511205893,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNTg5Mw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T14:08:17Z","updated_at":"2019-07-14T14:08:17Z","author_association":"MEMBER","body":"- ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511205893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511206170","html_url":"https://github.com/apache/skywalking/issues/3072#issuecomment-511206170","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3072","id":511206170,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNjE3MA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T14:11:51Z","updated_at":"2019-07-14T14:11:51Z","author_association":"MEMBER","body":"Doc link updated. I posted the wrong link before.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511206170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511207714","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511207714","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511207714,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIwNzcxNA==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T14:31:33Z","updated_at":"2019-07-14T14:31:33Z","author_association":"CONTRIBUTOR","body":"and ContextManageStopSpanBenchmark code:\r\n```\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport org.apache.skywalking.apm.agent.core.context.trace.AbstractSpan;\r\nimport org.openjdk.jmh.annotations.Benchmark;\r\nimport org.openjdk.jmh.annotations.BenchmarkMode;\r\nimport org.openjdk.jmh.annotations.Fork;\r\nimport org.openjdk.jmh.annotations.Measurement;\r\nimport org.openjdk.jmh.annotations.Mode;\r\nimport org.openjdk.jmh.annotations.OutputTimeUnit;\r\nimport org.openjdk.jmh.annotations.Scope;\r\nimport org.openjdk.jmh.annotations.State;\r\nimport org.openjdk.jmh.annotations.Warmup;\r\nimport org.openjdk.jmh.runner.Runner;\r\nimport org.openjdk.jmh.runner.RunnerException;\r\nimport org.openjdk.jmh.runner.options.Options;\r\nimport org.openjdk.jmh.runner.options.OptionsBuilder;\r\nimport org.openjdk.jmh.runner.options.TimeValue;\r\n\r\n@Fork(0)\r\n@Warmup(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@Measurement(iterations = 10, time = 1, timeUnit = TimeUnit.SECONDS)\r\n@BenchmarkMode(Mode.Throughput)\r\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n@State(Scope.Benchmark)\r\npublic class ContextManageStopSpanBenchmark {\r\n\r\n    // private static final AbstractSpan TEST_SPAN =\r\n    // ContextManager.createLocalSpan(\"test\");\r\n\r\n    @Benchmark\r\n    public Object getThreadLocalOnce1() {\r\n        final AbstractSpan span = ContextManager.createLocalSpan(\"test\");\r\n        ContextManager.stopSpan(span);\r\n        return span;\r\n    }\r\n\r\n    @Benchmark\r\n    public Object getThreadLocalTwice() {\r\n        final AbstractSpan span = ContextManager.createLocalSpan(\"test\");\r\n        ContextManager.get();\r\n         ContextManager.stopSpan(span);\r\n        return span;\r\n    }\r\n    \r\n    @Benchmark\r\n    public Object getThreadLocalFour() {\r\n        final AbstractSpan span = ContextManager.createLocalSpan(\"test\");\r\n        ContextManager.get();\r\n        ContextManager.get();\r\n        ContextManager.get();\r\n        ContextManager.stopSpan(span);\r\n        return span;\r\n    }\r\n\r\n    public static void main(String[] args) throws RunnerException {\r\n        Options opt = new OptionsBuilder().include(ContextManageStopSpanBenchmark.class.getSimpleName())\r\n                .mode(Mode.Throughput).warmupIterations(8).measurementIterations(8).forks(3)\r\n                .measurementTime(TimeValue.seconds(1)).warmupTime(TimeValue.seconds(1)).threads(4)\r\n                .timeUnit(TimeUnit.MILLISECONDS).build();\r\n        new Runner(opt).run();\r\n    }\r\n}\r\n```\r\nrequired ContextManager.get from \"private\" to \"default\"\r\nI done for the pull, change code as you wish:)","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511207714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511210662","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511210662","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511210662,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxMDY2Mg==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T15:10:30Z","updated_at":"2019-07-14T15:10:30Z","author_association":"MEMBER","body":"/run e2e","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511210662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511210923","html_url":"https://github.com/apache/skywalking/pull/3016#issuecomment-511210923","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3016","id":511210923,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxMDkyMw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T15:13:45Z","updated_at":"2019-07-14T15:13:45Z","author_association":"MEMBER","body":"FYI @hanahmily @ascrutae @peng-yongsheng @JaredTan95 ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511210923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511212393","html_url":"https://github.com/apache/skywalking/pull/3075#issuecomment-511212393","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3075","id":511212393,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxMjM5Mw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T15:33:09Z","updated_at":"2019-07-14T15:33:09Z","author_association":"MEMBER","body":"> Since we are using lombok, to avoid such problem in the future, I'd recommend using @slf4j annotation in future PRs when possible.\r\n\r\n@kezhenxu94 You could change this in OAP side, I am just saying, the check may be still necessary.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511212393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511212408","html_url":"https://github.com/apache/skywalking/pull/3075#issuecomment-511212408","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3075","id":511212408,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxMjQwOA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T15:33:22Z","updated_at":"2019-07-14T15:33:22Z","author_association":"MEMBER","body":"Are we going to merge this first?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511212408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511212814","html_url":"https://github.com/apache/skywalking/pull/3075#issuecomment-511212814","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3075","id":511212814,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxMjgxNA==","user":{"login":"kezhenxu94","id":15965696,"node_id":"MDQ6VXNlcjE1OTY1Njk2","avatar_url":"https://avatars.githubusercontent.com/u/15965696?v=4","gravatar_id":"","url":"https://api.github.com/users/kezhenxu94","html_url":"https://github.com/kezhenxu94","followers_url":"https://api.github.com/users/kezhenxu94/followers","following_url":"https://api.github.com/users/kezhenxu94/following{/other_user}","gists_url":"https://api.github.com/users/kezhenxu94/gists{/gist_id}","starred_url":"https://api.github.com/users/kezhenxu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kezhenxu94/subscriptions","organizations_url":"https://api.github.com/users/kezhenxu94/orgs","repos_url":"https://api.github.com/users/kezhenxu94/repos","events_url":"https://api.github.com/users/kezhenxu94/events{/privacy}","received_events_url":"https://api.github.com/users/kezhenxu94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T15:37:58Z","updated_at":"2019-07-14T15:38:23Z","author_association":"MEMBER","body":"> Are we going to merge this first?\r\n\r\nI've just fixed those in agent side, and can be merged first now.\r\n\r\nAs for the check in CI, let me update the script and work on it in another PR","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511212814/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511215893","html_url":"https://github.com/apache/skywalking/pull/3075#issuecomment-511215893","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3075","id":511215893,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxNTg5Mw==","user":{"login":"kezhenxu94","id":15965696,"node_id":"MDQ6VXNlcjE1OTY1Njk2","avatar_url":"https://avatars.githubusercontent.com/u/15965696?v=4","gravatar_id":"","url":"https://api.github.com/users/kezhenxu94","html_url":"https://github.com/kezhenxu94","followers_url":"https://api.github.com/users/kezhenxu94/followers","following_url":"https://api.github.com/users/kezhenxu94/following{/other_user}","gists_url":"https://api.github.com/users/kezhenxu94/gists{/gist_id}","starred_url":"https://api.github.com/users/kezhenxu94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kezhenxu94/subscriptions","organizations_url":"https://api.github.com/users/kezhenxu94/orgs","repos_url":"https://api.github.com/users/kezhenxu94/repos","events_url":"https://api.github.com/users/kezhenxu94/events{/privacy}","received_events_url":"https://api.github.com/users/kezhenxu94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T16:18:08Z","updated_at":"2019-07-14T16:18:08Z","author_association":"MEMBER","body":"/run e2e","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511215893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511253485","html_url":"https://github.com/apache/skywalking/issues/3035#issuecomment-511253485","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3035","id":511253485,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1MzQ4NQ==","user":{"login":"candyleer","id":11530760,"node_id":"MDQ6VXNlcjExNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/11530760?v=4","gravatar_id":"","url":"https://api.github.com/users/candyleer","html_url":"https://github.com/candyleer","followers_url":"https://api.github.com/users/candyleer/followers","following_url":"https://api.github.com/users/candyleer/following{/other_user}","gists_url":"https://api.github.com/users/candyleer/gists{/gist_id}","starred_url":"https://api.github.com/users/candyleer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/candyleer/subscriptions","organizations_url":"https://api.github.com/users/candyleer/orgs","repos_url":"https://api.github.com/users/candyleer/repos","events_url":"https://api.github.com/users/candyleer/events{/privacy}","received_events_url":"https://api.github.com/users/candyleer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T01:37:41Z","updated_at":"2019-07-15T01:40:30Z","author_association":"MEMBER","body":"@wu-sheng I think the best way is do not implement `EnhancedInstance`(cause spring has some dependcy for interface,if we want make the program work as same as without skywalking agent), we can cache the method and path in the `static map cache`,and provide `do not implement EnhancedInstance` mechanism can solve some other problem, such as   `dubbo-conflict-plugin`(which I think it has some side effect if dubbo change the patch class we do)\r\n so I am prepare working on `do not implement EnhancedInstance` way for springmvc first","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511253485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511255548","html_url":"https://github.com/apache/skywalking/issues/3035#issuecomment-511255548","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3035","id":511255548,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NTU0OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T01:58:38Z","updated_at":"2019-07-15T01:58:38Z","author_association":"MEMBER","body":"@candyleer In the old day(not in SkyWalking), I check about how to do Spring Controller plugin, the reason of `EnhancedInstance` is that there is no place to put mapping path cache, so most likely, you have to maintain a static map to do so, which cause the performance concern in big system(10k+ Controller methods at least)\r\n\r\nI am totally aware this kind of OP has risk, but, actually, if we consider this risk, we can't do anything at any class because any class could be added in Spring context by the end user, we don't know.\r\n\r\nThis is why we added Spring patch at first place, could you try to enhance it rather than provide a plugin or remove this field? I am going to open a new issue to discuss this.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511255548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511255822","html_url":"https://github.com/apache/skywalking/issues/3035#issuecomment-511255822","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3035","id":511255822,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NTgyMg==","user":{"login":"candyleer","id":11530760,"node_id":"MDQ6VXNlcjExNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/11530760?v=4","gravatar_id":"","url":"https://api.github.com/users/candyleer","html_url":"https://github.com/candyleer","followers_url":"https://api.github.com/users/candyleer/followers","following_url":"https://api.github.com/users/candyleer/following{/other_user}","gists_url":"https://api.github.com/users/candyleer/gists{/gist_id}","starred_url":"https://api.github.com/users/candyleer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/candyleer/subscriptions","organizations_url":"https://api.github.com/users/candyleer/orgs","repos_url":"https://api.github.com/users/candyleer/repos","events_url":"https://api.github.com/users/candyleer/events{/privacy}","received_events_url":"https://api.github.com/users/candyleer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:01:20Z","updated_at":"2019-07-15T02:01:20Z","author_association":"MEMBER","body":"OK, I know what you mean.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511255822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256019","html_url":"https://github.com/apache/skywalking/issues/3076#issuecomment-511256019","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3076","id":511256019,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NjAxOQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:03:30Z","updated_at":"2019-07-15T02:03:30Z","author_association":"MEMBER","body":"@candyleer Is it OK I tag this as an enhance requirement to Spring patch?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256233","html_url":"https://github.com/apache/skywalking/issues/3076#issuecomment-511256233","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3076","id":511256233,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NjIzMw==","user":{"login":"candyleer","id":11530760,"node_id":"MDQ6VXNlcjExNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/11530760?v=4","gravatar_id":"","url":"https://api.github.com/users/candyleer","html_url":"https://github.com/candyleer","followers_url":"https://api.github.com/users/candyleer/followers","following_url":"https://api.github.com/users/candyleer/following{/other_user}","gists_url":"https://api.github.com/users/candyleer/gists{/gist_id}","starred_url":"https://api.github.com/users/candyleer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/candyleer/subscriptions","organizations_url":"https://api.github.com/users/candyleer/orgs","repos_url":"https://api.github.com/users/candyleer/repos","events_url":"https://api.github.com/users/candyleer/events{/privacy}","received_events_url":"https://api.github.com/users/candyleer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:05:32Z","updated_at":"2019-07-15T02:05:32Z","author_association":"MEMBER","body":"ok","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256529","html_url":"https://github.com/apache/skywalking/pull/3048#issuecomment-511256529","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3048","id":511256529,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NjUyOQ==","user":{"login":"coki230","id":6261764,"node_id":"MDQ6VXNlcjYyNjE3NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/6261764?v=4","gravatar_id":"","url":"https://api.github.com/users/coki230","html_url":"https://github.com/coki230","followers_url":"https://api.github.com/users/coki230/followers","following_url":"https://api.github.com/users/coki230/following{/other_user}","gists_url":"https://api.github.com/users/coki230/gists{/gist_id}","starred_url":"https://api.github.com/users/coki230/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coki230/subscriptions","organizations_url":"https://api.github.com/users/coki230/orgs","repos_url":"https://api.github.com/users/coki230/repos","events_url":"https://api.github.com/users/coki230/events{/privacy}","received_events_url":"https://api.github.com/users/coki230/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:08:12Z","updated_at":"2019-07-15T02:08:12Z","author_association":"CONTRIBUTOR","body":"> > @peng-yongsheng it have manual fulsh in the code which is in the class of \"BatchProcessEsDAO\" line of 72.\r\n> > so in my opinion, it didn't have to set Flush Interval.\r\n> > The lock will remain locked until restart oap server. because the auto flush will first lock the BulkProcessor add lock, than it will wait another lock which is waiting all the time.\r\n> \r\n> @coki230 I guess the real reason is yours Elasticsearch servers are hung up by the automatically data delete. This is a design flaw before 6.2.0, it has been fixed. When Elasticsearch servers are very busy to delete history data, there are no more idle resources to process the data from bulk processors. then OAP servers began to scramble for bulk resources. OAP servers that are not scrambling for resources start locking.\r\n> \r\n> **Suggest upgrade to 6.2.0**\r\n> Some settings for the Elasticsearch server to improving write performance, take a look at this document. [ES-Server-FAQ](https://github.com/apache/skywalking/blob/master/docs/en/FAQ/ES-Server-FAQ.md)\r\n\r\nthe presentation is like  Elasticsearch servers are hung up, but i update the SW version of 6.2.0, i use new feature of delete index to delete data. and i cann't get any error info in my oap server when it cann't submit bulk processors. but there might be my ES has poor performance so the ES hung up by auto flush or delete data. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256726","html_url":"https://github.com/apache/skywalking/issues/3076#issuecomment-511256726","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3076","id":511256726,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NjcyNg==","user":{"login":"candyleer","id":11530760,"node_id":"MDQ6VXNlcjExNTMwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/11530760?v=4","gravatar_id":"","url":"https://api.github.com/users/candyleer","html_url":"https://github.com/candyleer","followers_url":"https://api.github.com/users/candyleer/followers","following_url":"https://api.github.com/users/candyleer/following{/other_user}","gists_url":"https://api.github.com/users/candyleer/gists{/gist_id}","starred_url":"https://api.github.com/users/candyleer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/candyleer/subscriptions","organizations_url":"https://api.github.com/users/candyleer/orgs","repos_url":"https://api.github.com/users/candyleer/repos","events_url":"https://api.github.com/users/candyleer/events{/privacy}","received_events_url":"https://api.github.com/users/candyleer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:10:32Z","updated_at":"2019-07-15T02:10:32Z","author_association":"MEMBER","body":"I think patch is ok, but we may have many unpredictable cases, \r\nSo my first thought is to change the class structure less may be safer.\r\nBut I ignored the caching problem of very large projects. ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511256726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511257111","html_url":"https://github.com/apache/skywalking/issues/3076#issuecomment-511257111","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3076","id":511257111,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NzExMQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:14:24Z","updated_at":"2019-07-15T02:14:24Z","author_association":"MEMBER","body":"> I think patch is ok, but we may have many unpredictable cases,\r\nSo my first thought is to change the class structure less may be safer.\r\nBut I ignored the caching problem of very large projects.\r\n\r\nIt is OK. I was thinking about that too, but turn out it didn't work. So when you asked about that, I just jumped to the conclusion.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511257111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511257546","html_url":"https://github.com/apache/skywalking/pull/3073#issuecomment-511257546","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3073","id":511257546,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1NzU0Ng==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:18:26Z","updated_at":"2019-07-15T02:18:26Z","author_association":"CONTRIBUTOR","body":"1. set breakpoint before call checkFinishConditions and inside checkFinishConditions, then try in debug mode,asyncStop in other thread(pause before checkFinishConditions ), let stopSpan pop make activeSpanStack to empty first,...\r\n2. It's hard reproduct without codeline debug\r\n3. I'll do the demo if have the time\r\n4. In my point of view: The method(checkFinishConditions) code do not change program(object) state,the asyncFinishLock is useless if it's not a problem.\r\n===>  理论上一个方法内部没改状态且程序又依赖于其返回值，方法内部加锁是不正确的使用方式：因为多线程在同时请求checkFinishConditions时就会出问题\r\n如有不对，请指:)","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511257546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511259449","html_url":"https://github.com/apache/skywalking/pull/3073#issuecomment-511259449","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3073","id":511259449,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI1OTQ0OQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:36:56Z","updated_at":"2019-07-15T02:36:56Z","author_association":"MEMBER","body":"I think I get your point of issue, but if you are talking about `#asyncStop` and `#stopSpan` called concurrently, then your solution is still not working, due to the same reason **no status change**.\r\n\r\nI think this problem only could be solved by adding a field `#running` in `TracingContext`, default true in the constructor. check `running==true` before finish condition check, set it to false if check passed. Then add your change, move finish into it.\r\n```java\r\n// rename checkFinishConditions\r\nprivate void finish () {\r\n     ... lock\r\n     if (running) {\r\n            if (activeSpanStack.isEmpty() && (!isRunningInAsyncMode || asyncSpanCounter.get() == 0)) {\r\n                  running = false;\r\n                  _doFinish(); // rename old finish method\r\n            }\r\n    }\r\n   .... unlock\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511259449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511260032","html_url":"https://github.com/apache/skywalking/pull/3048#issuecomment-511260032","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3048","id":511260032,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2MDAzMg==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:41:54Z","updated_at":"2019-07-15T02:41:54Z","author_association":"MEMBER","body":"> the presentation is like Elasticsearch servers are hung up, but i update the SW version of 6.2.0, i use new feature of delete index to delete data. and i cann't get any error info in my oap server when it cann't submit bulk processors. but there might be my ES has poor performance so the ES hung up by auto flush or delete data.\r\n\r\n6.2.0 doesn't delete data from index anymore, it just simply removed the whole indexes. Is your issue solved in 6.2.0? Or something changed?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511260032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511260233","html_url":"https://github.com/apache/skywalking/issues/3077#issuecomment-511260233","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3077","id":511260233,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2MDIzMw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T02:43:51Z","updated_at":"2019-07-15T02:43:51Z","author_association":"MEMBER","body":"Why choose several months ago release? The latest release is 6.2.0\r\nThe exception you posted means your OAP doesn't start up correctly, check bootstrap log first.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511260233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511262001","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511262001","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511262001,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2MjAwMQ==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:01:38Z","updated_at":"2019-07-15T03:01:38Z","author_association":"MEMBER","body":"1. It is my mistake. \r\n2. It is recreated every time. That is why make the test more seem like reality. (I know it out of benchmark)","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511262001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511262997","html_url":"https://github.com/apache/skywalking/issues/3078#issuecomment-511262997","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3078","id":511262997,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2Mjk5Nw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:12:24Z","updated_at":"2019-07-15T03:12:24Z","author_association":"MEMBER","body":"Read changelog, it has been removed.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511262997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511263073","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511263073","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511263073,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2MzA3Mw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:13:26Z","updated_at":"2019-07-15T03:13:26Z","author_association":"MEMBER","body":"> It is recreated every time. That is why make the test more seem like reality. (I know it out of benchmark)\r\n\r\nYou are testing different list size, why is it more real?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511263073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511265761","html_url":"https://github.com/apache/skywalking/issues/3078#issuecomment-511265761","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3078","id":511265761,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2NTc2MQ==","user":{"login":"zolozhang","id":5803259,"node_id":"MDQ6VXNlcjU4MDMyNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5803259?v=4","gravatar_id":"","url":"https://api.github.com/users/zolozhang","html_url":"https://github.com/zolozhang","followers_url":"https://api.github.com/users/zolozhang/followers","following_url":"https://api.github.com/users/zolozhang/following{/other_user}","gists_url":"https://api.github.com/users/zolozhang/gists{/gist_id}","starred_url":"https://api.github.com/users/zolozhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zolozhang/subscriptions","organizations_url":"https://api.github.com/users/zolozhang/orgs","repos_url":"https://api.github.com/users/zolozhang/repos","events_url":"https://api.github.com/users/zolozhang/events{/privacy}","received_events_url":"https://api.github.com/users/zolozhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:39:37Z","updated_at":"2019-07-15T03:39:37Z","author_association":"NONE","body":"Noted. 3ks a lot .","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511265761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511267291","html_url":"https://github.com/apache/skywalking/pull/3073#issuecomment-511267291","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3073","id":511267291,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2NzI5MQ==","user":{"login":"qxo","id":1813709,"node_id":"MDQ6VXNlcjE4MTM3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/1813709?v=4","gravatar_id":"","url":"https://api.github.com/users/qxo","html_url":"https://github.com/qxo","followers_url":"https://api.github.com/users/qxo/followers","following_url":"https://api.github.com/users/qxo/following{/other_user}","gists_url":"https://api.github.com/users/qxo/gists{/gist_id}","starred_url":"https://api.github.com/users/qxo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qxo/subscriptions","organizations_url":"https://api.github.com/users/qxo/orgs","repos_url":"https://api.github.com/users/qxo/repos","events_url":"https://api.github.com/users/qxo/events{/privacy}","received_events_url":"https://api.github.com/users/qxo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:53:19Z","updated_at":"2019-07-15T03:53:19Z","author_association":"CONTRIBUTOR","body":"Yep, my fix still have issue.Please fix it :) \r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511267291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511267448","html_url":"https://github.com/apache/skywalking/pull/3073#issuecomment-511267448","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3073","id":511267448,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI2NzQ0OA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T03:54:55Z","updated_at":"2019-07-15T03:54:55Z","author_association":"MEMBER","body":"> Yep, my fix still have issue.Please fix it :)\r\n\r\nBy you or me? Do you want me to raise to new PR?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511267448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511273975","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511273975","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511273975,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI3Mzk3NQ==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T04:53:38Z","updated_at":"2019-07-15T09:07:42Z","author_association":"MEMBER","body":"1. The max capacity is 40k with default initial capacity. It showed that the ArrayList seem like better in ops. And the reused ListedList is better at GC.\r\n```java\r\n    @Benchmark\r\n    public void testReusedArray() {\r\n        List<SampleData> consumerList = new ArrayList<SampleData>();\r\n        for (int times=0; times<1000; times++) {\r\n            for (int pos = 0; pos < 40000; pos++) {\r\n                consumerList.add(new SampleData());\r\n            }\r\n            consumerList.clear();\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testLinked() {\r\n        for (int times=0; times<1000; times++) {\r\n            List<SampleData> consumerList = new LinkedList<SampleData>();\r\n\r\n            for (int pos = 0; pos < 40000; pos++) {\r\n                consumerList.add(new SampleData());\r\n            }\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testReusedLinked() {\r\n        List<SampleData> consumerList = new LinkedList<SampleData>();\r\n        for (int times=0; times<1000; times++) {\r\n\r\n            for (int pos = 0; pos < 40000; pos++) {\r\n                consumerList.add(new SampleData());\r\n            }\r\n            consumerList.clear();\r\n        }\r\n    }\r\n```\r\n\r\nResult:\r\n```\r\nBenchmark                                                                   Mode  Cnt           Score          Error   Units\r\nLinkedArrayBenchmark.testReusedArray                                       thrpt    5           4.099 ±        0.254   ops/s\r\nLinkedArrayBenchmark.testReusedArray:·gc.alloc.rate                        thrpt    5        3577.493 ±      218.971  MB/sec\r\nLinkedArrayBenchmark.testReusedArray:·gc.alloc.rate.norm                   thrpt    5   960569530.436 ±        0.529    B/op\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Eden_Space               thrpt    5        3579.288 ±      227.314  MB/sec\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Eden_Space.norm          thrpt    5   961045357.161 ±  7069943.693    B/op\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Survivor_Space           thrpt    5           2.369 ±        0.343  MB/sec\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Survivor_Space.norm      thrpt    5      636105.700 ±    95920.377    B/op\r\nLinkedArrayBenchmark.testReusedArray:·gc.count                             thrpt    5        1133.000                 counts\r\nLinkedArrayBenchmark.testReusedArray:·gc.time                              thrpt    5        3254.000                     ms\r\n\r\nLinkedArrayBenchmark.testReusedLinked                                      thrpt    5           1.578 ±        0.068   ops/s\r\nLinkedArrayBenchmark.testReusedLinked:·gc.alloc.rate                       thrpt    5        2753.590 ±      112.877  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked:·gc.alloc.rate.norm                  thrpt    5  1920000059.000 ±        0.001    B/op\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Eden_Space              thrpt    5        2752.897 ±      113.153  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Eden_Space.norm         thrpt    5  1919516672.000 ±   713769.991    B/op\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Survivor_Space          thrpt    5           6.904 ±        0.680  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Survivor_Space.norm     thrpt    5     4813619.200 ±   404066.441    B/op\r\nLinkedArrayBenchmark.testReusedLinked:·gc.count                            thrpt    5         885.000                 counts\r\nLinkedArrayBenchmark.testReusedLinked:·gc.time                             thrpt    5        2996.000                   ms\r\n\r\nLinkedArrayBenchmark.testLinked                                            thrpt    5           2.489 ±        0.077   ops/s\r\nLinkedArrayBenchmark.testLinked:·gc.alloc.rate                             thrpt    5        4346.145 ±      145.163  MB/sec\r\nLinkedArrayBenchmark.testLinked:·gc.alloc.rate.norm                        thrpt    5  1920000016.881 ±        1.402    B/op\r\nLinkedArrayBenchmark.testLinked:·gc.churn.PS_Eden_Space                    thrpt    5        4347.414 ±      163.445  MB/sec\r\nLinkedArrayBenchmark.testLinked:·gc.churn.PS_Eden_Space.norm               thrpt    5  1920547279.983 ± 12167953.775    B/op\r\nLinkedArrayBenchmark.testLinked:·gc.churn.PS_Survivor_Space                thrpt    5          10.691 ±        1.312  MB/sec\r\nLinkedArrayBenchmark.testLinked:·gc.churn.PS_Survivor_Space.norm           thrpt    5     4722251.934 ±   452198.476    B/op\r\nLinkedArrayBenchmark.testLinked:·gc.count                                  thrpt    5        1417.000                 counts\r\nLinkedArrayBenchmark.testLinked:·gc.time                                   thrpt    5        4794.000                     ms\r\n```\r\n\r\n2. This part tests default capacity and the max size of List is 1000.\r\n```java\r\n    @Benchmark\r\n    public void testArrayCap1000() {\r\n        ArrayList<SampleData> list = new ArrayList<SampleData>();\r\n        for (int i=0; i<1000; i++) {\r\n            list.add(new SampleData());\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testLinkedCap1000() {\r\n        LinkedList<SampleData> list = new LinkedList<SampleData>();\r\n        for (int i=0; i<1000; i++) {\r\n            list.add(new SampleData());\r\n        }\r\n    }\r\n```\r\n\r\nResult:\r\n\r\n```java\r\nBenchmark                                                                   Mode  Cnt           Score          Error   Units\r\nLinkedArrayBenchmark.testArrayCap1000                                      thrpt    5      176522.532 ±     4448.276   ops/s\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.alloc.rate                       thrpt    5        6252.366 ±      157.348  MB/sec\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.alloc.rate.norm                  thrpt    5       39000.000 ±        0.001    B/op\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.churn.PS_Eden_Space              thrpt    5        6252.940 ±      161.485  MB/sec\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.churn.PS_Eden_Space.norm         thrpt    5       39003.545 ±       51.090    B/op\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.churn.PS_Survivor_Space          thrpt    5           0.803 ±        0.219  MB/sec\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.churn.PS_Survivor_Space.norm     thrpt    5           5.007 ±        1.286    B/op\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.count                            thrpt    5        1937.000                 counts\r\nLinkedArrayBenchmark.testArrayCap1000:·gc.time                             thrpt    5        1473.000                     ms\r\n\r\nLinkedArrayBenchmark.testLinkedCap1000                                     thrpt    5      101449.110 ±     7841.344   ops/s\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.alloc.rate                      thrpt    5        4422.601 ±      342.269  MB/sec\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.alloc.rate.norm                 thrpt    5       48000.000 ±        0.001    B/op\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.churn.PS_Eden_Space             thrpt    5        4425.733 ±      336.180  MB/sec\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.churn.PS_Eden_Space.norm        thrpt    5       48034.296 ±      229.819    B/op\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.churn.PS_Survivor_Space         thrpt    5           0.872 ±        0.304  MB/sec\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.churn.PS_Survivor_Space.norm    thrpt    5           9.466 ±        3.005    B/op\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.count                           thrpt    5        1371.000                 counts\r\nLinkedArrayBenchmark.testLinkedCap1000:·gc.time                            thrpt    5         997.000                     ms\r\n```\r\n\r\n3. This part tests default capacity and the max size of List is 40000. \r\n```java\r\n    @Benchmark\r\n    public void testArrayCap40000() {\r\n        ArrayList<SampleData> list = new ArrayList<SampleData>();\r\n        for (int i=0; i<40000; i++) {\r\n            list.add(new SampleData());\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testLinkedCap40000() {\r\n        LinkedList<SampleData> list = new LinkedList<SampleData>();\r\n        for (int i=0; i<40000; i++) {\r\n            list.add(new SampleData());\r\n        }\r\n    }\r\n```\r\n\r\nResult:\r\n```\r\nBenchmark                                                                   Mode  Cnt           Score          Error   Units\r\nLinkedArrayBenchmark.testArrayCap40000                                     thrpt    5        3367.247 ±      457.619   ops/s\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.alloc.rate                      thrpt    5        4677.556 ±      635.732  MB/sec\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.alloc.rate.norm                 thrpt    5     1529496.013 ±        0.002    B/op\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.churn.PS_Eden_Space             thrpt    5        4690.330 ±      655.901  MB/sec\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.churn.PS_Eden_Space.norm        thrpt    5     1533628.010 ±     7701.263    B/op\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.churn.PS_Survivor_Space         thrpt    5           6.110 ±        2.169  MB/sec\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.churn.PS_Survivor_Space.norm    thrpt    5        1995.479 ±      485.706    B/op\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.count                           thrpt    5        1473.000                 counts\r\nLinkedArrayBenchmark.testArrayCap40000:·gc.time                            thrpt    5        1641.000                     ms\r\n\r\nLinkedArrayBenchmark.testLinkedCap40000                                    thrpt    5        2367.759 ±      121.662   ops/s\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.alloc.rate                     thrpt    5        4128.794 ±      211.930  MB/sec\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.alloc.rate.norm                thrpt    5     1920000.018 ±        0.001    B/op\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.churn.PS_Eden_Space            thrpt    5        4127.384 ±      224.263  MB/sec\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.churn.PS_Eden_Space.norm       thrpt    5     1919330.567 ±    15068.179    B/op\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.churn.PS_Survivor_Space        thrpt    5          10.019 ±        0.828  MB/sec\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.churn.PS_Survivor_Space.norm   thrpt    5        4658.864 ±      272.178    B/op\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.count                          thrpt    5        1310.000                 counts\r\nLinkedArrayBenchmark.testLinkedCap40000:·gc.time                           thrpt    5        4550.000                     ms\r\n```\r\n\r\n4. This part tests different initial capacity(1, 10, 8000, 40000). The max length is 40k. Here's a odd appearance. We can notice the initial capacity is 10(default value) will execute the most GC times and cost the most time. But its ops is better than others.\r\n(I have executed several times, the results almost are the same.)\r\n\r\n```java\r\n    @Benchmark\r\n    public void testArrayStart1() {\r\n        List<SampleData> consumerList = new ArrayList<SampleData>(1);\r\n        for (int pos = 0; pos < 40000; pos++) {\r\n            consumerList.add(new SampleData());\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testArrayStart10() {\r\n        List<SampleData> consumerList = new ArrayList<SampleData>(10);\r\n        for (int pos = 0; pos < 40000; pos++) {\r\n            consumerList.add(new SampleData());\r\n        }\r\n    }\r\n    @Benchmark\r\n    public void testArrayStart8000() {\r\n        List<SampleData> consumerList = new ArrayList<SampleData>(8000);\r\n        for (int pos = 0; pos < 40000; pos++) {\r\n            consumerList.add(new SampleData());\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testArrayStart40000() {\r\n        List<SampleData> consumerList = new ArrayList<SampleData>(40000);\r\n        for (int pos = 0; pos < 40000; pos++) {\r\n            consumerList.add(new SampleData());\r\n        }\r\n    }\r\n```\r\nResult:\r\n```\r\nLinkedArrayBenchmark.testArrayStart1                                       thrpt    5     3650.344 ±  430.214   ops/s\r\nLinkedArrayBenchmark.testArrayStart1:·gc.alloc.rate                        thrpt    5     4814.170 ±  567.231  MB/sec\r\nLinkedArrayBenchmark.testArrayStart1:·gc.alloc.rate.norm                   thrpt    5  1452104.012 ±    0.001    B/op\r\nLinkedArrayBenchmark.testArrayStart1:·gc.churn.PS_Eden_Space               thrpt    5     4825.797 ±  575.542  MB/sec\r\nLinkedArrayBenchmark.testArrayStart1:·gc.churn.PS_Eden_Space.norm          thrpt    5  1455598.022 ± 5557.754    B/op\r\nLinkedArrayBenchmark.testArrayStart1:·gc.churn.PS_Survivor_Space           thrpt    5        5.943 ±    1.387  MB/sec\r\nLinkedArrayBenchmark.testArrayStart1:·gc.churn.PS_Survivor_Space.norm      thrpt    5     1792.091 ±  297.976    B/op\r\nLinkedArrayBenchmark.testArrayStart1:·gc.count                             thrpt    5     1513.000             counts\r\nLinkedArrayBenchmark.testArrayStart1:·gc.time                              thrpt    5     1637.000                 ms\r\n\r\nLinkedArrayBenchmark.testArrayStart10                                      thrpt    5     4557.648 ±  121.325   ops/s\r\nLinkedArrayBenchmark.testArrayStart10:·gc.alloc.rate                       thrpt    5     6331.232 ±  168.013  MB/sec\r\nLinkedArrayBenchmark.testArrayStart10:·gc.alloc.rate.norm                  thrpt    5  1529496.010 ±    0.001    B/op\r\nLinkedArrayBenchmark.testArrayStart10:·gc.churn.PS_Eden_Space              thrpt    5     6347.599 ±  190.562  MB/sec\r\nLinkedArrayBenchmark.testArrayStart10:·gc.churn.PS_Eden_Space.norm         thrpt    5  1533442.650 ± 6747.452    B/op\r\nLinkedArrayBenchmark.testArrayStart10:·gc.churn.PS_Survivor_Space          thrpt    5        8.601 ±    1.989  MB/sec\r\nLinkedArrayBenchmark.testArrayStart10:·gc.churn.PS_Survivor_Space.norm     thrpt    5     2078.243 ±  514.259    B/op\r\nLinkedArrayBenchmark.testArrayStart10:·gc.count                            thrpt    5     1992.000             counts\r\nLinkedArrayBenchmark.testArrayStart10:·gc.time                             thrpt    5     2371.000                 ms\r\n\r\nLinkedArrayBenchmark.testArrayStart8000                                    thrpt    5     3822.186 ±  109.671   ops/s\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.alloc.rate                     thrpt    5     4797.774 ±  138.117  MB/sec\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.alloc.rate.norm                thrpt    5  1382080.011 ±    0.001    B/op\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.churn.PS_Eden_Space            thrpt    5     4807.450 ±  140.827  MB/sec\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.churn.PS_Eden_Space.norm       thrpt    5  1384866.917 ± 5337.475    B/op\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.churn.PS_Survivor_Space        thrpt    5        4.457 ±    0.342  MB/sec\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.churn.PS_Survivor_Space.norm   thrpt    5     1283.812 ±   64.992    B/op\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.count                          thrpt    5     1507.000             counts\r\nLinkedArrayBenchmark.testArrayStart8000:·gc.time                           thrpt    5     1526.000                 ms\r\n\r\nLinkedArrayBenchmark.testArrayStart40000                                   thrpt    5     4312.118 ±   37.028   ops/s\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.alloc.rate                    thrpt    5     4386.398 ±   37.389  MB/sec\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.alloc.rate.norm               thrpt    5  1120016.010 ±    0.001    B/op\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.churn.PS_Eden_Space           thrpt    5     4390.996 ±   48.359  MB/sec\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.churn.PS_Eden_Space.norm      thrpt    5  1121190.745 ± 9368.223    B/op\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.churn.PS_Survivor_Space       thrpt    5        5.880 ±    0.514  MB/sec\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.churn.PS_Survivor_Space.norm  thrpt    5     1501.392 ±  143.043    B/op\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.count                         thrpt    5     1378.000             counts\r\nLinkedArrayBenchmark.testArrayStart40000:·gc.time                          thrpt    5     1602.000                 ms\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511273975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511279906","html_url":"https://github.com/apache/skywalking/pull/3068#issuecomment-511279906","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3068","id":511279906,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI3OTkwNg==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T05:43:10Z","updated_at":"2019-07-15T05:43:10Z","author_association":"MEMBER","body":"You could provide the test result of `ContextManageStopSpanBenchmark`, we don't need to add it to codebases.\r\n","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511279906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511283252","html_url":"https://github.com/apache/skywalking/issues/3079#issuecomment-511283252","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3079","id":511283252,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI4MzI1Mg==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T06:05:54Z","updated_at":"2019-07-15T06:05:54Z","author_association":"MEMBER","body":"Check your init logs, why tables are not created automatically.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511283252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511285135","html_url":"https://github.com/apache/skywalking/pull/3048#issuecomment-511285135","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3048","id":511285135,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI4NTEzNQ==","user":{"login":"coki230","id":6261764,"node_id":"MDQ6VXNlcjYyNjE3NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/6261764?v=4","gravatar_id":"","url":"https://api.github.com/users/coki230","html_url":"https://github.com/coki230","followers_url":"https://api.github.com/users/coki230/followers","following_url":"https://api.github.com/users/coki230/following{/other_user}","gists_url":"https://api.github.com/users/coki230/gists{/gist_id}","starred_url":"https://api.github.com/users/coki230/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coki230/subscriptions","organizations_url":"https://api.github.com/users/coki230/orgs","repos_url":"https://api.github.com/users/coki230/repos","events_url":"https://api.github.com/users/coki230/events{/privacy}","received_events_url":"https://api.github.com/users/coki230/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T06:17:32Z","updated_at":"2019-07-15T06:17:32Z","author_association":"CONTRIBUTOR","body":"> > the presentation is like Elasticsearch servers are hung up, but i update the SW version of 6.2.0, i use new feature of delete index to delete data. and i cann't get any error info in my oap server when it cann't submit bulk processors. but there might be my ES has poor performance so the ES hung up by auto flush or delete data.\r\n> \r\n> 6.2.0 doesn't delete data from index anymore, it just simply removed the whole indexes. Is your issue solved in 6.2.0? Or something changed?\r\n\r\nI expressions in english have ambiguity, this bug is occured in 6.1 and I update the version of 6.2.0, it also exist.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511285135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511290634","html_url":"https://github.com/apache/skywalking/pull/3048#issuecomment-511290634","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3048","id":511290634,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5MDYzNA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T06:48:55Z","updated_at":"2019-07-15T06:48:55Z","author_association":"MEMBER","body":"> I expressions in english have ambiguity, this bug is occured in 6.1 and I update the version of 6.2.0, it also exist.\r\n\r\nThen we need still to figure out why you block, we and others are not.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511290634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511293559","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511293559","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511293559,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5MzU1OQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T07:02:24Z","updated_at":"2019-07-15T07:02:24Z","author_association":"MEMBER","body":"> LinkedArrayBenchmark.testArrayStart40000                                   thrpt    5           4.750 ±        1.010   ops/s\r\n\r\nWhy this ops so low?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511293559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511293884","html_url":"https://github.com/apache/skywalking/issues/3081#issuecomment-511293884","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3081","id":511293884,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5Mzg4NA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T07:03:56Z","updated_at":"2019-07-15T07:03:56Z","author_association":"MEMBER","body":"Search issue before submit a new one. Your time and timezone are not right.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511293884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511294763","html_url":"https://github.com/apache/skywalking/issues/3082#issuecomment-511294763","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3082","id":511294763,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5NDc2Mw==","user":{"login":"jvmtar","id":21865043,"node_id":"MDQ6VXNlcjIxODY1MDQz","avatar_url":"https://avatars.githubusercontent.com/u/21865043?v=4","gravatar_id":"","url":"https://api.github.com/users/jvmtar","html_url":"https://github.com/jvmtar","followers_url":"https://api.github.com/users/jvmtar/followers","following_url":"https://api.github.com/users/jvmtar/following{/other_user}","gists_url":"https://api.github.com/users/jvmtar/gists{/gist_id}","starred_url":"https://api.github.com/users/jvmtar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvmtar/subscriptions","organizations_url":"https://api.github.com/users/jvmtar/orgs","repos_url":"https://api.github.com/users/jvmtar/repos","events_url":"https://api.github.com/users/jvmtar/events{/privacy}","received_events_url":"https://api.github.com/users/jvmtar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T07:08:03Z","updated_at":"2019-07-15T07:08:03Z","author_association":"NONE","body":"Normal on windows\r\n---------------\r\nLinux will not work","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511294763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511294766","html_url":"https://github.com/apache/skywalking/issues/3082#issuecomment-511294766","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3082","id":511294766,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5NDc2Ng==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T07:08:05Z","updated_at":"2019-07-15T07:08:05Z","author_association":"MEMBER","body":"This is an open-source project, you should check by yourself first. If you think you are wasting time, that is your choice.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511294766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511298619","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511298619","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511298619,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI5ODYxOQ==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T07:25:08Z","updated_at":"2019-07-15T07:25:08Z","author_association":"MEMBER","body":"Loop 1000 times in the method to make instance reused.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511298619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511313759","html_url":"https://github.com/apache/skywalking/pull/3083#issuecomment-511313759","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3083","id":511313759,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMxMzc1OQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T08:24:53Z","updated_at":"2019-07-15T08:24:53Z","author_association":"MEMBER","body":"Fix #3012 #3009 #2993 #2850","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511313759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511321982","html_url":"https://github.com/apache/skywalking/issues/3084#issuecomment-511321982","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3084","id":511321982,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyMTk4Mg==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T08:52:40Z","updated_at":"2019-07-15T08:52:40Z","author_association":"MEMBER","body":"> which seems like that Tomcat Instrument doesn't work and request arrives at SpringMVC directly\r\ndo you have any idea on why this happen?\r\n\r\nThat is your codes doing in this way. Talk with your developer, they know what {path} means in Spring. Also, once SpringMVC active, should should happen.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511321982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511322424","html_url":"https://github.com/apache/skywalking/issues/3084#issuecomment-511322424","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3084","id":511322424,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyMjQyNA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T08:54:02Z","updated_at":"2019-07-15T08:54:02Z","author_association":"MEMBER","body":"`/apm/post/666` will break endpoint aggregation. And it is meanless. If you want to see this in trace, check url tag, it is there.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511322424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511323069","html_url":"https://github.com/apache/skywalking/pull/3083#issuecomment-511323069","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3083","id":511323069,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyMzA2OQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T08:56:00Z","updated_at":"2019-07-15T08:56:00Z","author_association":"MEMBER","body":"/run e2e","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511323069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511324777","html_url":"https://github.com/apache/skywalking/issues/3085#issuecomment-511324777","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3085","id":511324777,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyNDc3Nw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:01:25Z","updated_at":"2019-07-15T09:01:25Z","author_association":"MEMBER","body":"Search before submitting a new issue. Ignore this exception.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511324777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511325876","html_url":"https://github.com/apache/skywalking/issues/3084#issuecomment-511325876","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3084","id":511325876,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyNTg3Ng==","user":{"login":"evanxuhe","id":24379174,"node_id":"MDQ6VXNlcjI0Mzc5MTc0","avatar_url":"https://avatars.githubusercontent.com/u/24379174?v=4","gravatar_id":"","url":"https://api.github.com/users/evanxuhe","html_url":"https://github.com/evanxuhe","followers_url":"https://api.github.com/users/evanxuhe/followers","following_url":"https://api.github.com/users/evanxuhe/following{/other_user}","gists_url":"https://api.github.com/users/evanxuhe/gists{/gist_id}","starred_url":"https://api.github.com/users/evanxuhe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/evanxuhe/subscriptions","organizations_url":"https://api.github.com/users/evanxuhe/orgs","repos_url":"https://api.github.com/users/evanxuhe/repos","events_url":"https://api.github.com/users/evanxuhe/events{/privacy}","received_events_url":"https://api.github.com/users/evanxuhe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:05:18Z","updated_at":"2019-07-15T09:05:36Z","author_association":"CONTRIBUTOR","body":"> > which seems like that Tomcat Instrument doesn't work and request arrives at SpringMVC directly\r\n> > do you have any idea on why this happen?\r\n> \r\n> That is your codes doing in this way. Talk with your developer, they know what {path} means in Spring. Also, once SpringMVC active, should should happen.\r\n\r\nSorry. that's not what I mean.\r\n **I wanna it shows the same way**. as /apm/post/666 or another one /apm/post/{path}. But it shows in some way randomly. Bad experience.\r\n\r\nSo, is it the problem in oap aggregator rather than agent? \r\n_Can you point specific class name that can fix  this problem?_\r\nThank you!","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511325876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326595","html_url":"https://github.com/apache/skywalking/issues/3084#issuecomment-511326595","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3084","id":511326595,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyNjU5NQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:07:37Z","updated_at":"2019-07-15T09:07:37Z","author_association":"MEMBER","body":"> I wanna it shows the same way. as /apm/post/666 or another one /apm/post/{path}. But it shows in some way randomly. Bad experience.\r\n\r\nIn the design and codes level, it always should show `/apm/post/{path}`, should not be random. Unless you build some async mechanism between Tomcat and SpringMVC, which could cause random things.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326699","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511326699","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511326699,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyNjY5OQ==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:07:56Z","updated_at":"2019-07-15T09:07:56Z","author_association":"MEMBER","body":"Update the benchmark result for fix some mistakes and add tests code.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326900","html_url":"https://github.com/apache/skywalking/issues/3085#issuecomment-511326900","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3085","id":511326900,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyNjkwMA==","user":{"login":"xvjialing","id":15673470,"node_id":"MDQ6VXNlcjE1NjczNDcw","avatar_url":"https://avatars.githubusercontent.com/u/15673470?v=4","gravatar_id":"","url":"https://api.github.com/users/xvjialing","html_url":"https://github.com/xvjialing","followers_url":"https://api.github.com/users/xvjialing/followers","following_url":"https://api.github.com/users/xvjialing/following{/other_user}","gists_url":"https://api.github.com/users/xvjialing/gists{/gist_id}","starred_url":"https://api.github.com/users/xvjialing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xvjialing/subscriptions","organizations_url":"https://api.github.com/users/xvjialing/orgs","repos_url":"https://api.github.com/users/xvjialing/repos","events_url":"https://api.github.com/users/xvjialing/events{/privacy}","received_events_url":"https://api.github.com/users/xvjialing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:08:34Z","updated_at":"2019-07-15T09:08:34Z","author_association":"NONE","body":"@wu-sheng i have already set collector.backend_service=${SW_AGENT_COLLECTOR_BACKEND_SERVICES:192.168.31.48:11800} ,but it does not  effect","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326930","html_url":"https://github.com/apache/skywalking/issues/3084#issuecomment-511326930","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3084","id":511326930,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyNjkzMA==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:08:38Z","updated_at":"2019-07-15T09:08:38Z","author_association":"MEMBER","body":"> So, is it the problem in oap aggregator rather than agent?\r\nCan you point specific class name that can fix this problem?\r\n\r\nIt is inside agent core and automatically work w/o plugin codes, only depends on ThreadLocal only. So, I don't know the cause yet.","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511326930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511329195","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511329195","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511329195,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyOTE5NQ==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:16:04Z","updated_at":"2019-07-15T09:16:04Z","author_association":"MEMBER","body":"FYI @hanahmily @peng-yongsheng @kezhenxu94 @JaredTan95 @zhaoyuguang @IanCao \r\n\r\nAccording to all these tests, the ArrayList is much faster than LinkedList, especially in list reuse scenario, even including the GC time\r\n\r\nHighlight this one\r\n```\r\nBenchmark                                                                   Mode  Cnt           Score          Error   Units\r\nLinkedArrayBenchmark.testReusedArray                                       thrpt    5           4.099 ±        0.254   ops/s\r\nLinkedArrayBenchmark.testReusedArray:·gc.alloc.rate                        thrpt    5        3577.493 ±      218.971  MB/sec\r\nLinkedArrayBenchmark.testReusedArray:·gc.alloc.rate.norm                   thrpt    5   960569530.436 ±        0.529    B/op\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Eden_Space               thrpt    5        3579.288 ±      227.314  MB/sec\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Eden_Space.norm          thrpt    5   961045357.161 ±  7069943.693    B/op\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Survivor_Space           thrpt    5           2.369 ±        0.343  MB/sec\r\nLinkedArrayBenchmark.testReusedArray:·gc.churn.PS_Survivor_Space.norm      thrpt    5      636105.700 ±    95920.377    B/op\r\nLinkedArrayBenchmark.testReusedArray:·gc.count                             thrpt    5        1133.000                 counts\r\nLinkedArrayBenchmark.testReusedArray:·gc.time                              thrpt    5        3254.000                     ms\r\n\r\nLinkedArrayBenchmark.testReusedLinked                                      thrpt    5           1.578 ±        0.068   ops/s\r\nLinkedArrayBenchmark.testReusedLinked:·gc.alloc.rate                       thrpt    5        2753.590 ±      112.877  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked:·gc.alloc.rate.norm                  thrpt    5  1920000059.000 ±        0.001    B/op\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Eden_Space              thrpt    5        2752.897 ±      113.153  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Eden_Space.norm         thrpt    5  1919516672.000 ±   713769.991    B/op\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Survivor_Space          thrpt    5           6.904 ±        0.680  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked:·gc.churn.PS_Survivor_Space.norm     thrpt    5     4813619.200 ±   404066.441    B/op\r\nLinkedArrayBenchmark.testReusedLinked:·gc.count                            thrpt    5         885.000                 counts\r\nLinkedArrayBenchmark.testReusedLinked:·gc.time                             thrpt    5        2996.000                   ms\r\n```\r\n\r\n3x times faster.\r\n\r\nI recommend you \r\n1. Use a 2k~ as ArrayList initial size(agent uses 1.5k as default), because not all OAPs run in the full payload.\r\n1. Use array reuse mechanism in DataCarrier consumer, especially in `BulkConsumePool`(OAP used).\r\n\r\nLet's work on a PR to make this works. cc all @apache/skywalking-committers ","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511329195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511329347","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511329347","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511329347,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMyOTM0Nw==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:16:33Z","updated_at":"2019-07-15T09:16:33Z","author_association":"MEMBER","body":"I think, their GC profiling is unavalible in part 4 .","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511329347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511331217","html_url":"https://github.com/apache/skywalking/issues/3035#issuecomment-511331217","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3035","id":511331217,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMzMTIxNw==","user":{"login":"wu-sheng","id":5441976,"node_id":"MDQ6VXNlcjU0NDE5NzY=","avatar_url":"https://avatars.githubusercontent.com/u/5441976?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-sheng","html_url":"https://github.com/wu-sheng","followers_url":"https://api.github.com/users/wu-sheng/followers","following_url":"https://api.github.com/users/wu-sheng/following{/other_user}","gists_url":"https://api.github.com/users/wu-sheng/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-sheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-sheng/subscriptions","organizations_url":"https://api.github.com/users/wu-sheng/orgs","repos_url":"https://api.github.com/users/wu-sheng/repos","events_url":"https://api.github.com/users/wu-sheng/events{/privacy}","received_events_url":"https://api.github.com/users/wu-sheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:22:54Z","updated_at":"2019-07-15T09:22:54Z","author_association":"MEMBER","body":"@MrZhengliang We provided a new patch, if you have time, could you test with your old codes by using master branch agent?","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511331217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511335940","html_url":"https://github.com/apache/skywalking/issues/3064#issuecomment-511335940","issue_url":"https://api.github.com/repos/apache/skywalking/issues/3064","id":511335940,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMzNTk0MA==","user":{"login":"dmsolr","id":29735230,"node_id":"MDQ6VXNlcjI5NzM1MjMw","avatar_url":"https://avatars.githubusercontent.com/u/29735230?v=4","gravatar_id":"","url":"https://api.github.com/users/dmsolr","html_url":"https://github.com/dmsolr","followers_url":"https://api.github.com/users/dmsolr/followers","following_url":"https://api.github.com/users/dmsolr/following{/other_user}","gists_url":"https://api.github.com/users/dmsolr/gists{/gist_id}","starred_url":"https://api.github.com/users/dmsolr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmsolr/subscriptions","organizations_url":"https://api.github.com/users/dmsolr/orgs","repos_url":"https://api.github.com/users/dmsolr/repos","events_url":"https://api.github.com/users/dmsolr/events{/privacy}","received_events_url":"https://api.github.com/users/dmsolr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T09:38:29Z","updated_at":"2019-07-15T09:38:29Z","author_association":"MEMBER","body":"About the max capacity is 200k. **ArrayList has the better ops and take more GC times, but cost less.** It is amazing.\r\n\r\n```java\r\n\r\n    @Benchmark\r\n    public void testArrayList200K() {\r\n        ArrayList<SampleData> list = new ArrayList<SampleData>(4000);\r\n        for (int times=0; times<1000; times++) {\r\n            for (int pos=0; pos<200000; pos++) {\r\n                list.add(new SampleData());\r\n            }\r\n            list.clear();\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testReusedLinked200K() {\r\n        LinkedList<SampleData> list = new LinkedList<SampleData>();\r\n        for (int times=0; times<1000; times++) {\r\n            for (int pos=0; pos<200000; pos++) {\r\n                list.add(new SampleData());\r\n            }\r\n            list.clear();\r\n        }\r\n    }\r\n\r\n    @Benchmark\r\n    public void testLinked200K() {\r\n        for (int times=0; times<1000; times++) {\r\n            LinkedList<SampleData> list = new LinkedList<SampleData>();\r\n            for (int pos=0; pos<200000; pos++) {\r\n                list.add(new SampleData());\r\n            }\r\n        }\r\n    }\r\n```\r\nResult:\r\n```\r\nBenchmark                                                                    Mode  Cnt           Score          Error   Units\r\nLinkedArrayBenchmark.testArrayList200K                                      thrpt    5           0.812 ±        0.089   ops/s\r\nLinkedArrayBenchmark.testArrayList200K:·gc.alloc.rate                       thrpt    5        3553.772 ±      398.861  MB/sec\r\nLinkedArrayBenchmark.testArrayList200K:·gc.alloc.rate.norm                  thrpt    5  4802736145.200 ±       10.332    B/op\r\nLinkedArrayBenchmark.testArrayList200K:·gc.churn.PS_Eden_Space              thrpt    5        3554.349 ±      392.149  MB/sec\r\nLinkedArrayBenchmark.testArrayList200K:·gc.churn.PS_Eden_Space.norm         thrpt    5  4803581996.267 ± 34330566.135    B/op\r\nLinkedArrayBenchmark.testArrayList200K:·gc.churn.PS_Survivor_Space          thrpt    5          24.179 ±        3.090  MB/sec\r\nLinkedArrayBenchmark.testArrayList200K:·gc.churn.PS_Survivor_Space.norm     thrpt    5    32674873.111 ±  1225690.282    B/op\r\nLinkedArrayBenchmark.testArrayList200K:·gc.count                            thrpt    5        1273.000                 counts\r\nLinkedArrayBenchmark.testArrayList200K:·gc.time                             thrpt    5       11674.000                     ms\r\n\r\nLinkedArrayBenchmark.testReusedLinked200K                                   thrpt    5           0.250 ±        0.007   ops/s\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.alloc.rate                    thrpt    5        2196.510 ±       62.548  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.alloc.rate.norm               thrpt    5  9600000176.000 ±        0.001    B/op\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.churn.PS_Eden_Space           thrpt    5        2195.758 ±       44.272  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.churn.PS_Eden_Space.norm      thrpt    5  9596847166.400 ± 99649380.997    B/op\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.churn.PS_Survivor_Space       thrpt    5          24.604 ±        3.520  MB/sec\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.churn.PS_Survivor_Space.norm  thrpt    5   107513992.533 ± 12501959.808    B/op\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.count                         thrpt    5         922.000                 counts\r\nLinkedArrayBenchmark.testReusedLinked200K:·gc.time                          thrpt    5       12103.000                     ms\r\n\r\nLinkedArrayBenchmark.testLinked200K                                         thrpt    5           0.375 ±        0.011   ops/s\r\nLinkedArrayBenchmark.testLinked200K:·gc.alloc.rate                          thrpt    5        3283.321 ±       88.875  MB/sec\r\nLinkedArrayBenchmark.testLinked200K:·gc.alloc.rate.norm                     thrpt    5  9600000109.600 ±       13.776    B/op\r\nLinkedArrayBenchmark.testLinked200K:·gc.churn.PS_Eden_Space                 thrpt    5        3284.087 ±       91.468  MB/sec\r\nLinkedArrayBenchmark.testLinked200K:·gc.churn.PS_Eden_Space.norm            thrpt    5  9602229858.400 ± 15430474.683    B/op\r\nLinkedArrayBenchmark.testLinked200K:·gc.churn.PS_Survivor_Space             thrpt    5          36.178 ±        6.896  MB/sec\r\nLinkedArrayBenchmark.testLinked200K:·gc.churn.PS_Survivor_Space.norm        thrpt    5   105760358.400 ± 17865836.630    B/op\r\nLinkedArrayBenchmark.testLinked200K:·gc.count                               thrpt    5        1231.000                 counts\r\nLinkedArrayBenchmark.testLinked200K:·gc.time                                thrpt    5       16275.000                     ms\r\n```","reactions":{"url":"https://api.github.com/repos/apache/skywalking/issues/comments/511335940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]