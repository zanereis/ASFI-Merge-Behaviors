[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1877128484","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-1877128484","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":1877128484,"node_id":"IC_kwDOAAMmUc5v4rUk","user":{"login":"klehmann","id":4291861,"node_id":"MDQ6VXNlcjQyOTE4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4291861?v=4","gravatar_id":"","url":"https://api.github.com/users/klehmann","html_url":"https://github.com/klehmann","followers_url":"https://api.github.com/users/klehmann/followers","following_url":"https://api.github.com/users/klehmann/following{/other_user}","gists_url":"https://api.github.com/users/klehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/klehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klehmann/subscriptions","organizations_url":"https://api.github.com/users/klehmann/orgs","repos_url":"https://api.github.com/users/klehmann/repos","events_url":"https://api.github.com/users/klehmann/events{/privacy}","received_events_url":"https://api.github.com/users/klehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T13:52:11Z","updated_at":"2024-01-04T13:52:11Z","author_association":"NONE","body":"I am so much waiting for this feature for years. But given the time it’s been stale, it’s probably best to move on I guess. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1877128484/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1881378895","html_url":"https://github.com/apache/couchdb/issues/4897#issuecomment-1881378895","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4897","id":1881378895,"node_id":"IC_kwDOAAMmUc5wI5BP","user":{"login":"Sdas0000","id":138152510,"node_id":"U_kgDOCDwKPg","avatar_url":"https://avatars.githubusercontent.com/u/138152510?v=4","gravatar_id":"","url":"https://api.github.com/users/Sdas0000","html_url":"https://github.com/Sdas0000","followers_url":"https://api.github.com/users/Sdas0000/followers","following_url":"https://api.github.com/users/Sdas0000/following{/other_user}","gists_url":"https://api.github.com/users/Sdas0000/gists{/gist_id}","starred_url":"https://api.github.com/users/Sdas0000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sdas0000/subscriptions","organizations_url":"https://api.github.com/users/Sdas0000/orgs","repos_url":"https://api.github.com/users/Sdas0000/repos","events_url":"https://api.github.com/users/Sdas0000/events{/privacy}","received_events_url":"https://api.github.com/users/Sdas0000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T16:10:03Z","updated_at":"2024-01-08T16:10:03Z","author_association":"NONE","body":"Nick , We seeing the same issue after configuring our cluster with new values  as per your recommendation: \r\n{\r\n  \"max_churn\": \"20\",\r\n  \"interval\": \"60000\",\r\n  \"checkpoint_interval\": \"5000\",\r\n  \"startup_jitter\": \"5000\",\r\n  \"worker_batch_size\": \"2000\",\r\n  \"ssl_certificate_max_depth\": \"3\",\r\n  \"max_jobs\": \"1500\",\r\n  \"retries_per_request\": \"5\",\r\n  \"connection_timeout\": \"120000\",\r\n  \"max_history\": \"7\",\r\n  \"cluster_quiet_period\": \"600\",\r\n  \"verify_ssl_certificates\": \"false\",\r\n  \"socket_options\": \"[{keepalive, true}, {nodelay, false}]\",\r\n  \"worker_processes\": \"4\",\r\n  \"http_connections\": \"20\"\r\n}\r\n\r\nwe have 300 databases , after we bounced all the nodes ( 5 nodes ) with the new configuration ( retries_per_request=5,  worker_processes = 4 , worker_processes=20)  , we see replication stopped for some databases  after few days.\r\n\r\n   \"database\": \"_replicator\",\r\n      \"id\": \"d61a276b9c8a25a384356f230df2e840+continuous\",\r\n      \"pid\": \"<0.15554.5790>\",\r\n      \"source\": \"https://item-cache-master.pr-xxxxxxx.str.xxxxxx.com/item_store-104/\",\r\n      \"target\": \"http://localhost:5984/item_store-104/\",\r\n      \"user\": null,\r\n      \"doc_id\": \"9a1dfe729a75461380105a54506eed95\",\r\n      \"info\": {\r\n        \"revisions_checked\": 56566938,\r\n        \"missing_revisions_found\": 12566327,\r\n        \"docs_read\": 12548807,\r\n        \"docs_written\": 12548807,\r\n        \"changes_pending\": null,\r\n        \"doc_write_failures\": 0,\r\n        \"bulk_get_docs\": 4183751,\r\n        \"bulk_get_attempts\": 4183751,\r\n        \"checkpointed_source_seq\": \"23258687-g1AAAAJveJzLYWBgYMlgTmEwT84vTc5ISXLILEnN1U1OTM5I1c1NLC5JLdI11EvWKyjSLS7JLwKK5eclFiVn6GXmAaXyEnNygAYwJTIk2f___z8rgzmJISI9JBcoxm5kYWKRnGRCvskEXGVM0FVJDkAyqR7msEjNWrDDLC2MDRJNjcg3nOLgymMBkgwNQArotv2QUGt7DnacWWKaZUpaGs1CzYRIxx2AOA4apefawY4zMDExNzC1JN-CLADRX9Se\",\r\n        \"source_seq\": \"23258687-g1AAAAJveJzLYWBgYMlgTmEwT84vTc5ISXLILEnN1U1OTM5I1c1NLC5JLdI11EvWKyjSLS7JLwKK5eclFiVn6GXmAaXyEnNygAYwJTIk2f___z8rgzmJISI9JBcoxm5kYWKRnGRCvskEXGVM0FVJDkAyqR7msEjNWrDDLC2MDRJNjcg3nOLgymMBkgwNQArotv2QUGt7DnacWWKaZUpaGs1CzYRIxx2AOA4apefawY4zMDExNzC1JN-CLADRX9Se\",\r\n        \"through_seq\": \"23258687-g1AAAAJveJzLYWBgYMlgTmEwT84vTc5ISXLILEnN1U1OTM5I1c1NLC5JLdI11EvWKyjSLS7JLwKK5eclFiVn6GXmAaXyEnNygAYwJTIk2f___z8rgzmJISI9JBcoxm5kYWKRnGRCvskEXGVM0FVJDkAyqR7msEjNWrDDLC2MDRJNjcg3nOLgymMBkgwNQArotv2QUGt7DnacWWKaZUpaGs1CzYRIxx2AOA4apefawY4zMDExNzC1JN-CLADRX9Se\"\r\n      },\r\n      \"history\": [\r\n        {\r\n          \"timestamp\": \"2024-01-05T20:04:20Z\",\r\n          \"type\": \"started\"\r\n        },\r\n        {\r\n          \"timestamp\": \"2024-01-05T20:04:20Z\",\r\n          \"type\": \"crashed\",\r\n          \"reason\": \"{noproc,{gen_server,call,[<0.16674.5865>,stop,1200000]}}\"\r\n        },\r\n        {\r\n          \"timestamp\": \"2024-01-05T19:54:14Z\",\r\n          \"type\": \"started\"\r\n        },\r\n        {\r\n          \"timestamp\": \"2024-01-05T19:54:14Z\",\r\n          \"type\": \"crashed\",\r\n          \"reason\": \"{changes_reader_died,{timeout,ibrowse_stream_cleanup}}\"\r\n        },\r\n        {\r\n          \"timestamp\": \"2024-01-05T19:51:39Z\",\r\n          \"type\": \"started\"\r\n        },\r\n        {\r\n          \"timestamp\": \"2024-01-05T19:51:39Z\",\r\n          \"type\": \"crashed\",\r\n          \"reason\": \"{changes_reader_died,{timeout,ibrowse_stream_cleanup}}\"\r\n        },\r\n        {\r\n          \"timestamp\": \"2024-01-05T19:38:58Z\",\r\n          \"type\": \"started\"\r\n        }\r\n      ],\r\n      \"node\": \"couchdb@item-cache-ro-us-east4-5.c.pr-xxxxx.internal\",\r\n  \"start_time\": \"2024-01-03T15:21:28Z\"\r\n    }\r\n\r\n\r\nError log : \r\n\r\nJan 04 09:52:20 item-cache-ro-us-east4-5 couchdb[3345357]: couchdb@item-cache-ro-us-east4-5.c.pr-store-xxxx.internal <0.18866.1840> -------- Replicator, request GET to \"https://item-cache-master.pr-store-xxxxxx.str.xxxxxx.com/item_store-104/_changes?feed=continuous&style=all_docs&since=23237954-g1AAAAJveJzLYWBgYMlgTmEwT84vTc5ISXLILEnN1U1OTM5I1c1NLC5JLdI11EvWKyjSLS7JLwKK5eclFiVn6GXmAaXyEnNygAYwJTIk2f___z8rgzmJISLYMxcoxm5kYWKRnGRCvskEXGVM0FVJDkAyqR7msEhRdrDDLC2MDRJNjcg3nOLgymMBkgwNQArotv2QUCt2BjvOLDHNMiUtjWahZkKk4w5AHAeN0p3rwY4zMDExNzC1JN-CLAAhTNNR&timeout=40000\" failed due to error {connection_closed,mid_stream}\r\nJan 04 09:52:50 item-cache-ro-us-east4-5 couchdb[3345357]: couchdb@item-cache-ro-us-east4-5.c.pr-store-xxxxx.internal <0.23398.1979> -------- Replication `d61a276b9c8a25a384356f230df2e840+continuous` (`https://item-cache-master.pr-store-xxxxx.str.xxxxx.com/item_store-104/` -> `http://localhost:5984/item_store-104/`) failed: {changes_reader_died,{timeout,ibrowse_stream_cleanup}}\r\nJan 04 09:58:51 item-cache-ro-us-east4-5 couchdb[3345357]: couchdb@item-cache-ro-us-east4-5.c.pr-store-xxxx.internal <0.10629.1972> -------- Replicator, request GET to \"https://item-cache-master.pr-store-xxxxxx.str.xxxxxx.com/item_store-104/_changes?feed=continuous&style=all_docs&since=23237977-g1AAAAJveJzLYWBgYMlgTmEwT84vTc5ISXLILEnN1U1OTM5I1c1NLC5JLdI11EvWKyjSLS7JLwKK5eclFiVn6GXmAaXyEnNygAYwJTIk2f___z8rgzmJISLYPxcoxm5kYWKRnGRCvskEXGVM0FVJDkAyqR7msEhRfrDDLC2MDRJNjcg3nOLgymMBkgwNQArotv2QUCt2AzvOLDHNMiUtjWahZkKk4w5AHAeN0p1bwY4zMDExNzC1JN-CLAA-XdNo&timeout=40000\" failed due to error {connection_closed,mid_stream}\r\nJan 04 09:59:21 item-cache-ro-us-east4-5 couchdb[3345357]: couchdb@item-cache-ro-us-east4-5.c.pr-store-xxxxx.internal <0.26825.1830> -------- Replication `d61a276b9c8a25a384356f230df2e840+continuous` (`https://item-cache-master.pr-store-xxxxx.str.xxxxxx.com/item_store-104/` -> `http://localhost:5984/item_store-104/`) failed: {changes_reader_died,{timeout,ibrowse_stream_cleanup}}\r\n\r\nNote : The above error  messages appears for all databases , also this message was appread for this database(item_store-104)  earlier , but replication was not stopped. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1881378895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1881673420","html_url":"https://github.com/apache/couchdb/issues/4897#issuecomment-1881673420","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4897","id":1881673420,"node_id":"IC_kwDOAAMmUc5wKA7M","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-08T19:11:43Z","updated_at":"2024-01-08T19:16:01Z","author_association":"CONTRIBUTOR","body":"Do the source servers show any errors in the logs ` failed due to error {connection_closed,mid_stream}` indicates something interrupted the changes feeds while it was reading or waiting on data. Do you have a proxy in between that might have an inactivity timeout or a max connection usage?\r\n\r\nAre there other issue with the endpoints, when the condition occurs, do basic doc reads and writes still work?\r\n\r\nCould try perhaps reducing the batch size a bit more (2000 -> 500), and the worker count as well (4 -> 2) and increase the timeout a bit more 120000 -> 240000.\r\n\r\nAnother idea is to try to upgrade to 3.3.3 with the latest deb package as we upgraded Erlang/OTP there to fix a memory leak issue. There were also some replication fixes since then.\r\n\r\nIf possible when identified a case of a stopped db, try updating the source doc and see what happens, does that change get propagated to the target?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1881673420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885342627","html_url":"https://github.com/apache/couchdb/pull/4735#issuecomment-1885342627","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4735","id":1885342627,"node_id":"IC_kwDOAAMmUc5wYAuj","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T17:52:53Z","updated_at":"2024-01-10T17:52:53Z","author_association":"CONTRIBUTOR","body":"Because I did not want to lose the original description of this PR along with the discussion here, and I wanted to put the change in a different perspective in the light of #4812, I forked it as #4958.  After talking with @chewbranca about the problem and its solution, and adding the fact that he has been working on a model that would follow a similar approach, the current code seems feasible.\r\n\r\nI have studied @rnewson's suggestions but neither of them brought a clear solution to the problem.  I am inclined to believe (perhaps I am wrong here) that fixing the issue from the side of `fabric` would be a more complicated change and as such it hides some risks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885342627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885860570","html_url":"https://github.com/apache/couchdb/pull/4954#issuecomment-1885860570","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4954","id":1885860570,"node_id":"IC_kwDOAAMmUc5wZ_La","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T22:42:10Z","updated_at":"2024-01-10T22:42:10Z","author_association":"CONTRIBUTOR","body":"Closing this in favor of #4959.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885860570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885877403","html_url":"https://github.com/apache/couchdb/pull/4960#issuecomment-1885877403","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4960","id":1885877403,"node_id":"IC_kwDOAAMmUc5waDSb","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T22:56:18Z","updated_at":"2024-01-10T22:56:18Z","author_association":"MEMBER","body":"I'm also questioning whether 4957 did anything as I already had a check for this at the top of boot_nouveau:\r\n\r\n```\r\ndef boot_nouveau(ctx):\r\n    if not ctx[\"with_nouveau\"]:\r\n        return\r\n```\r\n\r\ntesting locally `./dev/lib/nouveau.yaml` is not created when doing `dev/run` unless you also add `--with-nouveau`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885877403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885913957","html_url":"https://github.com/apache/couchdb/pull/4960#issuecomment-1885913957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4960","id":1885913957,"node_id":"IC_kwDOAAMmUc5waMNl","user":{"login":"jiahuili430","id":54631519,"node_id":"MDQ6VXNlcjU0NjMxNTE5","avatar_url":"https://avatars.githubusercontent.com/u/54631519?v=4","gravatar_id":"","url":"https://api.github.com/users/jiahuili430","html_url":"https://github.com/jiahuili430","followers_url":"https://api.github.com/users/jiahuili430/followers","following_url":"https://api.github.com/users/jiahuili430/following{/other_user}","gists_url":"https://api.github.com/users/jiahuili430/gists{/gist_id}","starred_url":"https://api.github.com/users/jiahuili430/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiahuili430/subscriptions","organizations_url":"https://api.github.com/users/jiahuili430/orgs","repos_url":"https://api.github.com/users/jiahuili430/repos","events_url":"https://api.github.com/users/jiahuili430/events{/privacy}","received_events_url":"https://api.github.com/users/jiahuili430/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T23:21:17Z","updated_at":"2024-01-10T23:28:53Z","author_association":"CONTRIBUTOR","body":"If `nouveau.yaml` does not exist in the `rel` directory, then `generate_nouveau_config(ctx)` will get `FileNotFoundError`.\r\nSo, I added an if statement to check whether the `nouveau' was enabled.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885913957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885935132","html_url":"https://github.com/apache/couchdb/pull/4960#issuecomment-1885935132","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4960","id":1885935132,"node_id":"IC_kwDOAAMmUc5waRYc","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-10T23:47:03Z","updated_at":"2024-01-10T23:47:03Z","author_association":"MEMBER","body":"I think your testing was based on the PR during its development. The merged version had the\r\n\r\n```\r\nif not ctx[\"with_nouveau\"]:\r\n        return\r\n```\r\n\r\ncheck in it. As such I think the work in #4957 didn't do anything for the merged version of this work?\r\n\r\nAnyway, it makes sense to match the clouseau approach anyway.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885935132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885963815","html_url":"https://github.com/apache/couchdb/pull/4960#issuecomment-1885963815","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4960","id":1885963815,"node_id":"IC_kwDOAAMmUc5waYYn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T00:12:03Z","updated_at":"2024-01-11T00:12:03Z","author_association":"CONTRIBUTOR","body":"Hmm, it would be nice to default to `--with-nouveau` if we already configured nouveau. I'll see if we can read the install.mk and pick up the dev/run defaults from there perhaps?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885963815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885968737","html_url":"https://github.com/apache/couchdb/pull/4961#issuecomment-1885968737","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4961","id":1885968737,"node_id":"IC_kwDOAAMmUc5waZlh","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T00:16:52Z","updated_at":"2024-01-11T00:16:52Z","author_association":"CONTRIBUTOR","body":"This way if nouveau is configured `dev/run` will default to starting it.\r\n\r\n```\r\n% dev/run --admin=adm:pass -n1\r\n[ * ] Setup environment ... ok\r\n[ * ] Ensure CouchDB is built ... ok\r\n[ * ] Ensure Erlang boot script exists ... ok\r\n[ * ] Prepare configuration files ... ok\r\n[ * ] Start node node1 ... ok\r\n[ * ] Booting nouveau ... ok\r\n[ * ] Check node at http://127.0.0.1:15984/ ... ok\r\n[ * ] Running cluster setup ... ok\r\n[ * ] Developers cluster is set up at http://127.0.0.1:15984.\r\nAdmin username: adm\r\nPassword: pass\r\nTime to hack! ... ^Cok\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1885968737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1886636292","html_url":"https://github.com/apache/couchdb/pull/4960#issuecomment-1886636292","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4960","id":1886636292,"node_id":"IC_kwDOAAMmUc5wc8kE","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T08:46:13Z","updated_at":"2024-01-11T08:46:13Z","author_association":"MEMBER","body":"enh, just you ./configure'd with --enable-nouveau doesn't mean you always want to launch it with dev/run, but I guess as a default it makes sense. I'm just used to setting both each time that it doesn't bother me. see how we handle haproxy also","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1886636292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1887423081","html_url":"https://github.com/apache/couchdb/pull/4960#issuecomment-1887423081","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4960","id":1887423081,"node_id":"IC_kwDOAAMmUc5wf8pp","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-11T15:31:11Z","updated_at":"2024-01-11T15:31:11Z","author_association":"CONTRIBUTOR","body":"I tried it here https://github.com/apache/couchdb/pull/4961, but needed also a way to explicitly disable nouveau during some tests which didn't expect it (mango, etc), so it would need an extra `--without-nouveau` argument, and that was getting a bit too clunky.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1887423081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1889961002","html_url":"https://github.com/apache/couchdb/issues/4897#issuecomment-1889961002","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4897","id":1889961002,"node_id":"IC_kwDOAAMmUc5wpoQq","user":{"login":"Sdas0000","id":138152510,"node_id":"U_kgDOCDwKPg","avatar_url":"https://avatars.githubusercontent.com/u/138152510?v=4","gravatar_id":"","url":"https://api.github.com/users/Sdas0000","html_url":"https://github.com/Sdas0000","followers_url":"https://api.github.com/users/Sdas0000/followers","following_url":"https://api.github.com/users/Sdas0000/following{/other_user}","gists_url":"https://api.github.com/users/Sdas0000/gists{/gist_id}","starred_url":"https://api.github.com/users/Sdas0000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sdas0000/subscriptions","organizations_url":"https://api.github.com/users/Sdas0000/orgs","repos_url":"https://api.github.com/users/Sdas0000/repos","events_url":"https://api.github.com/users/Sdas0000/events{/privacy}","received_events_url":"https://api.github.com/users/Sdas0000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-12T21:17:20Z","updated_at":"2024-01-12T21:17:20Z","author_association":"NONE","body":"we have updated the config with values you recommended but seen same issue , the replication runs smoothly for few days and stop replicating for few databases \r\n\r\n \"replicator\": {\r\n    \"checkpoint_interval\": \"5000\",\r\n    \"cluster_quiet_period\": \"600\",\r\n    \"connection_timeout\": \"240000\",\r\n    \"http_connections\": \"20\",\r\n    \"interval\": \"60000\",\r\n    \"max_churn\": \"20\",\r\n    \"max_history\": \"7\",\r\n    \"max_jobs\": \"1500\",\r\n    \"retries_per_request\": \"5\",\r\n    \"socket_options\": \"[{keepalive, true}, {nodelay, false}]\",\r\n    \"ssl_certificate_max_depth\": \"3\",\r\n    \"startup_jitter\": \"5000\",\r\n    \"verify_ssl_certificates\": \"false\",\r\n    \"worker_batch_size\": \"500\",\r\n    \"worker_processes\": \"2\"\r\n  },\r\n\r\n we have load balancer between Master ( 5 nodes ) and Replica ( 5 nodes ), the replica access master using load balancer , the timeout in load balancer is 2 min (120 sec), we see replication crashes after 2 mins for all databases , but it restarts automatically. But for some databases replication restarts and remain as \"running\" even though the connection is timed  out from load balancer. Couchdb scheduler does not restart the replication for that database  since it is not in \"crashed\". is there anything we can try from our side ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1889961002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1890239498","html_url":"https://github.com/apache/couchdb/issues/4897#issuecomment-1890239498","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4897","id":1890239498,"node_id":"IC_kwDOAAMmUc5wqsQK","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-13T01:36:24Z","updated_at":"2024-01-13T01:36:24Z","author_association":"CONTRIBUTOR","body":"Thanks for trying the settings out.\r\n\r\n> The replica access master using load balancer , the timeout in load balancer is 2 min (120 sec), we see replication crashes after 2 mins for all databases , but it restarts automatically.\r\n\r\nHmm, nothing obvious then jumps out just from the description above.\r\n\r\nWonder if you can collaborate with the load balancer team to see if they'd make an exception for `_changes` feed replication call to make it not buffer and not timeout as much.\r\n\r\nAlso, perhaps try upgrading to the latest 3.3.3 release.\r\n\r\nIf that doesn't work, try to pick a particular replication and see if you get access logs from the load balancer and the couchdb replication host and endpoint to see exactly where it stops. Is it waiting on a particular request, or what's the latest request made.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1890239498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894235213","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1894235213","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1894235213,"node_id":"IC_kwDOAAMmUc5w57xN","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T17:56:36Z","updated_at":"2024-01-16T17:56:36Z","author_association":"CONTRIBUTOR","body":"Interestingly enough, re-enabling s390x now shows a discrepancy in the new fast_pbkdf2 module on s390x:\r\n\r\n```\r\n[2024-01-16T17:51:39.919Z]   module 'couch_passwords_tests'\r\n[2024-01-16T17:51:39.919Z]     PBKDF2\r\n[2024-01-16T17:51:39.919Z]       couch_passwords_tests:20: pbkdf2_test_ (Iterations: 1, length: 20)...*failed*\r\n[2024-01-16T17:51:39.919Z] in function couch_passwords_tests:'-pbkdf2_test_/0-fun-1-'/0 (test/eunit/couch_passwords_tests.erl, line 22)\r\n[2024-01-16T17:51:39.919Z] in call from eunit_test:run_testfun/1 (eunit_test.erl, line 71)\r\n[2024-01-16T17:51:39.919Z] in call from eunit_proc:run_test/1 (eunit_proc.erl, line 531)\r\n[2024-01-16T17:51:39.920Z] in call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 356)\r\n[2024-01-16T17:51:39.920Z] in call from eunit_proc:handle_test/2 (eunit_proc.erl, line 514)\r\n[2024-01-16T17:51:39.920Z] in call from eunit_proc:tests_inorder/3 (eunit_proc.erl, line 456)\r\n[2024-01-16T17:51:39.920Z] in call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 346)\r\n[2024-01-16T17:51:39.920Z] in call from eunit_proc:run_group/2 (eunit_proc.erl, line 570)\r\n[2024-01-16T17:51:39.920Z] **error:{assertEqual,[{module,couch_passwords_tests},\r\n[2024-01-16T17:51:39.920Z]               {line,22},\r\n[2024-01-16T17:51:39.920Z]               {expression,\"couch_passwords : pbkdf2 ( << \\\"password\\\" >> , << \\\"salt\\\" >> , 1 , 20 )\"},\r\n[2024-01-16T17:51:39.920Z]               {expected,<<\"0c60c80f961f0e71f3a9b524af6012062fe037a6\">>},\r\n[2024-01-16T17:51:39.920Z]               {value,<<\"f35fbe4aae65fbc6f43df01e6bb6c86f9f75db74\">>}]}\r\n[2024-01-16T17:51:39.920Z]   output:<<\"\">>\r\n[2024-01-16T17:51:39.920Z] \r\n[2024-01-16T17:51:39.920Z]       couch_passwords_tests:26: pbkdf2_test_ (Iterations: 2, length: 20)...*failed*\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894235213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894438503","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1894438503","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1894438503,"node_id":"IC_kwDOAAMmUc5w6tZn","user":{"login":"rposts","id":12901455,"node_id":"MDQ6VXNlcjEyOTAxNDU1","avatar_url":"https://avatars.githubusercontent.com/u/12901455?v=4","gravatar_id":"","url":"https://api.github.com/users/rposts","html_url":"https://github.com/rposts","followers_url":"https://api.github.com/users/rposts/followers","following_url":"https://api.github.com/users/rposts/following{/other_user}","gists_url":"https://api.github.com/users/rposts/gists{/gist_id}","starred_url":"https://api.github.com/users/rposts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rposts/subscriptions","organizations_url":"https://api.github.com/users/rposts/orgs","repos_url":"https://api.github.com/users/rposts/repos","events_url":"https://api.github.com/users/rposts/events{/privacy}","received_events_url":"https://api.github.com/users/rposts/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T20:09:57Z","updated_at":"2024-01-16T20:09:57Z","author_association":"NONE","body":"@nickva I will get someone from my team to look into it as well - tx!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894438503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894443108","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1894443108","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1894443108,"node_id":"IC_kwDOAAMmUc5w6uhk","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T20:12:51Z","updated_at":"2024-01-16T20:12:51Z","author_association":"CONTRIBUTOR","body":"Thank you, @rposts. It might endianness related.\r\n\r\nSince last time we ran the CI worker we included this library: https://github.com/esl/fast_pbkdf2/blob/main/c_src/fast_pbkdf2.c I wonder if it just make an implicit assumption that it's handling little endian data always.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894443108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894605327","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1894605327","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1894605327,"node_id":"IC_kwDOAAMmUc5w7WIP","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T22:13:24Z","updated_at":"2024-01-16T22:13:24Z","author_association":"CONTRIBUTOR","body":"Could [this](https://github.com/esl/fast_pbkdf2/blob/d079c45a5a9b9d6c9158a8082e7329de5a0b38fb/c_src/fast_pbkdf2.c#L41) and [this](https://github.com/esl/fast_pbkdf2/blob/d079c45a5a9b9d6c9158a8082e7329de5a0b38fb/c_src/fast_pbkdf2.c#L53) be the reason?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894605327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894653869","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1894653869","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1894653869,"node_id":"IC_kwDOAAMmUc5w7h-t","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T22:57:32Z","updated_at":"2024-01-16T22:57:32Z","author_association":"CONTRIBUTOR","body":"That looks plausible, thanks for taking a look, @big-r81 \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1894653869/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1897106068","html_url":"https://github.com/apache/couchdb/pull/4962#issuecomment-1897106068","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4962","id":1897106068,"node_id":"IC_kwDOAAMmUc5xE4qU","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-17T22:18:47Z","updated_at":"2024-01-17T22:18:47Z","author_association":"CONTRIBUTOR","body":"After manually trying a few shard moves locally, the default scheduler interval seemed a bit long. It would be nice on average to react a bit quicker to shard map changes so decided to use `{shards_db_check_msec, Interval div 2}` instead of `{[skip_ddocs, {dbs_check_msec, Interval}}`. This way the shard map checks happens at least once before each scheduling  interval.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1897106068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1898775947","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1898775947","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1898775947,"node_id":"IC_kwDOAAMmUc5xLQWL","user":{"login":"namrata-ibm","id":21953668,"node_id":"MDQ6VXNlcjIxOTUzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/21953668?v=4","gravatar_id":"","url":"https://api.github.com/users/namrata-ibm","html_url":"https://github.com/namrata-ibm","followers_url":"https://api.github.com/users/namrata-ibm/followers","following_url":"https://api.github.com/users/namrata-ibm/following{/other_user}","gists_url":"https://api.github.com/users/namrata-ibm/gists{/gist_id}","starred_url":"https://api.github.com/users/namrata-ibm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrata-ibm/subscriptions","organizations_url":"https://api.github.com/users/namrata-ibm/orgs","repos_url":"https://api.github.com/users/namrata-ibm/repos","events_url":"https://api.github.com/users/namrata-ibm/events{/privacy}","received_events_url":"https://api.github.com/users/namrata-ibm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-18T16:07:06Z","updated_at":"2024-01-18T16:07:06Z","author_association":"NONE","body":"@nickva The issue in fast_pbkdf2 is endianness related. With a few changes in it, `couch_passwords_tests` passed on an s390x system. I am working on adding the changes via PR to fast_pbkdf2. Thank you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1898775947/reactions","total_count":4,"+1":1,"-1":0,"laugh":0,"hooray":3,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1905859948","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1905859948","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1905859948,"node_id":"IC_kwDOAAMmUc5xmR1s","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T11:39:20Z","updated_at":"2024-01-23T11:39:20Z","author_association":"MEMBER","body":"Sorry, I did mean to send feedback when I saw this ages ago.\r\n\r\nI'm a little concerned at the increase in messages here (every `n*q` shard for every `_find` request will send a message for each row it processes?) to workaround a problem that, perhaps, we should instead fix directly?\r\n\r\nSpecifically, would it not be possible to alter how we implement the end of the workers, so they do get an opportunity to send their final stats while exiting (as their exit reason, say, which I believe we can capture).\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1905859948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906124694","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906124694","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906124694,"node_id":"IC_kwDOAAMmUc5xnSeW","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T14:02:55Z","updated_at":"2024-01-23T14:02:55Z","author_association":"CONTRIBUTOR","body":"@rnewson that is a fair concern.  Even though we have started to explore ways to make sure that the `complete` message is delivered and could be processed timely, note that @chewbranca's recent work on Couch Stats Resource Tracker (in #4812) promotes this streaming approach.  If he did not start working on this and if he did not do some preliminary performance benchmarks where it was supported, I would not have thought about retrying with #4735 again.\r\n\r\nBased on the discussion with @chewbranca and others, the main idea is that these rolling execution statistics would be anyway superseded by the CSRT framework at some later point.  But it is not clear when it will be finished and merged, and until that happens I still would like to have a simplified version of that added to `main` so that we could improve on the reliability of these statistics and everything that may build upon that (through the extensibility of `couch_stats`) now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906124694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906370409","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906370409","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906370409,"node_id":"IC_kwDOAAMmUc5xoOdp","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T15:56:36Z","updated_at":"2024-01-23T15:56:36Z","author_association":"CONTRIBUTOR","body":"Would some batching work to accumulate stats for some time (100 msec?), and only send stats intermittently? It might miss some stats at the end but for a long running request it should capture the stats as it goes along without emitting too many messages?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906370409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906375938","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906375938","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906375938,"node_id":"IC_kwDOAAMmUc5xoP0C","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T15:59:18Z","updated_at":"2024-01-23T15:59:18Z","author_association":"CONTRIBUTOR","body":"@nickva currently, the M/R `complete` message is used as a cue to submit the statistics.  If this is not handled properly, it does not matter if there is batching or not, we will miss some data at the end.  For the details, please see #4735.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906375938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906398660","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906398660","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906398660,"node_id":"IC_kwDOAAMmUc5xoVXE","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T16:10:23Z","updated_at":"2024-01-23T16:10:23Z","author_association":"CONTRIBUTOR","body":"@pgj the idea is that it would be the difference between not sending any data back if `complete` doesn't run, so for an hour long running request we'd have no stats for the whole hour, or, send most of the data back and only miss the last few msec or so. That is if finalization would be tricky to do like @rnewson suggested. and sending messages for every row is expensive.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906398660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906463427","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906463427","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906463427,"node_id":"IC_kwDOAAMmUc5xolLD","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T16:37:33Z","updated_at":"2024-01-23T16:37:33Z","author_association":"CONTRIBUTOR","body":"I believe this does not work for short-lived requests.  Actually, the real cause of this problem is a race condition: workers often die earlier they could touch the `complete` message due to their untimely cancellation.  In such cases, zero counts are observed, therefore the `_find` results are invisible.\r\n\r\nBut why is the increase in the message count problematic?  @chewbranca's upcoming is much more about the same approach.  Or did I miss something, perhaps I misunderstood that?  Is not there an optimization somewhere down the stack that enables [coalesencing](https://en.wikipedia.org/wiki/Coalescing_(computer_science)) of messages?  The messages would not increase the required bandwith much due to their small size...?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906463427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906853368","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906853368","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906853368,"node_id":"IC_kwDOAAMmUc5xqEX4","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T20:18:05Z","updated_at":"2024-01-23T20:18:05Z","author_association":"CONTRIBUTOR","body":"I was mainly suggesting a way to have a bound on the uncertainty in the stats, if it the increase in messages is a problem. It could be a time-bound (milliseconds) or doc examined count (if N > 100 emit ...) bound. It's a half-way hack, it's better than getting no stats at all, but maybe less expensive than emitting stats for every row. But, I don't know if it's a performance issue, I think you and @chewbranca did some measurements? \r\n\r\n> In such cases, zero counts are observed, therefore the _find results are invisible.\r\n\r\nFrom what I remember in mango the issue was happening when we have a `limit` specified? With a `limit` we spawn all the workers with the same limit value but we will stop sooner based on when we hit the limit on the coordinator side. So then, some workers won't get a chance to emit a `completed` message and will keep emitting rows, others will emit a `completed` message but the coordinator by that time is already stopping and won't care. When the coordinator stops it will immediately issue a `kill_all` rexi call to terminate all the workers. Is that roughly what was happing?\r\n\r\n> Is not there an optimization somewhere down the stack that enables [coalesencing](https://en.wikipedia.org/wiki/Coalescing_(computer_science)) of messages?\r\n\r\nI don't know if rexi has message batching. There is buffering if the send channel is blocked, and there is an un-acked message limit. But  you're also right that the lower level dist and tcp channel will probably do the batching depending on how the environment is set up.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906853368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906918081","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1906918081","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1906918081,"node_id":"IC_kwDOAAMmUc5xqULB","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-23T21:06:29Z","updated_at":"2024-01-23T21:06:29Z","author_association":"MEMBER","body":"If @chewbranca's work would also significantly increase message count in a way that adversely affected performance (or latency of other requests trying to make progress inbetween such messages) I would also want to see that improved before it was merged (and, if it were unavoidably severe, _not_ merged). I'll focus on reviewing the work in hand here and not speculate further about other changes until they are ready for review.\r\n\r\nI like nick's middle ground of having the workers send info periodically, we would benefit from seeing those stats rising during the processing of a long request (though I think `_find` unlike `_view` has a short-ish finite timeout by default)\r\n\r\n@pgj's point is also relevant, very short requests won't appear at all, and to my mind that lines up with my original point that we should improve how the end of the request is handled. Ideally we would wait for all workers to return their final message (perhaps as their exit reason as already noted), but without forcing the user to wait for more responses than are needed to form a complete response (i.e, the first response from each shard range).\r\n\r\nPut simply, it was not anticipated that we would care about the other workers when this was built, the code fires off the jobs and wants to return as soon as it can, killing the remaining processes. A good fix here should tackle that directly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1906918081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910207855","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1910207855","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1910207855,"node_id":"IC_kwDOAAMmUc5x23Vv","user":{"login":"namrata-ibm","id":21953668,"node_id":"MDQ6VXNlcjIxOTUzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/21953668?v=4","gravatar_id":"","url":"https://api.github.com/users/namrata-ibm","html_url":"https://github.com/namrata-ibm","followers_url":"https://api.github.com/users/namrata-ibm/followers","following_url":"https://api.github.com/users/namrata-ibm/following{/other_user}","gists_url":"https://api.github.com/users/namrata-ibm/gists{/gist_id}","starred_url":"https://api.github.com/users/namrata-ibm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrata-ibm/subscriptions","organizations_url":"https://api.github.com/users/namrata-ibm/orgs","repos_url":"https://api.github.com/users/namrata-ibm/repos","events_url":"https://api.github.com/users/namrata-ibm/events{/privacy}","received_events_url":"https://api.github.com/users/namrata-ibm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-25T13:19:42Z","updated_at":"2024-01-25T13:21:25Z","author_association":"NONE","body":"@nickva @big-r81 The issue with fast_pbkdf2 has been resolved via [PR](https://github.com/esl/fast_pbkdf2/pull/12).\r\nWanted to know how those changes are picked up here? Is fast_pbkdf2 updated on regular basis?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910207855/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910230195","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1910230195","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1910230195,"node_id":"IC_kwDOAAMmUc5x28yz","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-25T13:32:44Z","updated_at":"2024-01-25T13:32:44Z","author_association":"CONTRIBUTOR","body":"Hey @namrata-ibm, you update the files from upstream like [here](https://github.com/apache/couchdb/commit/42c24843e2759144381b8c2ae80dd2a003ccc899).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910230195/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910240011","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1910240011","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1910240011,"node_id":"IC_kwDOAAMmUc5x2_ML","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-25T13:38:48Z","updated_at":"2024-01-25T13:38:48Z","author_association":"CONTRIBUTOR","body":"and we should wait until https://github.com/esl/fast_pbkdf2/pull/13 is merged.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910240011/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910307498","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1910307498","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1910307498,"node_id":"IC_kwDOAAMmUc5x3Pqq","user":{"login":"NelsonVides","id":27267603,"node_id":"MDQ6VXNlcjI3MjY3NjAz","avatar_url":"https://avatars.githubusercontent.com/u/27267603?v=4","gravatar_id":"","url":"https://api.github.com/users/NelsonVides","html_url":"https://github.com/NelsonVides","followers_url":"https://api.github.com/users/NelsonVides/followers","following_url":"https://api.github.com/users/NelsonVides/following{/other_user}","gists_url":"https://api.github.com/users/NelsonVides/gists{/gist_id}","starred_url":"https://api.github.com/users/NelsonVides/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NelsonVides/subscriptions","organizations_url":"https://api.github.com/users/NelsonVides/orgs","repos_url":"https://api.github.com/users/NelsonVides/repos","events_url":"https://api.github.com/users/NelsonVides/events{/privacy}","received_events_url":"https://api.github.com/users/NelsonVides/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-25T14:19:03Z","updated_at":"2024-01-25T14:19:03Z","author_association":"NONE","body":"Fast-PBKDF2 all merged and new release created: https://hex.pm/packages/fast_pbkdf2/1.0.6, thanks for the contributions :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1910307498/reactions","total_count":5,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":4,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1912843454","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1912843454","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1912843454,"node_id":"IC_kwDOAAMmUc5yA6y-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T23:55:38Z","updated_at":"2024-01-27T00:29:37Z","author_association":"CONTRIBUTOR","body":"I noticed one successful run on s390x!\r\n\r\n<img width=\"293\" alt=\"Screenshot 2024-01-26 at 6 54 09 PM\" src=\"https://github.com/apache/couchdb/assets/211822/62bb3975-427e-4bdc-b132-e4c981d67f7b\">\r\n\r\nI'll restart it to see a get a few more successful runs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1912843454/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913089360","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1913089360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1913089360,"node_id":"IC_kwDOAAMmUc5yB21Q","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T09:16:36Z","updated_at":"2024-01-27T09:16:36Z","author_association":"CONTRIBUTOR","body":"This looks good. Thanks @namrata-ibm and @NelsonVides for your support.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913089360/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913159895","html_url":"https://github.com/apache/couchdb/issues/4926#issuecomment-1913159895","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4926","id":1913159895,"node_id":"IC_kwDOAAMmUc5yCIDX","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T13:44:23Z","updated_at":"2024-01-27T13:44:23Z","author_association":"CONTRIBUTOR","body":"I am closing this topic as there has been no response.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913159895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913160554","html_url":"https://github.com/apache/couchdb/issues/4907#issuecomment-1913160554","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4907","id":1913160554,"node_id":"IC_kwDOAAMmUc5yCINq","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T13:47:27Z","updated_at":"2024-01-27T13:47:27Z","author_association":"CONTRIBUTOR","body":"Closing this, because a workaround was given.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913160554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913161452","html_url":"https://github.com/apache/couchdb/issues/4815#issuecomment-1913161452","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4815","id":1913161452,"node_id":"IC_kwDOAAMmUc5yCIbs","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T13:50:10Z","updated_at":"2024-01-27T13:50:10Z","author_association":"CONTRIBUTOR","body":"I am closing this topic as there has been no response.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913161452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913167636","html_url":"https://github.com/apache/couchdb/issues/4706#issuecomment-1913167636","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4706","id":1913167636,"node_id":"IC_kwDOAAMmUc5yCJ8U","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:05:01Z","updated_at":"2024-01-27T14:05:01Z","author_association":"CONTRIBUTOR","body":"Closing this, fixed with fc05f26 for 3.3.x and 52ef014 for main.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913167636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913168407","html_url":"https://github.com/apache/couchdb/issues/4768#issuecomment-1913168407","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4768","id":1913168407,"node_id":"IC_kwDOAAMmUc5yCKIX","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:07:33Z","updated_at":"2024-01-27T14:07:33Z","author_association":"CONTRIBUTOR","body":"I am closing this topic as there has been no response.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913168407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913175380","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1913175380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1913175380,"node_id":"IC_kwDOAAMmUc5yCL1U","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:38:59Z","updated_at":"2024-01-27T14:38:59Z","author_association":"CONTRIBUTOR","body":"@waversky Hi, is this still a problem (with the latest version)?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913175380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913175959","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1913175959","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1913175959,"node_id":"IC_kwDOAAMmUc5yCL-X","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:41:21Z","updated_at":"2024-01-27T14:41:21Z","author_association":"CONTRIBUTOR","body":"I am closing this topic as there has been no response.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913175959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913177221","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1913177221","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1913177221,"node_id":"IC_kwDOAAMmUc5yCMSF","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:46:38Z","updated_at":"2024-01-27T14:46:38Z","author_association":"CONTRIBUTOR","body":"Closing this ticket for now, compiling from source worked for the user and new binaries were published.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913177221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913179862","html_url":"https://github.com/apache/couchdb/issues/3333#issuecomment-1913179862","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3333","id":1913179862,"node_id":"IC_kwDOAAMmUc5yCM7W","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:58:44Z","updated_at":"2024-01-27T14:58:44Z","author_association":"CONTRIBUTOR","body":"Hey @sklassen I would close this for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913179862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913251703","html_url":"https://github.com/apache/couchdb/pull/4963#issuecomment-1913251703","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4963","id":1913251703,"node_id":"IC_kwDOAAMmUc5yCed3","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T16:36:35Z","updated_at":"2024-01-27T16:36:35Z","author_association":"CONTRIBUTOR","body":"There were 4 successful CI runs in row, so it looks quite promising. I'll merge the PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913251703/reactions","total_count":4,"+1":0,"-1":0,"laugh":0,"hooray":4,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913287045","html_url":"https://github.com/apache/couchdb/issues/2380#issuecomment-1913287045","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2380","id":1913287045,"node_id":"IC_kwDOAAMmUc5yCnGF","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T18:36:27Z","updated_at":"2024-01-27T18:36:27Z","author_association":"CONTRIBUTOR","body":"Closing this (CouchDB v2.3.1).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913287045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913287685","html_url":"https://github.com/apache/couchdb/issues/2219#issuecomment-1913287685","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2219","id":1913287685,"node_id":"IC_kwDOAAMmUc5yCnQF","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T18:38:12Z","updated_at":"2024-01-27T18:38:12Z","author_association":"CONTRIBUTOR","body":"Closing this (CouchDB 2.3.1).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913287685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913318455","html_url":"https://github.com/apache/couchdb/issues/3576#issuecomment-1913318455","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3576","id":1913318455,"node_id":"IC_kwDOAAMmUc5yCuw3","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T20:00:45Z","updated_at":"2024-01-27T20:00:45Z","author_association":"CONTRIBUTOR","body":"Can [this](https://www.erlang.org/doc/apps/kernel/logger_chapter.html#controlling-bursts-of-log-requests) help us to rate the output?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913318455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913331130","html_url":"https://github.com/apache/couchdb/issues/3576#issuecomment-1913331130","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3576","id":1913331130,"node_id":"IC_kwDOAAMmUc5yCx26","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T20:45:41Z","updated_at":"2024-01-27T20:45:41Z","author_association":"CONTRIBUTOR","body":"That seems interesting, yeah it could work. We'd specifically want to rate limit some messages, info or out of disk space ones but we may want make sure we don't limit critical or other such errors.\r\n\r\nOur current log system was designed before the new logging system was written in Erlang/OTP so we could probably update it to simplify it and take better advantage of the new features.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1913331130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1914662730","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1914662730","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1914662730,"node_id":"IC_kwDOAAMmUc5yH29K","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T13:08:10Z","updated_at":"2024-01-29T13:08:10Z","author_association":"CONTRIBUTOR","body":"> I was mainly suggesting a way to have a bound on the uncertainty in the stats, if it the increase in messages is a problem.\r\n\r\n@nickva I am afraid we cannot allow any uncertainty in the statistics if downstream consumers wanted to build uses cases on top of this mechanism that involves billing.\r\n\r\n> I don't know if it's a performance issue, I think you and @chewbranca did some measurements?\r\n\r\n@chewbranca might have some performance results on his side, but I have not collected any myself.  Probably I should do some just for curiosity and for including here.\r\n\r\n> From what I remember in mango the issue was happening when we have a `limit` specified?\r\n\r\nYes, but if I recall correctly there is always a limit assigned for the `_find` requests.  I believe the emphasis is on the relative distance of the limit and the number of results returned.  It is technically a result of a race condition: if the `stop` signal arrives at the wrong time, either the `completed` message is not emitted or it is not handled in the time.\r\n\r\n> Ideally we would wait for all workers to return their final message (perhaps as their exit reason as already noted), but without forcing the user to wait for more responses than are needed to form a complete response (i.e, the first response from each shard range).\r\n\r\nThis can be done easily: replace the `stop` for an `ok` in `mango_cursor_view:handle_doc/2`.  Actually, this is also case that could be tested for performance.  Maybe it is not that expensive and sending the stats for every row.\r\n\r\n> Put simply, it was not anticipated that we would care about the other workers when this was built, the code fires off the jobs and wants to return as soon as it can, killing the remaining processes. A good fix here should tackle that directly.\r\n\r\n@rnewson do you have any pointers or ideas where to start with this?  In the previous discussions, you had [some suggestions](https://github.com/apache/couchdb/pull/4735#issuecomment-1715743087), but I could not make them work.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1914662730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1915687017","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1915687017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1915687017,"node_id":"IC_kwDOAAMmUc5yLxBp","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T22:28:58Z","updated_at":"2024-01-30T06:23:38Z","author_association":"CONTRIBUTOR","body":"> @nickva I am afraid we cannot allow any uncertainty in the statistics if downstream consumers wanted to build uses cases on top of this mechanism that involves billing.\r\n\r\nHmm, if billing is involved then even the current implementation of the PR, will not produce repeatable results unless we're talking about Q=1 databases only. I was under the impression that this is mostly about providing slightly more accurate results (less 0 ones). Maybe this uncertainty is ok, depending on the downstream consumers' requirements, but if billing is involved, it's good to make that clear.\r\n\r\nTo convince ourselves I quickly patched an old script I had to run a few _find results https://gist.github.com/nickva/31e0f1f1c2a5a651259dc897a1bb5cfa\r\n\r\nWith 5000 docs we get a wild variety of results:\r\n\r\n```\r\n% make && ./dev/run --admin=adm:pass -n 1\r\n\r\nQ=8\r\n\r\n(venv3) % ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '8'}\r\n * creating 5000 docs with val range 200\r\n * created docs in 3.5 seconds\r\n * calling _find with selector: {'x': 50}\r\n * _find in 0.1 seconds 10 docs {'total_keys_examined': 4253, 'total_docs_examined': 4253, 'total_quorum_docs_examined': 0, 'results_returned': 10, 'execution_time_ms': 66.808}\r\n(venv3) % ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '8'}\r\n * creating 5000 docs with val range 200\r\n * created docs in 3.5 seconds\r\n * calling _find with selector: {'x': 50}\r\n * _find in 0.1 seconds 10 docs {'total_keys_examined': 4222, 'total_docs_examined': 4222, 'total_quorum_docs_examined': 0, 'results_returned': 10, 'execution_time_ms': 67.306}\r\n(venv3) % ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '8'}\r\n * creating 5000 docs with val range 200\r\n * created docs in 3.6 seconds\r\n * calling _find with selector: {'x': 50}\r\n * _find in 0.1 seconds 10 docs {'total_keys_examined': 4218, 'total_docs_examined': 4218, 'total_quorum_docs_examined': 0, 'results_returned': 10, 'execution_time_ms': 68.228}\r\n\r\nQ=16\r\n\r\n(venv3) % ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '16'}\r\n * creating 5000 docs with val range 200\r\n * created docs in 5.1 seconds\r\n * calling _find with selector: {'x': 50}\r\n * _find in 0.1 seconds 10 docs {'total_keys_examined': 4975, 'total_docs_examined': 4975, 'total_quorum_docs_examined': 0, 'results_returned': 10, 'execution_time_ms': 61.336}\r\n(venv3) % ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '16'}\r\n * creating 5000 docs with val range 200\r\n * created docs in 4.8 seconds\r\n * calling _find with selector: {'x': 50}\r\n * _find in 0.1 seconds 10 docs {'total_keys_examined': 4889, 'total_docs_examined': 4889, 'total_quorum_docs_examined': 0, 'results_returned': 10, 'execution_time_ms': 65.843}\r\n(venv3) % ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '16'}\r\n * creating 5000 docs with val range 200\r\n * created docs in 5.5 seconds\r\n * calling _find with selector: {'x': 50}\r\n * _find in 0.1 seconds 10 docs {'total_keys_examined': 4931, 'total_docs_examined': 4931, 'total_quorum_docs_examined': 0, 'results_returned': 10, 'execution_time_ms': 68.646}\r\n```\r\n\r\n\r\nTo be clear, I don't know if it is a performance impact to send all the  stats rows, I was merely mentioning a possible strategy to apply if it is a concern. All this given the assumption there is already some variability in results anyway. \r\n\r\nI am slightly concerned with the synchronous stream finalization strategy: we'd dealing with a streaming protocol during the active phase, only to switch back to a synchronous termination, which involves extra waiting applied to every request (finalize all Q workers, wait for all Q workers to respond, possibly also handle broken, timed out cases, etc). That would add some fixed delay to all the requests (extra 10-20 msec?). Maybe we could do the finalization after we respond the user, but we'd have to see how that interacts with request resource cleanup part.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1915687017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1915703530","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1915703530","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1915703530,"node_id":"IC_kwDOAAMmUc5yL1Dq","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T22:42:47Z","updated_at":"2024-01-29T22:58:56Z","author_association":"CONTRIBUTOR","body":"I have done some preliminary [benchmarking with `k6.io`](https://github.com/pgj/couchdb-k6/tree/main/mango/couchdb_4958) on my Apple M1 Max, with 3 nodes (r=2, w=2, q=2), 100K documents, `/{db}/_find` queries of various complexity, 2 minutes warmup and 5 minutes run (where `count` tells how many queries were completed, the higher is the better).\r\n\r\nHere are the results:\r\n\r\n- `couchdb/main` (baseline, as of `1f77e2e3`):\r\n  - 1 thread: `min=0.60ms max=8676.29ms  p(95)=6259.13ms p(98)=6631.37ms p(99)=7139.79ms, count=240`\r\n  - 2 threads: `min=0.82ms max=17990.32ms p(95)=13364.63ms p(98)=13960.05ms p(99)=14177.66ms, count=206`\r\n\r\n- `pgj/feat/mango/rolling-execution-stats` (rebased to `couchdb/main`):\r\n  - 1 thread: `min=0.82ms max=11053.97ms p(95)=6880.65ms p(98)=7219.82ms  p(99)=7493.13ms,  count=196`\r\n  - 2 threads: `min=0.73ms max=20467.99ms p(95)=15500.12ms p(98)=17401.71ms p(99)=19277.02ms, count=189`\r\n\r\n- `couchdb/main` where `stop` is replaced for `ok` in `mango_cursor_view:handle_doc/2`:\r\n  - 1 thread: `min=1.67ms max=15335.05ms p(95)=7943.36ms p(98)=9496.31ms  p(99)=12347.95ms, count=88`\r\n  - 2 threads: `min=0.82ms max=30654.26ms p(95)=16628.83ms p(98)=17278.53ms p(99)=20883.10ms, count=75`\r\n\r\nThere seem to be a 10-20% performance penalty for the streaming statistics, while the synchronous termination causes 66%.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1915703530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1915719981","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1915719981","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1915719981,"node_id":"IC_kwDOAAMmUc5yL5Et","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T22:56:35Z","updated_at":"2024-01-29T22:56:35Z","author_association":"CONTRIBUTOR","body":"> Hmm, if billing is involved then even the current implementation of the PR, will not produce repeatable results unless we're talking about Q=1 databases only.\r\n\r\nI do not think it should produce repeatable results.  If a query happened to cause the scanning of 2,000 documents once and then 1,500 for another instance is acceptable — that is how the system works.  But returning zero in either case is definitely a miss on the side of accounting.\r\n\r\n> To convince ourselves I quickly patched an old script I had to run a few _find results\r\n\r\nGreat, thanks @nickva!\r\n\r\n> To be clear, I don't know if it is a performance impact to send all the stats rows\r\n\r\nUnfortunately there is (see my comment above) :-(\r\n\r\n> I am slightly concerned with the synchronous stream finalization strategy: we'd dealing with a streaming protocol during the active phase, only to switch back to a synchronous termination, which involves extra waiting applied to every request (finalize all Q workers, wait for all Q workers to respond, possibly also handle broken, timed out cases, etc).\r\n\r\nIf that is what replacing `stop` for `ok` in `mango_cursor_view:handle_doc/2` means, then the performance is much worse than that of streaming statistics.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1915719981/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1916911878","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1916911878","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1916911878,"node_id":"IC_kwDOAAMmUc5yQcEG","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T13:58:23Z","updated_at":"2024-01-30T13:58:23Z","author_association":"MEMBER","body":"I wonder whether we need to decouple the implementation of statistics collection for user-facing results when `execution_stats=true` is specified vs the `chttpd_stats_reporter` use case.\r\n\r\nFor the user-facing case, performance of a few extra 10s of ms seems unlikely to matter so much as it's typically a one-time analysis (e.g. via Fauxton) - a correct answer via a synchronous solution seems appropriate.\r\n\r\nFor the `chttpd_stats_reporter` case, we could stream stats directly to `chttpd_stats_reporter` instead of going through the same framework that execution stats uses, and would be free to complete sending statistics after the response has been returned to the user.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1916911878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1916935646","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1916935646","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1916935646,"node_id":"IC_kwDOAAMmUc5yQh3e","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T14:05:58Z","updated_at":"2024-01-30T14:05:58Z","author_association":"MEMBER","body":"noting that \"billing\" of requests is not a couchdb concern.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1916935646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1916993995","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1916993995","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1916993995,"node_id":"IC_kwDOAAMmUc5yQwHL","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T14:29:11Z","updated_at":"2024-01-30T14:29:11Z","author_association":"CONTRIBUTOR","body":"> noting that \"billing\" of requests is not a couchdb concern.\r\n\r\nYes, I agree.  But it is CouchDB that could ensure that the data that is going to `chttpd_stats_reporter` could be trusted and provide support for scenarios like billing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1916993995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1918043870","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1918043870","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1918043870,"node_id":"IC_kwDOAAMmUc5yUwbe","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T22:50:04Z","updated_at":"2024-01-30T22:50:04Z","author_association":"MEMBER","body":"A higher level question occurs. It seems to me you want to account for the cost of the workers that _did not contribute_ to the result (they were killed by the coordinator because a response from another copy was received first), whereas couchdb has an interest in not doing the unnecessary work. Did I misunderstand what the \"missing\" data is here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1918043870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1918072757","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1918072757","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1918072757,"node_id":"IC_kwDOAAMmUc5yU3e1","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T23:14:32Z","updated_at":"2024-01-30T23:14:32Z","author_association":"MEMBER","body":"actually, I'm going to assume none of us mean the execution stats of non-contributing workers.\r\n\r\nWhat I think is being proposed here sounds like an attempt to fix the current, and by implication quite weird, execution stats code.\r\n\r\nOnly a `_find` request would read a view row or fetch a document and _not_ pass this to the client, so the execution stats only apply here, and only because it is useful to compare the number of rows retrieved versus the number of rows (or docs) retrieved to find those rows (which could be a much larger number).\r\n\r\nby inference the execution stats have been calculated and transmitted out-of-band relative to the returned rows, and this, if I'm right, is a mistake we should fix.\r\n\r\ni.e, I suggest that the workers include the number of rows/docs they examined and discarded with each matching row they return to the coordinator. this is a small amount of extra data to an existing message. For very efficient query executions, it's the number 0 on every row. The coordinator can obviously count how many rows it passed to the client and can sum these new numbers to calculate how many rows/docs were examined. As its the same message, we can't get the wrong answer.\r\n\r\nNow I'll wait until the morning to learn how completely wrong I am about the problem.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1918072757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1919029569","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1919029569","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1919029569,"node_id":"IC_kwDOAAMmUc5yYhFB","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T12:40:21Z","updated_at":"2024-01-31T12:40:21Z","author_association":"CONTRIBUTOR","body":"Thanks for sharing your thoughts @rnewson.\r\n\r\nYes, the execution stats are currently passed around in a dedicated `execution_stats` message but only at the end of the transmission.  The other, separate generic `complete` message is the cue for submitting `execution_stats` which may go missing if `complete` is dropped on early termination.\r\n\r\nThe problem is that this can happen even on a single-node cluster.  Although I can imagine the scenario you described, I am still inclined to believe that the use of `stop` is such a hard stop that it even shuts down the actual worker who actively contributed to the response.  Using `stop` in the view callback is on the coordinator — that is, it already has all the data it needs in order to complete serving the request.  But the worker does not have the chance to say \"okay, please find the execution stats in the next, final message\" because it is immediately stopped right after `stop` is received.  A remedy to this could be to let the worker hang around for a while to finalize the transmission that way, but it would also sacrifice some of the performance gain we are currently having with `stop`.  This technically leaves us with streaming.\r\n\r\nYour suggestion looks similar to the one which is contained in this PR.  However, I notice that you recommended to extend the `row` message (for `mango_cursor_view:handle_message/2`) directly and not to emit fine-grained, per-row `execution_stats` messages.  I can see a case that it works better performance-wise, and I am happy to do a benchmark with that approach as well.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1919029569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1919033815","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1919033815","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1919033815,"node_id":"IC_kwDOAAMmUc5yYiHX","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T12:43:06Z","updated_at":"2024-01-31T12:43:06Z","author_association":"MEMBER","body":"Essentially that,yes. But a bit further. The only execution stat we need at the row level is how many rows were examined but discarded prior to the row we are sending. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1919033815/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1919694608","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1919694608","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1919694608,"node_id":"IC_kwDOAAMmUc5ybDcQ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T18:28:48Z","updated_at":"2024-01-31T19:21:27Z","author_association":"CONTRIBUTOR","body":"Thanks for running the performance check, @pgj!\r\n\r\n> I do not think it should produce repeatable results. If a query happened to cause the scanning of 2,000 documents once and then 1,500 for another instance is acceptable — that is how the system works. But returning zero in either case is definitely a miss on the side of accounting.\r\n\r\nIt will depend not just on how many were scanned but also in what order they arrived and how they were merged at the coordinator. The idea is there is some fudge factor there as is. I updated the query script to query the API endpoint multiple times in a row for the same docs:\r\n\r\n```\r\n% ./findlimit.py\r\n * deleting http://127.0.0.1:15984/db\r\n * creating http://127.0.0.1:15984/db {'q': '16'}\r\n * creating 10000 docs with val range 100\r\n * created docs in 6.0 seconds\r\n * _find in 0.1 seconds 5 docs {'total_keys_examined': 3382, 'total_docs_examined': 3382, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 50.381}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3323, 'total_docs_examined': 3323, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 37.183}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3359, 'total_docs_examined': 3359, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 32.422}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3347, 'total_docs_examined': 3347, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 31.574}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3282, 'total_docs_examined': 3282, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 31.719}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3325, 'total_docs_examined': 3325, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 30.074}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3276, 'total_docs_examined': 3276, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 29.015}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3274, 'total_docs_examined': 3274, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 30.524}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3120, 'total_docs_examined': 3120, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 29.053}\r\n * _find in 0.0 seconds 5 docs {'total_keys_examined': 3368, 'total_docs_examined': 3368, 'total_quorum_docs_examined': 0, 'results_returned': 5, 'execution_time_ms': 31.881}\r\n * docs: 3382 - 3120 = 262\r\n```\r\n\r\nI like @rnewson's idea to add stats to  the view row. The `view_row` is a record, so we'd have to do a bit of tuple wrangling across multiple commits (PRs) to avoid breaking online cluster upgrades, but that's the cleanest solution overall. \r\n\r\nAs a bonus, we'd also then avoid odd out-of-order processing of stats like we have here: https://github.com/apache/couchdb/blob/2501fe69b06dd88611b4a3e290f080823476af70/src/fabric/src/fabric_view_all_docs.erl#L260-L274 Where we may accumulate worker stats even though we might not actually have processed the row emitted before.\r\n\r\nWith per-row stats we may miss some stats emitted by workers at the end from workers which sent the rows already, but they just didn't go towards producing the response. So there is some discrepancy between total work induced in the cluster as a result of the API request vs work which took place on the workers before the emitted rows, if those rows were included in the response.\r\n\r\n> For the chttpd_stats_reporter case, we could stream stats directly to chttpd_stats_reporter instead of going through the same framework that execution stats uses, and would be free to complete sending statistics after the response has been returned to the user.\r\n\r\nAh, that's interesting to think about chttpd_stats, @willholley.  That's in chttpd and it takes in request/response objects. But if we wanted to emit online stats for each request as it's being processed (a long running request), we could alter the API there such that each worker would get some set of request bits (path, principal, nonce, request id?...) passed to it (in #mrargs extras), and then the worker can report stats independently without having to shuffle them back to the coordinator. Kind of a larger change, but that way it could account for all the work generated as a side-effect of an API call, even if it didn't make as part of the response.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1919694608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1920969989","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1920969989","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1920969989,"node_id":"IC_kwDOAAMmUc5yf60F","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T10:12:15Z","updated_at":"2024-02-01T10:12:15Z","author_association":"CONTRIBUTOR","body":"I have implemented the half of @rnewson's suggestions and the code is now sending execution stats along with the view rows only.  That is still a separate message, but it already improved the performance (same configuration as above):\r\n\r\n- 1 thread: `min=0.79ms max=7556.06ms  p(95)=6461.86ms p(98)=6609.84ms p(99)=6741.12ms,  count=209`\r\n- 2 threads: `min=0.78ms max=31902.38ms p(95)=13449.74ms p(98)=14130.32ms p(99)=14873.91ms, count=191`\r\n\r\nIt seems to be only 5-10% off with this change only.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1920969989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1923263873","html_url":"https://github.com/apache/couchdb/issues/4372#issuecomment-1923263873","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4372","id":1923263873,"node_id":"IC_kwDOAAMmUc5yoq2B","user":{"login":"mattpr","id":1196252,"node_id":"MDQ6VXNlcjExOTYyNTI=","avatar_url":"https://avatars.githubusercontent.com/u/1196252?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpr","html_url":"https://github.com/mattpr","followers_url":"https://api.github.com/users/mattpr/followers","following_url":"https://api.github.com/users/mattpr/following{/other_user}","gists_url":"https://api.github.com/users/mattpr/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpr/subscriptions","organizations_url":"https://api.github.com/users/mattpr/orgs","repos_url":"https://api.github.com/users/mattpr/repos","events_url":"https://api.github.com/users/mattpr/events{/privacy}","received_events_url":"https://api.github.com/users/mattpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T07:51:50Z","updated_at":"2024-02-02T07:51:50Z","author_association":"NONE","body":"This is still happening on macOS BigSur with official `3.3.3-2` binary when trying to replicate from a remote couch on x86_64 Ubuntu running `3.2.2` (errors start and replication never recovers after just a few documents...replication state is stuck in \"running\" forever until couch is killed).\r\n\r\nI ensured all couch related processes were dead.  Cleared data folder.  Reinstalled from the downloaded binary, set a new password and ensured single-node dbs were added.\r\n\r\n```\r\nrm -rf ~/Library/Application\\ Support/CouchDB2\r\ncurl -X PUT http://admin:password@127.0.0.1:5984/_users\r\ncurl -X PUT http://admin:password@127.0.0.1:5984/_replicator\r\n\r\n```\r\n\r\nLogs just overflow with stuff like the following...\r\n\r\n```\r\n[info] 2024-02-01T15:16:23.306769Z couchdb@localhost <0.292.0> -------- couch_proc_manager <0.15052.0> died normal\r\n[info] 2024-02-01T15:16:23.308199Z couchdb@localhost <0.292.0> -------- couch_proc_manager <0.15050.0> died normal\r\n[error] 2024-02-01T15:16:23.308261Z couchdb@localhost <0.14603.0> -------- OS Process Error <0.15050.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2024-02-01T15:16:23.327742Z couchdb@localhost <0.292.0> -------- couch_proc_manager <0.15058.0> died normal\r\n[error] 2024-02-01T15:16:23.328449Z couchdb@localhost <0.904.0> -------- OS Process Error <0.15058.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2024-02-01T15:16:23.329652Z couchdb@localhost <0.292.0> -------- couch_proc_manager <0.15056.0> died normal\r\n[error] 2024-02-01T15:16:23.329709Z couchdb@localhost <0.901.0> -------- OS Process Error <0.15056.0> :: {os_process_error,{exit_status,134}}\r\n[info] 2024-02-01T15:16:23.341202Z couchdb@localhost <0.292.0> -------- couch_proc_manager <0.15061.0> died normal\r\n[error] 2024-02-01T15:16:23.341302Z couchdb@localhost <0.2045.0> -------- OS Process Error <0.15061.0> :: {os_process_error,{exit_status,134}}\r\n```\r\n\r\nInstalling with homebrew seems to resolve the issue.  So I guess just more problems with the official mac binary.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1923263873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1925960264","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1925960264","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1925960264,"node_id":"IC_kwDOAAMmUc5yy9JI","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-04T23:09:52Z","updated_at":"2024-02-04T23:09:52Z","author_association":"CONTRIBUTOR","body":"There is an updated version now where the stats are sent along with the row data.  Instead of creating a new record type, I switched to using maps and added support for coordinators and workers of the old version.  The benchmark shows good performance (same configuration as earlier):\r\n\r\n - 1 thread: `min=0.77ms max=9711.29ms  p(95)=5879.81ms p(98)=6864.91ms p(99)=7143.41ms,  count=248`\r\n - 2 threads: `min=0.60ms max=14197.50ms p(95)=13028.72ms p(98)=13755.92ms p(99)=13950.17ms, count=238`\r\n\r\nI tested this manually with old worker—new coordinator, and new worker—old coordinator configurations with a random set of `/{db}/_find` queries, and it was working.\r\n\r\nAlso, the combined message format revealed that in case of limits, there is always an extra key and sometimes and extra document examined.  Previously this information was lost since the corresponding `execution_stats` message could not make its way to the coordinator.\r\n\r\nThe only question that remains (for me) is whether in `#mrargs.extra`, a separate key should be created for the map-based row messages.  Currently, this is tied to `execution_stats_rolling`.  It obviously depends on maps, but it might make sense to introduce maps with its own dedicated `view_row_map` key e.g., even in a separate PR.  The `execution_stats_rolling` could then depend on the presence of this feature.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1925960264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1927892029","html_url":"https://github.com/apache/couchdb/pull/4973#issuecomment-1927892029","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4973","id":1927892029,"node_id":"IC_kwDOAAMmUc5y6Uw9","user":{"login":"jiahuili430","id":54631519,"node_id":"MDQ6VXNlcjU0NjMxNTE5","avatar_url":"https://avatars.githubusercontent.com/u/54631519?v=4","gravatar_id":"","url":"https://api.github.com/users/jiahuili430","html_url":"https://github.com/jiahuili430","followers_url":"https://api.github.com/users/jiahuili430/followers","following_url":"https://api.github.com/users/jiahuili430/following{/other_user}","gists_url":"https://api.github.com/users/jiahuili430/gists{/gist_id}","starred_url":"https://api.github.com/users/jiahuili430/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiahuili430/subscriptions","organizations_url":"https://api.github.com/users/jiahuili430/orgs","repos_url":"https://api.github.com/users/jiahuili430/repos","events_url":"https://api.github.com/users/jiahuili430/events{/privacy}","received_events_url":"https://api.github.com/users/jiahuili430/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T19:33:59Z","updated_at":"2024-02-05T21:28:31Z","author_association":"CONTRIBUTOR","body":"If we specify `--node-number=2`, do we need to change the default NODE in [`dev/remsh`](https://github.com/apache/couchdb/blob/main/dev/remsh#L14) and [`dev/remsh-tls`](https://github.com/apache/couchdb/blob/main/dev/remsh-tls#L14).\r\n\r\n```bash\r\n$ make devclean\r\n$ ./dev/run --admin=adm:pass --node-number=2 -n 2 --no-eval ‘dev/remsh’\r\n[ * ] Setup environment ... ok\r\n[ * ] Ensure CouchDB is built ... ok\r\n[ * ] Ensure Erlang boot script exists ... ok\r\n[ * ] Prepare configuration files ... ok\r\n[ * ] Start node node2 ... ok\r\n[ * ] Start node node3 ... ok\r\n[ * ] Check node at http://127.0.0.1:25984/ ... ok\r\n[ * ] Check node at http://127.0.0.1:35984/ ... ok\r\n[ * ] Running cluster setup ... ok\r\n[ * ] Exec command dev/remsh ... Erlang/OTP 25 [erts-13.2.2.5] [source] [64-bit] [smp:16:16] [ds:16:16:10] [async-threads:1] [jit:ns]\r\n\r\n*** ERROR: Shell process terminated! (^G to start new job) ***\r\n```\r\n\r\nProbably not, since we can run `NODE=2 ./dev/run --admin=adm:pass --node-number=2 -n 2 --no-eval 'dev/remsh'`.\r\n\r\n\r\n- I feel, it's more convenient to start the node from 1.\r\n- It would be more acceptable if `-n` was a shortcut option to `--node-number`.\r\n- Maybe `node-number` is not a good name, maybe refactor it to a reasonable name?\r\n\r\nThese are just my personal feelings.\r\nAnyway, your change makes `--node-number=2` work. Thank you for your contribution.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1927892029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1928130706","html_url":"https://github.com/apache/couchdb/pull/4973#issuecomment-1928130706","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4973","id":1928130706,"node_id":"IC_kwDOAAMmUc5y7PCS","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T21:31:36Z","updated_at":"2024-02-05T21:31:36Z","author_association":"CONTRIBUTOR","body":"@jiahuili430 I do not think `dev/run` should specifically support the `remsh` use case.  For what it is worth, I just fixed what was already there.  Fortunately, as you suggested in your comment above, there is an easy to way to make `remsh` fit if the numbering of nodes does not start from 1.\r\n\r\nOne as a starting index is quite fine in most of the cases.  My use case is unusual, though valid.  Since we have this `--node-number` flag there, I wanted to make it work again.  I assume it has worked in the past, but some later changes broke it.\r\n\r\nI agree that the `--node-number` could use a shorthand and a possibly a better name.  Based on the helper text (\"The node number to seed them when creating the node(s)\"), `--node-number-seed` might be a good choice, with a shorthand of `-s`.  However, I reckon that the lack of shorthand is due to the infrequent use of the flag.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1928130706/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1933522831","html_url":"https://github.com/apache/couchdb/pull/4973#issuecomment-1933522831","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4973","id":1933522831,"node_id":"IC_kwDOAAMmUc5zPzeP","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T07:46:28Z","updated_at":"2024-02-08T07:46:28Z","author_association":"CONTRIBUTOR","body":"> NODE=3 dev/run -a adm:pass --with-clouseau --node-number=3 -n 3 --no-eval dev/remsh\r\n\r\nDoes this really work? Shouldn't the argument now be `--node-number-seed`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1933522831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1933992768","html_url":"https://github.com/apache/couchdb/pull/4973#issuecomment-1933992768","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4973","id":1933992768,"node_id":"IC_kwDOAAMmUc5zRmNA","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T12:14:42Z","updated_at":"2024-02-08T12:14:42Z","author_association":"CONTRIBUTOR","body":"@big-r81 earlier it was called `--node-number` maybe @jaydoane was using that version.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1933992768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1934520628","html_url":"https://github.com/apache/couchdb/pull/4973#issuecomment-1934520628","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4973","id":1934520628,"node_id":"IC_kwDOAAMmUc5zTnE0","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T16:43:11Z","updated_at":"2024-02-08T16:43:11Z","author_association":"CONTRIBUTOR","body":"> > NODE=3 dev/run -a adm:pass --with-clouseau --node-number=3 -n 3 --no-eval dev/remsh\r\n> \r\n> Does this really work? Shouldn't the argument now be `--node-number-seed`?\r\n\r\nI guess I had an outdated version, but it _did_ in fact work as I reported :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1934520628/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1934563837","html_url":"https://github.com/apache/couchdb/pull/4976#issuecomment-1934563837","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4976","id":1934563837,"node_id":"IC_kwDOAAMmUc5zTxn9","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T17:06:42Z","updated_at":"2024-02-08T17:06:42Z","author_association":"CONTRIBUTOR","body":"Nice work!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1934563837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1936406753","html_url":"https://github.com/apache/couchdb/pull/4958#issuecomment-1936406753","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4958","id":1936406753,"node_id":"IC_kwDOAAMmUc5zazjh","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-09T18:24:47Z","updated_at":"2024-02-09T18:24:47Z","author_association":"CONTRIBUTOR","body":"@nickva thanks for the confirmation and the suggestions!  I will address them in the other PR about introducing `view_row_map`.  I will then rebase this PR to that one and take care of the remainders, if there will be any.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1936406753/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1936498466","html_url":"https://github.com/apache/couchdb/pull/4979#issuecomment-1936498466","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4979","id":1936498466,"node_id":"IC_kwDOAAMmUc5zbJ8i","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-09T19:38:35Z","updated_at":"2024-02-09T19:38:35Z","author_association":"CONTRIBUTOR","body":"Dang!\r\n```\r\n11:32:41  Failures\r\n11:32:41  ========\r\n11:32:41  \r\n11:32:41  PasswordCacheTest - test password cache\r\n11:32:41  ---------------------------------------\r\n11:32:41  \r\n11:32:41  1) test password cache (PasswordCacheTest)\r\n11:32:41       test/elixir/test/password_cache_test.exs:7\r\n11:32:41       Slow hash is expected for user1 during login\r\n11:32:41       code: run_on_modified_server(server_config, fn -> test_fun(db_name) end)\r\n11:32:41       stacktrace:\r\n11:32:41         test/elixir/test/password_cache_test.exs:78: PasswordCacheTest.assert_cache/4\r\n11:32:41         test/elixir/test/password_cache_test.exs:135: PasswordCacheTest.test_fun/1\r\n11:32:41         (couchdbtest 0.1.0) test/elixir/lib/couch/dbtest.ex:508: Couch.DBTest.run_on_modified_server/2\r\n11:32:41         test/elixir/test/password_cache_test.exs:23: (test)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1936498466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1936864469","html_url":"https://github.com/apache/couchdb/pull/4979#issuecomment-1936864469","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4979","id":1936864469,"node_id":"IC_kwDOAAMmUc5zcjTV","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-10T04:53:44Z","updated_at":"2024-02-10T04:58:19Z","author_association":"CONTRIBUTOR","body":"Unfortunately the password hasher test is still failing. Just increasing the timeout didn't seem to help.\r\n\r\nI made an issue for it: https://github.com/apache/couchdb/issues/4981\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1936864469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937782063","html_url":"https://github.com/apache/couchdb/pull/4977#issuecomment-1937782063","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4977","id":1937782063,"node_id":"IC_kwDOAAMmUc5zgDUv","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-11T15:14:17Z","updated_at":"2024-02-11T15:14:17Z","author_association":"CONTRIBUTOR","body":"That is really nice @nickva!\r\n\r\nAre not you planning to remove all the uses of `khash` so it could be safely phased out?  Looks like only the `ddoc_cache_lru` is the other use of the library.  I am inclined to believe that it is not only the `couch_event_server` where `khash` could create problems with OTP 25, it would be better to be proactive.  Given that Erlang maps are now a feasible replacement, we could take a grip of the opportunity.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937782063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937792449","html_url":"https://github.com/apache/couchdb/pull/4977#issuecomment-1937792449","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4977","id":1937792449,"node_id":"IC_kwDOAAMmUc5zgF3B","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-11T15:54:30Z","updated_at":"2024-02-11T15:54:30Z","author_association":"CONTRIBUTOR","body":"> Are not you planning to remove all the uses of khash so it could be safely phased out? Looks like only the ddoc_cache_lru is the other use of the library. \r\n\r\nGood point, I should have called that out. I was mainly focused on couch_event_server first. DDoc cache would need it's own performance benchmarks and a separate PR. When we don't have dependency on khash then we can remove it. But it's step-wise approach.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937792449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937793764","html_url":"https://github.com/apache/couchdb/pull/4977#issuecomment-1937793764","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4977","id":1937793764,"node_id":"IC_kwDOAAMmUc5zgGLk","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-11T15:59:49Z","updated_at":"2024-02-11T15:59:49Z","author_association":"CONTRIBUTOR","body":"That is fair, thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937793764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937980290","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1937980290","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1937980290,"node_id":"IC_kwDOAAMmUc5zgzuC","user":{"login":"divyanshudhruv","id":71079602,"node_id":"MDQ6VXNlcjcxMDc5NjAy","avatar_url":"https://avatars.githubusercontent.com/u/71079602?v=4","gravatar_id":"","url":"https://api.github.com/users/divyanshudhruv","html_url":"https://github.com/divyanshudhruv","followers_url":"https://api.github.com/users/divyanshudhruv/followers","following_url":"https://api.github.com/users/divyanshudhruv/following{/other_user}","gists_url":"https://api.github.com/users/divyanshudhruv/gists{/gist_id}","starred_url":"https://api.github.com/users/divyanshudhruv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divyanshudhruv/subscriptions","organizations_url":"https://api.github.com/users/divyanshudhruv/orgs","repos_url":"https://api.github.com/users/divyanshudhruv/repos","events_url":"https://api.github.com/users/divyanshudhruv/events{/privacy}","received_events_url":"https://api.github.com/users/divyanshudhruv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-12T01:57:37Z","updated_at":"2024-02-12T01:57:37Z","author_association":"NONE","body":"Hello?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1937980290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1938494142","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1938494142","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1938494142,"node_id":"IC_kwDOAAMmUc5zixK-","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-12T11:25:31Z","updated_at":"2024-02-12T11:25:31Z","author_association":"MEMBER","body":"Some samples would be helpful, but will you also be contributing pull requests to implement what you propose?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1938494142/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1942175829","html_url":"https://github.com/apache/couchdb/pull/4772#issuecomment-1942175829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4772","id":1942175829,"node_id":"IC_kwDOAAMmUc5zw0BV","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-13T18:45:22Z","updated_at":"2024-02-13T18:45:22Z","author_association":"CONTRIBUTOR","body":"Hey, I updated the PR and removed the disabling of merge requests and the force of a linear history.\r\nThe only additional check is, that we need at least one approval to be allowed to merge the PR.\r\n\r\nNick @nickva, I had your approval before, but would like to get a new one (from others too). Maybe @rnewson has additional comments?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1942175829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1943561171","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1943561171","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1943561171,"node_id":"IC_kwDOAAMmUc5z2GPT","user":{"login":"divyanshudhruv","id":71079602,"node_id":"MDQ6VXNlcjcxMDc5NjAy","avatar_url":"https://avatars.githubusercontent.com/u/71079602?v=4","gravatar_id":"","url":"https://api.github.com/users/divyanshudhruv","html_url":"https://github.com/divyanshudhruv","followers_url":"https://api.github.com/users/divyanshudhruv/followers","following_url":"https://api.github.com/users/divyanshudhruv/following{/other_user}","gists_url":"https://api.github.com/users/divyanshudhruv/gists{/gist_id}","starred_url":"https://api.github.com/users/divyanshudhruv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divyanshudhruv/subscriptions","organizations_url":"https://api.github.com/users/divyanshudhruv/orgs","repos_url":"https://api.github.com/users/divyanshudhruv/repos","events_url":"https://api.github.com/users/divyanshudhruv/events{/privacy}","received_events_url":"https://api.github.com/users/divyanshudhruv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-14T11:15:39Z","updated_at":"2024-02-14T11:15:39Z","author_association":"NONE","body":"> Some samples would be helpful, but will you also be contributing pull requests to implement what you propose?\r\n\r\nYes! I can do, but give me some time for the UI","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1943561171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1943951042","html_url":"https://github.com/apache/couchdb/issues/4930#issuecomment-1943951042","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4930","id":1943951042,"node_id":"IC_kwDOAAMmUc5z3lbC","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-14T14:45:48Z","updated_at":"2024-02-14T14:45:48Z","author_association":"CONTRIBUTOR","body":"Close this topic, a solution was given.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1943951042/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1944208718","html_url":"https://github.com/apache/couchdb/pull/4772#issuecomment-1944208718","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4772","id":1944208718,"node_id":"IC_kwDOAAMmUc5z4kVO","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-14T16:43:52Z","updated_at":"2024-02-14T16:43:52Z","author_association":"CONTRIBUTOR","body":"Thanks @big-r81 for working on this!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1944208718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1946320758","html_url":"https://github.com/apache/couchdb/issues/4981#issuecomment-1946320758","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4981","id":1946320758,"node_id":"IC_kwDOAAMmUc50An92","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-15T15:25:57Z","updated_at":"2024-02-15T15:25:57Z","author_association":"CONTRIBUTOR","body":"Fixed by #4982.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1946320758/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1947889835","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1947889835","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1947889835,"node_id":"IC_kwDOAAMmUc50GnCr","user":{"login":"divyanshudhruv","id":71079602,"node_id":"MDQ6VXNlcjcxMDc5NjAy","avatar_url":"https://avatars.githubusercontent.com/u/71079602?v=4","gravatar_id":"","url":"https://api.github.com/users/divyanshudhruv","html_url":"https://github.com/divyanshudhruv","followers_url":"https://api.github.com/users/divyanshudhruv/followers","following_url":"https://api.github.com/users/divyanshudhruv/following{/other_user}","gists_url":"https://api.github.com/users/divyanshudhruv/gists{/gist_id}","starred_url":"https://api.github.com/users/divyanshudhruv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divyanshudhruv/subscriptions","organizations_url":"https://api.github.com/users/divyanshudhruv/orgs","repos_url":"https://api.github.com/users/divyanshudhruv/repos","events_url":"https://api.github.com/users/divyanshudhruv/events{/privacy}","received_events_url":"https://api.github.com/users/divyanshudhruv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-16T07:36:21Z","updated_at":"2024-02-16T07:37:15Z","author_association":"NONE","body":"## Hello 👋🏻,\r\n### Here's a sample design 🖌️ ( I am ready to improve more ) I need some suggestion to improve it  😄\r\n> ### @rnewson \r\n<br>\r\n<br>\r\n\r\n## Dark Mode 🌗\r\n![dark](https://github.com/apache/couchdb/assets/71079602/f87cff57-2aab-43de-bd00-3d3017ab4197)\r\n\r\n<br>\r\n\r\n## Light Mode ☀️\r\n![light](https://github.com/apache/couchdb/assets/71079602/6c131448-56fb-4edc-ae3b-5cb9c1bf2643)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1947889835/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1947945627","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1947945627","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1947945627,"node_id":"IC_kwDOAAMmUc50G0qb","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-16T08:23:47Z","updated_at":"2024-02-16T08:23:47Z","author_association":"CONTRIBUTOR","body":"Hi @divyanshudhruv,\r\n\r\nthank you for sending your examples. Maybe it is a good idea to fork our current UI ([Fauxton](https://github.com/apache/couchdb-fauxton)) repository and integrate your style changes in a branch. The benefit would be, that we could try things out on a live version. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1947945627/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1948452518","html_url":"https://github.com/apache/couchdb/pull/4984#issuecomment-1948452518","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4984","id":1948452518,"node_id":"IC_kwDOAAMmUc50Iwam","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-16T14:09:37Z","updated_at":"2024-02-16T14:09:37Z","author_association":"MEMBER","body":"> That looked a lot smaller than expected! Well done. Just few minor suggestions and cleanup as review comments.\r\n> \r\n> I noticed you opted to not use the `{view_row, #{}}` shape, like in the original PR and just went straight for a map as a row. That's probably simpler. I guess I could see it work either way. If we opt to send execution stats with a complete call that could look like `{complete, #{stats => Stats}}` or something of that nature. Let's keep it as a simple map for now.\r\n\r\nI'd prefer the `{view_row, #{}}` approach myself, it will help us clearly lay out clauses in receive code in future, unless we will also add some guaranteed key/value in the bare map?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1948452518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1948604899","html_url":"https://github.com/apache/couchdb/pull/4984#issuecomment-1948604899","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4984","id":1948604899,"node_id":"IC_kwDOAAMmUc50JVnj","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-16T15:23:42Z","updated_at":"2024-02-16T15:23:42Z","author_association":"CONTRIBUTOR","body":"> I'd prefer the {view_row, #{}} approach myself, it will help us clearly lay out clauses in receive code in future, unless we will also add some guaranteed key/value in the bare map?\r\n\r\nThinking about it some more, I agree as well. It will make the receive clauses a bit clearer. \r\n\r\nAnother suggestion to investigate if it would make sense to make a separate `fabric_row` accessor module. So that row get/set, record/proplist/maps transform could be handled there, maybe even some merge/compare functions?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1948604899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1949359822","html_url":"https://github.com/apache/couchdb/pull/4987#issuecomment-1949359822","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4987","id":1949359822,"node_id":"IC_kwDOAAMmUc50MN7O","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-16T21:28:54Z","updated_at":"2024-02-16T21:34:09Z","author_association":"CONTRIBUTOR","body":"@davisp I sorry. It was a good hashing data structure long before maps existed!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1949359822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1949592774","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1949592774","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1949592774,"node_id":"IC_kwDOAAMmUc50NGzG","user":{"login":"divyanshudhruv","id":71079602,"node_id":"MDQ6VXNlcjcxMDc5NjAy","avatar_url":"https://avatars.githubusercontent.com/u/71079602?v=4","gravatar_id":"","url":"https://api.github.com/users/divyanshudhruv","html_url":"https://github.com/divyanshudhruv","followers_url":"https://api.github.com/users/divyanshudhruv/followers","following_url":"https://api.github.com/users/divyanshudhruv/following{/other_user}","gists_url":"https://api.github.com/users/divyanshudhruv/gists{/gist_id}","starred_url":"https://api.github.com/users/divyanshudhruv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divyanshudhruv/subscriptions","organizations_url":"https://api.github.com/users/divyanshudhruv/orgs","repos_url":"https://api.github.com/users/divyanshudhruv/repos","events_url":"https://api.github.com/users/divyanshudhruv/events{/privacy}","received_events_url":"https://api.github.com/users/divyanshudhruv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T01:55:03Z","updated_at":"2024-02-17T01:56:28Z","author_association":"NONE","body":"Sure,\r\nI will fork the repository and make necessary changes. The SCSS and CSS seem not good for me, there are many things that can be simplified, but doing the things in the same files is not a good idea for me. So can I use my own codes for doing that ? Only some JavaScript would be changed,but I am not very pro in JavaScript. Please suggest me?\r\n\r\nSorry for ping- @big-r81, @rnewson rnew","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1949592774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1950219400","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1950219400","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1950219400,"node_id":"IC_kwDOAAMmUc50PfyI","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T14:10:44Z","updated_at":"2024-02-17T14:10:44Z","author_association":"MEMBER","body":"I suggest starting with small PR's, once you get specific feedback on those, especially if they are then accepted by the project and merged, you can progress to larger proposals (like extensive rewrites of the CSS or bringing in other libraries). but remember that everything in CouchDB must be available under an open source license. If you are new to contributing to an Apache Software Foundation project there are excellent resources to help you (https://community.apache.org/newcomers and https://community.apache.org/contributors/ for example).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1950219400/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1950253927","html_url":"https://github.com/apache/couchdb/pull/4987#issuecomment-1950253927","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4987","id":1950253927,"node_id":"IC_kwDOAAMmUc50PoNn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T16:48:18Z","updated_at":"2024-02-17T16:48:18Z","author_association":"CONTRIBUTOR","body":"I did a run on Linux (Ubuntu) with Erlang 24:\r\n\r\nWith maps\r\n```\r\nddoc_cache_bench:go().\r\n\r\nDbs    DocIds Revs    Open(Dt/Key) Close(Dt/Key)\r\n100    100    5       182.0        8.8    \r\n1000   5      5       178.6        17.6   \r\n10000  1      1       159.3        54.9   \r\n1      10000  1       160.6        28.6   \r\n1      1      10000   166.1        28.4   \r\n\r\nGC Runs: 4777049\r\n```\r\n\r\nWith khash\r\n```\r\n> ddoc_cache_bench:go().\r\n\r\nDbs    DocIds Revs    Open(Dt/Key) Close(Dt/Key)\r\n100    100    5       185.5        11.7   \r\n1000   5      5       180.3        22.7   \r\n10000  1      1       167.5        67.9   \r\n1      10000  1       164.8        33.7   \r\n1      1      10000   167.8        31.3   \r\n\r\nGC Runs: 4836877\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1950253927/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":2,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1950258883","html_url":"https://github.com/apache/couchdb/pull/4987#issuecomment-1950258883","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4987","id":1950258883,"node_id":"IC_kwDOAAMmUc50PpbD","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T17:10:09Z","updated_at":"2024-02-17T17:10:09Z","author_association":"CONTRIBUTOR","body":"I ran some benchmarks with OTP 26 on an M1 Max.\r\nWith khash:\r\n```\r\n(node1@127.0.0.1)1> ddoc_cache_bench:go().\r\n\r\nDbs    DocIds Revs    Open(Dt/Key) Close(Dt/Key)\r\n100    100    5       111.0        5.7\r\n1000   5      5       105.0        12.7\r\n10000  1      1       99.0         43.4\r\n1      10000  1       98.8         20.5\r\n1      1      10000   98.7         17.9\r\n\r\nGC Runs: 6386402\r\n```\r\nWith maps:\r\n```(node1@127.0.0.1)1> ddoc_cache_bench:go().\r\n\r\nDbs    DocIds Revs    Open(Dt/Key) Close(Dt/Key)\r\n100    100    5       86.7         4.4\r\n1000   5      5       81.8         10.7\r\n10000  1      1       77.3         43.1\r\n1      10000  1       76.4         14.4\r\n1      1      10000   78.0         15.1\r\n\r\nGC Runs: 6332692\r\n```\r\nLooks like nice across the board improvement!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1950258883/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":3,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1951585270","html_url":"https://github.com/apache/couchdb/pull/4987#issuecomment-1951585270","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4987","id":1951585270,"node_id":"IC_kwDOAAMmUc50UtP2","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-19T02:24:54Z","updated_at":"2024-02-19T02:24:54Z","author_association":"CONTRIBUTOR","body":"Have you considered adding `ddoc_cache_bench.erl` to the repo?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1951585270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1951703803","html_url":"https://github.com/apache/couchdb/pull/4987#issuecomment-1951703803","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4987","id":1951703803,"node_id":"IC_kwDOAAMmUc50VKL7","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-19T05:05:20Z","updated_at":"2024-02-19T05:05:20Z","author_association":"CONTRIBUTOR","body":"Hmm, that could work, but since ddoc_cache application restarts as part of test to get a clean slate, it would blow away the ddoc cache, so it might be a bit too aggressive.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1951703803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1952261037","html_url":"https://github.com/apache/couchdb/issues/4983#issuecomment-1952261037","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4983","id":1952261037,"node_id":"IC_kwDOAAMmUc50XSOt","user":{"login":"divyanshudhruv","id":71079602,"node_id":"MDQ6VXNlcjcxMDc5NjAy","avatar_url":"https://avatars.githubusercontent.com/u/71079602?v=4","gravatar_id":"","url":"https://api.github.com/users/divyanshudhruv","html_url":"https://github.com/divyanshudhruv","followers_url":"https://api.github.com/users/divyanshudhruv/followers","following_url":"https://api.github.com/users/divyanshudhruv/following{/other_user}","gists_url":"https://api.github.com/users/divyanshudhruv/gists{/gist_id}","starred_url":"https://api.github.com/users/divyanshudhruv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/divyanshudhruv/subscriptions","organizations_url":"https://api.github.com/users/divyanshudhruv/orgs","repos_url":"https://api.github.com/users/divyanshudhruv/repos","events_url":"https://api.github.com/users/divyanshudhruv/events{/privacy}","received_events_url":"https://api.github.com/users/divyanshudhruv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-19T11:34:18Z","updated_at":"2024-02-19T11:34:18Z","author_association":"NONE","body":"Sure\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1952261037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1953259765","html_url":"https://github.com/apache/couchdb/pull/4984#issuecomment-1953259765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4984","id":1953259765,"node_id":"IC_kwDOAAMmUc50bGD1","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-19T23:09:11Z","updated_at":"2024-02-20T11:06:24Z","author_association":"CONTRIBUTOR","body":"I have no strong feelings against using the `view_row` tag for the maps.  I removed it because I felt the code simpler but I would not say it is future-proof that way.  Also, at the same time, I could explore the `fabric_row` accessor module, it seems like a good vehicle of encapsulation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1953259765/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954220168","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1954220168","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1954220168,"node_id":"IC_kwDOAAMmUc50ewiI","user":{"login":"BeckmannM","id":27730162,"node_id":"MDQ6VXNlcjI3NzMwMTYy","avatar_url":"https://avatars.githubusercontent.com/u/27730162?v=4","gravatar_id":"","url":"https://api.github.com/users/BeckmannM","html_url":"https://github.com/BeckmannM","followers_url":"https://api.github.com/users/BeckmannM/followers","following_url":"https://api.github.com/users/BeckmannM/following{/other_user}","gists_url":"https://api.github.com/users/BeckmannM/gists{/gist_id}","starred_url":"https://api.github.com/users/BeckmannM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BeckmannM/subscriptions","organizations_url":"https://api.github.com/users/BeckmannM/orgs","repos_url":"https://api.github.com/users/BeckmannM/repos","events_url":"https://api.github.com/users/BeckmannM/events{/privacy}","received_events_url":"https://api.github.com/users/BeckmannM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T13:28:52Z","updated_at":"2024-02-20T13:31:33Z","author_association":"NONE","body":"@big-r81: Are there any changes that may explain or fix this problem in recent versions? We are using version 3.1.0 and facing the same problem. In our scenario the couchdb is installed on windows surface tablets. Caused by the high cpu usage the tablets are getting uncomfortable warm. As waversky said, this appears when waking the tablet from standby. We have no aktive tasks or replications running.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954220168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954392530","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1954392530","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1954392530,"node_id":"IC_kwDOAAMmUc50fanS","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T14:55:13Z","updated_at":"2024-02-20T14:55:13Z","author_association":"CONTRIBUTOR","body":"@BeckmannM Maybe you should try the latest version, there are many improvements (besides CVE fixes). The question is, what process is causing the high cpu usage and from which state ...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954392530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954430824","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1954430824","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1954430824,"node_id":"IC_kwDOAAMmUc50fj9o","user":{"login":"BeckmannM","id":27730162,"node_id":"MDQ6VXNlcjI3NzMwMTYy","avatar_url":"https://avatars.githubusercontent.com/u/27730162?v=4","gravatar_id":"","url":"https://api.github.com/users/BeckmannM","html_url":"https://github.com/BeckmannM","followers_url":"https://api.github.com/users/BeckmannM/followers","following_url":"https://api.github.com/users/BeckmannM/following{/other_user}","gists_url":"https://api.github.com/users/BeckmannM/gists{/gist_id}","starred_url":"https://api.github.com/users/BeckmannM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BeckmannM/subscriptions","organizations_url":"https://api.github.com/users/BeckmannM/orgs","repos_url":"https://api.github.com/users/BeckmannM/repos","events_url":"https://api.github.com/users/BeckmannM/events{/privacy}","received_events_url":"https://api.github.com/users/BeckmannM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T15:13:16Z","updated_at":"2024-02-20T15:13:16Z","author_association":"NONE","body":"I did a little research. I believe @waversky assumption is right and the problem is caused by windows sleep mode / fast start feature. I found some threads relating to the same problem with other software running with erlang. The suggested workaround is to disable windows fast start feature. I will try this and let you know.\r\n\r\nFurther informations: \r\n* https://groups.google.com/g/rabbitmq-users/c/myl74gsYyYg\r\n* https://erlang.org/pipermail/erlang-questions/2017-May/092256.html\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954430824/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954721257","html_url":"https://github.com/apache/couchdb/pull/4984#issuecomment-1954721257","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4984","id":1954721257,"node_id":"IC_kwDOAAMmUc50gq3p","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T17:41:31Z","updated_at":"2024-02-20T17:41:31Z","author_association":"CONTRIBUTOR","body":"For the record, the current version works fine in a mixed-version environment, in old coordinator—new worker, new coordinator—old worker configurations.  This was tested with a database of 100K documents, 3 nodes, with 1 coordinator and 2 workers of the respective versions, for 7 minutes on 2 threads.  I used `_find` queries and I am not sure how to exercise the replicator for example.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1954721257/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]