[{"url":"https://api.github.com/repos/apache/druid/issues/comments/327339592","html_url":"https://github.com/apache/druid/issues/4743#issuecomment-327339592","issue_url":"https://api.github.com/repos/apache/druid/issues/4743","id":327339592,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzMzOTU5Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T00:26:32Z","updated_at":"2017-09-06T00:26:32Z","author_association":"CONTRIBUTOR","body":"@pjain1 sounds good. Thanks! ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327339592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327342530","html_url":"https://github.com/apache/druid/issues/4740#issuecomment-327342530","issue_url":"https://api.github.com/repos/apache/druid/issues/4740","id":327342530,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzM0MjUzMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T00:47:48Z","updated_at":"2017-09-06T00:47:48Z","author_association":"CONTRIBUTOR","body":"Sounds good. I think it would be nice if users can choose their compressionCodec to use. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327342530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327346498","html_url":"https://github.com/apache/druid/pull/4744#issuecomment-327346498","issue_url":"https://api.github.com/repos/apache/druid/issues/4744","id":327346498,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzM0NjQ5OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T01:17:36Z","updated_at":"2017-09-06T01:17:36Z","author_association":"CONTRIBUTOR","body":"Does this help with the issue reported in #3972 (with regard to the median, rather than high percentiles)? It seems like max-clamping might not help with the low/mid quantiles like median.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327346498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327349591","html_url":"https://github.com/apache/druid/issues/4743#issuecomment-327349591","issue_url":"https://api.github.com/repos/apache/druid/issues/4743","id":327349591,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzM0OTU5MQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T01:39:28Z","updated_at":"2017-09-06T01:39:28Z","author_association":"CONTRIBUTOR","body":"@pjain1 would you please take this issue if this is a blocking issue for you?\r\nI'm currently working on https://github.com/druid-io/druid/pull/4550 and #4704, so I could take this issue after they are finished. Also, I think it's easier for you to check that the patch works for the problem you're facing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327349591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327358819","html_url":"https://github.com/apache/druid/pull/4755#issuecomment-327358819","issue_url":"https://api.github.com/repos/apache/druid/issues/4755","id":327358819,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzM1ODgxOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T02:45:34Z","updated_at":"2017-09-06T02:45:34Z","author_association":"CONTRIBUTOR","body":"Trying this out since I've seen a lot of CI jobs die today with timeouts on BufferHashGrouperTest. It does a lot of random access on an mmapped file, so in mem-constrained environments it can take a really long time (which precise might be? who knows?). On my laptop it takes 30s but in Travis it has taken >10 min.\r\n\r\nI got the idea to try trusty from this message on https://travis-ci.org/druid-io/druid/jobs/272275221:\r\n\r\n> This job ran on our Precise environment, which is in the process of being decommissioned. Please read about the status of the rollout on the blog (https://blog.travis-ci.com/2017-08-31-trusty-as-default-status), and take note that you can explicitly stay on Precise by specifying dist: precise in your .travis.yml.\r\n\r\nMaybe an environment that is being decommissioned can be expected to be more resource constrained than normal.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327358819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327366166","html_url":"https://github.com/apache/druid/pull/4171#issuecomment-327366166","issue_url":"https://api.github.com/repos/apache/druid/issues/4171","id":327366166,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzM2NjE2Ng==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T03:44:41Z","updated_at":"2017-09-06T03:44:41Z","author_association":"CONTRIBUTOR","body":"@himanshug this looks good to me, thanks !","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327366166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327369396","html_url":"https://github.com/apache/druid/pull/4731#issuecomment-327369396","issue_url":"https://api.github.com/repos/apache/druid/issues/4731","id":327369396,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzM2OTM5Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T04:12:48Z","updated_at":"2017-09-06T04:12:48Z","author_association":"MEMBER","body":"@drcrallen thanks for review, addressed comments","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327369396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327418966","html_url":"https://github.com/apache/druid/pull/4755#issuecomment-327418966","issue_url":"https://api.github.com/repos/apache/druid/issues/4755","id":327418966,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzQxODk2Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T08:51:07Z","updated_at":"2017-09-06T08:51:07Z","author_association":"CONTRIBUTOR","body":"The build succeeded. I just restarted it to see if it'll succeed again.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327418966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327434402","html_url":"https://github.com/apache/druid/pull/4755#issuecomment-327434402","issue_url":"https://api.github.com/repos/apache/druid/issues/4755","id":327434402,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzQzNDQwMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T09:51:00Z","updated_at":"2017-09-06T09:51:00Z","author_association":"CONTRIBUTOR","body":"LGTM. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327434402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327488255","html_url":"https://github.com/apache/druid/pull/4415#issuecomment-327488255","issue_url":"https://api.github.com/repos/apache/druid/issues/4415","id":327488255,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzQ4ODI1NQ==","user":{"login":"ssainz","id":8454123,"node_id":"MDQ6VXNlcjg0NTQxMjM=","avatar_url":"https://avatars.githubusercontent.com/u/8454123?v=4","gravatar_id":"","url":"https://api.github.com/users/ssainz","html_url":"https://github.com/ssainz","followers_url":"https://api.github.com/users/ssainz/followers","following_url":"https://api.github.com/users/ssainz/following{/other_user}","gists_url":"https://api.github.com/users/ssainz/gists{/gist_id}","starred_url":"https://api.github.com/users/ssainz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssainz/subscriptions","organizations_url":"https://api.github.com/users/ssainz/orgs","repos_url":"https://api.github.com/users/ssainz/repos","events_url":"https://api.github.com/users/ssainz/events{/privacy}","received_events_url":"https://api.github.com/users/ssainz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T13:47:10Z","updated_at":"2017-09-06T13:47:10Z","author_association":"NONE","body":"Hello @jon-wei , I saw the same error on druid 0.10.1, I confirm there are 0.10.1 libs in the \"/druid/lib/\" folder (e.g. druid-common-0.10.1.jar): \r\n\r\nRemote driver error: RuntimeException: java.util.concurrent.ExecutionException: java.lang.IllegalStateException: DefaultQueryMetrics must not be modified from multiple threads. If it is needed to gather dimension or metric information from multiple threads or from an async thread, this information should explicitly be passed between threads (e. g. using Futures), or this DefaultQueryMetrics's ownerThread should be reassigned explicitly -> ExecutionException: java.lang.IllegalStateException: DefaultQueryMetrics must not be modified from multiple threads. If it is needed to gather dimension or metric information from multiple threads or from an async thread, this information should explicitly be passed between threads (e. g. using Futures), or this DefaultQueryMetrics's ownerThread should be reassigned explicitly -> IllegalStateException: DefaultQueryMetrics must not be modified from multiple threads. If it is needed to gather dimension or metric information from multiple threads or from an async thread, this information should explicitly be passed between threads (e. g. using Futures), or this DefaultQueryMetrics's ownerThread should be reassigned explicitly)\r\n\r\nIs there a workaround?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327488255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327532262","html_url":"https://github.com/apache/druid/issues/4743#issuecomment-327532262","issue_url":"https://api.github.com/repos/apache/druid/issues/4743","id":327532262,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzUzMjI2Mg==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T16:04:29Z","updated_at":"2017-09-06T16:04:29Z","author_association":"MEMBER","body":"Its not blocking me, its a bug that already exists and I was hoping to get this fixed in 0.11. Anyways, I can pick it up once I am done with my current tasks. Thanks","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327532262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327541762","html_url":"https://github.com/apache/druid/pull/4415#issuecomment-327541762","issue_url":"https://api.github.com/repos/apache/druid/issues/4415","id":327541762,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzU0MTc2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T16:37:03Z","updated_at":"2017-09-06T16:37:03Z","author_association":"CONTRIBUTOR","body":"@ssainz, do you have a stack trace corresponding to these error messages? You might find one on the broker log or on the log of one of the historical nodes. If you find one please raise a new github issue so we can track it down and fix it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327541762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327544695","html_url":"https://github.com/apache/druid/pull/4570#issuecomment-327544695","issue_url":"https://api.github.com/repos/apache/druid/issues/4570","id":327544695,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzU0NDY5NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T16:47:28Z","updated_at":"2017-09-06T16:47:28Z","author_association":"MEMBER","body":"@akashdw please don't rebase commits after making a PR, it breaks the thread. See https://github.com/druid-io/druid/blob/master/CONTRIBUTING.md#if-your-pull-request-shows-conflicts-with-master","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327544695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327551922","html_url":"https://github.com/apache/druid/pull/4570#issuecomment-327551922","issue_url":"https://api.github.com/repos/apache/druid/issues/4570","id":327551922,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzU1MTkyMg==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T17:13:22Z","updated_at":"2017-09-06T17:19:20Z","author_association":"CONTRIBUTOR","body":"Thanks @leventov, sure won't rebase the commits from next time onwards.\r\nAddressed comments, Please review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327551922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327558910","html_url":"https://github.com/apache/druid/pull/4415#issuecomment-327558910","issue_url":"https://api.github.com/repos/apache/druid/issues/4415","id":327558910,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzU1ODkxMA==","user":{"login":"ssainz","id":8454123,"node_id":"MDQ6VXNlcjg0NTQxMjM=","avatar_url":"https://avatars.githubusercontent.com/u/8454123?v=4","gravatar_id":"","url":"https://api.github.com/users/ssainz","html_url":"https://github.com/ssainz","followers_url":"https://api.github.com/users/ssainz/followers","following_url":"https://api.github.com/users/ssainz/following{/other_user}","gists_url":"https://api.github.com/users/ssainz/gists{/gist_id}","starred_url":"https://api.github.com/users/ssainz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssainz/subscriptions","organizations_url":"https://api.github.com/users/ssainz/orgs","repos_url":"https://api.github.com/users/ssainz/repos","events_url":"https://api.github.com/users/ssainz/events{/privacy}","received_events_url":"https://api.github.com/users/ssainz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T17:38:41Z","updated_at":"2017-09-06T17:40:57Z","author_association":"NONE","body":"@gianm , I edit log4j2.xml and add\r\n\r\n`<Root level=\"DEBUG\">\r\n            <AppenderRef ref=\"Console\"/>\r\n        </Root>`\r\n\r\nBut still no stack trace. Do you know which logger to turn on in log4j2.xml to obtain stack trace?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327558910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327559763","html_url":"https://github.com/apache/druid/pull/4415#issuecomment-327559763","issue_url":"https://api.github.com/repos/apache/druid/issues/4415","id":327559763,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzU1OTc2Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T17:41:52Z","updated_at":"2017-09-06T17:41:52Z","author_association":"CONTRIBUTOR","body":"@ssainz stack traces should be enabled by default for these kinds of exceptions, but you might have to go looking around to find which log they ended up in. It's probably in the logs of one of the brokers.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327559763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327596047","html_url":"https://github.com/apache/druid/pull/4171#issuecomment-327596047","issue_url":"https://api.github.com/repos/apache/druid/issues/4171","id":327596047,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzU5NjA0Nw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T19:58:15Z","updated_at":"2017-09-06T19:58:15Z","author_association":"CONTRIBUTOR","body":"@b-slim thanks for checking that.\r\n\r\ntook another look today, LGTM . :+1: after existing comments are addressed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327596047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327601283","html_url":"https://github.com/apache/druid/pull/4171#issuecomment-327601283","issue_url":"https://api.github.com/repos/apache/druid/issues/4171","id":327601283,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzYwMTI4Mw==","user":{"login":"knoguchi","id":127546,"node_id":"MDQ6VXNlcjEyNzU0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/127546?v=4","gravatar_id":"","url":"https://api.github.com/users/knoguchi","html_url":"https://github.com/knoguchi","followers_url":"https://api.github.com/users/knoguchi/followers","following_url":"https://api.github.com/users/knoguchi/following{/other_user}","gists_url":"https://api.github.com/users/knoguchi/gists{/gist_id}","starred_url":"https://api.github.com/users/knoguchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knoguchi/subscriptions","organizations_url":"https://api.github.com/users/knoguchi/orgs","repos_url":"https://api.github.com/users/knoguchi/repos","events_url":"https://api.github.com/users/knoguchi/events{/privacy}","received_events_url":"https://api.github.com/users/knoguchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T20:19:15Z","updated_at":"2017-09-06T20:19:26Z","author_association":"CONTRIBUTOR","body":"Thanks all for the reviews and comments.  I will fix them shortly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327601283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327602076","html_url":"https://github.com/apache/druid/pull/4271#issuecomment-327602076","issue_url":"https://api.github.com/repos/apache/druid/issues/4271","id":327602076,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzYwMjA3Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T20:22:20Z","updated_at":"2017-09-06T20:22:20Z","author_association":"CONTRIBUTOR","body":"@gianm @himanshug @pjain1 Can you please review this again?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327602076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327607399","html_url":"https://github.com/apache/druid/pull/4716#issuecomment-327607399","issue_url":"https://api.github.com/repos/apache/druid/issues/4716","id":327607399,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzYwNzM5OQ==","user":{"login":"niketh","id":626548,"node_id":"MDQ6VXNlcjYyNjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/626548?v=4","gravatar_id":"","url":"https://api.github.com/users/niketh","html_url":"https://github.com/niketh","followers_url":"https://api.github.com/users/niketh/followers","following_url":"https://api.github.com/users/niketh/following{/other_user}","gists_url":"https://api.github.com/users/niketh/gists{/gist_id}","starred_url":"https://api.github.com/users/niketh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketh/subscriptions","organizations_url":"https://api.github.com/users/niketh/orgs","repos_url":"https://api.github.com/users/niketh/repos","events_url":"https://api.github.com/users/niketh/events{/privacy}","received_events_url":"https://api.github.com/users/niketh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-06T20:44:09Z","updated_at":"2017-09-06T20:44:09Z","author_association":"CONTRIBUTOR","body":"@gianm \r\n1. Servers always will announce before they shutdown\r\n2. Added code to check `activeConnections` periodically \r\n3. Increases timeout to 15s","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327607399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327661108","html_url":"https://github.com/apache/druid/pull/4758#issuecomment-327661108","issue_url":"https://api.github.com/repos/apache/druid/issues/4758","id":327661108,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzY2MTEwOA==","user":{"login":"a2l007","id":4603202,"node_id":"MDQ6VXNlcjQ2MDMyMDI=","avatar_url":"https://avatars.githubusercontent.com/u/4603202?v=4","gravatar_id":"","url":"https://api.github.com/users/a2l007","html_url":"https://github.com/a2l007","followers_url":"https://api.github.com/users/a2l007/followers","following_url":"https://api.github.com/users/a2l007/following{/other_user}","gists_url":"https://api.github.com/users/a2l007/gists{/gist_id}","starred_url":"https://api.github.com/users/a2l007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a2l007/subscriptions","organizations_url":"https://api.github.com/users/a2l007/orgs","repos_url":"https://api.github.com/users/a2l007/repos","events_url":"https://api.github.com/users/a2l007/events{/privacy}","received_events_url":"https://api.github.com/users/a2l007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T02:00:04Z","updated_at":"2017-09-07T02:00:04Z","author_association":"CONTRIBUTOR","body":"@himanshug Suggested changes have been made. Please review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327661108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327676105","html_url":"https://github.com/apache/druid/pull/4744#issuecomment-327676105","issue_url":"https://api.github.com/repos/apache/druid/issues/4744","id":327676105,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzY3NjEwNQ==","user":{"login":"ginoledesma","id":879991,"node_id":"MDQ6VXNlcjg3OTk5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/879991?v=4","gravatar_id":"","url":"https://api.github.com/users/ginoledesma","html_url":"https://github.com/ginoledesma","followers_url":"https://api.github.com/users/ginoledesma/followers","following_url":"https://api.github.com/users/ginoledesma/following{/other_user}","gists_url":"https://api.github.com/users/ginoledesma/gists{/gist_id}","starred_url":"https://api.github.com/users/ginoledesma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ginoledesma/subscriptions","organizations_url":"https://api.github.com/users/ginoledesma/orgs","repos_url":"https://api.github.com/users/ginoledesma/repos","events_url":"https://api.github.com/users/ginoledesma/events{/privacy}","received_events_url":"https://api.github.com/users/ginoledesma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T03:47:38Z","updated_at":"2017-09-07T03:47:38Z","author_association":"CONTRIBUTOR","body":"@gianm I've updated the PR to include a comment on why clamping to max needs to happen. It's mostly based on the BH/TT paper but I hope it's clear and makes sense. The short version is that we don't expect any \"points\" (values) to exist to the left of the known minimum or the right of the known maximum.\r\n\r\nThe clamping to min was already handled as a special case (line 1571 - https://github.com/druid-io/druid/pull/4744/files#diff-de22260542704e07a950d869cd124aefL1571).\r\n\r\nAs for #3972, yes, it handles that situation. I've tried to replicate the original poster's situation, but I took a guess in filling in the blanks for the full ingestion spec. Here's what I have:\r\n\r\n* [ingestion_spec.json.txt](https://github.com/druid-io/druid/files/1283384/ingestion_spec.json.txt)\r\n* [api_duration.csv.gz](https://github.com/druid-io/druid/files/1283383/api_duration.csv.gz)\r\n\r\nGiven the time series query:\r\n```json\r\n{\r\n  \"queryType\": \"timeseries\",\r\n  \"dataSource\": \"test_quantile_fix\",\r\n  \"granularity\": \"all\",\r\n  \"intervals\": [\r\n    \"2017-09-01T00:00:00+08:00/2017-10-01T00:00:00+08:00\"\r\n  ],\r\n  \"aggregations\": [\r\n    {\r\n      \"type\": \"approxHistogramFold\",\r\n      \"name\": \"hist_fold\",\r\n      \"fieldName\": \"hist_fold_api_duration\",\r\n      \"resolution\": 10000,\r\n      \"numBuckets\": 100\r\n    }\r\n  ],\r\n  \"postAggregations\": [\r\n    {\r\n      \"type\": \"quantile\",\r\n      \"name\": \"myResult\",\r\n      \"fieldName\": \"hist_fold\",\r\n      \"probability\": 0.5\r\n    }\r\n  ],\r\n  \"context\": {}\r\n}\r\n```\r\n\r\nDruid 0.10.1 Result for q=0.5: 1111.9833\r\n[druid_quantiles_stock.json.txt](https://github.com/druid-io/druid/files/1283392/druid_quantiles_stock.json.txt)\r\n\r\nDruid 0.10.1 + patch Result for q=0.5: 190.86847\r\n[druid_quantiles_patched.json.txt](https://github.com/druid-io/druid/files/1283393/druid_quantiles_patched.json.txt)\r\n\r\nReference (computed using SciPy for q=0.5): 190.0\r\n\r\nYou'll notice the breaks are completely different between the behavior without the clamped values for max, but I think that has more to do with the folding of multiple approximate histograms, which gets exacerbated when the original values weren't clamped to begin with.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327676105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327676172","html_url":"https://github.com/apache/druid/pull/4744#issuecomment-327676172","issue_url":"https://api.github.com/repos/apache/druid/issues/4744","id":327676172,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzY3NjE3Mg==","user":{"login":"ginoledesma","id":879991,"node_id":"MDQ6VXNlcjg3OTk5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/879991?v=4","gravatar_id":"","url":"https://api.github.com/users/ginoledesma","html_url":"https://github.com/ginoledesma","followers_url":"https://api.github.com/users/ginoledesma/followers","following_url":"https://api.github.com/users/ginoledesma/following{/other_user}","gists_url":"https://api.github.com/users/ginoledesma/gists{/gist_id}","starred_url":"https://api.github.com/users/ginoledesma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ginoledesma/subscriptions","organizations_url":"https://api.github.com/users/ginoledesma/orgs","repos_url":"https://api.github.com/users/ginoledesma/repos","events_url":"https://api.github.com/users/ginoledesma/events{/privacy}","received_events_url":"https://api.github.com/users/ginoledesma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T03:48:08Z","updated_at":"2017-09-07T03:48:08Z","author_association":"CONTRIBUTOR","body":"I'll update the PR with the CLA tomorrow — I did use some personal/company time so I'll check with the company to get that ironed out.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327676172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327729054","html_url":"https://github.com/apache/druid/issues/4743#issuecomment-327729054","issue_url":"https://api.github.com/repos/apache/druid/issues/4743","id":327729054,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzcyOTA1NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T08:28:40Z","updated_at":"2017-09-07T08:28:40Z","author_association":"CONTRIBUTOR","body":"@pjain1 cool, thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327729054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327794693","html_url":"https://github.com/apache/druid/issues/4746#issuecomment-327794693","issue_url":"https://api.github.com/repos/apache/druid/issues/4746","id":327794693,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzc5NDY5Mw==","user":{"login":"bolkedebruin","id":4282712,"node_id":"MDQ6VXNlcjQyODI3MTI=","avatar_url":"https://avatars.githubusercontent.com/u/4282712?v=4","gravatar_id":"","url":"https://api.github.com/users/bolkedebruin","html_url":"https://github.com/bolkedebruin","followers_url":"https://api.github.com/users/bolkedebruin/followers","following_url":"https://api.github.com/users/bolkedebruin/following{/other_user}","gists_url":"https://api.github.com/users/bolkedebruin/gists{/gist_id}","starred_url":"https://api.github.com/users/bolkedebruin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bolkedebruin/subscriptions","organizations_url":"https://api.github.com/users/bolkedebruin/orgs","repos_url":"https://api.github.com/users/bolkedebruin/repos","events_url":"https://api.github.com/users/bolkedebruin/events{/privacy}","received_events_url":"https://api.github.com/users/bolkedebruin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T13:12:01Z","updated_at":"2017-09-07T13:12:01Z","author_association":"CONTRIBUTOR","body":"@gianm \r\n\r\n* #4364 reduces the issue for the affected Pullers. We use HDFS and its Puller still copies to local first. The HDFSPuller should be able to skip local cache as well. We might create a patch to a slow it to do so.\r\n* Thanks for the pointer on the broker cache. We still have a small deployment at the moment, but we will keep it in mind.\r\n\r\nWe have an initial patch that we hope to test out in a few days when we get the chance. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327794693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327856711","html_url":"https://github.com/apache/druid/pull/4744#issuecomment-327856711","issue_url":"https://api.github.com/repos/apache/druid/issues/4744","id":327856711,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzg1NjcxMQ==","user":{"login":"ginoledesma","id":879991,"node_id":"MDQ6VXNlcjg3OTk5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/879991?v=4","gravatar_id":"","url":"https://api.github.com/users/ginoledesma","html_url":"https://github.com/ginoledesma","followers_url":"https://api.github.com/users/ginoledesma/followers","following_url":"https://api.github.com/users/ginoledesma/following{/other_user}","gists_url":"https://api.github.com/users/ginoledesma/gists{/gist_id}","starred_url":"https://api.github.com/users/ginoledesma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ginoledesma/subscriptions","organizations_url":"https://api.github.com/users/ginoledesma/orgs","repos_url":"https://api.github.com/users/ginoledesma/repos","events_url":"https://api.github.com/users/ginoledesma/events{/privacy}","received_events_url":"https://api.github.com/users/ginoledesma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T16:43:30Z","updated_at":"2017-09-07T16:43:30Z","author_association":"CONTRIBUTOR","body":"Updated unit tests to be more thorough with computing a range of quantiles (q=[.10, ..., 0.90] in 0.10 increments) including the explicit test for \"outliers\" (q=0.05 and q=0.95).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327856711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327859692","html_url":"https://github.com/apache/druid/pull/4754#issuecomment-327859692","issue_url":"https://api.github.com/repos/apache/druid/issues/4754","id":327859692,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzg1OTY5Mg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T16:54:40Z","updated_at":"2017-09-07T16:54:40Z","author_association":"CONTRIBUTOR","body":"Re: `Row - instead of returning primitive types return Float/Long/Double objects so that indexer can distinguish between null and 0 values.`\r\n\r\nWe have pretty bad heap memory usage problems during indexing. Does this add extra heap pressure?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327859692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327860501","html_url":"https://github.com/apache/druid/pull/4171#issuecomment-327860501","issue_url":"https://api.github.com/repos/apache/druid/issues/4171","id":327860501,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzg2MDUwMQ==","user":{"login":"knoguchi","id":127546,"node_id":"MDQ6VXNlcjEyNzU0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/127546?v=4","gravatar_id":"","url":"https://api.github.com/users/knoguchi","html_url":"https://github.com/knoguchi","followers_url":"https://api.github.com/users/knoguchi/followers","following_url":"https://api.github.com/users/knoguchi/following{/other_user}","gists_url":"https://api.github.com/users/knoguchi/gists{/gist_id}","starred_url":"https://api.github.com/users/knoguchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knoguchi/subscriptions","organizations_url":"https://api.github.com/users/knoguchi/orgs","repos_url":"https://api.github.com/users/knoguchi/repos","events_url":"https://api.github.com/users/knoguchi/events{/privacy}","received_events_url":"https://api.github.com/users/knoguchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T16:57:34Z","updated_at":"2017-09-07T16:57:34Z","author_association":"CONTRIBUTOR","body":"I've addressed the comments.  Not sure why Travis failed for the last commit 79c7baa\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327860501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327900026","html_url":"https://github.com/apache/druid/pull/4754#issuecomment-327900026","issue_url":"https://api.github.com/repos/apache/druid/issues/4754","id":327900026,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzkwMDAyNg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-07T19:29:19Z","updated_at":"2017-09-07T19:29:19Z","author_association":"MEMBER","body":"It could be avoided by changing `Long Row.getLongMetric(String)` to `void Row.getLongMetric(String, LongMetricReceiver)`, Where `LongMetricReceiver` is a mutable object with `long metric` and `boolean isNull` fields.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327900026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327968952","html_url":"https://github.com/apache/druid/pull/4731#issuecomment-327968952","issue_url":"https://api.github.com/repos/apache/druid/issues/4731","id":327968952,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzk2ODk1Mg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T00:50:01Z","updated_at":"2017-09-08T00:50:01Z","author_association":"CONTRIBUTOR","body":"If this is the same as the prior cost balancer strategy, can it reuse the tests from `io.druid.server.coordinator.CostBalancerStrategyTest`?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327968952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327970587","html_url":"https://github.com/apache/druid/pull/4731#issuecomment-327970587","issue_url":"https://api.github.com/repos/apache/druid/issues/4731","id":327970587,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzk3MDU4Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T01:00:53Z","updated_at":"2017-09-08T01:00:53Z","author_association":"MEMBER","body":"It doesn't produce the same numbers, but (supposedly) makes the same decisions. That's what `CachingCostBalancerStrategyTest` verifies.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327970587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/327983453","html_url":"https://github.com/apache/druid/issues/4723#issuecomment-327983453","issue_url":"https://api.github.com/repos/apache/druid/issues/4723","id":327983453,"node_id":"MDEyOklzc3VlQ29tbWVudDMyNzk4MzQ1Mw==","user":{"login":"KeymanHuang","id":6082373,"node_id":"MDQ6VXNlcjYwODIzNzM=","avatar_url":"https://avatars.githubusercontent.com/u/6082373?v=4","gravatar_id":"","url":"https://api.github.com/users/KeymanHuang","html_url":"https://github.com/KeymanHuang","followers_url":"https://api.github.com/users/KeymanHuang/followers","following_url":"https://api.github.com/users/KeymanHuang/following{/other_user}","gists_url":"https://api.github.com/users/KeymanHuang/gists{/gist_id}","starred_url":"https://api.github.com/users/KeymanHuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KeymanHuang/subscriptions","organizations_url":"https://api.github.com/users/KeymanHuang/orgs","repos_url":"https://api.github.com/users/KeymanHuang/repos","events_url":"https://api.github.com/users/KeymanHuang/events{/privacy}","received_events_url":"https://api.github.com/users/KeymanHuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T02:39:45Z","updated_at":"2017-09-08T02:39:45Z","author_association":"NONE","body":"I don't think it's a good idea. Actually, a dynamic loading strategy can implement this, but loading segments is expensive, and u will find that druid have to load and drop segment from ram frequently due to queries of different time periods. I think u can improve the specified queries performance by using  historical node tire.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/327983453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328004603","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-328004603","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":328004603,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODAwNDYwMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T05:43:27Z","updated_at":"2017-09-08T05:43:27Z","author_association":"CONTRIBUTOR","body":"Hmm, I don't understand why the latest travis failed. It complained about KafkaLookupExtractorFactoryTest which is not touched in this patch. I restarted it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328004603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328037152","html_url":"https://github.com/apache/druid/issues/4763#issuecomment-328037152","issue_url":"https://api.github.com/repos/apache/druid/issues/4763","id":328037152,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODAzNzE1Mg==","user":{"login":"jounzhang","id":11515463,"node_id":"MDQ6VXNlcjExNTE1NDYz","avatar_url":"https://avatars.githubusercontent.com/u/11515463?v=4","gravatar_id":"","url":"https://api.github.com/users/jounzhang","html_url":"https://github.com/jounzhang","followers_url":"https://api.github.com/users/jounzhang/followers","following_url":"https://api.github.com/users/jounzhang/following{/other_user}","gists_url":"https://api.github.com/users/jounzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/jounzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jounzhang/subscriptions","organizations_url":"https://api.github.com/users/jounzhang/orgs","repos_url":"https://api.github.com/users/jounzhang/repos","events_url":"https://api.github.com/users/jounzhang/events{/privacy}","received_events_url":"https://api.github.com/users/jounzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T08:23:52Z","updated_at":"2017-09-08T08:23:52Z","author_association":"NONE","body":"升级到1.1.3后，该问题自动恢复正常了。什么情况这是。。。","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328037152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328054584","html_url":"https://github.com/apache/druid/pull/1998#issuecomment-328054584","issue_url":"https://api.github.com/repos/apache/druid/issues/1998","id":328054584,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODA1NDU4NA==","user":{"login":"harksin","id":9515094,"node_id":"MDQ6VXNlcjk1MTUwOTQ=","avatar_url":"https://avatars.githubusercontent.com/u/9515094?v=4","gravatar_id":"","url":"https://api.github.com/users/harksin","html_url":"https://github.com/harksin","followers_url":"https://api.github.com/users/harksin/followers","following_url":"https://api.github.com/users/harksin/following{/other_user}","gists_url":"https://api.github.com/users/harksin/gists{/gist_id}","starred_url":"https://api.github.com/users/harksin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harksin/subscriptions","organizations_url":"https://api.github.com/users/harksin/orgs","repos_url":"https://api.github.com/users/harksin/repos","events_url":"https://api.github.com/users/harksin/events{/privacy}","received_events_url":"https://api.github.com/users/harksin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T09:33:00Z","updated_at":"2017-09-08T09:33:00Z","author_association":"NONE","body":"Any plans to revive this PR ? Or other way to use auto merge  with kafka indexer service ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328054584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328133191","html_url":"https://github.com/apache/druid/pull/2368#issuecomment-328133191","issue_url":"https://api.github.com/repos/apache/druid/issues/2368","id":328133191,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODEzMzE5MQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T15:20:06Z","updated_at":"2017-09-08T15:20:06Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 I'm closing this PR and will submit another to support optional segment assignment to http.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328133191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328147535","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328147535","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328147535,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE0NzUzNQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T16:12:59Z","updated_at":"2017-09-08T16:14:03Z","author_association":"CONTRIBUTOR","body":"For unit tests I'd suggest adding tests to SelectQueryQueryToolChestTest (which doesn't seem to exist yet) that verify that if \"descending\" is tweaked, that the cache key changes. It would be similar to the cache key tests in TopNQueryQueryToolChestTest.\r\n\r\nLooks like a solid bug fix for select -- I bet it took so long for someone to notice because by default, caching for select is disabled.\r\n\r\nThe change doesn't look necessary for topN though. TopN doesn't expose the \"descending\" scan order as an option and even if it did, it shouldn't change the results much, since topN does its own sorting anyway. If it did change the results it would only be because it might make the topN approximation fall out a different way. So unless I'm missing something, that change should be omitted from the patch.\r\n\r\nCould you please also fill out the project CLA at http://druid.io/community/cla.html?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328147535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328149870","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328149870","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328149870,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE0OTg3MA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T16:22:31Z","updated_at":"2017-09-08T16:22:31Z","author_association":"NONE","body":"Ah yes, good points. I changed topN only incidentally; the production failure we saw was for select, and we do enable select caching specifically as we use it a lot.\r\n\r\nI will revert the topN change. The select change should back-port as-is to 0.10.x and 0.9.x also, unlike topN.\r\n\r\nAnd I'll try to put a unit test together and do the CLA thing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328149870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328181202","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328181202","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328181202,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE4MTIwMg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T18:33:11Z","updated_at":"2017-09-08T18:33:11Z","author_association":"NONE","body":"Added unit test; please take a look.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328181202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328181674","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328181674","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328181674,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE4MTY3NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T18:35:14Z","updated_at":"2017-09-08T18:35:14Z","author_association":"CONTRIBUTOR","body":"LGTM, thanks for the patch! Will merge it after the automated checks pass.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328181674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328181876","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328181876","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328181876,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE4MTg3Ng==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T18:36:07Z","updated_at":"2017-09-08T18:36:07Z","author_association":"NONE","body":"Would you like me to also submit pull requests backporting to 0.10.x and 0.9.x?\r\n\r\nWe are still using 0.9.x and I am locally backporting it anyway...\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328181876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328182940","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328182940","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328182940,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE4Mjk0MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T18:40:48Z","updated_at":"2017-09-08T18:40:48Z","author_association":"CONTRIBUTOR","body":"We aren't still issuing releases from those branches, so no thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328182940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328183312","html_url":"https://github.com/apache/druid/pull/4766#issuecomment-328183312","issue_url":"https://api.github.com/repos/apache/druid/issues/4766","id":328183312,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODE4MzMxMg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T18:42:20Z","updated_at":"2017-09-08T18:42:20Z","author_association":"NONE","body":"Ok, good to know. Will upgrade our own infra then. :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328183312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328211996","html_url":"https://github.com/apache/druid/pull/4271#issuecomment-328211996","issue_url":"https://api.github.com/repos/apache/druid/issues/4271","id":328211996,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODIxMTk5Ng==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T20:57:03Z","updated_at":"2017-09-08T20:57:03Z","author_association":"CONTRIBUTOR","body":"Looks like AuthConfig is not used anymore in many places and can be removed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328211996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328238429","html_url":"https://github.com/apache/druid/pull/4570#issuecomment-328238429","issue_url":"https://api.github.com/repos/apache/druid/issues/4570","id":328238429,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODIzODQyOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T23:47:46Z","updated_at":"2017-09-08T23:47:46Z","author_association":"MEMBER","body":"@akashdw didn't you plan to make a PR that fixes `search.search` before continuing with this PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328238429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328238985","html_url":"https://github.com/apache/druid/pull/4757#issuecomment-328238985","issue_url":"https://api.github.com/repos/apache/druid/issues/4757","id":328238985,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODIzODk4NQ==","user":{"login":"xanec","id":3969464,"node_id":"MDQ6VXNlcjM5Njk0NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/3969464?v=4","gravatar_id":"","url":"https://api.github.com/users/xanec","html_url":"https://github.com/xanec","followers_url":"https://api.github.com/users/xanec/followers","following_url":"https://api.github.com/users/xanec/following{/other_user}","gists_url":"https://api.github.com/users/xanec/gists{/gist_id}","starred_url":"https://api.github.com/users/xanec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xanec/subscriptions","organizations_url":"https://api.github.com/users/xanec/orgs","repos_url":"https://api.github.com/users/xanec/repos","events_url":"https://api.github.com/users/xanec/events{/privacy}","received_events_url":"https://api.github.com/users/xanec/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-08T23:53:05Z","updated_at":"2017-09-08T23:53:05Z","author_association":"CONTRIBUTOR","body":"@leventov @drcrallen I have implemented the previously requested changes and did some refactoring. Could you kindly review the code again? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328238985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328257484","html_url":"https://github.com/apache/druid/issues/4768#issuecomment-328257484","issue_url":"https://api.github.com/repos/apache/druid/issues/4768","id":328257484,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI1NzQ4NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T06:10:31Z","updated_at":"2017-09-09T06:12:26Z","author_association":"MEMBER","body":"What do you mean by \"overhead\" here? I thought the only concern with it might be that it only supports HotSpot JVM (though I'm not sure). But it could be fine, if Druid doesn't really aim to support other JVMs. Apart from that, it should be perfectly fine to use JOL.\r\n\r\nNote e. g. that Presto, a high-profile project similar to Druid, uses it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328257484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328257882","html_url":"https://github.com/apache/druid/issues/4768#issuecomment-328257882","issue_url":"https://api.github.com/repos/apache/druid/issues/4768","id":328257882,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI1Nzg4Mg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T06:20:49Z","updated_at":"2017-09-09T06:20:49Z","author_association":"MEMBER","body":"Ok, and another issue could be the license, because JOL is GPL.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328257882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328261828","html_url":"https://github.com/apache/druid/issues/4768#issuecomment-328261828","issue_url":"https://api.github.com/repos/apache/druid/issues/4768","id":328261828,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI2MTgyOA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T07:58:56Z","updated_at":"2017-09-09T07:58:56Z","author_association":"CONTRIBUTOR","body":"I meant the overhead to get the size of each string in dictionary because it will be a very frequent operation. \r\n\r\n> Ok, and another issue could be the license, because JOL is GPL.\r\n\r\nThis is a really sad news..","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328261828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328292529","html_url":"https://github.com/apache/druid/pull/4118#issuecomment-328292529","issue_url":"https://api.github.com/repos/apache/druid/issues/4118","id":328292529,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI5MjUyOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T17:39:49Z","updated_at":"2017-09-09T17:39:49Z","author_association":"MEMBER","body":"@jihoonson do you plan to continue to work on this issue?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328292529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328292577","html_url":"https://github.com/apache/druid/pull/4154#issuecomment-328292577","issue_url":"https://api.github.com/repos/apache/druid/issues/4154","id":328292577,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI5MjU3Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T17:40:35Z","updated_at":"2017-09-09T17:40:35Z","author_association":"MEMBER","body":"@jihoonson do you have extra comments on this PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328292577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328297815","html_url":"https://github.com/apache/druid/issues/4768#issuecomment-328297815","issue_url":"https://api.github.com/repos/apache/druid/issues/4768","id":328297815,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODI5NzgxNQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T19:13:55Z","updated_at":"2017-09-09T19:13:55Z","author_association":"MEMBER","body":"@jihoonson see #4771","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328297815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328309899","html_url":"https://github.com/apache/druid/issues/4768#issuecomment-328309899","issue_url":"https://api.github.com/repos/apache/druid/issues/4768","id":328309899,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMwOTg5OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-09T23:38:21Z","updated_at":"2017-09-09T23:38:21Z","author_association":"MEMBER","body":"Or, if still using this approach, `byte-buddy-agent` library could be used to [obtain `Instrumentation` instance](http://static.javadoc.io/net.bytebuddy/byte-buddy-agent/1.7.5/net/bytebuddy/agent/ByteBuddyAgent.html#install--), and then calling [`Instrumentation.getObjectSize()`](https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize-java.lang.Object-).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328309899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328311419","html_url":"https://github.com/apache/druid/issues/4773#issuecomment-328311419","issue_url":"https://api.github.com/repos/apache/druid/issues/4773","id":328311419,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMxMTQxOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T00:20:26Z","updated_at":"2017-09-10T00:57:41Z","author_association":"MEMBER","body":"E. g. when a query comes to a historical node, it may have a flag \"no cache\", meaning that segments, that may need to be pulled into memory for processing of this query, should not be retained in the cache.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328311419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328312078","html_url":"https://github.com/apache/druid/issues/4771#issuecomment-328312078","issue_url":"https://api.github.com/repos/apache/druid/issues/4771","id":328312078,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMxMjA3OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T00:40:11Z","updated_at":"2017-09-10T00:40:11Z","author_association":"CONTRIBUTOR","body":"The reason I originally had groupBy use String objects rather than byte buffers is that Strings are what you get from DimensionSelectors, and it's what the queries need to return when they generate their results. It's expensive to switch to a byte array form just for the dictionary, since it involves a lot of extra copying, possibly even encoding/decoding (if the buffers are utf8 bytes rather than char arrays), and ultimately creates extra String garbage since the buffers would need to become Strings again at some point.\r\n\r\nI think we could imagine a world where DimensionSelector.lookupName returns a utf8-encoded ByteBuffer (or Memory or whatever) rather than a String, and the query system keeps it in that form as long as it can. Then the dictionary could be a buffer like you described without so much overhead.\r\n\r\nMaybe for simple queries, we could get away with never converting to String, if we also add a Jackson serializer for whatever kind of buffer object we use instead.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328312078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328313010","html_url":"https://github.com/apache/druid/pull/4118#issuecomment-328313010","issue_url":"https://api.github.com/repos/apache/druid/issues/4118","id":328313010,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMxMzAxMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T01:10:27Z","updated_at":"2017-09-10T01:10:27Z","author_association":"CONTRIBUTOR","body":"@leventov yes, sorry for the delay. However, I'm currently working on https://github.com/druid-io/druid/issues/4479 and I can do after that issue is finished first. I don't want to block others from working on this issue just for me. If anyone is interested in this issue, please go ahead. Also, I'll try to finish #4479 as soon as possible and come back to this issue if it's still opened.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328313010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328314802","html_url":"https://github.com/apache/druid/issues/4771#issuecomment-328314802","issue_url":"https://api.github.com/repos/apache/druid/issues/4771","id":328314802,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMxNDgwMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T02:08:52Z","updated_at":"2017-09-10T02:08:52Z","author_association":"CONTRIBUTOR","body":"I think this idea is better than #4768 if it's done with a proper change for DimentionSelector.lookupName() to return a string stored in off-heap.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328314802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328315007","html_url":"https://github.com/apache/druid/pull/4271#issuecomment-328315007","issue_url":"https://api.github.com/repos/apache/druid/issues/4271","id":328315007,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMxNTAwNw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T02:16:10Z","updated_at":"2017-09-10T02:16:10Z","author_association":"CONTRIBUTOR","body":"@jon-wei mostly it looks ok to me wrt design and interfaces now aside from minor comments.\r\nto be honest, this is a long PR and I couldn't read through all of it with great attention but as long as you have tested it , its good to me. thanks for your patience.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328315007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328369890","html_url":"https://github.com/apache/druid/issues/4693#issuecomment-328369890","issue_url":"https://api.github.com/repos/apache/druid/issues/4693","id":328369890,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODM2OTg5MA==","user":{"login":"jkogut","id":5220929,"node_id":"MDQ6VXNlcjUyMjA5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5220929?v=4","gravatar_id":"","url":"https://api.github.com/users/jkogut","html_url":"https://github.com/jkogut","followers_url":"https://api.github.com/users/jkogut/followers","following_url":"https://api.github.com/users/jkogut/following{/other_user}","gists_url":"https://api.github.com/users/jkogut/gists{/gist_id}","starred_url":"https://api.github.com/users/jkogut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkogut/subscriptions","organizations_url":"https://api.github.com/users/jkogut/orgs","repos_url":"https://api.github.com/users/jkogut/repos","events_url":"https://api.github.com/users/jkogut/events{/privacy}","received_events_url":"https://api.github.com/users/jkogut/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T20:32:32Z","updated_at":"2017-09-10T20:32:59Z","author_association":"NONE","body":"Does it somehow related to KIS tasks that have status FAILED and duration -1 and their log is pretty OK but on the overlord side we can see some issue:\r\n\r\n``` 17:29:44,519 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT2S]\r\n 17:29:46,544 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT4S]\r\n 17:29:50,570 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT8S]\r\n 17:29:58,590 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT10S]\r\n 17:30:08,616 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT10S]\r\n 17:30:18,642 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT10S]\r\n 17:30:28,668 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT10S]\r\n 17:30:38,694 INFO i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Still waiting for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] to pause; will try again in [PT10S]\r\n 17:30:48,720 ERROR i.d.i.k.KafkaIndexTaskClient [KafkaIndexTaskClient-prod_dataSource_1_events-7] Task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] failed to pause, aborting\r\n 17:30:48,720 WARN i.d.i.k.s.KafkaSupervisor [KafkaSupervisor-prod_dataSource_1_events-Worker-1] Task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] failed to respond to [pause] in a timely manner, killing task\r\n 17:30:48,723 INFO i.d.i.o.RemoteTaskRunner [KafkaSupervisor-prod_dataSource_1_events-Worker-1] Sent shutdown message to worker: druid-mm02.deep.bi:9088, status 200 OK, response: {\"task\":\"index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm\"}\r\n 17:30:48,723 INFO i.d.i.o.TaskLockbox [KafkaSupervisor-prod_dataSource_1_events-Worker-1] Removing task[index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] from activeTasks\r\n 17:30:48,723 INFO i.d.i.o.TaskLockbox [KafkaSupervisor-prod_dataSource_1_events-Worker-1] Removing task[index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] from TaskLock[index_kafka_prod_dataSource_1_events]\r\n 17:30:48,906 INFO i.d.i.o.MetadataTaskStorage [KafkaSupervisor-prod_dataSource_1_events-Worker-1] Updating task index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm to status: TaskStatus{id=index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm, status=FAILED, duration=-1}\r\n 17:30:48,965 INFO i.d.i.o.RemoteTaskRunner [Curator-PathChildrenCache-1] Worker[druid-mm02.deep.bi:9088] wrote FAILED status for task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] on [TaskLocation{host='druid-mm02.deep.bi', port=8103}]\r\n 17:30:48,965 INFO i.d.i.o.RemoteTaskRunner [Curator-PathChildrenCache-1] Worker[druid-mm02.deep.bi:9088] completed task[index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] with status[FAILED]\r\n 17:30:48,965 INFO i.d.i.o.TaskQueue [Curator-PathChildrenCache-1] Received FAILED status for task: index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm\r\n 17:30:49,098 INFO i.d.i.o.TaskQueue [KafkaSupervisor-prod_dataSource_1_events-Worker-1] Task done: KafkaIndexTask{id=index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm, type=index_kafka, dataSource=prod_dataSource_1_events}\r\n 17:30:49,098 INFO i.d.i.o.RemoteTaskRunner [Curator-PathChildrenCache-1] Cleaning up task[index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] on worker[druid-mm02.deep.bi:9088]\r\n 17:30:49,101 WARN i.d.i.o.TaskQueue [Curator-PathChildrenCache-1] Unknown task completed: index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm\r\n 17:30:49,101 INFO i.d.i.o.TaskQueue [Curator-PathChildrenCache-1] Task FAILED: KafkaIndexTask{id=index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm, type=index_kafka, dataSource=prod_dataSource_1_events} (1270654 run duration)\r\n 17:30:49,101 INFO i.d.i.o.TaskRunnerUtils [Curator-PathChildrenCache-1] Task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] status changed to [FAILED].\r\n 17:30:49,101 INFO i.d.i.o.RemoteTaskRunner [Curator-PathChildrenCache-1] Task[index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm] went bye bye.\r\n\r\nio.druid.java.util.common.ISE: Unable to grant lock to inactive Task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm]\r\nio.druid.java.util.common.ISE: Unable to grant lock to inactive Task [index_kafka_prod_dataSource_1_events_cb10bb47ee9a044_mhdiolnm]\r\n```\r\n?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328369890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328432442","html_url":"https://github.com/apache/druid/issues/4723#issuecomment-328432442","issue_url":"https://api.github.com/repos/apache/druid/issues/4723","id":328432442,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODQzMjQ0Mg==","user":{"login":"Ken-LiuL","id":7971987,"node_id":"MDQ6VXNlcjc5NzE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/7971987?v=4","gravatar_id":"","url":"https://api.github.com/users/Ken-LiuL","html_url":"https://github.com/Ken-LiuL","followers_url":"https://api.github.com/users/Ken-LiuL/followers","following_url":"https://api.github.com/users/Ken-LiuL/following{/other_user}","gists_url":"https://api.github.com/users/Ken-LiuL/gists{/gist_id}","starred_url":"https://api.github.com/users/Ken-LiuL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ken-LiuL/subscriptions","organizations_url":"https://api.github.com/users/Ken-LiuL/orgs","repos_url":"https://api.github.com/users/Ken-LiuL/repos","events_url":"https://api.github.com/users/Ken-LiuL/events{/privacy}","received_events_url":"https://api.github.com/users/Ken-LiuL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T06:46:05Z","updated_at":"2017-09-11T06:46:05Z","author_association":"NONE","body":"Even if building up a historical node tire, I still need more machines and more memories, which is not my intention. Here, the restriction is that I do not have lots of memories available and slight slowness of queries is tolerable.  As for the expensiveness of loading segments into memory, we can build a cache layer in front of broker to alleviate the overhead brought by queries involved with cold data, thus, hot data queries can be served by broker, most of cold data queries can be served by a cache layer, only a small portion of cold data queries will cause loading segments from hard drive","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328432442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328470727","html_url":"https://github.com/apache/druid/issues/4741#issuecomment-328470727","issue_url":"https://api.github.com/repos/apache/druid/issues/4741","id":328470727,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODQ3MDcyNw==","user":{"login":"denglingang","id":13860906,"node_id":"MDQ6VXNlcjEzODYwOTA2","avatar_url":"https://avatars.githubusercontent.com/u/13860906?v=4","gravatar_id":"","url":"https://api.github.com/users/denglingang","html_url":"https://github.com/denglingang","followers_url":"https://api.github.com/users/denglingang/followers","following_url":"https://api.github.com/users/denglingang/following{/other_user}","gists_url":"https://api.github.com/users/denglingang/gists{/gist_id}","starred_url":"https://api.github.com/users/denglingang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denglingang/subscriptions","organizations_url":"https://api.github.com/users/denglingang/orgs","repos_url":"https://api.github.com/users/denglingang/repos","events_url":"https://api.github.com/users/denglingang/events{/privacy}","received_events_url":"https://api.github.com/users/denglingang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T09:18:25Z","updated_at":"2017-09-11T09:18:25Z","author_association":"MEMBER","body":"Could you pls describe how to reproduce it?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328470727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328471885","html_url":"https://github.com/apache/druid/issues/4763#issuecomment-328471885","issue_url":"https://api.github.com/repos/apache/druid/issues/4763","id":328471885,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODQ3MTg4NQ==","user":{"login":"denglingang","id":13860906,"node_id":"MDQ6VXNlcjEzODYwOTA2","avatar_url":"https://avatars.githubusercontent.com/u/13860906?v=4","gravatar_id":"","url":"https://api.github.com/users/denglingang","html_url":"https://github.com/denglingang","followers_url":"https://api.github.com/users/denglingang/followers","following_url":"https://api.github.com/users/denglingang/following{/other_user}","gists_url":"https://api.github.com/users/denglingang/gists{/gist_id}","starred_url":"https://api.github.com/users/denglingang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denglingang/subscriptions","organizations_url":"https://api.github.com/users/denglingang/orgs","repos_url":"https://api.github.com/users/denglingang/repos","events_url":"https://api.github.com/users/denglingang/events{/privacy}","received_events_url":"https://api.github.com/users/denglingang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T09:22:36Z","updated_at":"2017-09-11T09:22:36Z","author_association":"MEMBER","body":"You should discuss the problem in https://github.com/alibaba/druid.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328471885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328557400","html_url":"https://github.com/apache/druid/pull/4774#issuecomment-328557400","issue_url":"https://api.github.com/repos/apache/druid/issues/4774","id":328557400,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODU1NzQwMA==","user":{"login":"kevinconaway","id":6921953,"node_id":"MDQ6VXNlcjY5MjE5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6921953?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinconaway","html_url":"https://github.com/kevinconaway","followers_url":"https://api.github.com/users/kevinconaway/followers","following_url":"https://api.github.com/users/kevinconaway/following{/other_user}","gists_url":"https://api.github.com/users/kevinconaway/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinconaway/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinconaway/subscriptions","organizations_url":"https://api.github.com/users/kevinconaway/orgs","repos_url":"https://api.github.com/users/kevinconaway/repos","events_url":"https://api.github.com/users/kevinconaway/events{/privacy}","received_events_url":"https://api.github.com/users/kevinconaway/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T15:01:04Z","updated_at":"2017-09-11T15:01:04Z","author_association":"CONTRIBUTOR","body":"@gianm Should this behavior be on by default for all tasks or should it be configurable?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328557400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328570110","html_url":"https://github.com/apache/druid/pull/4764#issuecomment-328570110","issue_url":"https://api.github.com/repos/apache/druid/issues/4764","id":328570110,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODU3MDExMA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T15:42:15Z","updated_at":"2017-09-11T15:42:15Z","author_association":"CONTRIBUTOR","body":"@niketh can you expand on this problem case some more? Things should be queryable on real-time *AND* historicals for only a short time until the real-time node picks up that handoff has occurred.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328570110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328571345","html_url":"https://github.com/apache/druid/pull/4772#issuecomment-328571345","issue_url":"https://api.github.com/repos/apache/druid/issues/4772","id":328571345,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODU3MTM0NQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T15:46:15Z","updated_at":"2017-09-11T15:46:15Z","author_association":"CONTRIBUTOR","body":"Since query ID is used for logging and for cancelling queries (or groups of queries), a \"blank\" query seems like it would be more of a \"don't care\" than something someone would explicitly set for logging / cancelling. So substituting with a UUID sounds good.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328571345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328578618","html_url":"https://github.com/apache/druid/pull/4775#issuecomment-328578618","issue_url":"https://api.github.com/repos/apache/druid/issues/4775","id":328578618,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODU3ODYxOA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T16:10:05Z","updated_at":"2017-09-11T16:10:05Z","author_association":"MEMBER","body":"With what Xmx do you start?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328578618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328602924","html_url":"https://github.com/apache/druid/issues/4778#issuecomment-328602924","issue_url":"https://api.github.com/repos/apache/druid/issues/4778","id":328602924,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODYwMjkyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T17:38:28Z","updated_at":"2017-09-11T17:38:28Z","author_association":"CONTRIBUTOR","body":"It seems that BufferHashGrouperTest is often started but not completed, suggesting that's the one that crashes the VM.\r\n\r\nRaised #4779 to maybe help, on the guess that the way we're allocating the large buffers is causing the crashes. I think mmapping past the end of a file isn't kosher.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328602924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328613595","html_url":"https://github.com/apache/druid/pull/4735#issuecomment-328613595","issue_url":"https://api.github.com/repos/apache/druid/issues/4735","id":328613595,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODYxMzU5NQ==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T18:17:17Z","updated_at":"2017-09-11T18:17:17Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328613595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328619451","html_url":"https://github.com/apache/druid/pull/4764#issuecomment-328619451","issue_url":"https://api.github.com/repos/apache/druid/issues/4764","id":328619451,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODYxOTQ1MQ==","user":{"login":"niketh","id":626548,"node_id":"MDQ6VXNlcjYyNjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/626548?v=4","gravatar_id":"","url":"https://api.github.com/users/niketh","html_url":"https://github.com/niketh","followers_url":"https://api.github.com/users/niketh/followers","following_url":"https://api.github.com/users/niketh/following{/other_user}","gists_url":"https://api.github.com/users/niketh/gists{/gist_id}","starred_url":"https://api.github.com/users/niketh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketh/subscriptions","organizations_url":"https://api.github.com/users/niketh/orgs","repos_url":"https://api.github.com/users/niketh/repos","events_url":"https://api.github.com/users/niketh/events{/privacy}","received_events_url":"https://api.github.com/users/niketh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T18:36:59Z","updated_at":"2017-09-11T18:36:59Z","author_association":"CONTRIBUTOR","body":"@drcrallen If the same segment has been download (hand off is complete) by the historical , then it should be served by the historical. This PR ensures that given a choice, choose historical segments over realtime","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328619451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328619823","html_url":"https://github.com/apache/druid/pull/4767#issuecomment-328619823","issue_url":"https://api.github.com/repos/apache/druid/issues/4767","id":328619823,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODYxOTgyMw==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T18:38:17Z","updated_at":"2017-09-11T18:38:17Z","author_association":"CONTRIBUTOR","body":"👍 Fix checkstyle and merge at will.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328619823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328659910","html_url":"https://github.com/apache/druid/pull/4154#issuecomment-328659910","issue_url":"https://api.github.com/repos/apache/druid/issues/4154","id":328659910,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODY1OTkxMA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T21:11:48Z","updated_at":"2017-09-11T21:11:48Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328659910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328730056","html_url":"https://github.com/apache/druid/issues/4781#issuecomment-328730056","issue_url":"https://api.github.com/repos/apache/druid/issues/4781","id":328730056,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODczMDA1Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T04:05:01Z","updated_at":"2017-09-12T04:05:01Z","author_association":"CONTRIBUTOR","body":"I think both approaches make sense. If you are going with the first approach, I think it's the better one. Also please check IndexTask. IndexTask is another task type which does incremental publishing. I think it should be fine with this change because it publishes all segments once some conditions meet, but maybe you need to fix or change something.\r\n\r\nBTW, implicit persist() in push() looks weird to me as well because, as you said, it forces persisting segments whenever pushing them which is an inevitable side effect. I think simply push() should not call persist() implicitly, and callers should be responsible for deciding when segments are persisted.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328730056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328731263","html_url":"https://github.com/apache/druid/issues/4781#issuecomment-328731263","issue_url":"https://api.github.com/repos/apache/druid/issues/4781","id":328731263,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODczMTI2Mw==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T04:15:31Z","updated_at":"2017-09-12T04:15:31Z","author_association":"MEMBER","body":"@jihoonson IndexTask does not restore on restart and I think all this commit metadata business gets used when Appenderator restores the state on restart. So, I guess IndexTask should be fine ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328731263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328731547","html_url":"https://github.com/apache/druid/issues/4422#issuecomment-328731547","issue_url":"https://api.github.com/repos/apache/druid/issues/4422","id":328731547,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODczMTU0Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T04:18:24Z","updated_at":"2017-09-12T04:18:24Z","author_association":"MEMBER","body":"Also this idea implemented, it would allow to set different constraints for different queries, e. g. not allowing some low-priority queries to take a lot of memory.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328731547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328759922","html_url":"https://github.com/apache/druid/pull/4775#issuecomment-328759922","issue_url":"https://api.github.com/repos/apache/druid/issues/4775","id":328759922,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODc1OTkyMg==","user":{"login":"denglingang","id":13860906,"node_id":"MDQ6VXNlcjEzODYwOTA2","avatar_url":"https://avatars.githubusercontent.com/u/13860906?v=4","gravatar_id":"","url":"https://api.github.com/users/denglingang","html_url":"https://github.com/denglingang","followers_url":"https://api.github.com/users/denglingang/followers","following_url":"https://api.github.com/users/denglingang/following{/other_user}","gists_url":"https://api.github.com/users/denglingang/gists{/gist_id}","starred_url":"https://api.github.com/users/denglingang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denglingang/subscriptions","organizations_url":"https://api.github.com/users/denglingang/orgs","repos_url":"https://api.github.com/users/denglingang/repos","events_url":"https://api.github.com/users/denglingang/events{/privacy}","received_events_url":"https://api.github.com/users/denglingang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T07:06:37Z","updated_at":"2017-09-12T07:06:37Z","author_association":"MEMBER","body":"Thanks for your review,   -Xmx8g by default.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328759922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328917130","html_url":"https://github.com/apache/druid/issues/4781#issuecomment-328917130","issue_url":"https://api.github.com/repos/apache/druid/issues/4781","id":328917130,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODkxNzEzMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T16:59:33Z","updated_at":"2017-09-12T16:59:33Z","author_association":"CONTRIBUTOR","body":"You're correct. It should be fine.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328917130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328921098","html_url":"https://github.com/apache/druid/pull/4751#issuecomment-328921098","issue_url":"https://api.github.com/repos/apache/druid/issues/4751","id":328921098,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODkyMTA5OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T17:13:58Z","updated_at":"2017-09-12T17:14:10Z","author_association":"CONTRIBUTOR","body":"Updated the patch based on your comments @kaijianding. Thank you for reviewing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328921098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328952607","html_url":"https://github.com/apache/druid/pull/4770#issuecomment-328952607","issue_url":"https://api.github.com/repos/apache/druid/issues/4770","id":328952607,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk1MjYwNw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T19:11:45Z","updated_at":"2017-09-12T19:11:45Z","author_association":"CONTRIBUTOR","body":"@niketh I don't think this will fix the problem, how will your clients know not to send requests before broker lifecycle has finished starting ?\r\nWith 0.11.0 , you should be able to get list of brokers from coordinator using `/druid/coordinator/v1/cluster/broker` endpoint , list returned there is populated only after a broker has initialized its inventory. Then your client can query that endpoint to get list of brokers which are ready.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328952607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328960818","html_url":"https://github.com/apache/druid/pull/4745#issuecomment-328960818","issue_url":"https://api.github.com/repos/apache/druid/issues/4745","id":328960818,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk2MDgxOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T19:34:48Z","updated_at":"2017-09-12T19:34:48Z","author_association":"CONTRIBUTOR","body":"LGTM after the latest changes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328960818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328962220","html_url":"https://github.com/apache/druid/pull/4271#issuecomment-328962220","issue_url":"https://api.github.com/repos/apache/druid/issues/4271","id":328962220,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk2MjIyMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T19:38:55Z","updated_at":"2017-09-12T19:38:55Z","author_association":"CONTRIBUTOR","body":"@jon-wei can you please re-merge master and see if that helps with CI?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328962220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328962710","html_url":"https://github.com/apache/druid/pull/4271#issuecomment-328962710","issue_url":"https://api.github.com/repos/apache/druid/issues/4271","id":328962710,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk2MjcxMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T19:40:36Z","updated_at":"2017-09-12T19:40:36Z","author_association":"CONTRIBUTOR","body":"@pjain1 @jihoonson do you still have comments you'd like to make on this PR?\r\n\r\nI'm taking another look as well.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328962710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328975801","html_url":"https://github.com/apache/druid/pull/4751#issuecomment-328975801","issue_url":"https://api.github.com/repos/apache/druid/issues/4751","id":328975801,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk3NTgwMQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T20:32:18Z","updated_at":"2017-09-12T20:32:18Z","author_association":"CONTRIBUTOR","body":"This patch looks good to me. Please fix the conflicts.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328975801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328979116","html_url":"https://github.com/apache/druid/pull/4783#issuecomment-328979116","issue_url":"https://api.github.com/repos/apache/druid/issues/4783","id":328979116,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk3OTExNg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T20:45:14Z","updated_at":"2017-09-12T20:45:14Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328979116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328979583","html_url":"https://github.com/apache/druid/pull/4764#issuecomment-328979583","issue_url":"https://api.github.com/repos/apache/druid/issues/4764","id":328979583,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk3OTU4Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T20:46:48Z","updated_at":"2017-09-12T20:47:05Z","author_association":"CONTRIBUTOR","body":"@drcrallen yes, there will be small overlapping time when peon and historical would serve same segment. however, in that case, broker should prefer historical over peon for queries as historical will typically have better query performance and also it takes care of some queries failures that happen because broker sends the query to peon and peon shuts itself down because handoff had finished. this patch reduces those errors.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328979583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328982271","html_url":"https://github.com/apache/druid/pull/4570#issuecomment-328982271","issue_url":"https://api.github.com/repos/apache/druid/issues/4570","id":328982271,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk4MjI3MQ==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T20:57:46Z","updated_at":"2017-09-12T20:58:02Z","author_association":"CONTRIBUTOR","body":"@leventov created pr that fixes `search.search` https://github.com/druid-io/druid/pull/4785.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328982271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328987047","html_url":"https://github.com/apache/druid/pull/4785#issuecomment-328987047","issue_url":"https://api.github.com/repos/apache/druid/issues/4785","id":328987047,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk4NzA0Nw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T21:17:30Z","updated_at":"2017-09-12T21:17:30Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328987047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328992652","html_url":"https://github.com/apache/druid/pull/4751#issuecomment-328992652","issue_url":"https://api.github.com/repos/apache/druid/issues/4751","id":328992652,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk5MjY1Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T21:41:42Z","updated_at":"2017-09-12T21:41:42Z","author_association":"CONTRIBUTOR","body":"@jihoonson I fixed the conflicts.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328992652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/328998736","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-328998736","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":328998736,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk5ODczNg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T22:09:48Z","updated_at":"2017-09-12T22:09:48Z","author_association":"CONTRIBUTOR","body":"I'm not sure why TC complains about what is not touched in this patch, but it's fixed now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/328998736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329000146","html_url":"https://github.com/apache/druid/issues/4784#issuecomment-329000146","issue_url":"https://api.github.com/repos/apache/druid/issues/4784","id":329000146,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAwMDE0Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T22:16:59Z","updated_at":"2017-09-12T22:34:15Z","author_association":"MEMBER","body":"Specifically push needReverse boolean logic down to comparators: https://github.com/druid-io/druid/pull/4704/files/c0eecc0faa17ba744bad1203968cc16c2e69b943#r137863033","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329000146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329008131","html_url":"https://github.com/apache/druid/pull/4744#issuecomment-329008131","issue_url":"https://api.github.com/repos/apache/druid/issues/4744","id":329008131,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAwODEzMQ==","user":{"login":"ginoledesma","id":879991,"node_id":"MDQ6VXNlcjg3OTk5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/879991?v=4","gravatar_id":"","url":"https://api.github.com/users/ginoledesma","html_url":"https://github.com/ginoledesma","followers_url":"https://api.github.com/users/ginoledesma/followers","following_url":"https://api.github.com/users/ginoledesma/following{/other_user}","gists_url":"https://api.github.com/users/ginoledesma/gists{/gist_id}","starred_url":"https://api.github.com/users/ginoledesma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ginoledesma/subscriptions","organizations_url":"https://api.github.com/users/ginoledesma/orgs","repos_url":"https://api.github.com/users/ginoledesma/repos","events_url":"https://api.github.com/users/ginoledesma/events{/privacy}","received_events_url":"https://api.github.com/users/ginoledesma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T23:01:09Z","updated_at":"2017-09-12T23:01:09Z","author_association":"CONTRIBUTOR","body":"Not sure why the travis builds are failing, but it seems to be affecting the other PRs as well — particularly on those with the `-Xmx512m` maven opts set.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329008131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329010062","html_url":"https://github.com/apache/druid/pull/4744#issuecomment-329010062","issue_url":"https://api.github.com/repos/apache/druid/issues/4744","id":329010062,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAxMDA2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T23:12:28Z","updated_at":"2017-09-12T23:12:28Z","author_association":"CONTRIBUTOR","body":"@ginoledesma We've been having some unreliability with one of the tests recently, sorry about that. I re-ran it and it may pass when run a second time.\r\n\r\nThe patch looks good to me, thanks for the additional tests as well. Have you had a chance to get the CLA sorted?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329010062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329019088","html_url":"https://github.com/apache/druid/pull/4770#issuecomment-329019088","issue_url":"https://api.github.com/repos/apache/druid/issues/4770","id":329019088,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAxOTA4OA==","user":{"login":"niketh","id":626548,"node_id":"MDQ6VXNlcjYyNjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/626548?v=4","gravatar_id":"","url":"https://api.github.com/users/niketh","html_url":"https://github.com/niketh","followers_url":"https://api.github.com/users/niketh/followers","following_url":"https://api.github.com/users/niketh/following{/other_user}","gists_url":"https://api.github.com/users/niketh/gists{/gist_id}","starred_url":"https://api.github.com/users/niketh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketh/subscriptions","organizations_url":"https://api.github.com/users/niketh/orgs","repos_url":"https://api.github.com/users/niketh/repos","events_url":"https://api.github.com/users/niketh/events{/privacy}","received_events_url":"https://api.github.com/users/niketh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:07:17Z","updated_at":"2017-09-13T00:07:51Z","author_association":"CONTRIBUTOR","body":"@himanshug Tested in production and it works as expected. \r\n\r\n>> how will your clients know not to send requests before broker lifecycle has finished starting ?\r\n\r\nJetty will not start until the full view is loaded","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329019088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329019246","html_url":"https://github.com/apache/druid/pull/4786#issuecomment-329019246","issue_url":"https://api.github.com/repos/apache/druid/issues/4786","id":329019246,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAxOTI0Ng==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:08:15Z","updated_at":"2017-09-13T00:08:15Z","author_association":"CONTRIBUTOR","body":"Can you please add the benefits of a 4.0.0? \r\n\r\nTaking on a .0 major release is a bit scary","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329019246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329021360","html_url":"https://github.com/apache/druid/pull/4786#issuecomment-329021360","issue_url":"https://api.github.com/repos/apache/druid/issues/4786","id":329021360,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAyMTM2MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:21:00Z","updated_at":"2017-09-13T00:21:00Z","author_association":"CONTRIBUTOR","body":"The benefits are described in the original PR (#4752). I updated the PR description.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329021360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329021698","html_url":"https://github.com/apache/druid/pull/4752#issuecomment-329021698","issue_url":"https://api.github.com/repos/apache/druid/issues/4752","id":329021698,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAyMTY5OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:23:28Z","updated_at":"2017-09-13T00:23:28Z","author_association":"CONTRIBUTOR","body":"@jihoonson is continuing this work in #4786.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329021698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329022052","html_url":"https://github.com/apache/druid/pull/4704#issuecomment-329022052","issue_url":"https://api.github.com/repos/apache/druid/issues/4704","id":329022052,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAyMjA1Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:25:58Z","updated_at":"2017-09-13T00:25:58Z","author_association":"CONTRIBUTOR","body":"@leventov Looks that this PR is complicated to understand. Do you think it's better to review after I leave more detailed explanation about this PR and add more comments/java docs?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329022052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329033661","html_url":"https://github.com/apache/druid/pull/4767#issuecomment-329033661","issue_url":"https://api.github.com/repos/apache/druid/issues/4767","id":329033661,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAzMzY2MQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T01:51:33Z","updated_at":"2017-09-13T01:51:33Z","author_association":"CONTRIBUTOR","body":"@jihoonson DruidServerHolder.updateSegmentsListAsync() is tested by HttpServerInventoryViewTest.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329033661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329035289","html_url":"https://github.com/apache/druid/pull/4540#issuecomment-329035289","issue_url":"https://api.github.com/repos/apache/druid/issues/4540","id":329035289,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAzNTI4OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T02:02:54Z","updated_at":"2017-09-13T02:02:54Z","author_association":"CONTRIBUTOR","body":"@drcrallen ping ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329035289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329054478","html_url":"https://github.com/apache/druid/issues/4790#issuecomment-329054478","issue_url":"https://api.github.com/repos/apache/druid/issues/4790","id":329054478,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTA1NDQ3OA==","user":{"login":"gaodayue","id":1198446,"node_id":"MDQ6VXNlcjExOTg0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1198446?v=4","gravatar_id":"","url":"https://api.github.com/users/gaodayue","html_url":"https://github.com/gaodayue","followers_url":"https://api.github.com/users/gaodayue/followers","following_url":"https://api.github.com/users/gaodayue/following{/other_user}","gists_url":"https://api.github.com/users/gaodayue/gists{/gist_id}","starred_url":"https://api.github.com/users/gaodayue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaodayue/subscriptions","organizations_url":"https://api.github.com/users/gaodayue/orgs","repos_url":"https://api.github.com/users/gaodayue/repos","events_url":"https://api.github.com/users/gaodayue/events{/privacy}","received_events_url":"https://api.github.com/users/gaodayue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T04:18:46Z","updated_at":"2017-09-13T04:18:46Z","author_association":"CONTRIBUTOR","body":"Related code in TimestampSpec.java\r\n\r\n```java\r\n// remember last value parsed\r\nprivate ParseCtx parseCtx = new ParseCtx();\r\n\r\npublic DateTime extractTimestamp(Map<String, Object> input)\r\n{\r\n  return parseDateTime(input.get(timestampColumn));\r\n}\r\n\r\npublic DateTime parseDateTime(Object input)\r\n{\r\n  DateTime extracted = null;\r\n  if (input != null) {\r\n    if (input.equals(parseCtx.lastTimeObject)) {\r\n      extracted = parseCtx.lastDateTime;\r\n    } else {\r\n      ParseCtx newCtx = new ParseCtx();\r\n      newCtx.lastTimeObject = input;\r\n      extracted = timestampConverter.apply(input);\r\n      newCtx.lastDateTime = extracted;\r\n      parseCtx = newCtx;\r\n    }\r\n  }\r\n  return extracted;\r\n}\r\n```\r\n\r\nIn this case, input of `parseDateTime` can't be null (timestamp column exists!), and timestampConverter.apply never returns null. So it looks like `parseDateTime` can't return null but it  did happen occasionally.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329054478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/329055356","html_url":"https://github.com/apache/druid/issues/4790#issuecomment-329055356","issue_url":"https://api.github.com/repos/apache/druid/issues/4790","id":329055356,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTA1NTM1Ng==","user":{"login":"gaodayue","id":1198446,"node_id":"MDQ6VXNlcjExOTg0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1198446?v=4","gravatar_id":"","url":"https://api.github.com/users/gaodayue","html_url":"https://github.com/gaodayue","followers_url":"https://api.github.com/users/gaodayue/followers","following_url":"https://api.github.com/users/gaodayue/following{/other_user}","gists_url":"https://api.github.com/users/gaodayue/gists{/gist_id}","starred_url":"https://api.github.com/users/gaodayue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaodayue/subscriptions","organizations_url":"https://api.github.com/users/gaodayue/orgs","repos_url":"https://api.github.com/users/gaodayue/repos","events_url":"https://api.github.com/users/gaodayue/events{/privacy}","received_events_url":"https://api.github.com/users/gaodayue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T04:26:37Z","updated_at":"2017-09-13T04:26:37Z","author_association":"CONTRIBUTOR","body":"It seems that TimestampSpec is used inside \"/push-events\" endpoint of EventReceiverFirehose, so there can be concurrent usage of it. But the implementation is not thread-safe, there is a race condition of ParseCtx.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/329055356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]