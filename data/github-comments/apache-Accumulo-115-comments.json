[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615023234","html_url":"https://github.com/apache/accumulo/issues/3559#issuecomment-1615023234","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3559","id":1615023234,"node_id":"IC_kwDOACaFSM5gQ0yC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:20:06Z","updated_at":"2023-06-30T18:20:06Z","author_association":"CONTRIBUTOR","body":"> Also, related to this idea, there was an idea to change the serialization of Fate storage to use Java 17 record types. \r\n\r\nNo, but that sounds really nice.\r\n\r\nAlso something unrelated is prioritization of FATE operations.  This is also driven by elasticity.  Currently the system initiated split FATE operations are mixed in with user initated FATE ops.  Ideally the user initiated operations would get some sort of priority.  If FATE ops were stored in the metadata table, then maybe the schema could naturally support prioritization and/or different queues in its sort order.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615023234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615025108","html_url":"https://github.com/apache/accumulo/issues/3559#issuecomment-1615025108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3559","id":1615025108,"node_id":"IC_kwDOACaFSM5gQ1PU","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:21:12Z","updated_at":"2023-06-30T18:21:12Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I think using records for serialization deserves its own issue if it does not have one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615025108/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615057728","html_url":"https://github.com/apache/accumulo/issues/3560#issuecomment-1615057728","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3560","id":1615057728,"node_id":"IC_kwDOACaFSM5gQ9NA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:40:11Z","updated_at":"2023-06-30T18:40:11Z","author_association":"CONTRIBUTOR","body":"One possible solution discussed with @dlmarion  was to create a separate FATE instantiation for system operations.  This  instantiation would have its own storage area in ZK and its own threads.  It would also offer the ability to reject FATE operations when there are certain number active, this is something that FATE does not currently support.  This would address the memory and execution concerns.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615057728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615061709","html_url":"https://github.com/apache/accumulo/issues/3560#issuecomment-1615061709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3560","id":1615061709,"node_id":"IC_kwDOACaFSM5gQ-LN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:44:27Z","updated_at":"2023-06-30T18:44:48Z","author_association":"CONTRIBUTOR","body":"#3559 addresses some of the problems mentioned in the solution above.  The solution in #3559 does not explicitly address having multiple instantiations of FATE, but it could support that.  The solution mentioned in my previous comment does not address the problem of write pressure on ZK like #3559 does.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615061709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615090841","html_url":"https://github.com/apache/accumulo/issues/3559#issuecomment-1615090841","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3559","id":1615090841,"node_id":"IC_kwDOACaFSM5gRFSZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T19:09:09Z","updated_at":"2023-06-30T19:09:30Z","author_association":"CONTRIBUTOR","body":"Taking a quick look at how table locks work currently I think they may work as conditional mutations.  The table locks do not use ephemeral nodes or notifications, features that only ZK would have. Fate threads will try to get a lock and if they can not then jump to another fate operation, so they never wait for a lock which could use ZK notifications.  This polling approach would work with conditional mutations.  The lock nodes in ZK are related to a FATE operation and not a running process, that is why ephemeral nodes are not used.  The server process locks in ZK use ephemeral nodes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615090841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615135466","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1615135466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1615135466,"node_id":"IC_kwDOACaFSM5gRQLq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T19:58:27Z","updated_at":"2023-06-30T19:58:27Z","author_association":"MEMBER","body":"> What if instead of a collapsible server dropdown menu, the three servers had their own separate link in the nav bar next to one another?\r\n\r\nThat's the solution I said above that I thought would be \"mangeled\", especially on smaller screen widths. It diverges from the attempt to try to create a consistent minimalistic theme in the bar. So, I think they should stay collapsed in a menu, but a small and distinct visual element can be used that propagates up in the safe mode case (or other unique, rare, cases) to replace the dot.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615135466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615142382","html_url":"https://github.com/apache/accumulo/pull/3561#issuecomment-1615142382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3561","id":1615142382,"node_id":"IC_kwDOACaFSM5gRR3u","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T20:06:00Z","updated_at":"2023-06-30T20:06:00Z","author_association":"CONTRIBUTOR","body":"Is this approach going to work if there are multiple managers?  That's not the case now, but asking if the changes would be able to accommodate more that one manager?  The answer  might be that with multiple managers, a whole lot of other things will need to change, so it does not matter.  But, would be desirable if it could be accommodated, or at least provide a path towards multiple managers rather than being another road block.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615142382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615149681","html_url":"https://github.com/apache/accumulo/pull/3561#issuecomment-1615149681","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3561","id":1615149681,"node_id":"IC_kwDOACaFSM5gRTpx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T20:13:49Z","updated_at":"2023-06-30T20:14:46Z","author_association":"MEMBER","body":"> Is this approach going to work if there are multiple managers?\r\n\r\nI'm not sure how safe mode would work with multiple managers, but assuming they each could be in safe mode, then visually on the monitor, the main change would be to add an \"s\" to make it plural and the dot color or other visual element could indicate that any one of the managers are in safe mode, just like things are rolled up to the single \"Tablet Servers\" item. So, I don't think it really affects this at all right now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615149681/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615276055","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1615276055","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1615276055,"node_id":"IC_kwDOACaFSM5gRygX","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T23:33:56Z","updated_at":"2023-06-30T23:33:56Z","author_association":"MEMBER","body":"@ivakegg Mentioned a cloned table earlier. I checked, and it doesn't look like we even have a `--copy-config` option for the clone table command. It looks like we might automatically infer it, though... and then we provide a mechanism to set additional options, and exclude others, when you clone the table. If clone table is copying the effective config, and not the actual config, then that's not just a break in user expectations like it is for the `--copy-config` option on `createtable` command. That's an actual bug in the clone table command. Cloning a table should always copy the actual config, not the effective config.\r\n\r\nSo, the work on #3562 to address this for `createtable` is only part of a solution. `clonetable` still needs to be fixed, if that's doing what Ivan implied its doing above, when he referred to a cloned table. (It's possible clone table is fine, though, and he was just referring to a clone of a table that was first created using `createtable --copy-config`, but this needs to be investigated before we can close out this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615276055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615277533","html_url":"https://github.com/apache/accumulo/pull/3562#issuecomment-1615277533","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3562","id":1615277533,"node_id":"IC_kwDOACaFSM5gRy3d","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T23:37:54Z","updated_at":"2023-06-30T23:39:47Z","author_association":"CONTRIBUTOR","body":"The difference between copy-config and copy-properties using a shell\r\n\r\n```\r\n> config -s table.custom.sys_prop=sys_v1\r\n> createnamespace nsSrc\r\n> config -s table.custom.ns_prop=ns_v1 -ns nsSrc\r\n\r\n> createtable nsSrc.table1\r\n# copy configuration\r\n> createtable -cc nsSrc.table1 nsSrc.dest1\r\n# copy properties\r\n> createtable -cp nsSrc.table1 nsSrc.dest2\r\n\r\n# modify sys and namesapce props\r\n> config -s table.custom.sys_prop=sys_v2\r\n> config -s table.custom.ns_prop=ns_v2 -ns nsSrc\r\n\r\nResults:\r\n\r\n> config -f table.custom -t nsSrc.table1\r\n\r\n-----------+--------------------------+-------------------------------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+-------------------------------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns_v2\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v2\r\n-----------+--------------------------+-------------------------------------------------------------\r\n\r\n# show copy-properties does not override sys and namesapce (not in local properties) - matches source\r\n\r\n> config -f table.custom -t nsSrc.dest2\r\n\r\n-----------+--------------------------+-------------------------------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+-------------------------------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns_v2\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v2\r\n-----------+--------------------------+--------------------------------------------------------------\r\n\r\n# show copy-config is overriding sys and namespace values (copied local to table when table created) \r\n\r\n> config -f table.custom -t nsSrc.dest1\r\n\r\n-----------+--------------------------+-----------------------------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+-----------------------------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns_v2\r\ntable      |    @override ........... | ns_v1\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v2\r\ntable      |    @override ........... | sys_v1\r\n-----------+--------------------------+-----------------------------------------------------------\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615277533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615281410","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1615281410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1615281410,"node_id":"IC_kwDOACaFSM5gRz0C","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T23:48:45Z","updated_at":"2023-07-01T00:02:01Z","author_association":"CONTRIBUTOR","body":"While clone table was mention, it was also mentioned that the -cc option was causing the issue:\r\n\r\n``` \r\nTable SRCTABLE is cloned to DESTTABLE using -cc, which adds a table level setting for the above property ```\r\n```\r\n as far as I can tell, clonetable does not have a -cc option. createtable and createnamespace do.\r\n\r\nAlso, running a sample in the shell (using same props as previous comment)\r\n\r\n```\r\nclonetable nsSrc.table1 nsSrc.clone1\r\n\r\nconfig -f table.custom -t nsSrc.table1\r\n-----------+--------------------------+-------------------------------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+-------------------------------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns_v2\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v2\r\n-----------+--------------------------+-------------------------------------------------------------\r\nroot@uno nsSrc.dest2> config -f table.custom -t nsSrc.clone1\r\n-----------+--------------------------+-------------------------------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+-------------------------------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns_v2\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v2\r\n-----------+--------------------------+-------------------------------------------------------------\r\n\r\nAnd overriding the system and namespace props show that clone did not copy the configuration.\r\n\r\n> config -s table.custom.sys_prop=sys_v3\r\n> config -s table.custom.ns_prop=ns_v3 -n nsSrc\r\n> config -f table.custom -t nsSrc.clone1\r\n-----------+--------------------------+-------------------------------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+------------------------------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns_v3\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v3\r\n-----------+--------------------------+-------------------------------------------------------------\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615281410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615283459","html_url":"https://github.com/apache/accumulo/pull/3562#issuecomment-1615283459","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3562","id":1615283459,"node_id":"IC_kwDOACaFSM5gR0UD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T23:55:14Z","updated_at":"2023-06-30T23:55:14Z","author_association":"MEMBER","body":"Also, a note about GitHub: When you put `Fixes NNNN` in the title, GitHub does not automatically link the PR with the open issue. However, I believe it will automatically link them (or offer a suggestion to do so), if you put `Fixes #NNNN` in the body. That also makes a clickable link in the body (must include `#` for that), whereas the title is never clickable, so you have to manually navigate to the issue from the PR by re-typing the issue number in the address bar manually. There's also the additional benefit of being able to save on valuable real estate in the title by omitting the \"Fixes NNNN\" there. There's plenty of room in the body, and it's much more useful there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615283459/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615286205","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1615286205","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1615286205,"node_id":"IC_kwDOACaFSM5gR0-9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-01T00:03:00Z","updated_at":"2023-07-01T00:04:49Z","author_association":"MEMBER","body":"> While clone table was mention, it was also mentioned that the -cc option was causing the issue:\r\n> \r\n> ```\r\n> Table SRCTABLE is cloned to DESTTABLE using -cc, which adds a table level setting for the above property ```\r\n> ```\r\n> \r\n> as far as I can tell, clonetable does not have a -cc option. createtable and createnamespace do.\r\n\r\nRight, it doesn't. That's why I think it's a bug. Whereas the `-cc, --copy-config` option has the semantics of \"use the effective config of this other table as a template\", the `clonetable` command has the semantics of `make this table behave like the other one, but with a new name`. So, in doing that, it should copy over the config from the source table (modified by the user's set and exclude flags), and the config it uses should be the *actual* config, not the effective config... because that wouldn't be the same.\r\n\r\nBasically, I think the issue reported here is a mismatch between the user's use case and the actual behavior (the option isn't well-suited for their use case) for the `createtable` command with the `--copy-config` option (something that is being addressed in #3562). But, when it comes to `clonetable` (without any copying options), the same observed problem would be an actual bug, because it's not cloning properly. If that can be confirmed as a bug in `clonetable`, then #3562 isn't going to address it. We'd still need a separate fix for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615286205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615299585","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1615299585","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1615299585,"node_id":"IC_kwDOACaFSM5gR4QB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-01T00:19:23Z","updated_at":"2023-07-01T00:19:23Z","author_association":"MEMBER","body":"Okay, nevermind... I just located the part of the code that does the config copy for the clone, and it's literally just copying the config node in ZK from one table to the other. It doesn't do any `TableConfiguration` effective hierarchy when it copies the config over during a clone operation. So, forget I said anything about `clonetable`... it's not a problem. :smiley_cat: Ed's work on #3562 should suffice.\r\n\r\nThat said, I'm still very much interested in hearing feedback on my suggestion to fix the classloader factory that I made in https://github.com/apache/accumulo/issues/3233#issuecomment-1604955414","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615299585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1616747153","html_url":"https://github.com/apache/accumulo/issues/3505#issuecomment-1616747153","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3505","id":1616747153,"node_id":"IC_kwDOACaFSM5gXZqR","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-02T17:45:04Z","updated_at":"2023-07-02T17:45:04Z","author_association":"CONTRIBUTOR","body":"As part of the reorganization we should also address https://github.com/apache/accumulo/pull/3506#discussion_r1248270420","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1616747153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1618795161","html_url":"https://github.com/apache/accumulo/pull/3563#issuecomment-1618795161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3563","id":1618795161,"node_id":"IC_kwDOACaFSM5gfNqZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T16:07:44Z","updated_at":"2023-07-03T16:07:44Z","author_association":"CONTRIBUTOR","body":"Curious if you have looked at #3200 and your thoughts on using ZK to signal Tablet metadata changes. #3200 contains a Cache, but that could be removed and it could notify listeners instead. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1618795161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1618902100","html_url":"https://github.com/apache/accumulo/pull/3563#issuecomment-1618902100","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3563","id":1618902100,"node_id":"IC_kwDOACaFSM5gfnxU","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T17:09:46Z","updated_at":"2023-07-03T17:10:25Z","author_association":"CONTRIBUTOR","body":"> Curious if you have looked at https://github.com/apache/accumulo/pull/3200 and your thoughts on using ZK to signal Tablet metadata changes.\r\n\r\nZK is not very scalable in terms of writes (I think each write goes to the leader which then forwards it to all other ZK servers and waits for a majority to respond).  This potential write bottleneck seem like an issue when considering it as an option for signaling tablet metadata refresh.\r\n\r\nAs for the tablet metadata update in the tablet server I have not had a chance to look into it in detail.  Some of the issues that I know will arise for refresh off the top of my head are :\r\n\r\n * Needs to properly synchronize the cut over from in memory map to minor compacted file w.r.t. initiating new scan.  A new scan should always use one or the other, never both or neither.\r\n * Needs to properly synchronize the tracking of scan file entries in tablet metadata and active scans.\r\n * Needs to properly synchronize with write ahead log recovery and tablets update around that.\r\n * Needs to properly synchronize with a tablet that is loading or unloading.\r\n\r\nThe tablet server code has synchronization around bulk import, compactions, and splits that can be remove.  I am thinking after we remove that code we can evaluate what needs are left and look into simplifying the tablets synchronization model that refresh will have to fit into.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1618902100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1618966505","html_url":"https://github.com/apache/accumulo/pull/3555#issuecomment-1618966505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3555","id":1618966505,"node_id":"IC_kwDOACaFSM5gf3fp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T18:13:44Z","updated_at":"2023-07-03T18:13:44Z","author_association":"CONTRIBUTOR","body":"I had seen a comment somewhere else that we were going to merge CompactionIT and the ExternalCompaction ITs in the elasticity branch at some point.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1618966505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619040788","html_url":"https://github.com/apache/accumulo/pull/3200#issuecomment-1619040788","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3200","id":1619040788,"node_id":"IC_kwDOACaFSM5ggJoU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T19:21:44Z","updated_at":"2023-07-03T19:21:44Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #3563 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619040788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619060280","html_url":"https://github.com/apache/accumulo/pull/3555#issuecomment-1619060280","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3555","id":1619060280,"node_id":"IC_kwDOACaFSM5ggOY4","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T19:44:26Z","updated_at":"2023-07-03T19:44:26Z","author_association":"CONTRIBUTOR","body":"> I had seen a comment somewhere else that we were going to merge CompactionIT and the ExternalCompaction ITs in the elasticity branch at some point.\r\n\r\nYeah opened #3525 for that.  In 2.1 we have two different code paths for an iterator failing.  When a compaction iterator fails in an internal compaction it will take a different code path than one failing in an external compaction, but the behavior should be the same for both paths.  That is why I was thinking it would be good to cover both code paths in test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619060280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619096143","html_url":"https://github.com/apache/accumulo/pull/3555#issuecomment-1619096143","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3555","id":1619096143,"node_id":"IC_kwDOACaFSM5ggXJP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T20:13:14Z","updated_at":"2023-07-03T20:13:14Z","author_association":"CONTRIBUTOR","body":"> When a compaction iterator fails in an internal compaction it will take a different code path than one failing in an external compaction, but the behavior should be the same for both paths.\r\n\r\nOk, I knew the code paths diverged at some point, but wasn't sure where. I added the ITs - good news - they pass without further modification. commit incoming.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619096143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619129208","html_url":"https://github.com/apache/accumulo/issues/3528#issuecomment-1619129208","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3528","id":1619129208,"node_id":"IC_kwDOACaFSM5ggfN4","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T20:41:37Z","updated_at":"2023-07-03T20:41:37Z","author_association":"CONTRIBUTOR","body":"Would probably make sense to do this after #3551 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619129208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619131242","html_url":"https://github.com/apache/accumulo/issues/3468#issuecomment-1619131242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3468","id":1619131242,"node_id":"IC_kwDOACaFSM5ggftq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T20:43:31Z","updated_at":"2023-07-03T20:43:31Z","author_association":"CONTRIBUTOR","body":"Completed in #3538 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619131242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619131716","html_url":"https://github.com/apache/accumulo/issues/3467#issuecomment-1619131716","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3467","id":1619131716,"node_id":"IC_kwDOACaFSM5ggf1E","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T20:44:07Z","updated_at":"2023-07-03T20:44:07Z","author_association":"CONTRIBUTOR","body":"Closing as #3513 was merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619131716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619134070","html_url":"https://github.com/apache/accumulo/issues/3464#issuecomment-1619134070","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3464","id":1619134070,"node_id":"IC_kwDOACaFSM5gggZ2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T20:46:58Z","updated_at":"2023-07-03T20:46:58Z","author_association":"CONTRIBUTOR","body":"This was mostly done in #3513.  For what #3513 did not cover, more specific follow on issues were opened.  So closing this issue out as its covered by #3513 and its follow on issues.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1619134070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1621133582","html_url":"https://github.com/apache/accumulo/issues/3564#issuecomment-1621133582","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3564","id":1621133582,"node_id":"IC_kwDOACaFSM5goIkO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T06:51:46Z","updated_at":"2023-07-05T06:51:46Z","author_association":"MEMBER","body":"@keith-turner Planning to fix this in 2.1 branch, or just main branch? I think probably main is the only place we need this... existing tests are pretty stable in 2.1, as far as I can tell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1621133582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622188143","html_url":"https://github.com/apache/accumulo/pull/3555#issuecomment-1622188143","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3555","id":1622188143,"node_id":"IC_kwDOACaFSM5gsKBv","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T17:28:05Z","updated_at":"2023-07-05T17:28:05Z","author_association":"CONTRIBUTOR","body":"LGTM, \r\n\r\nRan CompactionIT, ReadWriteIT, and ExternalCompaction4_IT locally and all completed without errors.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622188143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622189794","html_url":"https://github.com/apache/accumulo/pull/3555#issuecomment-1622189794","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3555","id":1622189794,"node_id":"IC_kwDOACaFSM5gsKbi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T17:29:23Z","updated_at":"2023-07-05T17:29:23Z","author_association":"CONTRIBUTOR","body":"Full IT build passed too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622189794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622412057","html_url":"https://github.com/apache/accumulo/issues/3564#issuecomment-1622412057","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3564","id":1622412057,"node_id":"IC_kwDOACaFSM5gtAsZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T20:00:35Z","updated_at":"2023-07-05T20:00:35Z","author_association":"CONTRIBUTOR","body":"> @keith-turner Planning to fix this in 2.1 branch, or just main branch?\r\n\r\nI was thinking of main when I opened the issue. I suppose the motivation for fixing something in 2.1 would be if we suspected a test could return a false positive when it did not check the return value.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622412057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622438557","html_url":"https://github.com/apache/accumulo/pull/3561#issuecomment-1622438557","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3561","id":1622438557,"node_id":"IC_kwDOACaFSM5gtHKd","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T20:19:39Z","updated_at":"2023-07-05T20:19:39Z","author_association":"MEMBER","body":"In 589787c I returned the navbar servers dropdown to how it was. I also made it do that servers dropdown notification takes into account the manager state and goal state when its color is set. I also did quite a bit of refactoring to break things down into smaller methods and create constants for frequently repeated variable names.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622438557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622525154","html_url":"https://github.com/apache/accumulo/issues/3564#issuecomment-1622525154","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3564","id":1622525154,"node_id":"IC_kwDOACaFSM5gtcTi","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T21:17:29Z","updated_at":"2023-07-05T21:17:29Z","author_association":"CONTRIBUTOR","body":"Would it be an option to check the return state in Wait.waitFor and if false, throw an exception (IllegalState?)  That way instead of waiting \"forever\" and needing the test to time out we could signal the failed condition sooner and the callers would bit need to check the return status?\r\n\r\nI'm think of something like a ZooKeeper update - it should happen within seconds, certainly less than a minute - why wait longer for the entire test timeout period.\r\n\r\nIf an exception is okay, I can take this and target 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622525154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622597381","html_url":"https://github.com/apache/accumulo/issues/3564#issuecomment-1622597381","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3564","id":1622597381,"node_id":"IC_kwDOACaFSM5gtt8F","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T22:10:28Z","updated_at":"2023-07-05T22:13:09Z","author_association":"CONTRIBUTOR","body":"> Would it be an option to check the return state in Wait.waitFor and if false, throw an exception (IllegalState?) That way instead of waiting \"forever\" and needing the test to time out we could signal the failed condition sooner and the callers would bit need to check the return status?\r\n\r\nThere are Wait.waitFor methods that take a timeout period as a parameter.  If someone wants to wait less than the test timeout then they can call those methods and maybe those methods could throw an exception instead of return a boolean.  The methods that take a timeout parameter could directly call a junit method to the fail the test.   The method that does not take a timeout parameter could wait forever and let the per test timeout config determine what happens.  These two changes could make using the methods easier and make the test more correct, there is never a boolean to remember to check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622597381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622601476","html_url":"https://github.com/apache/accumulo/issues/3564#issuecomment-1622601476","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3564","id":1622601476,"node_id":"IC_kwDOACaFSM5gtu8E","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T22:15:36Z","updated_at":"2023-07-05T22:15:36Z","author_association":"CONTRIBUTOR","body":"I'll have a PR up shortly (as long as sunny tests pass)\r\n\r\nThere was push-back from trying to include junit dependencies in this class in the recent past - so I opted to just thow IllegalStateException - but we can change that if we don't like the way it looks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622601476/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622757501","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1622757501","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1622757501,"node_id":"IC_kwDOACaFSM5guVB9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T00:58:06Z","updated_at":"2023-07-06T02:50:05Z","author_association":"CONTRIBUTOR","body":"> I was able to reproduce the tablet server shutting down, but I think the cause may be different. What I'm seeing in the logs is that the Manager requests that the root and test table tablet be unloaded from the tablet server. \r\n\r\nThat sounds like an additional bug possibly, I opened #3569 as a fix for the problem of sessions not being cleaned up.  We should not close this issue for #3569 w/o figuring out the TGW problem or opening an issue for it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622757501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622757795","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1622757795","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1622757795,"node_id":"IC_kwDOACaFSM5guVGj","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T00:58:35Z","updated_at":"2023-07-06T00:58:35Z","author_association":"CONTRIBUTOR","body":"I have not tested this yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1622757795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623033892","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1623033892","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1623033892,"node_id":"IC_kwDOACaFSM5gvYgk","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T05:53:04Z","updated_at":"2023-07-06T06:01:24Z","author_association":"CONTRIBUTOR","body":"I first tested this change by merging in @dlmarion's IT changes from https://github.com/apache/accumulo/compare/2.1...dlmarion:accumulo:3512-tserver-not-shutting-down\r\nUnfortunately, his IT test still failed.\r\n\r\nI spun up fluo-uno based on this branch and tested with the [jshell loop](https://github.com/apache/accumulo/issues/3512#issuecomment-1611811671)\r\n\r\nThe loop was able to complete with no errors. \r\n```\r\nThu Jul 06 05:24:21 UTC 2023 500000\r\nThu Jul 06 05:24:34 UTC 2023 added split 00998000\r\nThu Jul 06 05:24:35 UTC 2023 added split 00999000\r\nThu Jul 06 05:24:23 UTC 2023 500000\r\n\r\njshell> Thu Jul 06 05:24:24 UTC 2023 500000\r\nThu Jul 06 05:24:25 UTC 2023 500000\r\nThu Jul 06 05:24:27 UTC 2023 500000\r\nThu Jul 06 05:24:28 UTC 2023 500000\r\n```\r\n\r\nI then tested the same jshell loop with the current head of [2.1](https://github.com/apache/accumulo/commit/19c81d8249969cc6ee11a41330cc3d0a9215932a) and I started getting errors after split `00019000`\r\n```\r\nThu Jul 06 05:40:40 UTC 2023 added split 00018000\r\nThu Jul 06 05:40:22 UTC 2023 500000\r\nThu Jul 06 05:40:41 UTC 2023 added split 00019000\r\nThu Jul 06 05:40:22 UTC 2023 500000\r\n2023-07-06T05:42:42,978 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00020000 on table foo. Seen 5 failures.\r\n2023-07-06T05:42:48,681 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00020000 on table foo. Seen 50 failures.\r\n2023-07-06T05:42:54,749 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00020000 on table foo. Seen 100 failures.\r\n2023-07-06T05:43:00,717 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00020000 on table foo. Seen 150 failures.\r\n2023-07-06T05:43:06,599 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00020000 on table foo. Seen 200 failures.\r\n2023-07-06T05:43:12,473 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00020000 on table foo. Seen 250 failures.\r\n```\r\nTserver logs for failing loop test:\r\n```\r\n2023-07-06T05:43:12,473 [tablet.Tablet] DEBUG: File 1<;00019000 not splitting : Tablet 1<;00019000 already CLOSED\r\n2023-07-06T05:43:12,475 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T05:43:12,483 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:43982; action: authenticate;\r\n2023-07-06T05:43:12,484 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:43982; action: authenticate;\r\n2023-07-06T05:43:12,484 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:43982; action: scan; targetTable: foo; authorizations: ; range: [00084997%00; : [] 9223372036854775807 false,+inf); columns: []; iterators: []; iteratorOptions: {};\r\n```\r\n\r\nOnce the loop is terminated, the logs just repeat the same wait message. \r\n```\r\n2023-07-06T06:00:36,504 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,554 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,605 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,655 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,705 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,755 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,805 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n2023-07-06T06:00:36,855 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00019000. 0 writes 1 scans\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623033892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623577484","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1623577484","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1623577484,"node_id":"IC_kwDOACaFSM5gxdOM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T12:14:50Z","updated_at":"2023-07-06T12:14:50Z","author_association":"CONTRIBUTOR","body":"@ddanielr - I had some changes to my branch local, I just pushed them up. FYI in case you want the latest.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623577484/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623834761","html_url":"https://github.com/apache/accumulo/issues/3570#issuecomment-1623834761","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3570","id":1623834761,"node_id":"IC_kwDOACaFSM5gycCJ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T14:58:50Z","updated_at":"2023-07-06T15:04:37Z","author_association":"CONTRIBUTOR","body":"I modified the TabletStateChangeIterator to return all metadata tablets just so that the stats could be updated in the Manager. This appeared to work, but now I'm seeing the same issue with the stats on the user tables. The stats for the user tables don't exist because there is no state change in the user tables tablets. So, the metadata table tablets get unloaded before the user tables tablets.\r\n\r\nBecause of this, the user tablet is stuck trying to close:\r\n\r\n```\r\n\"tablet migration-Worker-1\" #230 daemon prio=5 os_prio=0 cpu=153.53ms elapsed=516.70s tid=0x00007f9cd8038800 nid=0x10b74 waiting on condition  [0x00007f9be31ef000]\r\n   java.lang.Thread.State: TIMED_WAITING (sleeping)\r\n        at java.lang.Thread.sleep(java.base@11.0.18/Native Method)\r\n        at org.apache.accumulo.core.clientImpl.ThriftScanner.pause(ThriftScanner.java:276)\r\n        at org.apache.accumulo.core.clientImpl.ThriftScanner.scan(ThriftScanner.java:330)\r\n        at org.apache.accumulo.core.clientImpl.ScannerIterator.readBatch(ScannerIterator.java:154)\r\n        - locked <0x00000000f6c044b8> (a org.apache.accumulo.core.clientImpl.ThriftScanner$ScanState)\r\n        at org.apache.accumulo.core.clientImpl.ScannerIterator.getNextBatch(ScannerIterator.java:172)\r\n        at org.apache.accumulo.core.clientImpl.ScannerIterator.hasNext(ScannerIterator.java:107)\r\n        at org.apache.accumulo.core.client.IsolatedScanner$RowBufferingIterator.readRow(IsolatedScanner.java:72)\r\n        at org.apache.accumulo.core.client.IsolatedScanner$RowBufferingIterator.<init>(IsolatedScanner.java:150)\r\n        at org.apache.accumulo.core.client.IsolatedScanner.iterator(IsolatedScanner.java:239)\r\n        at org.apache.accumulo.core.client.RowIterator.<init>(RowIterator.java:126)\r\n        at org.apache.accumulo.core.metadata.schema.TabletsMetadata$Builder.lambda$buildNonRoot$10(TabletsMetadata.java:215)\r\n        - locked <0x00000000f6c04620> (a org.apache.accumulo.core.client.IsolatedScanner)\r\n        at org.apache.accumulo.core.metadata.schema.TabletsMetadata$Builder$$Lambda$644/0x00000008404af040.apply(Unknown Source)\r\n        at org.apache.accumulo.core.metadata.schema.TabletsMetadata$Builder.lambda$buildNonRoot$12(TabletsMetadata.java:231)\r\n        at org.apache.accumulo.core.metadata.schema.TabletsMetadata$Builder$$Lambda$645/0x00000008404af440.iterator(Unknown Source)\r\n        at java.lang.Iterable.spliterator(java.base@11.0.18/Iterable.java:101)\r\n        at org.apache.accumulo.core.metadata.schema.TabletsMetadata.stream(TabletsMetadata.java:589)\r\n        at org.apache.accumulo.core.metadata.schema.AmpleImpl.readTablet(AmpleImpl.java:48)\r\n        at org.apache.accumulo.core.metadata.schema.Ample.readTablet(Ample.java:144)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.closeConsistencyCheck(Tablet.java:1055)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.completeClose(Tablet.java:1007)\r\n        - locked <0x00000000f26906d8> (a org.apache.accumulo.tserver.tablet.Tablet)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.close(Tablet.java:896)\r\n        at org.apache.accumulo.tserver.UnloadTabletHandler.run(UnloadTabletHandler.java:93)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.18/ThreadPoolExecutor.java:1128)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.18/ThreadPoolExecutor.java:628)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.lang.Thread.run(java.base@11.0.18/Thread.java:829)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623834761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623843420","html_url":"https://github.com/apache/accumulo/pull/3562#issuecomment-1623843420","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3562","id":1623843420,"node_id":"IC_kwDOACaFSM5gyeJc","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T15:03:57Z","updated_at":"2023-07-06T15:03:57Z","author_association":"CONTRIBUTOR","body":"Great, now can we ensure that the \"clonetable\" command only copies properties and not the entire hierarchy.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623843420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623877049","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1623877049","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1623877049,"node_id":"IC_kwDOACaFSM5gymW5","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T15:25:47Z","updated_at":"2023-07-06T15:25:47Z","author_association":"CONTRIBUTOR","body":"I will have to apologize as the clonetable command is doing the correct thing for us.  I was fooled when doing the upgrade from 1.10.2 to 2.1.1 where the table properties at the system level appeared to be copied into the table configurations.  I had assumed it was the clonetable command that was the culprit but, thanks to Ed, I have proved this was not the case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623877049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623948323","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1623948323","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1623948323,"node_id":"IC_kwDOACaFSM5gy3wj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T16:12:59Z","updated_at":"2023-07-06T16:12:59Z","author_association":"CONTRIBUTOR","body":"@keith-turner @ddanielr  - see #3570 and #3571\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1623948323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624059121","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624059121","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624059121,"node_id":"IC_kwDOACaFSM5gzSzx","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T17:31:16Z","updated_at":"2023-07-06T17:31:16Z","author_association":"CONTRIBUTOR","body":"@dlmarion I tested the changes you made in #3571 with @keith-turner's changes and your IT is currently passing. \r\n\r\nNeed to double check the JShell loop test, but so far so good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624059121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624061892","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624061892","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624061892,"node_id":"IC_kwDOACaFSM5gzTfE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T17:32:31Z","updated_at":"2023-07-06T17:32:31Z","author_association":"CONTRIBUTOR","body":"Can you test his shell loop w/out his changes and only mine?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624061892/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624128591","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624128591","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624128591,"node_id":"IC_kwDOACaFSM5gzjxP","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T18:22:22Z","updated_at":"2023-07-06T18:22:22Z","author_association":"CONTRIBUTOR","body":"Yep, running that check now ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624128591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624150468","html_url":"https://github.com/apache/accumulo/pull/3562#issuecomment-1624150468","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3562","id":1624150468,"node_id":"IC_kwDOACaFSM5gzpHE","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T18:40:46Z","updated_at":"2023-07-06T18:40:46Z","author_association":"CONTRIBUTOR","body":"BLUF - I am not seeing clone copy the configuration hierarchy - it seems to copy the appropiate properties, and upgrade from 1.10 -> 2.1 seems okay too,\r\n\r\nI checked clonetable and what happens during an upgrade.  Basically, set custom system and namespace props, cloned the table and then upgraded from 1.10 to 2.1-SNAPSHOT.  The resulting properties of the clone in 2.1 look as expected.  The clone does not have properties inherited from the configuration stored as table properties.\r\n\r\nIn 2.1, after the upgrade - the shell shows:\r\n```\r\nroot@uno> config -f custom -t ns1.tbl1_clone1\r\n-----------+--------------------------+---------------------------------------\r\nSCOPE      | NAME                     | VALUE\r\n-----------+--------------------------+---------------------------------------\r\nnamespace  | table.custom.ns_prop ... | ns1_v1\r\nsite       | table.custom.sys_prop .. | \r\nsystem     |    @override ........... | sys_v1\r\n-----------+--------------------------+---------------------------------------\r\n```\r\n\r\nAnd this is confirmed by looking at the properties stored in the ZooKeeper node \r\n```\r\n> accumulo zoo-info-viewer -t ns1.tbl1_clone1 --print-props\r\n\r\nTables: \r\nName: ns1.tbl1_clone1, Data Version:0, Data Timestamp: 2023-07-06T18:25:17.356529Z:\r\n  table.constraint.1=org.apache.accumulo.core.constraints.DefaultKeySizeConstraint\r\n  table.iterator.majc.vers=20,org.apache.accumulo.core.iterators.user.VersioningIterator\r\n  table.iterator.majc.vers.opt.maxVersions=1\r\n  table.iterator.minc.vers=20,org.apache.accumulo.core.iterators.user.VersioningIterator\r\n  table.iterator.minc.vers.opt.maxVersions=1\r\n  table.iterator.scan.vers=20,org.apache.accumulo.core.iterators.user.VersioningIterator\r\n  table.iterator.scan.vers.opt.maxVersions=1\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624150468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624181164","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624181164","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624181164,"node_id":"IC_kwDOACaFSM5gzwms","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T19:07:55Z","updated_at":"2023-07-06T19:07:55Z","author_association":"CONTRIBUTOR","body":"@dlmarion ran the loop test with just the changes in #3571 and it ran into the same failure state at split `00015000`\r\n```\r\nThu Jul 06 18:11:17 UTC 2023 added split 00015000\r\nThu Jul 06 18:11:02 UTC 2023 500000\r\n2023-07-06T18:13:19,252 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 5 failures.\r\n2023-07-06T18:13:24,919 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 50 failures.\r\n2023-07-06T18:13:31,151 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 100 failures.\r\n2023-07-06T18:13:37,309 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 150 failures.\r\n2023-07-06T18:13:43,256 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 200 failures.\r\n2023-07-06T18:13:49,249 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 250 failures.\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624181164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624182390","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1624182390","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1624182390,"node_id":"IC_kwDOACaFSM5gzw52","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T19:09:02Z","updated_at":"2023-07-06T19:09:02Z","author_association":"CONTRIBUTOR","body":"I ran a test, upgrading from 1.10 to 2.1 and I don't see the issue with the upgrade process either - details in comment on PR #3562 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624182390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624182650","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624182650","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624182650,"node_id":"IC_kwDOACaFSM5gzw96","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T19:09:16Z","updated_at":"2023-07-06T19:09:16Z","author_association":"CONTRIBUTOR","body":"> @dlmarion I tested the changes you made in #3571 with @keith-turner's changes and your IT is currently passing.\r\n> \r\n> Need to double check the JShell loop test, but so far so good.\r\n\r\nLoop test still passed with both sets of changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624182650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624274269","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624274269","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624274269,"node_id":"IC_kwDOACaFSM5g0HVd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T20:32:40Z","updated_at":"2023-07-06T20:32:40Z","author_association":"CONTRIBUTOR","body":"> @dlmarion ran the loop test with just the changes in #3571 and it ran into the same failure state at split `00015000`\r\n> \r\n> ```\r\n> Thu Jul 06 18:11:17 UTC 2023 added split 00015000\r\n> Thu Jul 06 18:11:02 UTC 2023 500000\r\n> 2023-07-06T18:13:19,252 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 5 failures.\r\n> 2023-07-06T18:13:24,919 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 50 failures.\r\n> 2023-07-06T18:13:31,151 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 100 failures.\r\n> 2023-07-06T18:13:37,309 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 150 failures.\r\n> 2023-07-06T18:13:43,256 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 200 failures.\r\n> 2023-07-06T18:13:49,249 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 250 failures.\r\n> ```\r\n\r\nBut you didn't run into the messages?\r\n\r\n```\r\nWaiting to completeClose...\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624274269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624283242","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1624283242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1624283242,"node_id":"IC_kwDOACaFSM5g0Jhq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T20:40:44Z","updated_at":"2023-07-06T20:40:44Z","author_association":"CONTRIBUTOR","body":"You are using BulkImport v1 or v2 ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624283242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624310985","html_url":"https://github.com/apache/accumulo/pull/3571#issuecomment-1624310985","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3571","id":1624310985,"node_id":"IC_kwDOACaFSM5g0QTJ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T21:07:37Z","updated_at":"2023-07-06T21:07:37Z","author_association":"CONTRIBUTOR","body":" > How long does the new IT take to run?\r\n \r\n Just a few minutes","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624310985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624322099","html_url":"https://github.com/apache/accumulo/pull/3571#issuecomment-1624322099","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3571","id":1624322099,"node_id":"IC_kwDOACaFSM5g0TAz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T21:17:47Z","updated_at":"2023-07-06T21:17:47Z","author_association":"CONTRIBUTOR","body":"> do you know if the TabletStateChangeIterator will return everything when the manager is shutting down tservers? Wondering if we should be expect the TGW stats to cover all tablets in this case\r\n\r\nThe TabletStateChangeIterator will return all tablets if the ManagerState is not normal [ref](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/manager/state/TabletStateChangeIterator.java#L170). In this test, the Manager is likely normal as we are not shutting everything down, I'm just shutting down the tablet servers with everything else up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624322099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624343469","html_url":"https://github.com/apache/accumulo/pull/3572#issuecomment-1624343469","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3572","id":1624343469,"node_id":"IC_kwDOACaFSM5g0YOt","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T21:40:37Z","updated_at":"2023-07-06T21:40:37Z","author_association":"CONTRIBUTOR","body":"Finding code like this makes me wonder if we should try and some general profiling/benchmarking for hot spots. Not sure if there's an easy way to automate it but there might be some easy things to fix (like this) to boost performance.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624343469/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624469071","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1624469071","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1624469071,"node_id":"IC_kwDOACaFSM5g025P","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T00:27:00Z","updated_at":"2023-07-07T00:27:00Z","author_association":"CONTRIBUTOR","body":"> > @dlmarion ran the loop test with just the changes in #3571 and it ran into the same failure state at split `00015000`\r\n> > ```\r\n> > Thu Jul 06 18:11:17 UTC 2023 added split 00015000\r\n> > Thu Jul 06 18:11:02 UTC 2023 500000\r\n> > 2023-07-06T18:13:19,252 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 5 failures.\r\n> > 2023-07-06T18:13:24,919 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 50 failures.\r\n> > 2023-07-06T18:13:31,151 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 100 failures.\r\n> > 2023-07-06T18:13:37,309 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 150 failures.\r\n> > 2023-07-06T18:13:43,256 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 200 failures.\r\n> > 2023-07-06T18:13:49,249 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00016000 on table foo. Seen 250 failures.\r\n> > ```\r\n> \r\n> But you didn't run into the messages?\r\n> \r\n> ```\r\n> Waiting to completeClose...\r\n> ```\r\nSorry, I only posted the Jshell loop output. \r\nThe `Waiting to completeClose`messages are still present. They show up in the Tserver logs.\r\n\r\nJshell output:\r\n```\r\nFri Jul 07 00:19:33 UTC 2023 added split 00017000\r\nFri Jul 07 00:19:15 UTC 2023 500000\r\nFri Jul 07 00:19:15 UTC 2023 500000\r\n2023-07-07T00:21:34,974 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00018000 on table foo. Seen 5 failures.\r\n2023-07-07T00:21:40,738 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00018000 on table foo. Seen 50 failures.\r\n2023-07-07T00:21:47,015 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00018000 on table foo. Seen 100 failures.\r\n```\r\n\r\nTserver logs:\r\n```\r\n2023-07-07T00:22:35,134 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00017000. 0 writes 1 scans\r\n2023-07-07T00:22:35,184 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00017000. 0 writes 1 scans\r\n2023-07-07T00:22:35,234 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00017000. 0 writes 1 scans\r\n2023-07-07T00:22:35,285 [tablet.Tablet] DEBUG: Waiting to completeClose for 1<;00017000. 0 writes 1 scans\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1624469071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625337188","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1625337188","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1625337188,"node_id":"IC_kwDOACaFSM5g4K1k","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T12:22:54Z","updated_at":"2023-07-07T12:24:19Z","author_association":"CONTRIBUTOR","body":"So, I think based on the comments here, this change and the change in #3571 are solving two different problems. It's unclear to me whether or not the loop test has passed with the head of 2.1 without my changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625337188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625601198","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1625601198","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1625601198,"node_id":"IC_kwDOACaFSM5g5LSu","user":{"login":"keith-ratcliffe","id":1606834,"node_id":"MDQ6VXNlcjE2MDY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1606834?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-ratcliffe","html_url":"https://github.com/keith-ratcliffe","followers_url":"https://api.github.com/users/keith-ratcliffe/followers","following_url":"https://api.github.com/users/keith-ratcliffe/following{/other_user}","gists_url":"https://api.github.com/users/keith-ratcliffe/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-ratcliffe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-ratcliffe/subscriptions","organizations_url":"https://api.github.com/users/keith-ratcliffe/orgs","repos_url":"https://api.github.com/users/keith-ratcliffe/repos","events_url":"https://api.github.com/users/keith-ratcliffe/events{/privacy}","received_events_url":"https://api.github.com/users/keith-ratcliffe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T15:41:57Z","updated_at":"2023-07-07T15:41:57Z","author_association":"CONTRIBUTOR","body":"> You are using BulkImport v1 or v2 ?\r\n\r\nv1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625601198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625623767","html_url":"https://github.com/apache/accumulo/pull/3571#issuecomment-1625623767","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3571","id":1625623767,"node_id":"IC_kwDOACaFSM5g5QzX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T16:00:11Z","updated_at":"2023-07-07T16:00:11Z","author_association":"CONTRIBUTOR","body":"> The TabletStateChangeIterator will return all tablets if the ManagerState is not normal [ref](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/manager/state/TabletStateChangeIterator.java#L170). In this test, the Manager is likely normal as we are not shutting everything down, I'm just shutting down the tablet servers with everything else up.\r\n\r\nWhen the user uses this functionality, will the manager state be adjusted?  Wondering if when the user does this if the TabletStateChangeIterator will switch to a mode of returning all tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625623767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625759501","html_url":"https://github.com/apache/accumulo/pull/3571#issuecomment-1625759501","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3571","id":1625759501,"node_id":"IC_kwDOACaFSM5g5x8N","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T17:56:18Z","updated_at":"2023-07-07T17:56:18Z","author_association":"CONTRIBUTOR","body":"Wondering if it make sense for TGW to have an `unhostAndShutdown()` and `isShutdown()` method, kinda like an Executor.  Once a TGW is asked to unhost  and shutdown it gets everything unhosted and then sets isShutdown to true and stops operating.  When a TGW has a dependent it will not start trying to shutdown until its dependent is shutdown.  So we could call unhostAndShutdown() on the root TGW (it would call unhostAndShutdown() on its dependent and wait for that before it started shutting down) and then wait for that to complete. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625759501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625848570","html_url":"https://github.com/apache/accumulo/pull/3571#issuecomment-1625848570","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3571","id":1625848570,"node_id":"IC_kwDOACaFSM5g6Hr6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T18:33:58Z","updated_at":"2023-07-07T18:33:58Z","author_association":"CONTRIBUTOR","body":"> Wondering if it make sense for TGW to have an `unhostAndShutdown()` and `isShutdown()` method, kinda like an Executor. Once a TGW is asked to unhost and shutdown it gets everything unhosted and then sets isShutdown to true and stops operating. When a TGW has a dependent it will not start trying to shutdown until its dependent is shutdown. So we could call unhostAndShutdown() on the root TGW (it would call unhostAndShutdown() on its dependent and wait for that before it started shutting down) and then wait for that to complete.\r\n\r\nI think that makes sense in the case where the Manager is shutting down, as the TGW's run in the Manager. But, in that case, all tablet information is going to get returned as the ManagerState would not be NORMAL. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625848570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625993107","html_url":"https://github.com/apache/accumulo/issues/3525#issuecomment-1625993107","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3525","id":1625993107,"node_id":"IC_kwDOACaFSM5g6q-T","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T19:52:38Z","updated_at":"2023-07-07T19:52:38Z","author_association":"MEMBER","body":"Do you think this consolidation could happen now or once accumulo moves to only having external compactions?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625993107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625999714","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1625999714","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1625999714,"node_id":"IC_kwDOACaFSM5g6sli","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T19:57:46Z","updated_at":"2023-07-07T19:57:46Z","author_association":"CONTRIBUTOR","body":"Opened #3574 about making the tablet log an info when the consistency check goes from bad to good.  Next week I can look at the bulk import code and look for race conditions w.r.t. to the consistency check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1625999714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1626001694","html_url":"https://github.com/apache/accumulo/issues/3525#issuecomment-1626001694","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3525","id":1626001694,"node_id":"IC_kwDOACaFSM5g6tEe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T19:59:57Z","updated_at":"2023-07-07T19:59:57Z","author_association":"CONTRIBUTOR","body":"> Do you think this consolidation could happen now or once accumulo moves to only having external compactions?\r\n\r\nI think that work could start after I make one more big PR for compactions that I am hoping to make this weekend.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1626001694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1626351497","html_url":"https://github.com/apache/accumulo/pull/3551#issuecomment-1626351497","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3551","id":1626351497,"node_id":"IC_kwDOACaFSM5g8CeJ","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-07T23:14:19Z","updated_at":"2023-07-07T23:14:19Z","author_association":"CONTRIBUTOR","body":"> In general - why are the metric changes being testing in BulkNewIT? Would it be better if the test was a stand-alone test of the metrics? If a package does not exist, in may be desirable to have a metrics specific sub-package for metric IT tests so that they are easier to find?\r\n\r\nI was testing this in BulkNewIT as I knew that the compaction operations would trigger and metrics would be generated. \r\nThis was done as a convenience to get these metrics generated quickly.\r\n\r\nHowever, I need to add more deliberate tests for these metrics to ensure the gauges are being set to correct values. \r\nRight now it's just collecting metrics with the specified prefix and putting them into the log. \r\n\r\nI'm not sure about how to best organize the metric tests so I'd be happy to discuss the best options there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1626351497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627464756","html_url":"https://github.com/apache/accumulo/pull/3480#issuecomment-1627464756","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3480","id":1627464756,"node_id":"IC_kwDOACaFSM5hASQ0","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-08T18:49:28Z","updated_at":"2023-07-08T18:49:28Z","author_association":"CONTRIBUTOR","body":"I've started working on ITs to show that the metadata can be read properly and fencing works. There's a few tests here so far showing contiguous and disjointed ranges work: https://github.com/cshannon/accumulo/blob/accumulo-1327-itest/test/src/main/java/org/apache/accumulo/test/functional/FileMetadataIT.java\r\n\r\nI'm going to continue working on the tests, I plan to add tests to show compaction will work and also splits, etc. The test branch is based off of this current PR/branch so will eventually be based off of no-chop-merge branch when this PR is merged in.\r\n\r\nAfter some more tests which should be done soon, I plan to start prototyping dropping the chop compactions and updating merge to use ranges. The majority of this work appears to be in TabletGroupWatcher in the [mergeMetadataRecords](https://github.com/apache/accumulo/blob/ffe0018b513d582840e0cde04a0772f59deaea72/server/manager/src/main/java/org/apache/accumulo/manager/TabletGroupWatcher.java#L715) method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627464756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627530539","html_url":"https://github.com/apache/accumulo/pull/3575#issuecomment-1627530539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3575","id":1627530539,"node_id":"IC_kwDOACaFSM5hAiUr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-08T22:18:13Z","updated_at":"2023-07-08T22:18:13Z","author_association":"CONTRIBUTOR","body":"For the test case it may be worthwhile to have a few json strinsg that are not generated by gson so we can detect if the way gson generates json ever changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627530539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627530778","html_url":"https://github.com/apache/accumulo/pull/3575#issuecomment-1627530778","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3575","id":1627530778,"node_id":"IC_kwDOACaFSM5hAiYa","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-08T22:19:29Z","updated_at":"2023-07-08T22:19:29Z","author_association":"CONTRIBUTOR","body":"For the test it would also be good to test comparison of json containing supersets and subsets of files to each other.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627530778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627803563","html_url":"https://github.com/apache/accumulo/pull/3480#issuecomment-1627803563","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3480","id":1627803563,"node_id":"IC_kwDOACaFSM5hBk-r","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-09T19:25:33Z","updated_at":"2023-07-09T19:25:33Z","author_association":"CONTRIBUTOR","body":"I added compaction to the tests and compaction seems to work correctly with the simple tests, here is some output showing before and after: https://gist.github.com/cshannon/67a72d3075c07992eb64a36e64ecbcda\r\n\r\nI started testing out splits and split doesn't seem to be correct. When I wrote a test that had fenced rfiles in metadata and then I added splits, the output seems to be not right for the resulting new metadata. So I plan to look into the split code usage for the ranges later this week and also I will test out GC as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1627803563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1628876516","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1628876516","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1628876516,"node_id":"IC_kwDOACaFSM5hFq7k","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T12:39:29Z","updated_at":"2023-07-10T12:39:29Z","author_association":"CONTRIBUTOR","body":"I wonder if we should make an additional change here. Based on [this](https://github.com/apache/accumulo/issues/3512#issuecomment-1613693499) comment, I think we just need to handle the case where `SingleScanSession.cleanup` calls `Scanner.close`. I think the issue is that `Scanner.close`  cannot acquire the semaphore [here](https://github.com/apache/accumulo/blob/main/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Scanner.java#L176) because another thread is currently in the `read` method. There is an interrupt flag that is set, but I'm not sure how often that is checked. The change we could make is to change the semaphore to a ReentrantLock. In the close method, when it cannot acquire the lock it could call `ReentrantLock.getOwner()` and call interrupt on it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1628876516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629097955","html_url":"https://github.com/apache/accumulo/issues/3519#issuecomment-1629097955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3519","id":1629097955,"node_id":"IC_kwDOACaFSM5hGg_j","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T14:32:03Z","updated_at":"2023-07-10T14:32:03Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - this can be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629097955/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629107014","html_url":"https://github.com/apache/accumulo/issues/3304#issuecomment-1629107014","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3304","id":1629107014,"node_id":"IC_kwDOACaFSM5hGjNG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T14:37:21Z","updated_at":"2023-07-10T14:37:21Z","author_association":"CONTRIBUTOR","body":"@keith-turner - can this be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629107014/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629167588","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1629167588","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1629167588,"node_id":"IC_kwDOACaFSM5hGx_k","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T15:11:58Z","updated_at":"2023-07-10T15:11:58Z","author_association":"CONTRIBUTOR","body":"> I wonder if we should make an additional change here.\r\n\r\n@dlmarion the additional change you described would be good to try.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629167588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629210139","html_url":"https://github.com/apache/accumulo/issues/3547#issuecomment-1629210139","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3547","id":1629210139,"node_id":"IC_kwDOACaFSM5hG8Yb","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T15:36:15Z","updated_at":"2023-07-10T15:37:03Z","author_association":"CONTRIBUTOR","body":"Another way to accomplish the goal of making things form a tree without adding the service name to the compactor group name would be a runtime check to ensure there is a 1:1 relationship between services and queues. If this behavior will be enforced in 4.0, warnings could be added to earlier accumulo versions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629210139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629217192","html_url":"https://github.com/apache/accumulo/pull/3578#issuecomment-1629217192","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3578","id":1629217192,"node_id":"IC_kwDOACaFSM5hG-Go","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T15:40:31Z","updated_at":"2023-07-10T15:40:31Z","author_association":"CONTRIBUTOR","body":"This commit also implements compaction cancellation and fixes a few misc compaction bugs in the elasticity branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629217192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629269913","html_url":"https://github.com/apache/accumulo/issues/3463#issuecomment-1629269913","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3463","id":1629269913,"node_id":"IC_kwDOACaFSM5hHK-Z","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T16:13:03Z","updated_at":"2023-07-10T16:13:03Z","author_association":"CONTRIBUTOR","body":"Root and metadata table now work with external compactions.  Still need to determine what the default compaction queues should be in default config, this can be done in #3546 so no need to keep this issue open for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629269913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629467078","html_url":"https://github.com/apache/accumulo/pull/3569#issuecomment-1629467078","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3569","id":1629467078,"node_id":"IC_kwDOACaFSM5hH7HG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T18:14:54Z","updated_at":"2023-07-10T18:14:54Z","author_association":"CONTRIBUTOR","body":"I remembered I wanted to add unit test.  Did that in #3581","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629467078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629496581","html_url":"https://github.com/apache/accumulo/pull/3578#issuecomment-1629496581","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3578","id":1629496581,"node_id":"IC_kwDOACaFSM5hICUF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T18:37:30Z","updated_at":"2023-07-10T18:37:30Z","author_association":"CONTRIBUTOR","body":"All tests in CompactionIT are passing with these changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629496581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629590707","html_url":"https://github.com/apache/accumulo/pull/3583#issuecomment-1629590707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3583","id":1629590707,"node_id":"IC_kwDOACaFSM5hIZSz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T19:24:38Z","updated_at":"2023-07-10T19:24:38Z","author_association":"CONTRIBUTOR","body":"> Were you able to test this in any way? I suspect some of the volume related ITs may exercise the dir creation aspect of this, but not sure. Depends on if we have a multi volume IT that compacts data.\r\n\r\nNo, I basically copied over the code from Tablet.java. I don't see any ITs that test this condition. It also looks like CompactionCoordinatorTest got nuked. Looking at the comment in that file, we might need a ticket to re-evaluate that","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629590707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629616298","html_url":"https://github.com/apache/accumulo/issues/3546#issuecomment-1629616298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3546","id":1629616298,"node_id":"IC_kwDOACaFSM5hIfiq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T19:40:18Z","updated_at":"2023-07-12T12:05:59Z","author_association":"CONTRIBUTOR","body":"IMO we should keep the default compactor group configuration simple. `system` for compactions for the root and metadata tables, and `default` for everything else. `default` is already used in the default configuration for scan servers and tablet servers in #3496 and it's follow-on PR (#3591), so it's consistent.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629616298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629631152","html_url":"https://github.com/apache/accumulo/issues/3547#issuecomment-1629631152","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3547","id":1629631152,"node_id":"IC_kwDOACaFSM5hIjKw","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T19:51:17Z","updated_at":"2023-07-12T12:02:41Z","author_association":"CONTRIBUTOR","body":"In the [follow-on](https://github.com/apache/accumulo/pull/3591) to #3496 I modified the compaction service definitions replacing the word `queue` with `group`.  For MAC, it starts a compactor for each defined group in the configuration. For a deployment, the user would need to configure the groups in cluster.yaml correctly. We could probably detect this and warn on startup.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1629631152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1630171934","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1630171934","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1630171934,"node_id":"IC_kwDOACaFSM5hKnMe","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T05:39:52Z","updated_at":"2023-07-11T05:39:52Z","author_association":"MEMBER","body":"With #3571, it looks like this can be closed. Is there something keeping this issue open?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1630171934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1630180914","html_url":"https://github.com/apache/accumulo/pull/3561#issuecomment-1630180914","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3561","id":1630180914,"node_id":"IC_kwDOACaFSM5hKpYy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T05:49:30Z","updated_at":"2023-07-11T05:49:30Z","author_association":"MEMBER","body":"@DomGarguilo can you show some updated screenshots for the recent changes, when you get a chance?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1630180914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1630901090","html_url":"https://github.com/apache/accumulo/pull/3561#issuecomment-1630901090","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3561","id":1630901090,"node_id":"IC_kwDOACaFSM5hNZNi","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T14:06:59Z","updated_at":"2023-07-11T14:46:25Z","author_association":"MEMBER","body":"Here are some updated screenshots. Let me know if there are any other specific cases that you might want to see.\r\n\r\nsetting the manager goal state to `SAFE_MODE`:\r\n![Screenshot from 2023-07-11 10-03-58](https://github.com/apache/accumulo/assets/47725857/242881fa-d6a4-4f89-bdd0-59a345d9cf3b)\r\n\r\nsetting the manager goal state to `CLEAN_STOP`:\r\n![Screenshot from 2023-07-11 10-04-39](https://github.com/apache/accumulo/assets/47725857/368bfade-61e8-4aa3-ab98-b0d3a92151c5)\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1630901090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631083843","html_url":"https://github.com/apache/accumulo/issues/3585#issuecomment-1631083843","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3585","id":1631083843,"node_id":"IC_kwDOACaFSM5hOF1D","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T15:56:30Z","updated_at":"2023-07-11T15:56:30Z","author_association":"CONTRIBUTOR","body":"Looks like this was introduced in #2101 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631083843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631113946","html_url":"https://github.com/apache/accumulo/pull/3586#issuecomment-1631113946","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3586","id":1631113946,"node_id":"IC_kwDOACaFSM5hONLa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T16:15:43Z","updated_at":"2023-07-11T16:15:43Z","author_association":"CONTRIBUTOR","body":"HostRegexTableLoadBalancer caches TableConfigurations for an hour, but it will never get any updated properties.\r\n\r\nhttps://github.com/apache/accumulo/blob/2.1/core/src/main/java/org/apache/accumulo/core/spi/balancer/HostRegexTableLoadBalancer.java#L324","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631113946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631154188","html_url":"https://github.com/apache/accumulo/pull/3586#issuecomment-1631154188","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3586","id":1631154188,"node_id":"IC_kwDOACaFSM5hOXAM","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T16:44:35Z","updated_at":"2023-07-11T16:44:35Z","author_association":"CONTRIBUTOR","body":"I am looking at this.  Trying to determine what the behavior of ServerContext.getTableConfiguration(TableId) is, does it return a snapshot that does not change? Can't remember what the new behavior is after the 2.1 config changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631154188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631235087","html_url":"https://github.com/apache/accumulo/pull/3586#issuecomment-1631235087","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3586","id":1631235087,"node_id":"IC_kwDOACaFSM5hOqwP","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T17:42:06Z","updated_at":"2023-07-11T17:42:06Z","author_association":"CONTRIBUTOR","body":"Based on discussions in slack around this, opened #3588","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631235087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631241842","html_url":"https://github.com/apache/accumulo/pull/3575#issuecomment-1631241842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3575","id":1631241842,"node_id":"IC_kwDOACaFSM5hOsZy","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T17:47:43Z","updated_at":"2023-07-11T17:47:43Z","author_association":"MEMBER","body":"@keith-turner, I tried to cover the test cases that you mentioned above.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631241842/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631382109","html_url":"https://github.com/apache/accumulo/pull/3588#issuecomment-1631382109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3588","id":1631382109,"node_id":"IC_kwDOACaFSM5hPOpd","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T19:18:05Z","updated_at":"2023-07-11T19:18:05Z","author_association":"CONTRIBUTOR","body":"ServerConfigurationFactory maintains a cache of the configuration hierarchy.  It would be nice if we reduced caching / re-used existing caches when possible.\r\n\r\nThere are a couple of possibilities:\r\n  - Use ServerConfigurationFactory as is?\r\n  - Use caffeine in ServerConfigurationFactory and use that instead of caching here?\r\n  - Use the caching here and eliminate ServerConfigurationFactory?\r\n\r\nWhen the prop store was modified, the caching n ServerConfigurationFactory was maintained to preserve functionality.  Not necessarily because it was a optimum configuration, but served to isolate property storage from additional changes at that time.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631382109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631472537","html_url":"https://github.com/apache/accumulo/pull/3588#issuecomment-1631472537","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3588","id":1631472537,"node_id":"IC_kwDOACaFSM5hPkuZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T20:33:47Z","updated_at":"2023-07-11T20:34:19Z","author_association":"CONTRIBUTOR","body":">  It would be nice if we reduced caching / re-used existing caches when possible.\r\n\r\nThis caching is driven by avoiding recomputation of custom props in the SPI impl.  Specifically when a plugin is given a [ServiceEnvironment](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/spi/common/ServiceEnvironment.java) the plugin could execute code like the following and if there was no caching then each call to getTableCustom() would recompute the tables set of custom props.\r\n\r\n```java\r\n// some function in a plugin\r\nvoid MyObj createMyObj(ServiceEnvironment env, Table tid){\r\n    var p1 =  env.getConfiguration(tid).getTableCustom().get(\"prop1\");\r\n    var p2 =  env.getConfiguration(tid).getTableCustom().get(\"prop2\");\r\n    var p3 =  env.getConfiguration(tid).getTableCustom().get(\"prop3\");\r\n    var p4 =  env.getConfiguration(tid).getTableCustom().get(\"prop4\");\r\n    return new MyObj(p1,p2,p3,p4);\r\n}\r\n```\r\n\r\n> Use ServerConfigurationFactory as is?\r\n\r\nThe SPI return a custom interface, so will need some sort of wrapper unless we make AccumuloConfiguration implement the SPI [config interface](https://github.com/apache/accumulo/blob/d4846d407e5b28482394e2c0baa16932ae35e086/core/src/main/java/org/apache/accumulo/core/spi/common/ServiceEnvironment.java#L40) .\r\n\r\n> Use caffeine in ServerConfigurationFactory and use that instead of caching here?\r\n\r\nDoes ServerConfigurationFactory continue to cache deleted tables?  I took a quick look and it appears it may, but not completely sure. If it does then that probably should addressed, even if its independent from this.  \r\n\r\nIf we went the route of making AccumuloConfiguration implement the SPI config interface, then we could just return whatever ServerConfigurationFactory returns w/o wrapping it, so this may be a viable way forward.\r\n\r\n> Use the caching here and eliminate ServerConfigurationFactory?\r\n\r\nThis is SPI impl code meant for plugins, a lot of internal code does not use this SPI and accesses config directly using internal non-SPI/API method calls.  I\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631472537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631561178","html_url":"https://github.com/apache/accumulo/pull/3589#issuecomment-1631561178","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3589","id":1631561178,"node_id":"IC_kwDOACaFSM5hP6Xa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T21:55:21Z","updated_at":"2023-07-11T21:55:21Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #3591. I cleaned up the commit history in that branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1631561178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1632917672","html_url":"https://github.com/apache/accumulo/pull/3574#issuecomment-1632917672","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3574","id":1632917672,"node_id":"IC_kwDOACaFSM5hVFio","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T17:17:47Z","updated_at":"2023-07-12T17:17:47Z","author_association":"CONTRIBUTOR","body":"The linked issue should be #3573","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1632917672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1632925701","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1632925701","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1632925701,"node_id":"IC_kwDOACaFSM5hVHgF","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T17:24:00Z","updated_at":"2023-07-12T17:24:00Z","author_association":"CONTRIBUTOR","body":"The tserver code for adding bulk imports looks good, the counters for the consistency check cover the metadata table update and in the in memory update as seen [here](https://github.com/apache/accumulo/blob/0733d3ae86cae082faab9b40b46bb55149e0852f/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/DatafileManager.java#L246-L287).  Some of the false positives with this check in #3392 were caused by these counters not covering the metadata table and in memory updates, so double checked that again.  So not seeing any race conditions so far.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1632925701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633050452","html_url":"https://github.com/apache/accumulo/pull/3600#issuecomment-1633050452","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3600","id":1633050452,"node_id":"IC_kwDOACaFSM5hVl9U","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T18:56:44Z","updated_at":"2023-07-12T18:56:44Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/accumulo/blob/0733d3ae86cae082faab9b40b46bb55149e0852f/core/src/main/java/org/apache/accumulo/core/metrics/MetricsProducer.java#L609-L610\r\n\r\n\r\nThe `_` separator is used here because most of our metric testing is done using Graphite which has a hierarchical metric structure. \r\nBy adding metrics names using a `_` separator, we can define a multi-word line as a single metric in the Graphite hierarchy. \r\n```\r\naccumulo.fate\r\naccumulo.fate.ops\r\naccumulo.fate.ops.in_progress\r\naccumulo.fate.ops.in_progress_by_type\r\n```\r\n However, micrometer uses a flat metrics structure and requires dot notation for all metric names due to conversion on registry types. [Metric Naming](https://micrometer.io/docs/concepts#_naming_meters)\r\n \r\n Because of this, the metric name ends up being multiple items in the Graphite hierarchy. \r\n```\r\naccumulo.fate\r\naccumulo.fate.ops\r\naccumulo.fate.ops.in\r\naccumulo.fate.ops.in.progress\r\naccumulo.fate.ops.in.progress.by\r\naccumulo.fate.ops.in.progress.by.type\r\n```\r\nVs the metric creation in a flat metrics systems like Prometheus. \r\n```\r\naccumulo_fate_ops_in_progress\r\naccumulo_fate_ops_in_progress_by_type\r\n```\r\n\r\nIf we want to be fully compliant with micrometer's conversion ability, then we have to only use dot notation in our metric names. \r\n\r\nWe could add MeterFilters to our statsd sink to rewrite any metrics we want to have as a single metric.\r\nThis seems like the \"quick and easy\" solution, but not really the \"simple\" solution long term as any other metric sink would need to understand and implement these MeterFilters if they wanted their metrics to look the same.\r\n   \r\nIt looks like micrometer supports some interesting conversions with labels for hierarchical systems (See micrometer's [HierarchicalNameMapper](https://github.com/micrometer-metrics/micrometer/blob/0dc111d1f6d3aa288dda24ac0912cbb483f1da1e/micrometer-core/src/main/java/io/micrometer/core/instrument/util/HierarchicalNameMapper.java#L35)) which fully rewrites the metric name. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633050452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633110904","html_url":"https://github.com/apache/accumulo/pull/3600#issuecomment-1633110904","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3600","id":1633110904,"node_id":"IC_kwDOACaFSM5hV0t4","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T19:44:16Z","updated_at":"2023-07-12T19:44:16Z","author_association":"CONTRIBUTOR","body":"What are the implication of this change in a bug fix release?  What would the release notes for this change look like?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633110904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633148917","html_url":"https://github.com/apache/accumulo/pull/3575#issuecomment-1633148917","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3575","id":1633148917,"node_id":"IC_kwDOACaFSM5hV9_1","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T20:16:19Z","updated_at":"2023-07-12T20:16:19Z","author_association":"CONTRIBUTOR","body":"> @keith-turner, I tried to cover the test cases that you mentioned above.\r\n\r\nThose look really good.  I made a few other comments.  I think this is good to go after that.  I need open an issue for the thing @dlmarion brought up or it will be forgotten.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633148917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633320867","html_url":"https://github.com/apache/accumulo/pull/3603#issuecomment-1633320867","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3603","id":1633320867,"node_id":"IC_kwDOACaFSM5hWn-j","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T23:12:18Z","updated_at":"2023-07-12T23:12:18Z","author_association":"CONTRIBUTOR","body":"I created this as a draft PR because the implementation is not complete.  It compiles but has never been tested.  Will finish the implementation based on feedback.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633320867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633331457","html_url":"https://github.com/apache/accumulo/pull/3600#issuecomment-1633331457","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3600","id":1633331457,"node_id":"IC_kwDOACaFSM5hWqkB","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T23:29:14Z","updated_at":"2023-07-12T23:29:14Z","author_association":"CONTRIBUTOR","body":"Keith asked: `What are the implication of this change in a bug fix release`\r\n\r\nI feel that the \"bug\" is that incorrect naming / naming hierarchy could complicate or prevent metrics from being used correctly down-stream.  Getting the metric correct in a 2.x release should be a priority because it is a LTM release and we expect that it will be used for quite a while. \r\n\r\nAnd the approach may hinge on if metric names are considered part of the public API.  Providing a mapping of prev -> new name in the release notes may be sufficient if the metrics are not a \"hard\" API requirement.\r\n\r\nIf there is a more strict interpretation of metrics names must consistent across bug-fix versions, the we may want to consider 2.1.2 is released as 2.2  But not sure what that implies as far as LTM designations go. We'd probably not what to maintain 2.1 and 2.2, 3.x.,,\r\n\r\nI can see both viewpoints. Having metric names change between versions is irritating and could cause issues as monitors / alarms break or change with the version, and could make trending across versions problematic.  On the other hand, having a broken metric so that I cannot monitor my system as intended  and I can't get it fixed until the next major release does not seem ideal either,\r\n ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633331457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633345097","html_url":"https://github.com/apache/accumulo/pull/3600#issuecomment-1633345097","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3600","id":1633345097,"node_id":"IC_kwDOACaFSM5hWt5J","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T23:52:12Z","updated_at":"2023-07-13T00:02:45Z","author_association":"CONTRIBUTOR","body":"> I can see both viewpoints. Having metric names change between versions is irritating and could cause issues as monitors / alarms break or change with the version, and could make trending across versions problematic. On the other hand, having a broken metric so that I cannot monitor my system as intended and I can't get it fixed until the next major release does not seem ideal either,\r\n\r\nI don't have an opinion about making this change in 2.1 because I don't know enough.  I am curious though, want to try to understand the implications.  Reading the above point and earlier points it seems like the current metric name is buggy.  Is a potential problem with fixing it in 2.1 that someone may have adapted to the buggy name and still have been able to use it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633345097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633355858","html_url":"https://github.com/apache/accumulo/pull/3578#issuecomment-1633355858","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3578","id":1633355858,"node_id":"IC_kwDOACaFSM5hWwhS","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-13T00:09:38Z","updated_at":"2023-07-13T00:09:57Z","author_association":"CONTRIBUTOR","body":"Merged this because I have another PR that builds on this to remove code from the tserver and I need to get that change in so I can start making changes to improve the tablet server code.  If anyone was looking at this feel free to comment still, I can address any comments in follow on commits or issues.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633355858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633375279","html_url":"https://github.com/apache/accumulo/issues/3605#issuecomment-1633375279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3605","id":1633375279,"node_id":"IC_kwDOACaFSM5hW1Qv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-13T00:40:35Z","updated_at":"2023-07-13T00:40:35Z","author_association":"CONTRIBUTOR","body":"There is a method in TabletGroupWatcher named sendSplitRequest() that would call the split RPC on tsever.  This method is used by the merge code.   #3604 made this method throw UnsupportedOperationException, which motivated opening this follow on issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1633375279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]