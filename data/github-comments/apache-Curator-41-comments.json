[{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772295","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772295","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772295,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIyOTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T22:02:50Z","updated_at":"2025-01-21T13:42:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>In your summary of events how do you know that a given ZNode belongs to a particular session? I don't see anything in your sample code that examines the ephemeralOwner. Also, in the tx log I don't see session 0x1000ae5465c0007 shutting down until the end (it appears that all ZK connections are closed).</p>\n\n<p>I don't see how an expired session can appear to create a ZNode. Every time a connection is repaired Curator's LeaderLatch calls <tt>reset()</tt> which deletes any known leader node and recreates a new one. Even if there was a create in-flight stuck in a retry loop the successful create callback calls <tt>setNode(event.getName());</tt> which will cause the previously set node to get deleted. Whatever new node is being set is considered valid by ZooKeeper.</p>\n\n<p>So, I suspect something else is going on here. I have a wild guess that it has something to do with retries and session loss but I need to think a lot more about it.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772304","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772304","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772304,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-30T10:42:45Z","updated_at":"2025-01-21T13:42:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\">shayshim</a>:</i>\n<p>The ZK transactions log showed me the association between a ZNode and its session. For example:</p>\n\n<p> </p>\n\n<p>28/12/2018, 16:33:02 IST session <b>0x1000ae5465c0007</b> cxid 0x1b zxid 0x180000006f <b>create</b> '/failsafe/default/sites/prod/leader-latch/_c_0e156808-69bf-4932-b0fd-12d0fb407365-latch-<b>0000000083</b>,#7036,v{s{31,s</p>\n\n{'world,'anyone}\n\n<p>}},T,84</p>\n\n<p> </p>\n\n<p>So 0000000083 was created by session 0x1000ae5465c0007 at 16:33:02, as reported by the ZK servers.</p>\n\n<p>And even though session 0x1000ae5465c0007 was decided as dead by Curator on 16:33:14 (and started new session 0x1000c6bc82c0001 on 16:33:17), the callback of create 0000000083 seems to be executed on 16:33:17. </p>\n\n<p>At this point in time, session 0x1000ae5465c0007 was supposed to be considered as dead and unused by Curator, but still, somehow, the callback, which was created by that session (probably on 16:33:02 or before), made it running (by the closed EventThread of ClientCnxn?? I mean, we already saw \" 2018-12-28 16:33:14 INFO  ClientCnxn:522 - EventThread shut down for session: 0x1000ae5465c0007\").</p>\n\n<p>And that stale callback corrupted the state of LeaderLatch.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772308","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772308","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772308,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-31T04:20:38Z","updated_at":"2025-01-21T13:42:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I have a theory as to what's going on. I've diagramed it below.</p>\n\n<p>Curator has a feature called \"protection\" mode that handles that case of an ephemeral node being created on the server but where the client connection fails before the server returns the ZNode that was created. I believe there is a potential bug here. If the connection is lost for long enough, Curator will want to kill the session. Session deletions must be handled by the Leader ZK instance. At the same time that the session kill is being processed, Curator's protection mode handling could be calling the follower that it's connected to get the current list of children - this can be handled directly by the follower instance without needing to call the leader. So, in this scenario, the client will get a list of children that includes the ZNode that will get deleted as part of killing the session. This would explain the behavior you're seeing.</p>\n\n<p>I need to think more about this. I'll first try to create a test scenario that generates this.</p>\n\n<p> <span class=\"image-wrap\" style=\"\"><img src=\"https://issues.apache.org/jira/secure/attachment/12953362/12953362_CURATOR-498.png\" style=\"border: 0px solid black\" /></span> </p>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772311","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772311","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772311,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-31T16:59:22Z","updated_at":"2025-01-21T13:42:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\">shayshim</a>:</i>\n<p>That makes sense. Thanks for your clear explanation. But I don't understand something regarding the following line:</p>\n\n<p>2018-12-28 16:33:17 INFO  LeaderLatch3:679 - CHANGED PATH: /sites/prod/leader-latch/_c_d99020be-d50e-4f16-946d-e8dd6ba34a5b-latch-<b>0000000085</b>  =>  /sites/prod/leader-latch/_c_0e156808-69bf-4932-b0fd-12d0fb407365-latch-<b>0000000083</b></p>\n\n<p>Doesn't it mean that  setNode(event.getName());  was called with  event.getName())  == _c_0e156808-69bf-4932-b0fd-12d0fb407365-latch-0000000083  ?</p>\n\n<p>If that's the case, then it is not simply that 0000000083  was returned as the list of children of leader-latch, but it is the callback after creating 0000000083, no?</p>\n\n<p>In fact, if 0000000083  simply returned as child, it would fail leadership (in a good way) for the checkLeadership method, unless it was in ourPath. So 0000000083  had to be set there by the callback before. Because we know leadership succeeded for it: \"LEADER WITH ... 0000000083\".</p>\n\n<p>And we know that 0000000083  was created by the previous dead session. So I don't understand how callback can be called for this dead session create command? </p>\n\n<p>On 16:33:14, we saw \"ZooKeeper:693 - Session: 0x1000ae5465c0007 closed\"</p>\n\n<p>On 16:33:17, we saw the message above with \"CHANGED PATH ... 0000000083\"</p>\n\n<p>So, I think we mind less that 0000000083 is temporarily there, in the ZK follower, even as LeaderLatch-leader, because LeaderLatch knows how to recover from that, if it is not in ourPath (upon session expiration, it will be deleted by ZK and trigger re-election in LeaderLatch). We care more about ourPath that was set with this 0000000083 and deleted 0000000085 - because 0000000083 does not belong to that LeaderLatch's current active session (in fact, it belongs to no-one's current session) - and from that we don't recover.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772320","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772320","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772320,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-31T18:32:39Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>The <tt>getChildren()</tt> call I'm referring to is not in LeaderLatch. It's in Curator's node creation code that performs \"protection\". You can see it in CreateBuilderImpl.java - search for <tt>protectedId</tt> and <tt>doProtected</tt>. This code handles an edge case in ZooKeeper whereby a sequential znode is successfully created on the server but the connection to the client is lost before the node name is returned to the client. As the session is still valid there's no way (without Curator's handling of \"protection\") to get the ZNode that was created.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772325","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772325","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772325,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-31T22:47:38Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\">shayshim</a>:</i>\n<p>OK, I will review the code of protection. But I definitely see that we sometimes reach findProtectedNodeInForeground with the znode of the previous \"closed\" session, as <b>foundNode</b> (closed in Curator, not closed in ZK servers yet. Actually surprisingly, it sometimes takes longer than session timeout till closed in ZK, even though Curator switched to new session for a while already. Don't understand why, because heartbeats should be missed to ZK for the previous session).</p>\n\n<p>So maybe we need to reset <tt>protectedId</tt> upon Curator closing session? I mean, we don't want to find the ephemeral node that belongs to the previous session. Or we want to find it, delete it, and then create a fresh one with new UUID, for the new session. Just a first thought, I need to review more.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772328","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772328","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772328,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMjg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-31T23:34:21Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I don't think there's any way to fix it in the Curator protection mechanism. As I see it now, there will always be a possible race where the CreateBuilderImpl's call to <tt>getChildren()</tt> returns a stale view. Instead, I'm working on a mechanism for Curator recipes to listen for session closures giving them an opportunity to reset.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772335","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772335","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772335,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMzU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T02:48:16Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I've upgraded this to a Blocker. This bug has been in Curator since we added the protection feature to it more than 6 years ago. I now have a reproducible test and an idea for a fix. The fix will be to include the session ID in the protection ID that is generated for the node name when the create mode is an ephemeral type. Then, if findProtectedNodeInForeground() finds the node in the use-case we've been discussing, it can compare the session ID to the current ZooKeeper handle's session ID and disregard the found node if they don't match.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772339","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772339","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772339,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzMzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T03:38:03Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user Randgalt opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/299\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/299</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a> - Fix protection mode race with ephemeral nodes</p>\n\n<p>    \"Protection\" has a potential bug. If the connection is lost for long enough, Curator will want to kill the session. Session deletions must be handled by the Leader ZK instance. At the same time that the session kill is being processed, Curator's protection mode handling could be calling the follower that it's connected to get the current list of children - this can be handled directly by the follower instance without needing to call the leader. So, in this scenario, the client will get a list of children that includes the ZNode that will get deleted as part of killing the session.</p>\n\n<p>    This bug has been in Curator since we added the protection feature to it more than 6 years ago. The fix is to include the session ID in the protection ID that is generated for the node name when the create mode is an ephemeral type. Then, if findProtectedNodeInForeground() finds the node in the use-case we've been discussing, it can compare the session ID to the current ZooKeeper handle's session ID and disregard the found node if they don't match.</p>\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/apache/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator</a> <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/299.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/299.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #299</p>\n\n<hr />\n<p>commit 4b0bc85d066f8582b55d76092c391bad04bd48a5<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2018-12-31T11:24:02Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a> - include session ID in log message for injecting session expiration</p>\n\n<p>commit dafd091412a834a128c9882d2b9534d1a0ff7735<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2019-01-02T03:34:41Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a></p>\n\n<p>    \"Protection\" has a potential bug. If the connection is lost for long enough, Curator will want to kill the session. Session deletions must be handled by the Leader ZK instance. At the same time that the session kill is being processed, Curator's protection mode handling could be calling the follower that it's connected to get the current list of children - this can be handled directly by the follower instance without needing to call the leader. So, in this scenario, the client will get a list of children that includes the ZNode that will get deleted as part of killing the session.</p>\n\n<p>    This bug has been in Curator since we added the protection feature to it more than 6 years ago. The fix is to include the session ID in the protection ID that is generated for the node name when the create mode is an ephemeral type. Then, if findProtectedNodeInForeground() finds the node in the use-case we've been discussing, it can compare the session ID to the current ZooKeeper handle's session ID and disregard the found node if they don't match.</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772343","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772343","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772343,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNDM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T03:38:54Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\" class=\"user-hover\" rel=\"shayshim\">Shay Shimony</a> please test <a href=\"https://github.com/apache/curator/pull/299\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/299</a> using your test code. I'm hopeful it will no longer reproduce.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772348","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772348","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772348,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T07:14:15Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\">shayshim</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> thanks, I will test it later today and update here.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772355","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772355","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772355,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T21:04:28Z","updated_at":"2025-01-21T13:42:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\">shayshim</a>:</i>\n<p>Using the <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a> branch, it seems like I got reproduction.</p>\n\n<p>First, leader latch node looks now like that (new long session Id):</p>\n\n<p>_c_7b7fcca7-4490-4454-85ba-8ec60e66c451-72077055072337924-latch-0000000024</p>\n\n<p>I have 2 HaWatchers that declared themselves as leaders: c2 and c3.</p>\n\n<p>I know that, because they both logged most recent message:</p>\n\n<p>INFO  main-EventThread  ConnectionStateManager:238 - State change: RECONNECTED<br/>\nINFO  main-EventThread  HaWatcher$:49 - GAINED LEADERSHIP in site cob</p>\n\n<p>With NO subsequent message for either:</p>\n\n<p>WARN  Curator-ConnectionStateManager-0  HaWatcher$:44 - LOST LEADERSHIP inside sites cob. Closing self...</p>\n\n<p>They also both behave like leaders.</p>\n\n<p> </p>\n\n<p>Looking at the session Ids and nodes in the leader latch path, I understand that c3 is wrong.</p>\n\n<p>c2 has node with 24 (session 0x10011b3200b0004), c3 with 25 (session 0x10011b3200b0005).</p>\n\n<p>c3 had a node with 23, but it deleted it, and it did so at the same second it declared itself leader, at 21:44:23. Can't be sure if that's the issue, but it might be. 23 & 25 both belong to the same session.</p>\n\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> I shortly will upload my logs.</p>\n\n<p>Anything else you need from my system? It is currently still a live.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772359","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772359","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772359,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T21:40:52Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>OK - I'm afraid there may be no way around this than to set a watcher on the LeaderLatch's ZNode. I was hoping that could be avoided.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772363","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772363","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772363,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T22:09:27Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/299\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/299</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/451001069","html_url":"https://github.com/apache/curator/pull/299#issuecomment-451001069","issue_url":"https://api.github.com/repos/apache/curator/issues/299","id":451001069,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTAwMTA2OQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T22:10:32Z","updated_at":"2019-01-02T22:10:32Z","author_association":"CONTRIBUTOR","body":"@Randgalt why did you close this PR ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/451001069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772366","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772366","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772366,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNjY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T22:10:35Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user eolivelli commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/299\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/299</a></p>\n\n<p>    @Randgalt why did you close this PR ?</p>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772371","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772371","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772371,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T22:15:05Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I'm working on a new PR that uses a Watcher on the found node. I don't think there's any way around this.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772374","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772374","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772374,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzNzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T22:58:31Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\" class=\"user-hover\" rel=\"shayshim\">Shay Shimony</a> I've made a new <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a> branch (<a href=\"https://github.com/apache/curator/commit/31151b67b2b704d7a31579284168d3f034694fed\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/commit/31151b67b2b704d7a31579284168d3f034694fed</a>). It's not complete so I won't make a PR yet. Please test this branch. Instead of the previous fix this one sets a watcher on the ZNode that was found as part of protection and LeaderLatch resets if this watcher fires. This is a compromise solution. The watcher only gets set in the rare case where protection mode is implemented. This way, in the normal case, LeaderLatch doesn't have to pay the penalty of setting a watch on its node.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772381","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772381","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772381,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzODE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-03T08:21:11Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\">shayshim</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> I have another reproduction for the new branch. Again, leadership disagreement between c2 & c3, but this time c2 seems to be the wrong one. I will upload logs and ZK transactions logs shortly.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772384","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772384","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772384,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzODQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-03T13:18:02Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shayshim\" class=\"user-hover\" rel=\"shayshim\">Shay Shimony</a> The logs helped a lot. I've pushed another commit for <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a>. Please re-test and report back.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772520","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772520","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772520,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1MjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T12:31:33Z","updated_at":"2025-01-21T13:42:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>So the intent is to create a ZNode with \"no name\" and have ZK append the sequence number? That was never meant to be supported by Curator (I didn't even know ZK supported it). I'd say that this would be a special case and require a special-case API. What's the use-case for this? Why is this needed?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772525","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772525","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772525,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1MjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:19:53Z","updated_at":"2025-01-21T13:42:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mwang5\">mwang5</a>:</i>\n<p>That is correct.</p>\n\n<p>Zookeeper does support this (at least, via zkCli)</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n[zk: localhost:2181(CONNECTED) 5] create -s /foo/ data\nCreated /foo/0000000000\n[zk: localhost:2181(CONNECTED) 6] create -s /foo/ data\nCreated /foo/0000000001\n</pre>\n</div></div>\n\n<p>My use case is we are using zookeeper to store data and we're using the sequence number as a globally unique, auto-incrementing id. The schema looks like</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n/Application/Users/0000000000\n/Application/Users/0000000001\n/Application/Users/0000000002\n...\n</pre>\n</div></div>\n\n<p>where the data for each node is the data for that user. Because of the behavior change in curator 2.7.1, we're unable to upgrade to newer versions of curator without migrating the data in zookeeper.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772529","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772529","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772529,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1Mjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:21:53Z","updated_at":"2025-01-21T13:42:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Dang - we're in a bit of a catch-22 here. It's been in it's current form long enough that to support this behavior we'd have to consider it \"new\" behavior. I can imagine we'd use some kind of special spelling, maybe <tt>forPath(\"/path/to/node//\", data)</tt> or something.</p>\n\n<p>Or, another \"verb\" in the DSL: <tt>.withEmptyPath().forPath(\"/path/to/node/\", data)</tt></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772532","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772532","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772532,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1MzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:26:27Z","updated_at":"2025-01-21T13:42:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mwang5\">mwang5</a>:</i>\n<p>I'm okay using a special-case api for this.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772540","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772540","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772540,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1NDA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:28:18Z","updated_at":"2025-01-21T13:42:08Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Yeah, I think <tt>.withEmptyPath()</tt> seems the safest way to go. We'd appreciate a PR with this change <img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/smile.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772548","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772548","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772548,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1NDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:33:40Z","updated_at":"2025-01-21T13:42:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Thinking more, maybe add another overload of <tt>forPath</tt> that takes an encoding type:</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n<span class=\"code-keyword\">public</span> <span class=\"code-keyword\">enum</span> PathEncodingType {\n   STANDARD,\n   EMPTY\n}\n\n<span class=\"code-keyword\">public</span> <span class=\"code-keyword\">interface</span> PathAndBytesable<T> {\n    ...\n    <span class=\"code-keyword\">public</span> T forPath(<span class=\"code-object\">String</span> path, <span class=\"code-object\">byte</span>[] data, PathEncodingType type) <span class=\"code-keyword\">throws</span> Exception;\n}\n</pre>\n</div></div>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772553","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772553","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772553,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1NTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:44:10Z","updated_at":"2025-01-21T13:42:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mwang5\">mwang5</a>:</i>\n<p>Since this only makes sense with sequential creates, as a non-sequential create will just fail with no name, would it make sense to associate this with the CreateMode? Either:</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n    curatorFramework.create()\n.withMode(CreateMode.PERSISTENT_SEQUENTIAL, PathEncodingType.ALLOW_EMPTY)\n.forPath(path, data);\n</pre>\n</div></div>\n\n<p>or just adding two more CreateModes, PERSISTENT_SEQUENTIAL_WITH_EMPTY / EPHEMERAL_SEQUENTIAL_WITH_EMPTY (kind of a mouthful, may not so good)?</p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">\n    curatorFramework.create()\n.withMode(CreateMode.PERSISTENT_SEQUENTIAL_WITH_EMPTY)\n.forPath(path, data);\n</pre>\n</div></div>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772556","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772556","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772556,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1NTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T19:45:50Z","updated_at":"2025-01-21T13:42:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Yeah, that'd be good</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772565","html_url":"https://github.com/apache/curator/issues/1019#issuecomment-2604772565","issue_url":"https://api.github.com/repos/apache/curator/issues/1019","id":2604772565,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI1NjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T17:56:30Z","updated_at":"2025-01-21T13:42:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user marquiswang opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/300\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/300</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-499\" title=\"ZKPaths strips trailing \"/\" incorrectly when creating sequential nodes\" class=\"issue-link\" data-issue-key=\"CURATOR-499\">CURATOR-499</a> Allow creating sequential nodes with an empty name</p>\n\n<p>    Add CreateModable#withMode(CreateMode, PathEncodingType) where<br/>\n    PathEncodingType is an enum with values DEFAULT and ALLOW_EMPTY.</p>\n\n<p>    When a node is created with ALLOW_EMPTY, trailing /s will not be<br/>\n    removed from the path.</p>\n\n<p>    This should not be used except with sequential CreateModes, as it will<br/>\n    fail with:<br/>\n    java.lang.IllegalArgumentException: Path must not end with / character</p>\n\n<p>    Calling the following:</p>\n\n<p>    curatorFramework.create()<br/>\n.withMode(CreateMode.PERSISTENT_SEQUENTIAL, PathEncodingType.ALLOW_EMPTY)<br/>\n.forPath(\"/foo/bar/, data);</p>\n\n<p>    Will create a node \"/foo/bar/000000000X\", whereas calling:</p>\n\n<p>    curatorFramework.create()<br/>\n.withMode(CreateMode.PERSISTENT_SEQUENTIAL)<br/>\n.forPath(\"/foo/bar/, data);</p>\n\n<p>    Will create a node \"/foo/bar000000000X\".</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/marquiswang/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/marquiswang/curator</a> master</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/300.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/300.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #300</p>\n\n<hr />\n<p>commit df2ad2a27eeeb21a30dd1a7e9c05416d23b22d2a<br/>\nAuthor: Marquis Wong <marquis.wong@...><br/>\nDate:   2019-01-10T17:20:22Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-499\" title=\"ZKPaths strips trailing \"/\" incorrectly when creating sequential nodes\" class=\"issue-link\" data-issue-key=\"CURATOR-499\">CURATOR-499</a> Allow creating sequential nodes with an empty name</p>\n\n<p>    Add CreateModable#withMode(CreateMode, PathEncodingType) where<br/>\n    PathEncodingType is an enum with values DEFAULT and ALLOW_EMPTY.</p>\n\n<p>    When a node is created with ALLOW_EMPTY, trailing /s will not be<br/>\n    removed from the path.</p>\n\n<p>    This should not be used except with sequential CreateModes, as it will<br/>\n    fail with:<br/>\n    java.lang.IllegalArgumentException: Path must not end with / character</p>\n\n<p>    Calling the following:</p>\n\n<p>    curatorFramework.create()<br/>\n.withMode(CreateMode.PERSISTENT_SEQUENTIAL, PathEncodingType.ALLOW_EMPTY)<br/>\n.forPath(\"/foo/bar/, data);</p>\n\n<p>    Will create a node \"/foo/bar/000000000X\", whereas calling:</p>\n\n<p>    curatorFramework.create()<br/>\n.withMode(CreateMode.PERSISTENT_SEQUENTIAL)<br/>\n.forPath(\"/foo/bar/, data);</p>\n\n<p>    Will create a node \"/foo/bar000000000X\".</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773038","html_url":"https://github.com/apache/curator/issues/1023#issuecomment-2604773038","issue_url":"https://api.github.com/repos/apache/curator/issues/1023","id":2604773038,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMwMzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T05:23:58Z","updated_at":"2025-01-21T13:42:22Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user leventov opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/301\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/301</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-503\" title=\"Update dependencies in January 2019\" class=\"issue-link\" data-issue-key=\"CURATOR-503\"><del>CURATOR-503</del></a> Update dependencies in January 2019</p>\n\n<p>    The main motivation for this update is updating Guava from 20.0 to 27.0.1-jre. Between these versions, the implementation of `Maps.newConcurrentMap()` (this method is used in many some places in Curator code) was changed and now it returns `ConcurrentHashMap` instead of Guava's own implementation, that was less efficient.</p>\n\n<p>    This PR also updates Jackson version, as well as #280, from 2.7 to 2.9. Answering questions raised in the comments to that PR: I believe upgrading Jackson from 2.7 to 2.9 is safe. The compatibility standards in Jackson are much higher than in an average Java project. Most incompatibilities in <span class=\"error\">&#91;2.8&#93;</span>(<a href=\"https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.8#changes-compatibility\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.8#changes-compatibility</a>) and <span class=\"error\">&#91;2.9&#93;</span>(<a href=\"https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9#changes-compatibility\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/FasterXML/jackson/wiki/Jackson-Release-2.9#changes-compatibility</a>) are minor tweaks in Jackson's programmatic API (shouldn't be a concern as long as Curator is built and passes tests with the updated dependencies). Also support for some old Java and Android versions is dropped, shouldn't be a concern in Curator either. Finally, seems that there are the only two changes that affect serialization format: <span class=\"error\">&#91;of `java.nio.Path`&#93;</span>(<a href=\"https://github.com/FasterXML/jackson-databind/issues/1235\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/FasterXML/jackson-databind/issues/1235</a>) and <span class=\"error\">&#91;of `java.sql.Date`&#93;</span>(<a href=\"https://github.com/FasterXML/jackson-databind/issues/219\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/FasterXML/jackson-databind/issues/219</a>). It also doesn't seem to be relevant to Curator.</p>\n\n<p>    Testing: `mvn test` in a private CI server passed.</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/metamx/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/metamx/curator</a> update-deps-2018</p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/301.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/301.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #301</p>\n\n<hr />\n<p>commit 73ce867cbfd5b9ea04b20f43e81837881f23277f<br/>\nAuthor: Roman Leventov <leventov.ru@...><br/>\nDate:   2018-12-11T18:38:13Z</p>\n\n<p>    Update deps</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/455952076","html_url":"https://github.com/apache/curator/pull/280#issuecomment-455952076","issue_url":"https://api.github.com/repos/apache/curator/issues/280","id":455952076,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTk1MjA3Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T05:24:53Z","updated_at":"2019-01-21T05:24:53Z","author_association":"MEMBER","body":"@Randgalt @cammckenzie I believe such update is safe. See #301.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/455952076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604769717","html_url":"https://github.com/apache/curator/issues/1001#issuecomment-2604769717","issue_url":"https://api.github.com/repos/apache/curator/issues/1001","id":2604769717,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3Njk3MTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T05:24:55Z","updated_at":"2025-01-21T13:40:57Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user leventov commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/280\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/280</a></p>\n\n<p>    @Randgalt @cammckenzie I believe such update is safe. See #301.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604769717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/455952957","html_url":"https://github.com/apache/curator/pull/257#issuecomment-455952957","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":455952957,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTk1Mjk1Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T05:31:11Z","updated_at":"2019-01-21T05:31:11Z","author_association":"MEMBER","body":"@Randgalt @cammckenzie could you please revisit this PR?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/455952957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765773","html_url":"https://github.com/apache/curator/issues/978#issuecomment-2604765773","issue_url":"https://api.github.com/repos/apache/curator/issues/978","id":2604765773,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU3NzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T05:31:13Z","updated_at":"2025-01-21T13:39:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user leventov commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/257\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/257</a></p>\n\n<p>    @Randgalt @cammckenzie could you please revisit this PR?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772877","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772877","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772877,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI4Nzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T09:40:49Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawinter\">dawinter</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a> Do you have any outlook for the update?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772882","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772882","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772882,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI4ODI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T16:26:44Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>The CVE would be nice. Is this really urgent? I can't imagine how. But, a PR would help.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772886","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772886","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772886,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI4ODY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T17:37:56Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawinter\">dawinter</a>:</i>\n<p>It is the following CVE:<br/>\n<a href=\"https://nvd.nist.gov/vuln/detail/CVE-2018-10237\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://nvd.nist.gov/vuln/detail/CVE-2018-10237</a><br/>\nSeverity:Medium<br/>\nCVSS Score: 4.3 (AV:N/AC:M/Au:N/C:N/I:N/A<img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/tongue.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/>)<br/>\nCWE: CWE-502 Deserialization of Untrusted Data</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772887","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772887","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772887,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI4ODc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T17:40:24Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawinter\">dawinter</a>:</i>\n<p>I did not see a specified version in: <a href=\"https://github.com/apache/curator/blob/master/curator-client/pom.xml\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/blob/master/curator-client/pom.xml</a>. So I assume it is managed on a central location or use the latest version. </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772892","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772892","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772892,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI4OTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T17:47:21Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawinter\">dawinter</a>:</i>\n<p>PR <a href=\"https://github.com/apache/curator/pull/302\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/302</a> Let me know if you need something different.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772899","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772899","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772899,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI4OTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T17:49:04Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Thanks - but to be clear, Curator is not affected by this CVE. However, we should update the dependency.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772388","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772388","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772388,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T19:32:21Z","updated_at":"2025-01-21T13:42:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user Randgalt opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a> Protected Mode creation can mistake closing session's node causing problems for many recipes such as LeaderLatch</p>\n\n<p>    Kudos to user Shay Shimony for his tireless and excellent work tracking this down. There are two problems addressed here: 1) Protected create mode can potentially find a ZNode that is about to be deleted due to an expired session. CreateBuilderImpl now keeps track of the session ID when the create is initiated. If after a connection loss the session ID has changed, any found protected node is ignored as it will soon be deleted. 2) For ZooKeeper 3.4.x the simulated (via reflection) InjectSessionExpiration was incorrectly setting the connection state to closed which caused the session expiration to be ignored.</p>\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/apache/curator\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator</a> <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #303</p>\n\n<hr />\n<p>commit ea505f54291dc548aca947503630960cd10225d0<br/>\nAuthor: randgalt <randgalt@...><br/>\nDate:   2019-01-28T19:23:15Z</p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a></p>\n\n<p>    Kudos to user Shay Shimony for his tireless and excellent work tracking this down. There are two problems addressed here: 1) Protected create mode can potentially find a ZNode that is about to be deleted due to an expired session. CreateBuilderImpl now keeps track of the session ID when the create is initiated. If after a connection loss the session ID has changed, any found protected node is ignored as it will soon be deleted. 2) For ZooKeeper 3.4.x the simulated (via reflection) InjectSessionExpiration was incorrectly setting the connection state to closed which caused the session expiration to be ignored.</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458269785","html_url":"https://github.com/apache/curator/pull/303#issuecomment-458269785","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":458269785,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI2OTc4NQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T19:33:17Z","updated_at":"2019-01-28T19:33:17Z","author_association":"MEMBER","body":"attn: @shayshim","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458269785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772392","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772392","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772392,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzOTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T19:33:19Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303</a></p>\n\n<p>    attn: @shayshim</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458287598","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458287598","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458287598,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI4NzU5OA==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:24:47Z","updated_at":"2019-01-28T20:24:47Z","author_association":"MEMBER","body":"This doesn't compile for me - I get a ton of errors. Also, please rename the PR so that to something like: `[CURATOR-502] Update guava-version to 27.0.1`","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458287598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772907","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772907","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772907,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI5MDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:24:50Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/302\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/302</a></p>\n\n<p>    This doesn't compile for me - I get a ton of errors. Also, please rename the PR so that to something like: `<a href=\"https://issues.apache.org/jira/browse/CURATOR-502\" title=\"Update dependency com.google.guava:guava of org.apache.curator:curator-client\" class=\"issue-link\" data-issue-key=\"CURATOR-502\"><del>CURATOR-502</del></a> Update guava-version to 27.0.1`</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458292879","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458292879","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458292879,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI5Mjg3OQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:40:50Z","updated_at":"2019-01-28T20:40:50Z","author_association":"CONTRIBUTOR","body":"@Randgalt as guava has a lot of issues about forward/backward compatibility, did you ever consider to shade it and relocate packages?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458292879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458293192","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458293192","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458293192,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI5MzE5Mg==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:41:49Z","updated_at":"2019-01-28T20:41:49Z","author_association":"MEMBER","body":"It already is shaded. see here: https://github.com/apache/curator/blob/master/curator-client/pom.xml#L90","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458293192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458295168","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458295168","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458295168,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI5NTE2OA==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:48:04Z","updated_at":"2019-01-28T20:48:04Z","author_association":"CONTRIBUTOR","body":"Ops. Sorry.\r\nI didn't notice.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458295168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458295643","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458295643","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458295643,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI5NTY0Mw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:49:28Z","updated_at":"2019-01-28T20:49:28Z","author_association":"MEMBER","body":"TBH - this PR is not needed. But, we keep getting requests for it so I'm OK with making the change. But, it's not trivial. Several parts of the codebase need to be updated.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458295643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772395","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772395","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772395,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzOTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T21:08:56Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user shayshim commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303#discussion_r251593572\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303#discussion_r251593572</a></p>\n\n<p>    &#8212; Diff: curator-client/src/main/java/org/apache/curator/utils/InjectSessionExpiration.java &#8212;<br/>\n    @@ -94,7 +89,7 @@ public static void injectSessionExpiration(ZooKeeper zooKeeper)<br/>\n Object eventThread = eventThreadField.get(clientCnxn);<br/>\n queueEventMethod.invoke(eventThread, event);<br/>\n queueEventOfDeathMethod.invoke(eventThread);<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Why it is important to queue event of death immediately? It will be done for us soon by this flow:<br/>\n    ConnectionState.process -> handleExpiredSession -> ... -> ClientCnxn.disconnect ->...</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>because we just queued this WatchedEvent.<br/>\n    Same thing for wakeupCnxnMethod.invoke.</li>\n</ul>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458301982","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458301982","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458301982,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMwMTk4Mg==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T21:08:59Z","updated_at":"2019-01-28T21:08:59Z","author_association":"MEMBER","body":"Also see here: https://cwiki.apache.org/confluence/display/CURATOR/TN13","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458301982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772399","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772399","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772399,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzIzOTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T21:24:20Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303#discussion_r251599266\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303#discussion_r251599266</a></p>\n\n<p>    &#8212; Diff: curator-client/src/main/java/org/apache/curator/utils/InjectSessionExpiration.java &#8212;<br/>\n    @@ -94,7 +89,7 @@ public static void injectSessionExpiration(ZooKeeper zooKeeper)<br/>\n Object eventThread = eventThreadField.get(clientCnxn);<br/>\n queueEventMethod.invoke(eventThread, event);<br/>\n queueEventOfDeathMethod.invoke(eventThread);<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    TBH I just wanted to make the minimal change needed to get this to work. It's been this way a very long time.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458320449","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458320449","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458320449,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMyMDQ0OQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T22:05:41Z","updated_at":"2019-01-28T22:05:41Z","author_association":"CONTRIBUTOR","body":"@Randgalt thanks for the pointer.\r\nIs there any roadmap towards breaking the API and drop Guava classes at least from the public surface of the project?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458320449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458325859","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458325859","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458325859,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMyNTg1OQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T22:22:44Z","updated_at":"2019-01-28T22:22:44Z","author_association":"MEMBER","body":"Not at this time. It would be pretty disruptive and there hasn't been a call for it. But, if someone proposes something it will definitely be considered.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458325859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458380731","html_url":"https://github.com/apache/curator/pull/257#issuecomment-458380731","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":458380731,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODM4MDczMQ==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T02:16:22Z","updated_at":"2019-01-29T02:16:22Z","author_association":"CONTRIBUTOR","body":"Any thoughts on this @Randgalt . I've had a look at it, and the changes seem fine, but equally, they're not adding a great deal (other than stopping some error prone complaints).","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458380731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765782","html_url":"https://github.com/apache/curator/issues/978#issuecomment-2604765782","issue_url":"https://api.github.com/repos/apache/curator/issues/978","id":2604765782,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU3ODI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T02:16:24Z","updated_at":"2025-01-21T13:39:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/257\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/257</a></p>\n\n<p>    Any thoughts on this @Randgalt . I've had a look at it, and the changes seem fine, but equally, they're not adding a great deal (other than stopping some error prone complaints).</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772405","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772405","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772405,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI0MDU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T02:37:14Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303#discussion_r251672915\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303#discussion_r251672915</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/imps/CreateBuilderImpl.java &#8212;<br/>\n    @@ -48,19 +50,21 @@</p>\n\n<p>     public class CreateBuilderImpl implements CreateBuilder, CreateBuilder2, BackgroundOperation<PathAndBytes>, ErrorListenerPathAndBytesable<String><br/>\n     {<br/>\n    +    private final Logger log = LoggerFactory.getLogger(getClass());<br/>\n private final CuratorFrameworkImpl client;<br/>\n private CreateMode createMode;<br/>\n private Backgrounding backgrounding;<br/>\n private boolean createParentsIfNeeded;<br/>\n private boolean createParentsAsContainers;</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>private boolean doProtected;<br/>\n private boolean compress;<br/>\n private boolean setDataIfExists;<br/>\n private int setDataIfExistsVersion = -1;</li>\n\t<li>private String protectedId;<br/>\n private ACLing acling;<br/>\n private Stat storingStat;<br/>\n private long ttl;<br/>\n    +    private boolean doProtected;<br/>\n    +    private String protectedId;<br/>\n    +    private long initialSessionId;\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    I think that maybe the initialSessionId should have a different name as it's a bit misleading. It's not really the initialSessionId as it gets updated during the edge case for handling protected ephemeral nodes. Really, it's the session ID at the time of creation for a protected ephemeral node isn't it? Perhaps it should be named accordingly and only initialised for the case where it will be needed?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458384905","html_url":"https://github.com/apache/curator/pull/257#issuecomment-458384905","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":458384905,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODM4NDkwNQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T02:37:21Z","updated_at":"2019-01-29T02:37:21Z","author_association":"MEMBER","body":"Yeah - I don't really see the need for this.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458384905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765788","html_url":"https://github.com/apache/curator/issues/978#issuecomment-2604765788","issue_url":"https://api.github.com/repos/apache/curator/issues/978","id":2604765788,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU3ODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T02:37:23Z","updated_at":"2025-01-21T13:39:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/257\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/257</a></p>\n\n<p>    Yeah - I don't really see the need for this.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772407","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772407","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772407,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI0MDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T03:56:30Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303#discussion_r251684425\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303#discussion_r251684425</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/imps/CreateBuilderImpl.java &#8212;<br/>\n    @@ -48,19 +50,21 @@</p>\n\n<p>     public class CreateBuilderImpl implements CreateBuilder, CreateBuilder2, BackgroundOperation<PathAndBytes>, ErrorListenerPathAndBytesable<String><br/>\n     {<br/>\n    +    private final Logger log = LoggerFactory.getLogger(getClass());<br/>\n private final CuratorFrameworkImpl client;<br/>\n private CreateMode createMode;<br/>\n private Backgrounding backgrounding;<br/>\n private boolean createParentsIfNeeded;<br/>\n private boolean createParentsAsContainers;</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>private boolean doProtected;<br/>\n private boolean compress;<br/>\n private boolean setDataIfExists;<br/>\n private int setDataIfExistsVersion = -1;</li>\n\t<li>private String protectedId;<br/>\n private ACLing acling;<br/>\n private Stat storingStat;<br/>\n private long ttl;<br/>\n    +    private boolean doProtected;<br/>\n    +    private String protectedId;<br/>\n    +    private long initialSessionId;\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Sure - can you suggest a name?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458398737","html_url":"https://github.com/apache/curator/pull/303#issuecomment-458398737","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":458398737,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODM5ODczNw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T03:57:25Z","updated_at":"2019-01-29T03:57:25Z","author_association":"MEMBER","body":"It's odd - only 1 test is failing: TestTreeCache.testKilledSession(). I can make it work by special casing via `if ( client.isZk34CompatibilityMode() )` but I wonder why? ZK is sending a node deletion immediately after the fake session closed event is posted. I'm not sure it's worth debugging.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458398737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772413","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772413","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772413,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI0MTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T03:57:27Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303</a></p>\n\n<p>    It's odd - only 1 test is failing: TestTreeCache.testKilledSession(). I can make it work by special casing via `if ( client.isZk34CompatibilityMode() )` but I wonder why? ZK is sending a node deletion immediately after the fake session closed event is posted. I'm not sure it's worth debugging.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772416","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772416","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772416,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI0MTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T04:01:21Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user cammckenzie commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303#discussion_r251685066\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303#discussion_r251685066</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/imps/CreateBuilderImpl.java &#8212;<br/>\n    @@ -48,19 +50,21 @@</p>\n\n<p>     public class CreateBuilderImpl implements CreateBuilder, CreateBuilder2, BackgroundOperation<PathAndBytes>, ErrorListenerPathAndBytesable<String><br/>\n     {<br/>\n    +    private final Logger log = LoggerFactory.getLogger(getClass());<br/>\n private final CuratorFrameworkImpl client;<br/>\n private CreateMode createMode;<br/>\n private Backgrounding backgrounding;<br/>\n private boolean createParentsIfNeeded;<br/>\n private boolean createParentsAsContainers;</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>private boolean doProtected;<br/>\n private boolean compress;<br/>\n private boolean setDataIfExists;<br/>\n private int setDataIfExistsVersion = -1;</li>\n\t<li>private String protectedId;<br/>\n private ACLing acling;<br/>\n private Stat storingStat;<br/>\n private long ttl;<br/>\n    +    private boolean doProtected;<br/>\n    +    private String protectedId;<br/>\n    +    private long initialSessionId;\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    protectedEphemeralSessionID? And then maybe move the initialisation check so that it only occurs if Curator is actually creating a protected ephemeral node, rather than always initialising on the first forPath() call?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458529386","html_url":"https://github.com/apache/curator/pull/257#issuecomment-458529386","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":458529386,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODUyOTM4Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T12:55:17Z","updated_at":"2019-01-29T12:55:17Z","author_association":"MEMBER","body":"This PR fixes one bug.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458529386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765792","html_url":"https://github.com/apache/curator/issues/978#issuecomment-2604765792","issue_url":"https://api.github.com/repos/apache/curator/issues/978","id":2604765792,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU3OTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T12:55:19Z","updated_at":"2025-01-21T13:39:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user leventov commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/257\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/257</a></p>\n\n<p>    This PR fixes one bug.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458551093","html_url":"https://github.com/apache/curator/pull/257#issuecomment-458551093","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":458551093,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODU1MTA5Mw==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T14:04:04Z","updated_at":"2019-01-29T14:04:04Z","author_association":"MEMBER","body":"> This PR fixes one bug.\r\n\r\nI'd rather see a PR with just the bug fix and not coupled with these other changes.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458551093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765796","html_url":"https://github.com/apache/curator/issues/978#issuecomment-2604765796","issue_url":"https://api.github.com/repos/apache/curator/issues/978","id":2604765796,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjU3OTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T14:04:06Z","updated_at":"2025-01-21T13:39:23Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/257\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/257</a></p>\n\n<p>    > This PR fixes one bug.</p>\n\n<p>    I'd rather see a PR with just the bug fix and not coupled with these other changes.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604765796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458556664","html_url":"https://github.com/apache/curator/pull/303#issuecomment-458556664","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":458556664,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODU1NjY2NA==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T14:20:18Z","updated_at":"2019-01-29T14:20:18Z","author_association":"MEMBER","body":"@cammckenzie have a look at this new version. I refactored protected mode into a separate class. Also, everyone, have a look at TestTreeCache.testKilledSession - it makes me a bit nervous that this had to be done but it's only for ZK 3.4 and may not be worth the effort to fix.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458556664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772418","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772418","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772418,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI0MTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T14:20:21Z","updated_at":"2025-01-21T13:42:05Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303</a></p>\n\n<p>    @cammckenzie have a look at this new version. I refactored protected mode into a separate class. Also, everyone, have a look at TestTreeCache.testKilledSession - it makes me a bit nervous that this had to be done but it's only for ZK 3.4 and may not be worth the effort to fix.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772422","html_url":"https://github.com/apache/curator/issues/1018#issuecomment-2604772422","issue_url":"https://api.github.com/repos/apache/curator/issues/1018","id":2604772422,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI0MjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T14:21:39Z","updated_at":"2025-01-21T13:42:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/303#discussion_r251851979\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/303#discussion_r251851979</a></p>\n\n<p>    &#8212; Diff: curator-framework/src/main/java/org/apache/curator/framework/imps/CreateBuilderImpl.java &#8212;<br/>\n    @@ -610,18 +610,18 @@ private String protectedPathInForeground(String adjustedPath, byte[] data, List<<br/>\n     {<br/>\n ThreadUtils.checkInterrupted(e);<br/>\n if ( ( e instanceof KeeperException.ConnectionLossException ||</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>!( e instanceof KeeperException )) && protectedId != null )<br/>\n    +!( e instanceof KeeperException )) && protectedMode.doProtected() )\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>     Note: this is a subtle change. The previous version checked `protectedId != null` and I don't remember why.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458702671","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458702671","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458702671,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODcwMjY3MQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T20:53:39Z","updated_at":"2019-01-29T20:53:39Z","author_association":"MEMBER","body":"This can be closed in favor of #301\r\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458702671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772919","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772919","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772919,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI5MTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T20:53:52Z","updated_at":"2025-01-21T13:42:19Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Randgalt commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/302\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/302</a></p>\n\n<p>    This can be closed in favor of #301</p>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/458898000","html_url":"https://github.com/apache/curator/pull/302#issuecomment-458898000","issue_url":"https://api.github.com/repos/apache/curator/issues/302","id":458898000,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODg5ODAwMA==","user":{"login":"dawinter","id":13119782,"node_id":"MDQ6VXNlcjEzMTE5Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/13119782?v=4","gravatar_id":"","url":"https://api.github.com/users/dawinter","html_url":"https://github.com/dawinter","followers_url":"https://api.github.com/users/dawinter/followers","following_url":"https://api.github.com/users/dawinter/following{/other_user}","gists_url":"https://api.github.com/users/dawinter/gists{/gist_id}","starred_url":"https://api.github.com/users/dawinter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dawinter/subscriptions","organizations_url":"https://api.github.com/users/dawinter/orgs","repos_url":"https://api.github.com/users/dawinter/repos","events_url":"https://api.github.com/users/dawinter/events{/privacy}","received_events_url":"https://api.github.com/users/dawinter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T10:44:11Z","updated_at":"2019-01-30T10:44:11Z","author_association":"NONE","body":"Sure, everything that's update the version is ok for me.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/458898000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772925","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772925","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772925,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI5MjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T10:44:13Z","updated_at":"2025-01-21T13:42:20Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user dawinter commented on the issue:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/302\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/302</a></p>\n\n<p>    Sure, everything that's update the version is ok for me.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772928","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772928","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772928,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI5Mjg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T10:44:14Z","updated_at":"2025-01-21T13:42:20Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user dawinter closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/curator/pull/302\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/302</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772931","html_url":"https://github.com/apache/curator/issues/1022#issuecomment-2604772931","issue_url":"https://api.github.com/repos/apache/curator/issues/1022","id":2604772931,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzI5MzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T10:45:21Z","updated_at":"2025-01-21T13:42:20Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dawinter\">dawinter</a>:</i>\n<p>changes to ticket in <a href=\"https://github.com/apache/curator/pull/301\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/pull/301</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604772931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/459322489","html_url":"https://github.com/apache/curator/pull/280#issuecomment-459322489","issue_url":"https://api.github.com/repos/apache/curator/issues/280","id":459322489,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTMyMjQ4OQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T12:13:31Z","updated_at":"2019-01-31T12:13:31Z","author_association":"MEMBER","body":"@leventov is this PR still needed or does #301 cover the same change?","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/459322489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/459358908","html_url":"https://github.com/apache/curator/pull/280#issuecomment-459358908","issue_url":"https://api.github.com/repos/apache/curator/issues/280","id":459358908,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTM1ODkwOA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T14:14:40Z","updated_at":"2019-01-31T14:15:07Z","author_association":"MEMBER","body":"@Randgalt it's still needed. I could have included the changes by @Max-Pudov in my PR but didn't do that so this PR could be merged and his authorship retained.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/459358908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773179","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773179","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773179,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMxNzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T21:54:37Z","updated_at":"2025-01-21T13:42:26Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Hey <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\" class=\"user-hover\" rel=\"yuri.tceretian\">Yuri Tceretian</a> - nice to see you over \"here\" <img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/biggrin.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/></p>\n\n<p>This sounds like it might be related to something we're about to fix: <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/CURATOR-498</a> - please look that over and see if it corresponds.</p>\n\n<p>Update: Looking at the graphic posted it looks a lot like what we're seeing in <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a>.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773186","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773186","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773186,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMxODY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T22:17:13Z","updated_at":"2025-01-21T13:42:26Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\">yuri.tceretian</a>:</i>\n<p>Hi <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\" class=\"user-hover\" rel=\"randgalt\">Jordan Zimmerman</a>, yes I saw that issue and from its description, I decided that it was a slightly different one. In this case, it's simple races within LeaderLatch, reconnect happens right after the connection is lost, ie within one session. Honestly, I did not read all the comments. So, if you think that this is a duplicate, feel free to close it.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773190","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773190","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773190,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMxOTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T22:37:24Z","updated_at":"2025-01-21T13:42:26Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\">yuri.tceretian</a>:</i>\n<p>Also, there is at least one potentially dangerous consequence: (see diagram above) If latch X becomes the leader (because zNode was not deleted due to races) but the instance has latch Y, then there can be a situation when \"ghost\"  latch is considered a leader and therefore there is no leader, until the session is closed and the \"ghost\" latch disappears. </p>\n\n<p> </p>\n\n<p>Another founding: If something from outside deletes the leader's zNode, the current leader does not get notified but candidates do, and this lead to a situation when there are many leaders. Not sure this is a bug because, but I think it is worth mentioning.  </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773195","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773195","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773195,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMxOTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T03:21:01Z","updated_at":"2025-01-21T13:42:26Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<blockquote><p>I believe we hit the first condition because of races that occur after client reconnects to ZooKeeper.<br/>\nClient reconnects to ZooKeeper and LeaderLatch gets the event and calls reset method which set the internal state (`ourPath`) to null, removes old latch and creates a new one. This happens in thread \"Curator-ConnectionStateManager-0\".<br/>\nAlmost simultaneously, LeaderLatch gets another even NodeDeleted (here) and tries to re-read the list of latches and check leadership. This happens in the thread \"main-EventThread\".</p></blockquote>\n\n<p>This isn't really a race. There's not much that can be done about it. The LeaderLatch doesn't know what its node is until the background creation occurs. The only reason that a NodeDeleted event would be received is if the previous sequence node gets deleted. So, that's a rare case but could happen. The end result, though, is merely that the Latch resets. This is noisy but not race-y as the end result is fine. A test case should be written that simulates this just in case, though. There might be an optimization to detect that the latch is in this state - i.e. it's waiting for the node creation result - but I think that would be difficult and error prone.</p>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773196","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773196","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773196,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMxOTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T03:23:45Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<blockquote><p>Also, there is at least one potentially dangerous consequence: (see diagram above) If latch X becomes the leader (because zNode was not deleted due to races) but the instance has latch Y, then there can be a situation when \"ghost\"  latch is considered a leader and therefore there is no leader, until the session is closed and the \"ghost\" latch disappears. </p></blockquote>\n\n<p>I don't see how the latch's zNode would not be deleted. Every node that the latch creates goes through `setNode(path)` which deletes any previous zNode.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773201","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773201","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773201,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T03:24:56Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<blockquote><p>Another founding: If something from outside deletes the leader's zNode, the current leader does not get notified but candidates do, and this lead to a situation when there are many leaders. Not sure this is a bug because, but I think it is worth mentioning.  </p></blockquote>\n\n<p>This is defined invariant in Curator. We have Tech Note on it: <a href=\"https://cwiki.apache.org/confluence/display/CURATOR/TN7\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://cwiki.apache.org/confluence/display/CURATOR/TN7</a> - it would be very expensive and cumbersome to add watchers to lock nodes just to guard against this.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773205","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773205","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773205,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMDU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T03:27:53Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p> <span class=\"image-wrap\" style=\"\"><img src=\"https://issues.apache.org/jira/secure/attachment/12957195/12957195_Screen+Shot+2019-01-31+at+10.26.59+PM.png\" style=\"border: 0px solid black\" /></span> </p>\n\n<p>Note: when <tt>ourPath</tt> becomes Y, ZNode X gets deleted. </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/459991763","html_url":"https://github.com/apache/curator/pull/303#issuecomment-459991763","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":459991763,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTk5MTc2Mw==","user":{"login":"shayshim","id":1616659,"node_id":"MDQ6VXNlcjE2MTY2NTk=","avatar_url":"https://avatars.githubusercontent.com/u/1616659?v=4","gravatar_id":"","url":"https://api.github.com/users/shayshim","html_url":"https://github.com/shayshim","followers_url":"https://api.github.com/users/shayshim/followers","following_url":"https://api.github.com/users/shayshim/following{/other_user}","gists_url":"https://api.github.com/users/shayshim/gists{/gist_id}","starred_url":"https://api.github.com/users/shayshim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shayshim/subscriptions","organizations_url":"https://api.github.com/users/shayshim/orgs","repos_url":"https://api.github.com/users/shayshim/repos","events_url":"https://api.github.com/users/shayshim/events{/privacy}","received_events_url":"https://api.github.com/users/shayshim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-02T19:20:53Z","updated_at":"2019-02-02T19:20:53Z","author_association":"CONTRIBUTOR","body":"For ZK 3.5, ZooKeeperTestable is used to do similar work like InjectSessionExpiration does for 3.4 (or maybe vise versa). And similarly to the bug in InjectSessionExpiration, ZooKeeperTestable also sets ClintCnxn.state to CLOSED, which I believe would lead to the same bug in Curator when 3.5 is used. \r\nMaybe better to use the reflective version also for 3.5 as well, and not ZooKeeperTestable.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/459991763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/460200802","html_url":"https://github.com/apache/curator/pull/257#issuecomment-460200802","issue_url":"https://api.github.com/repos/apache/curator/issues/257","id":460200802,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDIwMDgwMg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T10:38:39Z","updated_at":"2019-02-04T10:38:39Z","author_association":"MEMBER","body":"@Randgalt changed.","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/460200802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/460297462","html_url":"https://github.com/apache/curator/pull/303#issuecomment-460297462","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":460297462,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDI5NzQ2Mg==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T15:46:19Z","updated_at":"2019-02-04T15:46:19Z","author_association":"MEMBER","body":"@shayshim and @cammckenzie - I've applied your comments and refactored some code, etc. Please re-review. Note: I'm now doing as Shay suggests and only inserted a session expired event for both 3.4 and 3.5. This means we can no longer use the Testable facade I added to ZK long ago. For future safety, I'm asking ZK to help us out via: https://issues.apache.org/jira/browse/ZOOKEEPER-3269","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/460297462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773211","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773211","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773211,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:54:11Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I wrote this test (as part of <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a>) that I believe simulates the scenario describe in this issue. The test passes showing that there is no race. Thopughts <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\" class=\"user-hover\" rel=\"yuri.tceretian\">Yuri Tceretian</a>?</p>\n\n<p><a href=\"https://github.com/apache/curator/blob/CURATOR-498/curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java#L73\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/curator/blob/CURATOR-498/curator-recipes/src/test/java/org/apache/curator/framework/recipes/leader/TestLeaderLatch.java#L73</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773216","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773216","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773216,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T20:35:27Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\">yuri.tceretian</a>:</i>\n<p>I agree that \"ghost\" latch is not possible due to \"races\" I mentioned in the issue. Apparently I put the \"delete znode\" command, in wrong place. As you pointed out above, It is sent a little bit later and deletes node X, when ourPath is set to Y.</p>\n\n<p><span class=\"image-wrap\" style=\"\"><img src=\"https://issues.apache.org/jira/secure/attachment/12957686/12957686_XP91JuD048Nl_8h9NZpH01QZJMfCLewjfd2eQNfOsR6GuApPNV.png\" height=\"132\" width=\"1199\" style=\"border: 0px solid black\" /></span>  </p>\n\n<p>The test above does not seem to simulate the original issue, which happens inside the instance of leader latch.</p>\n\n<p>Yes, it is not a big deal, because it is eventually consistent. Moreover, usually, it does not happen. We observe this issue when a host where the process is running, is under load.</p>\n\n<p>Although it is just a matter of a few extra requests to be sent by a leader latch instance while stabilizing its internal state, it becomes quite noisy in a situation when there are a lot of latches per a connection, and together with a couple of tree cache instances can simply cause a big hit on request queue. </p>\n\n<p>I think that this is a minor bug, and it just makes thing noisier when the connection is not stable. </p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773222","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773222","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773222,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T20:37:25Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>I'm not sure how to make it less noisy without compromising consistency. ZK does not give us a lot of options API-wise.</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604763806","html_url":"https://github.com/apache/curator/issues/964#issuecomment-2604763806","issue_url":"https://api.github.com/repos/apache/curator/issues/964","id":2604763806,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NjM4MDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T02:34:07Z","updated_at":"2025-01-21T13:38:29Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>Please retest this with branch <a href=\"https://issues.apache.org/jira/browse/CURATOR-498\" title=\"Protected Mode creation can mistake closing session&#39;s node causing problems for many recipes such as LeaderLatch\" class=\"issue-link\" data-issue-key=\"CURATOR-498\"><del>CURATOR-498</del></a> (or master after that's merged).</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604763806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/460894516","html_url":"https://github.com/apache/curator/pull/303#issuecomment-460894516","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":460894516,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDg5NDUxNg==","user":{"login":"cammckenzie","id":7763121,"node_id":"MDQ6VXNlcjc3NjMxMjE=","avatar_url":"https://avatars.githubusercontent.com/u/7763121?v=4","gravatar_id":"","url":"https://api.github.com/users/cammckenzie","html_url":"https://github.com/cammckenzie","followers_url":"https://api.github.com/users/cammckenzie/followers","following_url":"https://api.github.com/users/cammckenzie/following{/other_user}","gists_url":"https://api.github.com/users/cammckenzie/gists{/gist_id}","starred_url":"https://api.github.com/users/cammckenzie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cammckenzie/subscriptions","organizations_url":"https://api.github.com/users/cammckenzie/orgs","repos_url":"https://api.github.com/users/cammckenzie/repos","events_url":"https://api.github.com/users/cammckenzie/events{/privacy}","received_events_url":"https://api.github.com/users/cammckenzie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T04:05:47Z","updated_at":"2019-02-06T04:05:47Z","author_association":"CONTRIBUTOR","body":"@Randgalt the changes seem OK, but the tests for various things are now failing. Discovery for example:\r\n\r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] Running org.apache.curator.x.discovery.server.jetty_jersey.TestMapsWithJersey\r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.391 s <<< FAILURE! - in org.apache.curator.x.discovery.server.jetty_jersey.TestMapsWithJersey\r\n[ERROR] testRegisterService(org.apache.curator.x.discovery.server.jetty_jersey.TestMapsWithJersey)  Time elapsed: 0.349 s  <<< FAILURE!\r\ncom.sun.jersey.api.client.UniformInterfaceException: PUT http://localhost:42063/v1/service/test/b290e974-b95c-486a-9cf9-487177b19b1f returned a response status of 404 Not Found\r\n\tat org.apache.curator.x.discovery.server.jetty_jersey.TestMapsWithJersey.testRegisterService(TestMapsWithJersey.java:136)\r\n\r\n[INFO] Running org.apache.curator.x.discovery.server.jetty_jersey.TestObjectPayloadWithJersey\r\n[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.363 s <<< FAILURE! - in org.apache.curator.x.discovery.server.jetty_jersey.TestObjectPayloadWithJersey\r\n[ERROR] testRegisterService(org.apache.curator.x.discovery.server.jetty_jersey.TestObjectPayloadWithJersey)  Time elapsed: 0.351 s  <<< FAILURE!\r\ncom.sun.jersey.api.client.UniformInterfaceException: PUT http://localhost:37965/v1/service/test/38a4bed0-50a5-43c9-b214-4eaa96757f45 returned a response status of 404 Not Found\r\n\tat org.apache.curator.x.discovery.server.jetty_jersey.TestObjectPayloadWithJersey.testRegisterService(TestObjectPayloadWithJersey.java:134)\r\n\r\n[INFO] Running org.apache.curator.x.discovery.server.jetty_jersey.TestStringsWithJersey\r\n[ERROR] Tests run: 2, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 1.532 s <<< FAILURE! - in org.apache.curator.x.discovery.server.jetty_jersey.TestStringsWithJersey\r\n[ERROR] testEmptyServiceNames(org.apache.curator.x.discovery.server.jetty_jersey.TestStringsWithJersey)  Time elapsed: 0.14 s  <<< FAILURE!\r\ncom.sun.jersey.api.client.UniformInterfaceException: GET http://localhost:36037/v1/service returned a response status of 404 Not Found\r\n\tat org.apache.curator.x.discovery.server.jetty_jersey.TestStringsWithJersey.testEmptyServiceNames(TestStringsWithJersey.java:164)\r\n\r\n[ERROR] testRegisterService(org.apache.curator.x.discovery.server.jetty_jersey.TestStringsWithJersey)  Time elapsed: 0.238 s  <<< FAILURE!\r\ncom.sun.jersey.api.client.UniformInterfaceException: PUT http://localhost:45169/v1/service/test/7fc15020-0c05-47d3-91a7-a6788442caf9 returned a response status of 404 Not Found\r\n\tat org.apache.curator.x.discovery.server.jetty_jersey.TestStringsWithJersey.testRegisterService(TestStringsWithJersey.java:130)\r\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/460894516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/461050525","html_url":"https://github.com/apache/curator/pull/303#issuecomment-461050525","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":461050525,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTA1MDUyNQ==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T14:51:10Z","updated_at":"2019-02-06T16:00:00Z","author_association":"MEMBER","body":"@cammckenzie Jenkins tests are passing. Those tests also passed on my machine. However, I'll run a few more times to make sure. (e.g. https://builds.apache.org/job/Curator/99/)\r\n\r\nAlso, @cammckenzie if your testing machine is taxed the tests will fail. You can set `timing-multiple` and `timing-waiting-multiple` to work around this. e.g. the Jenkins job uses \r\n\r\n```\r\nmvn -Dtiming-multiple=2 -Dtiming-waiting-multiple=5 test\r\n```","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/461050525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773227","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773227","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773227,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMjc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T16:15:11Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\" class=\"user-hover\" rel=\"yuri.tceretian\">Yuri Tceretian</a>: I've had an idea for a while of a circuit breaker style <tt>ConnectionStateListener</tt>. It would proxy any ConnectionStateListeners used by Curator recipe/classes such that when the connection is lost the circuit would open for a period of time and, while open, ignore any changes in state. After the time period expires the circuit would close and send whatever the current connection state is. This way, if the connection is going up/down/up/down/up/down, the application would only see the first down and then N ms later hopefully the connection is repaired and the application would only see the reconnection.</p>\n\n<p>Thoughts?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773230","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773230","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773230,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T16:46:05Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yuri.tceretian\">yuri.tceretian</a>:</i>\n<p>I like the idea very much! It can be configurable, and probably with some random jitter (also configurable). Therefore, If a host had intermittent connection issues, applications running on that host do not hit the ZK simultaneously.</p>\n\n<p> </p>\n\n<p>Regarding the issue, I wonder if it is possible to do the following without hurting consistency:</p>\n<ul>\n\t<li>add a boolean field that is set in `reset` method and reset in the callback that is called after a node is created.</li>\n\t<li>in the method checkLeadership, when the current state is null, call reset if the flag is reset.</li>\n</ul>\n","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773234","html_url":"https://github.com/apache/curator/issues/1024#issuecomment-2604773234","issue_url":"https://api.github.com/repos/apache/curator/issues/1024","id":2604773234,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzMyMzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T16:51:41Z","updated_at":"2025-01-21T13:42:27Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p><a href=\"https://issues.apache.org/jira/browse/CURATOR-505\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/CURATOR-505</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/461108500","html_url":"https://github.com/apache/curator/pull/303#issuecomment-461108500","issue_url":"https://api.github.com/repos/apache/curator/issues/303","id":461108500,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTEwODUwMA==","user":{"login":"Randgalt","id":264818,"node_id":"MDQ6VXNlcjI2NDgxOA==","avatar_url":"https://avatars.githubusercontent.com/u/264818?v=4","gravatar_id":"","url":"https://api.github.com/users/Randgalt","html_url":"https://github.com/Randgalt","followers_url":"https://api.github.com/users/Randgalt/followers","following_url":"https://api.github.com/users/Randgalt/following{/other_user}","gists_url":"https://api.github.com/users/Randgalt/gists{/gist_id}","starred_url":"https://api.github.com/users/Randgalt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Randgalt/subscriptions","organizations_url":"https://api.github.com/users/Randgalt/orgs","repos_url":"https://api.github.com/users/Randgalt/repos","events_url":"https://api.github.com/users/Randgalt/events{/privacy}","received_events_url":"https://api.github.com/users/Randgalt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T17:19:59Z","updated_at":"2019-02-06T22:19:30Z","author_association":"MEMBER","body":"FYI (cc @cammckenzie @shayshim) tests just passed again on Jenkins: https://builds.apache.org/job/Curator/101/\r\n\r\nAnd once more:\r\nhttps://builds.apache.org/job/Curator/102/","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/461108500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773443","html_url":"https://github.com/apache/curator/issues/1025#issuecomment-2604773443","issue_url":"https://api.github.com/repos/apache/curator/issues/1025","id":2604773443,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzM0NDM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T19:43:29Z","updated_at":"2025-01-21T13:42:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=randgalt\">randgalt</a>:</i>\n<p>cc <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jhalterman\" class=\"user-hover\" rel=\"jhalterman\">Jonathan Halterman</a></p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773446","html_url":"https://github.com/apache/curator/issues/1025#issuecomment-2604773446","issue_url":"https://api.github.com/repos/apache/curator/issues/1025","id":2604773446,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MDQ3NzM0NDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T20:04:15Z","updated_at":"2025-01-21T13:42:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jhalterman\">jhalterman</a>:</i>\n<p>The thing I'm most interested to guard against is any flood of connect/reconnect attempts. I'm not sure if that would be related to this issue, but I imagine that could also be solved by backoff retries with jitter?</p>","reactions":{"url":"https://api.github.com/repos/apache/curator/issues/comments/2604773446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]