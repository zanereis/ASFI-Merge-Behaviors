[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129273274","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1129273274","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1129273274,"node_id":"IC_kwDOCW7NX85DT1e6","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T20:10:51Z","updated_at":"2022-05-17T20:10:51Z","author_association":"CONTRIBUTOR","body":"The test issue looks like a github problem. I tried to cancel, but it looks like I can't right now. I'll check back in a few hours. It should time out.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129273274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129280496","html_url":"https://github.com/apache/iceberg/pull/4784#issuecomment-1129280496","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4784","id":1129280496,"node_id":"IC_kwDOCW7NX85DT3Pw","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T20:19:28Z","updated_at":"2022-05-17T20:19:28Z","author_association":"CONTRIBUTOR","body":"I just merged #4767 which had a little logic around 3.7, which you might want to remove as part of this PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129280496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129292346","html_url":"https://github.com/apache/iceberg/pull/4784#issuecomment-1129292346","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4784","id":1129292346,"node_id":"IC_kwDOCW7NX85DT6I6","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T20:33:51Z","updated_at":"2022-05-17T20:33:51Z","author_association":"CONTRIBUTOR","body":"I think this is ok. Security support will be dropped for 3.7 within a year which means in a few months, everyone will begin scrambling to get everything off of 3.7 anyway.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129292346/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129353466","html_url":"https://github.com/apache/iceberg/pull/4167#issuecomment-1129353466","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4167","id":1129353466,"node_id":"IC_kwDOCW7NX85DUJD6","user":{"login":"fqaiser94","id":20507243,"node_id":"MDQ6VXNlcjIwNTA3MjQz","avatar_url":"https://avatars.githubusercontent.com/u/20507243?v=4","gravatar_id":"","url":"https://api.github.com/users/fqaiser94","html_url":"https://github.com/fqaiser94","followers_url":"https://api.github.com/users/fqaiser94/followers","following_url":"https://api.github.com/users/fqaiser94/following{/other_user}","gists_url":"https://api.github.com/users/fqaiser94/gists{/gist_id}","starred_url":"https://api.github.com/users/fqaiser94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fqaiser94/subscriptions","organizations_url":"https://api.github.com/users/fqaiser94/orgs","repos_url":"https://api.github.com/users/fqaiser94/repos","events_url":"https://api.github.com/users/fqaiser94/events{/privacy}","received_events_url":"https://api.github.com/users/fqaiser94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T21:54:55Z","updated_at":"2022-05-17T21:54:55Z","author_association":"CONTRIBUTOR","body":"I can pick this up over the weekend if @kbendick doesn't get to it before then. \r\nI'll have to create a separate PR for it though. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129353466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129389860","html_url":"https://github.com/apache/iceberg/pull/4795#issuecomment-1129389860","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4795","id":1129389860,"node_id":"IC_kwDOCW7NX85DUR8k","user":{"login":"CodingCat","id":678008,"node_id":"MDQ6VXNlcjY3ODAwOA==","avatar_url":"https://avatars.githubusercontent.com/u/678008?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingCat","html_url":"https://github.com/CodingCat","followers_url":"https://api.github.com/users/CodingCat/followers","following_url":"https://api.github.com/users/CodingCat/following{/other_user}","gists_url":"https://api.github.com/users/CodingCat/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingCat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingCat/subscriptions","organizations_url":"https://api.github.com/users/CodingCat/orgs","repos_url":"https://api.github.com/users/CodingCat/repos","events_url":"https://api.github.com/users/CodingCat/events{/privacy}","received_events_url":"https://api.github.com/users/CodingCat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T22:38:52Z","updated_at":"2022-05-17T22:38:52Z","author_association":"CONTRIBUTOR","body":"@kbendick, @jackye1995, @nastra, @aokolnychyi, @danielcweeks, @rdblue  would you mind giving a review? thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129389860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129396070","html_url":"https://github.com/apache/iceberg/pull/4011#issuecomment-1129396070","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4011","id":1129396070,"node_id":"IC_kwDOCW7NX85DUTdm","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T22:51:53Z","updated_at":"2022-05-17T22:51:53Z","author_association":"CONTRIBUTOR","body":"Since all that was left were nits, I went ahead and merged this. Thanks for the contribution, @SinghAsDev!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129396070/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129421338","html_url":"https://github.com/apache/iceberg/pull/4167#issuecomment-1129421338","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4167","id":1129421338,"node_id":"IC_kwDOCW7NX85DUZoa","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T23:39:36Z","updated_at":"2022-05-17T23:40:03Z","author_association":"CONTRIBUTOR","body":"I can fix the conflicts now. Thank you though @fqaiser94. And thank you for drawing attention to this PR again.\r\n\r\nI was out of town for a wedding and didn't see these comments as I've been catching up So we'll get this in right away.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129421338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129425769","html_url":"https://github.com/apache/iceberg/pull/4774#issuecomment-1129425769","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4774","id":1129425769,"node_id":"IC_kwDOCW7NX85DUatp","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T23:50:14Z","updated_at":"2022-05-17T23:50:14Z","author_association":"CONTRIBUTOR","body":"Thanks for opening this PR and for linking the PR in the docs repo @caneGuy! I have only recently discovered StarRocks but it is very exciting. I look forward to the chance to learn more about it and hopefully use it.\r\n\r\nIn full transparency, I can't recall if the PR is supposed to be made here or in iceberg-docs, but can point out the person who _will_ be more sure 👍 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129425769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129426083","html_url":"https://github.com/apache/iceberg/pull/4774#issuecomment-1129426083","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4774","id":1129426083,"node_id":"IC_kwDOCW7NX85DUayj","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-17T23:50:59Z","updated_at":"2022-05-17T23:50:59Z","author_association":"CONTRIBUTOR","body":"cc @samredai for visibility on including a link to external documentation for an additional query engine. There's also a PR open in iceberg-docs already linked here 👍 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129426083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129434763","html_url":"https://github.com/apache/iceberg/pull/4796#issuecomment-1129434763","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4796","id":1129434763,"node_id":"IC_kwDOCW7NX85DUc6L","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T00:09:18Z","updated_at":"2022-05-18T00:13:21Z","author_association":"CONTRIBUTOR","body":"Here's the breaking output from my local\r\n```\r\n ./gradlew revapi\r\n> Task :iceberg-api:revapi FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':iceberg-api:revapi'.\r\n> There were Java public API/ABI breaks reported by revapi:\r\n\r\n  java.method.addedToInterface: Method was added to an interface.\r\n\r\n  old: <none>\r\n  new: method org.apache.iceberg.ManageSnapshots org.apache.iceberg.ManageSnapshots::someBreakingChange(java.lang.String, long)\r\n\r\n  SOURCE: BREAKING, BINARY: NON_BREAKING, SEMANTIC: POTENTIALLY_BREAKING\r\n\r\n  From old archive: <none>\r\n  From new archive: iceberg-api-0.14.0-SNAPSHOT.jar\r\n\r\n  If this is an acceptable break that will not harm your users, you can ignore it in future runs like so for:\r\n\r\n    * Just this break:\r\n        ./gradlew :iceberg-api:revapiAcceptBreak --justification \"{why this break is ok}\" \\\r\n          --code \"java.method.addedToInterface\" \\\r\n          --new \"method org.apache.iceberg.ManageSnapshots org.apache.iceberg.ManageSnapshots::someBreakingChange(java.lang.String, long)\"\r\n    * All breaks in this project:\r\n        ./gradlew :iceberg-api:revapiAcceptAllBreaks --justification \"{why this break is ok}\"\r\n    * All breaks in all projects:\r\n        ./gradlew revapiAcceptAllBreaks --justification \"{why this break is ok}\"\r\n  ----------------------------------------------------------------------------------------------------\r\n\r\n\r\n* Try:\r\n> Run with --stacktrace option to get the stack trace.\r\n> Run with --info or --debug option to get more log output.\r\n> Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 6s\r\n6 actionable tasks: 4 executed, 2 up-to-date\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129434763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129443952","html_url":"https://github.com/apache/iceberg/pull/4797#issuecomment-1129443952","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4797","id":1129443952,"node_id":"IC_kwDOCW7NX85DUfJw","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T00:27:58Z","updated_at":"2022-05-18T00:27:58Z","author_association":"CONTRIBUTOR","body":"Here's some example breaking output:\r\n```\r\n linters run-test: commands[3] | pylint src tests\r\n  ************* Module iceberg.types\r\n  src/iceberg/types.py:206:4: W0231: __init__ method from base class 'IcebergType' is not called (super-init-not-called)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129443952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129452768","html_url":"https://github.com/apache/iceberg/pull/4796#issuecomment-1129452768","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4796","id":1129452768,"node_id":"IC_kwDOCW7NX85DUhTg","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T00:47:06Z","updated_at":"2022-05-18T00:47:06Z","author_association":"CONTRIBUTOR","body":"So it doesn't seem to be catching the failure, but the command ` ./gradlew -DflinkVersions=1.13,1.14,1.15 -DsparkVersions=2.4,3.0,3.1,3.2 -DhiveVersions=2,3 build -x test -x javadoc -x integrationTes` when run locally _does_ cause a failure. But it passes in CI.\r\n\r\nMaybe it's due to caching in a previous step? I'm going to just add a workflow for revapi itself in the meantime.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129452768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129453182","html_url":"https://github.com/apache/iceberg/pull/4796#issuecomment-1129453182","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4796","id":1129453182,"node_id":"IC_kwDOCW7NX85DUhZ-","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T00:47:51Z","updated_at":"2022-05-18T00:47:51Z","author_association":"CONTRIBUTOR","body":"Looking at the Java CI, I see\r\n```\r\n> Task :iceberg-api:revapiAnalyze SKIPPED\r\n> Task :iceberg-api:revapi SKIPPED\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129453182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129459332","html_url":"https://github.com/apache/iceberg/pull/4777#issuecomment-1129459332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4777","id":1129459332,"node_id":"IC_kwDOCW7NX85DUi6E","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T00:59:32Z","updated_at":"2022-05-18T00:59:32Z","author_association":"CONTRIBUTOR","body":"How long have we had this deprecated @ajantha-bhat? Are you aware of any compatibility guarantees or any timeline we might be bound to before fully removnig this?\r\n\r\nIt looks as though this has been deprecated for a while, as the old interface is simply written in terms of the new one. But we don't want to break compatibility relatively quickly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129459332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129496730","html_url":"https://github.com/apache/iceberg/pull/4777#issuecomment-1129496730","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4777","id":1129496730,"node_id":"IC_kwDOCW7NX85DUsCa","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T02:16:53Z","updated_at":"2022-05-18T02:16:53Z","author_association":"MEMBER","body":"> How long have we had this deprecated @ajantha-bhat? Are you aware of any compatibility guarantees or any timeline we might be bound to before fully removnig this?\r\n\r\nI am aware that we deprecate things and wait for another minor release (like things deprecated in 12.x can be removed in 13.x)\r\n\r\nThis one was deprecated in FEB 2020. So, I think we can safely remove it as we have alternate implementation.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129496730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129524702","html_url":"https://github.com/apache/iceberg/pull/4629#issuecomment-1129524702","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4629","id":1129524702,"node_id":"IC_kwDOCW7NX85DUy3e","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T03:20:45Z","updated_at":"2022-05-18T03:20:55Z","author_association":"COLLABORATOR","body":"@aokolnychyi when you have a chance, this now correctly utilizes 'content' field of Manifest table during the computation of valid files.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129524702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129530885","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1129530885","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1129530885,"node_id":"IC_kwDOCW7NX85DU0YF","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T03:35:16Z","updated_at":"2022-05-18T03:41:01Z","author_association":"CONTRIBUTOR","body":"I think this is an interesting idea. Let me summarize how I understand it.\r\n\r\nRight now, we compute a diff between the reachability sets before and after snapshot expiry. Whenever we build the reachability set before the expiry, we read manifests of all snapshots and that seems suboptimal. The assumption is that it is sufficient to just build the reachability set for expired snapshots and compare that to the reachability set after the snapshot expiry. Did I get that right?\r\n\r\nI guess one way to implement (and I believe this is what this PR tries to do) is to load the `FILES` metadata table for each expired snapshot and union `DataFrame`s to produce the reachability set. One potential problem with that is that we will load the manifest list for every expired snapshot on the driver, which can become a bottleneck if we expire a lot of snapshots. I've seen such cases.\r\n\r\nAn alternative idea is to add some sort of `snapshot-ids` option to `ALL_MANIFESTS` metadata table and read only manifest lists for snapshots whose IDs are in that list. That way, we won't read manifest lists and manifests added after the last expired snapshot. That's already an optimization. However, we can go even further and remove still live manifests before opening them, which could give even a bigger performance boost. Suppose an expired snapshot references `manifest-1` but we know it is still live. In that case, we can skip opening it up.\r\n\r\nDoes that seem reasonable?\r\n\r\n@szehon-ho @RussellSpitzer @flyrain @rdblue @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129530885/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129554958","html_url":"https://github.com/apache/iceberg/pull/4011#issuecomment-1129554958","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4011","id":1129554958,"node_id":"IC_kwDOCW7NX85DU6QO","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T04:31:29Z","updated_at":"2022-05-18T04:31:29Z","author_association":"CONTRIBUTOR","body":"Thanks, @SinghAsDev for the contribution - this is a really important feature for the EMR customers.\r\nThanks, @rdblue and @kbendick  for the reviews!\r\n\r\nI'll shall address the nitpicks and the GlueCatalog test improvements in a follow-up PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129554958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129573060","html_url":"https://github.com/apache/iceberg/pull/4683#issuecomment-1129573060","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4683","id":1129573060,"node_id":"IC_kwDOCW7NX85DU-rE","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T05:10:48Z","updated_at":"2022-05-26T00:05:21Z","author_association":"CONTRIBUTOR","body":"Thanks @aokolnychyi for the review.\r\nHere are benchmarks of equality deletes and position deletes for a 10M-rows data file with different percentage(from 0 to 100%) of deleted rows.\r\nThe perf of read without is_deleted column are the same with the read with \"_deleted = false\", which is expected. The yellow line is for read of deleted rows. It outputs more and more rows when percentage of deletes increases. The perf chart also makes sense, even though there are room to optimize when there are just a few rows deleted.\r\n\r\n<img width=\"981\" alt=\"Screen Shot 2022-05-25 at 4 59 33 PM\" src=\"https://user-images.githubusercontent.com/1322359/170388551-803ac313-bed2-474f-9364-a252bf3afa6a.png\">\r\n\r\n<img width=\"981\" alt=\"Screen Shot 2022-05-25 at 5 01 12 PM\" src=\"https://user-images.githubusercontent.com/1322359/170388556-b6428abc-281c-4255-ad3f-f4ba09daf520.png\">\r\n\r\nUpdated the graph with proper scale of x axis, per @RussellSpitzer's suggestion\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129573060/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129596652","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1129596652","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1129596652,"node_id":"IC_kwDOCW7NX85DVEbs","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T05:52:52Z","updated_at":"2022-05-18T05:52:52Z","author_association":"CONTRIBUTOR","body":"Yes the job is timing out but it's unclear why because the run itself doesn't show any output. Locally it helped to increase the Heap size for Gradle (since the build didn't progress as well locally)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129596652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129599484","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1129599484","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1129599484,"node_id":"IC_kwDOCW7NX85DVFH8","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T05:57:04Z","updated_at":"2022-05-18T05:57:04Z","author_association":"CONTRIBUTOR","body":"So GH Actions use the settings in master for security purposes.\r\n\r\nMayhe merging in the heap increase _first_ will help? I doubt the tests are running with the heap increase if it’s in this PR. Just a guess but the tests didn’t complete without increased heap for me as well.\r\n\r\nAlso, since this is a release branch, feel free to make the heap slightly bigger and/or tune the forked JVM’s GC settings in the settings.gradle (or wherever).\r\n\r\nBut I think running with the heap settings already merged in will help the most. I think you can try it in your fork if you run the tests there.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129599484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129601131","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1129601131","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1129601131,"node_id":"IC_kwDOCW7NX85DVFhr","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T05:59:41Z","updated_at":"2022-05-18T06:01:53Z","author_association":"CONTRIBUTOR","body":"Oh and the other thing would be to add class unloading into the test JVM settings. I helped tune the JVM for CI in Spark and class unloading, a fixed MaxMetaSpaceSize (to force class unloading), and somewhat larger heaps helped quite a bit for a situation that had gotten really out of hand.\r\n\r\nAlso my only meaningful contribution to the Spark repo and the credit got misattributed as I never added that email to my GitHub 😂\r\n\r\nBut class unloading really helps due to Flink’s inverted class loader. And out JVM prior to this change (and even still really) is very small in my opinion.\r\n\r\nAgain, since this is a release branch and not one we’ll work off of ever again very likely, feel free to be liberal in updating the JVM for test purposes! They just need to run enough to make the release!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129601131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129604491","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1129604491","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1129604491,"node_id":"IC_kwDOCW7NX85DVGWL","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T06:04:35Z","updated_at":"2022-05-18T06:04:35Z","author_association":"CONTRIBUTOR","body":"The only other issue I can think of is a GitHub issue with the JVM cache as the problem is sticky for Flink 1.13.\r\n\r\nBut the most recent attempt _did_ run somewhat so I don’t think that’s it. I think it’s just poor memory utilization / availability combined with some somewhat heavy Flink SQL upsert tests. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129604491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129725672","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1129725672","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1129725672,"node_id":"IC_kwDOCW7NX85DVj7o","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T08:31:10Z","updated_at":"2022-05-18T08:32:56Z","author_association":"COLLABORATOR","body":"Thanks for this complete thought, it makes sense to me.  Yea I should have thought about the idea of passing a list of snapshot-ids as options, this would probably be a cleaner way to achieve this filtering to get expiredManifests.\r\n\r\nAnd I like the second optimization as well (expiredManifests.except(allManifests)).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129725672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129762992","html_url":"https://github.com/apache/iceberg/pull/4774#issuecomment-1129762992","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4774","id":1129762992,"node_id":"IC_kwDOCW7NX85DVtCw","user":{"login":"caneGuy","id":26762018,"node_id":"MDQ6VXNlcjI2NzYyMDE4","avatar_url":"https://avatars.githubusercontent.com/u/26762018?v=4","gravatar_id":"","url":"https://api.github.com/users/caneGuy","html_url":"https://github.com/caneGuy","followers_url":"https://api.github.com/users/caneGuy/followers","following_url":"https://api.github.com/users/caneGuy/following{/other_user}","gists_url":"https://api.github.com/users/caneGuy/gists{/gist_id}","starred_url":"https://api.github.com/users/caneGuy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caneGuy/subscriptions","organizations_url":"https://api.github.com/users/caneGuy/orgs","repos_url":"https://api.github.com/users/caneGuy/repos","events_url":"https://api.github.com/users/caneGuy/events{/privacy}","received_events_url":"https://api.github.com/users/caneGuy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T09:08:25Z","updated_at":"2022-05-18T09:08:25Z","author_association":"CONTRIBUTOR","body":"Thanks too much @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129762992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129840683","html_url":"https://github.com/apache/iceberg/pull/4011#issuecomment-1129840683","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4011","id":1129840683,"node_id":"IC_kwDOCW7NX85DWAAr","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T10:28:00Z","updated_at":"2022-05-18T10:28:00Z","author_association":"CONTRIBUTOR","body":"> Do we have any worries about catalog defaults accidentally affecting a table that a user didn't intend it to? I know some properties have been called out as possibly better suited as per-job definitions (like write.upsert.enabled for Flink Iceberg Sink). \r\n> \r\n> This might be a non-concern, particularly if it's well documented, but we might want to at least log the property keys for which we pulled a default value from the catalog level?\r\n> \r\n> Would love to hear from others if they have any similar concerns, and if there's any proposed solution.\r\n\r\n@kbendick I don't think we need to worry as only the catalog properties with a certain prefix are considered, +1 for logging.\r\n\r\nhttps://github.com/apache/iceberg/blob/13b1a737da45b13beffb2c7b112def188e4e1c10/core/src/main/java/org/apache/iceberg/BaseMetastoreCatalog.java#L226-L233","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129840683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129858628","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1129858628","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1129858628,"node_id":"IC_kwDOCW7NX85DWEZE","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T10:49:11Z","updated_at":"2022-05-18T11:54:44Z","author_association":"CONTRIBUTOR","body":"I think I found the issue (which can easily be debugged locally by adding `--no-parallel --debug` to get `./gradlew -DsparkVersions= -DhiveVersions= -DflinkVersions=1.13 :iceberg-flink:iceberg-flink-1.13:check :iceberg-flink:iceberg-flink-runtime-1.13:check -Pquick=true -x javadoc --no-parallel --debug`). \r\nIt looks like something got messed up during conflict resolution and `BaseDeltaTaskWriter#asStructLike(..)` was accidentally returning `keyWrapper.wrap(data)` and not `wrapper.wrap(data)`.\r\nThis then resulted in `TestChangeLogTable#testChangeLogOnDataKey()` to run indefinitely in a retry-loop because there was an underlying exception. \r\nFor the future I think it would be good to have a timeout on tests as issues like these are quite difficult to debug on CI without modifying how the test is being executed (e.g. by adding `--debug` to the gradle task and such)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129858628/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129871110","html_url":"https://github.com/apache/iceberg/pull/4797#issuecomment-1129871110","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4797","id":1129871110,"node_id":"IC_kwDOCW7NX85DWHcG","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T11:04:12Z","updated_at":"2022-05-18T11:04:12Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this @kbendick","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129871110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129919271","html_url":"https://github.com/apache/iceberg/issues/3117#issuecomment-1129919271","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3117","id":1129919271,"node_id":"IC_kwDOCW7NX85DWTMn","user":{"login":"bhanuunrivalled","id":4332242,"node_id":"MDQ6VXNlcjQzMzIyNDI=","avatar_url":"https://avatars.githubusercontent.com/u/4332242?v=4","gravatar_id":"","url":"https://api.github.com/users/bhanuunrivalled","html_url":"https://github.com/bhanuunrivalled","followers_url":"https://api.github.com/users/bhanuunrivalled/followers","following_url":"https://api.github.com/users/bhanuunrivalled/following{/other_user}","gists_url":"https://api.github.com/users/bhanuunrivalled/gists{/gist_id}","starred_url":"https://api.github.com/users/bhanuunrivalled/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhanuunrivalled/subscriptions","organizations_url":"https://api.github.com/users/bhanuunrivalled/orgs","repos_url":"https://api.github.com/users/bhanuunrivalled/repos","events_url":"https://api.github.com/users/bhanuunrivalled/events{/privacy}","received_events_url":"https://api.github.com/users/bhanuunrivalled/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T11:59:58Z","updated_at":"2022-05-18T11:59:58Z","author_association":"NONE","body":"@xinbinhuang  Thanks , I think this will work for us as I see\r\n\r\n  ```\r\npublic static Configuration clusterHadoopConf() {\r\n    return HadoopUtils.getHadoopConfiguration(GlobalConfiguration.loadConfiguration());\r\n```\r\n\r\nis removed\r\n\r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129919271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129919526","html_url":"https://github.com/apache/iceberg/pull/4784#issuecomment-1129919526","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4784","id":1129919526,"node_id":"IC_kwDOCW7NX85DWTQm","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T12:00:17Z","updated_at":"2022-05-18T12:00:17Z","author_association":"CONTRIBUTOR","body":"Thanks @danielcweeks for noticing. I've just updated the PR and removed all the Python 3.7 related stuff (including singledispatch). Less is more 💪🏻 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129919526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129920145","html_url":"https://github.com/apache/iceberg/pull/4784#issuecomment-1129920145","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4784","id":1129920145,"node_id":"IC_kwDOCW7NX85DWTaR","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T12:01:03Z","updated_at":"2022-05-18T12:01:03Z","author_association":"CONTRIBUTOR","body":"@samredai I agree, and once all the Debian/Ubuntu-based images start shipping 3.8, I'll go very fast :) Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1129920145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130019836","html_url":"https://github.com/apache/iceberg/issues/3227#issuecomment-1130019836","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3227","id":1130019836,"node_id":"IC_kwDOCW7NX85DWrv8","user":{"login":"dhruv-pratap","id":11399509,"node_id":"MDQ6VXNlcjExMzk5NTA5","avatar_url":"https://avatars.githubusercontent.com/u/11399509?v=4","gravatar_id":"","url":"https://api.github.com/users/dhruv-pratap","html_url":"https://github.com/dhruv-pratap","followers_url":"https://api.github.com/users/dhruv-pratap/followers","following_url":"https://api.github.com/users/dhruv-pratap/following{/other_user}","gists_url":"https://api.github.com/users/dhruv-pratap/gists{/gist_id}","starred_url":"https://api.github.com/users/dhruv-pratap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhruv-pratap/subscriptions","organizations_url":"https://api.github.com/users/dhruv-pratap/orgs","repos_url":"https://api.github.com/users/dhruv-pratap/repos","events_url":"https://api.github.com/users/dhruv-pratap/events{/privacy}","received_events_url":"https://api.github.com/users/dhruv-pratap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T13:29:19Z","updated_at":"2022-05-18T13:29:32Z","author_association":"CONTRIBUTOR","body":"@xinbinhuang I have some bandwidth available right now and I was thinking of picking up this issue. Are you cool if I can get going on this? CC @jun-he ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130019836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130024805","html_url":"https://github.com/apache/iceberg/pull/4706#issuecomment-1130024805","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4706","id":1130024805,"node_id":"IC_kwDOCW7NX85DWs9l","user":{"login":"dhruv-pratap","id":11399509,"node_id":"MDQ6VXNlcjExMzk5NTA5","avatar_url":"https://avatars.githubusercontent.com/u/11399509?v=4","gravatar_id":"","url":"https://api.github.com/users/dhruv-pratap","html_url":"https://github.com/dhruv-pratap","followers_url":"https://api.github.com/users/dhruv-pratap/followers","following_url":"https://api.github.com/users/dhruv-pratap/following{/other_user}","gists_url":"https://api.github.com/users/dhruv-pratap/gists{/gist_id}","starred_url":"https://api.github.com/users/dhruv-pratap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhruv-pratap/subscriptions","organizations_url":"https://api.github.com/users/dhruv-pratap/orgs","repos_url":"https://api.github.com/users/dhruv-pratap/repos","events_url":"https://api.github.com/users/dhruv-pratap/events{/privacy}","received_events_url":"https://api.github.com/users/dhruv-pratap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T13:33:44Z","updated_at":"2022-05-18T13:33:44Z","author_association":"CONTRIBUTOR","body":"@rdblue We have addressed and resolved all threads on this PR. If you are cool can we please merge this to unblock other catalog implementations? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130024805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130071654","html_url":"https://github.com/apache/iceberg/issues/4805#issuecomment-1130071654","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4805","id":1130071654,"node_id":"IC_kwDOCW7NX85DW4Zm","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T14:12:41Z","updated_at":"2022-05-18T14:12:41Z","author_association":"CONTRIBUTOR","body":"Hey @pvary , thanks for sharing this! We've landed on a structural theme recently and we're working towards getting all of the docs aligned for a consistent feel of \"where to find what\" if that makes sense. I've tried to summarize it in the [CONTRIBUTING.md](https://github.com/apache/iceberg-docs/blob/03d738472100f434094def2062527f1fb3f700a4/CONTRIBUTING.md) that's currently in PR [#75](https://github.com/apache/iceberg-docs/pull/75) against the iceberg-docs repo.\r\n\r\nBased on that, here's my feedback on the structure here:\r\n- The \"Getting Started\" section here just jumps into a table checklist of what features are supported so at the end of the section, the user still isn't up and running. My suggestion would be to make a very simple docker based quickstart and append it to the quickstarts.md file that I have [here](https://github.com/apache/iceberg-docs/pull/75/files#diff-8218a73a9cf89fe3232fc3210e302a690c5074b7c1c5d0abf8a3329806ac42f8) in PR 75. You can then rename \"Getting Started\" here to something like \"Feature Support\" so that the table it contains makes sense.\r\n- I opened a draft PR #4801 yesterday to add a \"Configurations\" section to the docs that serves as a single page where every configuration/property setting is listed. The page will purely be a long list of various tables with property names, potential values, and a description. I've added the Hive/Hadoop related stuff there and if your \"Configuration\" section includes changes, I think they should be made on that single page and removed here. When relevant in the other pages here, you can link to that single top level \"Configurations\" page and use the #hadoop-configurations or #hive-configurations tags. That way someone going to `/docs/latest/configurations` can do a quick CMD+F and find a Hive property they're looking for.\r\n- That leaves the **Type Compatibility**, **DDL**,  and **DML** content which I think all are fitting to place in a Hive docs section (although personally I would put Type Compatibility at the end). With respect to the differences between Hive 2/3/4.0.0-alpha-1, I'm hoping there's some way to consolidate them into a single feature list, and add warning boxes such as \"This feature is only available in Hive 4.0.0-alpha-1\". To me that feels much better than having a \"CREATE TABLE\" section for each version.\r\n\r\nLet me know what you think!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130071654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130097510","html_url":"https://github.com/apache/iceberg/issues/4805#issuecomment-1130097510","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4805","id":1130097510,"node_id":"IC_kwDOCW7NX85DW-tm","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T14:34:06Z","updated_at":"2022-05-18T14:34:50Z","author_association":"CONTRIBUTOR","body":"cc: @krishahn","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130097510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130142615","html_url":"https://github.com/apache/iceberg/issues/3227#issuecomment-1130142615","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3227","id":1130142615,"node_id":"IC_kwDOCW7NX85DXJuX","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T15:11:43Z","updated_at":"2022-05-18T15:11:43Z","author_association":"CONTRIBUTOR","body":"@dhruv-pratap feel free to pick it up!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130142615/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130164740","html_url":"https://github.com/apache/iceberg/pull/4803#issuecomment-1130164740","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4803","id":1130164740,"node_id":"IC_kwDOCW7NX85DXPIE","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T15:28:12Z","updated_at":"2022-05-18T15:28:12Z","author_association":"CONTRIBUTOR","body":"Thanks, @rajarshisarkar!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130164740/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130185141","html_url":"https://github.com/apache/iceberg/pull/4732#issuecomment-1130185141","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4732","id":1130185141,"node_id":"IC_kwDOCW7NX85DXUG1","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T15:43:20Z","updated_at":"2022-05-18T15:43:20Z","author_association":"CONTRIBUTOR","body":"@wmoustafa, @rzhang10, overall this looks fine to me. The only issue I have is that if we were to merge this now, we'd be updating a public API when there is no implementation behind it. I think we should hold off on merging this until it is time to expose the ability to set these.\r\n\r\nBefore we do this, there are related PRs that we can get done:\r\n* Add the JSON value parser\r\n* Add as much as possible to Parquet, Avro, and ORC readers, like being able to read with a fake map of default values.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130185141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130193088","html_url":"https://github.com/apache/iceberg/pull/4810#issuecomment-1130193088","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4810","id":1130193088,"node_id":"IC_kwDOCW7NX85DXWDA","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T15:50:34Z","updated_at":"2022-05-18T15:50:34Z","author_association":"MEMBER","body":"@karuppayya Could you please take a look?\r\n@flyrain This is the API we were discussing","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130193088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130207575","html_url":"https://github.com/apache/iceberg/pull/4622#issuecomment-1130207575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4622","id":1130207575,"node_id":"IC_kwDOCW7NX85DXZlX","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T16:03:50Z","updated_at":"2022-05-18T16:03:50Z","author_association":"CONTRIBUTOR","body":"Thanks, @moon-fall!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130207575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130222459","html_url":"https://github.com/apache/iceberg/pull/4537#issuecomment-1130222459","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4537","id":1130222459,"node_id":"IC_kwDOCW7NX85DXdN7","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T16:18:27Z","updated_at":"2022-05-18T16:18:27Z","author_association":"MEMBER","body":"AC","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130222459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130222468","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1130222468","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1130222468,"node_id":"IC_kwDOCW7NX85DXdOE","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T16:18:28Z","updated_at":"2022-05-18T16:18:28Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer, could you cross-check the idea as you worked on this part in the past?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130222468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130232555","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1130232555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1130232555,"node_id":"IC_kwDOCW7NX85DXfrr","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T16:28:39Z","updated_at":"2022-05-18T16:28:39Z","author_association":"CONTRIBUTOR","body":"I think this is a really good idea, and I also like Anton's idea to filter manifests that are still live from the removed snapshots as well. Basically, we should be filtering the tree at every level (snapshot/manifest-list, manifest, files) before moving on to the next one.\r\n\r\n1. Open the old metadata file and find snapshots that are no longer in the current metadata\r\n3. Create a DF of the `manifests` table from all the expired snapshots\r\n4. Create a DF of the `manifests` table from all the current snapshots\r\n5. Remove any manifests from the expired set that are currently in the table (all files are still referenced)\r\n6. Remove any manifests from the current set that have no EXISTING files (cannot contain old files). Optional because files removed and re-added would not be caught.\r\n7. Transform the expired manifests DF to expired data files by reading each manifest\r\n8. Transform the current manifests DF to current data files by reading each manifest\r\n9. Remove any manifests from the expired data file set that are in the current data files set\r\n\r\nDoes that sound right? We may not want to do #6, but there is an opportunity to cut down on the number of manifests we read there by looking at the manifest file metadata.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130232555/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130270256","html_url":"https://github.com/apache/iceberg/pull/4784#issuecomment-1130270256","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4784","id":1130270256,"node_id":"IC_kwDOCW7NX85DXo4w","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T17:09:58Z","updated_at":"2022-05-18T17:09:58Z","author_association":"CONTRIBUTOR","body":"Sounds like there's consensus around moving to 3.8. I'll merge this. Thanks, @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130270256/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130270966","html_url":"https://github.com/apache/iceberg/pull/4784#issuecomment-1130270966","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4784","id":1130270966,"node_id":"IC_kwDOCW7NX85DXpD2","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T17:10:43Z","updated_at":"2022-05-18T17:10:43Z","author_association":"CONTRIBUTOR","body":"Also, Dask requires 3.8+ so we're in good company.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130270966/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130275271","html_url":"https://github.com/apache/iceberg/pull/4745#issuecomment-1130275271","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4745","id":1130275271,"node_id":"IC_kwDOCW7NX85DXqHH","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T17:15:34Z","updated_at":"2022-05-18T17:15:34Z","author_association":"CONTRIBUTOR","body":"I think we want to follow up and implement @samredai's suggestion to add a pool type that controls this. We can do that in a follow-up, though. In the meantime, I'll merge this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130275271/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130276269","html_url":"https://github.com/apache/iceberg/pull/4745#issuecomment-1130276269","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4745","id":1130276269,"node_id":"IC_kwDOCW7NX85DXqWt","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T17:16:44Z","updated_at":"2022-05-18T17:16:44Z","author_association":"CONTRIBUTOR","body":"Thanks, @puchengy!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130276269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130287115","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1130287115","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1130287115,"node_id":"IC_kwDOCW7NX85DXtAL","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T17:24:32Z","updated_at":"2022-05-18T17:24:32Z","author_association":"CONTRIBUTOR","body":"@rdblue, yeah, that's what I am thinking too. Do you refer to point 5 or 6 as optional? I guess 5. The current code reads only live entries so filtering manifests without live files seems safe. What's the use case with re-added files? Won't that be covered too as the snapshot with re-added files will be also considered?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130287115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130293044","html_url":"https://github.com/apache/iceberg/pull/4745#issuecomment-1130293044","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4745","id":1130293044,"node_id":"IC_kwDOCW7NX85DXuc0","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T17:31:10Z","updated_at":"2022-05-18T17:31:10Z","author_association":"CONTRIBUTOR","body":"@rdblue Thanks I will have a follow up PR for that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130293044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130394038","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1130394038","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1130394038,"node_id":"IC_kwDOCW7NX85DYHG2","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T18:58:56Z","updated_at":"2022-05-18T18:58:56Z","author_association":"CONTRIBUTOR","body":"> Do you refer to point 5 or 6 as optional?\r\n\r\nYou're right: it's 5 that is optional. My mistake.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130394038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130396915","html_url":"https://github.com/apache/iceberg/pull/4741#issuecomment-1130396915","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4741","id":1130396915,"node_id":"IC_kwDOCW7NX85DYHzz","user":{"login":"alexjo2144","id":7109804,"node_id":"MDQ6VXNlcjcxMDk4MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/7109804?v=4","gravatar_id":"","url":"https://api.github.com/users/alexjo2144","html_url":"https://github.com/alexjo2144","followers_url":"https://api.github.com/users/alexjo2144/followers","following_url":"https://api.github.com/users/alexjo2144/following{/other_user}","gists_url":"https://api.github.com/users/alexjo2144/gists{/gist_id}","starred_url":"https://api.github.com/users/alexjo2144/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexjo2144/subscriptions","organizations_url":"https://api.github.com/users/alexjo2144/orgs","repos_url":"https://api.github.com/users/alexjo2144/repos","events_url":"https://api.github.com/users/alexjo2144/events{/privacy}","received_events_url":"https://api.github.com/users/alexjo2144/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T19:02:22Z","updated_at":"2022-05-18T19:02:22Z","author_association":"CONTRIBUTOR","body":"We need to remember to keep `remove_orphan_files` from deleting Statistics files","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130396915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130495934","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130495934","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130495934,"node_id":"IC_kwDOCW7NX85DYf--","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T20:19:15Z","updated_at":"2022-05-18T20:24:07Z","author_association":"CONTRIBUTOR","body":"I spent some time thinking about this. Let me summarize how I understand the proposal.\r\n\r\nThe use case we are talking about is copy-on-write DELETE **_executed using a broadcast join_** where we read files from the current spec, only one file per split, files are already reasonably compacted and sorted as needed. Right now, we can avoid the shuffle by setting the distribution mode to `none` but we can't disable a potentially redundant local sort. Is my understanding correct?\r\n\r\nWe can't target UPDATE and MERGE as those may change the ordering/partition of records even if we read properly sorted/partitioned files. We can't target tables with small files as having a split per file will be costly. The first two restrictions seem reasonable but I am afraid we can't target DELETE that triggers a shuffle as it will distribute records across tasks by the delete condition, not necessarily by the partition/sort key. That poses a problem as Iceberg does not know which join implementation Spark is going to pick so we can't say whether the sort is really redundant. The proper solution would be to report ordering of scan tasks to Spark, request required distribution/ordering on write and let Spark decide if the sort is redundant. There was a Spark proposal for exposing tasks ordering but it is not available yet.\r\n\r\nIf we had a way to pass options to DELETE commands, we could simply support the same using these steps:\r\n- Set `read.split.open-file-cost` to `Long.MaxValue` to force one file per split\r\n- Set `write.delete.distribution-mode` to `none`\r\n- Set write option `use-table-distribution-and-ordering` to `false`\r\n\r\nI will be adding OPTIONS to row-level commands in Spark too but it won't be there until Spark 3.4.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130495934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130499776","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130499776","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130499776,"node_id":"IC_kwDOCW7NX85DYg7A","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T20:23:16Z","updated_at":"2022-05-18T20:23:16Z","author_association":"CONTRIBUTOR","body":"BTW, I think propagating the sort order ID to written files is something we should do. We have to be careful to do that only when we actually requested a sort order. @SinghAsDev, would you be interested in submitting a PR for that? It is independent of what we are going to do here.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130499776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130501423","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130501423","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130501423,"node_id":"IC_kwDOCW7NX85DYhUv","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T20:25:07Z","updated_at":"2022-05-18T20:25:07Z","author_association":"CONTRIBUTOR","body":"Thoughts, @RussellSpitzer @szehon-ho @rdblue @flyrain?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130501423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130513986","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130513986","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130513986,"node_id":"IC_kwDOCW7NX85DYkZC","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T20:38:14Z","updated_at":"2022-05-18T20:38:14Z","author_association":"MEMBER","body":"I'm a little worried about the instance in which every file was written with the correct sort order BUT were written by independent writes. In this case I have dozens of files which overlap, but they all have the same sort order. In this case I'm not sure it makes sense to ignore the sort request, in this case it wouldn't be redundant and we would be better off if we apply the distribution.\r\n\r\nFor disabling the sort I think disabling the distribution mode is good enough? Although maybe file as task is a nice bonus there? I'm a little worried since that parameter is a bit of a confusing internal implementation detail for an external user to wrap their head around.\r\n\r\nI am strongly in support though of passing through \"sort order\" to files and want that PR if we can do it soon.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130513986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130549098","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130549098","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130549098,"node_id":"IC_kwDOCW7NX85DYs9q","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:06:48Z","updated_at":"2022-05-18T21:06:48Z","author_association":"CONTRIBUTOR","body":"> I'm a little worried about the instance in which every file was written with the correct sort order BUT were written by independent writes. In this case I have dozens of files which overlap, but they all have the same sort order. In this case I'm not sure it makes sense to ignore the sort request, in this case it wouldn't be redundant and we would be better off if we apply the distribution.\r\n\r\nI guess the answer would be \"it depends\". In case of @SinghAsDev, the files seem to be properly compacted and sorted so that only a small number of files overlap. Anyway, the point I was trying to make is there are lot of assumptions that must be met that makes this use case pretty narrow. On top of that, we can't do that at all as Iceberg doesn't know whether a broadcast join will be used.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130549098/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130550165","html_url":"https://github.com/apache/iceberg/pull/4703#issuecomment-1130550165","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4703","id":1130550165,"node_id":"IC_kwDOCW7NX85DYtOV","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:07:59Z","updated_at":"2022-05-18T21:07:59Z","author_association":"CONTRIBUTOR","body":"Let me take a look at this one too.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130550165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130551254","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130551254","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130551254,"node_id":"IC_kwDOCW7NX85DYtfW","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:09:10Z","updated_at":"2022-05-18T21:09:10Z","author_association":"MEMBER","body":"I want to say i'm not against heuristic optimizations, but I do think we need to make them optional, explicitly enabled/disabled, and they should do the right thing at least 90% of the time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130551254/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130554447","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1130554447","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1130554447,"node_id":"IC_kwDOCW7NX85DYuRP","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:11:02Z","updated_at":"2022-05-18T21:11:02Z","author_association":"MEMBER","body":"The manifest skipping idea sounds good to me, basically lets us cut down on the \"except\" cost as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130554447/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130559838","html_url":"https://github.com/apache/iceberg/pull/4800#issuecomment-1130559838","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4800","id":1130559838,"node_id":"IC_kwDOCW7NX85DYvle","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:15:43Z","updated_at":"2022-05-18T21:15:43Z","author_association":"MEMBER","body":"@singhpk234 you probably saw how I wrote the test in the other suite, it is not pretty but I think you maybe be able to pull something off like that as well. Although this probably won't be easy unless it is coupled with a Spark version that natively supports the merge operations (3.3 I believe @aokolnychyi has it merged in) since at the moment we would need custom plan rules as well I think ...\r\n\r\n I'm getting close to thinking we need byteman or some other bytecode fault injector :(.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130559838/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130567256","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130567256","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130567256,"node_id":"IC_kwDOCW7NX85DYxZY","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:25:58Z","updated_at":"2022-05-18T21:25:58Z","author_association":"CONTRIBUTOR","body":"> The use case we are talking about is copy-on-write DELETE **_executed using a broadcast join_** where we read files from the current spec, only one file per split, files are already reasonably compacted and sorted as needed. Right now, we can avoid the shuffle by setting the distribution mode to `none` but we can't disable a potentially redundant local sort. Is my understanding correct?\r\n\r\nThat is correct. However, we want to remove sorts automatically without users having to figure out if all files are already sorted or not. So, imaging a dataset that goes through deletion daily. The first deletion should do a global sort while re-writing, however future deletes should not have to perform any sort (not even local sort).\r\n\r\n> If we had a way to pass options to DELETE commands, we could simply support the same using these steps:\r\n> \r\n> * Set `read.split.open-file-cost` to `Long.MaxValue` to force one file per split\r\n> * Set `write.delete.distribution-mode` to `none`\r\n> * Set write option `use-table-distribution-and-ordering` to `false`\r\n> \r\n> I will be adding OPTIONS to row-level commands in Spark too but it won't be there until Spark 3.4.\r\n\r\nFor this to work users would have to first figure out if all files are sorted or not and then do things differently accordingly. If that is something user want to do they can do that by explicitly adding `order by` only in first delete. However, there will still be a redundant local sort in subsequent deletes.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130567256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130568404","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130568404","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130568404,"node_id":"IC_kwDOCW7NX85DYxrU","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:27:36Z","updated_at":"2022-05-18T21:27:36Z","author_association":"CONTRIBUTOR","body":"> BTW, I think propagating the sort order ID to written files is something we should do. We have to be careful to do that only when we actually requested a sort order. @SinghAsDev, would you be interested in submitting a PR for that? It is independent of what we are going to do here.\r\n\r\nWill do.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130568404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130571173","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130571173","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130571173,"node_id":"IC_kwDOCW7NX85DYyWl","user":{"login":"SinghAsDev","id":4915557,"node_id":"MDQ6VXNlcjQ5MTU1NTc=","avatar_url":"https://avatars.githubusercontent.com/u/4915557?v=4","gravatar_id":"","url":"https://api.github.com/users/SinghAsDev","html_url":"https://github.com/SinghAsDev","followers_url":"https://api.github.com/users/SinghAsDev/followers","following_url":"https://api.github.com/users/SinghAsDev/following{/other_user}","gists_url":"https://api.github.com/users/SinghAsDev/gists{/gist_id}","starred_url":"https://api.github.com/users/SinghAsDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinghAsDev/subscriptions","organizations_url":"https://api.github.com/users/SinghAsDev/orgs","repos_url":"https://api.github.com/users/SinghAsDev/repos","events_url":"https://api.github.com/users/SinghAsDev/events{/privacy}","received_events_url":"https://api.github.com/users/SinghAsDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:31:28Z","updated_at":"2022-05-18T21:31:28Z","author_association":"CONTRIBUTOR","body":"> That poses a problem as Iceberg does not know which join implementation Spark is going to pick so we can't say whether the sort is really redundant.\r\n\r\nYea, I definitely think this should be configurable optimization at best. But, I won't be surprised if many GDPR use-cases benefit from it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130571173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130583892","html_url":"https://github.com/apache/iceberg/pull/4167#issuecomment-1130583892","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4167","id":1130583892,"node_id":"IC_kwDOCW7NX85DY1dU","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T21:50:49Z","updated_at":"2022-05-18T21:50:49Z","author_association":"CONTRIBUTOR","body":"Thanks, @kbendick! And thanks for making sure this went in, @fqaiser94!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130583892/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130595244","html_url":"https://github.com/apache/iceberg/pull/4692#issuecomment-1130595244","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4692","id":1130595244,"node_id":"IC_kwDOCW7NX85DY4Os","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T22:02:31Z","updated_at":"2022-05-18T22:02:31Z","author_association":"CONTRIBUTOR","body":"> However, we want to remove sorts automatically without users having to figure out if all files are already sorted or not.\r\n\r\nYeah, I agree but I am afraid Iceberg can't do this on its own as we don't know whether there will be a shuffle. We can't remove the local sort if there is a subquery that is rewritten as a sort-merge join, can we?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130595244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130603098","html_url":"https://github.com/apache/iceberg/pull/4588#issuecomment-1130603098","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4588","id":1130603098,"node_id":"IC_kwDOCW7NX85DY6Ja","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T22:08:16Z","updated_at":"2022-05-18T22:08:16Z","author_association":"MEMBER","body":"@flyrain could you take a look at this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130603098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130767435","html_url":"https://github.com/apache/iceberg/pull/4629#issuecomment-1130767435","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4629","id":1130767435,"node_id":"IC_kwDOCW7NX85DZiRL","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T23:53:36Z","updated_at":"2022-05-18T23:53:36Z","author_association":"COLLABORATOR","body":"Thanks @aokolnychyi , @zinking , @dramaticlly , @rajarshisarkar for detailed reviews","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130767435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130774028","html_url":"https://github.com/apache/iceberg/pull/4706#issuecomment-1130774028","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4706","id":1130774028,"node_id":"IC_kwDOCW7NX85DZj4M","user":{"login":"dhruv-pratap","id":11399509,"node_id":"MDQ6VXNlcjExMzk5NTA5","avatar_url":"https://avatars.githubusercontent.com/u/11399509?v=4","gravatar_id":"","url":"https://api.github.com/users/dhruv-pratap","html_url":"https://github.com/dhruv-pratap","followers_url":"https://api.github.com/users/dhruv-pratap/followers","following_url":"https://api.github.com/users/dhruv-pratap/following{/other_user}","gists_url":"https://api.github.com/users/dhruv-pratap/gists{/gist_id}","starred_url":"https://api.github.com/users/dhruv-pratap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhruv-pratap/subscriptions","organizations_url":"https://api.github.com/users/dhruv-pratap/orgs","repos_url":"https://api.github.com/users/dhruv-pratap/repos","events_url":"https://api.github.com/users/dhruv-pratap/events{/privacy}","received_events_url":"https://api.github.com/users/dhruv-pratap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-18T23:58:09Z","updated_at":"2022-05-18T23:58:09Z","author_association":"CONTRIBUTOR","body":"Sorry for the mess above ^. Had to do a rebase from master to pull in recent PRs to add `namespace` to `spellcheck-dictionary.txt` for the CI checks to pass.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130774028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130873434","html_url":"https://github.com/apache/iceberg/pull/4717#issuecomment-1130873434","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4717","id":1130873434,"node_id":"IC_kwDOCW7NX85DZ8Ja","user":{"login":"dramaticlly","id":5961173,"node_id":"MDQ6VXNlcjU5NjExNzM=","avatar_url":"https://avatars.githubusercontent.com/u/5961173?v=4","gravatar_id":"","url":"https://api.github.com/users/dramaticlly","html_url":"https://github.com/dramaticlly","followers_url":"https://api.github.com/users/dramaticlly/followers","following_url":"https://api.github.com/users/dramaticlly/following{/other_user}","gists_url":"https://api.github.com/users/dramaticlly/gists{/gist_id}","starred_url":"https://api.github.com/users/dramaticlly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dramaticlly/subscriptions","organizations_url":"https://api.github.com/users/dramaticlly/orgs","repos_url":"https://api.github.com/users/dramaticlly/repos","events_url":"https://api.github.com/users/dramaticlly/events{/privacy}","received_events_url":"https://api.github.com/users/dramaticlly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T00:49:57Z","updated_at":"2022-05-19T00:49:57Z","author_association":"CONTRIBUTOR","body":"Updated the PR with what dataclass can offer for PartitionField and PartitionSpec. The scope of this change stay the same and need a following PR to add convenient Builder for PartitionSpec\r\n\r\nAppreciate the review, if you can take a look that would be great! @rdblue @samredai @Fokko ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1130873434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131020429","html_url":"https://github.com/apache/iceberg/pull/4736#issuecomment-1131020429","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4736","id":1131020429,"node_id":"IC_kwDOCW7NX85DagCN","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T02:20:10Z","updated_at":"2022-05-19T02:20:10Z","author_association":"CONTRIBUTOR","body":"Thanks for tagging me Anton.\r\n\r\nI think this is a good idea as well.\r\n\r\nI won’t repeat others but I have some questions and possibly a few additional ideas but I need to go through some theoretical cases on paper first.\r\n\r\n> One potential problem with that is that we will load the manifest list for every expired snapshot on the driver, which can become a bottleneck if we expire a lot of snapshots. I've seen such cases.\r\n\r\nTwo thoughts:\r\n\r\n1) We should add an event / metric describing this replanning work. Could be used as a signal to perform table maintenance.\r\n2) We might be able to track a metric to determine if we should do this initial replanning work in a distributed manner.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131020429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131319139","html_url":"https://github.com/apache/iceberg/pull/4741#issuecomment-1131319139","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4741","id":1131319139,"node_id":"IC_kwDOCW7NX85Dbo9j","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T07:19:42Z","updated_at":"2022-05-19T07:19:42Z","author_association":"MEMBER","body":"> We need to remember to keep `remove_orphan_files` from deleting Statistics files\r\n\r\nThanks for reminding about this here. It's on my todo list, see eg https://github.com/trinodb/trino/pull/12317#discussion_r876044928 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131319139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131333884","html_url":"https://github.com/apache/iceberg/pull/4537#issuecomment-1131333884","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4537","id":1131333884,"node_id":"IC_kwDOCW7NX85Dbsj8","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T07:33:03Z","updated_at":"2022-05-19T07:33:03Z","author_association":"MEMBER","body":"Thanks @alexjo2144 for your review. AC","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131333884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131414856","html_url":"https://github.com/apache/iceberg/pull/4799#issuecomment-1131414856","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4799","id":1131414856,"node_id":"IC_kwDOCW7NX85DcAVI","user":{"login":"ConeyLiu","id":12733256,"node_id":"MDQ6VXNlcjEyNzMzMjU2","avatar_url":"https://avatars.githubusercontent.com/u/12733256?v=4","gravatar_id":"","url":"https://api.github.com/users/ConeyLiu","html_url":"https://github.com/ConeyLiu","followers_url":"https://api.github.com/users/ConeyLiu/followers","following_url":"https://api.github.com/users/ConeyLiu/following{/other_user}","gists_url":"https://api.github.com/users/ConeyLiu/gists{/gist_id}","starred_url":"https://api.github.com/users/ConeyLiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ConeyLiu/subscriptions","organizations_url":"https://api.github.com/users/ConeyLiu/orgs","repos_url":"https://api.github.com/users/ConeyLiu/repos","events_url":"https://api.github.com/users/ConeyLiu/events{/privacy}","received_events_url":"https://api.github.com/users/ConeyLiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T08:44:18Z","updated_at":"2022-05-19T08:44:18Z","author_association":"CONTRIBUTOR","body":"Thanks, @singhpk234 for doing this. This looks fine to me.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131414856/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131489113","html_url":"https://github.com/apache/iceberg/issues/4753#issuecomment-1131489113","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4753","id":1131489113,"node_id":"IC_kwDOCW7NX85DcSdZ","user":{"login":"Zhangg7723","id":18146312,"node_id":"MDQ6VXNlcjE4MTQ2MzEy","avatar_url":"https://avatars.githubusercontent.com/u/18146312?v=4","gravatar_id":"","url":"https://api.github.com/users/Zhangg7723","html_url":"https://github.com/Zhangg7723","followers_url":"https://api.github.com/users/Zhangg7723/followers","following_url":"https://api.github.com/users/Zhangg7723/following{/other_user}","gists_url":"https://api.github.com/users/Zhangg7723/gists{/gist_id}","starred_url":"https://api.github.com/users/Zhangg7723/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zhangg7723/subscriptions","organizations_url":"https://api.github.com/users/Zhangg7723/orgs","repos_url":"https://api.github.com/users/Zhangg7723/repos","events_url":"https://api.github.com/users/Zhangg7723/events{/privacy}","received_events_url":"https://api.github.com/users/Zhangg7723/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T09:56:11Z","updated_at":"2022-05-19T09:56:11Z","author_association":"CONTRIBUTOR","body":"\r\n\r\n\r\n\r\n> So, iceberg is not able to support delete before Flink SQL supports it?\r\n\r\nYes, flink is not good at update and delete operation until it becomes a real batch&streaming engine.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131489113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131501318","html_url":"https://github.com/apache/iceberg/issues/4804#issuecomment-1131501318","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4804","id":1131501318,"node_id":"IC_kwDOCW7NX85DcVcG","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T10:09:00Z","updated_at":"2022-05-19T10:09:00Z","author_association":"CONTRIBUTOR","body":"Seems like there is an issue to load the credentials. Is the AWS SDK v2 library in the classpath? Possibly the `--jars` path is breaking at one place before the AWS SDK v2 library due to `'s3-data-bucket'`:\r\n\r\n```\r\n\"sparkSubmitParameters\": \"--jars .....,s3://'s3-data-bucket'/spark-sql-kinesis_2.12-1.2.1_spark-3.0-SNAPSHOT.jar,https://repo1.maven.org/maven2/software/amazon/awssdk/bundle/2.15.40/bundle-2.15.40.jar,https://repo1.maven.org/maven2/software/amazon/awssdk/url-connection-client/2.15.40/url-connection-client-2.15.40.jar\"\r\n```\r\n\r\nIf it is in the classpath, can you please explicitly try providing the access key specified either via environment variable (`AWS_ACCESS_KEY_ID`) or system property (`aws.accessKeyId`) for testing purpose.\r\n\r\nAlso, I couldn't find the Dynamo DB lock manager Spark configuration: `--conf spark.sql.catalog.my_catalog.lock-impl=org.apache.iceberg.aws.glue.DynamoLockManager`. Refer: [DynamoDB for Commit Locking](https://iceberg.apache.org/docs/latest/aws/#dynamodb-for-commit-locking)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131501318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131523159","html_url":"https://github.com/apache/iceberg/pull/4774#issuecomment-1131523159","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4774","id":1131523159,"node_id":"IC_kwDOCW7NX85DcaxX","user":{"login":"caneGuy","id":26762018,"node_id":"MDQ6VXNlcjI2NzYyMDE4","avatar_url":"https://avatars.githubusercontent.com/u/26762018?v=4","gravatar_id":"","url":"https://api.github.com/users/caneGuy","html_url":"https://github.com/caneGuy","followers_url":"https://api.github.com/users/caneGuy/followers","following_url":"https://api.github.com/users/caneGuy/following{/other_user}","gists_url":"https://api.github.com/users/caneGuy/gists{/gist_id}","starred_url":"https://api.github.com/users/caneGuy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caneGuy/subscriptions","organizations_url":"https://api.github.com/users/caneGuy/orgs","repos_url":"https://api.github.com/users/caneGuy/repos","events_url":"https://api.github.com/users/caneGuy/events{/privacy}","received_events_url":"https://api.github.com/users/caneGuy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T10:33:03Z","updated_at":"2022-05-19T10:33:03Z","author_association":"CONTRIBUTOR","body":"@samredai could you help review this pr thanks! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131523159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131536413","html_url":"https://github.com/apache/iceberg/pull/4518#issuecomment-1131536413","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4518","id":1131536413,"node_id":"IC_kwDOCW7NX85DceAd","user":{"login":"melin","id":1145830,"node_id":"MDQ6VXNlcjExNDU4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1145830?v=4","gravatar_id":"","url":"https://api.github.com/users/melin","html_url":"https://github.com/melin","followers_url":"https://api.github.com/users/melin/followers","following_url":"https://api.github.com/users/melin/following{/other_user}","gists_url":"https://api.github.com/users/melin/gists{/gist_id}","starred_url":"https://api.github.com/users/melin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melin/subscriptions","organizations_url":"https://api.github.com/users/melin/orgs","repos_url":"https://api.github.com/users/melin/repos","events_url":"https://api.github.com/users/melin/events{/privacy}","received_events_url":"https://api.github.com/users/melin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T10:48:24Z","updated_at":"2022-05-19T11:11:25Z","author_association":"NONE","body":"CachingFileIO caches the data accessed for the first time. For the mpp database, it affects the corresponding time of the first access. Can snapshot changes be notified to CachingFileIO? Clean cached data, metadata can be cached for a long time. \r\nAll metadata is cached in dremio and updated regularly. Snapshot changes, update time is not timely, avoid reading metadata and cause query delay","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131536413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131574206","html_url":"https://github.com/apache/iceberg/pull/4800#issuecomment-1131574206","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4800","id":1131574206,"node_id":"IC_kwDOCW7NX85DcnO-","user":{"login":"singhpk234","id":35593236,"node_id":"MDQ6VXNlcjM1NTkzMjM2","avatar_url":"https://avatars.githubusercontent.com/u/35593236?v=4","gravatar_id":"","url":"https://api.github.com/users/singhpk234","html_url":"https://github.com/singhpk234","followers_url":"https://api.github.com/users/singhpk234/followers","following_url":"https://api.github.com/users/singhpk234/following{/other_user}","gists_url":"https://api.github.com/users/singhpk234/gists{/gist_id}","starred_url":"https://api.github.com/users/singhpk234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/singhpk234/subscriptions","organizations_url":"https://api.github.com/users/singhpk234/orgs","repos_url":"https://api.github.com/users/singhpk234/repos","events_url":"https://api.github.com/users/singhpk234/events{/privacy}","received_events_url":"https://api.github.com/users/singhpk234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T11:31:53Z","updated_at":"2022-05-19T11:31:53Z","author_association":"CONTRIBUTOR","body":">since at the moment we would need custom plan rules as well I think\r\n\r\n+1, I was also thinking in these lines, we need here analyzer rules so that we could get a DSV2Relation which hold our mocked table object (which would throw our CommitUnknowEx when commit is called). The main problem as you highlighted is the same, it supported in SQL via our Extensions :(.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131574206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131629610","html_url":"https://github.com/apache/iceberg/issues/3117#issuecomment-1131629610","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3117","id":1131629610,"node_id":"IC_kwDOCW7NX85Dc0wq","user":{"login":"canopenerda","id":740529,"node_id":"MDQ6VXNlcjc0MDUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/740529?v=4","gravatar_id":"","url":"https://api.github.com/users/canopenerda","html_url":"https://github.com/canopenerda","followers_url":"https://api.github.com/users/canopenerda/followers","following_url":"https://api.github.com/users/canopenerda/following{/other_user}","gists_url":"https://api.github.com/users/canopenerda/gists{/gist_id}","starred_url":"https://api.github.com/users/canopenerda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canopenerda/subscriptions","organizations_url":"https://api.github.com/users/canopenerda/orgs","repos_url":"https://api.github.com/users/canopenerda/repos","events_url":"https://api.github.com/users/canopenerda/events{/privacy}","received_events_url":"https://api.github.com/users/canopenerda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T12:34:11Z","updated_at":"2022-05-19T12:34:11Z","author_association":"NONE","body":"@xinbinhuang a tricky case would be flink on k8s creating/writing/reading iceberg table in hadoop catalog. How hadoop dependencies should be resolved in this case?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131629610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131753426","html_url":"https://github.com/apache/iceberg/pull/4545#issuecomment-1131753426","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4545","id":1131753426,"node_id":"IC_kwDOCW7NX85DdS_S","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T14:14:28Z","updated_at":"2022-05-19T14:14:28Z","author_association":"CONTRIBUTOR","body":"Closed this since there's still some discussions around how we want to add schema validation and that can be postponed without blocking anything.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131753426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131839491","html_url":"https://github.com/apache/iceberg/pull/4808#issuecomment-1131839491","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4808","id":1131839491,"node_id":"IC_kwDOCW7NX85DdoAD","user":{"login":"CodingCat","id":678008,"node_id":"MDQ6VXNlcjY3ODAwOA==","avatar_url":"https://avatars.githubusercontent.com/u/678008?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingCat","html_url":"https://github.com/CodingCat","followers_url":"https://api.github.com/users/CodingCat/followers","following_url":"https://api.github.com/users/CodingCat/following{/other_user}","gists_url":"https://api.github.com/users/CodingCat/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingCat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingCat/subscriptions","organizations_url":"https://api.github.com/users/CodingCat/orgs","repos_url":"https://api.github.com/users/CodingCat/repos","events_url":"https://api.github.com/users/CodingCat/events{/privacy}","received_events_url":"https://api.github.com/users/CodingCat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T15:00:33Z","updated_at":"2022-05-19T15:00:33Z","author_association":"CONTRIBUTOR","body":"since this was exposed as public APIs, how we assume no users use these stuffs?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131839491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131851654","html_url":"https://github.com/apache/iceberg/issues/3117#issuecomment-1131851654","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3117","id":1131851654,"node_id":"IC_kwDOCW7NX85Ddq-G","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T15:11:44Z","updated_at":"2022-05-19T15:11:44Z","author_association":"CONTRIBUTOR","body":"> @xinbinhuang a tricky case would be flink on k8s creating/writing/reading iceberg table in hadoop catalog. How hadoop dependencies should be resolved in this case?\n\nAs long as Hadoop is on the classpath, it should just work. The change simply try to defer the loading of Hadoop dependencies so that catalog that doesn't require Hadoop (i.e. Glue catalog) doesn't need the Hadoop jar on the classpath","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131851654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131915995","html_url":"https://github.com/apache/iceberg/pull/4814#issuecomment-1131915995","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4814","id":1131915995,"node_id":"IC_kwDOCW7NX85Dd6rb","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T16:11:01Z","updated_at":"2022-05-19T16:11:01Z","author_association":"CONTRIBUTOR","body":"@samredai Indeed copy&paste 🙈 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131915995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131932540","html_url":"https://github.com/apache/iceberg/pull/4814#issuecomment-1131932540","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4814","id":1131932540,"node_id":"IC_kwDOCW7NX85Dd-t8","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T16:27:37Z","updated_at":"2022-05-19T16:27:37Z","author_association":"CONTRIBUTOR","body":"+1 Pending checks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131932540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131938662","html_url":"https://github.com/apache/iceberg/pull/4812#issuecomment-1131938662","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4812","id":1131938662,"node_id":"IC_kwDOCW7NX85DeANm","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T16:34:02Z","updated_at":"2022-05-19T16:34:02Z","author_association":"COLLABORATOR","body":"FYI @aokolnychyi @RussellSpitzer @rdblue, if you also have time to take a look","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131938662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131957732","html_url":"https://github.com/apache/iceberg/pull/3852#issuecomment-1131957732","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3852","id":1131957732,"node_id":"IC_kwDOCW7NX85DeE3k","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T16:55:20Z","updated_at":"2022-05-19T16:56:38Z","author_association":"CONTRIBUTOR","body":"@kbendick I see #4809  and that you reviewed that.\r\nCan you please review this? I put this up months ago, but it seems to have fallen off the radar.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131957732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131992744","html_url":"https://github.com/apache/iceberg/pull/4817#issuecomment-1131992744","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4817","id":1131992744,"node_id":"IC_kwDOCW7NX85DeNao","user":{"login":"sumeetgajjar","id":7351922,"node_id":"MDQ6VXNlcjczNTE5MjI=","avatar_url":"https://avatars.githubusercontent.com/u/7351922?v=4","gravatar_id":"","url":"https://api.github.com/users/sumeetgajjar","html_url":"https://github.com/sumeetgajjar","followers_url":"https://api.github.com/users/sumeetgajjar/followers","following_url":"https://api.github.com/users/sumeetgajjar/following{/other_user}","gists_url":"https://api.github.com/users/sumeetgajjar/gists{/gist_id}","starred_url":"https://api.github.com/users/sumeetgajjar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sumeetgajjar/subscriptions","organizations_url":"https://api.github.com/users/sumeetgajjar/orgs","repos_url":"https://api.github.com/users/sumeetgajjar/repos","events_url":"https://api.github.com/users/sumeetgajjar/events{/privacy}","received_events_url":"https://api.github.com/users/sumeetgajjar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T17:30:56Z","updated_at":"2022-05-19T17:30:56Z","author_association":"CONTRIBUTOR","body":"Hi @RussellSpitzer @aokolnychyi \r\nA gentle ping for the review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131992744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131993501","html_url":"https://github.com/apache/iceberg/pull/4809#issuecomment-1131993501","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4809","id":1131993501,"node_id":"IC_kwDOCW7NX85DeNmd","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T17:31:41Z","updated_at":"2022-05-19T17:31:41Z","author_association":"CONTRIBUTOR","body":"I don't think this is the way to do it. If the snapshot is written before schema ids were introduced, then most likely its ancestors also do not have schema ids, unless different versions of Iceberg are in use concurrently, and one is of a version before schema ids were introduced.\r\nI put up #3852 months ago to perform the recovery, and also added tests for the recovery. @kbendick can you please review?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1131993501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132049850","html_url":"https://github.com/apache/iceberg/pull/4816#issuecomment-1132049850","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4816","id":1132049850,"node_id":"IC_kwDOCW7NX85DebW6","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T18:24:47Z","updated_at":"2022-05-19T18:24:47Z","author_association":"CONTRIBUTOR","body":"> Is def __init__(self, ref: 'UnboundReference', list: List[Literal]): the correct signature?\r\n\r\nThat looks right to me, `java.util.List` is used in the java implementation of [in](https://github.com/apache/iceberg/blob/master/api/src/main/java/org/apache/iceberg/expressions/Expressions.java#L206-L222).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132049850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132077010","html_url":"https://github.com/apache/iceberg/issues/4805#issuecomment-1132077010","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4805","id":1132077010,"node_id":"IC_kwDOCW7NX85Deh_S","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T18:50:53Z","updated_at":"2022-05-19T18:50:53Z","author_association":"CONTRIBUTOR","body":"@samredai: Checked the common configuration page - added a single review comment there, but otherwise everything is there which was in the `Configuration` paragraph\r\n\r\nMy documentation skills are far from epic 😃 , so I would let you and @krishahn decide on the structure.\r\nMaybe I would like to add one important info: The Hive 2/3 integration is greatly limited by the existing API-s, and unlikely to grow. OTOH I sincerely hope that Hive 4.0.0 feature set will continue to grow.\r\n\r\nAs for the Quickstart page, the good news is that if you are using Hive 4.0.0, you do not have to do anything. Iceberg is immediately available, so I would say that no docker image is needed - or we can link a 4.0.0 docker image where the users can try out Hive 4.0.0.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132077010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132085365","html_url":"https://github.com/apache/iceberg/pull/4818#issuecomment-1132085365","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4818","id":1132085365,"node_id":"IC_kwDOCW7NX85DekB1","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T19:00:49Z","updated_at":"2022-05-19T19:00:49Z","author_association":"CONTRIBUTOR","body":"> riable.\r\n> \r\n> @samredai are you on M1 as well?\r\n\r\nI actually was using an intel macbook when we fixed this (my primary workstation 😄 ). I do have an M1 so I'll try this out there to confirm I get the same issue and I'll try the solution described in this PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132085365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132113677","html_url":"https://github.com/apache/iceberg/pull/4810#issuecomment-1132113677","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4810","id":1132113677,"node_id":"IC_kwDOCW7NX85Deq8N","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T19:23:38Z","updated_at":"2022-05-19T19:23:38Z","author_association":"MEMBER","body":"Thanks @flyrain and @kbendick , Please take a look again when you have a chance","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132113677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132117821","html_url":"https://github.com/apache/iceberg/pull/4800#issuecomment-1132117821","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4800","id":1132117821,"node_id":"IC_kwDOCW7NX85Der89","user":{"login":"singhpk234","id":35593236,"node_id":"MDQ6VXNlcjM1NTkzMjM2","avatar_url":"https://avatars.githubusercontent.com/u/35593236?v=4","gravatar_id":"","url":"https://api.github.com/users/singhpk234","html_url":"https://github.com/singhpk234","followers_url":"https://api.github.com/users/singhpk234/followers","following_url":"https://api.github.com/users/singhpk234/following{/other_user}","gists_url":"https://api.github.com/users/singhpk234/gists{/gist_id}","starred_url":"https://api.github.com/users/singhpk234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/singhpk234/subscriptions","organizations_url":"https://api.github.com/users/singhpk234/orgs","repos_url":"https://api.github.com/users/singhpk234/repos","events_url":"https://api.github.com/users/singhpk234/events{/privacy}","received_events_url":"https://api.github.com/users/singhpk234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T19:28:49Z","updated_at":"2022-05-19T19:28:49Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer , I went one step above and used catalog to manipulate and return the spy table I want. Used static prop to manipulate to get the spy spark table instead :) !!!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132117821/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132120133","html_url":"https://github.com/apache/iceberg/pull/4800#issuecomment-1132120133","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4800","id":1132120133,"node_id":"IC_kwDOCW7NX85DeshF","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T19:31:36Z","updated_at":"2022-05-19T19:31:36Z","author_association":"MEMBER","body":"@singhpk234 Thats a great solution! Maybe i'l rework my PR later to do the same thing!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132120133/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132133637","html_url":"https://github.com/apache/iceberg/pull/4786#issuecomment-1132133637","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4786","id":1132133637,"node_id":"IC_kwDOCW7NX85Dev0F","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T19:48:53Z","updated_at":"2022-05-19T19:50:14Z","author_association":"CONTRIBUTOR","body":"> I think I found the issue (which can easily be debugged locally by adding `--no-parallel --debug` to get `./gradlew -DsparkVersions= -DhiveVersions= -DflinkVersions=1.13 :iceberg-flink:iceberg-flink-1.13:check :iceberg-flink:iceberg-flink-runtime-1.13:check -Pquick=true -x javadoc --no-parallel --debug`). It looks like something got messed up during conflict resolution and `BaseDeltaTaskWriter#asStructLike(..)` was accidentally returning `keyWrapper.wrap(data)` and not `wrapper.wrap(data)`. This then resulted in `TestChangeLogTable#testChangeLogOnDataKey()` to run indefinitely in a retry-loop because there was an underlying exception. For the future I think it would be good to have a timeout on tests as issues like these are quite difficult to debug on CI without modifying how the test is being executed (e.g. by adding `--debug` to the gradle task and such)\r\n\r\n+1 to better timeout resolution.\r\n\r\nIt's possible there's something else we need to cherry-pick given the the underlying exception for that one test case. I'll run locally and we'll see. We can also try to schedule time to talk if you'd like. I'm very interested in getting this out the door.\r\n\r\nThough tests do seem to be passing now so potentially you already got to it. 🙂 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132133637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132169478","html_url":"https://github.com/apache/iceberg/pull/4818#issuecomment-1132169478","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4818","id":1132169478,"node_id":"IC_kwDOCW7NX85De4kG","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T20:22:46Z","updated_at":"2022-05-19T20:22:46Z","author_association":"CONTRIBUTOR","body":"I have an M1 macbook as well, so I can test this out too. I am still using my Intel macbook as my primary computer while working on migrating to the M1 machine, ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132169478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132175364","html_url":"https://github.com/apache/iceberg/pull/4706#issuecomment-1132175364","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4706","id":1132175364,"node_id":"IC_kwDOCW7NX85De6AE","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T20:29:40Z","updated_at":"2022-05-19T20:29:40Z","author_association":"CONTRIBUTOR","body":"I'm ready to commit this once the error message format is fixed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132175364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132209061","html_url":"https://github.com/apache/iceberg/pull/2891#issuecomment-1132209061","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2891","id":1132209061,"node_id":"IC_kwDOCW7NX85DfCOl","user":{"login":"osscm","id":98674658,"node_id":"U_kgDOBeGn4g","avatar_url":"https://avatars.githubusercontent.com/u/98674658?v=4","gravatar_id":"","url":"https://api.github.com/users/osscm","html_url":"https://github.com/osscm","followers_url":"https://api.github.com/users/osscm/followers","following_url":"https://api.github.com/users/osscm/following{/other_user}","gists_url":"https://api.github.com/users/osscm/gists{/gist_id}","starred_url":"https://api.github.com/users/osscm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osscm/subscriptions","organizations_url":"https://api.github.com/users/osscm/orgs","repos_url":"https://api.github.com/users/osscm/repos","events_url":"https://api.github.com/users/osscm/events{/privacy}","received_events_url":"https://api.github.com/users/osscm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T21:07:26Z","updated_at":"2022-05-19T21:07:26Z","author_association":"NONE","body":"@RussellSpitzer thanks for the review.\r\nis it possible we can finalize this PR, please?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132209061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132242109","html_url":"https://github.com/apache/iceberg/pull/2891#issuecomment-1132242109","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2891","id":1132242109,"node_id":"IC_kwDOCW7NX85DfKS9","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T21:54:23Z","updated_at":"2022-05-19T21:54:23Z","author_association":"MEMBER","body":"I think i'm good with merging the patch as it was. According to IEEE we actually have a huge number of possible byte representations that are nan, \r\n```\r\nAny Sign bit : 2 Options\r\nAll 1 for Exponent : 1 Option\r\nAnything but all 0 for the fraction : 2^23 - 1 options (or 2 ^ 53 -1) options\r\n```\r\nso there are 2^24  -1 or 2 ^ 54 -1 possible NAN's for floats and doubles respectively.\r\n\r\nI don't think it's very important for us to define a concrete ordering of all different byte representations. If we want to be really strict we could just say all Nan's must be sorted in lexical byte order but I don't think it makes sense to put them on either end of the Infinity Spectrum. I think they should all just be grouped together regardless of if we strictly decide how they are ordered within that group.\r\n\r\n@rdblue Did you have strong opinions on this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132242109/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132253045","html_url":"https://github.com/apache/iceberg/pull/4814#issuecomment-1132253045","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4814","id":1132253045,"node_id":"IC_kwDOCW7NX85DfM91","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-19T22:08:33Z","updated_at":"2022-05-19T22:08:33Z","author_association":"CONTRIBUTOR","body":"@danielcweeks all green now :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1132253045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]