[{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891597089","html_url":"https://github.com/apache/jena/pull/2152#issuecomment-1891597089","issue_url":"https://api.github.com/repos/apache/jena/issues/2152","id":1891597089,"node_id":"IC_kwDOAHF7Ec5wv3sh","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T08:49:05Z","updated_at":"2024-01-15T08:49:05Z","author_association":"MEMBER","body":"@rvesse -- Should the branch in the Jena repo be deleted?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891597089/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891786883","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1891786883","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1891786883,"node_id":"IC_kwDOAHF7Ec5wwmCD","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T10:07:04Z","updated_at":"2024-01-15T10:07:04Z","author_association":"MEMBER","body":"`GraphTxn` is intended to provide auto-commit style semantics for `Graph`'s.  However there was a bug in the `GraphTxn` implementation in the 4.10.0 release (#2086) where it incorrectly determined the current transaction state and wasn't always creating a transaction when necessary (and conversely would try to incorrectly create a transaction when unnecessary)\r\n\r\nSo the behaviour you are seeing with 5.0.0-SNAPSHOT is the correct expected behaviour\r\n\r\nCreating the iterator starts a read transaction that isn't committed until you explicitly `close()` the iterator.  Trying to do a `g.add()` tries to start a write transaction but it can't because the read transaction is still in progress.\r\n\r\nIf you plan to use `GraphTxn` seriously then you should explicitly manage the transactions to get the transaction boundaries appropriate to your application.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891786883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891792345","html_url":"https://github.com/apache/jena/issues/2172#issuecomment-1891792345","issue_url":"https://api.github.com/repos/apache/jena/issues/2172","id":1891792345,"node_id":"IC_kwDOAHF7Ec5wwnXZ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T10:10:24Z","updated_at":"2024-01-15T10:10:24Z","author_association":"MEMBER","body":"Well, that got busy for both Java and Javascript!\r\n\r\nIt'll be catch-up for javascript.\r\n\r\nThey have \"limit 10\". The java ones are due to changing \"monthly\" to \"weekly\". I'd seen them on other projects so I locally edited pom.xml and ran a build to check them all.\r\n\r\nThere are configuration options for dependabot:\r\n\r\nhttps://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file#groups \r\n\r\nHaving groups for \"patch\" and maybe \"minor\" would help.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891792345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891818752","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1891818752","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1891818752,"node_id":"IC_kwDOAHF7Ec5wwt0A","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T10:26:59Z","updated_at":"2024-01-15T10:37:26Z","author_association":"CONTRIBUTOR","body":"this test works without exception in early versions, for example, 4.7.0\r\n\r\nperhaps it has always worked incorrectly? If so, it would be a surprise to end users.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891818752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891934937","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1891934937","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1891934937,"node_id":"IC_kwDOAHF7Ec5wxKLZ","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T11:08:53Z","updated_at":"2024-01-15T11:08:53Z","author_association":"CONTRIBUTOR","body":"and for a general understanding:\r\nI see also `JenaTransactionException: Tried to write inside a READ transaction!`, or error about illegal nested transactions\r\nso, in concurrent environment, it won't work? or error is expected to appear only in single thread environment (when our code calls read inside write or the opposite)?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891934937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891974098","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1891974098","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1891974098,"node_id":"IC_kwDOAHF7Ec5wxTvS","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T11:21:32Z","updated_at":"2024-01-15T11:21:32Z","author_association":"CONTRIBUTOR","body":"> `GraphTxn` is intended to provide auto-commit style semantics for `Graph`'s. However there was a bug in the `GraphTxn` implementation in the 4.10.0 release (#2086) where it incorrectly determined the current transaction state and wasn't always creating a transaction when necessary (and conversely would try to incorrectly create a transaction when unnecessary)\r\n> \r\n> So the behaviour you are seeing with 5.0.0-SNAPSHOT is the correct expected behaviour\r\n> \r\n> Creating the iterator starts a read transaction that isn't committed until you explicitly `close()` the iterator. Trying to do a `g.add()` tries to start a write transaction but it can't because the read transaction is still in progress.\r\n> \r\n> If you plan to use `GraphTxn` seriously then you should explicitly manage the transactions to get the transaction boundaries appropriate to your application.\r\n\r\nadditional note about the original issue. the following test also works in < 5.0.0-SNAPSHOT.\r\nSo, the easiest fix to add `close` in terminal operations (such as `toList`) won't help.\r\n```\r\nNode x = NodeFactory.createURI(\"X\");\r\nNode q = NodeFactory.createURI(\"Q\");\r\nGraphTxn g = new GraphTxn();\r\ng.add(Triple.create(x, q, q));\r\nExtendedIterator<Triple> it = g.find(Triple.create(x, Node.ANY, Node.ANY));\r\nit.next();\r\ng.add(Triple.create(q, q, x));\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1891974098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892179687","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1892179687","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1892179687,"node_id":"IC_kwDOAHF7Ec5wyF7n","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T13:29:20Z","updated_at":"2024-01-15T13:29:20Z","author_association":"MEMBER","body":"> this test works without exception in early versions, for example, 4.7.0\r\n> \r\n> perhaps it has always worked incorrectly? If so, it would be a surprise to end users.\r\n\r\nYes, that's related to your discussion in #1961 which @afs addressed in #1964.  In earlier releases of Jena the `GraphTxn.find()` was not run in a transaction at all.\r\n\r\nSometimes bugs exist silently for a long time before a user/developer spots e.g. #2150 was only recently reported by a user and I complete coincidentally also hit another instance of that bug in the same week.  That's just the nature of any sufficiently large software project\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892179687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892410709","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1892410709","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1892410709,"node_id":"IC_kwDOAHF7Ec5wy-VV","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T15:46:25Z","updated_at":"2024-01-15T15:46:25Z","author_association":"CONTRIBUTOR","body":"One more exception. This time \"Transactions cannot be nested!\"\r\n```\r\nGraphTxn g = new GraphTxn();\r\nSystem.out.println(g.find().toList().size()); // if g.size() no exception\r\n\r\ng.begin(TxnType.READ);\r\nSystem.out.println(g.size());\r\ng.end();\r\n```\r\n\r\n```\r\norg.apache.jena.sparql.JenaTransactionException: Transactions cannot be nested!\r\n\r\n\tat org.apache.jena.sparql.core.mem.DatasetGraphInMemory.begin(DatasetGraphInMemory.java:149)\r\n\tat org.apache.jena.sparql.graph.GraphTxn.begin(GraphTxn.java:67)\r\n\tat com.gitlab.sszuev.playjena.GraphTxnTest.test(GraphTxnTest.java:30)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892410709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892461884","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1892461884","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1892461884,"node_id":"IC_kwDOAHF7Ec5wzK08","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T16:19:17Z","updated_at":"2024-01-15T16:19:17Z","author_association":"MEMBER","body":"> One more exception. This time \"Transactions cannot be nested!\"\r\n> \r\n> ```\r\n> GraphTxn g = new GraphTxn();\r\n> System.out.println(g.find().toList().size()); // if g.size() no exception\r\n> \r\n> g.begin(TxnType.READ);\r\n> System.out.println(g.size());\r\n> g.end();\r\n> ```\r\n> \r\n>  ```\r\n> org.apache.jena.sparql.JenaTransactionException: Transactions cannot be nested!\r\n> \r\n> \tat org.apache.jena.sparql.core.mem.DatasetGraphInMemory.begin(DatasetGraphInMemory.java:149)\r\n> \tat org.apache.jena.sparql.graph.GraphTxn.begin(GraphTxn.java:67)\r\n> \tat com.gitlab.sszuev.playjena.GraphTxnTest.test(GraphTxnTest.java:30)\r\n> \tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n> ```\r\n\r\nIn which Jena version?  5.0.0-SNAPSHOT?\r\n\r\nI guess the returned iterator isn't aware that `toList()` effectively consumes it so it isn't `close()`'d and thus never terminates the automatically begun transaction?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892461884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892473113","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1892473113","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1892473113,"node_id":"IC_kwDOAHF7Ec5wzNkZ","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T16:26:48Z","updated_at":"2024-01-15T16:26:48Z","author_association":"CONTRIBUTOR","body":"5.0.0-SNAPSHOT\r\nas you said before `toList()` should cause an exception ? ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892473113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892626713","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1892626713","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1892626713,"node_id":"IC_kwDOAHF7Ec5wzzEZ","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T18:33:38Z","updated_at":"2024-01-15T18:33:38Z","author_association":"CONTRIBUTOR","body":"@afs \r\nafter adding start/end/commit I no longer see failures in 5.0.0-SNAPSHOT,\r\nbut the tests started to fail on the new code for version 4.10.0 (calling `toList` in a transaction). As far as I understand, these are bugs from the old version of the `GraphTxn`, so it is ok.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892626713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892776947","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1892776947","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1892776947,"node_id":"IC_kwDOAHF7Ec5w0Xvz","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T21:21:44Z","updated_at":"2024-01-15T21:21:44Z","author_association":"MEMBER","body":"The `Txn` allows transaction-in-transaction. It is not full nested transactions. It tests whether the original outer transaction permits the inner one. Only committing the outer one will commit the externally visible transaction.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892776947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892778529","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1892778529","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1892778529,"node_id":"IC_kwDOAHF7Ec5w0YIh","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T21:23:29Z","updated_at":"2024-01-15T21:23:29Z","author_association":"CONTRIBUTOR","body":"@afs I did the same thing :-) \r\nBut the estimated runtime for the benchmarks  is > 12 hours. So I did not wait for them to finish. I only ran the unit tests, which work fine.\r\n\r\n@sszuev Your benchmarks seem to test for throughput in different scenarios. If I understand the code correctly, there is always one graph to start with and then multiple threads doing almost the same operations (sometimes triples depend on tread or iteration number) working on that same graph in multiple iterations. Most of them mix read and write operations. \r\nFor all Tests with write operations they basically only wait until it is their turn. So all these operations are executed sequentially but in an undetertermined order.\r\nDid I miss something?\r\n\r\nIn my implementation, the semapthore for the write locks ist not fair (maybe I should be).\r\nWith your current benchmarks, my graph would need longer timeouts and/or a fair semaphore, I guess.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892778529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892798174","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1892798174","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1892798174,"node_id":"IC_kwDOAHF7Ec5w0c7e","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T21:48:04Z","updated_at":"2024-01-15T22:13:36Z","author_association":"MEMBER","body":"> I guess the returned iterator isn't aware that toList() effectively consumes it so it isn't close()'d \r\n\r\nLooks that way. The code isn't seeing hasNext: true -> false nor is `hasNext` being called.\r\n\r\n`GraphTxn.toList` uses `ExtendedIterator.forEachRemaining` which in `WrappedIterator` call the wrapped class and so bypasses `hasNext`.\r\n\r\nFor clarity - there is now a specific issue for this: https://github.com/apache/jena/issues/2197\r\n\r\nExtendedIterators are best used as: `try { ... } finally { iter.close(); }` in case the action throws an unexpected exception.\r\n\r\nAnother fix would be for `NiceIterator.asList` to call `forEach`, which does close, not `forEachRemaining` (there are both because of some legacy - they have different signatures). The `forEachRemaining` case stil needs fixing.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892798174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892820950","html_url":"https://github.com/apache/jena/issues/2197#issuecomment-1892820950","issue_url":"https://api.github.com/repos/apache/jena/issues/2197","id":1892820950,"node_id":"IC_kwDOAHF7Ec5w0ifW","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T22:15:26Z","updated_at":"2024-01-15T22:15:26Z","author_association":"MEMBER","body":"`GraphTxn.toList` uses `ExtendedIterator.forEachRemaining` which in `WrappedIterator` calls the wrapped class and so bypasses `GraphTxn.IteratorTxn.hasNext`.\r\n\r\nExtendedIterators are best used as: `try { ... } finally { iter.close(); }` in case the action throws an unexpected exception.\r\n\r\nIf `NiceIterator.asList`, which is the code for `iter.toList()` called `forEach`, which does call close, instead of `forEachRemaining`.\r\n\r\nThe `forEachRemaining` case still needs fixing.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892820950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892823073","html_url":"https://github.com/apache/jena/issues/2197#issuecomment-1892823073","issue_url":"https://api.github.com/repos/apache/jena/issues/2197","id":1892823073,"node_id":"IC_kwDOAHF7Ec5w0jAh","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-15T22:17:53Z","updated_at":"2024-01-15T22:17:53Z","author_association":"MEMBER","body":"See also https://github.com/apache/jena/issues/2086, which backports a Jena5 fix to the Jena4 branch.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1892823073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1893205295","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1893205295","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1893205295,"node_id":"IC_kwDOAHF7Ec5w2AUv","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T07:36:06Z","updated_at":"2024-01-16T12:30:59Z","author_association":"CONTRIBUTOR","body":"The tests are based on various scenarios that are executed in multithreading (java-executors and kotlin-coroutines in tests - it does not matter) and in cycles. There are `CyclicBarrier` and `CountDownLatch` that provide simultaneous execution of scenarios.\r\nThere are also checks for invariants.\r\nThis is a classic scheme, without barriers we can't be sure that there is really parallel execution.\r\nScenarios are different, some only R, some W, most are RW. \r\nThese scenarios were written without any particular understanding of what needs to be tested, i.e. this is a set of some operations that were collected into one scenario based on some intuitive thoughts.\r\n\r\nBenchmarks  also contains functional, i.e. classic, benchmarks, where single operation is measured.\r\n\r\n--------------- \r\n\r\n@arne-bdt I added your implementation to benchmarks and tests suites.\r\nsee branch jena-5.x.x-SWMR; https://github.com/sszuev/concurrent-rdf-graph/tree/jena-5.x.x-SWMR\r\nNote that I changed version of project `5.0.0-SNAPSHOT-SWMR` in order to work with the official `5.0.0-SNAPSHOT` and your branch installed locally without re-installing.\r\n\r\n---------------\r\n\r\nI ran benchmarks with the parameters `-wi 2 -i 3`,  Total time: 08:00:12\r\nA classic SYNCHRONIZED_GRAPH_V1 is the faster one, WRAPPER_TRANSACTIONAL2_GRAPH on the last place.\r\nSYNCHRONIZED_GRAPH_V2 - second place, this is advanced implementation, which does not store iterator's data in memory.\r\n \r\nAnd important note: there are failures when running WRAPPER_TRANSACTIONAL2_GRAPH, so not all benchmarks have been collected.\r\nSee logs attached.  \r\n```\r\nBenchmark                                                                         (factory)   Mode  Cnt         Score        Error  Units\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_6x21                         TXN_GRAPH  thrpt   15        64,930 ±      7,678  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_6x21             SYNCHRONIZED_GRAPH_V1  thrpt   15       232,215 ±     38,918  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_6x21             SYNCHRONIZED_GRAPH_V2  thrpt   15       241,507 ±     26,096  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_6x21               RW_LOCKING_GRAPH_V1  thrpt   15       231,456 ±     49,945  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_6x21               RW_LOCKING_GRAPH_V2  thrpt   15       232,684 ±     34,847  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_6x21      WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15         0,069 ±      0,001  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x4                         TXN_GRAPH  thrpt   15         6,328 ±      0,291  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x4             SYNCHRONIZED_GRAPH_V1  thrpt   15         4,606 ±      1,331  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x4             SYNCHRONIZED_GRAPH_V2  thrpt   15         2,954 ±      0,220  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x4               RW_LOCKING_GRAPH_V1  thrpt   15         4,845 ±      0,465  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x4               RW_LOCKING_GRAPH_V2  thrpt   15         4,765 ±      0,541  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x4      WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15         0,067 ±      0,001  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x11                         TXN_GRAPH  thrpt   15         1,131 ±      0,016  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x11             SYNCHRONIZED_GRAPH_V1  thrpt   15       159,767 ±     17,675  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x11             SYNCHRONIZED_GRAPH_V2  thrpt   15       156,280 ±     16,911  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x11               RW_LOCKING_GRAPH_V1  thrpt   15       161,223 ±     26,616  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x11               RW_LOCKING_GRAPH_V2  thrpt   15       158,052 ±     20,801  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x11      WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15       174,225 ±     40,285  ops/s\r\nFunctionalBenchmarks.ADD                                              SYNCHRONIZED_GRAPH_V1  thrpt   15   9507833,994 ± 869229,620  ops/s\r\nFunctionalBenchmarks.ADD                                              SYNCHRONIZED_GRAPH_V2  thrpt   15   9364786,667 ± 375206,535  ops/s\r\nFunctionalBenchmarks.ADD                                                RW_LOCKING_GRAPH_V1  thrpt   15   9484691,317 ± 181337,215  ops/s\r\nFunctionalBenchmarks.ADD                                                RW_LOCKING_GRAPH_V2  thrpt   15   9560358,404 ± 215175,600  ops/s\r\nFunctionalBenchmarks.ADD                                                          TXN_GRAPH  thrpt   15    578039,756 ±  19580,417  ops/s\r\nFunctionalBenchmarks.ADD                                                          MEM_GRAPH  thrpt   15  10340640,978 ± 728912,121  ops/s\r\nFunctionalBenchmarks.ADD                                       WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15      3252,095 ±    781,614  ops/s\r\nFunctionalBenchmarks.CONTAINS                                         SYNCHRONIZED_GRAPH_V1  thrpt   15  13899056,559 ± 739607,369  ops/s\r\nFunctionalBenchmarks.CONTAINS                                         SYNCHRONIZED_GRAPH_V2  thrpt   15  13335406,849 ± 775383,488  ops/s\r\nFunctionalBenchmarks.CONTAINS                                           RW_LOCKING_GRAPH_V1  thrpt   15  12737718,035 ± 264032,537  ops/s\r\nFunctionalBenchmarks.CONTAINS                                           RW_LOCKING_GRAPH_V2  thrpt   15  12967674,455 ± 733900,276  ops/s\r\nFunctionalBenchmarks.CONTAINS                                                     TXN_GRAPH  thrpt   15   1011517,407 ±  35875,156  ops/s\r\nFunctionalBenchmarks.CONTAINS                                                     MEM_GRAPH  thrpt   15  14939271,773 ± 139467,875  ops/s\r\nFunctionalBenchmarks.CONTAINS                                  WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15      3733,116 ±   1102,551  ops/s\r\nFunctionalBenchmarks.COUNT                                            SYNCHRONIZED_GRAPH_V1  thrpt   15  20713402,946 ± 495506,189  ops/s\r\nFunctionalBenchmarks.COUNT                                            SYNCHRONIZED_GRAPH_V2  thrpt   15  20743633,609 ± 276745,250  ops/s\r\nFunctionalBenchmarks.COUNT                                              RW_LOCKING_GRAPH_V1  thrpt   15  18677039,197 ± 422703,739  ops/s\r\nFunctionalBenchmarks.COUNT                                              RW_LOCKING_GRAPH_V2  thrpt   15  18545840,762 ± 583214,365  ops/s\r\nFunctionalBenchmarks.COUNT                                                        TXN_GRAPH  thrpt   15    113679,704 ±   2759,275  ops/s\r\nFunctionalBenchmarks.COUNT                                                        MEM_GRAPH  thrpt   15  22498971,119 ± 182178,216  ops/s\r\nFunctionalBenchmarks.DELETE                                           SYNCHRONIZED_GRAPH_V1  thrpt   15   6531783,863 ± 111434,950  ops/s\r\nFunctionalBenchmarks.DELETE                                           SYNCHRONIZED_GRAPH_V2  thrpt   15   5980168,481 ± 138766,198  ops/s\r\nFunctionalBenchmarks.DELETE                                             RW_LOCKING_GRAPH_V1  thrpt   15   6004025,859 ± 188190,779  ops/s\r\nFunctionalBenchmarks.DELETE                                             RW_LOCKING_GRAPH_V2  thrpt   15   5828131,807 ±  71189,885  ops/s\r\nFunctionalBenchmarks.DELETE                                                       TXN_GRAPH  thrpt   15    457443,775 ±   2200,891  ops/s\r\nFunctionalBenchmarks.DELETE                                                       MEM_GRAPH  thrpt   15   6794662,701 ± 141559,073  ops/s\r\nFunctionalBenchmarks.DELETE                                    WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15      3492,775 ±    628,057  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                         SYNCHRONIZED_GRAPH_V1  thrpt   15   2436745,158 ±  47707,699  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                         SYNCHRONIZED_GRAPH_V2  thrpt   15    785148,924 ±  12140,536  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                           RW_LOCKING_GRAPH_V1  thrpt   15    777309,448 ±   8278,041  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                           RW_LOCKING_GRAPH_V2  thrpt   15    780578,613 ±   6091,941  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                                     TXN_GRAPH  thrpt   15    113831,962 ±   5882,211  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                                     MEM_GRAPH  thrpt   15   4071771,498 ±  48533,407  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                  WRAPPER_TRANSACTIONAL2_GRAPH  thrpt    3      4205,814 ±  12821,396  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                        SYNCHRONIZED_GRAPH_V1  thrpt   15   9878544,973 ± 130398,809  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                        SYNCHRONIZED_GRAPH_V2  thrpt   15   1895768,662 ±  21455,858  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                          RW_LOCKING_GRAPH_V1  thrpt   15   1868735,058 ±  22717,077  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                          RW_LOCKING_GRAPH_V2  thrpt   15   1864042,205 ±  33819,169  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                                    TXN_GRAPH  thrpt   15    821360,951 ±  17775,343  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                                    MEM_GRAPH  thrpt   15  16829918,234 ± 190392,137  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                 WRAPPER_TRANSACTIONAL2_GRAPH  thrpt    3      2870,380 ±  10246,865  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                 SYNCHRONIZED_GRAPH_V1  thrpt   15    429112,584 ±   5577,188  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                 SYNCHRONIZED_GRAPH_V2  thrpt   15    166994,601 ±   2825,367  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                   RW_LOCKING_GRAPH_V1  thrpt   15    164384,369 ±   2256,327  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                   RW_LOCKING_GRAPH_V2  thrpt   15    163507,147 ±   1040,422  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                             TXN_GRAPH  thrpt   15     39756,133 ±   1235,483  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                             MEM_GRAPH  thrpt   15    502636,605 ±  11395,114  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x6                       TXN_GRAPH  thrpt   15       173,808 ±      6,032  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x6           SYNCHRONIZED_GRAPH_V1  thrpt   15       416,793 ±      4,074  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x6           SYNCHRONIZED_GRAPH_V2  thrpt   15       196,966 ±      2,568  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x6             RW_LOCKING_GRAPH_V1  thrpt   15       176,334 ±      1,397  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x6             RW_LOCKING_GRAPH_V2  thrpt   15       179,059 ±      6,782  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5                        TXN_GRAPH  thrpt   15       216,288 ±      5,114  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5            SYNCHRONIZED_GRAPH_V1  thrpt   15       278,412 ±      3,210  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5            SYNCHRONIZED_GRAPH_V2  thrpt   15       219,668 ±      1,491  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5              RW_LOCKING_GRAPH_V1  thrpt   15       266,005 ±      3,070  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5              RW_LOCKING_GRAPH_V2  thrpt   15       267,921 ±      2,225  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5     WRAPPER_TRANSACTIONAL2_GRAPH  thrpt    6       345,026 ±     98,806  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14                      TXN_GRAPH  thrpt   15        83,603 ±      0,789  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14          SYNCHRONIZED_GRAPH_V1  thrpt   15       422,064 ±     10,011  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14          SYNCHRONIZED_GRAPH_V2  thrpt   15       123,621 ±      1,448  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14            RW_LOCKING_GRAPH_V1  thrpt   15        83,957 ±      1,430  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14            RW_LOCKING_GRAPH_V2  thrpt   15        82,960 ±      1,118  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14   WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15         5,725 ±      0,117  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DC_RW_6x14                     TXN_GRAPH  thrpt   15        47,662 ±      1,784  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DC_RW_6x14         SYNCHRONIZED_GRAPH_V1  thrpt   15       273,537 ±      8,762  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DC_RW_6x14         SYNCHRONIZED_GRAPH_V2  thrpt   15        88,320 ±      1,513  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DC_RW_6x14           RW_LOCKING_GRAPH_V1  thrpt   15        58,757 ±      0,697  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DC_RW_6x14           RW_LOCKING_GRAPH_V2  thrpt   15        58,869 ±      0,793  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DC_RW_6x14  WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   12         4,383 ±      0,085  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5                        TXN_GRAPH  thrpt   15       301,122 ±     27,625  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5            SYNCHRONIZED_GRAPH_V1  thrpt   15      1217,857 ±     11,667  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5            SYNCHRONIZED_GRAPH_V2  thrpt   15      1190,543 ±     15,668  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5              RW_LOCKING_GRAPH_V1  thrpt   15      1202,480 ±     20,628  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5              RW_LOCKING_GRAPH_V2  thrpt   15      1201,385 ±     16,531  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5     WRAPPER_TRANSACTIONAL2_GRAPH  thrpt   15       200,902 ±      7,643  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_H_RW_4x8                       TXN_GRAPH  thrpt   15       140,139 ±      3,358  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_H_RW_4x8           SYNCHRONIZED_GRAPH_V1  thrpt   15       215,947 ±      2,394  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_H_RW_4x8           SYNCHRONIZED_GRAPH_V2  thrpt   15       126,584 ±      1,533  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_H_RW_4x8             RW_LOCKING_GRAPH_V1  thrpt   15       126,836 ±      1,002  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_H_RW_4x8             RW_LOCKING_GRAPH_V2  thrpt   15       127,282 ±      1,476  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_K_RW_5x5                       TXN_GRAPH  thrpt   15       546,588 ±      4,167  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_K_RW_5x5           SYNCHRONIZED_GRAPH_V1  thrpt   15      2224,895 ±     30,334  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_K_RW_5x5           SYNCHRONIZED_GRAPH_V2  thrpt   15      1599,416 ±     14,426  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_K_RW_5x5             RW_LOCKING_GRAPH_V1  thrpt   15      1384,214 ±     31,430  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_K_RW_5x5             RW_LOCKING_GRAPH_V2  thrpt   15      1380,612 ±     22,594  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_K_RW_5x5    WRAPPER_TRANSACTIONAL2_GRAPH  thrpt    8        61,845 ±      6,815  ops/s\r\n```\r\n[benchmarks-160124-01.txt](https://github.com/apache/jena/files/13946789/benchmarks-160124-01.txt)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1893205295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894098809","html_url":"https://github.com/apache/jena/pull/2199#issuecomment-1894098809","issue_url":"https://api.github.com/repos/apache/jena/issues/2199","id":1894098809,"node_id":"IC_kwDOAHF7Ec5w5ad5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T16:33:09Z","updated_at":"2024-01-16T16:33:09Z","author_association":"MEMBER","body":"Actually, draft did indeed mean draft in this case :-) \r\n\r\nSome tests need to be added. The changes to GraphTxn should be complete ... subject to the tests passing.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894098809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894161522","html_url":"https://github.com/apache/jena/issues/2196#issuecomment-1894161522","issue_url":"https://api.github.com/repos/apache/jena/issues/2196","id":1894161522,"node_id":"IC_kwDOAHF7Ec5w5pxy","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T17:08:27Z","updated_at":"2024-01-16T17:14:35Z","author_association":"MEMBER","body":"Hi @Tomvbe,\r\n\r\nI tried with the development codebase and get the same results.\r\n\r\nJena uses [Titanium JSON-LD](https://github.com/filip26/titanium-json-ld) for parsing JSON-LD, The Jena5 dependency is on version Titanium 1.3.3 and Jena 4.10.0 depends on 1.3.2.\r\n\r\nTracing the example, Jena calls Titanium with \r\n\r\n```java\r\n    private void read(Document document, String baseURI, StreamRDF output, Context context) throws JsonLdError {\r\n        // JSON-LD to RDF\r\n        JsonLdOptions opts = getJsonLdOptions(baseURI, context);\r\n        RdfDataset dataset = JsonLd.toRdf(document).options(opts).base(baseURI).get();\r\n        extractPrefixes(document, output::prefix);\r\n        JenaTitanium.convert(dataset, profile, output);\r\n    }\r\n```\r\n`opts` is `new JsonLdOptions()`, `baseURI` is null.\r\n\r\nIt seems the URI coming back from Titanium in `RdfDataset` is \"http://example/documentRestaurant\" so it looks like an issue within Titanium.\r\n\r\ncc: @filip26\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894161522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894426723","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1894426723","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1894426723,"node_id":"IC_kwDOAHF7Ec5w6qhj","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T20:01:37Z","updated_at":"2024-01-16T20:01:37Z","author_association":"MEMBER","body":"```\r\n[INFO] error nanoid@5.0.4: The engine \"node\" is incompatible with this module. Expected version \"^18 || >=20\". Got \"16.20.2\"\r\n```\r\nbecause in the POM:\r\n```\r\n   <node.version>v16.20.2</node.version>\r\n```\r\nwe had problems a few months back because some Jenkins build servers are Ubuntu 8.04 LTS with node 16.\r\nhttps://issues.apache.org/jira/browse/INFRA-23954\r\n\r\nMay be we need to move to Jenkins pipelines and docker. \r\nhttps://www.jenkins.io/doc/book/pipeline/docker/\r\n\r\nUsing github action is also a possibility, but we have to manage secrets to push to ASF snapshots.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894426723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894478038","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1894478038","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1894478038,"node_id":"IC_kwDOAHF7Ec5w63DW","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-16T20:39:48Z","updated_at":"2024-01-16T20:39:48Z","author_association":"MEMBER","body":">Using github action is also a possibility, but we have to manage secrets to push to ASF snapshots.\r\n\r\nCan't we use Jenkins for Java and then GH Actions for JS? Just add a constraint to trigger that only if the change is for a file under jena-fuseki2/jena-fuseki-ui? On GH Actions we can copy recipes from other projects running Cypress too, which makes it easier (it's harder to find examples of how to configure Jenkins with different versions of Cypress, with Vue, etc.).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1894478038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1895937831","html_url":"https://github.com/apache/jena/pull/1344#issuecomment-1895937831","issue_url":"https://api.github.com/repos/apache/jena/issues/1344","id":1895937831,"node_id":"IC_kwDOAHF7Ec5xAbcn","user":{"login":"davidmireles","id":34380294,"node_id":"MDQ6VXNlcjM0MzgwMjk0","avatar_url":"https://avatars.githubusercontent.com/u/34380294?v=4","gravatar_id":"","url":"https://api.github.com/users/davidmireles","html_url":"https://github.com/davidmireles","followers_url":"https://api.github.com/users/davidmireles/followers","following_url":"https://api.github.com/users/davidmireles/following{/other_user}","gists_url":"https://api.github.com/users/davidmireles/gists{/gist_id}","starred_url":"https://api.github.com/users/davidmireles/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidmireles/subscriptions","organizations_url":"https://api.github.com/users/davidmireles/orgs","repos_url":"https://api.github.com/users/davidmireles/repos","events_url":"https://api.github.com/users/davidmireles/events{/privacy}","received_events_url":"https://api.github.com/users/davidmireles/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-17T14:34:12Z","updated_at":"2024-01-17T14:34:12Z","author_association":"NONE","body":"What is/was the outcome of the discussion on enabling updates to the geo-sparql spatial index?  I find this to be one limiting aspect of the Jena geo-sparql implementation that a number of other triple stores provide out-of-the box, and would be a very desired addition.  ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1895937831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1895946420","html_url":"https://github.com/apache/jena/pull/1344#issuecomment-1895946420","issue_url":"https://api.github.com/repos/apache/jena/issues/1344","id":1895946420,"node_id":"IC_kwDOAHF7Ec5xAdi0","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-17T14:38:28Z","updated_at":"2024-01-17T14:38:28Z","author_association":"CONTRIBUTOR","body":"maybe we shouldn't derail this thread, but as a stop-gap solution to your concern, we have implemented a method to manually update the geospatial index, which is currently good enough for our project : https://github.com/AKSW/fuseki-mods/tree/adaptions/jena-fmod-geosparql/src/main/java/org/apache/jena/fuseki/mod/geosparql","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1895946420/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1900196409","html_url":"https://github.com/apache/jena/issues/2200#issuecomment-1900196409","issue_url":"https://api.github.com/repos/apache/jena/issues/2200","id":1900196409,"node_id":"IC_kwDOAHF7Ec5xQrI5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T11:01:45Z","updated_at":"2024-01-19T11:14:47Z","author_association":"MEMBER","body":"Interesting! This style of usage wasn't in the design space so, in a touch of caution, note that the current usage patterns may go deep inside the code. For example, there isn't a per-transaction state object passed to every operation, it's implicit via `ThreadLocal`s. This then influences any assumed code sequences.\r\n\r\nI see no problem providing for adding a other `TransactionalSystem` implementations. Such implementations will need to take responsibility for correct behaviour. \r\n\r\nThe usual `TransactionalSystem` [is connected to the transaction coordinator](https://github.com/apache/jena/blob/main/jena-tdb2/src/main/java/org/apache/jena/tdb2/store/TDB2StorageBuilder.java#L93-L94).\r\n\r\nAre you planning on using any of Jena's transaction system implementation or having a separate implementation?\r\n\r\nSee also `TransactionalSystem.detach` / `TransactionalSystem.attach`.\r\n\r\nThe `ReentrantReadWriteLock` in `TransactionCoordinator` control exclusive/non-exclusive mode. \"read-write\" is not in terms of transaction read-write; it means \"non-exclusive\" and \"exclusive\" and happen to map to words \"read\" and \"write\" for a lock provided by the JRE.\r\n\r\nThe \"non-exclusive\" mode is normal mode (multiple reader and single writer (MR+SW)l transactions run non-exclusive. \r\nThe \"exclusive\" mode is system wide exclusive access for special system operations across the whole transaction system - e.g.the parallel bulk loader locks out all transactions and directly manipulates the TDB2 datastructures.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1900196409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1900509461","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1900509461","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1900509461,"node_id":"IC_kwDOAHF7Ec5xR3kV","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T14:22:18Z","updated_at":"2024-01-19T14:22:18Z","author_association":"CONTRIBUTOR","body":"@sszuev \r\nThank you very much for your benchmark- and test-suite! It helped me to find a race condition in my code.\r\n\r\nFrom my understanding, your tests and benchmarks are tailored for graphs that remain stable when accessed concurrently by multiple threads. However, I'm puzzled about their practicality without transaction support. For instance, consider the following code snippet which lacks transactional context, leading to no guaranteed consistency between successive method calls to the graph:\r\n```\r\nvar verTriple = g.find(versionTriple.getSubject(), versionTriple.getPredicate(), Node.ANY).next();\r\n \r\nfinal var ver = (Integer)verTriple.getObject().getLiteralValue() + 1;\r\n \r\ng.add(versionTriple.getSubject(), versionTriple.getPredicate(), NodeFactory.createLiteralByValue(ver));\r\n \r\ng.delete(verTriple);\r\n```\r\n\r\nIn my branch, [transactional](https://github.com/arne-bdt/concurrent-rdf-graph/tree/transactional), I've incorporated a transaction context around your benchmark and test code where it seemed fitting.\r\n\r\n The wrapper is coded like this:\r\n```\r\ninternal fun execInWriteTransaction(graph: Graph, runnable: Runnable) {\r\n     if(graph is Transactional) {\r\n         if(graph.isInTransaction) {\r\n             runnable.run()\r\n             return\r\n         }\r\n         graph.begin(ReadWrite.WRITE)\r\n     }\r\n     try {\r\n         runnable.run()\r\n         if(graph is Transactional) {\r\n             graph.commit()\r\n         }\r\n     } catch (e: Exception) {\r\n         if(graph is Transactional) {\r\n             graph.abort()\r\n         }\r\n         throw e\r\n     }\r\n}\r\n```\r\n\r\nBelow are my benchmark results for GRAPH_WRAPPER_TRANSACTIONAL and TXN_GRAPH:\r\n![Benchmark_Screenshot_Graphen](https://github.com/apache/jena/assets/53625519/516ddba8-e0e1-412c-b272-4ebd0698986a)\r\n\r\nThey look pretty bad for GRAPH_WRAPPER_TRANSACTIONAL and do not match my experience in real life scenarios.\r\nInterestingly, except for one unit test, GRAPH_WRAPPER_TRANSACTIONAL demonstrates commendable performance in all your tests.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1900509461/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1900662518","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1900662518","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1900662518,"node_id":"IC_kwDOAHF7Ec5xSc72","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-19T15:48:50Z","updated_at":"2024-01-19T16:36:52Z","author_association":"CONTRIBUTOR","body":">  However, I'm puzzled about their practicality without transaction support. For instance, consider the following code snippet which lacks transactional context, leading to no guaranteed consistency between successive method calls to the graph\r\n\r\nPractical use is discussed above. I suggested considering adding a new functionality to Jena - a concurrent graph. It is needed for [ONT-API](https://github.com/owlcs/ont-api). Additionally, I have provided the answer from ChatGPT about when a non-transactional concurrent graph can be used.\r\n\r\nIn short, the relationship between a concurrent and a transactional graph is similar to the relationship between a JDK's `ConcurrentHashMap` and a Redis.\r\nWe still use `ConcurrentHashMap`, although there is no guarantee of consistency.\r\nMoreover, based on concurrent-graph you can make a cache, or even a transaction graph.\r\n\r\n> The wrapper is coded like this\r\n\r\nThis code is already present in the `jena-5.x.x` & `jena-5.x.x-SWMR` branch, otherwise I would not be able to collect benchmarks due to `JenaTransactionException`:\r\n\r\nIt is made via kotlin's extension functions, \r\nsee https://github.com/sszuev/concurrent-rdf-graph/blob/jena-5.x.x-SWMR/src/test/kotlin/TestGraphs.kt#L83 :\r\n```kotlin\r\nfun <X> Graph.transactionWrite(action: Graph.() -> X): X {\r\n    try {\r\n        startWrite()\r\n        return action()\r\n    } finally {\r\n        endWrite()\r\n    }\r\n}\r\n\r\nprivate fun Graph.startRead() {\r\n    if (this is Transactional) {\r\n        this.begin(TxnType.READ)\r\n    }\r\n}\r\n\r\nprivate fun Graph.endRead() {\r\n    if (this is Transactional) {\r\n        this.end()\r\n    }\r\n}\r\n\r\nfun createFrom(source: Graph): Graph {\r\n    val res = createNew()\r\n    res.transactionWrite {\r\n        source.find().forEach { res.add(it) }\r\n    }\r\n    return res\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1900662518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1902672812","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1902672812","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1902672812,"node_id":"IC_kwDOAHF7Ec5xaHus","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-21T15:35:19Z","updated_at":"2024-01-21T15:35:19Z","author_association":"MEMBER","body":"> Can't we use Jenkins for Java and then GH Actions for JS?\r\n\r\nWe can - it still needs to publish (\"mvn deploy\") the artifact so that `jena-apache-webapp` can pick it up. The GH action needs to have push access to ASF Nexus, snapshots repository. Jobs on the ASF Jenkins server can deploy to that area of with no special setup - it's an ASF managed service and Nexus has per-project access controls. \r\n\r\nFrom a GH action, as an external build, this security has to be setup - there need to be secrets so the action can get push access to the snapshots area of Nexus.\r\n\r\nI think that is possible but the project now needs to manage the secrets with all the risk/responsibility that comes with that.\r\n\r\nA Jenkins pipeline + docker + maven is yet-another-system to get use to (a -ve) but I don't think it requires the security management overhead (a +ve).\r\n\r\nWe don't need a multi-language pipeline (c.f. https://www.jenkins.io/doc/book/pipeline/docker/#using-multiple-containers) because `frontend-maven-plugin` installs the JS tools.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1902672812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1902674812","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1902674812","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1902674812,"node_id":"IC_kwDOAHF7Ec5xaIN8","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-21T15:42:39Z","updated_at":"2024-01-21T16:00:37Z","author_association":"MEMBER","body":"First step : https://ci-builds.apache.org/job/Jena/job/Jena-pipeline/ \r\n\r\nwhich at the moment prints the maven version:\r\n\r\n```\r\n[Pipeline] sh\r\n+ mvn --version\r\nApache Maven 3.9.6 (bc0240f3c744dd6b6ec2920b3cd08dcc295161ae)\r\nMaven home: /usr/share/maven\r\nJava version: 17.0.9, vendor: Eclipse Adoptium, runtime: /opt/java/openjdk\r\nDefault locale: en_US, platform encoding: UTF-8\r\nOS name: \"linux\", version: \"5.15.0-88-generic\", arch: \"amd64\", family: \"unix\"\r\n```\r\nand\r\n\r\nGlib 2.35 !!!\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1902674812/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1902759437","html_url":"https://github.com/apache/jena/issues/2195#issuecomment-1902759437","issue_url":"https://api.github.com/repos/apache/jena/issues/2195","id":1902759437,"node_id":"IC_kwDOAHF7Ec5xac4N","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-21T20:49:11Z","updated_at":"2024-01-21T20:49:11Z","author_association":"MEMBER","body":"There isn't anything remaining here outside of #2197 that I can see.\r\nPlease reopen if anything has been missed.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1902759437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1903502954","html_url":"https://github.com/apache/jena/issues/2200#issuecomment-1903502954","issue_url":"https://api.github.com/repos/apache/jena/issues/2200","id":1903502954,"node_id":"IC_kwDOAHF7Ec5xdSZq","user":{"login":"lolgab","id":5793054,"node_id":"MDQ6VXNlcjU3OTMwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5793054?v=4","gravatar_id":"","url":"https://api.github.com/users/lolgab","html_url":"https://github.com/lolgab","followers_url":"https://api.github.com/users/lolgab/followers","following_url":"https://api.github.com/users/lolgab/following{/other_user}","gists_url":"https://api.github.com/users/lolgab/gists{/gist_id}","starred_url":"https://api.github.com/users/lolgab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lolgab/subscriptions","organizations_url":"https://api.github.com/users/lolgab/orgs","repos_url":"https://api.github.com/users/lolgab/repos","events_url":"https://api.github.com/users/lolgab/events{/privacy}","received_events_url":"https://api.github.com/users/lolgab/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-22T08:42:44Z","updated_at":"2024-01-22T08:42:44Z","author_association":"CONTRIBUTOR","body":"Thank you for your answer!\r\nYou are right in saying that the usage pattern goes deep inside the code. I tried to write a custom `TDBStorageBuilder` receiving a `TransactionalSystem` and it's not enough since I had a failure in [`TransactionalComponentLifecycle`](https://github.com/apache/jena/blob/cf7ea1c33af31cb117d463f601b7042954322eaf/jena-db/jena-dboe-transaction/src/main/java/org/apache/jena/dboe/transaction/txn/TransactionalComponentLifecycle.java#L48) which is deep inside of the implementation of TDB2.\r\nIt would be nice if Jena stopped relying on `ThreadLocal`s but used parameter passing to access the current `Transaction`, but I understand this is a big change and I'm not sure it's worth it. For my use case I can work around the problem by using Thread Pool where I assign a `Thread` to the whole transaction. Which works correctly.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1903502954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1903951293","html_url":"https://github.com/apache/jena/pull/2212#issuecomment-1903951293","issue_url":"https://api.github.com/repos/apache/jena/issues/2212","id":1903951293,"node_id":"IC_kwDOAHF7Ec5xe_29","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-22T12:55:29Z","updated_at":"2024-01-22T12:55:29Z","author_association":"MEMBER","body":"Repository:\r\n\r\nChangelog is unfortunately not being updated: https://github.com/zazuko/Yasgui/blob/v4.2.33/CHANGELOG.md\r\n\r\nGitHub release is also empty: https://github.com/zazuko/Yasgui/releases/tag/v4.2.33\r\n\r\nSo here's the tag compare: https://github.com/zazuko/Yasgui/compare/v4.2.32...v4.2.33\r\n\r\nIt seems to contain just dependency updates and a fix for mac os.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1903951293/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908327504","html_url":"https://github.com/apache/jena/issues/2196#issuecomment-1908327504","issue_url":"https://api.github.com/repos/apache/jena/issues/2196","id":1908327504,"node_id":"IC_kwDOAHF7Ec5xvsRQ","user":{"login":"filip26","id":340018,"node_id":"MDQ6VXNlcjM0MDAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/340018?v=4","gravatar_id":"","url":"https://api.github.com/users/filip26","html_url":"https://github.com/filip26","followers_url":"https://api.github.com/users/filip26/followers","following_url":"https://api.github.com/users/filip26/following{/other_user}","gists_url":"https://api.github.com/users/filip26/gists{/gist_id}","starred_url":"https://api.github.com/users/filip26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filip26/subscriptions","organizations_url":"https://api.github.com/users/filip26/orgs","repos_url":"https://api.github.com/users/filip26/repos","events_url":"https://api.github.com/users/filip26/events{/privacy}","received_events_url":"https://api.github.com/users/filip26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T15:10:23Z","updated_at":"2024-01-24T15:10:23Z","author_association":"NONE","body":"I confirm it's expansion bug. An input is expanded before serialization into RDF so the bug propagates down the stream. Will be fixed.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908327504/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908801813","html_url":"https://github.com/apache/jena/issues/2214#issuecomment-1908801813","issue_url":"https://api.github.com/repos/apache/jena/issues/2214","id":1908801813,"node_id":"IC_kwDOAHF7Ec5xxgEV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T19:42:30Z","updated_at":"2024-01-24T19:42:30Z","author_association":"MEMBER","body":"Confirmed!\r\n\r\nYou can use `\"\"\"`-strings for Jena5.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908801813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908869969","html_url":"https://github.com/apache/jena/issues/1754#issuecomment-1908869969","issue_url":"https://api.github.com/repos/apache/jena/issues/1754","id":1908869969,"node_id":"IC_kwDOAHF7Ec5xxwtR","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T20:32:48Z","updated_at":"2024-01-24T20:32:48Z","author_association":"MEMBER","body":"With jena5 dev this happens: the build succeeds but there are stacktraces.\r\n\r\nI suggest we close this issue as it doesn't seem to happen in use. We can reopen if it becomes a problem.\r\n\r\n<details>\r\n<summary>jena-fuseki2/jena-fuseki-uii$ mvn clean install ... (long)</summary>\r\n<pre>\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] -------------------< org.apache.jena:jena-fuseki-ui >-------------------\r\n[INFO] Building Apache Jena - Fuseki UI 5.0.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] --- clean:3.3.2:clean (default-clean) @ jena-fuseki-ui ---\r\n[INFO] Deleting /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target\r\n[INFO] \r\n[INFO] --- enforcer:3.4.1:enforce (enforce-maven-version) @ jena-fuseki-ui ---\r\n[INFO] Rule 0: org.apache.maven.enforcer.rules.version.RequireMavenVersion passed\r\n[INFO] \r\n[INFO] --- enforcer:3.4.1:enforce (enforce-java-version) @ jena-fuseki-ui ---\r\n[INFO] Rule 0: org.apache.maven.enforcer.rules.version.RequireJavaVersion passed\r\n[INFO] \r\n[INFO] --- enforcer:3.4.1:enforce (enforce) @ jena-fuseki-ui ---\r\n[INFO] Rule 0: org.apache.maven.enforcer.rules.dependency.DependencyConvergence passed\r\n[INFO] Rule 1: org.apache.maven.enforcer.rules.RequirePluginVersions passed\r\n[INFO] Rule 2: org.apache.maven.enforcer.rules.dependency.RequireReleaseDeps passed\r\n[INFO] Rule 3: org.apache.maven.enforcer.rules.version.RequireMavenVersion passed\r\n[INFO] \r\n[INFO] --- remote-resources:3.1.0:process (process-resource-bundles) @ jena-fuseki-ui ---\r\n[INFO] Preparing remote bundle org.apache.apache.resources:apache-jar-resource-bundle:1.5\r\n[INFO] Copying 3 resources from 1 bundle.\r\n[INFO] \r\n[INFO] --- frontend:1.15.0:install-node-and-yarn (install node and yarn) @ jena-fuseki-ui ---\r\n[INFO] Node v16.20.2 is already installed.\r\n[INFO] Yarn 1.22.17 is already installed.\r\n[INFO] \r\n[INFO] --- frontend:1.15.0:yarn (yarn install) @ jena-fuseki-ui ---\r\n[INFO] Running 'yarn install --frozen-lockfile' in /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui\r\n[INFO] yarn install v1.22.17\r\n[INFO] [1/4] Resolving packages...\r\n[INFO] success Already up-to-date.\r\n[INFO] Done in 0.15s.\r\n[INFO] \r\n[INFO] --- frontend:1.15.0:yarn (yarn run build) @ jena-fuseki-ui ---\r\n[INFO] Running 'yarn run build' in /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui\r\n[INFO] yarn run v1.22.17\r\n[INFO] $ vite build\r\n[INFO] vite v4.5.2 building for production...\r\n[INFO] transforming...\r\n[INFO] node_modules/@zazuko/yasqe/build/yasqe.min.js (2:274794) Use of eval in \"node_modules/@zazuko/yasqe/build/yasqe.min.js\" is strongly discouraged as it poses security risks and may cause issues with minification.\r\n[INFO] node_modules/@zazuko/yasr/build/yasr.min.js (2:445859) Use of eval in \"node_modules/@zazuko/yasr/build/yasr.min.js\" is strongly discouraged as it poses security risks and may cause issues with minification.\r\n[INFO] ✓ 234 modules transformed.\r\n[INFO] rendering chunks...\r\n[INFO] computing gzip size...\r\n[INFO] target/webapp/index.html                                                1.51 kB │ gzip:     0.87 kB\r\n[INFO] target/webapp/static/logo-af58c023.svg                                  4.06 kB │ gzip:     1.81 kB\r\n[INFO] target/webapp/static/Edit-5d0f417c.css                                  6.02 kB │ gzip:     1.59 kB\r\n[INFO] target/webapp/static/logo-af58c023.svg                                  4.06 kB │ gzip:     1.81 kB\r\n[INFO] (!) Some chunks are larger than 550 kBs after minification. Consider:\r\n[INFO] - Using dynamic import() to code-split the application\r\n[INFO] - Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks\r\n[INFO] - Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.\r\n[INFO] target/webapp/static/Query-b5173a59.css                                40.94 kB │ gzip:     7.09 kB\r\n[INFO] target/webapp/static/index-fb468c02.css                               384.84 kB │ gzip:    52.30 kB\r\n[INFO] target/webapp/static/index-f030cefe.js                                  1.89 kB │ gzip:     1.17 kB │ map:     1.30 kB\r\n[INFO] target/webapp/static/Help-724ead24.js                                   3.43 kB │ gzip:     1.95 kB │ map:     1.96 kB\r\n[INFO] target/webapp/static/Menu-a9f2af81.js                                   5.37 kB │ gzip:     2.65 kB │ map:     3.26 kB\r\n[INFO] target/webapp/static/Tasks-e9a599a2.js                                  8.66 kB │ gzip:     3.94 kB │ map:     5.30 kB\r\n[INFO] target/webapp/static/current-dataset-navigation-guards-7c867ce8.js     14.50 kB │ gzip:     6.31 kB │ map:     9.07 kB\r\n[INFO] target/webapp/static/NewDataset-37a6bb6c.js                            14.60 kB │ gzip:     5.70 kB │ map:     8.81 kB\r\n[INFO] target/webapp/static/ExistingDatasets-d6af05bc.js                      23.46 kB │ gzip:     7.65 kB │ map:    14.09 kB\r\n[INFO] target/webapp/static/Info-7ddd502e.js                                  28.96 kB │ gzip:     9.85 kB │ map:    17.59 kB\r\n[INFO] target/webapp/static/Upload-581cec26.js                               207.53 kB │ gzip:    59.72 kB │ map:   125.12 kB\r\n[INFO] target/webapp/static/bootstrap.esm-fd8daac5.js                        522.44 kB │ gzip:   144.92 kB │ map:   330.49 kB\r\n[INFO] target/webapp/static/Edit-82088a07.js                               1,130.29 kB │ gzip:   348.82 kB │ map:   711.52 kB\r\n[INFO] target/webapp/static/index-85525b40.js                              3,686.59 kB │ gzip: 1,138.77 kB │ map: 2,495.03 kB\r\n[INFO] target/webapp/static/Query-47b16ab8.js                              4,855.54 kB │ gzip: 1,287.81 kB │ map: 2,711.13 kB\r\n[INFO] ✓ built in 6.98s\r\n[INFO] Done in 7.29s.\r\n[INFO] \r\n[INFO] --- resources:3.3.1:resources (default-resources) @ jena-fuseki-ui ---\r\n[INFO] skip non existing resourceDirectory /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/src/main/resources\r\n[INFO] Copying 3 resources from target/maven-shared-archive-resources to target/classes\r\n[INFO] \r\n[INFO] --- build-helper:3.5.0:reserve-network-port (reserve-network-port) @ jena-fuseki-ui ---\r\n[INFO] Reserved port 46533 for org.apache.jena.fuseki.port\r\n[INFO] Reserved port 41659 for org.apache.jena.fuseki.ui.port\r\n[INFO] \r\n[INFO] --- compiler:3.12.1:compile (default-compile) @ jena-fuseki-ui ---\r\n[INFO] No sources to compile\r\n[INFO] \r\n[INFO] --- resources:3.3.1:testResources (default-testResources) @ jena-fuseki-ui ---\r\n[INFO] skip non existing resourceDirectory /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/src/test/resources\r\n[INFO] Copying 3 resources from target/maven-shared-archive-resources to target/test-classes\r\n[INFO] \r\n[INFO] --- compiler:3.12.1:testCompile (default-testCompile) @ jena-fuseki-ui ---\r\n[INFO] No sources to compile\r\n[INFO] \r\n[INFO] --- surefire:3.2.5:test (default-test) @ jena-fuseki-ui ---\r\n[INFO] \r\n[INFO] --- frontend:1.15.0:yarn (yarn run test:unit) @ jena-fuseki-ui ---\r\n[INFO] Running 'yarn run test:unit' in /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui\r\n[INFO] yarn run v1.22.17\r\n[INFO] $ vitest run --environment jsdom\r\n[INFO] \r\n[INFO]  RUN  v0.34.6 /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui\r\n[INFO] \r\n[INFO]  ✓ tests/unit/utils/query.spec.js  (1 test) 4ms\r\n[INFO]  ✓ tests/unit/services/fuseki.service.spec.js  (20 tests) 23ms\r\n[INFO]  ✓ tests/unit/components/serverstatus.vue.spec.js  (3 tests) 20ms\r\n[INFO]  ✓ tests/unit/components/dataset/tablelisting.vue.spec.js  (2 tests) 34ms\r\n[INFO] \r\n[INFO]  Test Files  4 passed (4)\r\n[INFO]       Tests  26 passed (26)\r\n[INFO]    Start at  20:26:15\r\n[INFO]    Duration  1.15s (transform 253ms, setup 0ms, collect 625ms, tests 81ms, environment 728ms, prepare 801ms)\r\n[INFO] \r\n[INFO] Done in 1.57s.\r\n[INFO] \r\n[INFO] --- frontend:1.15.0:yarn (yarn run test:e2e) @ jena-fuseki-ui ---\r\n[INFO] Running 'yarn run test:e2e' in /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui\r\n[INFO] yarn run v1.22.17\r\n[INFO] $ cross-env FUSEKI_PORT=\"${FUSEKI_PORT:=3030}\" PORT=\"${PORT:=8080}\" concurrently --names 'SERVER,CLIENT,TESTS' --prefix-colors 'yellow,blue,green' --success 'first' --kill-others 'yarn run serve:fuseki' 'yarn wait-on http://localhost:${FUSEKI_PORT}/$/ping && yarn run dev' 'yarn wait-on http-get://localhost:${PORT}/index.html && cypress run $@'\r\n[INFO] [SERVER] $ nodemon src/services/mock/json-server.js\r\n[INFO] [CLIENT] $ /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/node_modules/.bin/wait-on 'http://localhost:46533/$/ping'\r\n[INFO] [TESTS] $ /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/node_modules/.bin/wait-on http-get://localhost:41659/index.html\r\n[INFO] [SERVER] [nodemon] 3.0.1\r\n[INFO] [SERVER] [nodemon] to restart at any time, enter `rs`\r\n[INFO] [SERVER] [nodemon] watching path(s): *.*\r\n[INFO] [SERVER] [nodemon] watching extensions: js,mjs,cjs,json\r\n[INFO] [SERVER] [nodemon] starting `node src/services/mock/json-server.js`\r\n[INFO] [SERVER] JSON Server is running\r\n[INFO] [SERVER] HEAD /$/ping 200 1.127 ms - 40\r\n[INFO] [CLIENT] $ vite\r\n[INFO] [CLIENT] \r\n[INFO] [CLIENT]   VITE v4.5.2  ready in 259 ms\r\n[INFO] [CLIENT] \r\n[INFO] [CLIENT]   ➜  Local:   http://localhost:41659/\r\n[INFO] [CLIENT]   ➜  Network: use --host to expose\r\n[INFO] [SERVER] GET /index.html 200 0.471 ms - 2\r\n[INFO] [TESTS] Your system is missing the dependency: Xvfb\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] Install Xvfb and run Cypress again.\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] Read our documentation on dependencies for more information:\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] https://on.cypress.io/required-dependencies\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] If you are using Docker, we provide containers with all required dependencies installed.\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] ----------\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] Error: spawn Xvfb ENOENT\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] ----------\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] Platform: linux-x64 (Ubuntu - 23.10)\r\n[INFO] [TESTS] Cypress Version: 13.5.0\r\n[INFO] [TESTS] yarn wait-on http-get://localhost:${PORT}/index.html && cypress run $@ exited with code 1\r\n[INFO] --> Sending SIGTERM to other processes..\r\n[INFO] [SERVER] yarn run serve:fuseki exited with code SIGTERM\r\n[INFO] --> Sending SIGTERM to other processes..\r\n[INFO] [CLIENT] yarn wait-on http://localhost:${FUSEKI_PORT}/$/ping && yarn run dev exited with code SIGTERM\r\n[INFO] error Command failed with exit code 1.\r\n[INFO] error Command failed with exit code 1.info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\r\n[ERROR] There are test failures.\r\nFailed to run task: 'yarn run test:e2e' failed.\r\ncom.github.eirslett.maven.plugins.frontend.lib.TaskRunnerException: 'yarn run test:e2e' failed.\r\n    at com.github.eirslett.maven.plugins.frontend.lib.YarnTaskExecutor.execute (YarnTaskExecutor.java:64)\r\n    at com.github.eirslett.maven.plugins.frontend.mojo.YarnMojo.execute (YarnMojo.java:65)\r\n    at com.github.eirslett.maven.plugins.frontend.mojo.AbstractFrontendMojo.execute (AbstractFrontendMojo.java:94)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:103)\r\n    at java.lang.reflect.Method.invoke (Method.java:580)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\nCaused by: com.github.eirslett.maven.plugins.frontend.lib.ProcessExecutionException: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.ProcessExecutor.execute (ProcessExecutor.java:82)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.ProcessExecutor.executeAndRedirectOutput (ProcessExecutor.java:64)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.YarnExecutor.executeAndRedirectOutput (YarnExecutor.java:28)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.YarnTaskExecutor.execute (YarnTaskExecutor.java:58)\r\n    at com.github.eirslett.maven.plugins.frontend.mojo.YarnMojo.execute (YarnMojo.java:65)\r\n    at com.github.eirslett.maven.plugins.frontend.mojo.AbstractFrontendMojo.execute (AbstractFrontendMojo.java:94)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:103)\r\n    at java.lang.reflect.Method.invoke (Method.java:580)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\nCaused by: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.ProcessExecutor.execute (ProcessExecutor.java:74)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.ProcessExecutor.executeAndRedirectOutput (ProcessExecutor.java:64)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.YarnExecutor.executeAndRedirectOutput (YarnExecutor.java:28)\r\n    at com.github.eirslett.maven.plugins.frontend.lib.YarnTaskExecutor.execute (YarnTaskExecutor.java:58)\r\n    at com.github.eirslett.maven.plugins.frontend.mojo.YarnMojo.execute (YarnMojo.java:65)\r\n    at com.github.eirslett.maven.plugins.frontend.mojo.AbstractFrontendMojo.execute (AbstractFrontendMojo.java:94)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:328)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:316)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:212)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:174)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:75)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:162)\r\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:159)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:261)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:173)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:101)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:906)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:283)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:206)\r\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:103)\r\n    at java.lang.reflect.Method.invoke (Method.java:580)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:283)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:226)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:407)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\n[INFO] \r\n[INFO] --- jar:3.3.0:jar (default-jar) @ jena-fuseki-ui ---\r\n[INFO] Building jar: /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target/jena-fuseki-ui-5.0.0-SNAPSHOT.jar\r\n[INFO] \r\n[INFO] --- site:3.12.1:attach-descriptor (attach-descriptor) @ jena-fuseki-ui ---\r\n[INFO] Skipping because packaging 'jar' is not pom.\r\n[INFO] \r\n[INFO] --- cyclonedx:2.7.11:makeAggregateBom (build-sbom-cyclonedx) @ jena-fuseki-ui ---\r\n[INFO] CycloneDX: Resolving Dependencies\r\n[INFO] CycloneDX: Creating BOM version 1.4 with 0 component(s)\r\n[INFO] CycloneDX: Writing and validating BOM (XML): /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target/jena-fuseki-ui-5.0.0-SNAPSHOT-bom.xml\r\n[INFO]            attaching as jena-fuseki-ui-5.0.0-SNAPSHOT-cyclonedx.xml\r\n[INFO] CycloneDX: Writing and validating BOM (JSON): /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target/jena-fuseki-ui-5.0.0-SNAPSHOT-bom.json\r\n[WARNING] Unknown keyword additionalItems - you should define your own Meta Schema. If the keyword is irrelevant for validation, just use a NonValidationKeyword\r\n[INFO]            attaching as jena-fuseki-ui-5.0.0-SNAPSHOT-cyclonedx.json\r\n[INFO] \r\n[INFO] --- install:3.1.1:install (default-install) @ jena-fuseki-ui ---\r\n[INFO] Installing /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/pom.xml to /home/afs/.m2/repository/org/apache/jena/jena-fuseki-ui/5.0.0-SNAPSHOT/jena-fuseki-ui-5.0.0-SNAPSHOT.pom\r\n[INFO] Installing /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target/jena-fuseki-ui-5.0.0-SNAPSHOT.jar to /home/afs/.m2/repository/org/apache/jena/jena-fuseki-ui/5.0.0-SNAPSHOT/jena-fuseki-ui-5.0.0-SNAPSHOT.jar\r\n[INFO] Installing /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target/jena-fuseki-ui-5.0.0-SNAPSHOT-bom.xml to /home/afs/.m2/repository/org/apache/jena/jena-fuseki-ui/5.0.0-SNAPSHOT/jena-fuseki-ui-5.0.0-SNAPSHOT-cyclonedx.xml\r\n[INFO] Installing /home/afs/ASF/jena5/jena-fuseki2/jena-fuseki-ui/target/jena-fuseki-ui-5.0.0-SNAPSHOT-bom.json to /home/afs/.m2/repository/org/apache/jena/jena-fuseki-ui/5.0.0-SNAPSHOT/jena-fuseki-ui-5.0.0-SNAPSHOT-cyclonedx.json\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  12.398 s\r\n[INFO] Finished at: 2024-01-24T20:26:18Z\r\n[INFO] ------------------------------------------------------------------------\r\n</pre>\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908869969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908898490","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1908898490","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1908898490,"node_id":"IC_kwDOAHF7Ec5xx3q6","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T20:54:15Z","updated_at":"2024-01-24T20:57:29Z","author_association":"MEMBER","body":"I got as far as:\r\nhttps://ci-builds.apache.org/job/Jena/job/Jena-pipeline/19/console\r\n\r\n(had to turn off RAT - it seems to find the maven repo)\r\n\r\nwhich fails at:\r\n```\r\n[INFO] Failed to access /.cache/Cypress:\r\n[INFO] \r\n[INFO] EACCES: permission denied, mkdir '/.cache'\r\n```\r\nIn the pipeline as a docker container, `HOME=/` and `PWD=/home/jenkins/workspace/Jena/Jena-pipeline`. The pipeline creates a directory `Code` (`$PWD/Code`) and runs the build in there.\r\n\r\n\r\n so looks like it is trying to use `$HOME/.cache`.\r\n\r\nNeed to move HOME or tell Cypress where to cache.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908898490/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908933493","html_url":"https://github.com/apache/jena/issues/1754#issuecomment-1908933493","issue_url":"https://api.github.com/repos/apache/jena/issues/1754","id":1908933493,"node_id":"IC_kwDOAHF7Ec5xyAN1","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T21:18:42Z","updated_at":"2024-01-24T21:18:42Z","author_association":"MEMBER","body":">[INFO] [TESTS] Your system is missing the dependency: Xvfb\r\n\r\nYeah, no idea what could be missing on the ASF Jenkins server. We have a few jobs in Jenkins to publish snapshots in Commons, but I think 100% of the builds happen in GH Actions. All the Vue projects I contribute to are also running Cypress on GH Actions. I never worked with Cypress on Jenkins, so no clue here.\r\n\r\n+1 to closing it since we can run this locally.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908933493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908946060","html_url":"https://github.com/apache/jena/issues/1754#issuecomment-1908946060","issue_url":"https://api.github.com/repos/apache/jena/issues/1754","id":1908946060,"node_id":"IC_kwDOAHF7Ec5xyDSM","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T21:28:30Z","updated_at":"2024-01-24T21:28:30Z","author_association":"MEMBER","body":"That run was on my machine using \"ssh -x localhost\" to log in without X.\r\nIt's not happening on Jenkins, at least not on a regular basis.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908946060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908949238","html_url":"https://github.com/apache/jena/issues/2196#issuecomment-1908949238","issue_url":"https://api.github.com/repos/apache/jena/issues/2196","id":1908949238,"node_id":"IC_kwDOAHF7Ec5xyED2","user":{"login":"filip26","id":340018,"node_id":"MDQ6VXNlcjM0MDAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/340018?v=4","gravatar_id":"","url":"https://api.github.com/users/filip26","html_url":"https://github.com/filip26","followers_url":"https://api.github.com/users/filip26/followers","following_url":"https://api.github.com/users/filip26/following{/other_user}","gists_url":"https://api.github.com/users/filip26/gists{/gist_id}","starred_url":"https://api.github.com/users/filip26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filip26/subscriptions","organizations_url":"https://api.github.com/users/filip26/orgs","repos_url":"https://api.github.com/users/filip26/repos","events_url":"https://api.github.com/users/filip26/events{/privacy}","received_events_url":"https://api.github.com/users/filip26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T21:31:07Z","updated_at":"2024-01-24T21:31:07Z","author_association":"NONE","body":"Fixed in trunk (`1.4.0-SNAPSHOT`).  Titanium `v1.4.0` will be released during February, hopefully. ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908949238/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":3,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908971412","html_url":"https://github.com/apache/jena/pull/2215#issuecomment-1908971412","issue_url":"https://api.github.com/repos/apache/jena/issues/2215","id":1908971412,"node_id":"IC_kwDOAHF7Ec5xyJeU","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-24T21:49:10Z","updated_at":"2024-01-24T21:49:10Z","author_association":"MEMBER","body":"cc @Aklakan\r\n(I can't add you as reviewer but I think you can add yourself if you want to)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1908971412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1909166179","html_url":"https://github.com/apache/jena/pull/2215#issuecomment-1909166179","issue_url":"https://api.github.com/repos/apache/jena/issues/2215","id":1909166179,"node_id":"IC_kwDOAHF7Ec5xy5Bj","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-25T00:51:18Z","updated_at":"2024-01-25T00:51:18Z","author_association":"CONTRIBUTOR","body":"I guess for completeness the usual check for \"nothing changed\" should be added.\r\nOtherwise it LGTM.\r\n\r\n```java\r\nNode svcNode = opService.getService();\r\nNode svcNode2 = transform.apply(svcNode);\r\nif (svcNode == svcNode2) {\r\n  return super.transform(opService, subOp);\r\n}\r\nOp newOp = new OpService(svcNode2, subOp, silent);\r\nreturn newOp;\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1909166179/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1910822506","html_url":"https://github.com/apache/jena/issues/2217#issuecomment-1910822506","issue_url":"https://api.github.com/repos/apache/jena/issues/2217","id":1910822506,"node_id":"IC_kwDOAHF7Ec5x5NZq","user":{"login":"rorlic","id":501423,"node_id":"MDQ6VXNlcjUwMTQyMw==","avatar_url":"https://avatars.githubusercontent.com/u/501423?v=4","gravatar_id":"","url":"https://api.github.com/users/rorlic","html_url":"https://github.com/rorlic","followers_url":"https://api.github.com/users/rorlic/followers","following_url":"https://api.github.com/users/rorlic/following{/other_user}","gists_url":"https://api.github.com/users/rorlic/gists{/gist_id}","starred_url":"https://api.github.com/users/rorlic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rorlic/subscriptions","organizations_url":"https://api.github.com/users/rorlic/orgs","repos_url":"https://api.github.com/users/rorlic/repos","events_url":"https://api.github.com/users/rorlic/events{/privacy}","received_events_url":"https://api.github.com/users/rorlic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-25T19:11:23Z","updated_at":"2024-01-25T19:11:23Z","author_association":"NONE","body":"FYI: according to the JSON-LD Context Processing Algorithms at [Context Processing Algorithm](https://www.w3.org/TR/json-ld11-api/#overview):\r\n\r\nIf [context](https://www.w3.org/TR/json-ld11/#dfn-context) is a [string](https://infra.spec.whatwg.org/#javascript-string), it represents a reference to a remote context. We dereference the remote context and replace [context](https://www.w3.org/TR/json-ld11/#dfn-context) with the value of the @context [entry](https://infra.spec.whatwg.org/#map-entry) of the top-level object in the retrieved JSON-LD document.\r\n\r\nSo, I would expect the same behavior in both cases.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1910822506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1912290404","html_url":"https://github.com/apache/jena/issues/2218#issuecomment-1912290404","issue_url":"https://api.github.com/repos/apache/jena/issues/2218","id":1912290404,"node_id":"IC_kwDOAHF7Ec5x-zxk","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T15:54:43Z","updated_at":"2024-01-26T15:54:43Z","author_association":"MEMBER","body":"Strange, I  would have guess the query would return the wrong result (haven't used a lateral join in a while, last I used was in Postgres to perform like a for-each).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1912290404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1912373366","html_url":"https://github.com/apache/jena/issues/2218#issuecomment-1912373366","issue_url":"https://api.github.com/repos/apache/jena/issues/2218","id":1912373366,"node_id":"IC_kwDOAHF7Ec5x_IB2","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T16:51:56Z","updated_at":"2024-01-26T16:51:56Z","author_association":"MEMBER","body":"After staring at the query and execution for _ages_ ... the \"wrong\" result now looks right to me\r\nIt is for completely the wrong reasons though.\r\n\r\nDiscussion continues on\r\nhttps://github.com/w3c/sparql-dev/issues/100#issuecomment-1910692468\r\n(this is only part of that issue).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1912373366/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913071473","html_url":"https://github.com/apache/jena/issues/2161#issuecomment-1913071473","issue_url":"https://api.github.com/repos/apache/jena/issues/2161","id":1913071473,"node_id":"IC_kwDOAHF7Ec5yBydx","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T08:08:06Z","updated_at":"2024-01-27T08:08:06Z","author_association":"CONTRIBUTOR","body":"> * Long term - create a new issue and PR to migrate the plugin to using the new preferred cache APIs\r\n\r\nI did a quick check for what parts of guava my service enhancer code uses - and its only the cache.\r\nThe caffeine cache is transitively provided by arq via atlas - so migrating the service enhancer plugin to caffeine should restore \"drop-in\" functionality. I'll look into it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913071473/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913107122","html_url":"https://github.com/apache/jena/issues/2219#issuecomment-1913107122","issue_url":"https://api.github.com/repos/apache/jena/issues/2219","id":1913107122,"node_id":"IC_kwDOAHF7Ec5yB7Ky","user":{"login":"neumarcx","id":10403482,"node_id":"MDQ6VXNlcjEwNDAzNDgy","avatar_url":"https://avatars.githubusercontent.com/u/10403482?v=4","gravatar_id":"","url":"https://api.github.com/users/neumarcx","html_url":"https://github.com/neumarcx","followers_url":"https://api.github.com/users/neumarcx/followers","following_url":"https://api.github.com/users/neumarcx/following{/other_user}","gists_url":"https://api.github.com/users/neumarcx/gists{/gist_id}","starred_url":"https://api.github.com/users/neumarcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neumarcx/subscriptions","organizations_url":"https://api.github.com/users/neumarcx/orgs","repos_url":"https://api.github.com/users/neumarcx/repos","events_url":"https://api.github.com/users/neumarcx/events{/privacy}","received_events_url":"https://api.github.com/users/neumarcx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T10:20:26Z","updated_at":"2024-01-27T12:07:24Z","author_association":"CONTRIBUTOR","body":"thank you for reporting this Lorenz. As GeoSPARQL 1.0 is inherently 2D we should just enforce this property at the function level as well. It should not prevent users from capturing the z dimension of course.\r\n\r\nI was able to reproduce this bug in the current 4.10.0 and 5.0.0-SNAPSHOT version in code and I can confirm it's a Jena  combination issue and not JTS related.  I am not sure yet why it treats the rectangle polygon here differently, seems to work fine on JTS.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913107122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913129873","html_url":"https://github.com/apache/jena/issues/2161#issuecomment-1913129873","issue_url":"https://api.github.com/repos/apache/jena/issues/2161","id":1913129873,"node_id":"IC_kwDOAHF7Ec5yCAuR","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T11:44:15Z","updated_at":"2024-01-27T11:44:15Z","author_association":"MEMBER","body":"Good idea.\r\n\r\nIf the Jena cache abstraction works, the choice can be abstracted away.\r\n\r\nBut the abstraction is basic functionality only without any build control except size.\r\n\r\nOne reason for switching is to reduce the exposure to Guava which is a big library and Jena only uses some parts of it. When Jena is used as a library, there is a risk of version conflicts with the rest of the application choices. Shading solved that but it means application have two copies of guava (or more - shading the version to get isolation is common).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913129873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913180619","html_url":"https://github.com/apache/jena/issues/2161#issuecomment-1913180619","issue_url":"https://api.github.com/repos/apache/jena/issues/2161","id":1913180619,"node_id":"IC_kwDOAHF7Ec5yCNHL","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T15:01:51Z","updated_at":"2024-01-27T15:48:32Z","author_association":"CONTRIBUTOR","body":"Switching the cache to caffeine is doable, but unfortunately for my last post I had only searched for 'guava'.\r\n\r\nI noticed my code also relies on `com.google.common.collect.{Range, RangeMap, RangeSet, etc}` for managing the ranges of cached data. This part would be too much effort to replace - at least in the short run.\r\n\r\nOne way to build the jar-bundle with maven only:\r\n\r\n```bash\r\n# Fetch the serviceenhancer pom from maven central\r\nmvn dependency:copy -D'artifact=org.apache.jena:jena-serviceenhancer:4.10.0:pom' \\\r\n  -Dmdep.stripVersion=true -D'outputDirectory=.'\r\n\r\n# Build using the 'bundle' profile\r\nmvn -f jena-serviceenhancer.pom -Pbundle package\r\n```\r\n\r\n- Maybe for now its best to just update the documentation that a custom build step using maven is needed.\r\n- It would be possible to document specifically that guava is needed in addition (possibly adding download links) - but then every dependency change might require a documentation update - bad.\r\n- Might packaging as a Fuseki module be an option that makes things easier? So far we are just using our own [fork](https://github.com/AKSW/fuseki-mods) (which mainly adds a method to recreate the spatial index on-demand) - it seems there are no \"official\" jena fuseki modules published as part of the jena release(?).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913180619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913525175","html_url":"https://github.com/apache/jena/issues/2219#issuecomment-1913525175","issue_url":"https://api.github.com/repos/apache/jena/issues/2219","id":1913525175,"node_id":"IC_kwDOAHF7Ec5yDhO3","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-28T09:08:23Z","updated_at":"2024-01-28T09:08:23Z","author_association":"CONTRIBUTOR","body":"Hi Marco.\r\n\r\nYep, this is indeed no JTS issue but the custom implementation of an optimized `CoordinateSequence` which handles Z axis and assumes that this is always possible.  \r\nFrom what I can see in the JTS code why it happens for rectangles, because it's more efficient to evaluate whether an intersection exist in that case. It's interesting that it doesn't always fail because in the code there are two more check in before checking the line segments of the rectangle. We recognized the error only because we added H3 support to the Jena spatial layer via property functions, but needed a post filter on a bounding box which in fact is a rectangle.\r\nIt's also lucky that we passed the rectangle as first argument, otherwise a different algorithm will be used by JTS.\r\n\r\nIt's easy to fix in the code I think just adding an `if` condition check on the type of the `Coordinate` object (XYZ or not).\r\nI'll provide a PR soon.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913525175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913574848","html_url":"https://github.com/apache/jena/issues/2219#issuecomment-1913574848","issue_url":"https://api.github.com/repos/apache/jena/issues/2219","id":1913574848,"node_id":"IC_kwDOAHF7Ec5yDtXA","user":{"login":"neumarcx","id":10403482,"node_id":"MDQ6VXNlcjEwNDAzNDgy","avatar_url":"https://avatars.githubusercontent.com/u/10403482?v=4","gravatar_id":"","url":"https://api.github.com/users/neumarcx","html_url":"https://github.com/neumarcx","followers_url":"https://api.github.com/users/neumarcx/followers","following_url":"https://api.github.com/users/neumarcx/following{/other_user}","gists_url":"https://api.github.com/users/neumarcx/gists{/gist_id}","starred_url":"https://api.github.com/users/neumarcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neumarcx/subscriptions","organizations_url":"https://api.github.com/users/neumarcx/orgs","repos_url":"https://api.github.com/users/neumarcx/repos","events_url":"https://api.github.com/users/neumarcx/events{/privacy}","received_events_url":"https://api.github.com/users/neumarcx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-28T12:09:18Z","updated_at":"2024-01-28T12:09:18Z","author_association":"CONTRIBUTOR","body":"> Hi Marco.\r\n> \r\n> Yep, this is indeed no JTS issue but the custom implementation of an optimized `CoordinateSequence` which handles Z axis and assumes that this is always possible. From what I can see in the JTS code why it happens for rectangles, because it's more efficient to evaluate whether an intersection exist in that case. It's interesting that it doesn't always fail because in the code there are two more check in before checking the line segments of the rectangle. We recognized the error only because we added H3 support to the Jena spatial layer via property functions, but needed a post filter on a bounding box which in fact is a rectangle. It's also lucky that we passed the rectangle as first argument, otherwise a different algorithm will be used by JTS.\r\n> \r\n> It's easy to fix in the code I think just adding an `if` condition check on the type of the `Coordinate` object (XYZ or not). I'll provide a PR soon.\r\n\r\nyes, very good Lorenz, I was able to patch my local copy in CustomCoordinateSequence and got it to work as well. I am still wondering about side effects. Also the unpatched version seems to work fine with the other topological relationships (overlaps, touches, disjoint etc) if isRectangle is true. The only call that fails is sfIntersects when the domain of the function qualifies as a rectangle.  \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913574848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913620778","html_url":"https://github.com/apache/jena/issues/2218#issuecomment-1913620778","issue_url":"https://api.github.com/repos/apache/jena/issues/2218","id":1913620778,"node_id":"IC_kwDOAHF7Ec5yD4kq","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-28T14:44:34Z","updated_at":"2024-01-28T14:45:23Z","author_association":"MEMBER","body":"Repurposing this issue: the lateral implementation generally can improved. The jena4.x implementation makes assumptions about how ARQ executes and these assumptions aren't always valid.\r\n ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1913620778/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914140416","html_url":"https://github.com/apache/jena/issues/2219#issuecomment-1914140416","issue_url":"https://api.github.com/repos/apache/jena/issues/2219","id":1914140416,"node_id":"IC_kwDOAHF7Ec5yF3cA","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T07:51:35Z","updated_at":"2024-01-29T07:51:35Z","author_association":"CONTRIBUTOR","body":"I don't see any negative implications, for me this is just fixing a bug - indeed I might be wrong.\r\n\r\nThe crucial part in JTS is in class \r\n\r\nHere they do\r\n\r\n``` java\r\nprivate void checkIntersectionWithSegments(LineString testLine)\r\n  {\r\n    CoordinateSequence seq1 = testLine.getCoordinateSequence();\r\n    Coordinate p0 = seq1.createCoordinate();\r\n    Coordinate p1 = seq1.createCoordinate();\r\n    for (int j = 1; j < seq1.size(); j++) {\r\n      seq1.getCoordinate(j - 1, p0);\r\n      seq1.getCoordinate(j,     p1);\r\n\r\n      if (rectIntersector.intersects(p0, p1)) {\r\n        hasIntersection = true;\r\n        return;\r\n      }\r\n    }\r\n  }\r\n```\r\nthe creation of new `Coordinates` comes from the default method in the `CoordinateSequence` interface and does nothing more than taking into account the dimensions of coordinate and the measure:\r\n\r\n``` java\r\ndefault Coordinate createCoordinate() {\r\n    return Coordinates.create(getDimension(), getMeasures());\r\n  }\r\n```\r\n\r\nBoth are implemented in `CustomCoordinateSequence` correctly, i.e. the dimension is 2 and measures is 0. \r\nI'm sure it was simply forgotten to do a sanity check in the `getCoordinate` method\r\n\r\n``` java\r\n@Override\r\n    public void getCoordinate(int index, Coordinate coord) {\r\n        coord.setX(x[index]);\r\n        coord.setY(y[index]);\r\n        coord.setZ(z[index]);\r\n    }\r\n``` \r\nand by the way for some reason `setM` was not called - maybe also forgotten.\r\nIn any case checking for either the class type or just the dimension should be the correct way in my opinion.\r\nSo either explicitly check for the Java type or for combination of dimension/measure should at least fix the error. In JTS they do it by\r\n\r\n``` java\r\npublic static Coordinate create(int dimension, int measures)\r\n  {\r\n    if (dimension == 2) {\r\n      return new CoordinateXY();\r\n    } else if (dimension == 3 && measures == 0) {\r\n      return new Coordinate();\r\n    } else if (dimension == 3 && measures == 1) {\r\n      return new CoordinateXYM();\r\n    } else if (dimension == 4 && measures == 1) {\r\n      return new CoordinateXYZM();\r\n    }\r\n    return new Coordinate();\r\n  }\r\n```\r\nIt's confusing how JTS does handle the case `dim=3` and `measure=1` as Z seems to be ignored: \r\n> This data object is suitable for use with coordinate sequences with dimension = 3 and measures = 1.\r\nThe Coordinate.z field is visible, but intended to be ignored\r\n\r\n\r\nLong story short, we could adapt this with\r\n``` java\r\n@Override\r\n    public void getCoordinate(int index, Coordinate coord) {\r\n        coord.setX(x[index]);\r\n        coord.setY(y[index]);\r\n\r\n        if (coordinateDimension == 3 && measuresDimension == 0) {\r\n            coord.setZ(z[index]);\r\n        } else if (coordinateDimension == 3 && measuresDimension == 1) {\r\n            coord.setM(m[index]);\r\n        } else if (coordinateDimension == 4 && measuresDimension == 1) {\r\n            coord.setZ(z[index]);\r\n            coord.setM(m[index]);\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\nOpinions?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914140416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914247848","html_url":"https://github.com/apache/jena/issues/2219#issuecomment-1914247848","issue_url":"https://api.github.com/repos/apache/jena/issues/2219","id":1914247848,"node_id":"IC_kwDOAHF7Ec5yGRqo","user":{"login":"neumarcx","id":10403482,"node_id":"MDQ6VXNlcjEwNDAzNDgy","avatar_url":"https://avatars.githubusercontent.com/u/10403482?v=4","gravatar_id":"","url":"https://api.github.com/users/neumarcx","html_url":"https://github.com/neumarcx","followers_url":"https://api.github.com/users/neumarcx/followers","following_url":"https://api.github.com/users/neumarcx/following{/other_user}","gists_url":"https://api.github.com/users/neumarcx/gists{/gist_id}","starred_url":"https://api.github.com/users/neumarcx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neumarcx/subscriptions","organizations_url":"https://api.github.com/users/neumarcx/orgs","repos_url":"https://api.github.com/users/neumarcx/repos","events_url":"https://api.github.com/users/neumarcx/events{/privacy}","received_events_url":"https://api.github.com/users/neumarcx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T09:02:44Z","updated_at":"2024-01-29T09:02:44Z","author_association":"CONTRIBUTOR","body":"\r\nThis is well motivated and proposed. In my patch I have just ignored the z data in the function call.  But the cases are a better approach here. With side effects I was referring to the root cause analysis. I would think that it would make sense to add further test cases to the build as well.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914247848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914268597","html_url":"https://github.com/apache/jena/issues/2094#issuecomment-1914268597","issue_url":"https://api.github.com/repos/apache/jena/issues/2094","id":1914268597,"node_id":"IC_kwDOAHF7Ec5yGWu1","user":{"login":"filak","id":1353748,"node_id":"MDQ6VXNlcjEzNTM3NDg=","avatar_url":"https://avatars.githubusercontent.com/u/1353748?v=4","gravatar_id":"","url":"https://api.github.com/users/filak","html_url":"https://github.com/filak","followers_url":"https://api.github.com/users/filak/followers","following_url":"https://api.github.com/users/filak/following{/other_user}","gists_url":"https://api.github.com/users/filak/gists{/gist_id}","starred_url":"https://api.github.com/users/filak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filak/subscriptions","organizations_url":"https://api.github.com/users/filak/orgs","repos_url":"https://api.github.com/users/filak/repos","events_url":"https://api.github.com/users/filak/events{/privacy}","received_events_url":"https://api.github.com/users/filak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T09:14:51Z","updated_at":"2024-01-29T09:14:51Z","author_association":"NONE","body":"Any updates on this @OyvindLGjesdal ? ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914268597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914305983","html_url":"https://github.com/apache/jena/issues/2094#issuecomment-1914305983","issue_url":"https://api.github.com/repos/apache/jena/issues/2094","id":1914305983,"node_id":"IC_kwDOAHF7Ec5yGf2_","user":{"login":"OyvindLGjesdal","id":5328572,"node_id":"MDQ6VXNlcjUzMjg1NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5328572?v=4","gravatar_id":"","url":"https://api.github.com/users/OyvindLGjesdal","html_url":"https://github.com/OyvindLGjesdal","followers_url":"https://api.github.com/users/OyvindLGjesdal/followers","following_url":"https://api.github.com/users/OyvindLGjesdal/following{/other_user}","gists_url":"https://api.github.com/users/OyvindLGjesdal/gists{/gist_id}","starred_url":"https://api.github.com/users/OyvindLGjesdal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/OyvindLGjesdal/subscriptions","organizations_url":"https://api.github.com/users/OyvindLGjesdal/orgs","repos_url":"https://api.github.com/users/OyvindLGjesdal/repos","events_url":"https://api.github.com/users/OyvindLGjesdal/events{/privacy}","received_events_url":"https://api.github.com/users/OyvindLGjesdal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T09:36:25Z","updated_at":"2024-01-29T10:07:59Z","author_association":"CONTRIBUTOR","body":"I think the Pull request is completed from my side, and is in the process for being reviewed. ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1914305983/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1915428507","html_url":"https://github.com/apache/jena/issues/2213#issuecomment-1915428507","issue_url":"https://api.github.com/repos/apache/jena/issues/2213","id":1915428507,"node_id":"IC_kwDOAHF7Ec5yKx6b","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T19:38:24Z","updated_at":"2024-01-29T19:38:24Z","author_association":"MEMBER","body":"Addressed by RAT 0.16.1 update https://github.com/apache/jena/pull/2221","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1915428507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1916756255","html_url":"https://github.com/apache/jena/issues/2105#issuecomment-1916756255","issue_url":"https://api.github.com/repos/apache/jena/issues/2105","id":1916756255,"node_id":"IC_kwDOAHF7Ec5yP2Ef","user":{"login":"filip26","id":340018,"node_id":"MDQ6VXNlcjM0MDAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/340018?v=4","gravatar_id":"","url":"https://api.github.com/users/filip26","html_url":"https://github.com/filip26","followers_url":"https://api.github.com/users/filip26/followers","following_url":"https://api.github.com/users/filip26/following{/other_user}","gists_url":"https://api.github.com/users/filip26/gists{/gist_id}","starred_url":"https://api.github.com/users/filip26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filip26/subscriptions","organizations_url":"https://api.github.com/users/filip26/orgs","repos_url":"https://api.github.com/users/filip26/repos","events_url":"https://api.github.com/users/filip26/events{/privacy}","received_events_url":"https://api.github.com/users/filip26/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T12:38:32Z","updated_at":"2024-01-30T12:38:32Z","author_association":"NONE","body":"FYI here is an implementation of URDNA2015 based on Titanium RDF API. https://github.com/setl/rdf-urdna  It's connected to https://github.com/apache/jena/discussions/2216\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1916756255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1917474010","html_url":"https://github.com/apache/jena/pull/2231#issuecomment-1917474010","issue_url":"https://api.github.com/repos/apache/jena/issues/2231","id":1917474010,"node_id":"IC_kwDOAHF7Ec5ySlTa","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-30T16:51:07Z","updated_at":"2024-01-30T16:51:07Z","author_association":"MEMBER","body":"Could you add a test for this please?\r\n\r\nOne place might be `WKTDatatypeTest` (and `GMLDatatypeTest`) but that may not be a good fit.\r\n\r\nIf nothing else, a new test class in `org.apache.jena.geosparql.implementation.jts`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1917474010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1919904675","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1919904675","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1919904675,"node_id":"IC_kwDOAHF7Ec5yb2uj","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T20:30:21Z","updated_at":"2024-01-31T20:30:21Z","author_association":"CONTRIBUTOR","body":"@sszuev \r\nI am truly sorry that I needlessly raised the topic of transactions again.\r\n(I hadn't remembered it and hadn't re-read the thread before replying).\r\nThank you for your patient explanation and response.\r\nMy transactional implementation is, as the benchmarks show, a very poor choice for simple thread safety.\r\nI was hoping the benchmark suite would also be suitable for comparing transactional graphs with a few tweaks. Unfortunately, this does not seem to be the case.\r\n\r\nThe idea of treating your thread-safe graphs like concurrent collections has also inspired me for my current projects at work. I want to cache real-time measurements in graphs. Maybe I don't need transaction safety in this scenario and then hopefully your graphs and benchmarks will be helpful. Thanks again!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1919904675/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1919991639","html_url":"https://github.com/apache/jena/pull/2226#issuecomment-1919991639","issue_url":"https://api.github.com/repos/apache/jena/issues/2226","id":1919991639,"node_id":"IC_kwDOAHF7Ec5ycL9X","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T21:22:17Z","updated_at":"2024-01-31T21:22:17Z","author_association":"MEMBER","body":"Another node issue:\r\n```\r\n[INFO] error jsdom@24.0.0: The engine \"node\" is incompatible with this module. Expected version \">=18\". Got \"16.20.2\"\r\n```\r\nsee #2180","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1919991639/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1919993576","html_url":"https://github.com/apache/jena/pull/2223#issuecomment-1919993576","issue_url":"https://api.github.com/repos/apache/jena/issues/2223","id":1919993576,"node_id":"IC_kwDOAHF7Ec5ycMbo","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T21:23:41Z","updated_at":"2024-01-31T21:23:41Z","author_association":"MEMBER","body":"```\r\n[INFO] error vite@5.0.12: The engine \"node\" is incompatible with this module. Expected version \"^18.0.0 || >=20.0.0\". Got \"16.20.2\"\r\n```\r\nSee also #2180 #2226","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1919993576/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1920052064","html_url":"https://github.com/apache/jena/issues/2169#issuecomment-1920052064","issue_url":"https://api.github.com/repos/apache/jena/issues/2169","id":1920052064,"node_id":"IC_kwDOAHF7Ec5ycatg","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-31T22:03:22Z","updated_at":"2024-01-31T22:03:22Z","author_association":"CONTRIBUTOR","body":"I implemented the feature in a separate clean [branch ](https://github.com/arne-bdt/jena/tree/GH-2169-Proposal-for-Enhanced-Graph-Cloning-in-Apache-Jena).\r\nAny comments are welcome.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1920052064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1920883801","html_url":"https://github.com/apache/jena/pull/2234#issuecomment-1920883801","issue_url":"https://api.github.com/repos/apache/jena/issues/2234","id":1920883801,"node_id":"IC_kwDOAHF7Ec5yflxZ","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T09:28:02Z","updated_at":"2024-02-01T09:28:02Z","author_association":"MEMBER","body":"Thanks for the PR but in this case we cannot accept it.\r\n\r\nThe module containing the `4.8.0` dependency is purely a benchmarking module used to compare performance numbers between the old version of one of our core API implementations with a newer version that was introduced from `4.9.0` onwards.  So the usage of `4.8.0` is a) intentional and b) only for performance benchmarking purposes to ensure no substantative performance regressions.  The usage of `4.8.0` within the benchmarking is tightly scoped to the API under test and does not use any of the portions of the API affected by CVE-2023-32200\r\n\r\nAs such there is no security risk involved here and I will close this issue\r\n\r\nPlease note that for future reference any security issues with any Apache project should be reported using the [Apache Security Process](https://www.apache.org/security/) and not via public PRs/issues.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1920883801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1922194576","html_url":"https://github.com/apache/jena/issues/2232#issuecomment-1922194576","issue_url":"https://api.github.com/repos/apache/jena/issues/2232","id":1922194576,"node_id":"IC_kwDOAHF7Ec5yklyQ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T20:33:00Z","updated_at":"2024-02-01T20:35:55Z","author_association":"MEMBER","body":"Are you on Windows?\r\n\r\nIf so, same as:\r\nhttps://ci-builds.apache.org/job/Jena/job/Jena%20Development%20Windows/org.apache.jena$jena-arq/221/testReport/\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1922194576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1922382487","html_url":"https://github.com/apache/jena/issues/2232#issuecomment-1922382487","issue_url":"https://api.github.com/repos/apache/jena/issues/2232","id":1922382487,"node_id":"IC_kwDOAHF7Ec5ylTqX","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T22:26:57Z","updated_at":"2024-02-01T22:26:57Z","author_association":"MEMBER","body":"My bad.\r\nI had a local branch which I'd forgotten to finish.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1922382487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1922397106","html_url":"https://github.com/apache/jena/issues/2232#issuecomment-1922397106","issue_url":"https://api.github.com/repos/apache/jena/issues/2232","id":1922397106,"node_id":"IC_kwDOAHF7Ec5ylXOy","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-01T22:32:37Z","updated_at":"2024-02-01T22:32:37Z","author_association":"CONTRIBUTOR","body":"Yes, Windows and this exact problem. \r\nI couldn't find any mention of the problem in the github topics, so I added one.\r\nUnfortunately, I wasn't able to understand the problem by debugging. \r\n--> Thank you for solving the problem so quickly! (while I tried and failed again)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1922397106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1923102381","html_url":"https://github.com/apache/jena/pull/2231#issuecomment-1923102381","issue_url":"https://api.github.com/repos/apache/jena/issues/2231","id":1923102381,"node_id":"IC_kwDOAHF7Ec5yoDat","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T07:00:44Z","updated_at":"2024-02-02T07:00:44Z","author_association":"CONTRIBUTOR","body":"I added a test class for the `CustomCoordinateSequence` class on the JTS level. The test does check the creation of a `Coordinate` for the different combinations of the spatial and measure dimension.  \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1923102381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924155748","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1924155748","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1924155748,"node_id":"IC_kwDOAHF7Ec5ysElk","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T15:55:23Z","updated_at":"2024-02-02T15:55:23Z","author_association":"MEMBER","body":"The build servers are now 22.04 and have a update glibc.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924155748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924452219","html_url":"https://github.com/apache/jena/issues/2237#issuecomment-1924452219","issue_url":"https://api.github.com/repos/apache/jena/issues/2237","id":1924452219,"node_id":"IC_kwDOAHF7Ec5ytM97","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:25:16Z","updated_at":"2024-02-02T18:25:16Z","author_association":"MEMBER","body":"Thank you!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924452219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924463866","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1924463866","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1924463866,"node_id":"IC_kwDOAHF7Ec5ytPz6","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:34:05Z","updated_at":"2024-02-02T18:34:05Z","author_association":"MEMBER","body":"@dependabot rebase\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924463866/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924465503","html_url":"https://github.com/apache/jena/pull/2180#issuecomment-1924465503","issue_url":"https://api.github.com/repos/apache/jena/issues/2180","id":1924465503,"node_id":"IC_kwDOAHF7Ec5ytQNf","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:35:28Z","updated_at":"2024-02-02T18:35:28Z","author_association":"CONTRIBUTOR","body":"Superseded by #2239.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924465503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":29110,"client_id":"Iv1.4f9a6346434f815e","slug":"dependabot","node_id":"MDM6QXBwMjkxMTA=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"Dependabot","description":"","external_url":"https://dependabot-api.githubapp.com","html_url":"https://github.com/apps/dependabot","created_at":"2019-04-16T22:34:25Z","updated_at":"2024-03-20T21:06:35Z","permissions":{"actions":"read","checks":"write","contents":"write","issues":"write","members":"read","metadata":"read","pull_requests":"write","statuses":"read","vulnerability_alerts":"read","workflows":"write"},"events":["check_suite","issues","issue_comment","label","pull_request","pull_request_review","pull_request_review_comment","repository"]}},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924468072","html_url":"https://github.com/apache/jena/pull/2223#issuecomment-1924468072","issue_url":"https://api.github.com/repos/apache/jena/issues/2223","id":1924468072,"node_id":"IC_kwDOAHF7Ec5ytQ1o","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:37:29Z","updated_at":"2024-02-02T18:37:29Z","author_association":"MEMBER","body":"@dependabot rebase","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924468072/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924471958","html_url":"https://github.com/apache/jena/pull/2226#issuecomment-1924471958","issue_url":"https://api.github.com/repos/apache/jena/issues/2226","id":1924471958,"node_id":"IC_kwDOAHF7Ec5ytRyW","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:40:41Z","updated_at":"2024-02-02T18:40:41Z","author_association":"MEMBER","body":"@dependabot rebase","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924471958/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924484088","html_url":"https://github.com/apache/jena/pull/2226#issuecomment-1924484088","issue_url":"https://api.github.com/repos/apache/jena/issues/2226","id":1924484088,"node_id":"IC_kwDOAHF7Ec5ytUv4","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T18:48:10Z","updated_at":"2024-02-02T18:48:10Z","author_association":"MEMBER","body":"@dependabot rebase\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924484088/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924549779","html_url":"https://github.com/apache/jena/pull/2223#issuecomment-1924549779","issue_url":"https://api.github.com/repos/apache/jena/issues/2223","id":1924549779,"node_id":"IC_kwDOAHF7Ec5ytkyT","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-02T19:31:17Z","updated_at":"2024-02-02T19:31:17Z","author_association":"MEMBER","body":"This message has appeared\r\n```\r\nThe CJS build of Vite's Node API is deprecated. See https://vitejs.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1924549779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1925865098","html_url":"https://github.com/apache/jena/issues/2240#issuecomment-1925865098","issue_url":"https://api.github.com/repos/apache/jena/issues/2240","id":1925865098,"node_id":"IC_kwDOAHF7Ec5yyl6K","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-04T17:57:23Z","updated_at":"2024-02-04T17:57:23Z","author_association":"MEMBER","body":"> What do you think?\r\n\r\nSome initial thoughts - I haven't dived deep into the new code yet. \r\n\r\nImprovement in results formats is the most interesting part here. The results case is interesting in that it is, typically, create-once, read-once so writing costs matter.\r\n\r\nAs you note, gzip gives a lot of benefit for the N-Triple like formats (x8-x10 compression). And for publishing data, sticking to standards based formats matters.\r\n\r\n**RAM space**\r\n\r\nAll language parsers go through a String to IRI cache (`ParserProfileStd` - it's per parser run cache) this reduces the memory costs - it saves about 1/3 of the RAM needed to store a large in-memory dataset. SPARQL results sets do not. \r\n\r\nWe could have a JVM wide term cache (needs to be multithreading safe) - across parser runs and shared with receiving results.\r\n\r\n**Results**\r\n\r\nSo I think the improvement metric should be \"faster\", and whether size is a factor needs to be determined. It probably is for across the web. The size impact is made complicated because HTTP speeds over the public internet, over average corporate networks and in AWS/Azure/GCP are very different. The latter can be incredible fast.\r\n\r\nIt'll good to have a really good, non-standards, results format.\r\n\r\n** BSBM data**\r\n\r\n> bsbm-1m.nt.gz\r\n\r\nMy copy of `bsbm-1m` in RDF-THRIFT is 254M uncompressed and 28M compressed.\r\n\r\nOn my machine, RDF-THRIFT:\r\nDisk is an NVMe SSD although the test data is probably in the disk cache of the OS. I don't believe that I/O is a significant factor although it is a factor. The bandwidth on SSDs is really quite good.\r\n\r\n```\r\nbsbm-25m.rt : 6.3G\r\nbsbm-25m.rt.gz : 684M\r\n```\r\n\r\n```\r\n$ riot --time --sink bsbm-25m.rt\r\nbsbm-25m.rt     : 18.86 sec : 24,997,044 Triples : 1,325,329.73 per second\r\n$ riot --time --sink bsbm-25m.rt.gz\r\nbsbm-25m.rt.gz  : 24.02 sec : 24,997,044 Triples : 1,040,719.60 per second\r\n```\r\nx8-x10 is what I expect when compressing N-triples. BSBM may be different in that it has a significant amount of longer strings randomly generated (IIRC).\r\n\r\nAt those speeds, parsing isn't a factor in data loading into TDB2. The TDB2 parallel loader does the parsing on a separate thread, passes inter-thread in chunks of 100k triples and has a queue of 10 blocks. It becomes waiting for the loader to consume the triples.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1925865098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1926709732","html_url":"https://github.com/apache/jena/issues/2240#issuecomment-1926709732","issue_url":"https://api.github.com/repos/apache/jena/issues/2240","id":1926709732,"node_id":"IC_kwDOAHF7Ec5y10Hk","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T10:54:04Z","updated_at":"2024-02-05T10:54:04Z","author_association":"MEMBER","body":"So I looked at this problem extensively around 10 years ago and developed something we called Binary Tuple Format (BTF).  This was all proprietary $dayjob work and it never went beyond the research stage for several reasons which I'll go into depth in this response.  So no code/reports I can share but I can talk about it in general terms.\r\n\r\nTL;DR Version:\r\n\r\n- Using GZip compression with formats like NTriples/RDF-Thrift for graphs, and SPARQL-TSV for results, generally offered the best overall performance (see discussion for what that means)\r\n- Specialised formats can offer some performance gains on specific metrics, e.g. data size, but this tends to not be that relevant when you look at overall performance\r\n\r\n----\r\n\r\n### Binary Tuple Format\r\n\r\nBinary Tuple Format (BTF) was an effort to address the problem of how could we communicate results faster between the server and the client.  This was work at Cray so we had some specific additional constraints that we were looking to take account of:\r\n\r\n1. The server had vastly more memory than the client(s)\r\n2. The server could parallelise the results output because we didn't send the results directly over the network.  Rather the server wrote a file to the parallel file system and merely communicating the metadata (the filename, results count and size etc) over the wire to the client.\r\n3. The client was often resource constrained (particularly for memory) relative to the server so any format had to allow for that\r\n\r\nDesign wise the format consisted of a global header (magic bytes, metadata, data type - triples, quads, results, result column names if applicable, prefix mappings etc), following by one/more data blocks.  Each data block consists of a block header (block type, block type specific header fields) followed by actual data.  This gave us a framework in which we could experiment extensively with different compression schemes and data layouts.\r\n\r\nSince an output file consisted of multiple blocks we could generate these in parallel and then write the blocks out in any sequence we wanted (unless ordered SPARQL results where order needed preserving).\r\n\r\nWe had a number of different block types that we implemented.  From what we called Tabular Blocks that were basically uncompressed NTriples/SPARQL TSV through to [Compressed Dictionary Blocks](#compressed-dictionary-blocks) that used different encoding and compression techniques.\r\n\r\n### Quantifying Overall Performance\r\n\r\nHow you quantify performance becomes a key part of the problem.  It's easy to focus on a single metric, e.g. overall data size, but we found through extensive comparisons between BTF, all the standard formats supported by Jena, and [HDT](https://www.rdfhdt.org) that it wasn't the whole story.\r\n\r\nFirstly data is never just written, it always needs to be read at some point as well.  So at a bare minimum you need to consider the whole round trip i.e. both serialisation and parsing time.\r\n\r\nSecondly there is also a computational cost (CPU and memory) associated with each data format.  Applying any kind of compression is trading CPU time plus memory consumption for output size.  Depending on the system the overhead may actually outweigh the benefit.\r\n\r\nAside - not specific to BTF but with other well known distributed compute frameworks we were running on our systems at the time it was actually a benefit to disable their default network compression behaviour.  Our network interconnect was so good it wasn't worth trading the CPU time for smaller data transfers, it was faster just to send the uncompressed data.  And as @afs notes networks have evolved hugely over the intervening years, that's not to say that there aren't cases where the network is the bottleneck, even in cloud/HPC environments, but that it isn't the only thing to consider these days.\r\n\r\nWhich is to say that any judgement of improved performance has to be holistic, it's not enough to just say that your new format consistently gives smaller file sizes if it does so at the cost of increased processing time and/or memory consumption.  You **MUST** evaluate all those factors together somehow, e.g. weighted scoring, and I'm not sure we ever came up with a good metric for that.\r\n\r\n### Standards Matter\r\n\r\n![XKCD Standards Cartoon](https://imgs.xkcd.com/comics/standards.png)\r\n\r\nThe RDF/Semantic Web community already has a problem IMO with over-proliferation of standards.  For any new format to be broadly useful it has to be adopted across the wider community.  If it's only in Jena it only benefits users whose entire workflow/lifecycle can be encompassed in Jena.  As soon as they go outside of Jena they lose the benefits.\r\n\r\nThis might be fine for your specific use case, but if it doesn't benefit the majority of users are we actually adding sufficient value to justify it?\r\n\r\nIn most real-world use cases I've seen Jena is rarely involved in 100% of the workflow.  Typically Jena's involvement terminates at Fuseki as a SPARQL endpoint and then other parts of the business use JavaScript, Python etc to implement UIs, data science etc on top of the SPARQL results.\r\n\r\n### Compressed Dictionary Blocks\r\n\r\nGoing back to BTF, the data block type that ended up being the best overall performance (caveats on that term as I described earlier) was what we called a Compressed Dictionary Block.  This block type consisted of a fixed size dictionary that was compressed with Gzip, followed by a series of rows.  Each row is a fixed number of bytes with `N` bytes for each column, where the value of `N` depends on the size of dictionary in use.  The value for each column is the offset for the associated RDF term in the blocks dictionary.  We assigned some special offsets to have special meanings e.g. `0` means no value (particularly relevant for SPARQL Results), `1` for repeat term from same column in previous row etc.\r\n\r\nFrom experimentation we found 16MB to be the optimal maximum dictionary size as that meant `N` was 4 bytes so each row would be `4M` bytes where `M` is the number of columns in each row (3 for triples, 4 for quads, arbitrary for SPARQL results).\r\n\r\nHaving a fixed maximum dictionary size had a couple of benefits:\r\n\r\n- We could populate multiple blocks of data in parallel \r\n- It limits how much data any client needs to process at once if it stream processes the results.  At most a client must hold the 16MB dictionary in memory and then read an additional `4M` bytes for each row.\r\n\r\nSince rows are fixed width you can also achieve random access within the compressed file by reading very small portions of the global and block headers to seek to the position of any given tuple in the file.\r\n\r\n#### Advanced Dictionaries\r\n\r\nWe also experimented with a lot of tricks around the building of the dictionary though none of those ended up yielding that much benefit.\r\n\r\nFor example in an early iteration we used [variable width](https://en.wikipedia.org/wiki/Variable-length_quantity) offset encoding to reference the dictionary i.e. the rows contain `1` to `N` bytes for each offset, this was combined with a form of [Huffman coding](https://en.wikipedia.org/wiki/Huffman_coding) for the dictionary so that the most common terms would be given lower offsets in the dictionary and thus have smaller references in the row portion of the block.  \r\n\r\nIn principal this meant that the rows portion of the block should be smaller.  In practise this proved to not be the case because with a variable width encoding you end up using more bytes overall because the terms at the end of the dictionary end up needing 5 bytes to be encoded (assuming a 16MB dictionary) due to how variable width encodings work.\r\n\r\nAlso having variable width rows adds some complexity to the row reading logic the cost of which can end up outweighing the benefit of sometimes marginally smaller file size.  Plus if you want to allow random access to an arbitrary row within the result set we now have to manually read through much of the file to do this because we don't know how many bytes to skip in advance.  We ended up throwing out all usage of variable width encodings as a result.\r\n\r\n### Performance Comparisons\r\n\r\nAs noted [earlier](#quantifying-overall-performance) we did extensive comparisons of BTF against all the built-in Jena formats (for both RDF graphs, datasets and SPARQL results) and some other academic research like HDT.\r\n\r\nThe end results was that BTF was about the same size as the equivalent Gzipped NTriples/SPARQL TSV **BUT** was time wise was slower to both read and write so overall staying with the standard formats proved to be better.  I would also note that over the lifetime of this research project if anything the gap between the Jena built-in's and BTF actually increased as optimisations were introduced into the Jena parsers and writers and the JVM optimiser got better.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1926709732/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1926737207","html_url":"https://github.com/apache/jena/issues/2240#issuecomment-1926737207","issue_url":"https://api.github.com/repos/apache/jena/issues/2240","id":1926737207,"node_id":"IC_kwDOAHF7Ec5y1603","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T11:09:44Z","updated_at":"2024-02-05T11:09:44Z","author_association":"MEMBER","body":"> The current THRIFT format is great, but in practice there are many duplicate strings that unnecessarily bloat the serialised data. Idea: Extend the format with a duplicate-free list of all occurring strings. And then only point to the index of the string in the remaining fields with an i32. For entire graphs, there would be exactly one list of strings. With the stream-based formats for RDF and results, there would be one such list per row, which would be built up by the consumer into a complete list, as each row only contains the strings that have been added. Apart from this change, the format would otherwise be identical.\r\n\r\nYou need to do this carefully such that you still allow stream processing of the data because that's very common in real-world use cases.  Also there is a potential memory issue here in that a processor has to continuously build up the string table as it goes along (both for reading/writing).\r\n\r\nIn the pathological case a malicious user could construct a SPARQL query using a function like `UUID()` that generates a massive stream of results where the strings never repeat and effectively create a DoS attack against the server.\r\n\r\n> \r\n> The speed of serialisation and deserialisation in memory hardly differs between both THRIFT-based formats.\r\n\r\nThe in-memory worries me here.  Reality is that these serialisations are typically exchanged either via a file system or network where IO overhead can often dominate.  If we're going to do benchmarks we need to account for that somehow.\r\n\r\n> With streaming, classic compression is of little use because it can only compress the character strings that occur in the current row. The previously transmitted character strings are lost for compression. --> This problem is probably ideally addressed by the proposed new format. --> This way, the proposed new format could lead to a massive reduction in network traffic when transporting query results.\r\n\r\nGeneral purpose stream compression, i.e. Gzip, is usually fine provided you choose an appropriate buffer size for the Gzip stream.  This avoids the problem you imply here.  Compression schemes (e.g. Deflate) in formats like Gzip typically have a maximum size window for the references to previously used strings, so as long as your buffer size is appropriate you get good enough compression.  \r\n\r\nIn the pathological case with all unique strings any compression scheme will struggle but general purpose ones generally cope the best in such scenarios (potentially even dropping back to uncompressed stored data blocks where it makes sense).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1926737207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928144472","html_url":"https://github.com/apache/jena/issues/2217#issuecomment-1928144472","issue_url":"https://api.github.com/repos/apache/jena/issues/2217","id":1928144472,"node_id":"IC_kwDOAHF7Ec5y7SZY","user":{"login":"rorlic","id":501423,"node_id":"MDQ6VXNlcjUwMTQyMw==","avatar_url":"https://avatars.githubusercontent.com/u/501423?v=4","gravatar_id":"","url":"https://api.github.com/users/rorlic","html_url":"https://github.com/rorlic","followers_url":"https://api.github.com/users/rorlic/followers","following_url":"https://api.github.com/users/rorlic/following{/other_user}","gists_url":"https://api.github.com/users/rorlic/gists{/gist_id}","starred_url":"https://api.github.com/users/rorlic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rorlic/subscriptions","organizations_url":"https://api.github.com/users/rorlic/orgs","repos_url":"https://api.github.com/users/rorlic/repos","events_url":"https://api.github.com/users/rorlic/events{/privacy}","received_events_url":"https://api.github.com/users/rorlic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T21:41:16Z","updated_at":"2024-02-05T21:41:16Z","author_association":"NONE","body":"Should I report this to [titanium](https://github.com/filip26/titanium-json-ld) instead?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928144472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928148294","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1928148294","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1928148294,"node_id":"IC_kwDOAHF7Ec5y7TVG","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-05T21:44:00Z","updated_at":"2024-02-05T21:44:00Z","author_association":"MEMBER","body":"Thanks for the report.\r\n\r\nThat code has changed in many years (*) so it would seem better to change the javadoc than change the implementation. \r\n\r\n(*) traces back to before the package renaming at Jena2->Jena3 April 2015.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928148294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928948174","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1928948174","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1928948174,"node_id":"IC_kwDOAHF7Ec5y-WnO","user":{"login":"BalduinLandolt","id":33053745,"node_id":"MDQ6VXNlcjMzMDUzNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/33053745?v=4","gravatar_id":"","url":"https://api.github.com/users/BalduinLandolt","html_url":"https://github.com/BalduinLandolt","followers_url":"https://api.github.com/users/BalduinLandolt/followers","following_url":"https://api.github.com/users/BalduinLandolt/following{/other_user}","gists_url":"https://api.github.com/users/BalduinLandolt/gists{/gist_id}","starred_url":"https://api.github.com/users/BalduinLandolt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalduinLandolt/subscriptions","organizations_url":"https://api.github.com/users/BalduinLandolt/orgs","repos_url":"https://api.github.com/users/BalduinLandolt/repos","events_url":"https://api.github.com/users/BalduinLandolt/events{/privacy}","received_events_url":"https://api.github.com/users/BalduinLandolt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T07:46:24Z","updated_at":"2024-02-06T07:47:31Z","author_association":"CONTRIBUTOR","body":"Fair enough, though changing the code would have been more convenient for me. But it's easy enough to work around, so no problem.\r\n\r\nI don't suppose it would be very idiomatic to have another method `getStringOrFail()` (or whatever name would seem fitting), like we see in Scala a lot?  \r\nIf that's not something you would consider, then feel free to close the issue.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928948174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928989794","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1928989794","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1928989794,"node_id":"IC_kwDOAHF7Ec5y-gxi","user":{"login":"namedgraph","id":849526,"node_id":"MDQ6VXNlcjg0OTUyNg==","avatar_url":"https://avatars.githubusercontent.com/u/849526?v=4","gravatar_id":"","url":"https://api.github.com/users/namedgraph","html_url":"https://github.com/namedgraph","followers_url":"https://api.github.com/users/namedgraph/followers","following_url":"https://api.github.com/users/namedgraph/following{/other_user}","gists_url":"https://api.github.com/users/namedgraph/gists{/gist_id}","starred_url":"https://api.github.com/users/namedgraph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namedgraph/subscriptions","organizations_url":"https://api.github.com/users/namedgraph/orgs","repos_url":"https://api.github.com/users/namedgraph/repos","events_url":"https://api.github.com/users/namedgraph/events{/privacy}","received_events_url":"https://api.github.com/users/namedgraph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T08:16:40Z","updated_at":"2024-02-06T08:16:40Z","author_association":"CONTRIBUTOR","body":"@BalduinLandolt so maybe we should have\r\n```java\r\npublic Optional<String> getString()\r\n```\r\n?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1928989794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929008176","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1929008176","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1929008176,"node_id":"IC_kwDOAHF7Ec5y-lQw","user":{"login":"BalduinLandolt","id":33053745,"node_id":"MDQ6VXNlcjMzMDUzNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/33053745?v=4","gravatar_id":"","url":"https://api.github.com/users/BalduinLandolt","html_url":"https://github.com/BalduinLandolt","followers_url":"https://api.github.com/users/BalduinLandolt/followers","following_url":"https://api.github.com/users/BalduinLandolt/following{/other_user}","gists_url":"https://api.github.com/users/BalduinLandolt/gists{/gist_id}","starred_url":"https://api.github.com/users/BalduinLandolt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalduinLandolt/subscriptions","organizations_url":"https://api.github.com/users/BalduinLandolt/orgs","repos_url":"https://api.github.com/users/BalduinLandolt/repos","events_url":"https://api.github.com/users/BalduinLandolt/events{/privacy}","received_events_url":"https://api.github.com/users/BalduinLandolt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T08:29:25Z","updated_at":"2024-02-06T08:29:25Z","author_association":"CONTRIBUTOR","body":"> @BalduinLandolt so maybe we should have\r\n> \r\n> ```java\r\n> public Optional<String> getString()\r\n> ```\r\n> \r\n> ?\r\n\r\nI would be happy with that, but from what I understand, @afs does not want to introduce a breaking change on `getString()`, which I suppose this would be, right?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929008176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929164492","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1929164492","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1929164492,"node_id":"IC_kwDOAHF7Ec5y_LbM","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T10:00:41Z","updated_at":"2024-02-06T10:00:41Z","author_association":"MEMBER","body":"> I would be happy with that, but from what I understand, @afs does not want to introduce a breaking change on `getString()`, which I suppose this would be, right?\r\n\r\nYes, bear in mind that Jena's codebase dates back to ~2001 so has a lot of history and a large user community.  In this case the Javadoc appears to be just be plain wrong comparative to the implementation.  We don't want to change the implementation to match the Javadoc because reality is there's lots of users happily using `getString()` as it works right now who we'd break if we did that.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929164492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929175987","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1929175987","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1929175987,"node_id":"IC_kwDOAHF7Ec5y_OOz","user":{"login":"BalduinLandolt","id":33053745,"node_id":"MDQ6VXNlcjMzMDUzNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/33053745?v=4","gravatar_id":"","url":"https://api.github.com/users/BalduinLandolt","html_url":"https://github.com/BalduinLandolt","followers_url":"https://api.github.com/users/BalduinLandolt/followers","following_url":"https://api.github.com/users/BalduinLandolt/following{/other_user}","gists_url":"https://api.github.com/users/BalduinLandolt/gists{/gist_id}","starred_url":"https://api.github.com/users/BalduinLandolt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalduinLandolt/subscriptions","organizations_url":"https://api.github.com/users/BalduinLandolt/orgs","repos_url":"https://api.github.com/users/BalduinLandolt/repos","events_url":"https://api.github.com/users/BalduinLandolt/events{/privacy}","received_events_url":"https://api.github.com/users/BalduinLandolt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T10:07:13Z","updated_at":"2024-02-06T10:07:13Z","author_association":"CONTRIBUTOR","body":"This makes total sense to me. I'll open a PR adopting the docstring to the actual implementation (and will keep doing the check on my side)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929175987/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929194640","html_url":"https://github.com/apache/jena/pull/2251#issuecomment-1929194640","issue_url":"https://api.github.com/repos/apache/jena/issues/2251","id":1929194640,"node_id":"IC_kwDOAHF7Ec5y_SyQ","user":{"login":"BalduinLandolt","id":33053745,"node_id":"MDQ6VXNlcjMzMDUzNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/33053745?v=4","gravatar_id":"","url":"https://api.github.com/users/BalduinLandolt","html_url":"https://github.com/BalduinLandolt","followers_url":"https://api.github.com/users/BalduinLandolt/followers","following_url":"https://api.github.com/users/BalduinLandolt/following{/other_user}","gists_url":"https://api.github.com/users/BalduinLandolt/gists{/gist_id}","starred_url":"https://api.github.com/users/BalduinLandolt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BalduinLandolt/subscriptions","organizations_url":"https://api.github.com/users/BalduinLandolt/orgs","repos_url":"https://api.github.com/users/BalduinLandolt/repos","events_url":"https://api.github.com/users/BalduinLandolt/events{/privacy}","received_events_url":"https://api.github.com/users/BalduinLandolt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T10:17:57Z","updated_at":"2024-02-06T10:17:57Z","author_association":"CONTRIBUTOR","body":"I hope this is ok like this - I couldn't tick \"Tests are included\" but that's not really relevant here, I suppose.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1929194640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930168610","html_url":"https://github.com/apache/jena/issues/2217#issuecomment-1930168610","issue_url":"https://api.github.com/repos/apache/jena/issues/2217","id":1930168610,"node_id":"IC_kwDOAHF7Ec5zDAki","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T16:09:13Z","updated_at":"2024-02-06T16:09:13Z","author_association":"MEMBER","body":"Hi there - sometimes it takes a while to get to issues.\r\n\r\nI tried example.context-by-url.jsonld at https://json-ld.org/playground/ and it raised an error on fetching the context but I don't think that is the problem. Something must have happened because an rdfs:label property is produced.\r\n\r\nIt could be the way Jena calls Titanium (version 1.3.3)\r\n\r\nhttps://github.com/apache/jena/blob/a2e5f53aa752f6c52d15b37b6a942a24a25f5058/jena-arq/src/main/java/org/apache/jena/riot/lang/LangJSONLD11.java#L107-L113\r\n\r\nthough then I'd expect it to happen in both examples.\r\n\r\nSo it looks to me like a Titanium issue (caveat that I'm not a heavy JSON-LD user).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930168610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930402344","html_url":"https://github.com/apache/jena/issues/2248#issuecomment-1930402344","issue_url":"https://api.github.com/repos/apache/jena/issues/2248","id":1930402344,"node_id":"IC_kwDOAHF7Ec5zD5oo","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:17:21Z","updated_at":"2024-02-06T17:17:21Z","author_association":"MEMBER","body":"I thought the mistake probably arose at the RDF 1.0 to RDF 1.1 boundary. \r\n\r\nIn RDF 1.0 strings don't have a datatype; in RDF 1.1, they do (xsd:string). That then explains \"For typed literals\" -- strings are typed literals nowadays.\r\n\r\nBut its the same code in Jena 2.\r\n\r\nJust above `getString`\r\n```\r\n @Override\r\n    public double getDouble()  {\r\n        if (isPlainLiteral()) {\r\n            return Double.parseDouble(getLexicalForm());\r\n        } else {\r\n            return asNumber(getValue()).doubleValue();\r\n        }\r\n    }\r\n```\r\n\r\nOperations like \"getDouble\" attempt to parse the lexical form `Double.parseDouble(getLexicalForm())`. These operations are not \"get if double\" despite that being the natural reading (nowadays). So \"getString\" returning the lexical form is \"parse as string\".\r\n\r\nThere is a good case for a redone Model-like API using more modern idioms and expected naming.\r\n\r\nBinary compatibility does seem to be appreciated by users.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930402344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930404845","html_url":"https://github.com/apache/jena/pull/2251#issuecomment-1930404845","issue_url":"https://api.github.com/repos/apache/jena/issues/2251","id":1930404845,"node_id":"IC_kwDOAHF7Ec5zD6Pt","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T17:18:28Z","updated_at":"2024-02-06T17:18:28Z","author_association":"MEMBER","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930404845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930536775","html_url":"https://github.com/apache/jena/pull/2247#issuecomment-1930536775","issue_url":"https://api.github.com/repos/apache/jena/issues/2247","id":1930536775,"node_id":"IC_kwDOAHF7Ec5zEadH","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T18:35:45Z","updated_at":"2024-02-06T18:35:45Z","author_association":"MEMBER","body":"@dependabot rebase","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930536775/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930709573","html_url":"https://github.com/apache/jena/issues/2217#issuecomment-1930709573","issue_url":"https://api.github.com/repos/apache/jena/issues/2217","id":1930709573,"node_id":"IC_kwDOAHF7Ec5zFEpF","user":{"login":"rorlic","id":501423,"node_id":"MDQ6VXNlcjUwMTQyMw==","avatar_url":"https://avatars.githubusercontent.com/u/501423?v=4","gravatar_id":"","url":"https://api.github.com/users/rorlic","html_url":"https://github.com/rorlic","followers_url":"https://api.github.com/users/rorlic/followers","following_url":"https://api.github.com/users/rorlic/following{/other_user}","gists_url":"https://api.github.com/users/rorlic/gists{/gist_id}","starred_url":"https://api.github.com/users/rorlic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rorlic/subscriptions","organizations_url":"https://api.github.com/users/rorlic/orgs","repos_url":"https://api.github.com/users/rorlic/repos","events_url":"https://api.github.com/users/rorlic/events{/privacy}","received_events_url":"https://api.github.com/users/rorlic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T20:35:50Z","updated_at":"2024-02-06T20:35:50Z","author_association":"NONE","body":"Hi, thank you for looking into this.\r\n\r\nThe reason it does not work for you in a browser is indeed CORS. If you use chrome you can fix this by installing a chrome extension which allows you to [control CORS](https://chromewebstore.google.com/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf?pli=1).\r\n\r\nHowever, it does work in the JSON-LD playground (which uses a javascript library called jsonld.js). The result for both examples in triples is:\r\n```\r\n<http://example.com/document-id> <http://www.w3.org/2000/01/rdf-schema#label> \"Just a simple document\" .\r\n```\r\n\r\nInteresting enough, I see the same _incorrect_ behaviour if I try it using [EasyRDF Converter](https://www.easyrdf.org/converter) (which uses its own PHP implementation for JSON-LD parsing). Browsing through their unit tests I do not see a test using a remote context, so they most likely also suffer from a similar problem.\r\n\r\nSo, how do you suggest we proceed given that it is most likely a Titanium issue?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930709573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930768868","html_url":"https://github.com/apache/jena/issues/2233#issuecomment-1930768868","issue_url":"https://api.github.com/repos/apache/jena/issues/2233","id":1930768868,"node_id":"IC_kwDOAHF7Ec5zFTHk","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T21:19:47Z","updated_at":"2024-02-06T21:19:47Z","author_association":"CONTRIBUTOR","body":"There is now an initial PR based on subclassing ARQ's QueryExecHTTPBuilder in an internal class of RDFLinkHTTP.\r\nThe main question is, whether this is an appropriate approach to a fix the issue - or whether it should be resolved differently.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930768868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930934329","html_url":"https://github.com/apache/jena/issues/2217#issuecomment-1930934329","issue_url":"https://api.github.com/repos/apache/jena/issues/2217","id":1930934329,"node_id":"IC_kwDOAHF7Ec5zF7g5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T23:21:19Z","updated_at":"2024-02-06T23:21:19Z","author_association":"MEMBER","body":"> So, how do you suggest we proceed given that it is most likely a Titanium issue?\r\n\r\nRaise an issue on the [Titanium repository](https://github.com/filip26/titanium-json-ld/issues).\r\nIdeally, with copies of the test files so the report is self-contained (copies means they are preserved long term).\r\n\r\nI found two closed issues in the general area that might be related, although they are not looking like they are exactly the same:\r\n\r\nhttps://github.com/filip26/titanium-json-ld/issues/63\r\nhttps://github.com/filip26/titanium-json-ld/issues/67","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930934329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930965743","html_url":"https://github.com/apache/jena/issues/2233#issuecomment-1930965743","issue_url":"https://api.github.com/repos/apache/jena/issues/2233","id":1930965743,"node_id":"IC_kwDOAHF7Ec5zGDLv","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-06T23:50:28Z","updated_at":"2024-02-06T23:51:22Z","author_association":"CONTRIBUTOR","body":"As a final update, I added methods to set QuerySendMode and UpdateSendMode on the remote builders.\r\nThis could be handled as a separate issue if desired.\r\n\r\nSome legacy triple store instances don't support `QueryMode.asGetWithLimitBody` - so in these cases its possible to set the mode to `QueryMode.asGetWithLimitForm` on the connection.\r\n\r\nConcrete use case example:\r\n\r\nDoes not work:\r\n```\r\ncurl -X POST -H 'Content-Type: application/sparql-query;charset=utf-8' https://staging.databus.dbpedia.org/repo/sparql --data-urlencode 'SELECT * { ?s a ?o } LIMIT 10'\r\n```\r\n\r\nWorks:\r\n```\r\ncurl -X POST https://staging.databus.dbpedia.org/repo/sparql --data-urlencode 'query=SELECT * { ?s a ?o } LIMIT 10'\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1930965743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1932116106","html_url":"https://github.com/apache/jena/pull/2253#issuecomment-1932116106","issue_url":"https://api.github.com/repos/apache/jena/issues/2253","id":1932116106,"node_id":"IC_kwDOAHF7Ec5zKcCK","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-07T14:02:50Z","updated_at":"2024-02-07T14:02:50Z","author_association":"CONTRIBUTOR","body":"I made one more round of cleanup for the `buildX` method in the inner class `QueryExecHTTPBuilderOverRDFLinkHTTP` within `RDFLinkHTTP` and squashed the commits.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1932116106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934212149","html_url":"https://github.com/apache/jena/issues/2254#issuecomment-1934212149","issue_url":"https://api.github.com/repos/apache/jena/issues/2254","id":1934212149,"node_id":"IC_kwDOAHF7Ec5zSbw1","user":{"login":"SamuelBoerlin","id":11892708,"node_id":"MDQ6VXNlcjExODkyNzA4","avatar_url":"https://avatars.githubusercontent.com/u/11892708?v=4","gravatar_id":"","url":"https://api.github.com/users/SamuelBoerlin","html_url":"https://github.com/SamuelBoerlin","followers_url":"https://api.github.com/users/SamuelBoerlin/followers","following_url":"https://api.github.com/users/SamuelBoerlin/following{/other_user}","gists_url":"https://api.github.com/users/SamuelBoerlin/gists{/gist_id}","starred_url":"https://api.github.com/users/SamuelBoerlin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SamuelBoerlin/subscriptions","organizations_url":"https://api.github.com/users/SamuelBoerlin/orgs","repos_url":"https://api.github.com/users/SamuelBoerlin/repos","events_url":"https://api.github.com/users/SamuelBoerlin/events{/privacy}","received_events_url":"https://api.github.com/users/SamuelBoerlin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T14:15:54Z","updated_at":"2024-02-08T14:21:22Z","author_association":"NONE","body":"Hi, thanks for taking a look at this!\r\n\r\nWe're running Fuseki in a Docker container (based on eclipse-temurin:17-jre-focal which in turn is based on Ubuntu). The host is running Ubuntu 22.04.3 LTS.\r\n\r\nHere are the relevant logs:\r\n```\r\n12:55:12 INFO Server :: Apache Jena Fuseki 4.10.0\r\n12:55:12 INFO Config :: FUSEKI_HOME=/jena-fuseki\r\n12:55:12 INFO Config :: FUSEKI_BASE=/fuseki\r\n12:55:12 INFO Config :: Shiro file: file:///fuseki/shiro.ini\r\n12:55:13 INFO Config :: Load configuration: file:///fuseki/configuration/dsp-repo.ttl\r\n12:55:13 INFO Server :: Configuration file: /fuseki/config.ttl\r\n12:55:13 INFO Server :: Path = /dsp-repo\r\n12:55:13 INFO Server :: Memory: 1.0 GiB\r\n12:55:13 INFO Server :: Java: 17.0.10\r\n12:55:13 INFO Server :: OS: Linux 5.15.0-91-generic amd64\r\n12:55:13 INFO Server :: PID: 7\r\n12:55:13 INFO Server :: Started 2024/02/08 12:55:13 UTC on port 3030\r\n<some queries>\r\n12:57:35 INFO Admin :: [47] Compact dataset /dsp-repo\r\n12:57:35 INFO Server :: Task : 1 : Compact\r\n12:57:35 INFO Server :: [Task 1] starts : Compact\r\n12:57:35 INFO Compact :: [47] >>>> Start compact /dsp-repo\r\n12:57:35 INFO Admin :: [48] Task 1\r\n12:57:45 INFO Admin :: [49] Task 1\r\n12:57:55 INFO Admin :: [51] Task 1\r\n12:58:05 INFO Admin :: [54] Task 1\r\n12:58:15 INFO Admin :: [55] Task 1\r\n12:58:25 INFO Admin :: [57] Task 1\r\n<stopped fuseki>\r\n12:58:46 INFO Server :: Apache Jena Fuseki 4.10.0\r\n12:58:46 INFO Config :: FUSEKI_HOME=/jena-fuseki\r\n12:58:46 INFO Config :: FUSEKI_BASE=/fuseki\r\n12:58:46 INFO Config :: Shiro file: file:///fuseki/shiro.ini\r\n12:58:46 INFO Config :: Load configuration: file:///fuseki/configuration/dsp-repo.ttl\r\n12:58:47 INFO Server :: Configuration file: /fuseki/config.ttl\r\n12:58:47 INFO Server :: Path = /dsp-repo\r\n12:58:47 INFO Server :: Memory: 1.0 GiB\r\n12:58:47 INFO Server :: Java: 17.0.10\r\n12:58:47 INFO Server :: OS: Linux 5.15.0-91-generic amd64\r\n12:58:47 INFO Server :: PID: 7\r\n12:58:47 INFO Server :: Started 2024/02/08 12:58:47 UTC on port 3030\r\n```\r\n\r\nThere are no errors in the logs and Fuseki starts up just fine after it was stopped during compaction, it's just missing most of the original data.\r\n\r\nAnd these are the files in Data-0001 (original) and Data-0002 (partially compacted):\r\n```\r\nroot@dd2493b7258a:/fuseki/databases/dsp-repo# ls -la Data-0001\r\ntotal 8408748\r\ndrwxr-xr-x 2 root root       4096 Feb  8 04:01 .\r\ndrwxr-xr-x 4 root root       4096 Feb  8 13:57 ..\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 GOSP.bpt\r\n-rw-r--r-- 1 root root 1317011456 Feb  8 04:10 GOSP.dat\r\n-rw-r--r-- 1 root root   16777216 Feb  8 04:10 GOSP.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 GPOS.bpt\r\n-rw-r--r-- 1 root root 1342177280 Feb  8 04:10 GPOS.dat\r\n-rw-r--r-- 1 root root   16777216 Feb  8 04:10 GPOS.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 GPU.bpt\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 GPU.dat\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 GPU.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 GSPO.bpt\r\n-rw-r--r-- 1 root root 1375731712 Feb  8 04:10 GSPO.dat\r\n-rw-r--r-- 1 root root   16777216 Feb  8 04:10 GSPO.idn\r\n-rw-r--r-- 1 root root          0 Feb  8 04:10 journal.jrnl\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 nodes.bpt\r\n-rw-r--r-- 1 root root  176160768 Feb  8 04:10 nodes.dat\r\n-rw-r--r-- 1 root root         16 Feb  8 04:10 nodes-data.bdf\r\n-rw-r--r-- 1 root root  308827588 Feb  8 04:10 nodes-data.obj\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:10 nodes.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 OSP.bpt\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 OSP.dat\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 OSPG.bpt\r\n-rw-r--r-- 1 root root 1317011456 Feb  8 04:10 OSPG.dat\r\n-rw-r--r-- 1 root root   16777216 Feb  8 04:10 OSPG.idn\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 OSP.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 POS.bpt\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 POS.dat\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 POSG.bpt\r\n-rw-r--r-- 1 root root 1350565888 Feb  8 04:10 POSG.dat\r\n-rw-r--r-- 1 root root   16777216 Feb  8 04:10 POSG.idn\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 POS.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 prefixes.bpt\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 prefixes.dat\r\n-rw-r--r-- 1 root root         16 Feb  8 04:10 prefixes-data.bdf\r\n-rw-r--r-- 1 root root          0 Feb  8 04:01 prefixes-data.obj\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 prefixes.idn\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 SPO.bpt\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 SPO.dat\r\n-rw-r--r-- 1 root root         24 Feb  8 04:10 SPOG.bpt\r\n-rw-r--r-- 1 root root 1375731712 Feb  8 04:10 SPOG.dat\r\n-rw-r--r-- 1 root root   16777216 Feb  8 04:10 SPOG.idn\r\n-rw-r--r-- 1 root root    8388608 Feb  8 04:01 SPO.idn\r\n-rw-r--r-- 1 root root          2 Feb  8 13:55 tdb.lock\r\nroot@dd2493b7258a:/fuseki/databases/dsp-repo# ls -la Data-0002\r\ntotal 982360\r\ndrwxr-xr-x 2 root root      4096 Feb  8 13:57 .\r\ndrwxr-xr-x 4 root root      4096 Feb  8 13:57 ..\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 GOSP.bpt\r\n-rw-r--r-- 1 root root 150994944 Feb  8 13:59 GOSP.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 GOSP.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 GPOS.bpt\r\n-rw-r--r-- 1 root root 159383552 Feb  8 13:59 GPOS.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 GPOS.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 GPU.bpt\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 GPU.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 GPU.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 GSPO.bpt\r\n-rw-r--r-- 1 root root 167772160 Feb  8 13:59 GSPO.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 GSPO.idn\r\n-rw-r--r-- 1 root root         0 Feb  8 13:59 journal.jrnl\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 nodes.bpt\r\n-rw-r--r-- 1 root root  25165824 Feb  8 13:59 nodes.dat\r\n-rw-r--r-- 1 root root        16 Feb  8 13:59 nodes-data.bdf\r\n-rw-r--r-- 1 root root  44722477 Feb  8 13:59 nodes-data.obj\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 nodes.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 OSP.bpt\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 OSP.dat\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 OSPG.bpt\r\n-rw-r--r-- 1 root root 150994944 Feb  8 13:59 OSPG.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 OSPG.idn\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 OSP.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 POS.bpt\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 POS.dat\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 POSG.bpt\r\n-rw-r--r-- 1 root root 159383552 Feb  8 13:59 POSG.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 POSG.idn\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 POS.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 prefixes.bpt\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 prefixes.dat\r\n-rw-r--r-- 1 root root        16 Feb  8 13:59 prefixes-data.bdf\r\n-rw-r--r-- 1 root root         0 Feb  8 13:57 prefixes-data.obj\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 prefixes.idn\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 SPO.bpt\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 SPO.dat\r\n-rw-r--r-- 1 root root        24 Feb  8 13:59 SPOG.bpt\r\n-rw-r--r-- 1 root root 167772160 Feb  8 13:59 SPOG.dat\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:59 SPOG.idn\r\n-rw-r--r-- 1 root root   8388608 Feb  8 13:57 SPO.idn\r\n-rw-r--r-- 1 root root         2 Feb  8 13:58 tdb.lock\r\nroot@dd2493b7258a:/fuseki/databases/dsp-repo# \r\n```\r\nI should note that the data in Data-0001 is already mostly compacted as it was restored from a previous dump, so I'd expect Data-0002 to end up having about the same size.\r\n\r\nConfig:\r\n```\r\n@prefix :           <http://base/#> .\r\n@prefix fuseki:     <http://jena.apache.org/fuseki#> .\r\n@prefix ja:         <http://jena.hpl.hp.com/2005/11/Assembler#> .\r\n@prefix knora-base: <http://www.knora.org/ontology/knora-base#> .\r\n@prefix rdf:        <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\r\n@prefix rdfs:       <http://www.w3.org/2000/01/rdf-schema#> .\r\n@prefix root:       <http://127.0.0.1:8888/$/datasets#> .\r\n@prefix tdb2:       <http://jena.apache.org/2016/tdb#> .\r\n@prefix text:       <http://jena.apache.org/text#> .\r\n\r\n:indexLucene  rdf:type  text:TextIndexLucene;\r\n        text:analyzer   [ rdf:type        text:ConfigurableAnalyzer;\r\n                          text:filters    ( text:ASCIIFoldingFilter text:LowerCaseFilter );\r\n                          text:tokenizer  text:WhitespaceTokenizer\r\n                        ];\r\n        text:directory  \"/fuseki/lucene/dsp-repo\";\r\n        text:entityMap  :entMap .\r\n\r\n[ rdf:type         fuseki:Server;\r\n  fuseki:services  :service_tdb_all;\r\n  ja:loadClass     \"org.apache.jena.query.text.TextQuery\"\r\n] .\r\n\r\n:tdb_dataset_readwrite\r\n        rdf:type                tdb2:DatasetTDB2;\r\n        tdb2:location           \"/fuseki/databases/dsp-repo\";\r\n        tdb2:unionDefaultGraph  true .\r\n\r\n:service_tdb_all  rdf:type            fuseki:Service;\r\n        rdfs:label                    \"TDB2 dsp-repo\";\r\n        fuseki:dataset                :text_dataset;\r\n        fuseki:name                   \"dsp-repo\";\r\n        fuseki:serviceQuery           \"sparql\" , \"query\";\r\n        fuseki:serviceReadGraphStore  \"get\";\r\n        fuseki:serviceReadWriteGraphStore\r\n                \"data\";\r\n        fuseki:serviceUpdate          \"update\";\r\n        fuseki:serviceUpload          \"upload\" .\r\n\r\n:text_dataset  rdf:type  text:TextDataset;\r\n        text:dataset  :tdb_dataset_readwrite;\r\n        text:index    :indexLucene .\r\n\r\n:entMap  rdf:type          text:EntityMap;\r\n        text:defaultField  \"text\";\r\n        text:entityField   \"uri\";\r\n        text:map           ( [ text:field      \"text\";\r\n                               text:predicate  rdfs:label\r\n                             ]\r\n                             [ text:field      \"text\";\r\n                               text:predicate  knora-base:valueHasString\r\n                             ]\r\n                             [ text:field      \"text\";\r\n                               text:predicate  knora-base:valueHasComment\r\n                             ]\r\n                           );\r\n        text:uidField      \"uid\" .\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934212149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934265903","html_url":"https://github.com/apache/jena/issues/2254#issuecomment-1934265903","issue_url":"https://api.github.com/repos/apache/jena/issues/2254","id":1934265903,"node_id":"IC_kwDOAHF7Ec5zSo4v","user":{"login":"flange-ipb","id":34936695,"node_id":"MDQ6VXNlcjM0OTM2Njk1","avatar_url":"https://avatars.githubusercontent.com/u/34936695?v=4","gravatar_id":"","url":"https://api.github.com/users/flange-ipb","html_url":"https://github.com/flange-ipb","followers_url":"https://api.github.com/users/flange-ipb/followers","following_url":"https://api.github.com/users/flange-ipb/following{/other_user}","gists_url":"https://api.github.com/users/flange-ipb/gists{/gist_id}","starred_url":"https://api.github.com/users/flange-ipb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flange-ipb/subscriptions","organizations_url":"https://api.github.com/users/flange-ipb/orgs","repos_url":"https://api.github.com/users/flange-ipb/repos","events_url":"https://api.github.com/users/flange-ipb/events{/privacy}","received_events_url":"https://api.github.com/users/flange-ipb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T14:42:16Z","updated_at":"2024-02-08T14:42:16Z","author_association":"NONE","body":"A simple idea for improving this situation:\r\n- in the process of compaction, write the dataset into a directory with a temporary name that won't be recognized during Fuseki's startup (e.g. `Data-0002-tmp` instead of `Data-0002`)\r\n- when compaction is finished, rename the directory\r\n\r\nAssuming the original (`Data-0002-tmp`) and the target (`Data-0002`) directories are on the same file system the rename/move operation could* be atomic.\r\n\r\n*This is platform-dependent, see for instance [File.renameTo()](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/File.html#renameTo(java.io.File)).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934265903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934905058","html_url":"https://github.com/apache/jena/issues/2254#issuecomment-1934905058","issue_url":"https://api.github.com/repos/apache/jena/issues/2254","id":1934905058,"node_id":"IC_kwDOAHF7Ec5zVE7i","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T20:44:34Z","updated_at":"2024-02-08T20:44:34Z","author_association":"MEMBER","body":"That's the common way to do it - the other is to write a file with the current active storage area at the start of compaction, and append the intended new location at the end of the work, move it, then then delete the file. A transaction log in other words.\r\n\r\nCan a directory with memory-mapped files in it be renamed on MS Windows? Or does this run into the problems around https://bugs.openjdk.org/browse/JDK-4715154?\r\n\r\nThe related [Files.move](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#move(java.nio.file.Path,java.nio.file.Path,java.nio.file.CopyOption...)) \r\n\r\nhas more details and seems to say \"OK\"\r\n\"\"\"\r\nWhen invoked to move a directory that is not empty then the directory is moved if it does not require moving the entries in the directory.\r\n\"\"\"\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934905058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934924635","html_url":"https://github.com/apache/jena/issues/2233#issuecomment-1934924635","issue_url":"https://api.github.com/repos/apache/jena/issues/2233","id":1934924635,"node_id":"IC_kwDOAHF7Ec5zVJtb","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T20:59:55Z","updated_at":"2024-02-08T20:59:55Z","author_association":"MEMBER","body":"> As a final update, I added methods to set QuerySendMode and UpdateSendMode on the remote builders.\r\n> This could be handled as a separate issue if desired.\r\n\r\nYes please. I can't see which changes relate to this issue and there aren't separate commit. One PR for two issues and two commits would be OK.\r\n\r\nThere seem to be visibility changes that don't seem necessary. I am trying to understand why QueryExecHTTPBuilder header setters sendmode setters aren't sufficient. \r\n\r\nDo we need a clone-like operation (from a builder or from a built execution object) to create a builder to specialise?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934924635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934971779","html_url":"https://github.com/apache/jena/pull/2231#issuecomment-1934971779","issue_url":"https://api.github.com/repos/apache/jena/issues/2231","id":1934971779,"node_id":"IC_kwDOAHF7Ec5zVVOD","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T21:36:41Z","updated_at":"2024-02-08T21:36:41Z","author_association":"MEMBER","body":"Other than the license (and a minor issue format issue), this PR looks and builds properly.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1934971779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1935079561","html_url":"https://github.com/apache/jena/issues/2233#issuecomment-1935079561","issue_url":"https://api.github.com/repos/apache/jena/issues/2233","id":1935079561,"node_id":"IC_kwDOAHF7Ec5zVviJ","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-08T23:14:35Z","updated_at":"2024-02-08T23:21:13Z","author_association":"CONTRIBUTOR","body":"The use case is to improve abstraction: Once the connection is configured with the send mode, then the rest of the application no longer has to concern itself with that aspect. Any call to `conn.query()` or `conn.newQuery()` will default to the configured send mode. This is useful when the triple store one connects to e.g. does not support `QuerySendMode.asGetWithLimitBody`. Otherwise, the application would have to break the encapsulation of the RDFConnection for each query: downcast the QueryExecBuilder to QueryExecHTTPBuilder and set the send mode - which wouldn't work for a RDFConnection to a Dataset.\r\n\r\nNote, that the send mode is just passed on as a default. It is still possible to override it in the described way if desired.\r\n\r\n> There seem to be visibility changes that don't seem necessary.\r\n\r\nThe constructor of `QueryExecHTTBuilder` could go from private to protected (rather than public). I think the other formerly private attributes are passed to the `buildX` function, so their visibility could remain unchanged.\r\n\r\nWill check in detail and separate the PR tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1935079561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]