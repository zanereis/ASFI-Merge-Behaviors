[{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961557","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961557","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961557,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE1NTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-18T23:39:03Z","updated_at":"2025-01-24T16:45:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>If worker reports metrics directly there is going to be no room for aggregation. That is fine for external time-series DB (since they are able to aggregate before showing), but sometimes they're still too many metrics points which slow down aggregation.</p>\n\n<p>Btw, I don't intend to put more pressures to anyone, but only addressing reporter doesn't resolve the issues behind current metrics.<br/>\nI really would like to emphasize that there're design issues on metrics, not just API itself. I just waited JStorm merger phase 2 to address this, but this will not be going to happen even this year, so would just shout out again.</p>\n\n<p>Please refer below links: </p>\n\n<ul>\n\t<li><a href=\"https://cwiki.apache.org/confluence/display/STORM/Limitations+of+current+metrics+feature\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://cwiki.apache.org/confluence/display/STORM/Limitations+of+current+metrics+feature</a></li>\n\t<li><a href=\"https://cwiki.apache.org/confluence/display/STORM/Wishlist+for+new+metrics+feature\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://cwiki.apache.org/confluence/display/STORM/Wishlist+for+new+metrics+feature</a></li>\n</ul>\n\n\n<p>While I don't think we should address whole kinds of wishlist, I strongly think we should get rid of current limitations of metrics if we really want to touch the thing.<br/>\nAnd JStorm approach seems to be able to address all kinds of current limitations. Centralize (to Nimbus) + internal fast storage (RocksDB) is the key, and TopologyMaster sends workers metrics to Nimbus efficiently. (TM seems not aggregate the value of metric itself, but maximize the throughput between TM and Nimbus) </p>\n\n<p>I haven't look at metrics system on Kafka Streams and Flink (they seemed to renew the metrics) but having a look should help to set direction right.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925542","html_url":"https://github.com/apache/storm/issues/5743#issuecomment-2612925542","issue_url":"https://api.github.com/repos/apache/storm/issues/5743","id":2612925542,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5MjU1NDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T03:41:39Z","updated_at":"2025-01-24T16:27:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arunmahadevan\">arunmahadevan</a>:</i>\n<p>Hi <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jerrypeng\" class=\"user-hover\" rel=\"jerrypeng\">Boyang Jerry Peng</a> right now the updateStateByKey operation is built on top of StatefulBolt abstraction that can save state externally. The other operations maintain state in memory and rely on storms acking/replay mechanisms and so it can provide only at-least once guarantees. I had some initial thoughts on how we could improve this in future to provide a notion of exactly once. I will update the design docs with more details soon.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612952589","html_url":"https://github.com/apache/storm/issues/5864#issuecomment-2612952589","issue_url":"https://api.github.com/repos/apache/storm/issues/5864","id":2612952589,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NTI1ODk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T04:47:54Z","updated_at":"2025-01-24T16:40:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Back to unassigned and open since it doesn't have any updates for more than 1 month.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612952589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925548","html_url":"https://github.com/apache/storm/issues/5743#issuecomment-2612925548","issue_url":"https://api.github.com/repos/apache/storm/issues/5743","id":2612925548,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5MjU1NDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T11:40:54Z","updated_at":"2025-01-24T16:27:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arunmahadevan\">arunmahadevan</a>:</i>\n<p>Updated doc with more details on the current implementation and possible approaches for the next phase to provide stronger guarantees. The doc and the example in the PR should be a good starting point to get a good understanding of the current implementation and provide feedback.</p>\n\n<p>The PR  - <a href=\"https://github.com/apache/storm/pull/1693\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/storm/pull/1693</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925552","html_url":"https://github.com/apache/storm/issues/5743#issuecomment-2612925552","issue_url":"https://api.github.com/repos/apache/storm/issues/5743","id":2612925552,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5MjU1NTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T12:18:27Z","updated_at":"2025-01-24T16:27:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arunmahadevan\">arunmahadevan</a>:</i>\n<p>The google doc link for collaborating more easily - <a href=\"https://docs.google.com/document/d/1Ew7uFF1UJ6e_zq0t4bM6A9auuEaArviAjjWYSpVFqPY/edit?usp=sharing\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://docs.google.com/document/d/1Ew7uFF1UJ6e_zq0t4bM6A9auuEaArviAjjWYSpVFqPY/edit?usp=sharing</a></p>\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/254796467","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-254796467","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":254796467,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDc5NjQ2Nw==","user":{"login":"arunmahadevan","id":6792890,"node_id":"MDQ6VXNlcjY3OTI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6792890?v=4","gravatar_id":"","url":"https://api.github.com/users/arunmahadevan","html_url":"https://github.com/arunmahadevan","followers_url":"https://api.github.com/users/arunmahadevan/followers","following_url":"https://api.github.com/users/arunmahadevan/following{/other_user}","gists_url":"https://api.github.com/users/arunmahadevan/gists{/gist_id}","starred_url":"https://api.github.com/users/arunmahadevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arunmahadevan/subscriptions","organizations_url":"https://api.github.com/users/arunmahadevan/orgs","repos_url":"https://api.github.com/users/arunmahadevan/repos","events_url":"https://api.github.com/users/arunmahadevan/events{/privacy}","received_events_url":"https://api.github.com/users/arunmahadevan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T12:22:37Z","updated_at":"2016-10-19T12:22:37Z","author_association":"CONTRIBUTOR","body":"Updated doc -\nhttps://docs.google.com/document/d/1Ew7uFF1UJ6e_zq0t4bM6A9auuEaArviAjjWYSpVFqPY/edit?usp=sharing\n\nPinging for reviews and feedback. Its a big patch mostly due the number of different apis, however the doc and the examples should be a good starting point.\n\n@HeartSaVioR would like inputs from you esp. since it could be potentially used in storm-sql in future.\n\n@ptgoetz would be great if you could take a look as well, since you were working on a prototype beam runner for storm. To validate the apis and identify gaps, I will try to do a prototype runner using the proposed apis.\n\n@revans2 please take a look if you get a chance.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/254796467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961791","html_url":"https://github.com/apache/storm/issues/5936#issuecomment-2612961791","issue_url":"https://api.github.com/repos/apache/storm/issues/5936","id":2612961791,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE3OTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T12:30:09Z","updated_at":"2025-01-24T16:45:18Z","author_association":"COLLABORATOR","body":"Subtask of parent task STORM-1843","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961920","html_url":"https://github.com/apache/storm/issues/5937#issuecomment-2612961920","issue_url":"https://api.github.com/repos/apache/storm/issues/5937","id":2612961920,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE5MjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T12:43:07Z","updated_at":"2025-01-24T16:45:22Z","author_association":"COLLABORATOR","body":"Subtask of parent task STORM-1843","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961563","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961563","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961563,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE1NjM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T14:07:52Z","updated_at":"2025-01-24T16:45:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I agree with all that has been said here.  There really are several smaller pieces of this project that each need to be addressed separately.</p>\n\n<p>1) End User API<br/>\n2) Reporting API<br/>\n3) Default reporting implementation<br/>\n4) Query API<br/>\n5) Default Query Implementation<br/>\n6) UI Updates</p>\n\n<p>Most of these pieces can be worked on separately and some what independently.</p>\n\n<p>We all seem to agree on 1 and 2 being stock Codahale.  I know others have moved away form Codahale in the past, but if we run into issues I would rather try to work them out with the Codahale community rather then go it on our own.</p>\n\n<p>For 3 The default reporting implementation I think the simplest approach to start out with is to have a default reporter periodically write metrics to the local file system, and have the supervisor pick them up and report them through thrift to nimbus.  This allows us to not have to worry about security.  The supervisor will be able to authenticate with nimbus no problem as it already does.</p>\n\n<p>For 5 I think using the JStorm rocksdb implementation as a starting point is great, and others seem to agree.</p>\n\n<p>4 and 6 are things that we have not really addressed here.  We probably should look at others and see what they are doing here. and possibly copy a striped down version of OpenTSDB or Druid as an initial starting point.</p>\n\n<p>My proposal would be to file separate JIRA for each of these pieces.  Many of these pieces can provide values without the others fully in place.  Having a new metrics/reporter API based on Codahale that is parallel to the IMetricsConsumer we have right now would be a good start.  It would fix a lot of the issues with IMetricsConsumer but we wouldn't have to tie it into an internal reporting system yet.  We could even implement it in 1.x and deprecate the older API there as well.</p>\n\n<p>Having a time series database that all it does is store metrics that are currently reported through ZK would be a great step too.  It would not be prefect, but at least we could have a history for the metrics and they would not reset every time a worker crashes.</p>\n\n<p>Once those two are in place we can glue the different pieces together.</p>\n\n<p>It feels like 3 phases each independent and each fairly manageable.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/254846764","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-254846764","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":254846764,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDg0Njc2NA==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T15:23:20Z","updated_at":"2016-10-19T15:23:20Z","author_association":"MEMBER","body":"@arunmahadevan I will review. Before you start working on a prototype beam runner, let me push what I have to a feature branch. I have a fair amount of the basic scaffolding you would need.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/254846764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/254858702","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-254858702","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":254858702,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDg1ODcwMg==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T16:01:38Z","updated_at":"2016-10-19T16:01:38Z","author_association":"CONTRIBUTOR","body":"@arunmahadevan \nI'm in the middle of reviewing updated design doc again. Since I've read it once so there will be no outstanding comments, but just would like to check again.\n\nBtw, I merged this PR to my local and convert one of example on storm-starter (windowing example), and it seems to run fine. After reviewing design doc, I'll play with API sets and leave some feedbacks.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/254858702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/254867273","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-254867273","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":254867273,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDg2NzI3Mw==","user":{"login":"satishd","id":2577761,"node_id":"MDQ6VXNlcjI1Nzc3NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2577761?v=4","gravatar_id":"","url":"https://api.github.com/users/satishd","html_url":"https://github.com/satishd","followers_url":"https://api.github.com/users/satishd/followers","following_url":"https://api.github.com/users/satishd/following{/other_user}","gists_url":"https://api.github.com/users/satishd/gists{/gist_id}","starred_url":"https://api.github.com/users/satishd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishd/subscriptions","organizations_url":"https://api.github.com/users/satishd/orgs","repos_url":"https://api.github.com/users/satishd/repos","events_url":"https://api.github.com/users/satishd/events{/privacy}","received_events_url":"https://api.github.com/users/satishd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T16:31:13Z","updated_at":"2016-10-19T16:31:13Z","author_association":"MEMBER","body":"It is better to discuss these APIs before working on Beam runner prototypes. Lets not jump on using these APIs to work on runner. Beam API is currently changing and we should discuss those API contracts and we should evaluate what kind of enhancements we need to do. We can create subtasks for the requirements and work on those later.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/254867273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/254873859","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-254873859","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":254873859,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDg3Mzg1OQ==","user":{"login":"arunmahadevan","id":6792890,"node_id":"MDQ6VXNlcjY3OTI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6792890?v=4","gravatar_id":"","url":"https://api.github.com/users/arunmahadevan","html_url":"https://github.com/arunmahadevan","followers_url":"https://api.github.com/users/arunmahadevan/followers","following_url":"https://api.github.com/users/arunmahadevan/following{/other_user}","gists_url":"https://api.github.com/users/arunmahadevan/gists{/gist_id}","starred_url":"https://api.github.com/users/arunmahadevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arunmahadevan/subscriptions","organizations_url":"https://api.github.com/users/arunmahadevan/orgs","repos_url":"https://api.github.com/users/arunmahadevan/repos","events_url":"https://api.github.com/users/arunmahadevan/events{/privacy}","received_events_url":"https://api.github.com/users/arunmahadevan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T16:54:36Z","updated_at":"2016-10-19T16:54:36Z","author_association":"CONTRIBUTOR","body":"@satishd right now its more of a prototype proof of concept for the proposed apis, not the final version. Once the beam api solidifies we can have a separate discussion to identify the gaps, but doesn't make sense to hold off the prototype implementation which is more for validating the proposed apis.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/254873859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961574","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961574","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961574,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE1NzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T17:37:30Z","updated_at":"2025-01-24T16:45:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Thanks for the correction.</p>\n\n<p>Components that generate metrics would update an instance of a metric. So for example say we had a Counter for something like tuples processed. In the worker, we would call <tt>counter.inc()</tt>. That would not cause the metric to be published anywhere, it would just update the state of that metric instance.</p>\n\n<p>Reporters run on a independent thread, usually running at a configurable interval like one minute, and publish the current state of all the registered metrics. That decouples reporting (the expensive part) from metrics updates (the inexpensive part), minimizing the impact to the performance-critical path.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961580","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961580","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961580,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE1ODA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T17:52:16Z","updated_at":"2025-01-24T16:45:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>One thing that I would probably do differently from JStorm's approach is not to use wrappers around metrics but rather expose them directly.</p>\n\n<p>I was hoping to avoid have some sort of centralized \"metrics collector\" service, etc., but the more I think it may be necessary, particularly wrt aggregated metrics. From a protocol perspective, I'd lean more towards netty than Thrift.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961590","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961590","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961590,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE1OTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T17:53:12Z","updated_at":"2025-01-24T16:45:12Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abellina\">abellina</a>:</i>\n<p>Makes sense to me. For point 3 specifically, we'd create a custom codahale reporter @worker level that writes to disk. From that moment on it is thrift to Nimbus to out-of-the-box store (RocksDB).</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962029","html_url":"https://github.com/apache/storm/issues/5938#issuecomment-2612962029","issue_url":"https://api.github.com/repos/apache/storm/issues/5938","id":2612962029,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjIwMjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T17:53:31Z","updated_at":"2025-01-24T16:45:26Z","author_association":"COLLABORATOR","body":"Subtasks:\n\n- STORM-2887\n- STORM-2888\n- STORM-2889\n- STORM-2890\n- STORM-2895\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961597","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961597","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961597,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE1OTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T17:56:56Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>And to address <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\" class=\"user-hover\" rel=\"kabhwan\">Jungtaek Lim</a>'s concern about aggregation.  We can over time add in aggregation at the supervisor level, and then also aggregation in the DB itself.  Most TSDB systems act like an OLAP cube and pre-aggregate within the DB on common dimensions (topology, host, etc...).  We could add that in too without too much effort.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961601","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961601","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961601,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2MDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T18:21:15Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Copying your wish list here for easy reference:</p>\n\n<blockquote><p>1. Aggregation at component level (Average, Sum etc)</p></blockquote>\n\n<p>As I mentioned in an earlier comment, this is likely going to require something centralized in order to aggregate cross-worker metrics. We'll need more discussion to work this out.</p>\n\n<blockquote><p>2. Blacklist/whitelist</p></blockquote>\n\n<p>Metrics supports the concept of filtering: <a href=\"https://github.com/dropwizard/metrics/blob/3.2-development/metrics-core/src/main/java/com/codahale/metrics/MetricFilter.java\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/dropwizard/metrics/blob/3.2-development/metrics-core/src/main/java/com/codahale/metrics/MetricFilter.java</a></p>\n\n<blockquote><p>3. Allow only numbers for values</p></blockquote>\n\n<p>All the metric types in the library are pretty well typed to only number values. Gauges support non-number types, but I don't see us using many non-number types.</p>\n\n<blockquote><p>4. Efficient routing of built-in metrics to UI (current they get tagged</p></blockquote>\n<p>along with executor heartbeat which puts pressure on zookeeper)</p>\n\n<p>I feel UI integration is out of scope for the time being, but can be a follow on effort.</p>\n\n<blockquote><p>5. Worker/JVM level metrics which are not owned by a particular component</p></blockquote>\n\n<p>Metrics JVM support: <a href=\"http://metrics.dropwizard.io/3.1.0/manual/jvm/\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://metrics.dropwizard.io/3.1.0/manual/jvm/</a></p>\n\n<blockquote><p>6. Percentiles for latency metrics such as p99, p95 etc</p></blockquote>\n\n<p>This is handled automatically for a number of metrics: <a href=\"https://github.com/dropwizard/metrics/blob/3.2-development/metrics-core/src/main/java/com/codahale/metrics/Snapshot.java\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/dropwizard/metrics/blob/3.2-development/metrics-core/src/main/java/com/codahale/metrics/Snapshot.java</a></p>\n\n<blockquote><p>7. Aggregation at stream level, and machine level</p></blockquote>\n\n<p>This goes back to point #1. We'll have to plan carefully how we support aggregation.</p>\n\n<blockquote><p>8. way to subscribe cluster metrics</p></blockquote>\n\n<p>I think this is covered by the metrics reporter mechanism.</p>\n\n<blockquote><p>9. counter stats as non-sampled if it doesn't hurt performance</p></blockquote>\n\n<p>We should be able to determine that with some micro-benchmarking.</p>\n\n<blockquote><p>10. more metrics like serialization/deserialization latency, queue status</p></blockquote>\n\n<p>Agreed. It's actually very easy to add new metrics. We do however want to be careful to not over-instrument and affect performance.</p>\n\n<p>11. Dynamically turning on/off specific metrics</p>\n\n<p>That I haven't thought about too much, but we could probably do something like a dynamic filter (see #2).</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961606","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961606","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961606,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2MDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T18:59:58Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<blockquote><p>There really are several smaller pieces of this project that each need to be addressed separately.</p></blockquote>\n\n<p>I'd say lets make the broken-down taks subtasks of this JIRA.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961611","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961611","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961611,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2MTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T20:27:22Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>One concern I have with having nimbus as the destination of aggregated metrics, is nimbus HA. If a new nimbus becomes leader, presumably all metrics will be lost or reset to stale values, unless there is some sort of replication.</p>\n\n<p>Would a \"metrics store\" need to be HA? I would probably argue that it isn't, provided the reporters handle a metrics store outage gracefully without affecting performance (since the reporter threads are not on the critical path this wouldn't be too hard).</p>\n\n<p>I also like the idea of doing the aggregation at the \"metrics store\" level. That would simplify things since all metrics reporters could push values to that store without doing any intermediate aggregation.</p>\n\n<p>(I'm using scare quotes around \"metrics store\" because it is starting to sound like we are talking about a new service/daemon.)</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961615","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961615","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961615,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2MTU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-19T20:35:28Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I agree that we eventually want the metrics to be HA.  It should be fairly simple to set up a periodic sync to the other nimbus instances, (and I think rocks DB supports versioning so we might be able to get a lot of it for free.  In the worst case we would lose some metrics which I don't see as being that critical.</p>\n\n<p>I would say lets start out with no HA for metrics and then add it in afterwards.  It is no worse then what we have now where we can lose metrics when a worker goes down.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/254987950","html_url":"https://github.com/apache/storm/pull/1736#issuecomment-254987950","issue_url":"https://api.github.com/repos/apache/storm/issues/1736","id":254987950,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NDk4Nzk1MA==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T01:45:28Z","updated_at":"2016-10-20T01:45:28Z","author_association":"CONTRIBUTOR","body":"Fixed some bugs, and renamed classes to reflect more specific.\nUnit test passes and manually tested.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/254987950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255004052","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255004052","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255004052,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTAwNDA1Mg==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T04:05:47Z","updated_at":"2016-10-20T04:05:47Z","author_association":"CONTRIBUTOR","body":"For me this stream API is not only for supporting Beam. This is what Storm needed to have even before Beam is open-sourced. We may want to label this API to experiment or unstable or something, but anyway I'd like to see it released not too late.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255004052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925557","html_url":"https://github.com/apache/storm/issues/5743#issuecomment-2612925557","issue_url":"https://api.github.com/repos/apache/storm/issues/5743","id":2612925557,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5MjU1NTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T04:08:24Z","updated_at":"2025-01-24T16:27:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>I've left some comments on google doc, but looks great overall. Nice work!<br/>\nI'll dive into the pull request.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612925557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255010814","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255010814","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255010814,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTAxMDgxNA==","user":{"login":"satishd","id":2577761,"node_id":"MDQ6VXNlcjI1Nzc3NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2577761?v=4","gravatar_id":"","url":"https://api.github.com/users/satishd","html_url":"https://github.com/satishd","followers_url":"https://api.github.com/users/satishd/followers","following_url":"https://api.github.com/users/satishd/following{/other_user}","gists_url":"https://api.github.com/users/satishd/gists{/gist_id}","starred_url":"https://api.github.com/users/satishd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishd/subscriptions","organizations_url":"https://api.github.com/users/satishd/orgs","repos_url":"https://api.github.com/users/satishd/repos","events_url":"https://api.github.com/users/satishd/events{/privacy}","received_events_url":"https://api.github.com/users/satishd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T05:12:59Z","updated_at":"2016-10-20T05:12:59Z","author_association":"MEMBER","body":"@arunmahadevan I was saying we should not hold on this PR till Beam runner API is tried with these APIs. We should review these APIs soon and these may remain experimental for couple of minor releases. \n\nI was going through Beam features earlier and I plan to have a doc about Beam features and how we can start implementing some of those APIs. I will add details once Taylor's branch is open and the doc can be updated with that. I will share the doc once it is ready(in 2-3 weeks). We can create subtasks based on that doc and work on them later.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255010814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255091469","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255091469","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255091469,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTA5MTQ2OQ==","user":{"login":"arunmahadevan","id":6792890,"node_id":"MDQ6VXNlcjY3OTI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6792890?v=4","gravatar_id":"","url":"https://api.github.com/users/arunmahadevan","html_url":"https://github.com/arunmahadevan","followers_url":"https://api.github.com/users/arunmahadevan/followers","following_url":"https://api.github.com/users/arunmahadevan/following{/other_user}","gists_url":"https://api.github.com/users/arunmahadevan/gists{/gist_id}","starred_url":"https://api.github.com/users/arunmahadevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arunmahadevan/subscriptions","organizations_url":"https://api.github.com/users/arunmahadevan/orgs","repos_url":"https://api.github.com/users/arunmahadevan/repos","events_url":"https://api.github.com/users/arunmahadevan/events{/privacy}","received_events_url":"https://api.github.com/users/arunmahadevan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T12:26:44Z","updated_at":"2016-10-20T12:26:44Z","author_association":"CONTRIBUTOR","body":"@satishd proper beam support cannot happen until underlying storm primitives are enhanced and the windowing enhancements which has been pending is completed. This a big task which we can discuss separately. The prototype I was mentioning is just a proof of concept with the proposed api to see how it goes, when I get some cycles. This PR definitely need not wait on this and we can mark the apis \"unstable\" and release it sooner once the review is done.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255091469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962243","html_url":"https://github.com/apache/storm/issues/5940#issuecomment-2612962243","issue_url":"https://api.github.com/repos/apache/storm/issues/5940","id":2612962243,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjIyNDM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T13:00:00Z","updated_at":"2025-01-24T16:45:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor.kiss@gmail.com\">tibor.kiss@gmail.com</a>:</i>\n<p>Kerberized Storm is unaffected by this change as THsHaServer is not used there.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255099700","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255099700","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255099700,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTA5OTcwMA==","user":{"login":"satishd","id":2577761,"node_id":"MDQ6VXNlcjI1Nzc3NjE=","avatar_url":"https://avatars.githubusercontent.com/u/2577761?v=4","gravatar_id":"","url":"https://api.github.com/users/satishd","html_url":"https://github.com/satishd","followers_url":"https://api.github.com/users/satishd/followers","following_url":"https://api.github.com/users/satishd/following{/other_user}","gists_url":"https://api.github.com/users/satishd/gists{/gist_id}","starred_url":"https://api.github.com/users/satishd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishd/subscriptions","organizations_url":"https://api.github.com/users/satishd/orgs","repos_url":"https://api.github.com/users/satishd/repos","events_url":"https://api.github.com/users/satishd/events{/privacy}","received_events_url":"https://api.github.com/users/satishd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T13:04:07Z","updated_at":"2016-10-20T13:04:07Z","author_association":"MEMBER","body":"@arunmahadevan Ofcourse, BEAM support is not expected to be done in a large PR with all the functionality. The approach I mentioned is to do in stages starting with a doc to discuss BEAM features and involve community in all those stages. This is more about discussing/figuring out the requirements for state checkpointing, windowing and operators semantics.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255099700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962478","html_url":"https://github.com/apache/storm/issues/5942#issuecomment-2612962478","issue_url":"https://api.github.com/repos/apache/storm/issues/5942","id":2612962478,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjI0Nzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T13:13:03Z","updated_at":"2025-01-24T16:45:40Z","author_association":"COLLABORATOR","body":"Subtasks:\n\n- STORM-2161\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962588","html_url":"https://github.com/apache/storm/issues/5943#issuecomment-2612962588","issue_url":"https://api.github.com/repos/apache/storm/issues/5943","id":2612962588,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjI1ODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T13:16:24Z","updated_at":"2025-01-24T16:45:44Z","author_association":"COLLABORATOR","body":"Subtask of parent task STORM-2160","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961622","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961622","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961622,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2MjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T13:55:11Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abellina\">abellina</a>:</i>\n<p>I added JIRAs for parts I thought were somewhat independent and agreed upon.</p>\n\n<p>I think if the interface to RocksDB is architected correctly, we could eventually spawn that off to its own process (hopefully without changing the world) if we want to have a common store shared by the Nimbus cluster.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255132738","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255132738","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255132738,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTEzMjczOA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T15:04:09Z","updated_at":"2016-10-20T15:04:09Z","author_association":"CONTRIBUTOR","body":"I have looked through the proposal, and I have a number of concerns about the API.  I mostly want to be sure that we can consistent terminology about what different operations are intended to do.  groupby is the big one for me, because it seems to be a routing function and not an actual groupby, but join also seemed a little off.\n\nWhy do we need so many lines of code to do a repartition/groupby in the word count example?\n\n```\nbuilder.newStream(new RandomSentenceSpout(), new ValueMapper<String>(0), 2)\n      /*\n       * split the sentences to words\n       */\n      .flatMap(s -> Arrays.asList(s.split(\" \")))\n      /*\n       * create a stream of (word, 1) pairs\n       */\n      .mapToPair(w -> new Pair<>(w, 1))\n      /*\n       * group by word so that the same words end up in the same partition\n       */\n      .groupByKey()\n      /*\n       * streams parallelism changed to 3 and applies to downstream operations\n       */\n      .repartition(3) \n      /*\n       * a ten seconds tumbling window\n       */\n      .window(TumblingWindows.of(Duration.seconds(10)))\n      /*\n       * compute the word counts in the last two second window\n       */\n      .aggregateByKey(new Count<>())\n      /*\n       * the words that occurred at-least five times in the last two seconds\n       */\n      .filter(x -> x.getSecond() >= 5)\n      /*\n       * print the results (word, count) to stdout\n       */\n      .print();\n```\n\nit feels like we could accomplish the entire thing much simpler (look at flink or spark streaming, even BEAM (although it is rather complex ultimetly the final code does the aggregation more cleanly).\n\n```\nbuilder.newStream(new RandomSentenceSpout(), new ValueMapper<String>(0), 2)\n      .flatMap(s -> Arrays.asList(s.split(\" \")))\n      .window(TumblingWindows.of(Duration.seconds(10)))\n      // short hand for .aggregateBy(1 /*index to use in grouping*/, new Count<>(), 3 /*new number of partitions although we probably want to internally actually have many more partitions but only 3 executors to start out with*/)\n      .countBy(1, 3)\n      .filter(x -> x.getSecond() >= 5)\n      .print();\n```\n\nBut I am most concerned about expanding this API in the future.  The stated plan is to start out with defining the API and implementing a back end that supports at most one and at least once processing and then move on to exactly once processing.  I really would like to have a plan in place on how we expect to do exactly once processing before we go too deeply into the API.  Even if we do mark the API as unstable.  I am really concerned about how state plays into this (inputs, outputs, windowing, and actual state).  We currently have two different types of spouts.  We have one type for at least once/at most once and another for exactly once.  The exactly once use case scares me a bit because if we want to support BEAM they have a very specific model on exactly once.  All operations are idempotent and replay includes a complete rollback to a known consistent checkpoint.  The trident spout does not do this (no ordering guarantees).  The other spouts also do not do this.  My concern is that the APIs for a lot of different user facing things may need to change for exactly once, and I would like to have a plan in place on how we want to support it and have thought out how that might impact the APIs before we release this to the public.\n\nThis also goes for the windows.  Having more robust windowing may impact some of these APIs.  Have we thought that through?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255132738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961627","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961627","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961627,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2Mjc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T15:08:41Z","updated_at":"2025-01-24T16:45:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I am fine with writing it do it has it's own thrift port/etc.  But I don't really want it as a separate process unless we have a very good reason to do so.  Having more things to launch and manage cause a lot of headaches for people running the cluster.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961633","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961633","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961633,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2MzM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T15:19:32Z","updated_at":"2025-01-24T16:45:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>AFAIK, other streaming frameworks chose RocksDB because of embeddable characteristic. If RocksDB requires launching another process manually, they should have to choose another solution. Let's not think about H/A. If we don't have a great idea till then, we could even choose aggressive approach, sending metrics to all of Nimbuses including standby.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961641","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961641","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961641,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2NDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T17:17:18Z","updated_at":"2025-01-24T16:45:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>What if we initially couple it with the Storm UI process and try to keep it contained enough so it would be easy to move it to the Nimbus process when HA features are implemented?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963138","html_url":"https://github.com/apache/storm/issues/5947#issuecomment-2612963138","issue_url":"https://api.github.com/repos/apache/storm/issues/5947","id":2612963138,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjMxMzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T17:25:42Z","updated_at":"2025-01-24T16:45:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<blockquote><p>Also for this ticket to be complete, Supervisors should be able to read and send metrics to Nimbus.</p></blockquote>\n\n<p>Do we think we need to have Supervisors act as intermediaries for shipping metrics to Nimbus? Couldn't worker reporters just send metrics directly to Nimbus/Metrics Store?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963142","html_url":"https://github.com/apache/storm/issues/5947#issuecomment-2612963142","issue_url":"https://api.github.com/repos/apache/storm/issues/5947","id":2612963142,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjMxNDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T17:31:09Z","updated_at":"2025-01-24T16:45:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abellina\">abellina</a>:</i>\n<p>If we are not wanting to perform aggregation in Supervisor in the future, then yes they could. I am not sure if it scales well to have the metrics store be listening to every worker, so that was another reason, but perhaps that is a case of optimizing too soon?</p>\n\n<p>Not having the Supervisors involved would simplify things..</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961648","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961648","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961648,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2NDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T17:50:36Z","updated_at":"2025-01-24T16:45:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I would rather keep it in nimbus.  I know the primary use case is for the UI, but I also want to be abel to query it from nimbus so the scheduler can use the metrics for elasticity.  Architecturally and from a security standpoint I would rather keep it with nimbus.  The UI could be running on a separate box from nimbus that is more open in some ways and less open in others.  I could easily see a setup where the UI is not directly accessible from the worker nodes.  But I really don't care where it is so long as we have it be separately configurable by both host and port.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963147","html_url":"https://github.com/apache/storm/issues/5947#issuecomment-2612963147","issue_url":"https://api.github.com/repos/apache/storm/issues/5947","id":2612963147,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjMxNDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T18:39:19Z","updated_at":"2025-01-24T16:45:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>Please see this for background: <a href=\"https://issues.apache.org/jira/browse/STORM-2169\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-2169</a></p>\n\n<p>If we use that approach for aggregating, then aggregating at the supervisor would actually lead to more traffic to the metric store &#8211; in addition to forwarding the original metric, the supervisor would also be sending a value for each level of aggregation.</p>\n\n<p>I think if we have sane worker reporting intervals we can avoid too much of an impact on the metrics store. Another future optimization would be to try to stagger worker report times to avoid all workers reporting at once, but I'd have to think more about how we would do that.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963153","html_url":"https://github.com/apache/storm/issues/5947#issuecomment-2612963153","issue_url":"https://api.github.com/repos/apache/storm/issues/5947","id":2612963153,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjMxNTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T18:57:20Z","updated_at":"2025-01-24T16:45:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abellina\">abellina</a>:</i>\n<p>That makes sense to me. The namespace JIRA helps reinforce your point. I am going to change this JIRA to remove the requirement on Supervisor.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612963153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255203151","html_url":"https://github.com/apache/storm/pull/1740#issuecomment-255203151","issue_url":"https://api.github.com/repos/apache/storm/issues/1740","id":255203151,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTIwMzE1MQ==","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T19:24:17Z","updated_at":"2016-10-20T19:24:17Z","author_association":"MEMBER","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255203151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255235205","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255235205","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255235205,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTIzNTIwNQ==","user":{"login":"arunmahadevan","id":6792890,"node_id":"MDQ6VXNlcjY3OTI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6792890?v=4","gravatar_id":"","url":"https://api.github.com/users/arunmahadevan","html_url":"https://github.com/arunmahadevan","followers_url":"https://api.github.com/users/arunmahadevan/followers","following_url":"https://api.github.com/users/arunmahadevan/following{/other_user}","gists_url":"https://api.github.com/users/arunmahadevan/gists{/gist_id}","starred_url":"https://api.github.com/users/arunmahadevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arunmahadevan/subscriptions","organizations_url":"https://api.github.com/users/arunmahadevan/orgs","repos_url":"https://api.github.com/users/arunmahadevan/repos","events_url":"https://api.github.com/users/arunmahadevan/events{/privacy}","received_events_url":"https://api.github.com/users/arunmahadevan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-20T21:35:45Z","updated_at":"2016-10-20T21:35:45Z","author_association":"CONTRIBUTOR","body":"@revans2  thanks for taking time to do detailed and thoughtful review.\n\n> I have looked through the proposal, and I have a number of concerns about the API. I mostly want to be sure that we can consistent terminology about what different operations are intended to do. groupby is the big one for me, because it seems to be a routing function and not an actual groupby, but join also seemed a little off.\n\ngroupby is doing the fields grouping on key. I will rename it. May be it need NOT be exposed at all since reduce/aggregate etc can do implicit partitioning on the key. I didn't do implicit partitioning in aggregate since trident had a concept of partitionAggregate (keyed aggregate per partition) and thought it may be useful. May be its not needed.\n\nWill add a groupByKey() api which returns an `Iterable<V>` similar to beam/spark.\n\n> Why do we need so many lines of code to do a repartition/groupby in the word count example?\n\n`repartition` is not really required, but was there to show the usage. I will remove it from the example. Groupby (partitionbykey) can also be removed and aggregate can do an implicit fields grouping.\n\n> builder.newStream(new RandomSentenceSpout(), new ValueMapper<String>(0), 2)\n>       .flatMap(s -> Arrays.asList(s.split(\" \")))\n>       .window(TumblingWindows.of(Duration.seconds(10)))\n>       // short hand for .aggregateBy(1 /_index to use in grouping_/, new Count<>(), 3 /_new number of partitions although we probably want to internally actually have many more partitions but only 3 executors to start out with_/)\n>       .countBy(1, 3)\n>       .filter(x -> x.getSecond() >= 5)\n>       .print();\n\nSince count seems to be a common operation it can be added as an additional api. But aggregate is more general and users can provide different `Aggregators`.\n\n> But I am most concerned about expanding this API in the future. The stated plan is to start out with defining the API and implementing a back end that supports at most one and at least once processing and then move on to exactly once processing. I really would like to have a plan in place on how we expect to do exactly once processing before we go too deeply into the API.\n\nThe state checkpointing mechanism we have can be extended to provide exactly once. (e.g with transactional updates and message de-duplication similar to the millwheel model), or saving source level spout offsets.\n\nThe initial ideas for phase 2 are listed here - https://docs.google.com/document/d/1Ew7uFF1UJ6e_zq0t4bM6A9auuEaArviAjjWYSpVFqPY/edit#heading=h.nmf14n\n\n> My concern is that the APIs for a lot of different user facing things may need to change for exactly once, \n\nThe changes would mostly be in the underlying framework and we may add some additional constraints like the emitted tuple should have a unique message Id field and re-emits with the same message id for exactly once. It can be non-intrusive without changes at the api level.\n\n> This also goes for the windows. Having more robust windowing may impact some of these APIs. Have we thought that through?\n\nThe underlying windowing framework has to be enhanced before this can be supported. From the api point of view, the `window()` function right now takes a window config builder where we can add additional apis to support triggers and so on. Something like,\n`stream.window(TumblingWindows.of(...).triggering(...).withAllowedLateness(Duration.standardDays(2))` and so on, and the window will trigger based on the window config.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255235205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255271809","html_url":"https://github.com/apache/storm/pull/1740#issuecomment-255271809","issue_url":"https://api.github.com/repos/apache/storm/issues/1740","id":255271809,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTI3MTgwOQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T01:33:44Z","updated_at":"2016-10-21T01:33:44Z","author_association":"CONTRIBUTOR","body":"@tibkiss Thanks for contributing. Could you also craft pull request against master if you don't mind? It's recommended unless the patch is for specific version.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255271809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255276419","html_url":"https://github.com/apache/storm/pull/1711#issuecomment-255276419","issue_url":"https://api.github.com/repos/apache/storm/issues/1711","id":255276419,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTI3NjQxOQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T02:10:35Z","updated_at":"2016-10-21T02:10:35Z","author_association":"CONTRIBUTOR","body":"@asmaier \nCould you make implementation similar to StringKeyValueScheme? It would help us to maintain twos easier.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255276419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255293751","html_url":"https://github.com/apache/storm/pull/1740#issuecomment-255293751","issue_url":"https://api.github.com/repos/apache/storm/issues/1740","id":255293751,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTI5Mzc1MQ==","user":{"login":"tibkiss","id":113485,"node_id":"MDQ6VXNlcjExMzQ4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/113485?v=4","gravatar_id":"","url":"https://api.github.com/users/tibkiss","html_url":"https://github.com/tibkiss","followers_url":"https://api.github.com/users/tibkiss/followers","following_url":"https://api.github.com/users/tibkiss/following{/other_user}","gists_url":"https://api.github.com/users/tibkiss/gists{/gist_id}","starred_url":"https://api.github.com/users/tibkiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tibkiss/subscriptions","organizations_url":"https://api.github.com/users/tibkiss/orgs","repos_url":"https://api.github.com/users/tibkiss/repos","events_url":"https://api.github.com/users/tibkiss/events{/privacy}","received_events_url":"https://api.github.com/users/tibkiss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T04:59:04Z","updated_at":"2016-10-21T04:59:04Z","author_association":"CONTRIBUTOR","body":"@HeartSaVioR : Sure, will do it shortly. \nI'm wondering: shall make a PR for 1.0.x-branch too?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255293751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255295204","html_url":"https://github.com/apache/storm/pull/1740#issuecomment-255295204","issue_url":"https://api.github.com/repos/apache/storm/issues/1740","id":255295204,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTI5NTIwNA==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T05:13:27Z","updated_at":"2016-10-21T05:13:27Z","author_association":"CONTRIBUTOR","body":"@tibkiss \nNormally merger (or other committers) ports back commit to other branches. Multiple PRs are needed only when there're number of conflict so would be better to review porting patches as well.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255295204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255296253","html_url":"https://github.com/apache/storm/pull/1740#issuecomment-255296253","issue_url":"https://api.github.com/repos/apache/storm/issues/1740","id":255296253,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTI5NjI1Mw==","user":{"login":"tibkiss","id":113485,"node_id":"MDQ6VXNlcjExMzQ4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/113485?v=4","gravatar_id":"","url":"https://api.github.com/users/tibkiss","html_url":"https://github.com/tibkiss","followers_url":"https://api.github.com/users/tibkiss/followers","following_url":"https://api.github.com/users/tibkiss/following{/other_user}","gists_url":"https://api.github.com/users/tibkiss/gists{/gist_id}","starred_url":"https://api.github.com/users/tibkiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tibkiss/subscriptions","organizations_url":"https://api.github.com/users/tibkiss/orgs","repos_url":"https://api.github.com/users/tibkiss/repos","events_url":"https://api.github.com/users/tibkiss/events{/privacy}","received_events_url":"https://api.github.com/users/tibkiss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T05:22:42Z","updated_at":"2016-10-21T05:22:42Z","author_association":"CONTRIBUTOR","body":"@HeartSaVioR : Thanks for the explanation.\nCreated the PR for master: https://github.com/apache/storm/pull/1741\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255296253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255388198","html_url":"https://github.com/apache/storm/pull/1711#issuecomment-255388198","issue_url":"https://api.github.com/repos/apache/storm/issues/1711","id":255388198,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTM4ODE5OA==","user":{"login":"asmaier","id":3169297,"node_id":"MDQ6VXNlcjMxNjkyOTc=","avatar_url":"https://avatars.githubusercontent.com/u/3169297?v=4","gravatar_id":"","url":"https://api.github.com/users/asmaier","html_url":"https://github.com/asmaier","followers_url":"https://api.github.com/users/asmaier/followers","following_url":"https://api.github.com/users/asmaier/following{/other_user}","gists_url":"https://api.github.com/users/asmaier/gists{/gist_id}","starred_url":"https://api.github.com/users/asmaier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asmaier/subscriptions","organizations_url":"https://api.github.com/users/asmaier/orgs","repos_url":"https://api.github.com/users/asmaier/repos","events_url":"https://api.github.com/users/asmaier/events{/privacy}","received_events_url":"https://api.github.com/users/asmaier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T14:13:38Z","updated_at":"2016-10-21T14:13:38Z","author_association":"NONE","body":"Unfortunately there is a bug in the implementation of StringKeyValueScheme: https://issues.apache.org/jira/browse/STORM-2121\nI believe this problem should be fixed first, before changing the implementation of ByteKeyValueScheme. \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255388198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255406425","html_url":"https://github.com/apache/storm/pull/1677#issuecomment-255406425","issue_url":"https://api.github.com/repos/apache/storm/issues/1677","id":255406425,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTQwNjQyNQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T15:21:27Z","updated_at":"2016-10-21T15:21:27Z","author_association":"CONTRIBUTOR","body":"@kamleshbhatt sorry I lost track of this, looking again now.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255406425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255416300","html_url":"https://github.com/apache/storm/pull/1677#issuecomment-255416300","issue_url":"https://api.github.com/repos/apache/storm/issues/1677","id":255416300,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTQxNjMwMA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T15:59:38Z","updated_at":"2016-10-21T15:59:38Z","author_association":"CONTRIBUTOR","body":"+1 please upmerge though.  There is a very minor merge conflict.  Then ping me and I'll merge it in.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255416300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255421528","html_url":"https://github.com/apache/storm/pull/1693#issuecomment-255421528","issue_url":"https://api.github.com/repos/apache/storm/issues/1693","id":255421528,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTQyMTUyOA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T16:29:17Z","updated_at":"2016-10-21T16:29:17Z","author_association":"CONTRIBUTOR","body":"Ok I feel a lot better seeing how you have thought through most of these things.  I would like to see us write out some more examples, not just word count in what this new API would look like.  The we could have a better feel of what this might look like.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255421528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255432285","html_url":"https://github.com/apache/storm/pull/1677#issuecomment-255432285","issue_url":"https://api.github.com/repos/apache/storm/issues/1677","id":255432285,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTQzMjI4NQ==","user":{"login":"kamleshbhatt","id":4641205,"node_id":"MDQ6VXNlcjQ2NDEyMDU=","avatar_url":"https://avatars.githubusercontent.com/u/4641205?v=4","gravatar_id":"","url":"https://api.github.com/users/kamleshbhatt","html_url":"https://github.com/kamleshbhatt","followers_url":"https://api.github.com/users/kamleshbhatt/followers","following_url":"https://api.github.com/users/kamleshbhatt/following{/other_user}","gists_url":"https://api.github.com/users/kamleshbhatt/gists{/gist_id}","starred_url":"https://api.github.com/users/kamleshbhatt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamleshbhatt/subscriptions","organizations_url":"https://api.github.com/users/kamleshbhatt/orgs","repos_url":"https://api.github.com/users/kamleshbhatt/repos","events_url":"https://api.github.com/users/kamleshbhatt/events{/privacy}","received_events_url":"https://api.github.com/users/kamleshbhatt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T17:44:02Z","updated_at":"2016-10-21T17:44:02Z","author_association":"CONTRIBUTOR","body":"@revans2  Thanks for reviewing the changes. Resolved the merge conflict. \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255432285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961652","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961652","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961652,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2NTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T17:59:29Z","updated_at":"2025-01-24T16:45:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ptgoetz\">ptgoetz</a>:</i>\n<p>One of the things we're going to have to work out is how to properly aggregate different metric types, if we can at all. For simple metric types like Counters, it is straightforward. But things get more complicated with metrics like Meters and Histograms &#8211; there's no way to really aggregate percentiles.</p>\n\n<p>The problem is that metrics maintain a certain amount of state necessary to calculate certain values like percentiles. When a reporter reports those values, it takes a point-in-time snapshot of those calculations, so all the data used to calculate those values is no longer available. </p>\n\n<p>As an example lets say we want to have a Histogram for execute latency (so we can report various percentiles), and we want to aggregate those statistics across a topology. So worker A and worker B report their histogram snapshot to nimbus. How does nimbus aggregate those values without the datasets the calculations were based on?</p>\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961654","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961654","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961654,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2NTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T18:07:52Z","updated_at":"2025-01-24T16:45:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I have not dug into the internals of how dropwizard represents a histogram.  But all of the histogram implementations that I know of allow for simple aggregations over time.  They usually play games with how to reduce the size by bucketizing values.  Look at HDR histogram and how it lets you merge multiple sub-histograms together to pull out percentiles after they are merged.  Meters typically use different aggregations from counters, because a meter is a set value, I don't have to worry about how much it has changed over time.  Counters can roll over/reset and detecting which one happened can sometimes be difficult to get right.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961664","html_url":"https://github.com/apache/storm/issues/5935#issuecomment-2612961664","issue_url":"https://api.github.com/repos/apache/storm/issues/5935","id":2612961664,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjE2NjQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-21T19:45:31Z","updated_at":"2025-01-24T16:45:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abellina\">abellina</a>:</i>\n<p>From the GraphiteReported in codahale, they just send a snapshot of each of of the percentiles for each Histogram, so that isn't something users should aggregate on. See reportHistogram in: <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/com.codahale.metrics/metrics-graphite/3.0.2/com/codahale/metrics/graphite/GraphiteReporter.java#GraphiteReporter.report%28java.util.SortedMap%2Cjava.util.SortedMap%2Cjava.util.SortedMap%2Cjava.util.SortedMap%2Cjava.util.SortedMap%29\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://grepcode.com/file/repo1.maven.org/maven2/com.codahale.metrics/metrics-graphite/3.0.2/com/codahale/metrics/graphite/GraphiteReporter.java#GraphiteReporter.report%28java.util.SortedMap%2Cjava.util.SortedMap%2Cjava.util.SortedMap%2Cjava.util.SortedMap%2Cjava.util.SortedMap%29</a></p>\n\n<p>For the storm-facing metrics, we would figure out a way to roll our own histogram that sends raw values s.t. we can rollup first, then compute the statistic.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612961664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255504911","html_url":"https://github.com/apache/storm/pull/1711#issuecomment-255504911","issue_url":"https://api.github.com/repos/apache/storm/issues/1711","id":255504911,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTUwNDkxMQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-22T03:36:07Z","updated_at":"2016-10-22T03:36:07Z","author_association":"CONTRIBUTOR","body":"@asmaier Makes sense, and I missed that. Could you also provide a patch for also STORM-2121 if you don't mind? Thanks in advance.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255504911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612960877","html_url":"https://github.com/apache/storm/issues/5930#issuecomment-2612960877","issue_url":"https://api.github.com/repos/apache/storm/issues/5930","id":2612960877,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjA4Nzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-24T06:49:46Z","updated_at":"2025-01-24T16:44:53Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>I've done simple benchmark between script evaluation vs native instance method call.</p>\n\n<p>Below is test code block, which is borrowed from TestPlanCompiler.testNested():</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">{\n  <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\n  <span class=\"code-keyword\">final</span> java.util.Map inp2_ = (java.util.Map) current[2];\n  <span class=\"code-keyword\">final</span> java.util.List inp3_ = (java.util.List) current[3];\n  <span class=\"code-keyword\">final</span> <span class=\"code-object\">boolean</span> v4 = (<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2) == <span class=\"code-keyword\">null</span>;\n  outputValues[0] = ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ? (java.util.Map) <span class=\"code-keyword\">null</span> : (java.util.Map) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>) == <span class=\"code-keyword\">null</span> || ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ? (java.util.Map) <span class=\"code-keyword\">null</span> : (java.util.Map) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>)).intValue() == 2) && (v4 || ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2)).intValue() == 200) ? ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ? (java.util.Map) <span class=\"code-keyword\">null</span> : (java.util.Map) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>) == <span class=\"code-keyword\">null</span> || v4 ? (<span class=\"code-object\">Boolean</span>) <span class=\"code-keyword\">null</span> : <span class=\"code-object\">Boolean</span>.TRUE) : <span class=\"code-object\">Boolean</span>.FALSE;\n}\n<span class=\"code-keyword\">if</span> (outputValues[0] == <span class=\"code-keyword\">null</span> || !((<span class=\"code-object\">Boolean</span>) outputValues[0])) { <span class=\"code-keyword\">return</span> 0; }\n\n{\n  <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\n  <span class=\"code-keyword\">final</span> java.util.Map inp1_ = (java.util.Map) current[1];\n  outputValues[0] = org.apache.calcite.runtime.SqlFunctions.toInt(current[0]);\n  outputValues[1] = inp1_ == <span class=\"code-keyword\">null</span> ? (<span class=\"code-object\">Integer</span>) <span class=\"code-keyword\">null</span> : (<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp1_, <span class=\"code-quote\">\"c\"</span>);\n  outputValues[2] = (java.util.Map) current[2];\n  outputValues[3] = (java.util.List) current[3];\n}\n\n<span class=\"code-keyword\">return</span> 1;\n</pre>\n</div></div>\n\n<p>and below is test benchmark code I've written. </p>\n\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\"><span class=\"code-keyword\">package</span> redis.clients.jedis.test;\n\n<span class=\"code-keyword\">import</span> com.google.common.collect.Lists;\n<span class=\"code-keyword\">import</span> org.apache.calcite.DataContext;\n<span class=\"code-keyword\">import</span> org.apache.calcite.interpreter.Context;\n<span class=\"code-keyword\">import</span> org.apache.calcite.interpreter.Scalar;\n<span class=\"code-keyword\">import</span> org.apache.calcite.interpreter.StormContext;\n<span class=\"code-keyword\">import</span> org.apache.calcite.interpreter.StormDataContext;\n<span class=\"code-keyword\">import</span> org.codehaus.commons.compiler.CompileException;\n<span class=\"code-keyword\">import</span> org.codehaus.janino.ScriptEvaluator;\n<span class=\"code-keyword\">import</span> org.databene.contiperf.PerfTest;\n<span class=\"code-keyword\">import</span> org.databene.contiperf.junit.ContiPerfRule;\n<span class=\"code-keyword\">import</span> org.databene.contiperf.report.CSVSummaryReportModule;\n<span class=\"code-keyword\">import</span> org.databene.contiperf.report.HtmlReportModule;\n<span class=\"code-keyword\">import</span> org.junit.Before;\n<span class=\"code-keyword\">import</span> org.junit.Rule;\n<span class=\"code-keyword\">import</span> org.junit.Test;\n\n<span class=\"code-keyword\">import</span> java.io.IOException;\n<span class=\"code-keyword\">import</span> java.lang.reflect.InvocationTargetException;\n<span class=\"code-keyword\">import</span> java.util.Arrays;\n<span class=\"code-keyword\">import</span> java.util.HashMap;\n<span class=\"code-keyword\">import</span> java.util.List;\n<span class=\"code-keyword\">import</span> java.util.Map;\n\n<span class=\"code-keyword\">public</span> <span class=\"code-keyword\">class </span>NativeVsCodeEvaluatePerformantTest {\n  <span class=\"code-keyword\">public</span> <span class=\"code-keyword\">static</span> <span class=\"code-keyword\">final</span> <span class=\"code-object\">int</span> OPERATIONS_PER_TEST = 1000;\n    <span class=\"code-keyword\">public</span> <span class=\"code-keyword\">static</span> <span class=\"code-keyword\">final</span> <span class=\"code-object\">int</span> TEST_DURATION_MILLIS = 600 * 1000;\n    <span class=\"code-keyword\">public</span> <span class=\"code-keyword\">static</span> <span class=\"code-keyword\">final</span> <span class=\"code-object\">int</span> WARMUP_MILLIS = 60 * 1000;\n\n    <span class=\"code-keyword\">private</span> ScriptEvaluator evaluator;\n    <span class=\"code-keyword\">private</span> Scalar nativeClass;\n    <span class=\"code-keyword\">private</span> <span class=\"code-object\">Object</span>[] outputValues;\n    <span class=\"code-keyword\">private</span> DataContext dataContext;\n\n    @Rule\n    <span class=\"code-keyword\">public</span> ContiPerfRule rule = <span class=\"code-keyword\">new</span> ContiPerfRule(\n    <span class=\"code-keyword\">new</span> HtmlReportModule(),\n    <span class=\"code-keyword\">new</span> CSVSummaryReportModule());\n  <span class=\"code-keyword\">private</span> StormContext calciteContext;\n\n  <span class=\"code-keyword\">public</span> NativeVsCodeEvaluatePerformantTest() <span class=\"code-keyword\">throws</span> IOException {\n<span class=\"code-keyword\">super</span>();\n    }\n\n    @Before\n    <span class=\"code-keyword\">public</span> void setUp() <span class=\"code-keyword\">throws</span> IOException, CompileException {\n<span class=\"code-object\">String</span> expression = <span class=\"code-quote\">\"{\\n\"</span> + <span class=\"code-quote\">\" <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\\n\"</span>\n    + <span class=\"code-quote\">\" <span class=\"code-keyword\">final</span> java.util.Map inp2_ = (java.util.Map) current[2];\\n\"</span>\n    + <span class=\"code-quote\">\" <span class=\"code-keyword\">final</span> java.util.List inp3_ = (java.util.List) current[3];\\n\"</span>\n    + <span class=\"code-quote\">\" <span class=\"code-keyword\">final</span> <span class=\"code-object\">boolean</span> v4 = (<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2) == <span class=\"code-keyword\">null</span>;\\n\"</span>\n    + <span class=\"code-quote\">\" outputValues[0] = ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ? (java.util.Map) <span class=\"code-keyword\">null</span> : (java.util.Map) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_, \\\"</span>a\\<span class=\"code-quote\">\"), \\\"</span>b\\<span class=\"code-quote\">\") == <span class=\"code-keyword\">null</span> || ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ? (java.util.Map) <span class=\"code-keyword\">null</span> : (java.util.Map) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_, \\\"</span>a\\<span class=\"code-quote\">\"), \\\"</span>b\\<span class=\"code-quote\">\")).intValue() == 2) && (v4 || ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2)).intValue() == 200) ? ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ? (java.util.Map) <span class=\"code-keyword\">null</span> : (java.util.Map) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_, \\\"</span>a\\<span class=\"code-quote\">\"), \\\"</span>b\\<span class=\"code-quote\">\") == <span class=\"code-keyword\">null</span> || v4 ? (<span class=\"code-object\">Boolean</span>) <span class=\"code-keyword\">null</span> : <span class=\"code-object\">Boolean</span>.TRUE) : <span class=\"code-object\">Boolean</span>.FALSE;\\n\"</span>\n    + <span class=\"code-quote\">\"}\\n\"</span> + <span class=\"code-quote\">\"<span class=\"code-keyword\">if</span> (outputValues[0] == <span class=\"code-keyword\">null</span> || !((<span class=\"code-object\">Boolean</span>) outputValues[0])) { <span class=\"code-keyword\">return</span> 0; }\\n\"</span>\n    + <span class=\"code-quote\">\"\\n\"</span> + <span class=\"code-quote\">\"{\\n\"</span> + <span class=\"code-quote\">\" <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\\n\"</span>\n    + <span class=\"code-quote\">\" <span class=\"code-keyword\">final</span> java.util.Map inp1_ = (java.util.Map) current[1];\\n\"</span>\n    + <span class=\"code-quote\">\" outputValues[0] = org.apache.calcite.runtime.SqlFunctions.toInt(current[0]);\\n\"</span>\n    + <span class=\"code-quote\">\" outputValues[1] = inp1_ == <span class=\"code-keyword\">null</span> ? (<span class=\"code-object\">Integer</span>) <span class=\"code-keyword\">null</span> : (<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp1_, \\\"</span>c\\<span class=\"code-quote\">\");\\n\"</span>\n    + <span class=\"code-quote\">\" outputValues[2] = (java.util.Map) current[2];\\n\"</span>\n    + <span class=\"code-quote\">\" outputValues[3] = (java.util.List) current[3];\\n\"</span> + <span class=\"code-quote\">\"}\\n\"</span> + <span class=\"code-quote\">\"\\n\"</span> + <span class=\"code-quote\">\"<span class=\"code-keyword\">return</span> 1;\\n\"</span>;\n\nevaluator = <span class=\"code-keyword\">new</span> ScriptEvaluator(expression, <span class=\"code-object\">int</span>.class,\n    <span class=\"code-keyword\">new</span> <span class=\"code-object\">String</span>[] {<span class=\"code-quote\">\"context\"</span>, <span class=\"code-quote\">\"outputValues\"</span>},\n    <span class=\"code-keyword\">new</span> <span class=\"code-object\">Class</span>[] { Context.class, <span class=\"code-object\">Object</span>[].class });\n\nnativeClass = <span class=\"code-keyword\">new</span> NativeClass();\noutputValues = <span class=\"code-keyword\">new</span> <span class=\"code-object\">Object</span>[4];\ndataContext = <span class=\"code-keyword\">new</span> StormDataContext();\n\n      calciteContext = <span class=\"code-keyword\">new</span> StormContext(dataContext);\n      calciteContext.values = getTestData();\n    }\n\n    @Test\n    @PerfTest(duration = TEST_DURATION_MILLIS, threads = 1, warmUp = WARMUP_MILLIS)\n    <span class=\"code-keyword\">public</span> void testEvaluate() <span class=\"code-keyword\">throws</span> IOException, InvocationTargetException {\n      <span class=\"code-keyword\">for</span> (<span class=\"code-object\">int</span> i = 0 ; i < OPERATIONS_PER_TEST ; i++) {\nevaluator.evaluate(<span class=\"code-keyword\">new</span> <span class=\"code-object\">Object</span>[] { calciteContext, outputValues });\n      }\n    }\n\n    @Test\n    @PerfTest(duration = TEST_DURATION_MILLIS, threads = 1, warmUp = WARMUP_MILLIS)\n    <span class=\"code-keyword\">public</span> void testCallNativeClass() <span class=\"code-keyword\">throws</span> IOException {\n      <span class=\"code-keyword\">for</span> (<span class=\"code-object\">int</span> i = 0 ; i < OPERATIONS_PER_TEST ; i++) {\nnativeClass.execute(calciteContext, outputValues);\n      }\n    }\n\n    @Test\n    @PerfTest(duration = TEST_DURATION_MILLIS, threads = 1, warmUp = WARMUP_MILLIS)\n    <span class=\"code-keyword\">public</span> void testEvaluate2() <span class=\"code-keyword\">throws</span> IOException, InvocationTargetException {\n      <span class=\"code-keyword\">for</span> (<span class=\"code-object\">int</span> i = 0 ; i < OPERATIONS_PER_TEST ; i++) {\nevaluator.evaluate(<span class=\"code-keyword\">new</span> <span class=\"code-object\">Object</span>[] { calciteContext, outputValues });\n      }\n    }\n\n    @Test\n    @PerfTest(duration = TEST_DURATION_MILLIS, threads = 1, warmUp = WARMUP_MILLIS)\n    <span class=\"code-keyword\">public</span> void testCallNativeClass2() <span class=\"code-keyword\">throws</span> IOException {\n      <span class=\"code-keyword\">for</span> (<span class=\"code-object\">int</span> i = 0 ; i < OPERATIONS_PER_TEST ; i++) {\nnativeClass.execute(calciteContext, outputValues);\n      }\n    }\n\n    @Test\n    @PerfTest(duration = TEST_DURATION_MILLIS, threads = 1, warmUp = WARMUP_MILLIS)\n    <span class=\"code-keyword\">public</span> void testEvaluate3() <span class=\"code-keyword\">throws</span> IOException, InvocationTargetException {\n      <span class=\"code-keyword\">for</span> (<span class=\"code-object\">int</span> i = 0 ; i < OPERATIONS_PER_TEST ; i++) {\nevaluator.evaluate(<span class=\"code-keyword\">new</span> <span class=\"code-object\">Object</span>[] { calciteContext, outputValues });\n      }\n    }\n\n    @Test\n    @PerfTest(duration = TEST_DURATION_MILLIS, threads = 1, warmUp = WARMUP_MILLIS)\n    <span class=\"code-keyword\">public</span> void testCallNativeClass3() <span class=\"code-keyword\">throws</span> IOException {\n      <span class=\"code-keyword\">for</span> (<span class=\"code-object\">int</span> i = 0 ; i < OPERATIONS_PER_TEST ; i++) {\nnativeClass.execute(calciteContext, outputValues);\n      }\n    }\n\n    <span class=\"code-keyword\">class </span>NativeClass <span class=\"code-keyword\">implements</span> Scalar {\n\n<span class=\"code-keyword\">public</span> <span class=\"code-object\">Object</span> execute(Context context) {\n  {\n    <span class=\"code-object\">Object</span>[] outputValues = <span class=\"code-keyword\">new</span> <span class=\"code-object\">Object</span>[4];\n\n    <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\n    <span class=\"code-keyword\">final</span> java.util.Map inp2_ = (java.util.Map) current[2];\n    <span class=\"code-keyword\">final</span> java.util.List inp3_ = (java.util.List) current[3];\n    <span class=\"code-keyword\">final</span> <span class=\"code-object\">boolean</span> v4 =\n(<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2) == <span class=\"code-keyword\">null</span>;\n    outputValues[0] = ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(\ninp2_ == <span class=\"code-keyword\">null</span> ?\n    (java.util.Map) <span class=\"code-keyword\">null</span> :\n    (java.util.Map) org.apache.calcite.runtime.SqlFunctions\n.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>) == <span class=\"code-keyword\">null</span> ||\n((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ?\n    (java.util.Map) <span class=\"code-keyword\">null</span> :\n    (java.util.Map) org.apache.calcite.runtime.SqlFunctions\n.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>)).intValue() == 2) && (v4 ||\n((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2)).intValue() == 200) ?\n((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ?\n    (java.util.Map) <span class=\"code-keyword\">null</span> :\n    (java.util.Map) org.apache.calcite.runtime.SqlFunctions\n.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>) == <span class=\"code-keyword\">null</span> || v4 ? (<span class=\"code-object\">Boolean</span>) <span class=\"code-keyword\">null</span> : <span class=\"code-object\">Boolean</span>.TRUE) :\n<span class=\"code-object\">Boolean</span>.FALSE;\n  }\n    <span class=\"code-keyword\">if</span> (outputValues[0] == <span class=\"code-keyword\">null</span> || !((<span class=\"code-object\">Boolean</span>) outputValues[0])) { <span class=\"code-keyword\">return</span> 0; }\n  {\n    <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\n    <span class=\"code-keyword\">final</span> java.util.Map inp1_ = (java.util.Map) current[1];\n    outputValues[0] = org.apache.calcite.runtime.SqlFunctions.toInt(current[0]);\n    outputValues[1] = inp1_ == <span class=\"code-keyword\">null</span> ?\n(<span class=\"code-object\">Integer</span>) <span class=\"code-keyword\">null</span> :\n(<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp1_, <span class=\"code-quote\">\"c\"</span>);\n    outputValues[2] = (java.util.Map) current[2];\n    outputValues[3] = (java.util.List) current[3];\n\n    <span class=\"code-keyword\">return</span> outputValues;\n  }\n}\n\n<span class=\"code-keyword\">public</span> void execute(Context context, <span class=\"code-object\">Object</span>[] results) {\n  {\n    <span class=\"code-object\">Object</span>[] outputValues = results;\n\n    <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\n    <span class=\"code-keyword\">final</span> java.util.Map inp2_ = (java.util.Map) current[2];\n    <span class=\"code-keyword\">final</span> java.util.List inp3_ = (java.util.List) current[3];\n    <span class=\"code-keyword\">final</span> <span class=\"code-object\">boolean</span> v4 =\n(<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2) == <span class=\"code-keyword\">null</span>;\n    outputValues[0] = ((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(\ninp2_ == <span class=\"code-keyword\">null</span> ?\n    (java.util.Map) <span class=\"code-keyword\">null</span> :\n    (java.util.Map) org.apache.calcite.runtime.SqlFunctions\n.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>) == <span class=\"code-keyword\">null</span> ||\n((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ?\n    (java.util.Map) <span class=\"code-keyword\">null</span> :\n    (java.util.Map) org.apache.calcite.runtime.SqlFunctions\n.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>)).intValue() == 2) && (v4 ||\n((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.arrayItemOptional(inp3_, 2)).intValue() == 200) ?\n((<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp2_ == <span class=\"code-keyword\">null</span> ?\n    (java.util.Map) <span class=\"code-keyword\">null</span> :\n    (java.util.Map) org.apache.calcite.runtime.SqlFunctions\n.mapItemOptional(inp2_, <span class=\"code-quote\">\"a\"</span>), <span class=\"code-quote\">\"b\"</span>) == <span class=\"code-keyword\">null</span> || v4 ? (<span class=\"code-object\">Boolean</span>) <span class=\"code-keyword\">null</span> : <span class=\"code-object\">Boolean</span>.TRUE) :\n<span class=\"code-object\">Boolean</span>.FALSE;\n  }\n    <span class=\"code-keyword\">if</span> (outputValues[0] == <span class=\"code-keyword\">null</span> || !((<span class=\"code-object\">Boolean</span>) outputValues[0])) { <span class=\"code-keyword\">return</span>; }\n  {\n    <span class=\"code-keyword\">final</span> <span class=\"code-object\">Object</span>[] current = context.values;\n    <span class=\"code-keyword\">final</span> java.util.Map inp1_ = (java.util.Map) current[1];\n    outputValues[0] = org.apache.calcite.runtime.SqlFunctions.toInt(current[0]);\n    outputValues[1] = inp1_ == <span class=\"code-keyword\">null</span> ?\n(<span class=\"code-object\">Integer</span>) <span class=\"code-keyword\">null</span> :\n(<span class=\"code-object\">Integer</span>) org.apache.calcite.runtime.SqlFunctions.mapItemOptional(inp1_, <span class=\"code-quote\">\"c\"</span>);\n    outputValues[2] = (java.util.Map) current[2];\n    outputValues[3] = (java.util.List) current[3];\n  }\n}\n    }\n\n    <span class=\"code-keyword\">private</span> <span class=\"code-object\">Object</span>[] getTestData() {\nList<<span class=\"code-object\">Integer</span>> ints = Arrays.asList(100, 200, 300);\n<span class=\"code-object\">int</span> i = 1;\nMap<<span class=\"code-object\">String</span>, <span class=\"code-object\">Integer</span>> map = <span class=\"code-keyword\">new</span> HashMap<<span class=\"code-object\">String</span>, <span class=\"code-object\">Integer</span>>();\nmap.put(<span class=\"code-quote\">\"b\"</span>, i);\nmap.put(<span class=\"code-quote\">\"c\"</span>, i*i);\nMap<<span class=\"code-object\">String</span>, Map<<span class=\"code-object\">String</span>, <span class=\"code-object\">Integer</span>>> mm = <span class=\"code-keyword\">new</span> HashMap<<span class=\"code-object\">String</span>, Map<<span class=\"code-object\">String</span>, <span class=\"code-object\">Integer</span>>>();\nmm.put(<span class=\"code-quote\">\"a\"</span>, map);\n<span class=\"code-keyword\">return</span> Lists.newArrayList(i, map, mm, ints).toArray();\n    }\n}\n</pre>\n</div></div>\n\n<p>3 tests are for method call, and other 3 tests are for script evaluation. I took median from 3 results.<br/>\nEach sample is 1000 times call / eval, and each tests was run 10 minutes having warm-up 1 minute.</p>\n\n<div class='table-wrap'>\n<table class='confluenceTable'><tbody>\n<tr>\n<th class='confluenceTh'> metric </th>\n<th class='confluenceTh'> native class method call </th>\n<th class='confluenceTh'> evaluate script </th>\n</tr>\n<tr>\n<td class='confluenceTd'> samples </td>\n<td class='confluenceTd'> 27438405 </td>\n<td class='confluenceTd'> 21017191 </td>\n</tr>\n<tr>\n<td class='confluenceTd'> max </td>\n<td class='confluenceTd'> 2 </td>\n<td class='confluenceTd'> 3 </td>\n</tr>\n<tr>\n<td class='confluenceTd'> average </td>\n<td class='confluenceTd'> 0.019548330159861696 </td>\n<td class='confluenceTd'> 0.025557173648942905 </td>\n</tr>\n</tbody></table>\n</div>\n\n\n<p>Native method call is approximately 30% faster than evaluating script.</p>\n\n<p>Raw results are here:</p>\n\n<p>redis.clients.jedis.test.NativeVsCodeEvaluatePerformantTest.testCallNativeClass<br/>\nsamples: 27438405<br/>\nmax:     2<br/>\naverage: 0.019548330159861696<br/>\nmedian:  0<br/>\nredis.clients.jedis.test.NativeVsCodeEvaluatePerformantTest.testCallNativeClass2<br/>\nsamples: 27677588<br/>\nmax:     1<br/>\naverage: 0.01939981186221863<br/>\nmedian:  0<br/>\nredis.clients.jedis.test.NativeVsCodeEvaluatePerformantTest.testCallNativeClass3<br/>\nsamples: 26451435<br/>\nmax:     18<br/>\naverage: 0.02029791578415311<br/>\nmedian:  0</p>\n\n<p>redis.clients.jedis.test.NativeVsCodeEvaluatePerformantTest.testEvaluate<br/>\nsamples: 21017191<br/>\nmax:     3<br/>\naverage: 0.025557173648942905<br/>\nmedian:  0<br/>\nredis.clients.jedis.test.NativeVsCodeEvaluatePerformantTest.testEvaluate2<br/>\nsamples: 21046684<br/>\nmax:     2<br/>\naverage: 0.025537039469020393<br/>\nmedian:  0<br/>\nredis.clients.jedis.test.NativeVsCodeEvaluatePerformantTest.testEvaluate3<br/>\nsamples: 19714388<br/>\nmax:     5<br/>\naverage: 0.02726546723134393<br/>\nmedian:  0</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612960877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612954546","html_url":"https://github.com/apache/storm/issues/5879#issuecomment-2612954546","issue_url":"https://api.github.com/repos/apache/storm/issues/5879","id":2612954546,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NTQ1NDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-24T22:04:44Z","updated_at":"2025-01-24T16:41:50Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hmclouro\">hmclouro</a>:</i>\n<p>Merged into master</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612954546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255896981","html_url":"https://github.com/apache/storm/pull/1730#issuecomment-255896981","issue_url":"https://api.github.com/repos/apache/storm/issues/1730","id":255896981,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTg5Njk4MQ==","user":{"login":"harshach","id":38649,"node_id":"MDQ6VXNlcjM4NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38649?v=4","gravatar_id":"","url":"https://api.github.com/users/harshach","html_url":"https://github.com/harshach","followers_url":"https://api.github.com/users/harshach/followers","following_url":"https://api.github.com/users/harshach/following{/other_user}","gists_url":"https://api.github.com/users/harshach/gists{/gist_id}","starred_url":"https://api.github.com/users/harshach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshach/subscriptions","organizations_url":"https://api.github.com/users/harshach/orgs","repos_url":"https://api.github.com/users/harshach/repos","events_url":"https://api.github.com/users/harshach/events{/privacy}","received_events_url":"https://api.github.com/users/harshach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-24T23:44:28Z","updated_at":"2016-10-24T23:44:28Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255896981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255897461","html_url":"https://github.com/apache/storm/pull/1663#issuecomment-255897461","issue_url":"https://api.github.com/repos/apache/storm/issues/1663","id":255897461,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTg5NzQ2MQ==","user":{"login":"harshach","id":38649,"node_id":"MDQ6VXNlcjM4NjQ5","avatar_url":"https://avatars.githubusercontent.com/u/38649?v=4","gravatar_id":"","url":"https://api.github.com/users/harshach","html_url":"https://github.com/harshach","followers_url":"https://api.github.com/users/harshach/followers","following_url":"https://api.github.com/users/harshach/following{/other_user}","gists_url":"https://api.github.com/users/harshach/gists{/gist_id}","starred_url":"https://api.github.com/users/harshach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshach/subscriptions","organizations_url":"https://api.github.com/users/harshach/orgs","repos_url":"https://api.github.com/users/harshach/repos","events_url":"https://api.github.com/users/harshach/events{/privacy}","received_events_url":"https://api.github.com/users/harshach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-24T23:47:39Z","updated_at":"2016-10-24T23:47:39Z","author_association":"CONTRIBUTOR","body":"+1. @arunmahadevan you might want to take a look again.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255897461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/255936935","html_url":"https://github.com/apache/storm/pull/1663#issuecomment-255936935","issue_url":"https://api.github.com/repos/apache/storm/issues/1663","id":255936935,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NTkzNjkzNQ==","user":{"login":"arunmahadevan","id":6792890,"node_id":"MDQ6VXNlcjY3OTI4OTA=","avatar_url":"https://avatars.githubusercontent.com/u/6792890?v=4","gravatar_id":"","url":"https://api.github.com/users/arunmahadevan","html_url":"https://github.com/arunmahadevan","followers_url":"https://api.github.com/users/arunmahadevan/followers","following_url":"https://api.github.com/users/arunmahadevan/following{/other_user}","gists_url":"https://api.github.com/users/arunmahadevan/gists{/gist_id}","starred_url":"https://api.github.com/users/arunmahadevan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arunmahadevan/subscriptions","organizations_url":"https://api.github.com/users/arunmahadevan/orgs","repos_url":"https://api.github.com/users/arunmahadevan/repos","events_url":"https://api.github.com/users/arunmahadevan/events{/privacy}","received_events_url":"https://api.github.com/users/arunmahadevan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T04:58:17Z","updated_at":"2016-10-25T04:58:17Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/255936935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612951204","html_url":"https://github.com/apache/storm/issues/5854#issuecomment-2612951204","issue_url":"https://api.github.com/repos/apache/storm/issues/5854","id":2612951204,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NTEyMDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T15:30:41Z","updated_at":"2025-01-24T16:40:17Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Merged into master and 1.x branch.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612951204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612960497","html_url":"https://github.com/apache/storm/issues/5927#issuecomment-2612960497","issue_url":"https://api.github.com/repos/apache/storm/issues/5927","id":2612960497,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjA0OTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T15:42:02Z","updated_at":"2025-01-24T16:44:43Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Merged into master, 1.x, 1.0.x branches.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612960497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612929376","html_url":"https://github.com/apache/storm/issues/5767#issuecomment-2612929376","issue_url":"https://api.github.com/repos/apache/storm/issues/5767","id":2612929376,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5MjkzNzY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T18:34:45Z","updated_at":"2025-01-24T16:29:31Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Thanks <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bkamal\" class=\"user-hover\" rel=\"bkamal\">Kamal</a>,</p>\n\n<p>I merged this into master.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612929376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256136134","html_url":"https://github.com/apache/storm/pull/1744#issuecomment-256136134","issue_url":"https://api.github.com/repos/apache/storm/issues/1744","id":256136134,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjEzNjEzNA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T18:46:40Z","updated_at":"2016-10-25T18:46:40Z","author_association":"CONTRIBUTOR","body":"All the code is ready if people want to take a look.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256136134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256137785","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256137785","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256137785,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjEzNzc4NQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T18:51:04Z","updated_at":"2016-10-25T18:51:04Z","author_association":"CONTRIBUTOR","body":"@HeartSaVioR Sorry this has taken so long.  I am going to upmerge this and pull in #1724 next.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256137785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256144791","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256144791","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256144791,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE0NDc5MQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T19:07:46Z","updated_at":"2016-10-25T19:07:46Z","author_association":"CONTRIBUTOR","body":"Just pushed the upmerged code.  Will look into pulling in #1724 too.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256144791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256148419","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256148419","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256148419,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE0ODQxOQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T19:21:10Z","updated_at":"2016-10-25T19:21:10Z","author_association":"CONTRIBUTOR","body":"Merged in #1724 now too (it was a trivial cherry pick).  \n\n@HeartSaVioR if you want to take a look this should be good for merging in.\n\nJust as an FYI we have been running with a version of this in production for a little while now with no real issues.\n\nOnce this goes in if you want me to I can take a look at pulling it back to 1.0.x too.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256148419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256155423","html_url":"https://github.com/apache/storm/pull/1726#issuecomment-256155423","issue_url":"https://api.github.com/repos/apache/storm/issues/1726","id":256155423,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE1NTQyMw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T19:47:57Z","updated_at":"2016-10-25T19:47:57Z","author_association":"CONTRIBUTOR","body":"@HeartSaVioR @redsanket I added in some documentation for this.  If you have time to take another look that would be great.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256155423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256171361","html_url":"https://github.com/apache/storm/pull/1740#issuecomment-256171361","issue_url":"https://api.github.com/repos/apache/storm/issues/1740","id":256171361,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE3MTM2MQ==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T20:49:04Z","updated_at":"2016-10-25T20:49:04Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256171361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256171396","html_url":"https://github.com/apache/storm/pull/1741#issuecomment-256171396","issue_url":"https://api.github.com/repos/apache/storm/issues/1741","id":256171396,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE3MTM5Ng==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T20:49:10Z","updated_at":"2016-10-25T20:49:10Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256171396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962247","html_url":"https://github.com/apache/storm/issues/5940#issuecomment-2612962247","issue_url":"https://api.github.com/repos/apache/storm/issues/5940","id":2612962247,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NjIyNDc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T21:28:14Z","updated_at":"2025-01-24T16:45:33Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Thanks <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kisst2%40freemail.hu\" class=\"user-hover\" rel=\"kisst2@freemail.hu\">Tibor Kiss</a>,</p>\n\n<p>I merged this into master, 1.x, 1.0.x, and 0.10.x</p>\n\n<p>Keep up the good work</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612962247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256181494","html_url":"https://github.com/apache/storm/pull/1737#issuecomment-256181494","issue_url":"https://api.github.com/repos/apache/storm/issues/1737","id":256181494,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE4MTQ5NA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T21:28:48Z","updated_at":"2016-10-25T21:28:48Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256181494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256187026","html_url":"https://github.com/apache/storm/pull/1737#issuecomment-256187026","issue_url":"https://api.github.com/repos/apache/storm/issues/1737","id":256187026,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjE4NzAyNg==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-25T21:52:33Z","updated_at":"2016-10-25T21:52:43Z","author_association":"CONTRIBUTOR","body":"Actually I am consistently getting test failures \n\n```\ntestResumeAbandoned_Text_NoAck(org.apache.storm.hdfs.spout.TestHdfsSpout)  Time elapsed: 5.234 sec  <<< ERROR!\norg.apache.hadoop.fs.ChecksumException: Checksum error: /var/folders/tw/30gm5zz130xb7065nq53wh0m0015wb/T/junit2111615045142322689/hdfsspout/source/.lock/file1.txt at 0 exp: 906626794 got: -1371140318\n    at org.apache.hadoop.util.DataChecksum.verifyChunkedSums(DataChecksum.java:325)\n    at org.apache.hadoop.hdfs.RemoteBlockReader2.readNextPacket(RemoteBlockReader2.java:231)\n    at org.apache.hadoop.hdfs.RemoteBlockReader2.read(RemoteBlockReader2.java:152)\n    at org.apache.hadoop.hdfs.DFSInputStream$ByteArrayStrategy.doRead(DFSInputStream.java:737)\n    at org.apache.hadoop.hdfs.DFSInputStream.readBuffer(DFSInputStream.java:793)\n    at org.apache.hadoop.hdfs.DFSInputStream.readWithStrategy(DFSInputStream.java:853)\n    at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:896)\n    at java.io.DataInputStream.read(DataInputStream.java:149)\n    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\n    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\n    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\n    at java.io.InputStreamReader.read(InputStreamReader.java:184)\n    at java.io.BufferedReader.fill(BufferedReader.java:161)\n    at java.io.BufferedReader.readLine(BufferedReader.java:324)\n    at java.io.BufferedReader.readLine(BufferedReader.java:389)\n    at org.apache.storm.hdfs.spout.TestHdfsSpout.readTextFile(TestHdfsSpout.java:585)\n    at org.apache.storm.hdfs.spout.TestHdfsSpout.testResumeAbandoned_Text_NoAck(TestHdfsSpout.java:203)\n\ntestResumeAbandoned_Seq_NoAck(org.apache.storm.hdfs.spout.TestHdfsSpout)  Time elapsed: 4.008 sec  <<< ERROR!\norg.apache.hadoop.fs.ChecksumException: Checksum error: /var/folders/tw/30gm5zz130xb7065nq53wh0m0015wb/T/junit173542795084935765/hdfsspout/source/.lock/file1.seq at 0 exp: -271739543 got: 1190116844\n    at org.apache.hadoop.util.DataChecksum.verifyChunkedSums(DataChecksum.java:325)\n    at org.apache.hadoop.hdfs.RemoteBlockReader2.readNextPacket(RemoteBlockReader2.java:231)\n    at org.apache.hadoop.hdfs.RemoteBlockReader2.read(RemoteBlockReader2.java:152)\n    at org.apache.hadoop.hdfs.DFSInputStream$ByteArrayStrategy.doRead(DFSInputStream.java:737)\n    at org.apache.hadoop.hdfs.DFSInputStream.readBuffer(DFSInputStream.java:793)\n    at org.apache.hadoop.hdfs.DFSInputStream.readWithStrategy(DFSInputStream.java:853)\n    at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:896)\n    at java.io.DataInputStream.read(DataInputStream.java:149)\n    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\n    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\n    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\n    at java.io.InputStreamReader.read(InputStreamReader.java:184)\n    at java.io.BufferedReader.fill(BufferedReader.java:161)\n    at java.io.BufferedReader.readLine(BufferedReader.java:324)\n    at java.io.BufferedReader.readLine(BufferedReader.java:389)\n    at org.apache.storm.hdfs.spout.TestHdfsSpout.getTextFileContents(TestHdfsSpout.java:293)\n    at org.apache.storm.hdfs.spout.TestHdfsSpout.testResumeAbandoned_Seq_NoAck(TestHdfsSpout.java:259)\n```\n\nI don't see these failures on master but I get them 100% of the time with this branch.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256187026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256219125","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256219125","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256219125,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjIxOTEyNQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T00:41:13Z","updated_at":"2016-10-26T00:41:13Z","author_association":"CONTRIBUTOR","body":"@revans2 Shouldn't healthcheck.clj be deleted? At least for me HealthCheck.java clashes with healthcheck.clj. I can't clearly say why, might be specific issue with OSX, but anyway there's an issue. I left a comment regarding this.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256219125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256262539","html_url":"https://github.com/apache/storm/pull/1719#issuecomment-256262539","issue_url":"https://api.github.com/repos/apache/storm/issues/1719","id":256262539,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjI2MjUzOQ==","user":{"login":"wangli1426","id":5260276,"node_id":"MDQ6VXNlcjUyNjAyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5260276?v=4","gravatar_id":"","url":"https://api.github.com/users/wangli1426","html_url":"https://github.com/wangli1426","followers_url":"https://api.github.com/users/wangli1426/followers","following_url":"https://api.github.com/users/wangli1426/following{/other_user}","gists_url":"https://api.github.com/users/wangli1426/gists{/gist_id}","starred_url":"https://api.github.com/users/wangli1426/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangli1426/subscriptions","organizations_url":"https://api.github.com/users/wangli1426/orgs","repos_url":"https://api.github.com/users/wangli1426/repos","events_url":"https://api.github.com/users/wangli1426/events{/privacy}","received_events_url":"https://api.github.com/users/wangli1426/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T06:42:55Z","updated_at":"2016-10-26T06:42:55Z","author_association":"CONTRIBUTOR","body":"Any comment?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256262539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256338739","html_url":"https://github.com/apache/storm/pull/1744#issuecomment-256338739","issue_url":"https://api.github.com/repos/apache/storm/issues/1744","id":256338739,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjMzODczOQ==","user":{"login":"dossett","id":7207582,"node_id":"MDQ6VXNlcjcyMDc1ODI=","avatar_url":"https://avatars.githubusercontent.com/u/7207582?v=4","gravatar_id":"","url":"https://api.github.com/users/dossett","html_url":"https://github.com/dossett","followers_url":"https://api.github.com/users/dossett/followers","following_url":"https://api.github.com/users/dossett/following{/other_user}","gists_url":"https://api.github.com/users/dossett/gists{/gist_id}","starred_url":"https://api.github.com/users/dossett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dossett/subscriptions","organizations_url":"https://api.github.com/users/dossett/orgs","repos_url":"https://api.github.com/users/dossett/repos","events_url":"https://api.github.com/users/dossett/events{/privacy}","received_events_url":"https://api.github.com/users/dossett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T12:57:03Z","updated_at":"2016-10-26T12:57:03Z","author_association":"CONTRIBUTOR","body":"I don't know enough about nimbus or clojure to vote on this PR, but this is an exciting change!\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256338739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256341893","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256341893","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256341893,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjM0MTg5Mw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T13:09:38Z","updated_at":"2016-10-26T13:09:38Z","author_association":"CONTRIBUTOR","body":"@HeartSaVioR good catch, I thought I had deleted it.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256341893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256344422","html_url":"https://github.com/apache/storm/pull/1744#issuecomment-256344422","issue_url":"https://api.github.com/repos/apache/storm/issues/1744","id":256344422,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjM0NDQyMg==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T13:18:30Z","updated_at":"2016-10-26T13:18:30Z","author_association":"CONTRIBUTOR","body":"@dossett if you want to build the branch and do some manual testing with your own topologies especially looking at the UI that would be helpful.  I did it, but only with word count, and I looked at the UI, but I don't know how exhaustive it was.  So any help you can give would be great.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256344422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256456889","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256456889","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256456889,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjQ1Njg4OQ==","user":{"login":"srdo","id":4324588,"node_id":"MDQ6VXNlcjQzMjQ1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/4324588?v=4","gravatar_id":"","url":"https://api.github.com/users/srdo","html_url":"https://github.com/srdo","followers_url":"https://api.github.com/users/srdo/followers","following_url":"https://api.github.com/users/srdo/following{/other_user}","gists_url":"https://api.github.com/users/srdo/gists{/gist_id}","starred_url":"https://api.github.com/users/srdo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srdo/subscriptions","organizations_url":"https://api.github.com/users/srdo/orgs","repos_url":"https://api.github.com/users/srdo/repos","events_url":"https://api.github.com/users/srdo/events{/privacy}","received_events_url":"https://api.github.com/users/srdo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T19:47:27Z","updated_at":"2016-10-26T19:47:27Z","author_association":"CONTRIBUTOR","body":"I seem to be getting a few new errors when running some of our own unit tests with this branch. The exceptions are intermittent.\n\n```\njava.lang.NullPointerException\n    at org.apache.storm.utils.DisruptorQueue$FlusherPool.stop(DisruptorQueue.java:110)\n    at org.apache.storm.utils.DisruptorQueue$Flusher.close(DisruptorQueue.java:293)\n    at org.apache.storm.utils.DisruptorQueue.haltWithInterrupt(DisruptorQueue.java:410)\n    at org.apache.storm.disruptor$halt_with_interrupt_BANG_.invoke(disruptor.clj:77)\n    at org.apache.storm.daemon.executor$mk_executor$reify__4923.shutdown(executor.clj:412)\n    at sun.reflect.GeneratedMethodAccessor303.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at clojure.lang.Reflector.invokeMatchingMethod(Reflector.java:93)\n    at clojure.lang.Reflector.invokeNoArgInstanceMember(Reflector.java:313)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify__5552$shutdown_STAR___5572.invoke(worker.clj:668)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify$reify__5598.shutdown(worker.clj:706)\n    at org.apache.storm.ProcessSimulator.killProcess(ProcessSimulator.java:66)\n    at org.apache.storm.ProcessSimulator.killAllProcesses(ProcessSimulator.java:79)\n    at org.apache.storm.testing$kill_local_storm_cluster.invoke(testing.clj:207)\n    at org.apache.storm.testing4j$_withLocalCluster.invoke(testing4j.clj:93)\n    at org.apache.storm.Testing.withLocalCluster(Unknown Source)\n```\n\nand this kind of error\n\n```\njava.lang.IllegalStateException: Timer is not active\n    at org.apache.storm.timer$check_active_BANG_.invoke(timer.clj:87)\n    at org.apache.storm.timer$cancel_timer.invoke(timer.clj:120)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify__5552$shutdown_STAR___5572.invoke(worker.clj:682)\n    at org.apache.storm.daemon.worker$fn__5550$exec_fn__1372__auto__$reify$reify__5598.shutdown(worker.clj:706)\n    at org.apache.storm.ProcessSimulator.killProcess(ProcessSimulator.java:66)\n    at org.apache.storm.ProcessSimulator.killAllProcesses(ProcessSimulator.java:79)\n    at org.apache.storm.testing$kill_local_storm_cluster.invoke(testing.clj:207)\n    at org.apache.storm.testing4j$_withLocalCluster.invoke(testing4j.clj:93)\n    at org.apache.storm.Testing.withLocalCluster(Unknown Source)\n```\n\nOur tests are running Storm in local mode with no time simulation. I've tried running the same tests on 1.x-branch, and these don't seem to occur there.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256456889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256463816","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256463816","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256463816,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjQ2MzgxNg==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-26T20:15:17Z","updated_at":"2016-10-26T20:15:17Z","author_association":"CONTRIBUTOR","body":"OK so going through the code in both cases it looks like the only way that can happen is if the workers is somehow being shut down multiple times.  My guess is that because the slots are on different threads there is a race now between shutting down a worker through the slot and shutting down the worker through the cluster shutting down.\n\nI'll look into reproducing it.  @srdo is there any way you can share your test case with us?  It would make my job a lot simpler of trying to reproduce and fix it.  \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256463816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256511956","html_url":"https://github.com/apache/storm/pull/1726#issuecomment-256511956","issue_url":"https://api.github.com/repos/apache/storm/issues/1726","id":256511956,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjUxMTk1Ng==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T00:07:28Z","updated_at":"2016-10-27T00:07:28Z","author_association":"CONTRIBUTOR","body":"+1 Thanks for adding the documentation @revans2 .\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256511956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612959801","html_url":"https://github.com/apache/storm/issues/5921#issuecomment-2612959801","issue_url":"https://api.github.com/repos/apache/storm/issues/5921","id":2612959801,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NTk4MDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T00:24:02Z","updated_at":"2025-01-24T16:44:21Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Thanks <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\" class=\"user-hover\" rel=\"revans2\">Robert Joseph Evans</a>, I merged into master and 1.x branches.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612959801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256515925","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256515925","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256515925,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjUxNTkyNQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T00:37:06Z","updated_at":"2016-10-27T00:37:06Z","author_association":"CONTRIBUTOR","body":"@revans2 @srdo \nI'm even OK if we file an issue regarding intermittent race condition for local cluster and merge this now, since the race condition of Supervisor in 1.x is much critical. It even occurs on clustered environment.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256515925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256523055","html_url":"https://github.com/apache/storm/pull/1664#issuecomment-256523055","issue_url":"https://api.github.com/repos/apache/storm/issues/1664","id":256523055,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjUyMzA1NQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T01:30:59Z","updated_at":"2016-10-27T01:30:59Z","author_association":"CONTRIBUTOR","body":"Closing this in favor of STORM-1446 and also STORM-2148. This is applied to STORM-1446.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256523055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256527275","html_url":"https://github.com/apache/storm/pull/1736#issuecomment-256527275","issue_url":"https://api.github.com/repos/apache/storm/issues/1736","id":256527275,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjUyNzI3NQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T02:04:30Z","updated_at":"2016-10-27T02:04:30Z","author_association":"CONTRIBUTOR","body":"Reflect STORM-2072 : STORM-1446 now also addresses STORM-2073.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256527275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256579431","html_url":"https://github.com/apache/storm/pull/1679#issuecomment-256579431","issue_url":"https://api.github.com/repos/apache/storm/issues/1679","id":256579431,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjU3OTQzMQ==","user":{"login":"jfenc91","id":3521256,"node_id":"MDQ6VXNlcjM1MjEyNTY=","avatar_url":"https://avatars.githubusercontent.com/u/3521256?v=4","gravatar_id":"","url":"https://api.github.com/users/jfenc91","html_url":"https://github.com/jfenc91","followers_url":"https://api.github.com/users/jfenc91/followers","following_url":"https://api.github.com/users/jfenc91/following{/other_user}","gists_url":"https://api.github.com/users/jfenc91/gists{/gist_id}","starred_url":"https://api.github.com/users/jfenc91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfenc91/subscriptions","organizations_url":"https://api.github.com/users/jfenc91/orgs","repos_url":"https://api.github.com/users/jfenc91/repos","events_url":"https://api.github.com/users/jfenc91/events{/privacy}","received_events_url":"https://api.github.com/users/jfenc91/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T08:27:53Z","updated_at":"2016-10-27T08:27:53Z","author_association":"CONTRIBUTOR","body":"Hey, trying not to let this thread die. Could we get some help here from a committer? @HeartSaVioR @revans2 Thanks!!  \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256579431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256637565","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256637565","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256637565,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjYzNzU2NQ==","user":{"login":"srdo","id":4324588,"node_id":"MDQ6VXNlcjQzMjQ1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/4324588?v=4","gravatar_id":"","url":"https://api.github.com/users/srdo","html_url":"https://github.com/srdo","followers_url":"https://api.github.com/users/srdo/followers","following_url":"https://api.github.com/users/srdo/following{/other_user}","gists_url":"https://api.github.com/users/srdo/gists{/gist_id}","starred_url":"https://api.github.com/users/srdo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srdo/subscriptions","organizations_url":"https://api.github.com/users/srdo/orgs","repos_url":"https://api.github.com/users/srdo/repos","events_url":"https://api.github.com/users/srdo/events{/privacy}","received_events_url":"https://api.github.com/users/srdo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T13:16:45Z","updated_at":"2016-10-27T13:16:45Z","author_association":"CONTRIBUTOR","body":"@revans2 I can't share our actual test code since it depends on pretty large chunks of our codebase. I'll try reproducing with an example topology.\n\nI'd be fine with filing a separate issue to fix the race so this PR isn't blocked.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256637565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256652590","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256652590","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256652590,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY1MjU5MA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T14:11:24Z","updated_at":"2016-10-27T14:11:24Z","author_association":"CONTRIBUTOR","body":"@srdo sounds good.  I filed https://issues.apache.org/jira/browse/STORM-2175 to address the race condition.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256652590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256654783","html_url":"https://github.com/apache/storm/pull/1679#issuecomment-256654783","issue_url":"https://api.github.com/repos/apache/storm/issues/1679","id":256654783,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY1NDc4Mw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T14:19:08Z","updated_at":"2016-10-27T14:19:08Z","author_association":"CONTRIBUTOR","body":"@srdo @hmcl have all of your concerns been addressed?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256654783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256658988","html_url":"https://github.com/apache/storm/pull/1679#issuecomment-256658988","issue_url":"https://api.github.com/repos/apache/storm/issues/1679","id":256658988,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY1ODk4OA==","user":{"login":"srdo","id":4324588,"node_id":"MDQ6VXNlcjQzMjQ1ODg=","avatar_url":"https://avatars.githubusercontent.com/u/4324588?v=4","gravatar_id":"","url":"https://api.github.com/users/srdo","html_url":"https://github.com/srdo","followers_url":"https://api.github.com/users/srdo/followers","following_url":"https://api.github.com/users/srdo/following{/other_user}","gists_url":"https://api.github.com/users/srdo/gists{/gist_id}","starred_url":"https://api.github.com/users/srdo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srdo/subscriptions","organizations_url":"https://api.github.com/users/srdo/orgs","repos_url":"https://api.github.com/users/srdo/repos","events_url":"https://api.github.com/users/srdo/events{/privacy}","received_events_url":"https://api.github.com/users/srdo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T14:33:49Z","updated_at":"2016-10-27T14:33:49Z","author_association":"CONTRIBUTOR","body":"Yes. I think supporting unclean leader election in a nice way is a separate issue to this.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256658988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256670933","html_url":"https://github.com/apache/storm/pull/1679#issuecomment-256670933","issue_url":"https://api.github.com/repos/apache/storm/issues/1679","id":256670933,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY3MDkzMw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T15:13:56Z","updated_at":"2016-10-27T15:13:56Z","author_association":"CONTRIBUTOR","body":"I looked through the code and I didn't see anything that concerned me, and the travis test failure appears to be unrelated so I am +1 pending feedback form @hmcl \n\n@harshach you also reviewed this do you have any concerns still?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256670933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256672892","html_url":"https://github.com/apache/storm/pull/1679#issuecomment-256672892","issue_url":"https://api.github.com/repos/apache/storm/issues/1679","id":256672892,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY3Mjg5Mg==","user":{"login":"hmcl","id":10284328,"node_id":"MDQ6VXNlcjEwMjg0MzI4","avatar_url":"https://avatars.githubusercontent.com/u/10284328?v=4","gravatar_id":"","url":"https://api.github.com/users/hmcl","html_url":"https://github.com/hmcl","followers_url":"https://api.github.com/users/hmcl/followers","following_url":"https://api.github.com/users/hmcl/following{/other_user}","gists_url":"https://api.github.com/users/hmcl/gists{/gist_id}","starred_url":"https://api.github.com/users/hmcl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmcl/subscriptions","organizations_url":"https://api.github.com/users/hmcl/orgs","repos_url":"https://api.github.com/users/hmcl/repos","events_url":"https://api.github.com/users/hmcl/events{/privacy}","received_events_url":"https://api.github.com/users/hmcl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T15:20:22Z","updated_at":"2016-10-27T15:20:22Z","author_association":"CONTRIBUTOR","body":"@revans2 I will finish my review by lunch time PST\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256672892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256674374","html_url":"https://github.com/apache/storm/pull/1679#issuecomment-256674374","issue_url":"https://api.github.com/repos/apache/storm/issues/1679","id":256674374,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY3NDM3NA==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T15:25:17Z","updated_at":"2016-10-27T15:25:17Z","author_association":"CONTRIBUTOR","body":"@hmcl take your time.  This is a critical piece of storm code and I really would like it right.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256674374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256676515","html_url":"https://github.com/apache/storm/pull/1697#issuecomment-256676515","issue_url":"https://api.github.com/repos/apache/storm/issues/1697","id":256676515,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjY3NjUxNQ==","user":{"login":"HeartSaVioR","id":1317309,"node_id":"MDQ6VXNlcjEzMTczMDk=","avatar_url":"https://avatars.githubusercontent.com/u/1317309?v=4","gravatar_id":"","url":"https://api.github.com/users/HeartSaVioR","html_url":"https://github.com/HeartSaVioR","followers_url":"https://api.github.com/users/HeartSaVioR/followers","following_url":"https://api.github.com/users/HeartSaVioR/following{/other_user}","gists_url":"https://api.github.com/users/HeartSaVioR/gists{/gist_id}","starred_url":"https://api.github.com/users/HeartSaVioR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HeartSaVioR/subscriptions","organizations_url":"https://api.github.com/users/HeartSaVioR/orgs","repos_url":"https://api.github.com/users/HeartSaVioR/repos","events_url":"https://api.github.com/users/HeartSaVioR/events{/privacy}","received_events_url":"https://api.github.com/users/HeartSaVioR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T15:32:03Z","updated_at":"2016-10-27T15:32:03Z","author_association":"CONTRIBUTOR","body":"OK. Unit and integration tests, and manual tests passed on recent commits.\nI'm +1 and will merge this now since there's no more reviewer and this was open for fairly long, more than 1 month despite it's kind: backport.\n\nThanks for the amazing work.\n\nBtw, I'm in favor of just having 1.1.0, not having 1.0.3 unless there's specific request on it. If you  would be OK to port back on demand, we could skip it.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256676515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612688042","html_url":"https://github.com/apache/storm/issues/5221#issuecomment-2612688042","issue_url":"https://api.github.com/repos/apache/storm/issues/5221","id":2612688042,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI2ODgwNDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T15:47:08Z","updated_at":"2025-01-24T14:39:04Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=svolle\">svolle</a>:</i>\n<p>I have a similar problem. I'm stuck with log4j-core 2.4 in my application and I get illegal access errors due to API changes between 2.1 and 2.4</p>\n<div class=\"code panel\" style=\"border-width: 1px;\"><div class=\"codeContent panelContent\">\n<pre class=\"code-java\">Exception in thread <span class=\"code-quote\">\"main\"</span> java.lang.IllegalAccessError: tried to access method org.apache.logging.log4j.core.lookup.MapLookup.newMap(I)Ljava/util/HashMap; from <span class=\"code-keyword\">class </span>org.apache.logging.log4j.core.lookup.MainMapLookup\n</pre>\n</div></div>\n\n<p>Would it be possible to shade logging dependencies and allow users to use whatever version of log4j they see fit, or does shading logging pose a particular problem?</p>\n\n<p>Thanks.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612688042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612944192","html_url":"https://github.com/apache/storm/issues/5800#issuecomment-2612944192","issue_url":"https://api.github.com/repos/apache/storm/issues/5800","id":2612944192,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NDQxOTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T16:07:47Z","updated_at":"2025-01-24T16:36:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Thanks <a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\" class=\"user-hover\" rel=\"revans2\">Robert Joseph Evans</a>, I also merged into 1.x-branch.</p>\n\n<p>I'd like to postpone porting back to 1.0.x unless we really want to release 1.0.3, but that's only me, so please feel free to handle it.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612944192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612957171","html_url":"https://github.com/apache/storm/issues/5899#issuecomment-2612957171","issue_url":"https://api.github.com/repos/apache/storm/issues/5899","id":2612957171,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI5NTcxNzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T16:08:21Z","updated_at":"2025-01-24T16:43:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kabhwan\">kabhwan</a>:</i>\n<p>Reopen to change fix versions.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612957171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/256732587","html_url":"https://github.com/apache/storm/pull/1747#issuecomment-256732587","issue_url":"https://api.github.com/repos/apache/storm/issues/1747","id":256732587,"node_id":"MDEyOklzc3VlQ29tbWVudDI1NjczMjU4Nw==","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-10-27T18:40:23Z","updated_at":"2016-10-27T18:40:23Z","author_association":"CONTRIBUTOR","body":"I cherry-piked #1697 back to 1.0.x and then removed the features not supported in this version of storm. \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/256732587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]