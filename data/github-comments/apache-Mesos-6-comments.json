[{"url":"https://api.github.com/repos/apache/mesos/issues/comments/507816894","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-507816894","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":507816894,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzgxNjg5NA==","user":{"login":"jdef","id":2348332,"node_id":"MDQ6VXNlcjIzNDgzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/2348332?v=4","gravatar_id":"","url":"https://api.github.com/users/jdef","html_url":"https://github.com/jdef","followers_url":"https://api.github.com/users/jdef/followers","following_url":"https://api.github.com/users/jdef/following{/other_user}","gists_url":"https://api.github.com/users/jdef/gists{/gist_id}","starred_url":"https://api.github.com/users/jdef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdef/subscriptions","organizations_url":"https://api.github.com/users/jdef/orgs","repos_url":"https://api.github.com/users/jdef/repos","events_url":"https://api.github.com/users/jdef/events{/privacy}","received_events_url":"https://api.github.com/users/jdef/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-02T19:39:12Z","updated_at":"2019-07-02T19:39:12Z","author_association":"CONTRIBUTOR","body":"Yes, I think this makes sense to include.\n\nOn Tue, Jul 2, 2019 at 2:32 PM Vinod Kone <notifications@github.com> wrote:\n\n> *@vinodkone* commented on this pull request.\n>\n> LGTM. Should we add the extra bit about the expectation when TTY is\n> enabled? See comment here:\n> https://github.com/apache/mesos/blob/master/src/slave/containerizer/mesos/io/switchboard.cpp#L1727\n>\n> —\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/mesos/pull/340?email_source=notifications&email_token=AAR5KLCWPPLENB32KV7KPSTP5ONNVA5CNFSM4H426542YY3PNVWWK3TUL52HS4DFWFIHK3DMKJSXC5LFON2FEZLWNFSXPKTDN5WW2ZLOORPWSZGOB5JKNXQ#pullrequestreview-257074910>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAR5KLCXS5QC7MHPSD6YDZDP5ONNVANCNFSM4H42654Q>\n> .\n>\n\n\n-- \nJames DeFelice\n585.241.9488 (voice)\n650.649.6071 (fax)\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/507816894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510063838","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-510063838","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":510063838,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDA2MzgzOA==","user":{"login":"bamarni","id":1205386,"node_id":"MDQ6VXNlcjEyMDUzODY=","avatar_url":"https://avatars.githubusercontent.com/u/1205386?v=4","gravatar_id":"","url":"https://api.github.com/users/bamarni","html_url":"https://github.com/bamarni","followers_url":"https://api.github.com/users/bamarni/followers","following_url":"https://api.github.com/users/bamarni/following{/other_user}","gists_url":"https://api.github.com/users/bamarni/gists{/gist_id}","starred_url":"https://api.github.com/users/bamarni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bamarni/subscriptions","organizations_url":"https://api.github.com/users/bamarni/orgs","repos_url":"https://api.github.com/users/bamarni/repos","events_url":"https://api.github.com/users/bamarni/events{/privacy}","received_events_url":"https://api.github.com/users/bamarni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T13:36:19Z","updated_at":"2019-07-10T13:36:19Z","author_association":"CONTRIBUTOR","body":"Updated it, I've used `launched with an associated IOSwitchboard` instead of tty as it's what's being used elsewhere on the page.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510063838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510070437","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-510070437","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":510070437,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDA3MDQzNw==","user":{"login":"jdef","id":2348332,"node_id":"MDQ6VXNlcjIzNDgzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/2348332?v=4","gravatar_id":"","url":"https://api.github.com/users/jdef","html_url":"https://github.com/jdef","followers_url":"https://api.github.com/users/jdef/followers","following_url":"https://api.github.com/users/jdef/following{/other_user}","gists_url":"https://api.github.com/users/jdef/gists{/gist_id}","starred_url":"https://api.github.com/users/jdef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdef/subscriptions","organizations_url":"https://api.github.com/users/jdef/orgs","repos_url":"https://api.github.com/users/jdef/repos","events_url":"https://api.github.com/users/jdef/events{/privacy}","received_events_url":"https://api.github.com/users/jdef/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T13:52:46Z","updated_at":"2019-07-10T13:52:46Z","author_association":"CONTRIBUTOR","body":"@vinodkone PTAL, feedback has been addressed","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510070437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510098398","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-510098398","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":510098398,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDA5ODM5OA==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T14:59:28Z","updated_at":"2019-07-10T14:59:28Z","author_association":"CONTRIBUTOR","body":"IOSwitchboard is used by containers with or without TTY. \r\n\r\ns/launched with an associated IOSwitchboard/launched with TTYInfo in their ContainerInfo/","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510098398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510110404","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-510110404","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":510110404,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDExMDQwNA==","user":{"login":"bamarni","id":1205386,"node_id":"MDQ6VXNlcjEyMDUzODY=","avatar_url":"https://avatars.githubusercontent.com/u/1205386?v=4","gravatar_id":"","url":"https://api.github.com/users/bamarni","html_url":"https://github.com/bamarni","followers_url":"https://api.github.com/users/bamarni/followers","following_url":"https://api.github.com/users/bamarni/following{/other_user}","gists_url":"https://api.github.com/users/bamarni/gists{/gist_id}","starred_url":"https://api.github.com/users/bamarni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bamarni/subscriptions","organizations_url":"https://api.github.com/users/bamarni/orgs","repos_url":"https://api.github.com/users/bamarni/repos","events_url":"https://api.github.com/users/bamarni/events{/privacy}","received_events_url":"https://api.github.com/users/bamarni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T15:28:10Z","updated_at":"2019-07-10T15:28:10Z","author_association":"CONTRIBUTOR","body":"@vinodkone : is this sentence a few lines above accurate then? \r\n\r\n> This call can only be made against containers that have been launched with an associated IOSwitchboard (i.e. nested containers launched via a LAUNCH_NESTED_CONTAINER_SESSION call or normal containers launched with a TTYInfo in their ContainerInfo)\r\n\r\nSee also https://github.com/dcos/dcos-core-cli/blob/1.14-patch.x/python/lib/dcos/dcos/mesos.py#L1425-L1428, where the code treats a missing I/O Switchboard as missing TTY.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510110404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510940981","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-510940981","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":510940981,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk0MDk4MQ==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T16:00:46Z","updated_at":"2019-07-12T16:00:46Z","author_association":"CONTRIBUTOR","body":"@bamarni For a regular container launched by a framework, IOSwitchboard is only enabled when TTY is requested. But an operator can launch a debug container without TTY and IOSwitchboard is still enabled AFAIK. In other words, TTY => IOSwitchboard but not the other way around. @abudnik @Gilbert88 can you confirm?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510940981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510967893","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-510967893","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":510967893,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDk2Nzg5Mw==","user":{"login":"abudnik","id":1283969,"node_id":"MDQ6VXNlcjEyODM5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/1283969?v=4","gravatar_id":"","url":"https://api.github.com/users/abudnik","html_url":"https://github.com/abudnik","followers_url":"https://api.github.com/users/abudnik/followers","following_url":"https://api.github.com/users/abudnik/following{/other_user}","gists_url":"https://api.github.com/users/abudnik/gists{/gist_id}","starred_url":"https://api.github.com/users/abudnik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abudnik/subscriptions","organizations_url":"https://api.github.com/users/abudnik/orgs","repos_url":"https://api.github.com/users/abudnik/repos","events_url":"https://api.github.com/users/abudnik/events{/privacy}","received_events_url":"https://api.github.com/users/abudnik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T17:27:16Z","updated_at":"2019-07-12T17:27:16Z","author_association":"MEMBER","body":"> @bamarni For a regular container launched by a framework, IOSwitchboard is only enabled when TTY is requested. But an operator can launch a debug container without TTY and IOSwitchboard is still enabled AFAIK. In other words, TTY => IOSwitchboard but not the other way around. @abudnik @Gilbert88 can you confirm?\r\n\r\nYes, [correct.](https://github.com/apache/mesos/blob/9932550e9632e7fbb9a45b217793c7f508f57001/src/slave/containerizer/mesos/io/switchboard.cpp#L893-L907)\r\nAlso, a debug container can be launched only by `LAUNCH_NESTED_CONTAINER_SESSION` call.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/510967893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/513828218","html_url":"https://github.com/apache/mesos/pull/340#issuecomment-513828218","issue_url":"https://api.github.com/repos/apache/mesos/issues/340","id":513828218,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzgyODIxOA==","user":{"login":"bamarni","id":1205386,"node_id":"MDQ6VXNlcjEyMDUzODY=","avatar_url":"https://avatars.githubusercontent.com/u/1205386?v=4","gravatar_id":"","url":"https://api.github.com/users/bamarni","html_url":"https://github.com/bamarni","followers_url":"https://api.github.com/users/bamarni/followers","following_url":"https://api.github.com/users/bamarni/following{/other_user}","gists_url":"https://api.github.com/users/bamarni/gists{/gist_id}","starred_url":"https://api.github.com/users/bamarni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bamarni/subscriptions","organizations_url":"https://api.github.com/users/bamarni/orgs","repos_url":"https://api.github.com/users/bamarni/repos","events_url":"https://api.github.com/users/bamarni/events{/privacy}","received_events_url":"https://api.github.com/users/bamarni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T14:58:20Z","updated_at":"2019-07-22T14:58:20Z","author_association":"CONTRIBUTOR","body":"Thanks for the clarification @abudnik @vinodkone , I've updated the PR","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/513828218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/518581669","html_url":"https://github.com/apache/mesos/pull/341#issuecomment-518581669","issue_url":"https://api.github.com/repos/apache/mesos/issues/341","id":518581669,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODU4MTY2OQ==","user":{"login":"janisz","id":1616386,"node_id":"MDQ6VXNlcjE2MTYzODY=","avatar_url":"https://avatars.githubusercontent.com/u/1616386?v=4","gravatar_id":"","url":"https://api.github.com/users/janisz","html_url":"https://github.com/janisz","followers_url":"https://api.github.com/users/janisz/followers","following_url":"https://api.github.com/users/janisz/following{/other_user}","gists_url":"https://api.github.com/users/janisz/gists{/gist_id}","starred_url":"https://api.github.com/users/janisz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janisz/subscriptions","organizations_url":"https://api.github.com/users/janisz/orgs","repos_url":"https://api.github.com/users/janisz/repos","events_url":"https://api.github.com/users/janisz/events{/privacy}","received_events_url":"https://api.github.com/users/janisz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T09:05:58Z","updated_at":"2019-08-06T09:05:58Z","author_association":"CONTRIBUTOR","body":"@tillt @bmahler @rukletsov Can you take a look at this?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/518581669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/521271763","html_url":"https://github.com/apache/mesos/pull/341#issuecomment-521271763","issue_url":"https://api.github.com/repos/apache/mesos/issues/341","id":521271763,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTI3MTc2Mw==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T14:33:54Z","updated_at":"2019-08-14T14:33:54Z","author_association":"CONTRIBUTOR","body":"This log line has been valuable to see disk usage over time from logs when we encountered disk full issues. A metric is not a substitute because we would need a metrics stack with history to get the same data. Also, this is the only log line that I know of in the agent that periodically prints something which is valuable because one can easily tell from the logs whether the main actor was stuck or not when debugging issues. \r\n\r\n@bgalek Has this logging been causing any issues for you in production?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/521271763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/521279359","html_url":"https://github.com/apache/mesos/pull/341#issuecomment-521279359","issue_url":"https://api.github.com/repos/apache/mesos/issues/341","id":521279359,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTI3OTM1OQ==","user":{"login":"bgalek","id":2291045,"node_id":"MDQ6VXNlcjIyOTEwNDU=","avatar_url":"https://avatars.githubusercontent.com/u/2291045?v=4","gravatar_id":"","url":"https://api.github.com/users/bgalek","html_url":"https://github.com/bgalek","followers_url":"https://api.github.com/users/bgalek/followers","following_url":"https://api.github.com/users/bgalek/following{/other_user}","gists_url":"https://api.github.com/users/bgalek/gists{/gist_id}","starred_url":"https://api.github.com/users/bgalek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bgalek/subscriptions","organizations_url":"https://api.github.com/users/bgalek/orgs","repos_url":"https://api.github.com/users/bgalek/repos","events_url":"https://api.github.com/users/bgalek/events{/privacy}","received_events_url":"https://api.github.com/users/bgalek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T14:50:41Z","updated_at":"2019-08-14T14:50:41Z","author_association":"CONTRIBUTOR","body":"@vinodkone nope, just thought it was duplication of metric","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/521279359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/534463429","html_url":"https://github.com/apache/mesos/pull/343#issuecomment-534463429","issue_url":"https://api.github.com/repos/apache/mesos/issues/343","id":534463429,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDQ2MzQyOQ==","user":{"login":"bbannier","id":324957,"node_id":"MDQ6VXNlcjMyNDk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/324957?v=4","gravatar_id":"","url":"https://api.github.com/users/bbannier","html_url":"https://github.com/bbannier","followers_url":"https://api.github.com/users/bbannier/followers","following_url":"https://api.github.com/users/bbannier/following{/other_user}","gists_url":"https://api.github.com/users/bbannier/gists{/gist_id}","starred_url":"https://api.github.com/users/bbannier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbannier/subscriptions","organizations_url":"https://api.github.com/users/bbannier/orgs","repos_url":"https://api.github.com/users/bbannier/repos","events_url":"https://api.github.com/users/bbannier/events{/privacy}","received_events_url":"https://api.github.com/users/bbannier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-24T08:58:28Z","updated_at":"2019-09-24T08:58:28Z","author_association":"MEMBER","body":"Merged.\r\n```\r\ncommit ce801bd6b3f56788eb4d3179959fa7290220432d\r\nAuthor: Dominik Dary <DominikDary@users.noreply.github.com>\r\nDate:   Tue Sep 24 10:45:58 2019 +0200\r\n\r\n    Fixed documentation on master fault domains.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/534463429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/547362391","html_url":"https://github.com/apache/mesos/pull/345#issuecomment-547362391","issue_url":"https://api.github.com/repos/apache/mesos/issues/345","id":547362391,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NzM2MjM5MQ==","user":{"login":"armandgrillet","id":2117580,"node_id":"MDQ6VXNlcjIxMTc1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2117580?v=4","gravatar_id":"","url":"https://api.github.com/users/armandgrillet","html_url":"https://github.com/armandgrillet","followers_url":"https://api.github.com/users/armandgrillet/followers","following_url":"https://api.github.com/users/armandgrillet/following{/other_user}","gists_url":"https://api.github.com/users/armandgrillet/gists{/gist_id}","starred_url":"https://api.github.com/users/armandgrillet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/armandgrillet/subscriptions","organizations_url":"https://api.github.com/users/armandgrillet/orgs","repos_url":"https://api.github.com/users/armandgrillet/repos","events_url":"https://api.github.com/users/armandgrillet/events{/privacy}","received_events_url":"https://api.github.com/users/armandgrillet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-29T10:49:08Z","updated_at":"2019-10-29T10:49:08Z","author_association":"CONTRIBUTOR","body":"@bmahler Please review, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/547362391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/548871609","html_url":"https://github.com/apache/mesos/pull/345#issuecomment-548871609","issue_url":"https://api.github.com/repos/apache/mesos/issues/345","id":548871609,"node_id":"MDEyOklzc3VlQ29tbWVudDU0ODg3MTYwOQ==","user":{"login":"armandgrillet","id":2117580,"node_id":"MDQ6VXNlcjIxMTc1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/2117580?v=4","gravatar_id":"","url":"https://api.github.com/users/armandgrillet","html_url":"https://github.com/armandgrillet","followers_url":"https://api.github.com/users/armandgrillet/followers","following_url":"https://api.github.com/users/armandgrillet/following{/other_user}","gists_url":"https://api.github.com/users/armandgrillet/gists{/gist_id}","starred_url":"https://api.github.com/users/armandgrillet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/armandgrillet/subscriptions","organizations_url":"https://api.github.com/users/armandgrillet/orgs","repos_url":"https://api.github.com/users/armandgrillet/repos","events_url":"https://api.github.com/users/armandgrillet/events{/privacy}","received_events_url":"https://api.github.com/users/armandgrillet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-01T17:10:44Z","updated_at":"2019-11-01T17:10:44Z","author_association":"CONTRIBUTOR","body":"`mesos-cli-tests` does not pass following the change on my machine:\r\n```\r\n  py3-lint: commands succeeded\r\n  congratulations :)\r\n\r\nTestAgentPlugin\r\ntest_list (cli.tests.agent.TestAgentPlugin) ... ERROR\r\n\r\nTestInfrastructure\r\ntest_capture_output (cli.tests.tests.TestInfrastructure) ... ok\r\ntest_launch_binaries (cli.tests.tests.TestInfrastructure) ... ERROR\r\n\r\nTestTaskPlugin\r\ntest_exec (cli.tests.task.TestTaskPlugin) ... ERROR\r\ntest_exec_exit_status (cli.tests.task.TestTaskPlugin) ... ERROR\r\ntest_exec_interactive (cli.tests.task.TestTaskPlugin) ... ERROR\r\ntest_list (cli.tests.task.TestTaskPlugin) ... ERROR\r\ntest_list_all (cli.tests.task.TestTaskPlugin) ... ERROR\r\n\r\n======================================================================\r\nERROR: test_list (cli.tests.agent.TestAgentPlugin)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/Users/armandgrillet/Code/mesos/src/python/cli_new/lib/cli/tests/base.py\", line 280, in launch\r\n    http.get_json(self.flags[\"master\"], \"slaves\", single_slave, timeout)\r\n  File \"/Users/armandgrillet/Code/mesos/src/python/cli_new/lib/cli/http.py\", line 86, in get_json\r\n    .format(seconds=str(timeout)))\r\ncli.exceptions.CLIException: Failed to get data within 5 seconds\r\n```\r\n\r\nI will investigate more on Monday.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/548871609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/598866968","html_url":"https://github.com/apache/mesos/pull/352#issuecomment-598866968","issue_url":"https://api.github.com/repos/apache/mesos/issues/352","id":598866968,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODg2Njk2OA==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-13T18:54:45Z","updated_at":"2020-03-13T18:54:45Z","author_association":"CONTRIBUTOR","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/598866968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/602944778","html_url":"https://github.com/apache/mesos/pull/353#issuecomment-602944778","issue_url":"https://api.github.com/repos/apache/mesos/issues/353","id":602944778,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjk0NDc3OA==","user":{"login":"bluezd","id":977107,"node_id":"MDQ6VXNlcjk3NzEwNw==","avatar_url":"https://avatars.githubusercontent.com/u/977107?v=4","gravatar_id":"","url":"https://api.github.com/users/bluezd","html_url":"https://github.com/bluezd","followers_url":"https://api.github.com/users/bluezd/followers","following_url":"https://api.github.com/users/bluezd/following{/other_user}","gists_url":"https://api.github.com/users/bluezd/gists{/gist_id}","starred_url":"https://api.github.com/users/bluezd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluezd/subscriptions","organizations_url":"https://api.github.com/users/bluezd/orgs","repos_url":"https://api.github.com/users/bluezd/repos","events_url":"https://api.github.com/users/bluezd/events{/privacy}","received_events_url":"https://api.github.com/users/bluezd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-24T01:11:06Z","updated_at":"2020-03-24T01:11:06Z","author_association":"CONTRIBUTOR","body":"@bmahler Thanks for your info, I will update the patch on my own and submit later.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/602944778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/602971351","html_url":"https://github.com/apache/mesos/pull/353#issuecomment-602971351","issue_url":"https://api.github.com/repos/apache/mesos/issues/353","id":602971351,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjk3MTM1MQ==","user":{"login":"bluezd","id":977107,"node_id":"MDQ6VXNlcjk3NzEwNw==","avatar_url":"https://avatars.githubusercontent.com/u/977107?v=4","gravatar_id":"","url":"https://api.github.com/users/bluezd","html_url":"https://github.com/bluezd","followers_url":"https://api.github.com/users/bluezd/followers","following_url":"https://api.github.com/users/bluezd/following{/other_user}","gists_url":"https://api.github.com/users/bluezd/gists{/gist_id}","starred_url":"https://api.github.com/users/bluezd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluezd/subscriptions","organizations_url":"https://api.github.com/users/bluezd/orgs","repos_url":"https://api.github.com/users/bluezd/repos","events_url":"https://api.github.com/users/bluezd/events{/privacy}","received_events_url":"https://api.github.com/users/bluezd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-24T02:25:59Z","updated_at":"2020-03-24T02:25:59Z","author_association":"CONTRIBUTOR","body":"@bmahler I have re-submitted the changes. Could you please review it again ?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/602971351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/603473389","html_url":"https://github.com/apache/mesos/pull/353#issuecomment-603473389","issue_url":"https://api.github.com/repos/apache/mesos/issues/353","id":603473389,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzQ3MzM4OQ==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-24T19:57:01Z","updated_at":"2020-03-24T19:57:01Z","author_association":"CONTRIBUTOR","body":"@asekretenko these are good questions to be asking, as I also felt this looked a bit strange. I suspect it's just modeled in the same way that ModuleManager is written which has quite a bit more to it but is also an all static class with similar static non-POD issues. For unload, it looks like it is used for testing so I'm not sure how easily it could be removed. At this point I haven't read through all the module related code enough to be contemplating changing the design, so I can't write a useful TODO or ticket (but please feel free to if you're interested in pitching in to clean this up!)\r\n\r\nSince @bluezd is a new contributor and was interested in hooks/modules, I looked for some small tickets for him to get some experience with the contribution process, and so this patch is just focusing on the trivial work of removing static non-PODs (which we ban) and fixing some unsafe locking in this code.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/603473389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/603477873","html_url":"https://github.com/apache/mesos/pull/354#issuecomment-603477873","issue_url":"https://api.github.com/repos/apache/mesos/issues/354","id":603477873,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzQ3Nzg3Mw==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-24T20:06:47Z","updated_at":"2020-03-24T20:06:47Z","author_association":"CONTRIBUTOR","body":"Thanks @kamaradclimber, we chatted a bit in slack about this since it looked a bit surprising to me:\r\n\r\nhttps://mesos.slack.com/archives/C1YN31DPA/p1584988424011600\r\n\r\nOne of us will get to this shortly.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/603477873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610138094","html_url":"https://github.com/apache/mesos/pull/356#issuecomment-610138094","issue_url":"https://api.github.com/repos/apache/mesos/issues/356","id":610138094,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDEzODA5NA==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T02:29:40Z","updated_at":"2020-04-07T02:29:40Z","author_association":"CONTRIBUTOR","body":"Thanks for reporting this Charles! I will take a closer look soon to confirm the error handling in this patch is correct and complete.\r\n\r\nA couple of logistical things in the meanwhile:\r\n\r\n1. Would you be able to file a JIRA ticket? If you'd rather not, that's ok, I can file one for you, as we'll need one for this bug to be referenced and for this to make it into the CHANGELOG.\r\n2. Can you extract the contributors.yaml change from this PR? We enforce that commits in the project do not mix unrelated changes.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610138094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610241483","html_url":"https://github.com/apache/mesos/pull/356#issuecomment-610241483","issue_url":"https://api.github.com/repos/apache/mesos/issues/356","id":610241483,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDI0MTQ4Mw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T08:06:58Z","updated_at":"2020-04-07T08:06:58Z","author_association":"CONTRIBUTOR","body":"> Can you extract the contributors.yaml change from this PR? We enforce that commits in the project do not mix unrelated changes.\r\n\r\nDone.\r\n\r\n> Would you be able to file a JIRA ticket? If you'd rather not, that's ok, I can file one for you, as we'll need one for this bug to be referenced and for this to make it into the CHANGELOG.\r\n\r\nhttps://issues.apache.org/jira/browse/MESOS-10110\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610241483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610590957","html_url":"https://github.com/apache/mesos/pull/356#issuecomment-610590957","issue_url":"https://api.github.com/repos/apache/mesos/issues/356","id":610590957,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDU5MDk1Nw==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T19:59:40Z","updated_at":"2020-04-07T19:59:40Z","author_association":"CONTRIBUTOR","body":"Took a look at the protobuf code:\r\n\r\n> Before the code didn't check at all the return value of\r\n> Message::SerializeToString, which can fail for various reasons,\r\n> e.g. out-of-memory, message too large, or invalid UTF-8 string.\r\n\r\nAs far as I see, `MessageLite::SerializeToString` boils down to [this code](https://github.com/protocolbuffers/protobuf/blob/v3.11.4/src/google/protobuf/message_lite.cc#L422-L436):\r\n\r\n```\r\nbool MessageLite::AppendPartialToString(std::string* output) const {\r\n  size_t old_size = output->size();\r\n  size_t byte_size = ByteSizeLong();\r\n  if (byte_size > INT_MAX) {\r\n    GOOGLE_LOG(ERROR) << GetTypeName()\r\n               << \" exceeded maximum protobuf size of 2GB: \" << byte_size;\r\n    return false;\r\n  }\r\n\r\n  STLStringResizeUninitialized(output, old_size + byte_size);\r\n  uint8* start =\r\n      reinterpret_cast<uint8*>(io::mutable_string_data(output) + old_size);\r\n  SerializeToArrayImpl(*this, start, byte_size);\r\n  return true;\r\n}\r\n```\r\n\r\nThis will only return false for the message being too large? Where do you see out of memory being handled? It also looks like invalid UTF-8 does not fail serialization, but rather only logs an error for \"proto3\" always and logs an error in debug mode for \"proto2\", see [this example of a proto3 message](https://github.com/protocolbuffers/protobuf/blob/v3.11.4/src/google/protobuf/any.pb.cc#L214).\r\n\r\nOn the parsing side, looks like the possible cases for a false return are: `!IsInitialized()` [[1]](https://github.com/protocolbuffers/protobuf/blob/v3.11.4/src/google/protobuf/message_lite.h#L529)[[2]](https://github.com/protocolbuffers/protobuf/blob/v3.11.4/src/google/protobuf/message_lite.h#L475-L479), didn't consume entire message [[3]](https://github.com/protocolbuffers/protobuf/blob/v3.11.4/src/google/protobuf/message_lite.cc#L135), invalid message data (e.g. invalid varint, length of a string / submessage goes out of bounds). For invalid UTF-8, it looks [pretty complicated](https://github.com/protocolbuffers/protobuf/blob/e667bf6eaaa2fb1ba2987c6538df81f88500d030/src/google/protobuf/compiler/cpp/cpp_helpers.cc#L1034-L1101):\r\n\r\n* If the message is \"proto3\", it seems to always validate UTF-8 by directly calling `WireFormatLite::VerifyUtf8String` and will then strictly fail parsing if not UTF-8.\r\n* For \"proto2\" code, it seems to call [`WireFormat::VerifyUTF8StringNamedField`](https://github.com/protocolbuffers/protobuf/blob/df6e3a2f54ca893635119e98688a47ad85ecca26/src/google/protobuf/wire_format.h#L355-L381) and **only log** if it's invalid UTF-8, not fail. Also the code seems to be within a `#ifdef GOOGLE_PROTOBUF_UTF8_VALIDATION_ENABLED` which in turns is [only enabled if in a debug build i.e. `!NDEBUG`](https://github.com/protocolbuffers/protobuf/blob/e667bf6eaaa2fb1ba2987c6538df81f88500d030/src/google/protobuf/wire_format_lite.h#L54-L57). I'm a little puzzled at how you saw the logging, is your libprotobuf using debug mode? If you're using protoc from mesos I wonder if the way it's built in mesos is hitting the same issue as https://github.com/Homebrew/legacy-homebrew/issues/9279.\r\n\r\nHere's a summary of my findings:\r\n\r\n**Serialization of invalid UTF-8**:\r\n* \"proto3\": serialization will succeed but invalid UTF-8 will be logged.\r\n* \"proto2\": serialization will succeed. Invalid UTF-8 will only be logged in debug mode (NDEBUG not defined).\r\n\r\n**De-serialization of invalid UTF-8**:\r\n* \"proto3\": de-serialization will fail and it will be logged.\r\n* \"proto2\": de-serialization will succeed. Invalid UTF-8 will only be logged in debug mode (NDEBUG not defined).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610590957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610643627","html_url":"https://github.com/apache/mesos/pull/356#issuecomment-610643627","issue_url":"https://api.github.com/repos/apache/mesos/issues/356","id":610643627,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDY0MzYyNw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T22:05:17Z","updated_at":"2020-04-07T22:05:17Z","author_association":"CONTRIBUTOR","body":"> This will only return false for the message being too large? Where do you see out of memory being handled?\r\n\r\nAgreed. I *thought* it would handle it, but it looks like it just lets `std::bad_alloc` propagate.\r\n\r\n> It also looks like invalid UTF-8 does not fail serialization, but rather only logs an error for \"proto3\" always and logs an error in debug mode for \"proto2\", see [this example of a proto3 message](https://github.com/protocolbuffers/protobuf/blob/v3.11.4/src/google/protobuf/any.pb.cc#L214).\r\n\r\nIndeed, it's a bit of a mess.\r\nBasically what happened in our case is that the framework re-serialises a subset of the messages received from the master into an event log, but uses proto3 - so serialisation would work, but then deserialising this would fail...\r\nIt's a bit sad that with proto3 serialising invalid uft8 doesn't fail but deserialising fails, it's contrary to Postel's principle :).\r\n\r\n> I'm a little puzzled at how you saw the logging, is your libprotobuf using debug mode?\r\n\r\nInteresting - we actually build our own libprotobuf - I'll ask our IT to double-check.\r\n\r\n> **Serialization of invalid UTF-8**:\r\n> \r\n>     * \"proto3\": serialization will succeed but invalid UTF-8 will be logged.\r\n> \r\n>     * \"proto2\": serialization will succeed. Invalid UTF-8 will only be logged in debug mode (NDEBUG not defined).\r\n> \r\n> \r\n> **De-serialization of invalid UTF-8**:\r\n> \r\n>     * \"proto3\": de-serialization will fail and it will be logged.\r\n> \r\n>     * \"proto2\": de-serialization will succeed. Invalid UTF-8 will only be logged in debug mode (NDEBUG not defined).\r\n\r\nYes, it also matches my testing.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610643627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610644546","html_url":"https://github.com/apache/mesos/pull/356#issuecomment-610644546","issue_url":"https://api.github.com/repos/apache/mesos/issues/356","id":610644546,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDY0NDU0Ng==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T22:07:44Z","updated_at":"2020-04-07T22:07:44Z","author_association":"CONTRIBUTOR","body":"On a slightly-tangential subject: how do you deal with formatting?\r\nI can see that there's a `support/clang-format` file, but applying it with e.g. clang-format version 7 results in many changes - I guess the code base hasn't been re-formatted to avoid churn?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610644546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610660551","html_url":"https://github.com/apache/mesos/pull/356#issuecomment-610660551","issue_url":"https://api.github.com/repos/apache/mesos/issues/356","id":610660551,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDY2MDU1MQ==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T22:58:47Z","updated_at":"2020-04-07T22:58:47Z","author_association":"CONTRIBUTOR","body":"> On a slightly-tangential subject: how do you deal with formatting?\r\nI can see that there's a support/clang-format file, but applying it with e.g. clang-format version 7 results in many changes - I guess the code base hasn't been re-formatted to avoid churn?\r\n\r\nI personally don't use clang-format but some others in the project do. At this point as long as your commit can pass the pre-commit hooks it's ok, but reviewers might have differing formatting preferences as we don't have a single way: http://mesos.apache.org/documentation/latest/c++-style-guide/","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/610660551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612129236","html_url":"https://github.com/apache/mesos/pull/355#issuecomment-612129236","issue_url":"https://api.github.com/repos/apache/mesos/issues/355","id":612129236,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjEyOTIzNg==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T17:18:12Z","updated_at":"2020-04-10T17:18:12Z","author_association":"CONTRIBUTOR","body":"> It seems the existing method `cgroups::remove` is not used anywhere except in the unit test codes, so do we still need it? Or we want to change it to internally call the `internal::remove` introduced in this PR?\r\n\r\nWhatever you prefer :).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612129236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612398466","html_url":"https://github.com/apache/mesos/pull/355#issuecomment-612398466","issue_url":"https://api.github.com/repos/apache/mesos/issues/355","id":612398466,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjM5ODQ2Ng==","user":{"login":"qianzhangxa","id":16984932,"node_id":"MDQ6VXNlcjE2OTg0OTMy","avatar_url":"https://avatars.githubusercontent.com/u/16984932?v=4","gravatar_id":"","url":"https://api.github.com/users/qianzhangxa","html_url":"https://github.com/qianzhangxa","followers_url":"https://api.github.com/users/qianzhangxa/followers","following_url":"https://api.github.com/users/qianzhangxa/following{/other_user}","gists_url":"https://api.github.com/users/qianzhangxa/gists{/gist_id}","starred_url":"https://api.github.com/users/qianzhangxa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qianzhangxa/subscriptions","organizations_url":"https://api.github.com/users/qianzhangxa/orgs","repos_url":"https://api.github.com/users/qianzhangxa/repos","events_url":"https://api.github.com/users/qianzhangxa/events{/privacy}","received_events_url":"https://api.github.com/users/qianzhangxa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-11T11:27:16Z","updated_at":"2020-04-11T11:33:49Z","author_association":"CONTRIBUTOR","body":"> > It seems the existing method `cgroups::remove` is not used anywhere except in the unit test codes, so do we still need it? Or we want to change it to internally call the `internal::remove` introduced in this PR?\r\n> \r\n> Whatever you prefer :).\r\n\r\nSecond thought, it seems not a good idea to make `cgroups::remove` internally call `internal::remove` since they have different return types, so let just leave it as it is.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612398466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612580001","html_url":"https://github.com/apache/mesos/pull/355#issuecomment-612580001","issue_url":"https://api.github.com/repos/apache/mesos/issues/355","id":612580001,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjU4MDAwMQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-12T08:10:59Z","updated_at":"2020-04-12T08:10:59Z","author_association":"CONTRIBUTOR","body":"> > > It seems the existing method `cgroups::remove` is not used anywhere except in the unit test codes, so do we still need it? Or we want to change it to internally call the `internal::remove` introduced in this PR?\r\n> > \r\n> > \r\n> > Whatever you prefer :).\r\n> \r\n> Second thought, it seems not a good idea to make `cgroups::remove` internally call `internal::remove` since they have different return types, so let just leave it as it is.\r\n\r\nAh, for some reason I didn't see this edit, so I removed `cgroups::remove` - seems it makes sense since it's not used apart from tests, and we probably don't want to use it since it doesn't have the workaround?\r\n\r\nIt's easy to add back if you want, just let me know what you prefer.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612580001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612629131","html_url":"https://github.com/apache/mesos/pull/355#issuecomment-612629131","issue_url":"https://api.github.com/repos/apache/mesos/issues/355","id":612629131,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjYyOTEzMQ==","user":{"login":"qianzhangxa","id":16984932,"node_id":"MDQ6VXNlcjE2OTg0OTMy","avatar_url":"https://avatars.githubusercontent.com/u/16984932?v=4","gravatar_id":"","url":"https://api.github.com/users/qianzhangxa","html_url":"https://github.com/qianzhangxa","followers_url":"https://api.github.com/users/qianzhangxa/followers","following_url":"https://api.github.com/users/qianzhangxa/following{/other_user}","gists_url":"https://api.github.com/users/qianzhangxa/gists{/gist_id}","starred_url":"https://api.github.com/users/qianzhangxa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qianzhangxa/subscriptions","organizations_url":"https://api.github.com/users/qianzhangxa/orgs","repos_url":"https://api.github.com/users/qianzhangxa/repos","events_url":"https://api.github.com/users/qianzhangxa/events{/privacy}","received_events_url":"https://api.github.com/users/qianzhangxa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-12T14:57:23Z","updated_at":"2020-04-12T14:57:23Z","author_association":"CONTRIBUTOR","body":"> > > > It seems the existing method `cgroups::remove` is not used anywhere except in the unit test codes, so do we still need it? Or we want to change it to internally call the `internal::remove` introduced in this PR?\r\n> > > \r\n> > > \r\n> > > Whatever you prefer :).\r\n> > \r\n> > \r\n> > Second thought, it seems not a good idea to make `cgroups::remove` internally call `internal::remove` since they have different return types, so let just leave it as it is.\r\n> \r\n> Ah, for some reason I didn't see this edit, so I removed `cgroups::remove` - seems it makes sense since it's not used apart from tests, and we probably don't want to use it since it doesn't have the workaround?\r\n> \r\n> It's easy to add back if you want, just let me know what you prefer.\r\n\r\nYeah, I am OK to remove it.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612629131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612649988","html_url":"https://github.com/apache/mesos/pull/355#issuecomment-612649988","issue_url":"https://api.github.com/repos/apache/mesos/issues/355","id":612649988,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjY0OTk4OA==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-12T17:32:32Z","updated_at":"2020-04-12T17:32:32Z","author_association":"CONTRIBUTOR","body":"OK, hopefully good to merge now :).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/612649988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/613043220","html_url":"https://github.com/apache/mesos/pull/357#issuecomment-613043220","issue_url":"https://api.github.com/repos/apache/mesos/issues/357","id":613043220,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzA0MzIyMA==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T19:00:38Z","updated_at":"2020-04-13T19:00:38Z","author_association":"CONTRIBUTOR","body":"Thanks! This is now committed","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/613043220/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/614808981","html_url":"https://github.com/apache/mesos/pull/358#issuecomment-614808981","issue_url":"https://api.github.com/repos/apache/mesos/issues/358","id":614808981,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDgwODk4MQ==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T18:04:39Z","updated_at":"2020-04-16T18:04:39Z","author_association":"CONTRIBUTOR","body":"@abudnik perhaps we could be a bit more specific about when to run as root?\r\n\r\nWe have a lot of test filters so it's a little more generalized (e.g. if you're touching a 'curl' related test make sure that runs, if touching a docker related test make sure that runs, etc): https://github.com/apache/mesos/blob/master/src/tests/environment.cpp\r\n\r\nI'm not sure we'll be able to write a good guideline here, other than just generally explaining how tests can be filtered for various reasons and then relying on contributors / reviewers / CI to make sure the appropriate ones are run.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/614808981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/616714632","html_url":"https://github.com/apache/mesos/pull/359#issuecomment-616714632","issue_url":"https://api.github.com/repos/apache/mesos/issues/359","id":616714632,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjcxNDYzMg==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-20T17:53:27Z","updated_at":"2020-04-20T17:53:27Z","author_association":"CONTRIBUTOR","body":"Looks good, adjusted the commit description a bit and pushed this.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/616714632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/619805494","html_url":"https://github.com/apache/mesos/pull/360#issuecomment-619805494","issue_url":"https://api.github.com/repos/apache/mesos/issues/360","id":619805494,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTgwNTQ5NA==","user":{"login":"akornatskyy","id":13451015,"node_id":"MDQ6VXNlcjEzNDUxMDE1","avatar_url":"https://avatars.githubusercontent.com/u/13451015?v=4","gravatar_id":"","url":"https://api.github.com/users/akornatskyy","html_url":"https://github.com/akornatskyy","followers_url":"https://api.github.com/users/akornatskyy/followers","following_url":"https://api.github.com/users/akornatskyy/following{/other_user}","gists_url":"https://api.github.com/users/akornatskyy/gists{/gist_id}","starred_url":"https://api.github.com/users/akornatskyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akornatskyy/subscriptions","organizations_url":"https://api.github.com/users/akornatskyy/orgs","repos_url":"https://api.github.com/users/akornatskyy/repos","events_url":"https://api.github.com/users/akornatskyy/events{/privacy}","received_events_url":"https://api.github.com/users/akornatskyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T07:59:51Z","updated_at":"2020-04-27T07:59:51Z","author_association":"CONTRIBUTOR","body":"@asekretenko @greggomann Fixed mesos java bindings for cmake by reversing dependency so `libmesos-java` depends on `libmesos`.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/619805494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/619808069","html_url":"https://github.com/apache/mesos/pull/361#issuecomment-619808069","issue_url":"https://api.github.com/repos/apache/mesos/issues/361","id":619808069,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTgwODA2OQ==","user":{"login":"akornatskyy","id":13451015,"node_id":"MDQ6VXNlcjEzNDUxMDE1","avatar_url":"https://avatars.githubusercontent.com/u/13451015?v=4","gravatar_id":"","url":"https://api.github.com/users/akornatskyy","html_url":"https://github.com/akornatskyy","followers_url":"https://api.github.com/users/akornatskyy/followers","following_url":"https://api.github.com/users/akornatskyy/following{/other_user}","gists_url":"https://api.github.com/users/akornatskyy/gists{/gist_id}","starred_url":"https://api.github.com/users/akornatskyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akornatskyy/subscriptions","organizations_url":"https://api.github.com/users/akornatskyy/orgs","repos_url":"https://api.github.com/users/akornatskyy/repos","events_url":"https://api.github.com/users/akornatskyy/events{/privacy}","received_events_url":"https://api.github.com/users/akornatskyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T08:04:44Z","updated_at":"2020-04-27T08:04:44Z","author_association":"CONTRIBUTOR","body":"@asekretenko @greggomann : this is another improvement to cmake to be able to build with a custom location of boost-libs, curl and libseccomp.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/619808069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/624897538","html_url":"https://github.com/apache/mesos/pull/362#issuecomment-624897538","issue_url":"https://api.github.com/repos/apache/mesos/issues/362","id":624897538,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDg5NzUzOA==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-06T21:21:07Z","updated_at":"2020-05-06T21:21:07Z","author_association":"CONTRIBUTOR","body":"@vinodkone \r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/624897538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/624911683","html_url":"https://github.com/apache/mesos/pull/362#issuecomment-624911683","issue_url":"https://api.github.com/repos/apache/mesos/issues/362","id":624911683,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDkxMTY4Mw==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-06T21:55:05Z","updated_at":"2020-05-06T21:55:05Z","author_association":"CONTRIBUTOR","body":"I'll let @abudnik and @qianzhangxa review this since they have the most context.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/624911683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/624914041","html_url":"https://github.com/apache/mesos/pull/362#issuecomment-624914041","issue_url":"https://api.github.com/repos/apache/mesos/issues/362","id":624914041,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDkxNDA0MQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-06T22:01:02Z","updated_at":"2020-05-06T22:01:02Z","author_association":"CONTRIBUTOR","body":"Note that this might help us alleviate https://issues.apache.org/jira/browse/MESOS-8038\r\n\r\nIf a process cannot be killed - e.g. stuck in uninterruptible D state - the cgroup destruction will fail with `EBUSY`, until the cgroup destruction timeout.\r\n\r\nAnd since https://issues.apache.org/jira/browse/MESOS-9148 made it configurable via the agent's `--cgroups_destroy_timeout`, together with this patch it would make it possible to specify a very long/infinite timeout, this should allow us to effectively wait forever instead of optimistically releasing resources.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/624914041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/625436409","html_url":"https://github.com/apache/mesos/pull/362#issuecomment-625436409","issue_url":"https://api.github.com/repos/apache/mesos/issues/362","id":625436409,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTQzNjQwOQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-07T18:55:55Z","updated_at":"2020-05-07T18:55:55Z","author_association":"CONTRIBUTOR","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/625436409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/629823610","html_url":"https://github.com/apache/mesos/pull/364#issuecomment-629823610","issue_url":"https://api.github.com/repos/apache/mesos/issues/364","id":629823610,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTgyMzYxMA==","user":{"login":"csaltos","id":32456,"node_id":"MDQ6VXNlcjMyNDU2","avatar_url":"https://avatars.githubusercontent.com/u/32456?v=4","gravatar_id":"","url":"https://api.github.com/users/csaltos","html_url":"https://github.com/csaltos","followers_url":"https://api.github.com/users/csaltos/followers","following_url":"https://api.github.com/users/csaltos/following{/other_user}","gists_url":"https://api.github.com/users/csaltos/gists{/gist_id}","starred_url":"https://api.github.com/users/csaltos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/csaltos/subscriptions","organizations_url":"https://api.github.com/users/csaltos/orgs","repos_url":"https://api.github.com/users/csaltos/repos","events_url":"https://api.github.com/users/csaltos/events{/privacy}","received_events_url":"https://api.github.com/users/csaltos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-17T16:22:56Z","updated_at":"2020-05-17T16:22:56Z","author_association":"NONE","body":"The issue at Jira -> https://issues.apache.org/jira/browse/MESOS-10129","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/629823610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/630503075","html_url":"https://github.com/apache/mesos/pull/365#issuecomment-630503075","issue_url":"https://api.github.com/repos/apache/mesos/issues/365","id":630503075,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMDUwMzA3NQ==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-19T00:23:05Z","updated_at":"2020-05-19T00:23:05Z","author_association":"CONTRIBUTOR","body":"@Digital-Chaos thanks for fixing this!\r\n\r\nWhoops, looks like we don't have any unit tests for os::memory()! Could you add some here to ensure this fix is covered by tests:\r\n https://github.com/apache/mesos/blob/1.9.0/3rdparty/stout/tests/os_tests.cpp","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/630503075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/631178968","html_url":"https://github.com/apache/mesos/pull/365#issuecomment-631178968","issue_url":"https://api.github.com/repos/apache/mesos/issues/365","id":631178968,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTE3ODk2OA==","user":{"login":"Digital-Chaos","id":7542428,"node_id":"MDQ6VXNlcjc1NDI0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/7542428?v=4","gravatar_id":"","url":"https://api.github.com/users/Digital-Chaos","html_url":"https://github.com/Digital-Chaos","followers_url":"https://api.github.com/users/Digital-Chaos/followers","following_url":"https://api.github.com/users/Digital-Chaos/following{/other_user}","gists_url":"https://api.github.com/users/Digital-Chaos/gists{/gist_id}","starred_url":"https://api.github.com/users/Digital-Chaos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Digital-Chaos/subscriptions","organizations_url":"https://api.github.com/users/Digital-Chaos/orgs","repos_url":"https://api.github.com/users/Digital-Chaos/repos","events_url":"https://api.github.com/users/Digital-Chaos/events{/privacy}","received_events_url":"https://api.github.com/users/Digital-Chaos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T01:27:45Z","updated_at":"2020-05-21T09:33:11Z","author_association":"CONTRIBUTOR","body":"Added a basic test for os::memory() as requested. I wasn't sure how to verify the adding of the inactive pages to the free pages, but at least there is more coverage than before!  :-)\r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/631178968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/631787330","html_url":"https://github.com/apache/mesos/pull/365#issuecomment-631787330","issue_url":"https://api.github.com/repos/apache/mesos/issues/365","id":631787330,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTc4NzMzMA==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T23:17:49Z","updated_at":"2020-05-20T23:17:49Z","author_association":"CONTRIBUTOR","body":"@Digital-Chaos Thanks! Looked through the sysctl related documentation and the code makes sense to me. I will ship this as is.\r\n\r\nHowever, I wonder why the code bothers with the lookup by name -> mib transformation and doesn't just do by name (slower) or by mib (faster) entirely:\r\n\r\n```\r\nsysctlbyname(\"vm.swap_info.0\", ...)\r\nsysctlbyname(\"vm.swap_info.1\", ...)\r\n// until ENOENT\r\n\r\n// Or:\r\nint mib[3] = { CTL_VM, XXX, 0 }; // Oh.. I can't find something that looks like swap_info,\r\n                                 // is there not a mib constant we can use for every name we can lookup?\r\nsysctl(...);\r\n```\r\n\r\n(This applies to the earlier sysctlbyname calls in this function as well). Is it because not all entries have mib constants that we can just fill in without lookup?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/631787330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/632641435","html_url":"https://github.com/apache/mesos/pull/365#issuecomment-632641435","issue_url":"https://api.github.com/repos/apache/mesos/issues/365","id":632641435,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjY0MTQzNQ==","user":{"login":"Digital-Chaos","id":7542428,"node_id":"MDQ6VXNlcjc1NDI0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/7542428?v=4","gravatar_id":"","url":"https://api.github.com/users/Digital-Chaos","html_url":"https://github.com/Digital-Chaos","followers_url":"https://api.github.com/users/Digital-Chaos/followers","following_url":"https://api.github.com/users/Digital-Chaos/following{/other_user}","gists_url":"https://api.github.com/users/Digital-Chaos/gists{/gist_id}","starred_url":"https://api.github.com/users/Digital-Chaos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Digital-Chaos/subscriptions","organizations_url":"https://api.github.com/users/Digital-Chaos/orgs","repos_url":"https://api.github.com/users/Digital-Chaos/repos","events_url":"https://api.github.com/users/Digital-Chaos/events{/privacy}","received_events_url":"https://api.github.com/users/Digital-Chaos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-22T11:22:41Z","updated_at":"2020-05-22T11:22:41Z","author_association":"CONTRIBUTOR","body":"> Is it because not all entries have mib constants that we can just fill in without lookup?\r\n\r\nYes, I believe that is the case.\r\n\r\nThe other way I have seen this done is to call sysctlnametomib() once in some sort of initialisation and hold the mib somewhere to use later in any calls to sysctl(). \r\ne.g. https://github.com/hishamhm/htop/blob/master/freebsd/FreeBSDProcessList.c\r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/632641435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/651151402","html_url":"https://github.com/apache/mesos/pull/366#issuecomment-651151402","issue_url":"https://api.github.com/repos/apache/mesos/issues/366","id":651151402,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTE1MTQwMg==","user":{"login":"asekretenko","id":8353245,"node_id":"MDQ6VXNlcjgzNTMyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/8353245?v=4","gravatar_id":"","url":"https://api.github.com/users/asekretenko","html_url":"https://github.com/asekretenko","followers_url":"https://api.github.com/users/asekretenko/followers","following_url":"https://api.github.com/users/asekretenko/following{/other_user}","gists_url":"https://api.github.com/users/asekretenko/gists{/gist_id}","starred_url":"https://api.github.com/users/asekretenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asekretenko/subscriptions","organizations_url":"https://api.github.com/users/asekretenko/orgs","repos_url":"https://api.github.com/users/asekretenko/repos","events_url":"https://api.github.com/users/asekretenko/events{/privacy}","received_events_url":"https://api.github.com/users/asekretenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T14:16:52Z","updated_at":"2020-06-29T14:16:52Z","author_association":"MEMBER","body":"@edi33416 Thank you for filing this!\r\nI have managed to find the actual fix in CMake (see the link I added to the commit message) which triggers the issue. This explains how things \"worked\" before.\r\n\r\nWill backport this fix into 1.8/1.9/1.10.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/651151402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/651223835","html_url":"https://github.com/apache/mesos/pull/366#issuecomment-651223835","issue_url":"https://api.github.com/repos/apache/mesos/issues/366","id":651223835,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTIyMzgzNQ==","user":{"login":"edi33416","id":3812633,"node_id":"MDQ6VXNlcjM4MTI2MzM=","avatar_url":"https://avatars.githubusercontent.com/u/3812633?v=4","gravatar_id":"","url":"https://api.github.com/users/edi33416","html_url":"https://github.com/edi33416","followers_url":"https://api.github.com/users/edi33416/followers","following_url":"https://api.github.com/users/edi33416/following{/other_user}","gists_url":"https://api.github.com/users/edi33416/gists{/gist_id}","starred_url":"https://api.github.com/users/edi33416/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edi33416/subscriptions","organizations_url":"https://api.github.com/users/edi33416/orgs","repos_url":"https://api.github.com/users/edi33416/repos","events_url":"https://api.github.com/users/edi33416/events{/privacy}","received_events_url":"https://api.github.com/users/edi33416/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T16:20:56Z","updated_at":"2020-06-29T16:20:56Z","author_association":"CONTRIBUTOR","body":"Nice! Thanks for your help\r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/651223835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/697176988","html_url":"https://github.com/apache/mesos/pull/367#issuecomment-697176988","issue_url":"https://api.github.com/repos/apache/mesos/issues/367","id":697176988,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzE3Njk4OA==","user":{"login":"Lqp1","id":2649014,"node_id":"MDQ6VXNlcjI2NDkwMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2649014?v=4","gravatar_id":"","url":"https://api.github.com/users/Lqp1","html_url":"https://github.com/Lqp1","followers_url":"https://api.github.com/users/Lqp1/followers","following_url":"https://api.github.com/users/Lqp1/following{/other_user}","gists_url":"https://api.github.com/users/Lqp1/gists{/gist_id}","starred_url":"https://api.github.com/users/Lqp1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lqp1/subscriptions","organizations_url":"https://api.github.com/users/Lqp1/orgs","repos_url":"https://api.github.com/users/Lqp1/repos","events_url":"https://api.github.com/users/Lqp1/events{/privacy}","received_events_url":"https://api.github.com/users/Lqp1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-23T07:06:35Z","updated_at":"2020-09-23T07:06:35Z","author_association":"CONTRIBUTOR","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/697176988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/723061813","html_url":"https://github.com/apache/mesos/pull/369#issuecomment-723061813","issue_url":"https://api.github.com/repos/apache/mesos/issues/369","id":723061813,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMzA2MTgxMw==","user":{"login":"ntsvetanov","id":8351059,"node_id":"MDQ6VXNlcjgzNTEwNTk=","avatar_url":"https://avatars.githubusercontent.com/u/8351059?v=4","gravatar_id":"","url":"https://api.github.com/users/ntsvetanov","html_url":"https://github.com/ntsvetanov","followers_url":"https://api.github.com/users/ntsvetanov/followers","following_url":"https://api.github.com/users/ntsvetanov/following{/other_user}","gists_url":"https://api.github.com/users/ntsvetanov/gists{/gist_id}","starred_url":"https://api.github.com/users/ntsvetanov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ntsvetanov/subscriptions","organizations_url":"https://api.github.com/users/ntsvetanov/orgs","repos_url":"https://api.github.com/users/ntsvetanov/repos","events_url":"https://api.github.com/users/ntsvetanov/events{/privacy}","received_events_url":"https://api.github.com/users/ntsvetanov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-06T12:44:43Z","updated_at":"2020-11-06T12:44:43Z","author_association":"CONTRIBUTOR","body":":) ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/723061813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/732492130","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-732492130","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":732492130,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjQ5MjEzMA==","user":{"login":"zorro786","id":6917299,"node_id":"MDQ6VXNlcjY5MTcyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6917299?v=4","gravatar_id":"","url":"https://api.github.com/users/zorro786","html_url":"https://github.com/zorro786","followers_url":"https://api.github.com/users/zorro786/followers","following_url":"https://api.github.com/users/zorro786/following{/other_user}","gists_url":"https://api.github.com/users/zorro786/gists{/gist_id}","starred_url":"https://api.github.com/users/zorro786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zorro786/subscriptions","organizations_url":"https://api.github.com/users/zorro786/orgs","repos_url":"https://api.github.com/users/zorro786/repos","events_url":"https://api.github.com/users/zorro786/events{/privacy}","received_events_url":"https://api.github.com/users/zorro786/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T23:50:25Z","updated_at":"2020-11-23T23:50:32Z","author_association":"CONTRIBUTOR","body":"Ran `make check` in Linux. `HttpServeTest.Discard` test seems flaky, it fails with or without this change.\r\nAlso verified agent-master registration/communication behind nginx proxy in a cluster.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/732492130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/737557425","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-737557425","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":737557425,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzU1NzQyNQ==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T23:27:26Z","updated_at":"2020-12-02T23:27:26Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, a couple of things, maybe @vinodkone or @asekretenko can have a look after these updates:\r\n\r\n* Can you follow the existing logic for the http client?  See: https://github.com/apache/mesos/blob/1.11.0/3rdparty/libprocess/src/http.cpp#L1092-L1108\r\n* Can you remove the extra .gitignore file? It's not related to this change and we like to keep our commits tidy with only a single logical change involved\r\n* Can you add or update one of the existing tests in libprocess?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/737557425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/738476472","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-738476472","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":738476472,"node_id":"MDEyOklzc3VlQ29tbWVudDczODQ3NjQ3Mg==","user":{"login":"zorro786","id":6917299,"node_id":"MDQ6VXNlcjY5MTcyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6917299?v=4","gravatar_id":"","url":"https://api.github.com/users/zorro786","html_url":"https://github.com/zorro786","followers_url":"https://api.github.com/users/zorro786/followers","following_url":"https://api.github.com/users/zorro786/following{/other_user}","gists_url":"https://api.github.com/users/zorro786/gists{/gist_id}","starred_url":"https://api.github.com/users/zorro786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zorro786/subscriptions","organizations_url":"https://api.github.com/users/zorro786/orgs","repos_url":"https://api.github.com/users/zorro786/repos","events_url":"https://api.github.com/users/zorro786/events{/privacy}","received_events_url":"https://api.github.com/users/zorro786/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T00:45:51Z","updated_at":"2020-12-04T00:45:51Z","author_association":"CONTRIBUTOR","body":"> * Can you follow the existing logic for the http client?  See: https://github.com/apache/mesos/blob/1.11.0/3rdparty/libprocess/src/http.cpp#L1092-L1108\r\n\r\nI find the existing logic redundant in this case, as `message.to.address` is an Inet address not a URL, which already includes an IP and port. `message.to.address` essentially includes the following code block already:\r\n\r\n```\r\n else if (request.url.ip.isSome()) {\r\n    headers[\"Host\"] = stringify(request.url.ip.get());\r\n  }\r\n// Add port for non-standard ports.\r\nif (request.url.port.isSome() &&\r\n      request.url.port != 80 &&\r\n      request.url.port != 443) {\r\n    headers[\"Host\"] += \":\" + stringify(request.url.port.get());\r\n  }\r\n```\r\nPlease let me know if you meant something else.\r\n\r\n> * Can you remove the extra .gitignore file? It's not related to this change and we like to keep our commits tidy with only a single logical change involved\r\n\r\nDone\r\n> * Can you add or update one of the existing tests in libprocess?\r\n\r\nDone\r\n\r\ncc: @vinodkone @asekretenko ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/738476472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/738489609","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-738489609","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":738489609,"node_id":"MDEyOklzc3VlQ29tbWVudDczODQ4OTYwOQ==","user":{"login":"zorro786","id":6917299,"node_id":"MDQ6VXNlcjY5MTcyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6917299?v=4","gravatar_id":"","url":"https://api.github.com/users/zorro786","html_url":"https://github.com/zorro786","followers_url":"https://api.github.com/users/zorro786/followers","following_url":"https://api.github.com/users/zorro786/following{/other_user}","gists_url":"https://api.github.com/users/zorro786/gists{/gist_id}","starred_url":"https://api.github.com/users/zorro786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zorro786/subscriptions","organizations_url":"https://api.github.com/users/zorro786/orgs","repos_url":"https://api.github.com/users/zorro786/repos","events_url":"https://api.github.com/users/zorro786/events{/privacy}","received_events_url":"https://api.github.com/users/zorro786/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T01:20:37Z","updated_at":"2020-12-04T01:20:37Z","author_association":"CONTRIBUTOR","body":"Is there any CI job which verifies build for my sanity? I haven't been successful in running all tests due to the flaky HttpServeTest.Discard","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/738489609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/742138197","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-742138197","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":742138197,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjEzODE5Nw==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T23:53:29Z","updated_at":"2020-12-09T23:53:29Z","author_association":"CONTRIBUTOR","body":"@zorro786  If you believe HTTPDiscard test is flaky you can run the test suite by filter out that test (e.g., make check GTEST_FILTER=-\"HttpServeTest.Discard\")","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/742138197/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/742224818","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-742224818","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":742224818,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjIyNDgxOA==","user":{"login":"zorro786","id":6917299,"node_id":"MDQ6VXNlcjY5MTcyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6917299?v=4","gravatar_id":"","url":"https://api.github.com/users/zorro786","html_url":"https://github.com/zorro786","followers_url":"https://api.github.com/users/zorro786/followers","following_url":"https://api.github.com/users/zorro786/following{/other_user}","gists_url":"https://api.github.com/users/zorro786/gists{/gist_id}","starred_url":"https://api.github.com/users/zorro786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zorro786/subscriptions","organizations_url":"https://api.github.com/users/zorro786/orgs","repos_url":"https://api.github.com/users/zorro786/repos","events_url":"https://api.github.com/users/zorro786/events{/privacy}","received_events_url":"https://api.github.com/users/zorro786/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-10T04:04:51Z","updated_at":"2020-12-10T04:05:09Z","author_association":"CONTRIBUTOR","body":"Thanks @vinodkone. I have run the tests on master branch in Ubuntu 16.04, two tests fail:\r\n`HttpServeTest.Discard` and `HttpServeTest.Pipelining`.\r\n\r\nSame tests fail on this PR change too. Rest all pass.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/742224818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/744636884","html_url":"https://github.com/apache/mesos/pull/371#issuecomment-744636884","issue_url":"https://api.github.com/repos/apache/mesos/issues/371","id":744636884,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDYzNjg4NA==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T18:48:15Z","updated_at":"2020-12-14T18:48:15Z","author_association":"CONTRIBUTOR","body":"LGTM. I merged it. Thanks for the fix @zorro786 ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/744636884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/745536760","html_url":"https://github.com/apache/mesos/pull/372#issuecomment-745536760","issue_url":"https://api.github.com/repos/apache/mesos/issues/372","id":745536760,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTUzNjc2MA==","user":{"login":"zorro786","id":6917299,"node_id":"MDQ6VXNlcjY5MTcyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6917299?v=4","gravatar_id":"","url":"https://api.github.com/users/zorro786","html_url":"https://github.com/zorro786","followers_url":"https://api.github.com/users/zorro786/followers","following_url":"https://api.github.com/users/zorro786/following{/other_user}","gists_url":"https://api.github.com/users/zorro786/gists{/gist_id}","starred_url":"https://api.github.com/users/zorro786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zorro786/subscriptions","organizations_url":"https://api.github.com/users/zorro786/orgs","repos_url":"https://api.github.com/users/zorro786/repos","events_url":"https://api.github.com/users/zorro786/events{/privacy}","received_events_url":"https://api.github.com/users/zorro786/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-15T20:07:39Z","updated_at":"2020-12-15T20:07:39Z","author_association":"CONTRIBUTOR","body":"@vinodkone This is a cherry pick for 1.7.x branch. Please merge when you get a chance.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/745536760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/745586895","html_url":"https://github.com/apache/mesos/pull/372#issuecomment-745586895","issue_url":"https://api.github.com/repos/apache/mesos/issues/372","id":745586895,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTU4Njg5NQ==","user":{"login":"vinodkone","id":48131,"node_id":"MDQ6VXNlcjQ4MTMx","avatar_url":"https://avatars.githubusercontent.com/u/48131?v=4","gravatar_id":"","url":"https://api.github.com/users/vinodkone","html_url":"https://github.com/vinodkone","followers_url":"https://api.github.com/users/vinodkone/followers","following_url":"https://api.github.com/users/vinodkone/following{/other_user}","gists_url":"https://api.github.com/users/vinodkone/gists{/gist_id}","starred_url":"https://api.github.com/users/vinodkone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinodkone/subscriptions","organizations_url":"https://api.github.com/users/vinodkone/orgs","repos_url":"https://api.github.com/users/vinodkone/repos","events_url":"https://api.github.com/users/vinodkone/events{/privacy}","received_events_url":"https://api.github.com/users/vinodkone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-15T21:44:54Z","updated_at":"2020-12-15T21:44:54Z","author_association":"CONTRIBUTOR","body":"@zorro786 1.7.x is technically EOL so we likely wont be making any releases off the branch. Do you still want it in 1.7.x? Also, if you are backporting this, we need backports to all the release branches that are still supported (as of today thats 1.9.x, 1.10.x, 1.11.x)","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/745586895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/747074060","html_url":"https://github.com/apache/mesos/pull/372#issuecomment-747074060","issue_url":"https://api.github.com/repos/apache/mesos/issues/372","id":747074060,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NzA3NDA2MA==","user":{"login":"zorro786","id":6917299,"node_id":"MDQ6VXNlcjY5MTcyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/6917299?v=4","gravatar_id":"","url":"https://api.github.com/users/zorro786","html_url":"https://github.com/zorro786","followers_url":"https://api.github.com/users/zorro786/followers","following_url":"https://api.github.com/users/zorro786/following{/other_user}","gists_url":"https://api.github.com/users/zorro786/gists{/gist_id}","starred_url":"https://api.github.com/users/zorro786/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zorro786/subscriptions","organizations_url":"https://api.github.com/users/zorro786/orgs","repos_url":"https://api.github.com/users/zorro786/repos","events_url":"https://api.github.com/users/zorro786/events{/privacy}","received_events_url":"https://api.github.com/users/zorro786/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-16T22:17:37Z","updated_at":"2020-12-16T22:17:37Z","author_association":"CONTRIBUTOR","body":"@vinodkone Yeah per discussion in Slack, we would like to backport this to 1.7.x. I have raised PRs for 1.9.x, 1.10.x and 1.11.x: https://github.com/apache/mesos/pull/373, https://github.com/apache/mesos/pull/374, https://github.com/apache/mesos/pull/375","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/747074060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/763711330","html_url":"https://github.com/apache/mesos/pull/376#issuecomment-763711330","issue_url":"https://api.github.com/repos/apache/mesos/issues/376","id":763711330,"node_id":"MDEyOklzc3VlQ29tbWVudDc2MzcxMTMzMA==","user":{"login":"undisputed-seraphim","id":4422996,"node_id":"MDQ6VXNlcjQ0MjI5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/4422996?v=4","gravatar_id":"","url":"https://api.github.com/users/undisputed-seraphim","html_url":"https://github.com/undisputed-seraphim","followers_url":"https://api.github.com/users/undisputed-seraphim/followers","following_url":"https://api.github.com/users/undisputed-seraphim/following{/other_user}","gists_url":"https://api.github.com/users/undisputed-seraphim/gists{/gist_id}","starred_url":"https://api.github.com/users/undisputed-seraphim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/undisputed-seraphim/subscriptions","organizations_url":"https://api.github.com/users/undisputed-seraphim/orgs","repos_url":"https://api.github.com/users/undisputed-seraphim/repos","events_url":"https://api.github.com/users/undisputed-seraphim/events{/privacy}","received_events_url":"https://api.github.com/users/undisputed-seraphim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-20T15:30:28Z","updated_at":"2021-01-20T15:30:28Z","author_association":"NONE","body":"Running into this issue compiling Mesos 1.11.0 on Ubuntu 20.04. Thanks for the fix.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/763711330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/765660842","html_url":"https://github.com/apache/mesos/pull/376#issuecomment-765660842","issue_url":"https://api.github.com/repos/apache/mesos/issues/376","id":765660842,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY2MDg0Mg==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T20:19:26Z","updated_at":"2021-01-22T20:19:26Z","author_association":"CONTRIBUTOR","body":"@bmahler maybe?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/765660842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/765691682","html_url":"https://github.com/apache/mesos/pull/376#issuecomment-765691682","issue_url":"https://api.github.com/repos/apache/mesos/issues/376","id":765691682,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTY5MTY4Mg==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T21:23:50Z","updated_at":"2021-01-22T21:23:50Z","author_association":"CONTRIBUTOR","body":"Merged, thanks for the fix.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/765691682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/766458127","html_url":"https://github.com/apache/mesos/pull/377#issuecomment-766458127","issue_url":"https://api.github.com/repos/apache/mesos/issues/377","id":766458127,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ1ODEyNw==","user":{"login":"bbannier","id":324957,"node_id":"MDQ6VXNlcjMyNDk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/324957?v=4","gravatar_id":"","url":"https://api.github.com/users/bbannier","html_url":"https://github.com/bbannier","followers_url":"https://api.github.com/users/bbannier/followers","following_url":"https://api.github.com/users/bbannier/following{/other_user}","gists_url":"https://api.github.com/users/bbannier/gists{/gist_id}","starred_url":"https://api.github.com/users/bbannier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbannier/subscriptions","organizations_url":"https://api.github.com/users/bbannier/orgs","repos_url":"https://api.github.com/users/bbannier/repos","events_url":"https://api.github.com/users/bbannier/events{/privacy}","received_events_url":"https://api.github.com/users/bbannier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T23:19:42Z","updated_at":"2021-01-24T23:19:42Z","author_association":"MEMBER","body":"Fixed by 4ce33ca..900d233.\r\n\r\n```\r\ncommit 900d23337c76824328340ca3d3151fb2f1c45ba7\r\nAuthor: Charles-Francois Natali <cf.natali@gmail.com>\r\nDate:   Sun Jan 24 17:15:34 2021 +0000\r\n\r\n    Added CAP_PERFMON, CAP_BPF and CAP_CHECKPOINT_RESTORE support.\r\n    \r\n    Part of fix for #10203.\r\n\r\ncommit 8b5bdb2fb0338c47ed61dbdbe0e4cc4d07386f74\r\nAuthor: Charles-Francois Natali <cf.natali@gmail.com>\r\nDate:   Sat Jan 23 18:51:57 2021 +0000\r\n\r\n    Fixed agent crash when kernel supports unknown capabilities.\r\n    \r\n    When capabilities are enabled, the capabilities initialisation code\r\n    would check that /proc/sys/kernel/cap_last_cap is less than\r\n    MAX_CAPABILITY, i.e. that the kernel doesn't support any capability the\r\n    code doesn't expect.  However the error message attempted to format\r\n    cap_last_cap value as a Capability enum, which would crash.\r\n    \r\n    Part of fix for #10203.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/766458127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/766530343","html_url":"https://github.com/apache/mesos/pull/377#issuecomment-766530343","issue_url":"https://api.github.com/repos/apache/mesos/issues/377","id":766530343,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUzMDM0Mw==","user":{"login":"jpeach","id":9917,"node_id":"MDQ6VXNlcjk5MTc=","avatar_url":"https://avatars.githubusercontent.com/u/9917?v=4","gravatar_id":"","url":"https://api.github.com/users/jpeach","html_url":"https://github.com/jpeach","followers_url":"https://api.github.com/users/jpeach/followers","following_url":"https://api.github.com/users/jpeach/following{/other_user}","gists_url":"https://api.github.com/users/jpeach/gists{/gist_id}","starred_url":"https://api.github.com/users/jpeach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpeach/subscriptions","organizations_url":"https://api.github.com/users/jpeach/orgs","repos_url":"https://api.github.com/users/jpeach/repos","events_url":"https://api.github.com/users/jpeach/events{/privacy}","received_events_url":"https://api.github.com/users/jpeach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T04:23:33Z","updated_at":"2021-01-25T04:23:33Z","author_association":"CONTRIBUTOR","body":"LGTM too FWIW 👍 ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/766530343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/768000124","html_url":"https://github.com/apache/mesos/pull/376#issuecomment-768000124","issue_url":"https://api.github.com/repos/apache/mesos/issues/376","id":768000124,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODAwMDEyNA==","user":{"login":"ozars","id":13993759,"node_id":"MDQ6VXNlcjEzOTkzNzU5","avatar_url":"https://avatars.githubusercontent.com/u/13993759?v=4","gravatar_id":"","url":"https://api.github.com/users/ozars","html_url":"https://github.com/ozars","followers_url":"https://api.github.com/users/ozars/followers","following_url":"https://api.github.com/users/ozars/following{/other_user}","gists_url":"https://api.github.com/users/ozars/gists{/gist_id}","starred_url":"https://api.github.com/users/ozars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozars/subscriptions","organizations_url":"https://api.github.com/users/ozars/orgs","repos_url":"https://api.github.com/users/ozars/repos","events_url":"https://api.github.com/users/ozars/events{/privacy}","received_events_url":"https://api.github.com/users/ozars/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T03:40:55Z","updated_at":"2021-01-27T03:40:55Z","author_association":"CONTRIBUTOR","body":"Thanks.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/768000124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/769397228","html_url":"https://github.com/apache/mesos/pull/379#issuecomment-769397228","issue_url":"https://api.github.com/repos/apache/mesos/issues/379","id":769397228,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM5NzIyOA==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T21:10:35Z","updated_at":"2021-01-28T21:10:35Z","author_association":"CONTRIBUTOR","body":"Merged, thanks for the fix","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/769397228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/772930677","html_url":"https://github.com/apache/mesos/pull/381#issuecomment-772930677","issue_url":"https://api.github.com/repos/apache/mesos/issues/381","id":772930677,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjkzMDY3Nw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T00:28:03Z","updated_at":"2021-02-04T00:28:03Z","author_association":"CONTRIBUTOR","body":"Ping?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/772930677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/773595212","html_url":"https://github.com/apache/mesos/pull/380#issuecomment-773595212","issue_url":"https://api.github.com/repos/apache/mesos/issues/380","id":773595212,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzU5NTIxMg==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T20:49:28Z","updated_at":"2021-02-04T20:49:28Z","author_association":"CONTRIBUTOR","body":"@bmahler ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/773595212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/781592231","html_url":"https://github.com/apache/mesos/pull/381#issuecomment-781592231","issue_url":"https://api.github.com/repos/apache/mesos/issues/381","id":781592231,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTU5MjIzMQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T19:45:43Z","updated_at":"2021-02-18T19:45:43Z","author_association":"CONTRIBUTOR","body":"@qianzhangxa @asekretenko \r\nSince you mentioned being still interested in the project it'd be great if you could review :).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/781592231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/781592423","html_url":"https://github.com/apache/mesos/pull/380#issuecomment-781592423","issue_url":"https://api.github.com/repos/apache/mesos/issues/380","id":781592423,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTU5MjQyMw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T19:46:04Z","updated_at":"2021-02-18T19:46:04Z","author_association":"CONTRIBUTOR","body":"@qianzhangxa @asekretenko ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/781592423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/788636449","html_url":"https://github.com/apache/mesos/pull/381#issuecomment-788636449","issue_url":"https://api.github.com/repos/apache/mesos/issues/381","id":788636449,"node_id":"MDEyOklzc3VlQ29tbWVudDc4ODYzNjQ0OQ==","user":{"login":"asekretenko","id":8353245,"node_id":"MDQ6VXNlcjgzNTMyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/8353245?v=4","gravatar_id":"","url":"https://api.github.com/users/asekretenko","html_url":"https://github.com/asekretenko","followers_url":"https://api.github.com/users/asekretenko/followers","following_url":"https://api.github.com/users/asekretenko/following{/other_user}","gists_url":"https://api.github.com/users/asekretenko/gists{/gist_id}","starred_url":"https://api.github.com/users/asekretenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asekretenko/subscriptions","organizations_url":"https://api.github.com/users/asekretenko/orgs","repos_url":"https://api.github.com/users/asekretenko/repos","events_url":"https://api.github.com/users/asekretenko/events{/privacy}","received_events_url":"https://api.github.com/users/asekretenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T05:58:07Z","updated_at":"2021-03-02T05:58:07Z","author_association":"MEMBER","body":"Looks good to me; merged. Thanks for finding and fixing this!","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/788636449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/830841494","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-830841494","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":830841494,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDg0MTQ5NA==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-02T17:17:34Z","updated_at":"2021-05-02T17:17:34Z","author_association":"CONTRIBUTOR","body":"Does we have a list of features we want to see in the mesos_cli? I'm also planning to develope a plugin for our kubernetes framework. ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/830841494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/831070252","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-831070252","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":831070252,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTA3MDI1Mg==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-03T07:12:26Z","updated_at":"2021-05-03T07:12:26Z","author_association":"CONTRIBUTOR","body":"@asekretenko I'm done now. U can review again. :-) ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/831070252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/841736466","html_url":"https://github.com/apache/mesos/pull/385#issuecomment-841736466","issue_url":"https://api.github.com/repos/apache/mesos/issues/385","id":841736466,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MTczNjQ2Ng==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-15T22:56:38Z","updated_at":"2021-05-15T22:56:38Z","author_association":"CONTRIBUTOR","body":"@asekretenko Would it be possible to revert it?\r\nSince merging it I've noticed that I get some tests failing randomly - it's really strange, they are cgroup isolator tests which seem completely unrelated, e.g.:\r\n\r\n```\r\n[ RUN      ] MesosContainerizerTest.StatusWithContainerID\r\n../../src/tests/mesos.cpp:736: Failure\r\nFailed to wait 15secs for cgroups::destroy(hierarchy, cgroup)\r\n-----------------------------------------------------------\r\nWe're very sorry but we can't seem to destroy existing\r\ncgroups that we likely created as part of an earlier\r\ninvocation of the tests. Please manually destroy the cgroup\r\nat '/sys/fs/cgroup/memory/mesos_test_92a75d38-a749-4894-9746-79f8b3590b7c/57721582-cd4d-43a7-8fcf-0b57e26a7987' by first\r\nmanually killing all the processes found in the file at '/sys/fs/cgroup/memory/mesos_test_92a75d38-a749-4894-9746-79f8b3590b7c/57721582-cd4d-43a7-8fcf-0b57e26a7987/tasks'\r\n-----------------------------------------------------------\r\n../../src/tests/mesos.cpp:782: Failure\r\nFailed to wait 15secs for cgroups::destroy(hierarchy, cgroup)\r\n[  FAILED  ] MesosContainerizerTest.StatusWithContainerID (30062 ms)\r\n```\r\n\r\nI have no idea what's going on, the only explanation I can see is that somehow before because these variables where not initialised they were pretty much always `true` (non-0 bool) and somehow the tests might depend on it.\r\nI'll try to understand what causes it but in the meantime probably best to revert.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/841736466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/841784763","html_url":"https://github.com/apache/mesos/pull/385#issuecomment-841784763","issue_url":"https://api.github.com/repos/apache/mesos/issues/385","id":841784763,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MTc4NDc2Mw==","user":{"login":"asekretenko","id":8353245,"node_id":"MDQ6VXNlcjgzNTMyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/8353245?v=4","gravatar_id":"","url":"https://api.github.com/users/asekretenko","html_url":"https://github.com/asekretenko","followers_url":"https://api.github.com/users/asekretenko/followers","following_url":"https://api.github.com/users/asekretenko/following{/other_user}","gists_url":"https://api.github.com/users/asekretenko/gists{/gist_id}","starred_url":"https://api.github.com/users/asekretenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asekretenko/subscriptions","organizations_url":"https://api.github.com/users/asekretenko/orgs","repos_url":"https://api.github.com/users/asekretenko/repos","events_url":"https://api.github.com/users/asekretenko/events{/privacy}","received_events_url":"https://api.github.com/users/asekretenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-16T08:13:42Z","updated_at":"2021-05-16T08:13:42Z","author_association":"MEMBER","body":"@cf-natali I'm also observing this on some platforms in an internal CI; reverted until further investigation.\r\n\r\nOne more note: after looking at the code that makes use of those attributes more carefully, I'm realizing that our tests only work by miracle: the authorization callbacks that can be cleared both by `~Master()` and by `~Slave()` belong to global libprocess state. Given that we definitely have tests that are destroying slaves and masters in the middle of the test, I'm now suprrised how this stuff works at all... most likely, we just don't have tests that both rely on authn callbacks and destroy a master/an agent in the middle. Not sure if this story has any relation to the cgroup destruction failure, though.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/841784763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/841839862","html_url":"https://github.com/apache/mesos/pull/385#issuecomment-841839862","issue_url":"https://api.github.com/repos/apache/mesos/issues/385","id":841839862,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MTgzOTg2Mg==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-16T16:22:43Z","updated_at":"2021-05-16T16:22:43Z","author_association":"CONTRIBUTOR","body":"Oh damn, I had a look and it looks like the cgroup is a separate problem, which looks like a kernel bug...\r\nI'll dig.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/841839862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842074878","html_url":"https://github.com/apache/mesos/pull/384#issuecomment-842074878","issue_url":"https://api.github.com/repos/apache/mesos/issues/384","id":842074878,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjA3NDg3OA==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T07:19:36Z","updated_at":"2021-05-17T07:19:36Z","author_association":"CONTRIBUTOR","body":"For me it looks fine. How about @asekretenko ?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842074878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842080959","html_url":"https://github.com/apache/mesos/pull/387#issuecomment-842080959","issue_url":"https://api.github.com/repos/apache/mesos/issues/387","id":842080959,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjA4MDk1OQ==","user":{"login":"asekretenko","id":8353245,"node_id":"MDQ6VXNlcjgzNTMyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/8353245?v=4","gravatar_id":"","url":"https://api.github.com/users/asekretenko","html_url":"https://github.com/asekretenko","followers_url":"https://api.github.com/users/asekretenko/followers","following_url":"https://api.github.com/users/asekretenko/following{/other_user}","gists_url":"https://api.github.com/users/asekretenko/gists{/gist_id}","starred_url":"https://api.github.com/users/asekretenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asekretenko/subscriptions","organizations_url":"https://api.github.com/users/asekretenko/orgs","repos_url":"https://api.github.com/users/asekretenko/repos","events_url":"https://api.github.com/users/asekretenko/events{/privacy}","received_events_url":"https://api.github.com/users/asekretenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T07:27:50Z","updated_at":"2021-05-17T07:29:45Z","author_association":"MEMBER","body":"@cf-natali It would help readers if the commit message made it clear that the issue is only triggered by recent linux headers (something in line of \"Fixed compilation against linux 5.0+ capabilities.h\" - I'm not sure which exact kernel version introduced them, please check that). Otherwise, looks good to me. \r\n\r\nGreat that you caught this before releasing this code! Otherwise, this rename in `proto`s would be potentially breaking users of json APIs (due to how our json deserialization uses protobuf reflection).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842080959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842090331","html_url":"https://github.com/apache/mesos/pull/387#issuecomment-842090331","issue_url":"https://api.github.com/repos/apache/mesos/issues/387","id":842090331,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjA5MDMzMQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T07:40:05Z","updated_at":"2021-05-17T07:40:05Z","author_association":"CONTRIBUTOR","body":"> @cf-natali It would help readers if the commit message made it clear that the issue is only triggered by recent linux headers (something in line of \"Fixed compilation against linux 5.0+ capabilities.h\" - I'm not sure which exact kernel version introduced them, please check that). Otherwise, looks good to me.\r\n\r\nDone!","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842090331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842091364","html_url":"https://github.com/apache/mesos/pull/387#issuecomment-842091364","issue_url":"https://api.github.com/repos/apache/mesos/issues/387","id":842091364,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjA5MTM2NA==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T07:41:34Z","updated_at":"2021-05-17T07:41:34Z","author_association":"CONTRIBUTOR","body":"> Great that you caught this before releasing this code! Otherwise, this rename in protos would be potentially breaking users of json APIs (due to how our json deserialization uses protobuf reflection).\r\n\r\nYeah, although it was my fault in the first place, at the time I didn't have access to such a recent kernel/libc, so couldn't properly test it.\r\nIt'd help if we had more recent/varied buildbots.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842091364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842561741","html_url":"https://github.com/apache/mesos/pull/384#issuecomment-842561741","issue_url":"https://api.github.com/repos/apache/mesos/issues/384","id":842561741,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjU2MTc0MQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T19:07:01Z","updated_at":"2021-05-17T19:07:01Z","author_association":"CONTRIBUTOR","body":"FWIW it's breaking other things:\r\n```\r\n[ RUN      ] HealthCheckTest.ROOT_HealthyTaskWithContainerImage\r\n../../src/tests/health_check_tests.cpp:505: Failure\r\n(testImage).failure(): Failed to create docker test image rootfs: Failed to parse ld.so cache: Invalid format\r\n[  FAILED  ] HealthCheckTest.ROOT_HealthyTaskWithContainerImage (26 ms)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842561741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842693833","html_url":"https://github.com/apache/mesos/pull/385#issuecomment-842693833","issue_url":"https://api.github.com/repos/apache/mesos/issues/385","id":842693833,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjY5MzgzMw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T22:54:47Z","updated_at":"2021-05-17T22:54:47Z","author_association":"CONTRIBUTOR","body":"Found the cause of the cgroup issue: https://github.com/apache/mesos/pull/388\r\nKernel update triggering a bug in the cgroup tasks killing.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842693833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842695262","html_url":"https://github.com/apache/mesos/pull/388#issuecomment-842695262","issue_url":"https://api.github.com/repos/apache/mesos/issues/388","id":842695262,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MjY5NTI2Mg==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-17T22:58:08Z","updated_at":"2021-05-17T22:58:08Z","author_association":"CONTRIBUTOR","body":"Also maybe @abudnik if he's still willing to review cgroup code :).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/842695262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/843419263","html_url":"https://github.com/apache/mesos/pull/386#issuecomment-843419263","issue_url":"https://api.github.com/repos/apache/mesos/issues/386","id":843419263,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MzQxOTI2Mw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-18T18:20:18Z","updated_at":"2021-05-18T18:20:18Z","author_association":"CONTRIBUTOR","body":"@bmahler , since you seem to still review some MRs :).","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/843419263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/845580535","html_url":"https://github.com/apache/mesos/pull/386#issuecomment-845580535","issue_url":"https://api.github.com/repos/apache/mesos/issues/386","id":845580535,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTU4MDUzNQ==","user":{"login":"bmahler","id":606213,"node_id":"MDQ6VXNlcjYwNjIxMw==","avatar_url":"https://avatars.githubusercontent.com/u/606213?v=4","gravatar_id":"","url":"https://api.github.com/users/bmahler","html_url":"https://github.com/bmahler","followers_url":"https://api.github.com/users/bmahler/followers","following_url":"https://api.github.com/users/bmahler/following{/other_user}","gists_url":"https://api.github.com/users/bmahler/gists{/gist_id}","starred_url":"https://api.github.com/users/bmahler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmahler/subscriptions","organizations_url":"https://api.github.com/users/bmahler/orgs","repos_url":"https://api.github.com/users/bmahler/repos","events_url":"https://api.github.com/users/bmahler/events{/privacy}","received_events_url":"https://api.github.com/users/bmahler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T01:05:38Z","updated_at":"2021-05-21T01:05:38Z","author_association":"CONTRIBUTOR","body":"Thanks for tackling this. @ipronin would be a good reviewer here but to start I think this commit needs more documentation flushed out to help reviewers (i.e. what is the strategy for fixing this? is it backwards compatible? what happens when it reads old overflowed keys? etc)\r\n\r\nHere is a private commit from @ipronin for documentation comparison, although note that it uses a different approach that is backwards incompatible and there's another commit with a rekey tool that needs to be run. For an upstream fix, we should try to figure out a backwards compatible way to fix it:\r\n\r\n```\r\nBACKWARDS INCOMPATIBLE: Fixed replicated log key encoding.\r\n\r\nLevelDB keys used by the replicated log storage implementation are\r\nunsigned 64 bit integer log positions serialized as strings and padded\r\nwith zeroes up to a fixed key size. The current encoding implementation\r\nis incorrect because it uses the %d formatter that expects a signed 32\r\nbit integer. It also limits the key size to 10 digits which can fit\r\nUINT32_MAX but isn't enough for UINT64_MAX.\r\n\r\nBecause of this bug the possible key range is reduced, and the keys can\r\nbecome negative affecting their order. Key overflow can also result in\r\nthe replica's METADATA record (position 0) being overwritten, which in\r\nturn may cause data loss.\r\n\r\nWe can fix this by using proper formatting rules in the key encoding\r\nroutine. Note that this change is not backwards compatible. The updated\r\nstorage implementation can recover the state of the old DB because it\r\ndoesn't rely on key encoding for it. But it is unable to read or delete\r\nany positions with incorrectly encoded keys from the DB. For an update\r\nthe DB either needs to be wiped and reinitialized or migrated to the new\r\nkey encoding. A tool for DB rekeying will be introduced in another\r\npatch.\r\n\r\nUpgrade option 1, perform a rolling upgrade:\r\n\r\n1. Stop old master\r\n2. Wipe DB directory\r\n3. Start new master with the fix, wait until the replica catches up\r\n4. Repeat for all masters\r\n\r\nUpgrade option 2, use the log re-key tool:\r\n\r\n1. Stop old master\r\n2. Run `mesos-log rekey` tool (see instructions in subsequent patch)\r\n3. Start new master with the fix\r\n4. Repeat for all masters\r\n\r\ndiff --git a/src/log/leveldb.cpp b/src/log/leveldb.cpp\r\nindex fa6088e..b8fc8e9 100644\r\n--- a/src/log/leveldb.cpp\r\n+++ b/src/log/leveldb.cpp\r\n@@ -100,7 +100,11 @@ static string encode(uint64_t position, bool adjust = true)\r\n   // stream.WriteVarint64(position);\r\n   // return s;\r\n \r\n-  Try<string> s = strings::format(\"%.*d\", 10, position);\r\n+  // Pad to 20 characters to maintain key order with the bytewise\r\n+  // comparator while fitting UINT64_MAX (18,446,744,073,709,551,615).\r\n+  // Note that this is incompatible with the encoding used in version\r\n+  // 1.11 and older.\r\n+  Try<string> s = strings::format(\"%.*\" PRIu64, 20, position);\r\n   CHECK_SOME(s);\r\n   return s.get();\r\n }\r\ndiff --git a/src/tests/log_tests.cpp b/src/tests/log_tests.cpp\r\nindex a8980e3..68d5f0d 100644\r\n--- a/src/tests/log_tests.cpp\r\n+++ b/src/tests/log_tests.cpp\r\n@@ -321,6 +321,51 @@ TYPED_TEST(LogStorageTest, TruncateWithManyHoles)\r\n }\r\n \r\n \r\n+// Regression test that verifies that log positions outside of the\r\n+// uint32_t range are properly encoded and do not cause data loss. See\r\n+// MESOS-10216 for details.\r\n+TYPED_TEST(LogStorageTest, IntPositionOverflow)\r\n+{\r\n+  Owned<TypeParam> storage(new TypeParam());\r\n+  Try<Storage::State> state = storage->restore(os::getcwd() + \"/.log\");\r\n+  ASSERT_SOME(state);\r\n+  EXPECT_EQ(Metadata::EMPTY, state->metadata.status());\r\n+  EXPECT_EQ(0u, state->metadata.promised());\r\n+  EXPECT_EQ(0u, state->begin);\r\n+  EXPECT_EQ(0u, state->end);\r\n+\r\n+  Metadata metadata;\r\n+  metadata.set_status(Metadata::VOTING);\r\n+  metadata.set_promised(1);\r\n+  ASSERT_SOME(storage->persist(metadata));\r\n+\r\n+  // Append positions that could cause uint32_t key overflow. This used\r\n+  // to be an issue because we string formatted the unsigned 64 bit\r\n+  // integer keys as signed 32 bit. See MESOS-10216 for details.\r\n+  const uint64_t first = UINT32_MAX - 5;\r\n+  const uint64_t last = first + 9;\r\n+  for (uint64_t i = first; i <= last; i++) {\r\n+    Action action;\r\n+    action.set_position(i);\r\n+    action.set_promised(1);\r\n+    action.set_performed(1);\r\n+    action.set_learned(true);\r\n+    action.set_type(Action::APPEND);\r\n+    action.mutable_append()->set_bytes(stringify(i));\r\n+    ASSERT_SOME(storage->persist(action));\r\n+  }\r\n+\r\n+  // Recover the storage and check if the metadata is intact.\r\n+  storage.reset(new TypeParam());\r\n+  state = storage->restore(os::getcwd() + \"/.log\");\r\n+  ASSERT_SOME(state);\r\n+  EXPECT_EQ(Metadata::VOTING, state->metadata.status());\r\n+  EXPECT_EQ(1u, state->metadata.promised());\r\n+  EXPECT_EQ(0u, state->begin); // No TRUNCATE\r\n+  EXPECT_EQ(last, state->end);\r\n+}\r\n+\r\n+\r\n class ReplicaTest : public TemporaryDirectoryTest\r\n {\r\n protected:\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/845580535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846120117","html_url":"https://github.com/apache/mesos/pull/384#issuecomment-846120117","issue_url":"https://api.github.com/repos/apache/mesos/issues/384","id":846120117,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjEyMDExNw==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T17:26:39Z","updated_at":"2021-05-21T17:26:39Z","author_association":"CONTRIBUTOR","body":"@bmahler ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846120117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846131414","html_url":"https://github.com/apache/mesos/pull/390#issuecomment-846131414","issue_url":"https://api.github.com/repos/apache/mesos/issues/390","id":846131414,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjEzMTQxNA==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T17:46:52Z","updated_at":"2021-05-21T17:46:52Z","author_association":"CONTRIBUTOR","body":"Hey @andreaspeters , there's already a `gitignore` file, in `support/gitignore`.\r\nA link is created by the `./support/setup_dev.sh` script:\r\n```\r\ncf@thinkpad:~/src/mesos$ ls -l .gitignore \r\nlrwxrwxrwx 1 cf cf 17  8 avril  2020 .gitignore -> support/gitignore\r\ncf@thinkpad:~/src/mesos$ \r\n```\r\n\r\nYou should run `./support/setup_dev.sh` as recommended in the developer guide: https://github.com/apache/mesos/blob/master/docs/advanced-contribution.md#create-your-patch - it will add git hooks etc.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846131414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846144426","html_url":"https://github.com/apache/mesos/pull/390#issuecomment-846144426","issue_url":"https://api.github.com/repos/apache/mesos/issues/390","id":846144426,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjE0NDQyNg==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T18:10:55Z","updated_at":"2021-05-21T18:10:55Z","author_association":"CONTRIBUTOR","body":"Ah perfect, works for me. Thanks Charles. :-) ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846144426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846176591","html_url":"https://github.com/apache/mesos/pull/386#issuecomment-846176591","issue_url":"https://api.github.com/repos/apache/mesos/issues/386","id":846176591,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjE3NjU5MQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T19:00:00Z","updated_at":"2021-05-21T19:00:00Z","author_association":"CONTRIBUTOR","body":"Hey, @bmahler , thanks for looking at this.\r\n\r\nYes this commit is more a call for discussion.\r\nThis change is backward compatible, however will only increase the maximum record position from `INT32_MAX` to `9'999'999'999`, which was the implicit limit when the encoding was chosen.\r\nThe reason I went for this simple change are that:\r\n- it's simple\r\n- it's backward compatible\r\n- it's not clear how many users are affected by this overflow problem: I don't think Mesos itself should be affected since it'd be quite hard to reach `INT32_MAX` records just with the registry. The original bug report open by @ipronin is quite terse so I'm not sure in which context this was observed - I assume maybe because of a framework used at Twitter which uses the replicated log which managed to overflow it?\r\n\r\nTrying to extend the maximum position to `UINT64_MAX` is indeed more tricky, especially in a backward compatible way.\r\n\r\nIn particular, I don't think it's possible to recover in an overflow happened if the leveldb segments have been compacted. And if overflow occurred I think it's pretty much all bets off so the only reasonable thing to do is to start clean - repairing would be quite tricky\r\n\r\nSo I can see at least two options:\r\n1. Merge this change, which increases the range by a factor of over 4X, while being simple and backward compatible.\r\n2. Extend the range to `UINT64_MAX` using an approach similar to the one from @ipronin 's patch. However requiring users to use a dedicated tool to update the existing log is IMO not a reasonable approach in general. A compromise would be to do the change described in 1 (this merge) for existing logs, but start using the new 20-chars wide format supporting up to `UINT64_MAX` for new logs.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/846176591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847050927","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-847050927","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":847050927,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzA1MDkyNw==","user":{"login":"kamaradclimber","id":503537,"node_id":"MDQ6VXNlcjUwMzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/503537?v=4","gravatar_id":"","url":"https://api.github.com/users/kamaradclimber","html_url":"https://github.com/kamaradclimber","followers_url":"https://api.github.com/users/kamaradclimber/followers","following_url":"https://api.github.com/users/kamaradclimber/following{/other_user}","gists_url":"https://api.github.com/users/kamaradclimber/gists{/gist_id}","starred_url":"https://api.github.com/users/kamaradclimber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamaradclimber/subscriptions","organizations_url":"https://api.github.com/users/kamaradclimber/orgs","repos_url":"https://api.github.com/users/kamaradclimber/repos","events_url":"https://api.github.com/users/kamaradclimber/events{/privacy}","received_events_url":"https://api.github.com/users/kamaradclimber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T13:42:02Z","updated_at":"2021-05-24T13:42:02Z","author_association":"CONTRIBUTOR","body":"Could you squash all commits to increase readability of this history before merging?","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847050927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847097085","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-847097085","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":847097085,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzA5NzA4NQ==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T14:54:38Z","updated_at":"2021-05-24T14:54:48Z","author_association":"CONTRIBUTOR","body":"> Could you squash all commits to increase readability of this history before merging?\r\n\r\nDone :-)","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847097085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847117581","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-847117581","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":847117581,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzExNzU4MQ==","user":{"login":"kamaradclimber","id":503537,"node_id":"MDQ6VXNlcjUwMzUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/503537?v=4","gravatar_id":"","url":"https://api.github.com/users/kamaradclimber","html_url":"https://github.com/kamaradclimber","followers_url":"https://api.github.com/users/kamaradclimber/followers","following_url":"https://api.github.com/users/kamaradclimber/following{/other_user}","gists_url":"https://api.github.com/users/kamaradclimber/gists{/gist_id}","starred_url":"https://api.github.com/users/kamaradclimber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamaradclimber/subscriptions","organizations_url":"https://api.github.com/users/kamaradclimber/orgs","repos_url":"https://api.github.com/users/kamaradclimber/repos","events_url":"https://api.github.com/users/kamaradclimber/events{/privacy}","received_events_url":"https://api.github.com/users/kamaradclimber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T15:22:11Z","updated_at":"2021-05-24T15:22:11Z","author_association":"CONTRIBUTOR","body":"Are you sure? I still see 17 commits.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847117581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847205926","html_url":"https://github.com/apache/mesos/pull/387#issuecomment-847205926","issue_url":"https://api.github.com/repos/apache/mesos/issues/387","id":847205926,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzIwNTkyNg==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T17:18:52Z","updated_at":"2021-05-24T17:18:52Z","author_association":"CONTRIBUTOR","body":"@qianzhangxa ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847205926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847206811","html_url":"https://github.com/apache/mesos/pull/384#issuecomment-847206811","issue_url":"https://api.github.com/repos/apache/mesos/issues/384","id":847206811,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzIwNjgxMQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T17:20:27Z","updated_at":"2021-05-24T17:20:27Z","author_association":"CONTRIBUTOR","body":"@qianzhangxa ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847206811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847601619","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-847601619","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":847601619,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzYwMTYxOQ==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-25T07:00:53Z","updated_at":"2021-05-25T07:00:53Z","author_association":"CONTRIBUTOR","body":"> Are you sure? I still see 17 commits.\r\n\r\n:thinking:  not 100%! But like u see, the last commit include all changes. :man_shrugging: ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847601619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847707846","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-847707846","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":847707846,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzcwNzg0Ng==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-25T09:23:57Z","updated_at":"2021-05-25T09:23:57Z","author_association":"CONTRIBUTOR","body":"> > Are you sure? I still see 17 commits.\r\n> \r\n> thinking not 100%! But like u see, the last commit include all changes. man_shrugging\r\n\r\nYeah it looks like I done something wrong during my past commits that the squash didn't worked as I expected. Can u squash during the MR? ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/847707846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/848065111","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-848065111","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":848065111,"node_id":"MDEyOklzc3VlQ29tbWVudDg0ODA2NTExMQ==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-25T17:21:39Z","updated_at":"2021-05-25T17:21:39Z","author_association":"CONTRIBUTOR","body":"> > > Are you sure? I still see 17 commits.\r\n> > \r\n> > \r\n> > thinking not 100%! But like u see, the last commit include all changes. man_shrugging\r\n> \r\n> Yeah it looks like I done something wrong during my past commits that the squash didn't worked as I expected. Can u squash during the MR?\r\n\r\nMaybe, but it'll be easier using `git rebase`. Then just need to `git push -f` ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/848065111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/848196310","html_url":"https://github.com/apache/mesos/pull/383#issuecomment-848196310","issue_url":"https://api.github.com/repos/apache/mesos/issues/383","id":848196310,"node_id":"MDEyOklzc3VlQ29tbWVudDg0ODE5NjMxMA==","user":{"login":"andreaspeters","id":19497059,"node_id":"MDQ6VXNlcjE5NDk3MDU5","avatar_url":"https://avatars.githubusercontent.com/u/19497059?v=4","gravatar_id":"","url":"https://api.github.com/users/andreaspeters","html_url":"https://github.com/andreaspeters","followers_url":"https://api.github.com/users/andreaspeters/followers","following_url":"https://api.github.com/users/andreaspeters/following{/other_user}","gists_url":"https://api.github.com/users/andreaspeters/gists{/gist_id}","starred_url":"https://api.github.com/users/andreaspeters/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreaspeters/subscriptions","organizations_url":"https://api.github.com/users/andreaspeters/orgs","repos_url":"https://api.github.com/users/andreaspeters/repos","events_url":"https://api.github.com/users/andreaspeters/events{/privacy}","received_events_url":"https://api.github.com/users/andreaspeters/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-25T19:19:25Z","updated_at":"2021-05-25T19:19:25Z","author_association":"CONTRIBUTOR","body":"> > > > Are you sure? I still see 17 commits.\r\n> > > \r\n> > > \r\n> > > thinking not 100%! But like u see, the last commit include all changes. man_shrugging\r\n> > \r\n> > \r\n> > Yeah it looks like I done something wrong during my past commits that the squash didn't worked as I expected. Can u squash during the MR?\r\n> \r\n> Maybe, but it'll be easier using `git rebase`. Then just need to `git push -f`\r\n\r\nHopefully I didn't broke more as I fixed with the rebase. :sweat_smile: ","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/848196310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/849008518","html_url":"https://github.com/apache/mesos/pull/388#issuecomment-849008518","issue_url":"https://api.github.com/repos/apache/mesos/issues/388","id":849008518,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTAwODUxOA==","user":{"login":"ridv","id":1643994,"node_id":"MDQ6VXNlcjE2NDM5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1643994?v=4","gravatar_id":"","url":"https://api.github.com/users/ridv","html_url":"https://github.com/ridv","followers_url":"https://api.github.com/users/ridv/followers","following_url":"https://api.github.com/users/ridv/following{/other_user}","gists_url":"https://api.github.com/users/ridv/gists{/gist_id}","starred_url":"https://api.github.com/users/ridv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ridv/subscriptions","organizations_url":"https://api.github.com/users/ridv/orgs","repos_url":"https://api.github.com/users/ridv/repos","events_url":"https://api.github.com/users/ridv/events{/privacy}","received_events_url":"https://api.github.com/users/ridv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T18:11:59Z","updated_at":"2021-05-26T18:14:40Z","author_association":"NONE","body":"This looks sane to me, and barring any opposition, this should probably be shipped. 9 days for such a small patch is already a lot. Can a Mesos committer either merge this or ask for improvements? This silence is exactly what I was afraid of when I voiced my concerns about the current state of Mesos in the e-mail thread re: putting the project into the Attic.","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/849008518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/849017166","html_url":"https://github.com/apache/mesos/pull/388#issuecomment-849017166","issue_url":"https://api.github.com/repos/apache/mesos/issues/388","id":849017166,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTAxNzE2Ng==","user":{"login":"cf-natali","id":8378227,"node_id":"MDQ6VXNlcjgzNzgyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/8378227?v=4","gravatar_id":"","url":"https://api.github.com/users/cf-natali","html_url":"https://github.com/cf-natali","followers_url":"https://api.github.com/users/cf-natali/followers","following_url":"https://api.github.com/users/cf-natali/following{/other_user}","gists_url":"https://api.github.com/users/cf-natali/gists{/gist_id}","starred_url":"https://api.github.com/users/cf-natali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cf-natali/subscriptions","organizations_url":"https://api.github.com/users/cf-natali/orgs","repos_url":"https://api.github.com/users/cf-natali/repos","events_url":"https://api.github.com/users/cf-natali/events{/privacy}","received_events_url":"https://api.github.com/users/cf-natali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T18:25:30Z","updated_at":"2021-05-26T18:25:30Z","author_association":"CONTRIBUTOR","body":"Yes.\n\nUnless the involvement of existing committers significantly improves over\nthe next week or so, I'll contact the various users who manifested interest\nin order to start a fork.\n\n\n\nOn Wed, 26 May 2021, 19:12 Renán I. Del Valle, ***@***.***>\nwrote:\n\n> This looks sane to me, and barring any opposition, this should probably be\n> shipped. 9 days for such a small patch is already a lot. Can a Mesos\n> committer either merge this or ask for improvements? This silence is\n> exactly what I was afraid of when I voiced my concerns in the e-mail thread\n> re: putting the project into the Attic.\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/mesos/pull/388#issuecomment-849008518>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AB75O47SLGHRSS7UVGLAZGTTPU2YDANCNFSM45BLIDUA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/849017166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/mesos/issues/comments/849077997","html_url":"https://github.com/apache/mesos/pull/386#issuecomment-849077997","issue_url":"https://api.github.com/repos/apache/mesos/issues/386","id":849077997,"node_id":"MDEyOklzc3VlQ29tbWVudDg0OTA3Nzk5Nw==","user":{"login":"asekretenko","id":8353245,"node_id":"MDQ6VXNlcjgzNTMyNDU=","avatar_url":"https://avatars.githubusercontent.com/u/8353245?v=4","gravatar_id":"","url":"https://api.github.com/users/asekretenko","html_url":"https://github.com/asekretenko","followers_url":"https://api.github.com/users/asekretenko/followers","following_url":"https://api.github.com/users/asekretenko/following{/other_user}","gists_url":"https://api.github.com/users/asekretenko/gists{/gist_id}","starred_url":"https://api.github.com/users/asekretenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asekretenko/subscriptions","organizations_url":"https://api.github.com/users/asekretenko/orgs","repos_url":"https://api.github.com/users/asekretenko/repos","events_url":"https://api.github.com/users/asekretenko/events{/privacy}","received_events_url":"https://api.github.com/users/asekretenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-26T19:59:42Z","updated_at":"2021-05-26T19:59:42Z","author_association":"MEMBER","body":"Hmmm... what the approach in this patch definitely helps against, is the replicated log corruption when the position wraps.\r\nResulting state will not be recoverable without erasing the replicated log; however, this is cleaner than the effects of the position wrap.  I'm not sure whether the 4X gain of possible position count makes a lot of difference for affected users or not.\r\n\r\n@cf-natali @bmahler It strikes me that no backward conversion (from the string key to an integer position) is ever used by the replicated log code.... Do we have a good understanding what the actual contract for `encode()` should look like?\r\n\r\nFrom what I can tell by quickly looking at the code, the main requirement is that `encode()` results, when ordered lexicographically, should be in the order of positions. This means that, **_if I haven't missed something_**, for example, prefixing integers larger than `9'999'999'999` by a single letter `A` will result in the correct order of keys:\r\n```\r\n0000000000\r\n.......\r\n9999999998\r\n9999999999\r\nA00000010000000000\r\nA00000010000000001\r\n```","reactions":{"url":"https://api.github.com/repos/apache/mesos/issues/comments/849077997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]