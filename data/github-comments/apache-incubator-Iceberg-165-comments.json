[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110149135","html_url":"https://github.com/apache/iceberg/pull/4546#issuecomment-1110149135","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4546","id":1110149135,"node_id":"IC_kwDOCW7NX85CK4gP","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T19:04:27Z","updated_at":"2022-04-26T19:04:27Z","author_association":"COLLABORATOR","body":"Merged, thanks @flyrain for contribution and @singhpk234 for additional review","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110149135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110164900","html_url":"https://github.com/apache/iceberg/pull/4546#issuecomment-1110164900","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4546","id":1110164900,"node_id":"IC_kwDOCW7NX85CK8Wk","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T19:23:17Z","updated_at":"2022-04-26T19:23:17Z","author_association":"CONTRIBUTOR","body":"Thanks @szehon-ho for the detailed review and merge! Thanks @kbendick and @singhpk234 for the review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110164900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110207374","html_url":"https://github.com/apache/iceberg/pull/4546#issuecomment-1110207374","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4546","id":1110207374,"node_id":"IC_kwDOCW7NX85CLGuO","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T20:14:55Z","updated_at":"2022-04-26T20:14:55Z","author_association":"CONTRIBUTOR","body":"Maybe a little late in the game (I was on a longer PTO), and only partially related - since this is a Hive 4 feature -, but we did some work to display the partitioning information in the `DESCRIBE FORMATTED` command:\r\nSee: https://issues.apache.org/jira/browse/HIVE-25326\r\n\r\n```\r\n# Partition Transform Information\t \t \r\n# col_name            \ttransform_type      \t \r\nb                   \tIDENTITY            \t \r\nc                   \tIDENTITY  \r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110207374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110215530","html_url":"https://github.com/apache/iceberg/pull/4546#issuecomment-1110215530","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4546","id":1110215530,"node_id":"IC_kwDOCW7NX85CLItq","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T20:24:33Z","updated_at":"2022-04-26T20:24:33Z","author_association":"CONTRIBUTOR","body":"Thanks @pvary. We want to support the use case that doesn't need storage access. Does [HIVE-25326](https://issues.apache.org/jira/browse/HIVE-25326) need to access the metadata.json file to show partition spec?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110215530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110226565","html_url":"https://github.com/apache/iceberg/pull/4546#issuecomment-1110226565","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4546","id":1110226565,"node_id":"IC_kwDOCW7NX85CLLaF","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T20:37:56Z","updated_at":"2022-04-26T20:37:56Z","author_association":"CONTRIBUTOR","body":"@flyrain: Yes, it uses the [HiveIcebergStorageHandler.getPartitionTransformSpec](https://github.com/apache/hive/blob/dbdcf00dd6334acaded4369fc0c1ccbdd142255e/iceberg/iceberg-handler/src/main/java/org/apache/iceberg/mr/hive/HiveIcebergStorageHandler.java#L330) which in turn uses [IcebergTableUtil.getTable](https://github.com/apache/hive/blob/dbdcf00dd6334acaded4369fc0c1ccbdd142255e/iceberg/iceberg-handler/src/main/java/org/apache/iceberg/mr/hive/IcebergTableUtil.java#L54) to load the table and read the spec from the table snapshot.\r\n\r\nWhen we were working on creating Hive tables, I have started working on the Hive table creation we used the `spec` and the `schema` table property fields, but then we decided on removing them and keep the metadata json as a single source of truth. See: [HiveIcebergMetaHook. PROPERTIES_TO_REMOVE](https://github.com/apache/iceberg/blob/master/mr/src/main/java/org/apache/iceberg/mr/hive/HiveIcebergMetaHook.java#L62). I hope this does not cause issues with the new code when the table is created.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110226565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110234338","html_url":"https://github.com/apache/iceberg/issues/4581#issuecomment-1110234338","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4581","id":1110234338,"node_id":"IC_kwDOCW7NX85CLNTi","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T20:47:40Z","updated_at":"2022-04-26T20:47:40Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer: I am not sure that it is still an actual issue - or it was fixed in the current code, but I have found a year ago that Parquet and ORC/Avro expects UUID differently for writes. See: #1881\r\n\r\nAnd this is even before the Spark code 😄 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110234338/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":2,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110235686","html_url":"https://github.com/apache/iceberg/issues/4581#issuecomment-1110235686","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4581","id":1110235686,"node_id":"IC_kwDOCW7NX85CLNom","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T20:49:38Z","updated_at":"2022-04-26T20:49:38Z","author_association":"MEMBER","body":"I have kind of punted on this, I was just toying around with it for a types test and don't have any users yet 🤞  who have hit this","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110235686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110292545","html_url":"https://github.com/apache/iceberg/pull/4546#issuecomment-1110292545","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4546","id":1110292545,"node_id":"IC_kwDOCW7NX85CLbhB","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T22:01:09Z","updated_at":"2022-04-26T22:01:09Z","author_association":"CONTRIBUTOR","body":"Got it. It should not. This PR is using a different name than `InputFormatConfig.PARTITION_SPEC(iceberg.mr.table.partition.spec)`. Thanks for the reminder.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110292545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110322610","html_url":"https://github.com/apache/iceberg/pull/4595#issuecomment-1110322610","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4595","id":1110322610,"node_id":"IC_kwDOCW7NX85CLi2y","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T22:49:46Z","updated_at":"2022-04-26T22:49:46Z","author_association":"CONTRIBUTOR","body":"LGTM. A nice refactor, which follows the same approach in #2905. Do we have any test from Spark/Hive side? Also cc @stevenzwu since he is the author of #2905. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110322610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110336966","html_url":"https://github.com/apache/iceberg/issues/4621#issuecomment-1110336966","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4621","id":1110336966,"node_id":"IC_kwDOCW7NX85CLmXG","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T23:17:10Z","updated_at":"2022-04-26T23:17:10Z","author_association":"CONTRIBUTOR","body":"You should be able to reconstruct an order, but I'm not sure whether you'd consider it the _same_ order or even if there is an _original_ record/row order.\r\n\r\nMost systems that work with Iceberg don't have an order because they process data in parallel tasks. Each task has a record order, but there's no order between tasks. For example, when Flink processes data from a Kafka topic, there is order within each Kafka partition, but no order across partitions or really across Flink tasks. Does Pulsar have a concept of total order over rows?\r\n\r\nI said above that you can reconstruct an order. That's because Iceberg keeps writes in order. For a given append operation, Iceberg writes the data file metadata into a manifest file in the original order. So all you need to do is read snapshots sequentially, order data files sequentially, and then read records from data files sequentially. We could formalize that a bit so that we can keep track of file order within a commit, but I'm skeptical that it is valuable given that most systems rely on partial ordering and not total ordering.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110336966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110359289","html_url":"https://github.com/apache/iceberg/pull/4638#issuecomment-1110359289","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4638","id":1110359289,"node_id":"IC_kwDOCW7NX85CLrz5","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T23:59:59Z","updated_at":"2022-04-27T00:04:44Z","author_association":"CONTRIBUTOR","body":"Another tool to consider is `me.champeau.gradle.japicmp`, which seems to be more for checking diffs than anything else, but was adopted by the OpenTelemetry project in the following PR and associated issue:\r\n\r\nhttps://github.com/open-telemetry/opentelemetry-java/issues/2692\r\n\r\nhttps://github.com/open-telemetry/opentelemetry-java/pull/3183\r\n\r\nThe rev-api plugin used in this PR is _very_ actively maintained and relatively simple, but anybody who is interested might use that for comparison.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110359289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110360226","html_url":"https://github.com/apache/iceberg/pull/4638#issuecomment-1110360226","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4638","id":1110360226,"node_id":"IC_kwDOCW7NX85CLsCi","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T00:01:45Z","updated_at":"2022-04-27T00:01:45Z","author_association":"CONTRIBUTOR","body":"The available tasks:\r\n\r\n```bash\r\n$ ./gradlew tasks --all | grep rev\r\niceberg-api:revapi\r\niceberg-api:revapiAcceptAllBreaks\r\niceberg-api:revapiAcceptBreak\r\niceberg-api:revapiAnalyze\r\niceberg-api:revapiVersionOverride\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110360226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110360590","html_url":"https://github.com/apache/iceberg/pull/4638#issuecomment-1110360590","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4638","id":1110360590,"node_id":"IC_kwDOCW7NX85CLsIO","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T00:02:23Z","updated_at":"2022-04-27T00:02:23Z","author_association":"CONTRIBUTOR","body":"Sample output from running `./gradlew check.\r\n\r\n```\r\n  ----------------------------------------------------------------------------------------------------\r\n  java.class.defaultSerializationChanged: The default serialization ID for the class has changed. This means that the new version of the class is not deserializable from the byte stream of a serialized old class.\r\n\r\n  old: class org.apache.iceberg.SortOrder\r\n  new: class org.apache.iceberg.SortOrder\r\n\r\n  SOURCE: EQUIVALENT, BINARY: EQUIVALENT, SEMANTIC: BREAKING\r\n\r\n  From old archive: iceberg-api-0.13.1.jar\r\n  From new archive: iceberg-api-0.14.0-SNAPSHOT.jar\r\n\r\n  If this is an acceptable break that will not harm your users, you can ignore it in future runs like so for:\r\n\r\n    * Just this break:\r\n        ./gradlew :iceberg-api:revapiAcceptBreak --justification \"{why this break is ok}\" \\\r\n          --code \"java.class.defaultSerializationChanged\" \\\r\n          --old \"class org.apache.iceberg.SortOrder\" \\\r\n          --new \"class org.apache.iceberg.SortOrder\"\r\n    * All breaks in this project:\r\n        ./gradlew :iceberg-api:revapiAcceptAllBreaks --justification \"{why this break is ok}\"\r\n    * All breaks in all projects:\r\n        ./gradlew revapiAcceptAllBreaks --justification \"{why this break is ok}\"\r\n  ----------------------------------------------------------------------------------------------------\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110360590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110431379","html_url":"https://github.com/apache/iceberg/issues/4607#issuecomment-1110431379","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4607","id":1110431379,"node_id":"IC_kwDOCW7NX85CL9aT","user":{"login":"kyle-cx91","id":10529123,"node_id":"MDQ6VXNlcjEwNTI5MTIz","avatar_url":"https://avatars.githubusercontent.com/u/10529123?v=4","gravatar_id":"","url":"https://api.github.com/users/kyle-cx91","html_url":"https://github.com/kyle-cx91","followers_url":"https://api.github.com/users/kyle-cx91/followers","following_url":"https://api.github.com/users/kyle-cx91/following{/other_user}","gists_url":"https://api.github.com/users/kyle-cx91/gists{/gist_id}","starred_url":"https://api.github.com/users/kyle-cx91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyle-cx91/subscriptions","organizations_url":"https://api.github.com/users/kyle-cx91/orgs","repos_url":"https://api.github.com/users/kyle-cx91/repos","events_url":"https://api.github.com/users/kyle-cx91/events{/privacy}","received_events_url":"https://api.github.com/users/kyle-cx91/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T01:24:00Z","updated_at":"2022-04-27T01:24:00Z","author_association":"CONTRIBUTOR","body":"@samredai ok, I'll tackle the \"single configuration page\"","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110431379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110434440","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1110434440","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1110434440,"node_id":"IC_kwDOCW7NX85CL-KI","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T01:30:26Z","updated_at":"2022-04-27T01:35:36Z","author_association":"MEMBER","body":"It looks like Java API has used the `row-level-delete` (`merge-on-read` deletes from V2 spec) by creating a new delete file.\r\n\r\nBut in spark 3.1, from SQL, only `copy-on-write` update/delete is supported. So, it doesn't understand the delete files.\r\n\r\n**workaround:**\r\n1. So, In java API we need to use copy-on-write (v1 spec) delete for spark 3.1 to understand it.\r\n2. Or, use spark 3.2 which can understand the merge-on-read deletes by configuring a [table property](https://github.com/apache/iceberg/pull/4223). \r\n\r\ncc: @RussellSpitzer , @rdblue , @aokolnychyi ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110434440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110486936","html_url":"https://github.com/apache/iceberg/pull/4586#issuecomment-1110486936","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4586","id":1110486936,"node_id":"IC_kwDOCW7NX85CMK-Y","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T03:14:25Z","updated_at":"2022-04-27T03:14:25Z","author_association":"CONTRIBUTOR","body":"Sure! I will update here with a doc on the DDL syntaxes I had in mind for branching/tagging.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110486936/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110498981","html_url":"https://github.com/apache/iceberg/issues/4640#issuecomment-1110498981","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4640","id":1110498981,"node_id":"IC_kwDOCW7NX85CMN6l","user":{"login":"kyle-cx91","id":10529123,"node_id":"MDQ6VXNlcjEwNTI5MTIz","avatar_url":"https://avatars.githubusercontent.com/u/10529123?v=4","gravatar_id":"","url":"https://api.github.com/users/kyle-cx91","html_url":"https://github.com/kyle-cx91","followers_url":"https://api.github.com/users/kyle-cx91/followers","following_url":"https://api.github.com/users/kyle-cx91/following{/other_user}","gists_url":"https://api.github.com/users/kyle-cx91/gists{/gist_id}","starred_url":"https://api.github.com/users/kyle-cx91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kyle-cx91/subscriptions","organizations_url":"https://api.github.com/users/kyle-cx91/orgs","repos_url":"https://api.github.com/users/kyle-cx91/repos","events_url":"https://api.github.com/users/kyle-cx91/events{/privacy}","received_events_url":"https://api.github.com/users/kyle-cx91/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T03:37:23Z","updated_at":"2022-04-27T03:37:23Z","author_association":"CONTRIBUTOR","body":"@jingli430  Spark 2.4 can’t create Iceberg tables with DDL, instead use Spark 3.x or the [Iceberg API](https://iceberg.apache.org/docs/latest//java-api-quickstart).\r\n\r\n[reference from](https://iceberg.apache.org/docs/latest/spark-ddl/)\r\n<img width=\"888\" alt=\"image\" src=\"https://user-images.githubusercontent.com/10529123/165434793-ae2b753a-cffb-478b-8970-de5a092cf70b.png\">\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110498981/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110510114","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1110510114","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1110510114,"node_id":"IC_kwDOCW7NX85CMQoi","user":{"login":"bbasosuho","id":20290980,"node_id":"MDQ6VXNlcjIwMjkwOTgw","avatar_url":"https://avatars.githubusercontent.com/u/20290980?v=4","gravatar_id":"","url":"https://api.github.com/users/bbasosuho","html_url":"https://github.com/bbasosuho","followers_url":"https://api.github.com/users/bbasosuho/followers","following_url":"https://api.github.com/users/bbasosuho/following{/other_user}","gists_url":"https://api.github.com/users/bbasosuho/gists{/gist_id}","starred_url":"https://api.github.com/users/bbasosuho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbasosuho/subscriptions","organizations_url":"https://api.github.com/users/bbasosuho/orgs","repos_url":"https://api.github.com/users/bbasosuho/repos","events_url":"https://api.github.com/users/bbasosuho/events{/privacy}","received_events_url":"https://api.github.com/users/bbasosuho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T03:58:34Z","updated_at":"2022-04-27T04:06:17Z","author_association":"NONE","body":"@ajantha-bhat \r\n**Thank you for answer. But the same thing happens.**\r\n\r\nI have added content to my original post.\r\n**In the case of a character column, it is strange that it is normally processed without ''. ( case1 , case3 )**\r\n\r\nI upgraded to version 3.2\r\nIceberg Version : iceberg-spark-runtime-3.2_2.12-0.13.1.jar\r\nSpark Version : 3.2.1\r\n\r\n**I have added table properties. 'write.merge.mode'='merge-on-read'\r\nBut the same thing happens.\r\nIt does not recognize the delete file and is created again.**\r\n\r\n\r\n\r\n\r\n\r\n**I searched for settings and found more similar settings and tried to put them in.**\r\nwrite.update.mode=merge-on-read\r\nwrite.delete.mode=merge-on-read\r\n\r\nAnd I tried again.\r\nIt was confirmed that Delect Action(case3 and case4) were handled normally.\r\n\r\nBut, I saw an error message saying that Update Action( case1 and case2) are not supported.\r\n![image](https://user-images.githubusercontent.com/20290980/165436765-cd3529ab-c34b-4cee-bb17-e0db7cf452f5.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110510114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110517779","html_url":"https://github.com/apache/iceberg/issues/4513#issuecomment-1110517779","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4513","id":1110517779,"node_id":"IC_kwDOCW7NX85CMSgT","user":{"login":"vanliu-tx","id":64360028,"node_id":"MDQ6VXNlcjY0MzYwMDI4","avatar_url":"https://avatars.githubusercontent.com/u/64360028?v=4","gravatar_id":"","url":"https://api.github.com/users/vanliu-tx","html_url":"https://github.com/vanliu-tx","followers_url":"https://api.github.com/users/vanliu-tx/followers","following_url":"https://api.github.com/users/vanliu-tx/following{/other_user}","gists_url":"https://api.github.com/users/vanliu-tx/gists{/gist_id}","starred_url":"https://api.github.com/users/vanliu-tx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vanliu-tx/subscriptions","organizations_url":"https://api.github.com/users/vanliu-tx/orgs","repos_url":"https://api.github.com/users/vanliu-tx/repos","events_url":"https://api.github.com/users/vanliu-tx/events{/privacy}","received_events_url":"https://api.github.com/users/vanliu-tx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T04:12:32Z","updated_at":"2022-04-27T04:12:32Z","author_association":"CONTRIBUTOR","body":"fixed","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110517779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110536430","html_url":"https://github.com/apache/iceberg/issues/4640#issuecomment-1110536430","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4640","id":1110536430,"node_id":"IC_kwDOCW7NX85CMXDu","user":{"login":"jingli430","id":4213288,"node_id":"MDQ6VXNlcjQyMTMyODg=","avatar_url":"https://avatars.githubusercontent.com/u/4213288?v=4","gravatar_id":"","url":"https://api.github.com/users/jingli430","html_url":"https://github.com/jingli430","followers_url":"https://api.github.com/users/jingli430/followers","following_url":"https://api.github.com/users/jingli430/following{/other_user}","gists_url":"https://api.github.com/users/jingli430/gists{/gist_id}","starred_url":"https://api.github.com/users/jingli430/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jingli430/subscriptions","organizations_url":"https://api.github.com/users/jingli430/orgs","repos_url":"https://api.github.com/users/jingli430/repos","events_url":"https://api.github.com/users/jingli430/events{/privacy}","received_events_url":"https://api.github.com/users/jingli430/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T04:46:53Z","updated_at":"2022-04-27T04:46:53Z","author_association":"NONE","body":"Thanks so much for the prompt reply~","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110536430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110541942","html_url":"https://github.com/apache/iceberg/issues/4615#issuecomment-1110541942","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4615","id":1110541942,"node_id":"IC_kwDOCW7NX85CMYZ2","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T04:59:33Z","updated_at":"2022-04-27T05:08:05Z","author_association":"CONTRIBUTOR","body":"According to the vanilla spark docs, this syntax should also work for columns:\r\n```sql\r\nALTER TABLE StudentInfo ALTER COLUMN name COMMENT \"new comment\";\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110541942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110542925","html_url":"https://github.com/apache/iceberg/issues/4615#issuecomment-1110542925","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4615","id":1110542925,"node_id":"IC_kwDOCW7NX85CMYpN","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:01:47Z","updated_at":"2022-04-27T05:03:44Z","author_association":"CONTRIBUTOR","body":"For table comment, this should work:\r\n\r\n```sql\r\n-- SET TABLE COMMENT Using SET PROPERTIES\r\nALTER TABLE dbx.tab1 SET TBLPROPERTIES ('comment' = 'A table comment.')\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110542925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110543572","html_url":"https://github.com/apache/iceberg/issues/4615#issuecomment-1110543572","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4615","id":1110543572,"node_id":"IC_kwDOCW7NX85CMYzU","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:03:00Z","updated_at":"2022-04-27T05:06:59Z","author_association":"CONTRIBUTOR","body":"Both of these examples came from here: https://spark.apache.org/docs/latest/sql-ref-syntax-ddl-alter-table.html\r\n\r\nPlease let us know if that does not work with Iceberg. If it does, feel free to close this issue 🙂\r\n\r\nI think the syntax mentioned above by  @felixYyu _might_ be databricks specific. Their docs are strange and it’s never super apparent when “Databricks SQL” is just a marketing term for plain Spark and when “Databricks SQL” implies that this is a proprietary extension. I’ve noticed they have several proprietary DML statements, that have equivalents in plain OSS vanilla Spark SQL.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110543572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110547774","html_url":"https://github.com/apache/iceberg/issues/4615#issuecomment-1110547774","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4615","id":1110547774,"node_id":"IC_kwDOCW7NX85CMZ0-","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:11:12Z","updated_at":"2022-04-27T05:11:12Z","author_association":"CONTRIBUTOR","body":"If it does work, please feel free to open up a small PR to add this to the Spark docs section (or @felixYyu if @cccs-jc says they don’t have time)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110547774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110548263","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1110548263","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1110548263,"node_id":"IC_kwDOCW7NX85CMZ8n","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:12:10Z","updated_at":"2022-04-27T05:12:10Z","author_association":"MEMBER","body":"> But, I saw an error message saying that Update Action( case1 and case2) are not supported.\r\n\r\n**Could you provide a complete call stack for this error message ?**\r\n\r\nAnd if we are doing update operation with merge on read, we need to set **write.update.mode**.\r\nSimilarly for delete operation, **write.delete.mode** and for merge sql we need to use **write.merge.mode**. AS you are using only delete and update, last one is no need to set.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110548263/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110549605","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1110549605","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1110549605,"node_id":"IC_kwDOCW7NX85CMaRl","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:13:48Z","updated_at":"2022-04-27T05:13:48Z","author_association":"CONTRIBUTOR","body":"Seems @ajantha-bhat is helping, but reminder that you likely need to call `.refresh()` on the table (or use `REFRESH TABLE` syntax.\r\n\r\nThe Spark writer will refresh a table automatically after a write, but if you’re mixing the Java API you likely need to call refresh yourself (or disable the caching catalog entirely).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110549605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110550994","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1110550994","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1110550994,"node_id":"IC_kwDOCW7NX85CManS","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:15:19Z","updated_at":"2022-04-27T05:15:19Z","author_association":"CONTRIBUTOR","body":"Also +1 to the complete stack trace beyond “delta updates are not supported”. That will tell likely tell us the issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110550994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110554296","html_url":"https://github.com/apache/iceberg/issues/4624#issuecomment-1110554296","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4624","id":1110554296,"node_id":"IC_kwDOCW7NX85CMba4","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:21:11Z","updated_at":"2022-04-27T20:07:37Z","author_association":"CONTRIBUTOR","body":"Note that we should strongly consider whether or not to backport this to Flink 1.14.\r\n\r\nIf the fix was applied in Flink 1.14.5, and users use Flink 1.14.2 at runtime, they’ll likely encounter an issue.\r\n\r\nIf this is super performance critical, we can consider adding a flag or something to opt-in for Flink 1.14, but it seems the patch fix has somewhat broken API compatibility for Flink 1.14.x.\r\n\r\nshameless plug for my PR that would add binary / semantic / source compatibility checks, at least to the API module: https://github.com/apache/iceberg/pull/4638\r\n\r\nalso, if you’re ever curious, you can apply that plug-in to `allsubprojects` to see if that catches the issue after changing it. I suspect it would (though generally speaking we only intend on defining binary / source / semantic compatibility guarantees for the api module).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110554296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110575609","html_url":"https://github.com/apache/iceberg/pull/4586#issuecomment-1110575609","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4586","id":1110575609,"node_id":"IC_kwDOCW7NX85CMgn5","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T05:59:31Z","updated_at":"2022-04-27T05:59:31Z","author_association":"CONTRIBUTOR","body":"> Just from user standpoint, SQL is considered an easier user experience compared to procedure calls\r\n\r\n+1 for this aspect.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110575609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110582285","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1110582285","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1110582285,"node_id":"IC_kwDOCW7NX85CMiQN","user":{"login":"bbasosuho","id":20290980,"node_id":"MDQ6VXNlcjIwMjkwOTgw","avatar_url":"https://avatars.githubusercontent.com/u/20290980?v=4","gravatar_id":"","url":"https://api.github.com/users/bbasosuho","html_url":"https://github.com/bbasosuho","followers_url":"https://api.github.com/users/bbasosuho/followers","following_url":"https://api.github.com/users/bbasosuho/following{/other_user}","gists_url":"https://api.github.com/users/bbasosuho/gists{/gist_id}","starred_url":"https://api.github.com/users/bbasosuho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbasosuho/subscriptions","organizations_url":"https://api.github.com/users/bbasosuho/orgs","repos_url":"https://api.github.com/users/bbasosuho/repos","events_url":"https://api.github.com/users/bbasosuho/events{/privacy}","received_events_url":"https://api.github.com/users/bbasosuho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T06:10:03Z","updated_at":"2022-04-27T06:10:43Z","author_association":"NONE","body":"Write additional content.\r\n\r\n**1. TBLPROPERTIES**\r\n\r\n....\r\nTBLPROPERTIES (\r\n  'metadata_location'='.......', \r\n  'previous_metadata_location'='.......', \r\n  'table_type'='ICEBERG', \r\n  'transient_lastDdlTime'='1651038945', \r\n  'uuid'='a9ecab95-4dff-49ff-8860-663262c6aa14', \r\n  'write.delete.mode'='merge-on-read', \r\n  'write.format.default'='parquet', \r\n  'write.merge.mode'='merge-on-read', \r\n  'write.update.mode'='merge-on-read')\r\n.....\r\n\r\n**After adding the 'write.delete.mode'='merge-on-read' setting, the problem in case4 does not occur.**\r\n\r\n\r\n**2. Spark-sql Cache**\r\n\r\nThe cache option is set to false .\r\nspark.sql.catalog.iceberg.cache-enabled=false\r\n\r\n**3. Correct TBLPROPERTIES**\r\n\r\nWhich of the options below should be set to only use simple update/delete?\r\n\r\nwrite.delete.mode\r\nwrite.merge.mode\r\nwrite.update.mode\r\n\r\n\r\n**4. Stack trace**\r\n\r\nError: org.apache.hive.service.cli.HiveSQLException: Error running query: org.apache.spark.sql.AnalysisException: Delta updates are currently not supported\r\n\tat org.apache.spark.sql.hive.thriftserver.HiveThriftServerErrors$.runningQueryError(HiveThriftServerErrors.scala:43)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation.org$apache$spark$sql$hive$thriftserver$SparkExecuteStatementOperation$$execute(SparkExecuteStatementOperation.scala:325)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation$$anon$2$$anon$3.$anonfun$run$2(SparkExecuteStatementOperation.scala:230)\r\n\tat scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkOperation.withLocalProperties(SparkOperation.scala:79)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkOperation.withLocalProperties$(SparkOperation.scala:63)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation.withLocalProperties(SparkExecuteStatementOperation.scala:43)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation$$anon$2$$anon$3.run(SparkExecuteStatementOperation.scala:230)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation$$anon$2$$anon$3.run(SparkExecuteStatementOperation.scala:225)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation$$anon$2.run(SparkExecuteStatementOperation.scala:239)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.apache.spark.sql.AnalysisException: Delta updates are currently not supported\r\n\tat org.apache.spark.sql.catalyst.analysis.RewriteUpdateTable$$anonfun$apply$1.applyOrElse(RewriteUpdateTable.scala:62)\r\n\tat org.apache.spark.sql.catalyst.analysis.RewriteUpdateTable$$anonfun$apply$1.applyOrElse(RewriteUpdateTable.scala:53)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.$anonfun$resolveOperatorsDownWithPruning$2(AnalysisHelper.scala:170)\r\n\tat org.apache.spark.sql.catalyst.trees.CurrentOrigin$.withOrigin(TreeNode.scala:82)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.$anonfun$resolveOperatorsDownWithPruning$1(AnalysisHelper.scala:170)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper$.allowInvokingTransformsInAnalyzer(AnalysisHelper.scala:323)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.resolveOperatorsDownWithPruning(AnalysisHelper.scala:168)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.resolveOperatorsDownWithPruning$(AnalysisHelper.scala:164)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.LogicalPlan.resolveOperatorsDownWithPruning(LogicalPlan.scala:30)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.resolveOperatorsWithPruning(AnalysisHelper.scala:99)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.resolveOperatorsWithPruning$(AnalysisHelper.scala:96)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.LogicalPlan.resolveOperatorsWithPruning(LogicalPlan.scala:30)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.resolveOperators(AnalysisHelper.scala:76)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper.resolveOperators$(AnalysisHelper.scala:75)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.LogicalPlan.resolveOperators(LogicalPlan.scala:30)\r\n\tat org.apache.spark.sql.catalyst.analysis.RewriteUpdateTable$.apply(RewriteUpdateTable.scala:53)\r\n\tat org.apache.spark.sql.catalyst.analysis.RewriteUpdateTable$.apply(RewriteUpdateTable.scala:51)\r\n\tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$execute$2(RuleExecutor.scala:211)\r\n\tat scala.collection.LinearSeqOptimized.foldLeft(LinearSeqOptimized.scala:126)\r\n\tat scala.collection.LinearSeqOptimized.foldLeft$(LinearSeqOptimized.scala:122)\r\n\tat scala.collection.immutable.List.foldLeft(List.scala:91)\r\n\tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$execute$1(RuleExecutor.scala:208)\r\n\tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$execute$1$adapted(RuleExecutor.scala:200)\r\n\tat scala.collection.immutable.List.foreach(List.scala:431)\r\n\tat org.apache.spark.sql.catalyst.rules.RuleExecutor.execute(RuleExecutor.scala:200)\r\n\tat org.apache.spark.sql.catalyst.analysis.Analyzer.org$apache$spark$sql$catalyst$analysis$Analyzer$$executeSameContext(Analyzer.scala:222)\r\n\tat org.apache.spark.sql.catalyst.analysis.Analyzer.$anonfun$execute$1(Analyzer.scala:218)\r\n\tat org.apache.spark.sql.catalyst.analysis.AnalysisContext$.withNewAnalysisContext(Analyzer.scala:167)\r\n\tat org.apache.spark.sql.catalyst.analysis.Analyzer.execute(Analyzer.scala:218)\r\n\tat org.apache.spark.sql.catalyst.analysis.Analyzer.execute(Analyzer.scala:182)\r\n\tat org.apache.spark.sql.catalyst.rules.RuleExecutor.$anonfun$executeAndTrack$1(RuleExecutor.scala:179)\r\n\tat org.apache.spark.sql.catalyst.QueryPlanningTracker$.withTracker(QueryPlanningTracker.scala:88)\r\n\tat org.apache.spark.sql.catalyst.rules.RuleExecutor.executeAndTrack(RuleExecutor.scala:179)\r\n\tat org.apache.spark.sql.catalyst.analysis.Analyzer.$anonfun$executeAndCheck$1(Analyzer.scala:203)\r\n\tat org.apache.spark.sql.catalyst.plans.logical.AnalysisHelper$.markInAnalyzer(AnalysisHelper.scala:330)\r\n\tat org.apache.spark.sql.catalyst.analysis.Analyzer.executeAndCheck(Analyzer.scala:202)\r\n\tat org.apache.spark.sql.execution.QueryExecution.$anonfun$analyzed$1(QueryExecution.scala:88)\r\n\tat org.apache.spark.sql.catalyst.QueryPlanningTracker.measurePhase(QueryPlanningTracker.scala:111)\r\n\tat org.apache.spark.sql.execution.QueryExecution.$anonfun$executePhase$1(QueryExecution.scala:196)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.execution.QueryExecution.executePhase(QueryExecution.scala:196)\r\n\tat org.apache.spark.sql.execution.QueryExecution.analyzed$lzycompute(QueryExecution.scala:88)\r\n\tat org.apache.spark.sql.execution.QueryExecution.analyzed(QueryExecution.scala:86)\r\n\tat org.apache.spark.sql.execution.QueryExecution.assertAnalyzed(QueryExecution.scala:78)\r\n\tat org.apache.spark.sql.Dataset$.$anonfun$ofRows$2(Dataset.scala:98)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.Dataset$.ofRows(Dataset.scala:96)\r\n\tat org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:618)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.SparkSession.sql(SparkSession.scala:613)\r\n\tat org.apache.spark.sql.SQLContext.sql(SQLContext.scala:651)\r\n\tat org.apache.spark.sql.hive.thriftserver.SparkExecuteStatementOperation.org$apache$spark$sql$hive$thriftserver$SparkExecuteStatementOperation$$execute(SparkExecuteStatementOperation.scala:291)\r\n\t... 16 more (state=,code=0)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110582285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110603246","html_url":"https://github.com/apache/iceberg/pull/4166#issuecomment-1110603246","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4166","id":1110603246,"node_id":"IC_kwDOCW7NX85CMnXu","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T06:40:41Z","updated_at":"2022-04-27T06:40:41Z","author_association":"MEMBER","body":"As a follow-up, can we deprecate and eventually remove lock manager for Glue, and rely on version IDs?\r\nthis would ensure compatibility with other applications.\r\n\r\ncc @rdblue @jackye1995 @alexjo2144  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110603246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110610155","html_url":"https://github.com/apache/iceberg/issues/4624#issuecomment-1110610155","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4624","id":1110610155,"node_id":"IC_kwDOCW7NX85CMpDr","user":{"login":"yittg","id":4429171,"node_id":"MDQ6VXNlcjQ0MjkxNzE=","avatar_url":"https://avatars.githubusercontent.com/u/4429171?v=4","gravatar_id":"","url":"https://api.github.com/users/yittg","html_url":"https://github.com/yittg","followers_url":"https://api.github.com/users/yittg/followers","following_url":"https://api.github.com/users/yittg/following{/other_user}","gists_url":"https://api.github.com/users/yittg/gists{/gist_id}","starred_url":"https://api.github.com/users/yittg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yittg/subscriptions","organizations_url":"https://api.github.com/users/yittg/orgs","repos_url":"https://api.github.com/users/yittg/repos","events_url":"https://api.github.com/users/yittg/events{/privacy}","received_events_url":"https://api.github.com/users/yittg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T06:49:39Z","updated_at":"2022-04-27T06:49:39Z","author_association":"CONTRIBUTOR","body":"Thanks @kbendick . Totally agree with you about whether and how to backport it to Flink 1.14. We can provide a property for user to choose the prefer action if it is strongly required.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110610155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110612585","html_url":"https://github.com/apache/iceberg/pull/4595#issuecomment-1110612585","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4595","id":1110612585,"node_id":"IC_kwDOCW7NX85CMppp","user":{"login":"ggershinsky","id":12033212,"node_id":"MDQ6VXNlcjEyMDMzMjEy","avatar_url":"https://avatars.githubusercontent.com/u/12033212?v=4","gravatar_id":"","url":"https://api.github.com/users/ggershinsky","html_url":"https://github.com/ggershinsky","followers_url":"https://api.github.com/users/ggershinsky/followers","following_url":"https://api.github.com/users/ggershinsky/following{/other_user}","gists_url":"https://api.github.com/users/ggershinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/ggershinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ggershinsky/subscriptions","organizations_url":"https://api.github.com/users/ggershinsky/orgs","repos_url":"https://api.github.com/users/ggershinsky/repos","events_url":"https://api.github.com/users/ggershinsky/events{/privacy}","received_events_url":"https://api.github.com/users/ggershinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T06:52:43Z","updated_at":"2022-04-27T06:52:43Z","author_association":"CONTRIBUTOR","body":"Nice optimization, LGTM","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110612585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110614217","html_url":"https://github.com/apache/iceberg/pull/4246#issuecomment-1110614217","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4246","id":1110614217,"node_id":"IC_kwDOCW7NX85CMqDJ","user":{"login":"wuwenchi","id":19755729,"node_id":"MDQ6VXNlcjE5NzU1NzI5","avatar_url":"https://avatars.githubusercontent.com/u/19755729?v=4","gravatar_id":"","url":"https://api.github.com/users/wuwenchi","html_url":"https://github.com/wuwenchi","followers_url":"https://api.github.com/users/wuwenchi/followers","following_url":"https://api.github.com/users/wuwenchi/following{/other_user}","gists_url":"https://api.github.com/users/wuwenchi/gists{/gist_id}","starred_url":"https://api.github.com/users/wuwenchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuwenchi/subscriptions","organizations_url":"https://api.github.com/users/wuwenchi/orgs","repos_url":"https://api.github.com/users/wuwenchi/repos","events_url":"https://api.github.com/users/wuwenchi/events{/privacy}","received_events_url":"https://api.github.com/users/wuwenchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T06:54:53Z","updated_at":"2022-04-27T06:54:53Z","author_association":"CONTRIBUTOR","body":"Hello, @hililiwei , can you help with a question?\r\n\r\nIn PR #4625, I want to support watermark and computed columns with `Schema` and `ResolvedSchema`. I plan to record these expressions in table properties. However, when the user modifies the expression through the table properties, the content of the expression needs to be verified. \r\n\r\nI first created a builder through `Schema.Builder`, and then want to use the `resolve` method of `Schema` to convert it to `ResolvedSchema`. In this conversion process, the verification of the expression has actually been completed.\r\n\r\nBut the problem is that the input parameter of resolve is a schemaResolver. This value is a private property in `CatalogManager` and it is not available in the context where the user modifies the table property. So I built one myself by this method:\r\n```\r\n  public static ResolvedSchema convertToResolvedSchema(CatalogTable table) {\r\n    StreamExecutionEnvironment env =  StreamExecutionEnvironment.getExecutionEnvironment(new Configuration());\r\n    StreamTableEnvironment streamTableEnvironment = StreamTableEnvironment.create(env);\r\n    CatalogManager catalogManager = ((TableEnvironmentImpl) streamTableEnvironment).getCatalogManager();\r\n    SchemaResolver schemaResolver = catalogManager.getSchemaResolver();\r\n    return table.getUnresolvedSchema().resolve(schemaResolver);\r\n  }\r\n```\r\n\r\nBut I feel this method is not very good, do you have a better solution?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110614217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110671661","html_url":"https://github.com/apache/iceberg/issues/4615#issuecomment-1110671661","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4615","id":1110671661,"node_id":"IC_kwDOCW7NX85CM4Et","user":{"login":"felixYyu","id":3785228,"node_id":"MDQ6VXNlcjM3ODUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3785228?v=4","gravatar_id":"","url":"https://api.github.com/users/felixYyu","html_url":"https://github.com/felixYyu","followers_url":"https://api.github.com/users/felixYyu/followers","following_url":"https://api.github.com/users/felixYyu/following{/other_user}","gists_url":"https://api.github.com/users/felixYyu/gists{/gist_id}","starred_url":"https://api.github.com/users/felixYyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixYyu/subscriptions","organizations_url":"https://api.github.com/users/felixYyu/orgs","repos_url":"https://api.github.com/users/felixYyu/repos","events_url":"https://api.github.com/users/felixYyu/events{/privacy}","received_events_url":"https://api.github.com/users/felixYyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T07:55:13Z","updated_at":"2022-04-27T07:55:13Z","author_association":"CONTRIBUTOR","body":"> ALTER TABLE hadoop_prod.default.test_evolution7 SET TBLPROPERTIES ('comment' = 'A table comment.')\r\n\r\n> ALTER TABLE hadoop_prod.default.test_evolution7 ALTER COLUMN point COMMENT \"new comment\"\r\n\r\nthe syntax of Spark sql can work @kbendick . show DDL detail following:\r\n```\r\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n|createtab_stmt                                                                                                                                                                                                                                                                                                                                                                                                                        |\r\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n|CREATE TABLE hadoop_prod.default.test_evolution7 (\\n  `col0` BIGINT,\\n  `col10` BIGINT,\\n  `point` STRUCT<`x`: DOUBLE, `y`: DOUBLE> COMMENT 'new comment')\\nUSING iceberg\\nCOMMENT 'A table comment.'\\nLOCATION 'file:///D:/lake-iceberg/warehouse/default/test_evolution7'\\nTBLPROPERTIES(\\n  'current-snapshot-id' = 'none',\\n  'format' = 'iceberg/parquet',\\n  'format-version' = '1',\\n  'write.delete.mode' = 'merge-on-read')\\n|\r\n+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110671661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110680201","html_url":"https://github.com/apache/iceberg/issues/4615#issuecomment-1110680201","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4615","id":1110680201,"node_id":"IC_kwDOCW7NX85CM6KJ","user":{"login":"felixYyu","id":3785228,"node_id":"MDQ6VXNlcjM3ODUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3785228?v=4","gravatar_id":"","url":"https://api.github.com/users/felixYyu","html_url":"https://github.com/felixYyu","followers_url":"https://api.github.com/users/felixYyu/followers","following_url":"https://api.github.com/users/felixYyu/following{/other_user}","gists_url":"https://api.github.com/users/felixYyu/gists{/gist_id}","starred_url":"https://api.github.com/users/felixYyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixYyu/subscriptions","organizations_url":"https://api.github.com/users/felixYyu/orgs","repos_url":"https://api.github.com/users/felixYyu/repos","events_url":"https://api.github.com/users/felixYyu/events{/privacy}","received_events_url":"https://api.github.com/users/felixYyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T08:03:09Z","updated_at":"2022-04-27T08:03:09Z","author_association":"CONTRIBUTOR","body":"I will open a PR to add this to the Spark docs.  @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110680201/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110720303","html_url":"https://github.com/apache/iceberg/pull/4645#issuecomment-1110720303","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4645","id":1110720303,"node_id":"IC_kwDOCW7NX85CND8v","user":{"login":"felixYyu","id":3785228,"node_id":"MDQ6VXNlcjM3ODUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3785228?v=4","gravatar_id":"","url":"https://api.github.com/users/felixYyu","html_url":"https://github.com/felixYyu","followers_url":"https://api.github.com/users/felixYyu/followers","following_url":"https://api.github.com/users/felixYyu/following{/other_user}","gists_url":"https://api.github.com/users/felixYyu/gists{/gist_id}","starred_url":"https://api.github.com/users/felixYyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixYyu/subscriptions","organizations_url":"https://api.github.com/users/felixYyu/orgs","repos_url":"https://api.github.com/users/felixYyu/repos","events_url":"https://api.github.com/users/felixYyu/events{/privacy}","received_events_url":"https://api.github.com/users/felixYyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T08:39:49Z","updated_at":"2022-04-27T08:39:49Z","author_association":"CONTRIBUTOR","body":"cc: @kbendick @cccs-jc ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110720303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110763755","html_url":"https://github.com/apache/iceberg/issues/4628#issuecomment-1110763755","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4628","id":1110763755,"node_id":"IC_kwDOCW7NX85CNOjr","user":{"login":"scaladevspark","id":101802776,"node_id":"U_kgDOBhFjGA","avatar_url":"https://avatars.githubusercontent.com/u/101802776?v=4","gravatar_id":"","url":"https://api.github.com/users/scaladevspark","html_url":"https://github.com/scaladevspark","followers_url":"https://api.github.com/users/scaladevspark/followers","following_url":"https://api.github.com/users/scaladevspark/following{/other_user}","gists_url":"https://api.github.com/users/scaladevspark/gists{/gist_id}","starred_url":"https://api.github.com/users/scaladevspark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scaladevspark/subscriptions","organizations_url":"https://api.github.com/users/scaladevspark/orgs","repos_url":"https://api.github.com/users/scaladevspark/repos","events_url":"https://api.github.com/users/scaladevspark/events{/privacy}","received_events_url":"https://api.github.com/users/scaladevspark/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T09:14:27Z","updated_at":"2022-04-27T09:14:27Z","author_association":"NONE","body":"btw @RussellSpitzer do you happen to know if you can bucket via the writeTo api? It seems possible with iceberg via spark sql CREATE TABLE prod.db.sample (\r\n    id bigint,\r\n    data string,\r\n    category string,\r\n    ts timestamp)\r\nUSING iceberg\r\nPARTITIONED BY (bucket(16, id), days(ts), category)\r\n\r\nbut have not found any way to do it via writeTo. Thanks again!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110763755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110794761","html_url":"https://github.com/apache/iceberg/issues/4646#issuecomment-1110794761","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4646","id":1110794761,"node_id":"IC_kwDOCW7NX85CNWIJ","user":{"login":"felixYyu","id":3785228,"node_id":"MDQ6VXNlcjM3ODUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3785228?v=4","gravatar_id":"","url":"https://api.github.com/users/felixYyu","html_url":"https://github.com/felixYyu","followers_url":"https://api.github.com/users/felixYyu/followers","following_url":"https://api.github.com/users/felixYyu/following{/other_user}","gists_url":"https://api.github.com/users/felixYyu/gists{/gist_id}","starred_url":"https://api.github.com/users/felixYyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixYyu/subscriptions","organizations_url":"https://api.github.com/users/felixYyu/orgs","repos_url":"https://api.github.com/users/felixYyu/repos","events_url":"https://api.github.com/users/felixYyu/events{/privacy}","received_events_url":"https://api.github.com/users/felixYyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T09:44:29Z","updated_at":"2022-04-27T09:44:29Z","author_association":"CONTRIBUTOR","body":"[sql-extensions](https://iceberg.apache.org/docs/latest/spark-configuration/#sql-extensions)\r\n\r\n`ALTER TABLE prod.db.sample ADD PARTITION FIELD bucket(16, id)`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110794761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110812285","html_url":"https://github.com/apache/iceberg/issues/4646#issuecomment-1110812285","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4646","id":1110812285,"node_id":"IC_kwDOCW7NX85CNaZ9","user":{"login":"scaladevspark","id":101802776,"node_id":"U_kgDOBhFjGA","avatar_url":"https://avatars.githubusercontent.com/u/101802776?v=4","gravatar_id":"","url":"https://api.github.com/users/scaladevspark","html_url":"https://github.com/scaladevspark","followers_url":"https://api.github.com/users/scaladevspark/followers","following_url":"https://api.github.com/users/scaladevspark/following{/other_user}","gists_url":"https://api.github.com/users/scaladevspark/gists{/gist_id}","starred_url":"https://api.github.com/users/scaladevspark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scaladevspark/subscriptions","organizations_url":"https://api.github.com/users/scaladevspark/orgs","repos_url":"https://api.github.com/users/scaladevspark/repos","events_url":"https://api.github.com/users/scaladevspark/events{/privacy}","received_events_url":"https://api.github.com/users/scaladevspark/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T10:02:42Z","updated_at":"2022-04-27T10:02:42Z","author_association":"NONE","body":"yes, it can be done via sql as seen in the link I posted.\r\n\r\nI am asking if you can do it via writeTo api and if there is a way to do a bucket without a partition","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110812285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110963057","html_url":"https://github.com/apache/iceberg/issues/4647#issuecomment-1110963057","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4647","id":1110963057,"node_id":"IC_kwDOCW7NX85CN_Nx","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T12:51:56Z","updated_at":"2022-04-27T12:51:56Z","author_association":"MEMBER","body":"> For example DELETED_RECORDS_PROP, ADDED_POS_DELETES_PROP, REMOVED_POS_DELETES_PROP, ADDED_EQ_DELETES_PROP etc. could be set to 0 by default.\r\n\r\nAt least for snapshots created with `table.newDelete()....commit()`.\r\n\r\nThis is needed in Trino to reliably provide number of deleted rows to the user, _also_ when delete happens to delete no files.\r\n(Related discussion https://github.com/trinodb/trino/pull/12136#discussion_r858518648)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1110963057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111133124","html_url":"https://github.com/apache/iceberg/issues/4621#issuecomment-1111133124","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4621","id":1111133124,"node_id":"IC_kwDOCW7NX85COovE","user":{"login":"hangc0276","id":5436568,"node_id":"MDQ6VXNlcjU0MzY1Njg=","avatar_url":"https://avatars.githubusercontent.com/u/5436568?v=4","gravatar_id":"","url":"https://api.github.com/users/hangc0276","html_url":"https://github.com/hangc0276","followers_url":"https://api.github.com/users/hangc0276/followers","following_url":"https://api.github.com/users/hangc0276/following{/other_user}","gists_url":"https://api.github.com/users/hangc0276/gists{/gist_id}","starred_url":"https://api.github.com/users/hangc0276/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hangc0276/subscriptions","organizations_url":"https://api.github.com/users/hangc0276/orgs","repos_url":"https://api.github.com/users/hangc0276/repos","events_url":"https://api.github.com/users/hangc0276/events{/privacy}","received_events_url":"https://api.github.com/users/hangc0276/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T15:20:34Z","updated_at":"2022-04-27T15:20:34Z","author_association":"CONTRIBUTOR","body":"> You should be able to reconstruct an order, but I'm not sure whether you'd consider it the _same_ order or even if there is an _original_ record/row order.\r\n> \r\n> Most systems that work with Iceberg don't have an order because they process data in parallel tasks. Each task has a record order, but there's no order between tasks. For example, when Flink processes data from a Kafka topic, there is order within each Kafka partition, but no order across partitions or really across Flink tasks. Does Pulsar have a concept of total order over rows?\r\n> \r\n> I said above that you can reconstruct an order. That's because Iceberg keeps writes in order. For a given append operation, Iceberg writes the data file metadata into a manifest file in the original order. So all you need to do is read snapshots sequentially, order data files sequentially, and then read records from data files sequentially. We could formalize that a bit so that we can keep track of file order within a commit, but I'm skeptical that it is valuable given that most systems rely on partial ordering and not total ordering.\r\n\r\n@rdblue @RussellSpitzer @flyrain Thank you for your patient reply.\r\n\r\nFor Pulsar, we only need partial ordering instead of total ordering. Let me explain how we integrate Pulsar topic with Iceberg.\r\n\r\nWe will write one topic's messages into one iceberg table. For a Pulsar topic, it has many partitions, and for each partition, we will create an iceberg writer to deal with message writing. For one message, it will be fetched from one topic partition and then written into iceberg table with additional metadata fields, such as <partitionId, ledgerId, entryId> (<ledgerId, entryId> used to specify one message named `MessageId`). For messages from different topic partition, the additional metadata fields `partitionId` will be different, and we won't care about the message order between different topic partitions. \r\n\r\nFor messages from the same topic partition, they will be written into iceberg table as the same order they stored in topic partition. The metadata fields <ledgerId, entryId> for messages will be strictly increasing. Such as [<1, 0>, <1, 1>, <1, 2>, <2, 0>, <2, 1>, <3, 0>, <3, 1>]. \r\n\r\nWe will read records from iceberg table by specify `partitionId` and `MessageId` range. For example, we specify partitionId 0 and messageId range [<1, 0>, <10, 20>].  The iceberg reader need to return the records with MessageId strictly increasing order.\r\n\r\nThe reader need to support partial key pair order for the returned records, otherwise, it's hard for Pulsar to reorder the records returned from Iceberg reader. Pulsar can keep writes order in partition.\r\n\r\nFor Iceberg writer, it will write records sequentially into multiple parquet files. For Iceberg reader, we will specify partitionId and MessageId range to read, it can keep the record order in one parquet file, but it's hard to keep order between multiple parquet files.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111133124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111162830","html_url":"https://github.com/apache/iceberg/pull/4650#issuecomment-1111162830","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4650","id":1111162830,"node_id":"IC_kwDOCW7NX85COv_O","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T15:47:07Z","updated_at":"2022-04-27T15:47:07Z","author_association":"CONTRIBUTOR","body":"cc: @cabhishek @CircArgs @dramaticlly @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111162830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111222452","html_url":"https://github.com/apache/iceberg/pull/4605#issuecomment-1111222452","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4605","id":1111222452,"node_id":"IC_kwDOCW7NX85CO-i0","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T16:43:15Z","updated_at":"2022-04-27T16:43:15Z","author_association":"CONTRIBUTOR","body":"FWIW this function was developed by @marton-bod for Hive here: [HIVE-25007](https://issues.apache.org/jira/browse/HIVE-25007).\r\n\r\nIn Hive 4 this is working without the setting of the config with simple Hive queries.\r\n\r\nThanks for porting it @southernriver!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111222452/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111306032","html_url":"https://github.com/apache/iceberg/pull/4630#issuecomment-1111306032","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4630","id":1111306032,"node_id":"IC_kwDOCW7NX85CPS8w","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T17:48:02Z","updated_at":"2022-04-27T17:48:02Z","author_association":"COLLABORATOR","body":"Thanks @rajarshisarkar for extra review.  \r\n\r\nActually I was thinking, should we do update other Spark versions as well?  (I've seen changes go separately or together, but this seems small enough that it can go in together in same commit to me).  @Andre9580 what do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111306032/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111328182","html_url":"https://github.com/apache/iceberg/pull/4638#issuecomment-1111328182","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4638","id":1111328182,"node_id":"IC_kwDOCW7NX85CPYW2","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:12:49Z","updated_at":"2022-04-27T18:12:49Z","author_association":"CONTRIBUTOR","body":"I really like this approach due to the simplicity and how well it integrates into the current build process.\r\n\r\n+1 (will wait on other feedback)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111328182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111340280","html_url":"https://github.com/apache/iceberg/pull/4651#issuecomment-1111340280","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4651","id":1111340280,"node_id":"IC_kwDOCW7NX85CPbT4","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:24:48Z","updated_at":"2022-04-27T18:24:48Z","author_association":"COLLABORATOR","body":"I think the first change makes sense, the second one of raising it to the TableOperations base class may not make sense, I am not sure if all TableOperations in the future (particularly REST) will use this mechanism of metadata.json files?  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111340280/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111341897","html_url":"https://github.com/apache/iceberg/pull/4635#issuecomment-1111341897","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4635","id":1111341897,"node_id":"IC_kwDOCW7NX85CPbtJ","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:26:30Z","updated_at":"2022-04-27T18:26:30Z","author_association":"CONTRIBUTOR","body":"This is one of those cases where AssertJ could help with convenience checks like `assertThat(actual).hasSameElementsAs(expected)`, but since we're not using that library here yet, this seems like a reasonable approach. Alternatively, you could do something like the following wrapped in a utility function:\r\n\r\n```\r\nassertTrue(expected.size() == actual.size() && expected.containsAll(actual) && actual.containsAll(expected));\r\n``","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111341897/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111345862","html_url":"https://github.com/apache/iceberg/pull/4635#issuecomment-1111345862","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4635","id":1111345862,"node_id":"IC_kwDOCW7NX85CPcrG","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:30:53Z","updated_at":"2022-04-27T18:30:53Z","author_association":"CONTRIBUTOR","body":"Yeah adding a convenience function makes sense.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111345862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111348666","html_url":"https://github.com/apache/iceberg/pull/4643#issuecomment-1111348666","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4643","id":1111348666,"node_id":"IC_kwDOCW7NX85CPdW6","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:33:38Z","updated_at":"2022-04-27T18:33:38Z","author_association":"MEMBER","body":"What does this file do?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111348666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111351472","html_url":"https://github.com/apache/iceberg/pull/4641#issuecomment-1111351472","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4641","id":1111351472,"node_id":"IC_kwDOCW7NX85CPeCw","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:36:52Z","updated_at":"2022-04-27T18:36:52Z","author_association":"CONTRIBUTOR","body":"This looks like a good first step to me. We'll have to fix the FileIO problem, but eventually we don't want to be passing FileIO into TableMetadata anyway. Everything should work fine and we can fix up the FileIO in a follow-up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111351472/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111352589","html_url":"https://github.com/apache/iceberg/pull/4643#issuecomment-1111352589","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4643","id":1111352589,"node_id":"IC_kwDOCW7NX85CPeUN","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:38:17Z","updated_at":"2022-04-27T18:38:17Z","author_association":"COLLABORATOR","body":"I'm not sure the exact repo setup, but I remember it was set up by @cwsteinbach to give non-committers some permission like assign, close issues","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111352589/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111355418","html_url":"https://github.com/apache/iceberg/pull/4635#issuecomment-1111355418","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4635","id":1111355418,"node_id":"IC_kwDOCW7NX85CPfAa","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:41:35Z","updated_at":"2022-04-27T18:41:35Z","author_association":"CONTRIBUTOR","body":"Actually, it seems we do have the `AssertJ` library available for this subproject, so I'll just use that unless there's opposition to it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111355418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111366193","html_url":"https://github.com/apache/iceberg/pull/4630#issuecomment-1111366193","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4630","id":1111366193,"node_id":"IC_kwDOCW7NX85CPhox","user":{"login":"Andre9580","id":34575854,"node_id":"MDQ6VXNlcjM0NTc1ODU0","avatar_url":"https://avatars.githubusercontent.com/u/34575854?v=4","gravatar_id":"","url":"https://api.github.com/users/Andre9580","html_url":"https://github.com/Andre9580","followers_url":"https://api.github.com/users/Andre9580/followers","following_url":"https://api.github.com/users/Andre9580/following{/other_user}","gists_url":"https://api.github.com/users/Andre9580/gists{/gist_id}","starred_url":"https://api.github.com/users/Andre9580/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andre9580/subscriptions","organizations_url":"https://api.github.com/users/Andre9580/orgs","repos_url":"https://api.github.com/users/Andre9580/repos","events_url":"https://api.github.com/users/Andre9580/events{/privacy}","received_events_url":"https://api.github.com/users/Andre9580/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T18:54:18Z","updated_at":"2022-04-27T18:54:18Z","author_association":"CONTRIBUTOR","body":"Thanks both of you for the review, @[szehon-ho](https://github.com/szehon-ho) your comment makes sense to me, I can update the other Spark version as well later today :) ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111366193/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111379942","html_url":"https://github.com/apache/iceberg/issues/4621#issuecomment-1111379942","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4621","id":1111379942,"node_id":"IC_kwDOCW7NX85CPk_m","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T19:10:04Z","updated_at":"2022-04-27T19:10:04Z","author_association":"CONTRIBUTOR","body":"@hangc0276 if you're guaranteeing that each partition is written by only one writer (which I think is given) then you should be able to accomplish this already because you process records in order within a partition to the file, then when you read they have the same order.\r\n\r\nThe challenge is what to do when a partition is split across multiple files within a snapshot, right? The easy solution is not to split partitions across files, but you could also look at file metadata to see which one has the lowest `ledgerId, entryId` pair.\r\n\r\nI think you should be able to do this without much trouble.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111379942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111416743","html_url":"https://github.com/apache/iceberg/pull/4651#issuecomment-1111416743","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4651","id":1111416743,"node_id":"IC_kwDOCW7NX85CPt-n","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T19:50:44Z","updated_at":"2022-04-27T19:50:44Z","author_association":"CONTRIBUTOR","body":"I agree with @szehon-ho's assessment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111416743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111423337","html_url":"https://github.com/apache/iceberg/pull/4635#issuecomment-1111423337","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4635","id":1111423337,"node_id":"IC_kwDOCW7NX85CPvlp","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T19:58:18Z","updated_at":"2022-04-27T20:01:15Z","author_association":"CONTRIBUTOR","body":"Added a utility function `assertSameElements` into `FlinkTestBase`.\r\n\r\nIn the interest of keeping the diff minimal, I didn't remove existing assertions on the size of the result (although that is checked by `assertSameElements`).\r\n\r\nI also didn't update any of the results with only one element. If we want to do that, we can use `Collections.singleton` to reuse the comparison.\r\n\r\nLet me know if removing the (redundant) size checks is a good idea. I think so because in the case of a failure, we'll see the incorrect records instead of just the incorrect size but I opted to be conservative and change less code.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111423337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111450992","html_url":"https://github.com/apache/iceberg/pull/4643#issuecomment-1111450992","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4643","id":1111450992,"node_id":"IC_kwDOCW7NX85CP2Vw","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T20:29:34Z","updated_at":"2022-04-27T20:29:34Z","author_association":"CONTRIBUTOR","body":"Yeah. Szehon is correct. It allows for some people who are not committers to have a subset of permissions. I tried looking for an actual list of what it does in the ASF docs but came up empty handed.\r\n\r\nThis isn't pressing, and we should make sure that @szehon-ho's account has been properly configured so as not to accidentally remove ability to work.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111450992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111452539","html_url":"https://github.com/apache/iceberg/pull/4643#issuecomment-1111452539","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4643","id":1111452539,"node_id":"IC_kwDOCW7NX85CP2t7","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T20:31:29Z","updated_at":"2022-04-27T20:31:29Z","author_association":"CONTRIBUTOR","body":"I found this very small documentation on it: https://cwiki.apache.org/confluence/display/INFRA/Git+-+.asf.yaml+features#Git.asf.yamlfeatures-AssigningexternalcollaboratorswiththetriageroleonGitHub\r\n\r\nIt might be out of date, as I thought it allowed for only 10 people (and of course I only found that page after several redirects for \"this page is no longer present). But that's the best documentation I could find on the matter.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111452539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111454200","html_url":"https://github.com/apache/iceberg/pull/4643#issuecomment-1111454200","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4643","id":1111454200,"node_id":"IC_kwDOCW7NX85CP3H4","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T20:33:30Z","updated_at":"2022-04-27T20:33:30Z","author_association":"CONTRIBUTOR","body":"From the documentation I linked:\r\n\r\n```\r\nProjects may assign external (non-committer) collaborators the triage role for their repository.\r\nThe triage role allows people to assign, edit, and close issues and pull requests, without giving them write access to the code.\r\nAdd such people to the 'collaborators' stanza inside the github section, as a list of GitHub IDs:\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111454200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111495731","html_url":"https://github.com/apache/iceberg/pull/4650#issuecomment-1111495731","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4650","id":1111495731,"node_id":"IC_kwDOCW7NX85CQBQz","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T21:21:13Z","updated_at":"2022-04-27T21:21:13Z","author_association":"CONTRIBUTOR","body":"Thanks @samredai!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111495731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111580150","html_url":"https://github.com/apache/iceberg/pull/4242#issuecomment-1111580150","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4242","id":1111580150,"node_id":"IC_kwDOCW7NX85CQV32","user":{"login":"funcheetah","id":52840691,"node_id":"MDQ6VXNlcjUyODQwNjkx","avatar_url":"https://avatars.githubusercontent.com/u/52840691?v=4","gravatar_id":"","url":"https://api.github.com/users/funcheetah","html_url":"https://github.com/funcheetah","followers_url":"https://api.github.com/users/funcheetah/followers","following_url":"https://api.github.com/users/funcheetah/following{/other_user}","gists_url":"https://api.github.com/users/funcheetah/gists{/gist_id}","starred_url":"https://api.github.com/users/funcheetah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/funcheetah/subscriptions","organizations_url":"https://api.github.com/users/funcheetah/orgs","repos_url":"https://api.github.com/users/funcheetah/repos","events_url":"https://api.github.com/users/funcheetah/events{/privacy}","received_events_url":"https://api.github.com/users/funcheetah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T23:40:02Z","updated_at":"2022-04-27T23:40:02Z","author_association":"NONE","body":"Created PR: https://github.com/apache/iceberg/pull/4654 for ORC. We can focus on reviewing Avro in this PR. cc: @wmoustafa @shardulm94 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111580150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111631982","html_url":"https://github.com/apache/iceberg/pull/4630#issuecomment-1111631982","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4630","id":1111631982,"node_id":"IC_kwDOCW7NX85CQihu","user":{"login":"Andre9580","id":34575854,"node_id":"MDQ6VXNlcjM0NTc1ODU0","avatar_url":"https://avatars.githubusercontent.com/u/34575854?v=4","gravatar_id":"","url":"https://api.github.com/users/Andre9580","html_url":"https://github.com/Andre9580","followers_url":"https://api.github.com/users/Andre9580/followers","following_url":"https://api.github.com/users/Andre9580/following{/other_user}","gists_url":"https://api.github.com/users/Andre9580/gists{/gist_id}","starred_url":"https://api.github.com/users/Andre9580/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Andre9580/subscriptions","organizations_url":"https://api.github.com/users/Andre9580/orgs","repos_url":"https://api.github.com/users/Andre9580/repos","events_url":"https://api.github.com/users/Andre9580/events{/privacy}","received_events_url":"https://api.github.com/users/Andre9580/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T01:14:18Z","updated_at":"2022-04-28T01:14:18Z","author_association":"CONTRIBUTOR","body":"It seems like a test `org.apache.iceberg.spark.sql.TestDeleteFrom` is failing for `Spark 3.0` although the test is successful for Spark `3.1` and `3.2`.\r\n\r\n```\r\norg.apache.iceberg.spark.sql.TestDeleteFrom > testDeleteFromUnpartitionedTable[catalogName = testhadoop, implementation = org.apache.iceberg.spark.SparkCatalog, config = {type=hadoop}] FAILED\r\n    java.lang.AssertionError: [Should not delete when not all rows of a file match the filter] \r\n    Expecting actual throwable to be an instance of:\r\n      java.lang.IllegalArgumentException\r\n    but was:\r\n      org.apache.iceberg.exceptions.ValidationException: Cannot delete file where some, but not all, rows match filter ref(name=\"id\") < 2: file:/var/folders/_y/3bcnyg2s5hvfrbvr715c06n40000gn/T/warehouse5192576849229022400.tmp/default/table/data/00000-6-dbcb782f-4f45-4758-97e1-e6635f5fab97-00001.parquet\r\n    \tat org.apache.iceberg.exceptions.ValidationException.check(ValidationException.java:50)\r\n    \tat org.apache.iceberg.ManifestFilterManager.manifestHasDeletedFiles(ManifestFilterManager.java:365)\r\n    \tat org.apache.iceberg.ManifestFilterManager.filterManifest(ManifestFilterManager.java:307)\r\n    \t...(9 remaining lines not displayed - this can be changed with Assertions.setMaxStackTraceElementsDisplayed)\r\n        at org.apache.iceberg.AssertHelpers.assertThrows(AssertHelpers.java:47)\r\n        at org.apache.iceberg.spark.sql.TestDeleteFrom.testDeleteFromUnpartitionedTable(TestDeleteFrom.java:65)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111631982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111683477","html_url":"https://github.com/apache/iceberg/pull/4625#issuecomment-1111683477","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4625","id":1111683477,"node_id":"IC_kwDOCW7NX85CQvGV","user":{"login":"Zhangg7723","id":18146312,"node_id":"MDQ6VXNlcjE4MTQ2MzEy","avatar_url":"https://avatars.githubusercontent.com/u/18146312?v=4","gravatar_id":"","url":"https://api.github.com/users/Zhangg7723","html_url":"https://github.com/Zhangg7723","followers_url":"https://api.github.com/users/Zhangg7723/followers","following_url":"https://api.github.com/users/Zhangg7723/following{/other_user}","gists_url":"https://api.github.com/users/Zhangg7723/gists{/gist_id}","starred_url":"https://api.github.com/users/Zhangg7723/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zhangg7723/subscriptions","organizations_url":"https://api.github.com/users/Zhangg7723/orgs","repos_url":"https://api.github.com/users/Zhangg7723/repos","events_url":"https://api.github.com/users/Zhangg7723/events{/privacy}","received_events_url":"https://api.github.com/users/Zhangg7723/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T02:47:47Z","updated_at":"2022-04-28T02:47:47Z","author_association":"CONTRIBUTOR","body":"nice job","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111683477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111709852","html_url":"https://github.com/apache/iceberg/pull/2518#issuecomment-1111709852","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2518","id":1111709852,"node_id":"IC_kwDOCW7NX85CQ1ic","user":{"login":"zinking","id":118241,"node_id":"MDQ6VXNlcjExODI0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/118241?v=4","gravatar_id":"","url":"https://api.github.com/users/zinking","html_url":"https://github.com/zinking","followers_url":"https://api.github.com/users/zinking/followers","following_url":"https://api.github.com/users/zinking/following{/other_user}","gists_url":"https://api.github.com/users/zinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zinking/subscriptions","organizations_url":"https://api.github.com/users/zinking/orgs","repos_url":"https://api.github.com/users/zinking/repos","events_url":"https://api.github.com/users/zinking/events{/privacy}","received_events_url":"https://api.github.com/users/zinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T03:40:42Z","updated_at":"2022-04-28T03:40:42Z","author_association":"CONTRIBUTOR","body":"@coolderli  are you still on this? pleasure to pick up where you left and push this forward. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111709852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111741227","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1111741227","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1111741227,"node_id":"IC_kwDOCW7NX85CQ9Mr","user":{"login":"bbasosuho","id":20290980,"node_id":"MDQ6VXNlcjIwMjkwOTgw","avatar_url":"https://avatars.githubusercontent.com/u/20290980?v=4","gravatar_id":"","url":"https://api.github.com/users/bbasosuho","html_url":"https://github.com/bbasosuho","followers_url":"https://api.github.com/users/bbasosuho/followers","following_url":"https://api.github.com/users/bbasosuho/following{/other_user}","gists_url":"https://api.github.com/users/bbasosuho/gists{/gist_id}","starred_url":"https://api.github.com/users/bbasosuho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbasosuho/subscriptions","organizations_url":"https://api.github.com/users/bbasosuho/orgs","repos_url":"https://api.github.com/users/bbasosuho/repos","events_url":"https://api.github.com/users/bbasosuho/events{/privacy}","received_events_url":"https://api.github.com/users/bbasosuho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T04:45:52Z","updated_at":"2022-04-28T04:45:52Z","author_association":"NONE","body":"@ajantha-bhat \r\n So, In java API we need to use copy-on-write (v1 spec) delete for spark 3.1 to understand it.\r\n=> **Where is the v1 spec java API example? I can't find it, so I'm asking.**","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111741227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111756854","html_url":"https://github.com/apache/iceberg/pull/4645#issuecomment-1111756854","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4645","id":1111756854,"node_id":"IC_kwDOCW7NX85CRBA2","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T05:20:00Z","updated_at":"2022-04-28T05:20:00Z","author_association":"CONTRIBUTOR","body":"This looks good to me.\r\n\r\nWhat version of Spark did you verify this with @felixYyu?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111756854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111771475","html_url":"https://github.com/apache/iceberg/issues/4639#issuecomment-1111771475","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4639","id":1111771475,"node_id":"IC_kwDOCW7NX85CRElT","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T05:44:24Z","updated_at":"2022-04-28T05:44:24Z","author_association":"MEMBER","body":"> So, In java API we need to use copy-on-write (v1 spec) delete for spark 3.1 to understand it.\r\n=> Where is the v1 spec java API example? I can't find it, so I'm asking.\r\n\r\nI too couldn't find it. I expected it to be there. I think it is manual scan with filter and append new file and delete old file operation. I am only familiar with SQL. \r\n\r\nLet's wait for @aokolnychyi view point on this issue and callstack.  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111771475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111785657","html_url":"https://github.com/apache/iceberg/pull/4655#issuecomment-1111785657","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4655","id":1111785657,"node_id":"IC_kwDOCW7NX85CRIC5","user":{"login":"ulmako","id":2621219,"node_id":"MDQ6VXNlcjI2MjEyMTk=","avatar_url":"https://avatars.githubusercontent.com/u/2621219?v=4","gravatar_id":"","url":"https://api.github.com/users/ulmako","html_url":"https://github.com/ulmako","followers_url":"https://api.github.com/users/ulmako/followers","following_url":"https://api.github.com/users/ulmako/following{/other_user}","gists_url":"https://api.github.com/users/ulmako/gists{/gist_id}","starred_url":"https://api.github.com/users/ulmako/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ulmako/subscriptions","organizations_url":"https://api.github.com/users/ulmako/orgs","repos_url":"https://api.github.com/users/ulmako/repos","events_url":"https://api.github.com/users/ulmako/events{/privacy}","received_events_url":"https://api.github.com/users/ulmako/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T06:10:30Z","updated_at":"2022-04-28T06:10:30Z","author_association":"CONTRIBUTOR","body":"Hi @rdblue, should I rebase and squash my commits on my branch as well? Or do want to just merge this PR instead?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111785657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111797285","html_url":"https://github.com/apache/iceberg/pull/4645#issuecomment-1111797285","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4645","id":1111797285,"node_id":"IC_kwDOCW7NX85CRK4l","user":{"login":"felixYyu","id":3785228,"node_id":"MDQ6VXNlcjM3ODUyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3785228?v=4","gravatar_id":"","url":"https://api.github.com/users/felixYyu","html_url":"https://github.com/felixYyu","followers_url":"https://api.github.com/users/felixYyu/followers","following_url":"https://api.github.com/users/felixYyu/following{/other_user}","gists_url":"https://api.github.com/users/felixYyu/gists{/gist_id}","starred_url":"https://api.github.com/users/felixYyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixYyu/subscriptions","organizations_url":"https://api.github.com/users/felixYyu/orgs","repos_url":"https://api.github.com/users/felixYyu/repos","events_url":"https://api.github.com/users/felixYyu/events{/privacy}","received_events_url":"https://api.github.com/users/felixYyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T06:28:34Z","updated_at":"2022-04-28T06:28:34Z","author_association":"CONTRIBUTOR","body":"> What version of Spark did you verify this with ?\r\n\r\nspark version 3.2.1 @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111797285/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111806507","html_url":"https://github.com/apache/iceberg/pull/4645#issuecomment-1111806507","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4645","id":1111806507,"node_id":"IC_kwDOCW7NX85CRNIr","user":{"login":"wuwenchi","id":19755729,"node_id":"MDQ6VXNlcjE5NzU1NzI5","avatar_url":"https://avatars.githubusercontent.com/u/19755729?v=4","gravatar_id":"","url":"https://api.github.com/users/wuwenchi","html_url":"https://github.com/wuwenchi","followers_url":"https://api.github.com/users/wuwenchi/followers","following_url":"https://api.github.com/users/wuwenchi/following{/other_user}","gists_url":"https://api.github.com/users/wuwenchi/gists{/gist_id}","starred_url":"https://api.github.com/users/wuwenchi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuwenchi/subscriptions","organizations_url":"https://api.github.com/users/wuwenchi/orgs","repos_url":"https://api.github.com/users/wuwenchi/repos","events_url":"https://api.github.com/users/wuwenchi/events{/privacy}","received_events_url":"https://api.github.com/users/wuwenchi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T06:42:07Z","updated_at":"2022-04-28T06:42:07Z","author_association":"CONTRIBUTOR","body":"This is actually a table property, should it add a description here [https://iceberg.apache.org/docs/latest/configuration/](url) ? @felixYyu @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111806507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111836452","html_url":"https://github.com/apache/iceberg/pull/2518#issuecomment-1111836452","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2518","id":1111836452,"node_id":"IC_kwDOCW7NX85CRUck","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T07:19:04Z","updated_at":"2022-04-28T07:19:04Z","author_association":"COLLABORATOR","body":"Oh I am sorry, I did not notice this pr (should have checked), I made a similar pr here:  #4629, if you want to look at it.  Although I do not change the manifest table as is done here, which may still be valuable as a separate pr.\r\n\r\nBy the way, the delete files are actually deleted, (I added a test in #4141) , just the return counts are wrong.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111836452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111840153","html_url":"https://github.com/apache/iceberg/pull/4630#issuecomment-1111840153","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4630","id":1111840153,"node_id":"IC_kwDOCW7NX85CRVWZ","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T07:23:27Z","updated_at":"2022-04-28T07:23:27Z","author_association":"COLLABORATOR","body":"Yea that makes sense, I think we should fix the test.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111840153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111852116","html_url":"https://github.com/apache/iceberg/pull/2518#issuecomment-1111852116","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2518","id":1111852116,"node_id":"IC_kwDOCW7NX85CRYRU","user":{"login":"zinking","id":118241,"node_id":"MDQ6VXNlcjExODI0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/118241?v=4","gravatar_id":"","url":"https://api.github.com/users/zinking","html_url":"https://github.com/zinking","followers_url":"https://api.github.com/users/zinking/followers","following_url":"https://api.github.com/users/zinking/following{/other_user}","gists_url":"https://api.github.com/users/zinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zinking/subscriptions","organizations_url":"https://api.github.com/users/zinking/orgs","repos_url":"https://api.github.com/users/zinking/repos","events_url":"https://api.github.com/users/zinking/events{/privacy}","received_events_url":"https://api.github.com/users/zinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T07:37:47Z","updated_at":"2022-04-28T07:37:47Z","author_association":"CONTRIBUTOR","body":"> Oh I am sorry, I did not notice this pr (should have checked), I made a similar pr here: #4629, if you want to look at it. Although I do not change the manifest table as is done here, which may still be valuable as a separate pr.\r\n> \r\n> By the way, the delete files are actually deleted, (I added a test in #4141) , just the return counts are wrong.\r\n\r\nthanks for sharing, this one should be closed then.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111852116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111885670","html_url":"https://github.com/apache/iceberg/pull/4630#issuecomment-1111885670","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4630","id":1111885670,"node_id":"IC_kwDOCW7NX85CRgdm","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T08:16:20Z","updated_at":"2022-04-28T08:19:09Z","author_association":"CONTRIBUTOR","body":"Yeah, we need to change the expected exception (along with the message) in the test which is failing:\r\n\r\nhttps://github.com/apache/iceberg/blob/216a085b603859927c43b280d2b4033ac2b2e61e/spark/v3.0/spark/src/test/java/org/apache/iceberg/spark/sql/TestDeleteFrom.java#L65-L67\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1111885670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112000918","html_url":"https://github.com/apache/iceberg/issues/4647#issuecomment-1112000918","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4647","id":1112000918,"node_id":"IC_kwDOCW7NX85CR8mW","user":{"login":"homar","id":49628,"node_id":"MDQ6VXNlcjQ5NjI4","avatar_url":"https://avatars.githubusercontent.com/u/49628?v=4","gravatar_id":"","url":"https://api.github.com/users/homar","html_url":"https://github.com/homar","followers_url":"https://api.github.com/users/homar/followers","following_url":"https://api.github.com/users/homar/following{/other_user}","gists_url":"https://api.github.com/users/homar/gists{/gist_id}","starred_url":"https://api.github.com/users/homar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/homar/subscriptions","organizations_url":"https://api.github.com/users/homar/orgs","repos_url":"https://api.github.com/users/homar/repos","events_url":"https://api.github.com/users/homar/events{/privacy}","received_events_url":"https://api.github.com/users/homar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T10:00:52Z","updated_at":"2022-04-28T10:00:52Z","author_association":"NONE","body":"I made a pr for this https://github.com/apache/iceberg/pull/4660","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112000918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112083959","html_url":"https://github.com/apache/iceberg/pull/4657#issuecomment-1112083959","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4657","id":1112083959,"node_id":"IC_kwDOCW7NX85CSQ33","user":{"login":"melin","id":1145830,"node_id":"MDQ6VXNlcjExNDU4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1145830?v=4","gravatar_id":"","url":"https://api.github.com/users/melin","html_url":"https://github.com/melin","followers_url":"https://api.github.com/users/melin/followers","following_url":"https://api.github.com/users/melin/following{/other_user}","gists_url":"https://api.github.com/users/melin/gists{/gist_id}","starred_url":"https://api.github.com/users/melin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melin/subscriptions","organizations_url":"https://api.github.com/users/melin/orgs","repos_url":"https://api.github.com/users/melin/repos","events_url":"https://api.github.com/users/melin/events{/privacy}","received_events_url":"https://api.github.com/users/melin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T11:19:23Z","updated_at":"2022-04-28T11:19:23Z","author_association":"NONE","body":"PR support spark sql?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112083959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112084791","html_url":"https://github.com/apache/iceberg/pull/4660#issuecomment-1112084791","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4660","id":1112084791,"node_id":"IC_kwDOCW7NX85CSRE3","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T11:20:22Z","updated_at":"2022-04-28T11:20:22Z","author_association":"MEMBER","body":"@danielcweeks can you approve the CI run?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112084791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112153173","html_url":"https://github.com/apache/iceberg/issues/4659#issuecomment-1112153173","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4659","id":1112153173,"node_id":"IC_kwDOCW7NX85CShxV","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T12:38:47Z","updated_at":"2022-04-28T12:40:17Z","author_association":"MEMBER","body":"This is not quite correct. The issue here is that you are specifying a file path (`/warehouse/tablespace/external/hive/iceberg.db/my_iceberg_test`) instead of a table identifier (`iceberg.db.my_iceberg_test`). When you use a file path to load a table in Spark, Iceberg assumes that the data is using a `Hadoop Catalog` because a Hive Catalog Table cannot be read from path alone. A Hive Catalog Table needs to know the specific metadata.json file to load and needs to know where the HMS is to update that value.\r\n\r\nTo load the table correctly, if your Metastore is correctly configured. You setup the Catalog API as specified in the docs https://iceberg.apache.org/docs/latest/getting-started/#adding-catalogs and then you can access your table with\r\n`spark.table(\"catalog.namespace.table\")` or `spark.read.format(\"iceberg\").load(\"catalog.namespace.table\")`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112153173/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112376971","html_url":"https://github.com/apache/iceberg/pull/4657#issuecomment-1112376971","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4657","id":1112376971,"node_id":"IC_kwDOCW7NX85CTYaL","user":{"login":"jzhuge","id":1883812,"node_id":"MDQ6VXNlcjE4ODM4MTI=","avatar_url":"https://avatars.githubusercontent.com/u/1883812?v=4","gravatar_id":"","url":"https://api.github.com/users/jzhuge","html_url":"https://github.com/jzhuge","followers_url":"https://api.github.com/users/jzhuge/followers","following_url":"https://api.github.com/users/jzhuge/following{/other_user}","gists_url":"https://api.github.com/users/jzhuge/gists{/gist_id}","starred_url":"https://api.github.com/users/jzhuge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzhuge/subscriptions","organizations_url":"https://api.github.com/users/jzhuge/orgs","repos_url":"https://api.github.com/users/jzhuge/repos","events_url":"https://api.github.com/users/jzhuge/events{/privacy}","received_events_url":"https://api.github.com/users/jzhuge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T15:54:26Z","updated_at":"2022-04-28T15:54:26Z","author_association":"MEMBER","body":"Yes, will follow up with PR to support Spark ViewCatalog once the commit for ViewCatalog interfaces in https://github.com/apache/spark/pull/35636 is merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112376971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112381193","html_url":"https://github.com/apache/iceberg/issues/4292#issuecomment-1112381193","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4292","id":1112381193,"node_id":"IC_kwDOCW7NX85CTZcJ","user":{"login":"szlta","id":40628386,"node_id":"MDQ6VXNlcjQwNjI4Mzg2","avatar_url":"https://avatars.githubusercontent.com/u/40628386?v=4","gravatar_id":"","url":"https://api.github.com/users/szlta","html_url":"https://github.com/szlta","followers_url":"https://api.github.com/users/szlta/followers","following_url":"https://api.github.com/users/szlta/following{/other_user}","gists_url":"https://api.github.com/users/szlta/gists{/gist_id}","starred_url":"https://api.github.com/users/szlta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szlta/subscriptions","organizations_url":"https://api.github.com/users/szlta/orgs","repos_url":"https://api.github.com/users/szlta/repos","events_url":"https://api.github.com/users/szlta/events{/privacy}","received_events_url":"https://api.github.com/users/szlta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T15:57:46Z","updated_at":"2022-04-28T15:57:46Z","author_association":"CONTRIBUTOR","body":"Yup, we should continue with fixing the column reuse problem at https://github.com/apache/iceberg/issues/4661\r\nAnd I'm closing this one, thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112381193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112398733","html_url":"https://github.com/apache/iceberg/pull/4623#issuecomment-1112398733","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4623","id":1112398733,"node_id":"IC_kwDOCW7NX85CTduN","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T16:14:08Z","updated_at":"2022-04-28T16:14:08Z","author_association":"CONTRIBUTOR","body":"Thanks @danielcweeks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112398733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112451223","html_url":"https://github.com/apache/iceberg/pull/4655#issuecomment-1112451223","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4655","id":1112451223,"node_id":"IC_kwDOCW7NX85CTqiX","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T17:06:20Z","updated_at":"2022-04-28T17:06:20Z","author_association":"CONTRIBUTOR","body":"@ulmako, I'll merge this one. I didn't want to bother you with a big rebase so the work is already done.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112451223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112589800","html_url":"https://github.com/apache/iceberg/pull/4307#issuecomment-1112589800","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4307","id":1112589800,"node_id":"IC_kwDOCW7NX85CUMXo","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T19:42:43Z","updated_at":"2022-04-28T19:42:43Z","author_association":"CONTRIBUTOR","body":"I merged this in #4655. Thanks for fixing this, @ulmako!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112589800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112609856","html_url":"https://github.com/apache/iceberg/issues/3245#issuecomment-1112609856","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3245","id":1112609856,"node_id":"IC_kwDOCW7NX85CURRA","user":{"login":"dhruv-pratap","id":11399509,"node_id":"MDQ6VXNlcjExMzk5NTA5","avatar_url":"https://avatars.githubusercontent.com/u/11399509?v=4","gravatar_id":"","url":"https://api.github.com/users/dhruv-pratap","html_url":"https://github.com/dhruv-pratap","followers_url":"https://api.github.com/users/dhruv-pratap/followers","following_url":"https://api.github.com/users/dhruv-pratap/following{/other_user}","gists_url":"https://api.github.com/users/dhruv-pratap/gists{/gist_id}","starred_url":"https://api.github.com/users/dhruv-pratap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhruv-pratap/subscriptions","organizations_url":"https://api.github.com/users/dhruv-pratap/orgs","repos_url":"https://api.github.com/users/dhruv-pratap/repos","events_url":"https://api.github.com/users/dhruv-pratap/events{/privacy}","received_events_url":"https://api.github.com/users/dhruv-pratap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T20:08:49Z","updated_at":"2022-04-28T20:08:49Z","author_association":"CONTRIBUTOR","body":"@jun-he Can you please assign this task to me?\r\n\r\nI had a discussion with @samredai and @cabhishek on this task today, and we feel it is a nice candidate work-stream to kick-start  in parallel to all the others as catalog would be a nice convergence point for all the other work-streams to integrate into and test. \r\n\r\nTo summarize our discussion, we would be breaking this larger effort into smaller chunks as listed below:\r\n\r\n- [ ] Base Catalog with just table interfaces\r\n- [ ] In-memory catalog implementation (Dictionary based)\r\n- [ ] Add Transaction interfaces to Base Catalog\r\n- [ ] In-memory catalog transaction interfaces implementation\r\n- [ ] REST Catalog Implementation (This might be a separate tracker)\r\n\r\nInitial structure of the implementation we discussed:\r\n\r\n- We already have a `catalog` package, \r\n- We will be adding a `base.py` module in it to contain the `Catalog` base class.\r\n- Extend it as `InMemoryCatalog` in a 'in_memory.py' module under the same 'catalog' package.\r\n\r\nHappy to answer any other questions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112609856/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112636936","html_url":"https://github.com/apache/iceberg/pull/4166#issuecomment-1112636936","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4166","id":1112636936,"node_id":"IC_kwDOCW7NX85CUX4I","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T20:43:18Z","updated_at":"2022-04-28T20:43:18Z","author_association":"CONTRIBUTOR","body":"@findepi, I think the problem is that we don't know that older clients have been updated to use the new commit logic in Glue. I would continue to respect any locking configuration if the user has set it up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112636936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112641357","html_url":"https://github.com/apache/iceberg/pull/4518#issuecomment-1112641357","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4518","id":1112641357,"node_id":"IC_kwDOCW7NX85CUY9N","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T20:48:52Z","updated_at":"2022-04-28T20:48:52Z","author_association":"CONTRIBUTOR","body":"@rizaon, the other PRs are in so you should be able to take advantage of `IOUtil.readFully` and the `ByteBufferInputStream` implementations. I hope that helps!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112641357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112641795","html_url":"https://github.com/apache/iceberg/pull/4518#issuecomment-1112641795","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4518","id":1112641795,"node_id":"IC_kwDOCW7NX85CUZED","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T20:49:26Z","updated_at":"2022-04-28T20:49:26Z","author_association":"CONTRIBUTOR","body":"@findepi, @alexjo2144, FYI. This could be an option for Trino performance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112641795/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112643081","html_url":"https://github.com/apache/iceberg/pull/4637#issuecomment-1112643081","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4637","id":1112643081,"node_id":"IC_kwDOCW7NX85CUZYJ","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-28T20:51:05Z","updated_at":"2022-04-28T21:38:13Z","author_association":"COLLABORATOR","body":"@RussellSpitzer @aokolnychyi @kbendick can you guys take a look if you have time?  Thanks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112643081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112798615","html_url":"https://github.com/apache/iceberg/pull/4595#issuecomment-1112798615","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4595","id":1112798615,"node_id":"IC_kwDOCW7NX85CU_WX","user":{"login":"zhongyujiang","id":42907416,"node_id":"MDQ6VXNlcjQyOTA3NDE2","avatar_url":"https://avatars.githubusercontent.com/u/42907416?v=4","gravatar_id":"","url":"https://api.github.com/users/zhongyujiang","html_url":"https://github.com/zhongyujiang","followers_url":"https://api.github.com/users/zhongyujiang/followers","following_url":"https://api.github.com/users/zhongyujiang/following{/other_user}","gists_url":"https://api.github.com/users/zhongyujiang/gists{/gist_id}","starred_url":"https://api.github.com/users/zhongyujiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhongyujiang/subscriptions","organizations_url":"https://api.github.com/users/zhongyujiang/orgs","repos_url":"https://api.github.com/users/zhongyujiang/repos","events_url":"https://api.github.com/users/zhongyujiang/events{/privacy}","received_events_url":"https://api.github.com/users/zhongyujiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T01:22:44Z","updated_at":"2022-04-29T01:22:44Z","author_association":"CONTRIBUTOR","body":"Thanks for your review and sorry for my late reply.\r\n> Do we have any test from Spark/Hive side?\r\n\r\nThis just did some small code optimizations so I didn't add the test. What kind of tests do you think should be added? @flyrain \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112798615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112804311","html_url":"https://github.com/apache/iceberg/pull/4664#issuecomment-1112804311","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4664","id":1112804311,"node_id":"IC_kwDOCW7NX85CVAvX","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T01:38:05Z","updated_at":"2022-04-29T01:38:05Z","author_association":"CONTRIBUTOR","body":"@funcheetah, these change cannot go in the spec. Iceberg does not allow union data.\r\n\r\nIt is fine for Iceberg implementations to support reading unions as structs for backward compatibility, but that is optional behavior and should not be required.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112804311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112805099","html_url":"https://github.com/apache/iceberg/pull/4553#issuecomment-1112805099","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4553","id":1112805099,"node_id":"IC_kwDOCW7NX85CVA7r","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T01:40:11Z","updated_at":"2022-04-29T01:40:11Z","author_association":"CONTRIBUTOR","body":"1.15.0 was released today - There hasn't been a release announcement but it's on maven central and the staged release candidate haas been pulled.\r\n\r\nI removed the release candidate maven repository from the build file.\r\n\r\nThe only thing now that needs to be updated is to merge this PR https://github.com/apache/iceberg/pull/4635 to handle the flaky tests (I've noticed that different tests in the same file will fail with different orderings on different runs) and then this can be merged in.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112805099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112806849","html_url":"https://github.com/apache/iceberg/pull/4660#issuecomment-1112806849","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4660","id":1112806849,"node_id":"IC_kwDOCW7NX85CVBXB","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T01:45:01Z","updated_at":"2022-04-29T01:45:01Z","author_association":"CONTRIBUTOR","body":"@homar, can you please update the description with information about what you're doing in this PR and why it is needed?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112806849/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112808466","html_url":"https://github.com/apache/iceberg/pull/4644#issuecomment-1112808466","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4644","id":1112808466,"node_id":"IC_kwDOCW7NX85CVBwS","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T01:49:35Z","updated_at":"2022-04-29T01:49:35Z","author_association":"CONTRIBUTOR","body":"@openinx, can you review this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112808466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112831606","html_url":"https://github.com/apache/iceberg/issues/4659#issuecomment-1112831606","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4659","id":1112831606,"node_id":"IC_kwDOCW7NX85CVHZ2","user":{"login":"lichaohao","id":36629179,"node_id":"MDQ6VXNlcjM2NjI5MTc5","avatar_url":"https://avatars.githubusercontent.com/u/36629179?v=4","gravatar_id":"","url":"https://api.github.com/users/lichaohao","html_url":"https://github.com/lichaohao","followers_url":"https://api.github.com/users/lichaohao/followers","following_url":"https://api.github.com/users/lichaohao/following{/other_user}","gists_url":"https://api.github.com/users/lichaohao/gists{/gist_id}","starred_url":"https://api.github.com/users/lichaohao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lichaohao/subscriptions","organizations_url":"https://api.github.com/users/lichaohao/orgs","repos_url":"https://api.github.com/users/lichaohao/repos","events_url":"https://api.github.com/users/lichaohao/events{/privacy}","received_events_url":"https://api.github.com/users/lichaohao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T02:55:31Z","updated_at":"2022-04-29T02:55:31Z","author_association":"NONE","body":"thanks a lot. i should add the hive_catolog name before the db ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112831606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112835421","html_url":"https://github.com/apache/iceberg/issues/4666#issuecomment-1112835421","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4666","id":1112835421,"node_id":"IC_kwDOCW7NX85CVIVd","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T03:05:55Z","updated_at":"2022-04-29T03:23:12Z","author_association":"CONTRIBUTOR","body":"Code To repro:\r\n\r\nStep 1: Add a throw `new RuntimeException(\"FATAL\")` anywhere in this block and build iceberg :  https://github.com/apache/iceberg/blob/master/core/src/main/java/org/apache/iceberg/SnapshotProducer.java#L328-L346\r\n\r\nStep 2: \r\nRun this in one process: \r\n```\r\npublic class TestDataLossReproCase {\r\n    private static final Configuration CONF = new Configuration();\r\n    private final String format = \"parquet\";\r\n    private static SparkSession spark = null;\r\n\r\n    @Rule\r\n    public TemporaryFolder temp = new TemporaryFolder();\r\n\r\n    @BeforeClass\r\n    public static void startSpark() {\r\n        TestDataLossReproCase.spark = SparkSession.builder().master(\"local[2]\").getOrCreate();\r\n    }\r\n\r\n    @AfterClass\r\n    public static void stopSpark() {\r\n        SparkSession currentSpark = TestDataLossReproCase.spark;\r\n        TestDataLossReproCase.spark = null;\r\n        currentSpark.stop();\r\n    }\r\n\r\n    public TestDataLossReproCase() { }\r\n\r\n    @Test\r\n    public void testWriteBatchWithFailure() throws IOException {\r\n        File parent = temp.newFolder(format);\r\n        File location = new File(parent, \"test-oom\");\r\n\r\n        HadoopTables tables = new HadoopTables(CONF);\r\n        Schema SCHEMA = new Schema(\r\n                Types.NestedField.optional(1, \"id\", Types.IntegerType.get()),\r\n                Types.NestedField.optional(2, \"data\", Types.StringType.get())\r\n        );\r\n        PartitionSpec spec = PartitionSpec.builderFor(SCHEMA).identity(\"data\").build();\r\n        Map tableProps = new HashMap<String, String>();\r\n        tableProps.put(\"write.format.default\", \"parquet\");\r\n        tableProps.put(TableProperties.WRITE_AUDIT_PUBLISH_ENABLED, \"true\");\r\n        Table table = tables.create(SCHEMA, spec, tableProps, location.toString());\r\n\r\n        List<SimpleRecord> records = Lists.newArrayList(\r\n                new SimpleRecord(1, \"a\"),\r\n                new SimpleRecord(2, \"b\"),\r\n                new SimpleRecord(3, \"c\")\r\n        );\r\n        Dataset<Row> df = spark.createDataFrame(records, SimpleRecord.class);\r\n        spark.conf().set(\"spark.wap.id\", \"batch1\");\r\n        df.write()\r\n                .format(\"iceberg\")\r\n                .mode(\"append\")\r\n                .option(\"snapshot-property.marked-for-failure\", \"true\")\r\n                .save(location.toString());\r\n    }\r\n}\r\n```\r\n\r\nStep 3: \r\nIn a separate process / spark-shell try to cherry pick the same snapshot that failed. Iceberg allows this to be committed but it has no data files. \r\n\r\n```\r\nscala> val wapSnapshot = table.snapshots().iterator().next()\r\n\r\nscala> table.manageSnapshots().cherrypick(wapSnapshot.snapshotId()).commit();\r\n\r\nscala> table.currentSnapshot()\r\nres7: org.apache.iceberg.Snapshot = BaseSnapshot{id=3129787574451672289, timestamp_ms=1651198987172, operation=append, summary={spark.app.id=local-1651198931798, wap.id=batch1, marked-for-failure=true, added-data-files=3, added-records=3, added-files-size=1896, changed-partition-count=3, total-records=3, total-files-size=1896, total-data-files=3, total-delete-files=0, total-position-deletes=0, total-equality-deletes=0}, manifest-list=/var/folders/lt/3n80bsn133j1x4z79ffkm_940000gn/T/junit5193631189286247995/parquet/test-oom/metadata/snap-3129787574451672289-1-c71dcc2e-f838-4cff-bd16-de212c8db0ca.avro, schema-id=0}\r\n\r\n```\r\n\r\nStep 4:\r\n\r\nReading the table fails with FNF : \r\n```\r\n\r\nscala> spark.read.format(\"iceberg\").load(\"file:///var/folders/lt/3n80bsn133j1x4z79ffkm_940000gn/T/junit5193631189286247995/parquet/test-oom\").show()\r\n\r\n22/04/28 19:35:25 ERROR BaseDataReader: Error reading file: /var/folders/lt/3n80bsn133j1x4z79ffkm_940000gn/T/junit5193631189286247995/parquet/test-oom/data/data=a/00000-0-901adea9-8e0c-49f1-9a3e-d90239db993e-00001.parquet\r\norg.apache.iceberg.exceptions.RuntimeIOException: Failed to get status for file: /var/folders/lt/3n80bsn133j1x4z79ffkm_940000gn/T/junit5193631189286247995/parquet/test-oom/data/data=a/00000-0-901adea9-8e0c-49f1-9a3e-d90239db993e-00001.parquet\r\n\tat org.apache.iceberg.hadoop.HadoopInputFile.lazyStat(HadoopInputFile.java:158)\r\n\tat org.apache.iceberg.hadoop.HadoopInputFile.getStat(HadoopInputFile.java:192)\r\n\tat org.apache.iceberg.parquet.ParquetIO.file(ParquetIO.java:54)\r\n\tat org.apache.iceberg.parquet.ReadConf.newReader(ReadConf.java:218)\r\n\tat org.apache.iceberg.parquet.ReadConf.<init>(ReadConf.java:74)\r\n\tat org.apache.iceberg.parquet.ParquetReader.init(ParquetReader.java:66)\r\n\tat org.apache.iceberg.parquet.ParquetReader.iterator(ParquetReader.java:77)\r\n\tat org.apache.iceberg.parquet.ParquetReader.iterator(ParquetReader.java:38)\r\n\tat org.apache.iceberg.util.Filter.lambda$filter$0(Filter.java:35)\r\n\tat org.apache.iceberg.io.CloseableIterable$2.iterator(CloseableIterable.java:73)\r\n\tat org.apache.iceberg.spark.source.RowDataReader.open(RowDataReader.java:95)\r\n\tat org.apache.iceberg.spark.source.BaseDataReader.next(BaseDataReader.java:93)\r\n\tat org.apache.spark.sql.execution.datasources.v2.PartitionIterator.hasNext(DataSourceRDD.scala:79)\r\n\tat org.apache.spark.sql.execution.datasources.v2.MetricsIterator.hasNext(DataSourceRDD.scala:112)\r\n\tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n\tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\r\n\tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\r\n\tat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\r\n\tat org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:755)\r\n\tat org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:345)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\r\n\tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:497)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1439)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:500)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.io.FileNotFoundException: File /var/folders/lt/3n80bsn133j1x4z79ffkm_940000gn/T/junit5193631189286247995/parquet/test-oom/data/data=a/00000-0-901adea9-8e0c-49f1-9a3e-d90239db993e-00001.parquet does not exist\r\n\tat org.apache.hadoop.fs.RawLocalFileSystem.deprecatedGetFileStatus(RawLocalFileSystem.java:666)\r\n\tat org.apache.hadoop.fs.RawLocalFileSystem.getFileLinkStatusInternal(RawLocalFileSystem.java:987)\r\n\tat org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:656)\r\n\tat org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:454)\r\n\tat org.apache.iceberg.hadoop.HadoopInputFile.lazyStat(HadoopInputFile.java:156)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112835421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112838810","html_url":"https://github.com/apache/iceberg/issues/4666#issuecomment-1112838810","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4666","id":1112838810,"node_id":"IC_kwDOCW7NX85CVJKa","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T03:15:00Z","updated_at":"2022-04-29T03:20:57Z","author_association":"CONTRIBUTOR","body":"I'v tested this on 0.11 and latest code on master. This is reproduceable in a deterministic way. We need some guidance on how to proceed with a fix. \r\n\r\nShould `abort` procedure  remove the metadata as well so that this snapshot can never be cherrypick? Or should this vulnerable cleanup operation code snippet just be included before the ops.commit is called?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112838810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112851532","html_url":"https://github.com/apache/iceberg/pull/4667#issuecomment-1112851532","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4667","id":1112851532,"node_id":"IC_kwDOCW7NX85CVMRM","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T03:50:04Z","updated_at":"2022-04-29T03:51:09Z","author_association":"CONTRIBUTOR","body":"Here is the additional context. When we set the parquet version to a private build with lower version number `1.12.0.16-myorg`. Gradle will still resolves to the Parquet version to `1.12.2`, because it is the higher version and gets transitively pulled in via `spark-sql <-- spark-hive`.\r\n\r\n```\r\norg.apache.parquet:* = 1.12.2 -> 1.12.0.16-myorg\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112851532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112898207","html_url":"https://github.com/apache/iceberg/pull/4638#issuecomment-1112898207","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4638","id":1112898207,"node_id":"IC_kwDOCW7NX85CVXqf","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T05:48:24Z","updated_at":"2022-04-29T05:48:24Z","author_association":"CONTRIBUTOR","body":"Another thought:  This runs as part of `gradlew check`, so we don’t technically need to update CI.\r\n\r\nHowever, we might want to add this as its CI step eventually.\r\n\r\nThe logic being that this check is relatively inexpensive, and so it could be placed first alongside the PR labeler. Then, if API compatibility fails, we could not run all of the expensive tests.\r\n\r\nI wouldn’t add it as a standalone check just yet because it will get run as part of `gradle check`, but something to think about.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112898207/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112903001","html_url":"https://github.com/apache/iceberg/pull/4595#issuecomment-1112903001","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4595","id":1112903001,"node_id":"IC_kwDOCW7NX85CVY1Z","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-29T05:59:50Z","updated_at":"2022-04-29T05:59:50Z","author_association":"CONTRIBUTOR","body":"\n> This just did some small code optimizations so I didn't add the test. What kind of tests do you think should be added? @flyrain \n\nIt's OK to not add tests. I'm just curious that which test covers the changed code.\n\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1112903001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]