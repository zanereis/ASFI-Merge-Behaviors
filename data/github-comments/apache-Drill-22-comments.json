[{"url":"https://api.github.com/repos/apache/drill/issues/comments/328321692","html_url":"https://github.com/apache/drill/pull/934#issuecomment-328321692","issue_url":"https://api.github.com/repos/apache/drill/issues/934","id":328321692,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMyMTY5Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T05:49:19Z","updated_at":"2017-09-10T05:49:19Z","author_association":"CONTRIBUTOR","body":"Thanks for the explanation.\r\n+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328321692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328322237","html_url":"https://github.com/apache/drill/pull/905#issuecomment-328322237","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":328322237,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMyMjIzNw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T06:03:21Z","updated_at":"2017-09-10T06:03:21Z","author_association":"CONTRIBUTOR","body":"This OOM problem exposes two problems. The first one is in planning time, where we choose a sub-optimal plan, due to the inaccurate estimation of row count because of missing of appropriate statistics. The second one is in execution time, where we may need understand whether Drill uses too much memory and whether spill to disk is an option. I think the two are complementary to each other; even when we have spill to disk for hash join, if planner choose a sub-optimal plan, the query still could take long, long time to complete.\r\nLooks like the PR is addressing the 1st issue. I agree that the root cause is row count estimation, which is more appropriate to defer to the enhancement of statistics support. For swapJoin logic, the proposal of getMaxRowCount() seems to be in the line of adjusting row count estimation. I like better the idea of combining row count + column count, which was essentially adopted in swapInput() by LoptJoinOptmizeRule.\r\nFor HashTable build side cost, hash table only has to hold the join key. However, since hash join is a blocking operator, it has hold all the records in the build side, meaning total memory requirement (for both hash table + non-join key columns) depends on row count and column count. Therefore, the cost model of hash join should reflect that. Can we use similar idea in SwapHashJoinVisitor?\r\nOne further improvement would be to modify HashJoinPrel.computeSelfCost(). Today we only consider join key width, and it makes sense to adjust that logic, by considering the total column counts in build side. Such logic could be extracted into a common places, then SwapHashJoinVisitor could call the same shared logic to decide whether it's cost-wise optimal to swap the input sides. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328322237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328326069","html_url":"https://github.com/apache/drill/pull/919#issuecomment-328326069","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":328326069,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODMyNjA2OQ==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T07:51:36Z","updated_at":"2017-09-10T07:51:36Z","author_association":"CONTRIBUTOR","body":"@paul-rogers - Not sure which commit you are referring to. All the commits are reviewed by @parthchandra. I just rebased commits to latest master after last week pull request since @amansinha100 was observing some random functional test failure. After rebase I ran those tests in isolation for multiple iterations and those were passing. Let me know if you want me to combine all these 3 commits.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328326069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328358324","html_url":"https://github.com/apache/drill/pull/919#issuecomment-328358324","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":328358324,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODM1ODMyNA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T17:32:51Z","updated_at":"2017-09-10T17:32:51Z","author_association":"CONTRIBUTOR","body":"OK, thanks. Got confused by the commit messages that appeared after the +1. Maybe in the future, when we rebase, just add a comment saying that's what happened.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328358324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328377755","html_url":"https://github.com/apache/drill/pull/925#issuecomment-328377755","issue_url":"https://api.github.com/repos/apache/drill/issues/925","id":328377755,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODM3Nzc1NQ==","user":{"login":"sudheeshkatkam","id":3272600,"node_id":"MDQ6VXNlcjMyNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/3272600?v=4","gravatar_id":"","url":"https://api.github.com/users/sudheeshkatkam","html_url":"https://github.com/sudheeshkatkam","followers_url":"https://api.github.com/users/sudheeshkatkam/followers","following_url":"https://api.github.com/users/sudheeshkatkam/following{/other_user}","gists_url":"https://api.github.com/users/sudheeshkatkam/gists{/gist_id}","starred_url":"https://api.github.com/users/sudheeshkatkam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudheeshkatkam/subscriptions","organizations_url":"https://api.github.com/users/sudheeshkatkam/orgs","repos_url":"https://api.github.com/users/sudheeshkatkam/repos","events_url":"https://api.github.com/users/sudheeshkatkam/events{/privacy}","received_events_url":"https://api.github.com/users/sudheeshkatkam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-10T22:48:48Z","updated_at":"2017-09-10T22:48:48Z","author_association":"CONTRIBUTOR","body":"Nice catch @weijietong\r\n\r\nLooks like the Netty thread, that is failing all outstanding requests to a certain endpoint, is itself trying to send a message (cancel fragment) to that endpoint. Any ideas on how to fix that?\r\n\r\nApart from Paul's comment, the current patch looks good to me as well. The above fix is a nice-to-have.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328377755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328564968","html_url":"https://github.com/apache/drill/pull/925#issuecomment-328564968","issue_url":"https://api.github.com/repos/apache/drill/issues/925","id":328564968,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODU2NDk2OA==","user":{"login":"weijietong","id":728692,"node_id":"MDQ6VXNlcjcyODY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/728692?v=4","gravatar_id":"","url":"https://api.github.com/users/weijietong","html_url":"https://github.com/weijietong","followers_url":"https://api.github.com/users/weijietong/followers","following_url":"https://api.github.com/users/weijietong/following{/other_user}","gists_url":"https://api.github.com/users/weijietong/gists{/gist_id}","starred_url":"https://api.github.com/users/weijietong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weijietong/subscriptions","organizations_url":"https://api.github.com/users/weijietong/orgs","repos_url":"https://api.github.com/users/weijietong/repos","events_url":"https://api.github.com/users/weijietong/events{/privacy}","received_events_url":"https://api.github.com/users/weijietong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T15:25:44Z","updated_at":"2017-09-11T15:25:44Z","author_association":"NONE","body":"@paul-rogers have refactored the codes. @sudheeshkatkam nothing to fix ,once the netty thread got the re-spawned RPC connection ,it will send out the message.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328564968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328656059","html_url":"https://github.com/apache/drill/pull/916#issuecomment-328656059","issue_url":"https://api.github.com/repos/apache/drill/issues/916","id":328656059,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODY1NjA1OQ==","user":{"login":"vdiravka","id":11904420,"node_id":"MDQ6VXNlcjExOTA0NDIw","avatar_url":"https://avatars.githubusercontent.com/u/11904420?v=4","gravatar_id":"","url":"https://api.github.com/users/vdiravka","html_url":"https://github.com/vdiravka","followers_url":"https://api.github.com/users/vdiravka/followers","following_url":"https://api.github.com/users/vdiravka/following{/other_user}","gists_url":"https://api.github.com/users/vdiravka/gists{/gist_id}","starred_url":"https://api.github.com/users/vdiravka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdiravka/subscriptions","organizations_url":"https://api.github.com/users/vdiravka/orgs","repos_url":"https://api.github.com/users/vdiravka/repos","events_url":"https://api.github.com/users/vdiravka/events{/privacy}","received_events_url":"https://api.github.com/users/vdiravka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T20:56:36Z","updated_at":"2017-09-11T20:56:36Z","author_association":"MEMBER","body":"@paul-rogers \r\n\r\nThere is no bug with corrupt Parquet dates, it was fixed in context of DRILL-4203. \r\n\r\nThis commit fixes representing of the five digit year dates and doesn't change logic for the 4(3,2...) digit year dates. It is made in similar manner as TimePrintMillis.\r\n\r\nBut the best solution is to use necessary formatting. I am working on this, so this PR can be closed.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328656059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328697531","html_url":"https://github.com/apache/drill/pull/923#issuecomment-328697531","issue_url":"https://api.github.com/repos/apache/drill/issues/923","id":328697531,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODY5NzUzMQ==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T00:39:48Z","updated_at":"2017-09-12T00:39:48Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Finished apply review comments. PR is ready for review again.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328697531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328882664","html_url":"https://github.com/apache/drill/pull/936#issuecomment-328882664","issue_url":"https://api.github.com/repos/apache/drill/issues/936","id":328882664,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODg4MjY2NA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T15:09:06Z","updated_at":"2017-09-12T15:09:06Z","author_association":"MEMBER","body":"@paul-rogers, the unit tests just show which influence saffron property has on Drill (since people in the community where asking how to enable support UTF-8 in Drill), a long with this PR we'll also add description to Drill documentation. \r\n\r\nSo far Drill relies on Calcite saffron property to determine which charset it supports. By default, it's ISO-8859-1. So currently if customer wants to query UTF-8 data in Drill, he will get an error (one of the unit tests shows it) and needs to override saffron property to proceed. I guess, we don't support UTF-8 by default since there are some issues and Drill did not fully tested UTF-8 support.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328882664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328919350","html_url":"https://github.com/apache/drill/pull/905#issuecomment-328919350","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":328919350,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODkxOTM1MA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T17:07:25Z","updated_at":"2017-09-12T17:07:25Z","author_association":"MEMBER","body":"@jinfengni thanks for looking into this. Completely agree with you that it would be better to consider both row and column count. \r\nUnfortunately, it does not help to fix this issue, since the ratio of column count of tables very often much smaller than the ratio of row count (actual row count). (`c1/c2 << r2/r1`)\r\nSo I guess it makes sense to implement your proposal to consider the column count together with the row count in another pull request.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328919350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328948087","html_url":"https://github.com/apache/drill/pull/905#issuecomment-328948087","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":328948087,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk0ODA4Nw==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T18:56:20Z","updated_at":"2017-09-12T18:56:20Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi , what I'm thinking is not just comparing the ratio of column count vs ratio of row count.  \r\n\r\nLet's take a step back. This SwapHashJoinVisitor is trying to correct the join decision made by either VolcanoPlanner or HepPlanner, in the sense the original join order might need put bigger dataset on the build side. The swap is needed because we want to avoid high memory requirement on hash join operator. The question is how do we define \"big dataset\". For now, SwapHashJoinVisitor simply uses rowCount, which is not sufficient. \r\n\r\nIn stead, we probably should add a method `getSelfMemCost` to all `Prel` node. For non-blocking operator, it's simply returning either 0 or some constant (to hold one single batch). For non-blocking operator such as HashJoin, it will return a value proportional to rowCount X columnCount (more precisely, total number of bytes per row, considering different column data type). \r\n\r\nSame as existing method of `computeSelfCost`, we need `getCumulativeMemCost` which will return the cumulative cost for child nodes rooted at one `Prel` node.  With this `getSelfMemCost` and `getCumulativeMemCost` defined for HashJoin, and a HashJoin with input1, input2 as inputs, we could estimate cumulative memory cost for HashJoin(input1, input2), and HashJoin(input2, input1), and use that as criteria to decide whether we have to switch them. \r\n\r\nThis idea is not trying to adjust the row count estimation. In stead, it's trying to change the criteria where we may think it's necessary to swap, based on the observation that we want to do swap only when we want to reduce memory requirement for a query. \r\n\r\nWill the above idea work? If it could not address this issue, it's probably fine to go with what you proposed. Before we go that option, please give some thoughts about the above idea. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328948087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328970183","html_url":"https://github.com/apache/drill/pull/940#issuecomment-328970183","issue_url":"https://api.github.com/repos/apache/drill/issues/940","id":328970183,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk3MDE4Mw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T20:10:18Z","updated_at":"2017-09-12T20:10:18Z","author_association":"CONTRIBUTOR","body":"@paul-rogers This is an implementation of the Test Categories suggestion you made on the dev list. It's ready for review.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328970183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/328997748","html_url":"https://github.com/apache/drill/pull/895#issuecomment-328997748","issue_url":"https://api.github.com/repos/apache/drill/issues/895","id":328997748,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODk5Nzc0OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-12T22:04:44Z","updated_at":"2017-09-12T22:04:44Z","author_association":"CONTRIBUTOR","body":"@sohami, please rebase on latest master and resolve conflicts. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/328997748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329020885","html_url":"https://github.com/apache/drill/pull/939#issuecomment-329020885","issue_url":"https://api.github.com/repos/apache/drill/issues/939","id":329020885,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAyMDg4NQ==","user":{"login":"prasadns14","id":4907022,"node_id":"MDQ6VXNlcjQ5MDcwMjI=","avatar_url":"https://avatars.githubusercontent.com/u/4907022?v=4","gravatar_id":"","url":"https://api.github.com/users/prasadns14","html_url":"https://github.com/prasadns14","followers_url":"https://api.github.com/users/prasadns14/followers","following_url":"https://api.github.com/users/prasadns14/following{/other_user}","gists_url":"https://api.github.com/users/prasadns14/gists{/gist_id}","starred_url":"https://api.github.com/users/prasadns14/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prasadns14/subscriptions","organizations_url":"https://api.github.com/users/prasadns14/orgs","repos_url":"https://api.github.com/users/prasadns14/repos","events_url":"https://api.github.com/users/prasadns14/events{/privacy}","received_events_url":"https://api.github.com/users/prasadns14/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:18:16Z","updated_at":"2017-09-13T00:18:16Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Can you please review the PR?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329020885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329022757","html_url":"https://github.com/apache/drill/pull/895#issuecomment-329022757","issue_url":"https://api.github.com/repos/apache/drill/issues/895","id":329022757,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAyMjc1Nw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:31:16Z","updated_at":"2017-09-13T00:31:16Z","author_association":"CONTRIBUTOR","body":"This PR was already merged by @arina-ielchiieva on 08/24","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329022757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329023424","html_url":"https://github.com/apache/drill/pull/936#issuecomment-329023424","issue_url":"https://api.github.com/repos/apache/drill/issues/936","id":329023424,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTAyMzQyNA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T00:36:02Z","updated_at":"2017-09-13T00:36:02Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, thanks for the explanation. Drill's runtime framework assumes that data is either:\r\n\r\n1. ASCII (or, at least, single-byte character set based on ASCII), or\r\n2. UTF-8 (data is converted to/from UTF-8 when converting VarChar to a Java String.)\r\n\r\nSince Drill's code seems to assume ASCII (when it cares about character format), then one could claim that Drill does not have an encoding: it just treats characters as bytes. But, things such as determining string length, doing pattern matching, and so on must be aware of the character set -- if only to know which bytes are continuations of a multi-byte character. (That is, a three-byte sequence in UTF-8 might be one, two or three characters, depending.)\r\n\r\nNow, if the planner assumes ISO-8859-1, but the Drill execution engine assumes UTF-8, then string constants passed from one to the other can become corrupted in the case where a particular byte sequence in ISO-8859-1 represents a different character than that same byte sequence in UTF-8.\r\n\r\nWhere would this occur? Look at the [ISO-8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1) definition. ISO-8859 is a single-byte character set with meanings associated to the bytes in the range 0x40 to 0x7f. But, in UTF-8, the high bit indicates a prefix character. So, 0xF7 is a valid single-byte character in ISO-8859, but is a lead-in character in UTF-8.\r\n\r\nThe point here is that setting the character set would seem to be a global setting. If the Saffron setting is purely for the parser (how to interpret incoming text), and the parser always produces Java strings in UTF-16 (which are then encoded into UTF-8 for execution), then we're fine.\r\n\r\nBut, if the parser encoding is written as bytes sent to the execution engine, we're in trouble.\r\n\r\nFurther, Drill has a web UI. The typical web character set is UTF-8, so queries coming from the web UI are encoded in UTF-8.\r\n\r\nAll this suggests two things:\r\n\r\n1. Drill should either always accept UTF-8 (the Saffron property should always be set.) or\r\n2. The property is specified by the client and used to decode the bytes within a Protobuf message to produce a character stream given to the parser.\r\n\r\nIt appears that UTF-8 is the default Protobuf String type encoding; sender and receiver would have to agree on another format. Does Drill have such an RPC property? I've not seen it, but I'm not an expert.\r\n\r\nIn short, if this change ensures that the parser *always* uses UTF-8, then this is good. If the character encoding is an option, then we have to consider all the above issues to have a fully working, end-to-end solution.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329023424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329159266","html_url":"https://github.com/apache/drill/pull/905#issuecomment-329159266","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":329159266,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTE1OTI2Ng==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T12:58:17Z","updated_at":"2017-09-13T12:58:17Z","author_association":"MEMBER","body":"@jinfengni, the idea is very interesting for me. More appropriate memory cost estimation will cause to choosing better plans, that will cause the less time execution and memory costs. \r\n\r\nWriting about the comparing the ratio of column count vs ratio of row count I meant that the multiplying of row count and column count does not help to choose which input needs more memory in the case when the ratio of **actual** row count is much greater than the ratio of column count. `getCumulativeMemCost` implementation will not help for this case. \r\nTo show that, let's consider an example. We have three tables: \r\n\r\n- a(has 5 columns and 5 rows with the same values); \r\n- b(has 5 columns and 10 rows with the same values as in the table a); \r\n- c(has 5 columns and 35 rows with the same values as in the table a). \r\n\r\nFor the query\r\n```\r\nselect count(*) from a\r\ninner join b on a.col1=b.col1\r\ninner join c on b.col1=c.col1;\r\n```\r\nDrill will build plan\r\n```\r\n\tHahJoin[1]\r\n\t/    \\\r\n       c   HahJoin[2]\r\n\t   /    \\\r\n\t  b\t a\r\n```\r\n`getCumulativeMemCost` for HahJoin[1] will return a value proportional to\r\n`(HahJoin[2] row count) * (HahJoin[2] column count) + HahJoin[2].getCumulativeMemCost() = Max(aRowCount, bRowCount) * (aColumnCount + bColumnCount) +  aRowCount * aColumnCount = 5 * (5 + 5) + 5 * 5 = 75`.\r\nActual row count for build side of HahJoin[1] in this case is 50.\r\nFor the plan, that will be more suitable for this particular case:\r\n```\r\n\tHahJoin[1]\r\n\t/     \\\r\n  HahJoin[2]   c   \r\n   /    \\\r\n  b\t a\r\n```\r\n`getCumulativeMemCost` for HahJoin[1] will return a value proportional to `cRowCount * cColumnCount = 35 * 5 = 175`.\r\nActual row count for build side of HahJoin[1] in this case is 35.\r\n\r\nSmal information about this pull request.\r\nThis pull request addresses only the case of large row count. It checks that OOM may happen and if swap allows avoiding this potential OOM, the swap will happen.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329159266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329219898","html_url":"https://github.com/apache/drill/pull/925#issuecomment-329219898","issue_url":"https://api.github.com/repos/apache/drill/issues/925","id":329219898,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTIxOTg5OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T16:17:53Z","updated_at":"2017-09-13T16:17:53Z","author_association":"CONTRIBUTOR","body":"Turns out that I cannot cleanly do the rebase. @weijietong, please rebase this branch onto the latest master, and squash your commits into a single commit. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329219898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329221779","html_url":"https://github.com/apache/drill/pull/930#issuecomment-329221779","issue_url":"https://api.github.com/repos/apache/drill/issues/930","id":329221779,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTIyMTc3OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T16:24:25Z","updated_at":"2017-09-13T16:24:25Z","author_association":"CONTRIBUTOR","body":"Holding of on the merge waiting for review by @vrozov. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329221779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329237790","html_url":"https://github.com/apache/drill/pull/940#issuecomment-329237790","issue_url":"https://api.github.com/repos/apache/drill/issues/940","id":329237790,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTIzNzc5MA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T17:21:31Z","updated_at":"2017-09-13T17:21:31Z","author_association":"CONTRIBUTOR","body":"Thanks for the explanations and corrections.\r\nPlease squash your commits to prepare for commit to master.\r\n+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329237790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329250254","html_url":"https://github.com/apache/drill/pull/916#issuecomment-329250254","issue_url":"https://api.github.com/repos/apache/drill/issues/916","id":329250254,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI1MDI1NA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T18:07:00Z","updated_at":"2017-09-13T18:07:22Z","author_association":"CONTRIBUTOR","body":"Other than dealing with corrupted dates from Parquet, what other uses of five digit years are expected? Few business processes project 8,000 years into the future. Scientific projects are likely to project far more than just 10,000 years into the future; they would need to handle billions of years (death of the sun) to trillions (heat death of the universe.) By contrast, 8000 years ago were civilizations that we no know only from a few archeological remains. Few business records extend that far back.\r\n\r\nSo, if not for corrupt Parquet dates, what is the use case for 5-digit years? Why is Drill the only tool needing such dates? If they were common, wouldn't `java.sql.Date`, SQL, the ISO standard and other mechanisms define the rules?\r\n\r\nThat is, are we fixing a non-existent problem?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329250254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329254858","html_url":"https://github.com/apache/drill/pull/937#issuecomment-329254858","issue_url":"https://api.github.com/repos/apache/drill/issues/937","id":329254858,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI1NDg1OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T18:24:17Z","updated_at":"2017-09-13T18:24:17Z","author_association":"CONTRIBUTOR","body":"The original description talks about data with local times. The TPC-H data has no TZ. Now, maybe we made one up in creating the Parquet files, but the original date just has dates without a tz.\r\n\r\nThe fundamental issue is that if we have a tz-less date, 1994-08-12, say, then this *cannot* be converted to a UTC timestamp. Which of the 23+ time zones would we use? How would the client and server agree on the arbitrary tz? This is like saying that I have a measurement in miles, but we can store distances only in km, so I'll take my length of 5 miles and store it as 5 km, remembering that I'm using km as an alias for miles. Does not make sense.\r\n\r\nYour example uses `timestamp` constants. A timestamp is defined with a timezone, and so it fits Drill's model well. But, TPC dates don't have a timezone. See [the TPC-H spec](http://www.tpc.org/tpc_documents_current_versions/pdf/tpc-h_v2.17.2.pdf) which says:\r\n\r\n> Date is a value whose external representation can be expressed as YYYY-MM-DD, where all characters are numeric. A date must be able to express any day within at least 14 consecutive years. There is no requirement specific to the internal representation of a date.\r\n\r\nThat is, TPC-H dates are not midnight on some date in some timezone, they are just dates. The cannot be converted to UTC. And so, they should not be subject to time zone shifting as tzs shift.\r\n\r\nMy point here is that Hive (according to the docs) implements functions correctly: using tz-less dates. Drill tries to convert to a (fake) UTC and use time-based functions on that data. This is, at best, a hack, and at worst, leads to great complexity and incorrect results.\r\n\r\nThat said, if all we have is km, and we can't do the miles-to-km conversion correctly, then we do need a way to know that a particular km value is actually miles. Similarly, using the current implementation, how will we know that a particular arbitrary-local-time-encoded-as-fake-UTC value really is local time vs. being an actual UTC time?\r\n\r\nAll that said, if you fix makes the current implementation work better, then it is a good improvement.\r\n\r\nIn the interests of moving ahead, let's table the basic discussion and just look at this one fix.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329254858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329267816","html_url":"https://github.com/apache/drill/pull/919#issuecomment-329267816","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":329267816,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI2NzgxNg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T19:12:04Z","updated_at":"2017-09-13T19:12:04Z","author_association":"CONTRIBUTOR","body":"Tried to commit this one to master. The functional test run failed with 20+ \"random failures.\" That is too many to comfortably allow. So, @sohami, please rerun this, determine if the 20+ failures are, indeed, random or due to this change, and post a note here when the PR is ready for another attempt at commit into master.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329267816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329268124","html_url":"https://github.com/apache/drill/pull/903#issuecomment-329268124","issue_url":"https://api.github.com/repos/apache/drill/issues/903","id":329268124,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI2ODEyNA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T19:13:24Z","updated_at":"2017-09-13T19:13:24Z","author_association":"CONTRIBUTOR","body":"@sindhurirayavaram, will you be able to rebase this & squash commits? Then I can merge it into master. Thanks! ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329268124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329268163","html_url":"https://github.com/apache/drill/pull/940#issuecomment-329268163","issue_url":"https://api.github.com/repos/apache/drill/issues/940","id":329268163,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI2ODE2Mw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T19:13:34Z","updated_at":"2017-09-13T19:13:34Z","author_association":"CONTRIBUTOR","body":"Thanks @paul-rogers squashed and ready to commit","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329268163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329268842","html_url":"https://github.com/apache/drill/pull/936#issuecomment-329268842","issue_url":"https://api.github.com/repos/apache/drill/issues/936","id":329268842,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI2ODg0Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T19:16:25Z","updated_at":"2017-09-13T19:16:25Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, my comments boil down to two points:\r\n\r\n1. What happens if UTF-8 support in Drill is disabled? Do we have consistent handling of character data? Do we revert to ASCII? The character set on the Drillbit? How is this reconciled with the character set on the Web and the client?\r\n2. On the other hand, if Drill handles only UTF-8 (with bugs), does it make sense to disable that support if the alternative is undefined or more broken than the UTF-8 support?\r\n\r\nIn short: shouldn't UTF-8 be the hard-coded by Drill when working with Calcite to avoid these ambiguities? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329268842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329272245","html_url":"https://github.com/apache/drill/pull/919#issuecomment-329272245","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":329272245,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI3MjI0NQ==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T19:30:19Z","updated_at":"2017-09-13T19:30:19Z","author_association":"CONTRIBUTOR","body":"@paul-rogers  - Last week @amansinha100 also reported 5 Random failures happening with this commit. But when ran in isolation for multiple iterations those tests were passing all the time. Can you please share the list of tests failing for you with this commit ? I can try to run a sample of those tests in isolation and see if those are really random. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329272245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329283377","html_url":"https://github.com/apache/drill/pull/923#issuecomment-329283377","issue_url":"https://api.github.com/repos/apache/drill/issues/923","id":329283377,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI4MzM3Nw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T20:13:07Z","updated_at":"2017-09-13T20:13:07Z","author_association":"CONTRIBUTOR","body":"Thanks @paul-rogers squashed and ready to commit. Please merge this change before my other PR https://github.com/apache/drill/pull/940","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329283377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329283577","html_url":"https://github.com/apache/drill/pull/940#issuecomment-329283577","issue_url":"https://api.github.com/repos/apache/drill/issues/940","id":329283577,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI4MzU3Nw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T20:13:54Z","updated_at":"2017-09-13T20:13:54Z","author_association":"CONTRIBUTOR","body":"Please merge my other PR https://github.com/apache/drill/pull/923 before this one. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329283577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329286565","html_url":"https://github.com/apache/drill/pull/930#issuecomment-329286565","issue_url":"https://api.github.com/repos/apache/drill/issues/930","id":329286565,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTI4NjU2NQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T20:25:25Z","updated_at":"2017-09-13T20:25:25Z","author_association":"MEMBER","body":"@paul-rogers, @vrozov, thanks for the review. Squashed commits and rebased onto master.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329286565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329306182","html_url":"https://github.com/apache/drill/pull/919#issuecomment-329306182","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":329306182,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTMwNjE4Mg==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-13T21:46:05Z","updated_at":"2017-09-13T21:46:05Z","author_association":"CONTRIBUTOR","body":"I rebased this PR to latest master and [re-ran functional test](http://10.10.104.91:8080/job/Functional/2447/console) and seeing only 2 random failures now. As per @agirish recommendation I have created JIRA's to track these random issues. [DRILL-5788](https://issues.apache.org/jira/browse/DRILL-5788) & [DRILL-5789](https://issues.apache.org/jira/browse/DRILL-5789).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329306182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329332551","html_url":"https://github.com/apache/drill/pull/926#issuecomment-329332551","issue_url":"https://api.github.com/repos/apache/drill/issues/926","id":329332551,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTMzMjU1MQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T00:14:37Z","updated_at":"2017-09-14T00:14:37Z","author_association":"MEMBER","body":"@paul-rogers Added unit test and adopted query to an existing parquet file.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329332551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329346714","html_url":"https://github.com/apache/drill/pull/921#issuecomment-329346714","issue_url":"https://api.github.com/repos/apache/drill/issues/921","id":329346714,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTM0NjcxNA==","user":{"login":"dvjyothsna","id":10828072,"node_id":"MDQ6VXNlcjEwODI4MDcy","avatar_url":"https://avatars.githubusercontent.com/u/10828072?v=4","gravatar_id":"","url":"https://api.github.com/users/dvjyothsna","html_url":"https://github.com/dvjyothsna","followers_url":"https://api.github.com/users/dvjyothsna/followers","following_url":"https://api.github.com/users/dvjyothsna/following{/other_user}","gists_url":"https://api.github.com/users/dvjyothsna/gists{/gist_id}","starred_url":"https://api.github.com/users/dvjyothsna/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dvjyothsna/subscriptions","organizations_url":"https://api.github.com/users/dvjyothsna/orgs","repos_url":"https://api.github.com/users/dvjyothsna/repos","events_url":"https://api.github.com/users/dvjyothsna/events{/privacy}","received_events_url":"https://api.github.com/users/dvjyothsna/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T01:57:17Z","updated_at":"2017-09-14T01:57:17Z","author_association":"CONTRIBUTOR","body":"@weijietong Please refer to comments under JIRA - https://issues.apache.org/jira/browse/DRILL-4286","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329346714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329369872","html_url":"https://github.com/apache/drill/pull/926#issuecomment-329369872","issue_url":"https://api.github.com/repos/apache/drill/issues/926","id":329369872,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTM2OTg3Mg==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T04:44:30Z","updated_at":"2017-09-14T04:44:30Z","author_association":"MEMBER","body":"rebased and squashed","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329369872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329736993","html_url":"https://github.com/apache/drill/pull/889#issuecomment-329736993","issue_url":"https://api.github.com/repos/apache/drill/issues/889","id":329736993,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTczNjk5Mw==","user":{"login":"weijietong","id":728692,"node_id":"MDQ6VXNlcjcyODY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/728692?v=4","gravatar_id":"","url":"https://api.github.com/users/weijietong","html_url":"https://github.com/weijietong","followers_url":"https://api.github.com/users/weijietong/followers","following_url":"https://api.github.com/users/weijietong/following{/other_user}","gists_url":"https://api.github.com/users/weijietong/gists{/gist_id}","starred_url":"https://api.github.com/users/weijietong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weijietong/subscriptions","organizations_url":"https://api.github.com/users/weijietong/orgs","repos_url":"https://api.github.com/users/weijietong/repos","events_url":"https://api.github.com/users/weijietong/events{/privacy}","received_events_url":"https://api.github.com/users/weijietong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T09:53:13Z","updated_at":"2017-09-15T09:53:13Z","author_association":"NONE","body":"@arina-ielchiieva @amansinha100 any further advice ?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329736993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/329998503","html_url":"https://github.com/apache/drill/pull/914#issuecomment-329998503","issue_url":"https://api.github.com/repos/apache/drill/issues/914","id":329998503,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTk5ODUwMw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-16T22:25:32Z","updated_at":"2017-09-16T22:25:32Z","author_association":"CONTRIBUTOR","body":"The second group of five commits refines the result set loader mechanism.\r\n\r\n### Model Layer Revision\r\n\r\nDrill is unique for a query engine in that it handles structured types as first-class data types. For example, Drill supports maps (called “structs” by Hive and Impala), but also supports arrays of maps. Drill support simple scalars, and also arrays of scalars. Put these together and we have maps that contain arrays of maps that contain arrays of scalars. The result is a tree structure described in the Drill documentation as modeled on JSON.\r\n\r\nThe prior version used a “model” layer to construct internal structures that models the tree-structure of Drill’s data types. The model “reified” the structure into a set of objects. While this worked well, it added more complexity than necessary, especially when dynamically evolving a schema or working out how to handle scan-time projection.\r\n\r\nThis version retains the model layer, but as a series of algorithms that walk the vector container structure rather than as a separate data structure. The model layer still provides tools to build readers for “single” and “hyper” vectors, to extract a metadata schema from a set of vectors, to create writers for a “single” vector container, and so on.\r\n\r\nReplacing the object structure with algorithms required changes to both the row set abstractions and the result set loader.\r\n\r\nThe key loss in this change is the set of “visitors” from the previous revision. The reified model allowed all visitors to use a common structure. The new solution still has visitors, but now they are ad-hoc, walking the container tree in different ways depending on whether the code can work with columns generically, or needs to deal with individual (single) vectors or hyper vectors.\r\n\r\n### Revised Result Set Loader Column and Vector State\r\n\r\nTo understand the need for many of the changes in this commit, it helps to take a step back and remember what we’re trying to do. We want to write to vectors, but control the resulting batch size.\r\n\r\n#### Background\r\n\r\nWriting to vectors is easy if we deal only with flat rows and don’t worry about batch size:\r\n\r\n* Vectors provide `Mutator` classes that write to single vectors.\r\n* A set of “legacy” vector writers are available, and are used by some readers.\r\n* Generated code uses `Mutator` and `Accessor` classes to work with vectors.\r\n* The “Row Set” classes, used for testing, provides a refined column writer to populate batches.\r\n\r\nThe above are the easy parts. Some challenges include:\r\n\r\n* None of the above limit batch memory, they only limit row count.\r\n* Writing directly to vectors requires that the client deal with the complexity of tracking a common position across vectors.\r\n* Drill’s tree structure makes everything more complex as positions must be tracked across multiple repetition levels (see below).\r\n\r\nThe “result set loader” (along with the column writers) provides a next level of completeness by tackling the vector memory size problem, for the entire set of Drill structured types.\r\n\r\n#### Overflow and Rollover\r\n\r\nThe key trick is to handle vector “overflow” seamlessly shifting writes, mid-row, from a full batch, to a new “look-ahead” batch. The process of shifting data is called “rollover.”\r\n\r\nTo implement rollover, we need to work with two sets of vectors:\r\n\r\n* The “active” set: the vectors “under” the writers and returned downstream.\r\n* The “backup” set: holds the buffers not currently in use.\r\n\r\nDuring an overflow event, buffers are shifted between the active and backup vectors:\r\n\r\n* On overflow, the full buffers reside in the active vectors.\r\n* After rollover, the full buffers reside in the backup vectors, and new buffers, now holding the in-flight row (called the “look-ahead” row), reside in the active vectors.\r\n* When “harvesting” the full batch, the full buffers and look-ahead vectors are exchange, so the full buffers are back in the active vectors.\r\n* When starting the next batch for writing, the look-ahead row is shifted from the backup vectors into the active vectors and the cycle repeats.\r\n\r\n#### Column and Vector State\r\n\r\nWhen writing without overflow, we need only one vector and so the usual Drill vector container is sufficient. With overflow, we have two sets of vectors, and must perform operations on them, so we need a place to store the data. This is the purpose of the “column state” and “vector state” classes.\r\n\r\nThink of the overall result set loader structure a has having three key parts:\r\n\r\n* Result set loader: manages the entire batch\r\n* Column writers: accepts writes to vectors\r\n* Column state: manages the vectors themselves.\r\n\r\nThe result set loader and column writers are part of the public API. Column state is an internal concept.\r\n\r\nDrill is columnar. Each column in a query is represented by a column state object. This object tracks the state of the column: normal, overflow, etc.\r\n\r\nEvery column state must hold two vectors. The vector state object holds the active and backup vectors, and performs the required operations on these two vectors.\r\n\r\nVector state is separate from column state because some columns use multiple vectors. For example, an array of scalars has an offset vector and a data vector. This column is represented by a single column state object, but two vector state objects.\r\n\r\nMaps are special: they have a column state for the map as a whole, along with a “tuple state” to represent the columns within the map. The row itself is a tuple, and so also uses the tuple state object.\r\n\r\nRepeated maps have not just the tuple state, but also an offset vector that indexes into the tuple.\r\n\r\n#### Schema Subtlety\r\n\r\nSuppose a application uses the result set loader to write a batch up through overflow. Suppose that 1000 rows fit into the batch and the 1001st causes overflow. The above description handles this case.\r\n\r\nNow suppose that on row 1001 the application adds a new column. Should the column appear within the batch that contains the first 1000 rows? One can argue either way. Consider this argument. If the application just used row counts, the application would have read 1000 rows and sent the batch downstream. Then, on the 1001st row (the first row of the next batch) the application would have added the new column.\r\n\r\nUsing this reasoning, we adopt a rule that a new column appears only in the batch that contains the row in which the column was added. So, in the overflow case, the new column does not appear in the first batch, but does appear in the second.\r\n\r\nTo make this work, the column state tracks schema version numbers and can hold onto columns that are not yet visible. The result set loader builds an “output” schema that contains only those columns that are visible. This means that the vector container sent downstream *must* be distinct from the structure used to hold vectors in the result set loader.\r\n\r\nFor this reason, the tuple and column states are the mechanism to hold the entire schema, while the output vector container is built to include only the visible columns.\r\n\r\nThis mechanism is even more necessary in the next commit which will add projection back into the result set loader mechanism.\r\n\r\nThe point is: the tuple and column states allow the result set loader to hold internally a larger set of columns than are made visible to the downstream operators via the output vector container.\r\n\r\n### “Torture” Test\r\n\r\nThis commit adds a new result set loader test called the “torture test.” This single test combines all the complexities that the result set loader must handle:\r\n\r\n* Deeply nested repeated structures\r\n* Null values\r\n* Missing values\r\n* Omitted rows\r\n* Vector Rollover\r\n\r\nThis test has lived up to its name, revealing several subtle bugs in each mechanism. These bugs lead to increased understanding of the requirements for the underlying mechanisms, which resulted in many subtle changes to the accessor and result set loader layers. Little new functionality was added, but the existing functionality was refined to handle many odd cases.\r\n\r\n### Repetition Levels\r\n\r\nThe tests mostly revealed issues with managing offsets in the layers of repeated types. Drill has two kinds of nesting in its tree structure: structures and arrays. Structures just add a level to the name space. (For example, a top-level map introduces a name space, “m”, say, with its columns nested within that name space: “m.a”, “m.b”.) The other kind of nesting introduces a “repetition level.” Drill has four kinds of repetition levels:\r\n\r\n* Rows within a row set (batch)\r\n* Scalars within an array of scalars\r\n* Maps (structs) within an array of structs (repeated map)\r\n* Lists (not yet supported in this code)\r\n\r\nGetting all the offset vectors, pointers, and rollover logic to work was non-trivial. A persistent source of errors is the fact that offsets written for a row are one head of the row itself. That is, row 10 writes its end offset in position 11, and so on. This requires many, many special cases.\r\n\r\n### Rollover Refinement\r\n\r\nWhen a vector overflows, data must be “rolled over” from the in-flight batch to a new one. Rollover is simple with “flat” rows. But, again, many subtle problems crop up when dealing with repetition levels and their corresponding offset vectors and nested indexes. The code here refines rollover handling with several new “writer events” to prepare for, and clean-up after rollover.\r\n\r\nRollover requires work at both the vector and writer level. Work is divided as follows:\r\n\r\n* A “preRollover()” event in the writers prepares vectors for overflow by filling empties and setting value counts.\r\n* The result set loader “column state” and “vector state” classes move data from one set of vectors to another.\r\n* The “postRollover()” even in the writers resets writer indexes, addresses and other pointers to reflect the new data positions.\r\n\r\n### Even More Javadoc\r\n\r\nAs the code has stabilized, it has become worthwhile describing the structure in detail in Javadoc, complete with “ASCII-art” to illustrate some of the concepts when working with Drill’s tree-structured vector model.\r\n\r\n### More Tests\r\n\r\nAdditional lower-level “row set” tests were added for various bits of the code. Also, a couple of tools for printing structures were added to aid debugging. (It is easier to fix thing when we can visualize the complex data structures and vector contents.)\r\n\r\n### Other Changes\r\n\r\nA few nested classes have grown larger and were pulled out into their own files.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/329998503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330023945","html_url":"https://github.com/apache/drill/pull/914#issuecomment-330023945","issue_url":"https://api.github.com/repos/apache/drill/issues/914","id":330023945,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDAyMzk0NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-17T06:18:00Z","updated_at":"2017-09-17T06:18:00Z","author_association":"CONTRIBUTOR","body":"Rebased onto latest master.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330023945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330143891","html_url":"https://github.com/apache/drill/pull/945#issuecomment-330143891","issue_url":"https://api.github.com/repos/apache/drill/issues/945","id":330143891,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDE0Mzg5MQ==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T07:14:50Z","updated_at":"2017-09-18T07:14:50Z","author_association":"CONTRIBUTOR","body":"@paul-rogers PR https://github.com/apache/drill/pull/923 accidentally got merged before I finished fixing jenkins test issues. This PR fixes the tests that were failing on jenkins as a result of the PR, it also fixes a pre-existing issue with the ClientFixture that would make other tests flakey. The pre existing issue was that the the Drillbit would hunt for a user port, but the client would not be configured with port which was found by hunting, instead the client would be configured with the default user port. As a result, some tests could talk to a drill bit that was started in another test or a drill bit that is already running on the test machine.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330143891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330171466","html_url":"https://github.com/apache/drill/pull/947#issuecomment-330171466","issue_url":"https://api.github.com/repos/apache/drill/issues/947","id":330171466,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDE3MTQ2Ng==","user":{"login":"xhochy","id":70274,"node_id":"MDQ6VXNlcjcwMjc0","avatar_url":"https://avatars.githubusercontent.com/u/70274?v=4","gravatar_id":"","url":"https://api.github.com/users/xhochy","html_url":"https://github.com/xhochy","followers_url":"https://api.github.com/users/xhochy/followers","following_url":"https://api.github.com/users/xhochy/following{/other_user}","gists_url":"https://api.github.com/users/xhochy/gists{/gist_id}","starred_url":"https://api.github.com/users/xhochy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xhochy/subscriptions","organizations_url":"https://api.github.com/users/xhochy/orgs","repos_url":"https://api.github.com/users/xhochy/repos","events_url":"https://api.github.com/users/xhochy/events{/privacy}","received_events_url":"https://api.github.com/users/xhochy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T09:39:51Z","updated_at":"2017-09-18T09:39:51Z","author_association":"MEMBER","body":"Seeing that this is already covered by https://github.com/apache/drill/pull/904, will close.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330171466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330270705","html_url":"https://github.com/apache/drill/pull/945#issuecomment-330270705","issue_url":"https://api.github.com/repos/apache/drill/issues/945","id":330270705,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI3MDcwNQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T16:02:40Z","updated_at":"2017-09-18T16:02:40Z","author_association":"CONTRIBUTOR","body":"@ilooner, thanks for the fixes. In general, would be great to avoid posting a PR until it is ready for prime time, that way we'll know when a fix is actually ready for review and commit. (Of course, there may be several rounds of comments and fixes...)\r\n\r\nDoes this fix also include a fix for the jdbc-all project which now exceeds the jar file size limit, probably because of a new library? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330270705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330298310","html_url":"https://github.com/apache/drill/pull/945#issuecomment-330298310","issue_url":"https://api.github.com/repos/apache/drill/issues/945","id":330298310,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI5ODMxMA==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T17:40:23Z","updated_at":"2017-09-18T17:40:23Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Yeah it fixes jdbc-all. Sorry for the mix up this mistake mainly stemmed from me being ignorant of the jenkins build and being unaware of jenkins failures until the batch commit was being done. Will avoid this in the future.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330298310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330305672","html_url":"https://github.com/apache/drill/pull/946#issuecomment-330305672","issue_url":"https://api.github.com/repos/apache/drill/issues/946","id":330305672,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMwNTY3Mg==","user":{"login":"xhochy","id":70274,"node_id":"MDQ6VXNlcjcwMjc0","avatar_url":"https://avatars.githubusercontent.com/u/70274?v=4","gravatar_id":"","url":"https://api.github.com/users/xhochy","html_url":"https://github.com/xhochy","followers_url":"https://api.github.com/users/xhochy/followers","following_url":"https://api.github.com/users/xhochy/following{/other_user}","gists_url":"https://api.github.com/users/xhochy/gists{/gist_id}","starred_url":"https://api.github.com/users/xhochy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xhochy/subscriptions","organizations_url":"https://api.github.com/users/xhochy/orgs","repos_url":"https://api.github.com/users/xhochy/repos","events_url":"https://api.github.com/users/xhochy/events{/privacy}","received_events_url":"https://api.github.com/users/xhochy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T17:57:41Z","updated_at":"2017-09-18T17:57:41Z","author_association":"MEMBER","body":"Build failed with unrelated reasons to this PR: \r\n\r\n```\r\n[WARNING] Rule 0: org.apache.maven.plugins.enforcer.RequireFilesSize failed with message:\r\nThe file drill-jdbc-all-1.12.0-SNAPSHOT.jar is outside the expected size range.\r\n\r\n                  This is likely due to you adding new dependencies to a java-exec and not updating the excludes in this module. This is important as it minimizes the size of the dependency of Drill application users.\r\n/home/travis/build/apache/drill/exec/jdbc-all/target/drill-jdbc-all-1.12.0-SNAPSHOT.jar size (31071836) too large. Max. is 29000000/home/travis/build/apache/drill/exec/jdbc-all/target/drill-jdbc-all-1.12.0-SNAPSHOT.jar\r\n```","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330305672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330311740","html_url":"https://github.com/apache/drill/pull/940#issuecomment-330311740","issue_url":"https://api.github.com/repos/apache/drill/issues/940","id":330311740,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMxMTc0MA==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T18:19:34Z","updated_at":"2017-09-18T18:19:34Z","author_association":"CONTRIBUTOR","body":"Don't merge this. I need to test this on jenkins with the latest fixes in https://github.com/apache/drill/pull/945","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330311740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330319001","html_url":"https://github.com/apache/drill/pull/897#issuecomment-330319001","issue_url":"https://api.github.com/repos/apache/drill/issues/897","id":330319001,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMxOTAwMQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T18:45:08Z","updated_at":"2017-09-18T18:45:08Z","author_association":"CONTRIBUTOR","body":"@cgivre  I might be digressing, but I'm wondering if the formatter is editable. So, for example, functions or keywords that are supported in Drill specifically could be highlighted correctly, while unknown functions/keywords are marked as an error.\r\n\r\n@parthchandra I agree that we need to support pagination, but I think the SQL syntax highlighting needn't be tied with that feature.  ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330319001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330332322","html_url":"https://github.com/apache/drill/pull/945#issuecomment-330332322","issue_url":"https://api.github.com/repos/apache/drill/issues/945","id":330332322,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMzMjMyMg==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T19:35:12Z","updated_at":"2017-09-18T19:35:12Z","author_association":"CONTRIBUTOR","body":"@paul-rogers I had added a dependency that was being pulled into the jdbc-all jar. I excluded that dependency, but the size of the jar had still grown to be 100 kb over 29 Mb, so I bumped the allowed size to be 30 Mb. Thanks for teaching me about this :)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330332322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330397490","html_url":"https://github.com/apache/drill/pull/897#issuecomment-330397490","issue_url":"https://api.github.com/repos/apache/drill/issues/897","id":330397490,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDM5NzQ5MA==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T01:01:08Z","updated_at":"2017-09-19T01:01:08Z","author_association":"CONTRIBUTOR","body":"@kkhatua I think the formatter is editable.  Truthfully, my main goal is to implement JSON syntax highlighting on the plugin config pages.  I've spent a decent amount of time debugging JSON because of a missed comma or something.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330397490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330438128","html_url":"https://github.com/apache/drill/pull/914#issuecomment-330438128","issue_url":"https://api.github.com/repos/apache/drill/issues/914","id":330438128,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDQzODEyOA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T06:02:10Z","updated_at":"2017-09-19T06:02:10Z","author_association":"CONTRIBUTOR","body":"This commit introduces a feature to limit memory consumed by a batch.\r\n\r\n### Batch Size Limits\r\n\r\nWith this change, the code now has three overlapping limits:\r\n\r\n* The traditional row-count limit.\r\n* A maximum limit of 16 MB per vector.\r\n* The new memory-per-batch limit.\r\n\r\n### Overall Flow for Limiting Batch Memory Usage\r\n\r\nThe batch size limit builds on the work already done for overflow.\r\n\r\n* The column metadata allows the client to specify allocation hints such as expected Varchar width and array cardinality.\r\n* The result set loader allocates a batch using the hints and target row count.\r\n* The result set loader measures the memory allocated above. This is the initial batch size.\r\n* As the writers find the need to extend a vector, the writer calls a listener to ask if the extension is allowed, passing in the amount of growth expected.\r\n* The result set loader adds the delta to the accumulated total, compares this against the size limit, and returns whether the resize is allowed.\r\n* If the resize is not allowed, an overflow is triggered.\r\n\r\nNote that the above reuses the overflow mechanism, allowing the size limit to be handled even if reached in the middle of a row.\r\n\r\n### Implementation Details\r\n\r\nTo make the above work:\r\n\r\n* A new batch size limit is added to the result set loader options.\r\n* The batch size tracking code is added. This required a new method in the value vectors to report actual allocated memory.\r\n* The scalar accessors are refactored to add in the batch size limitation without introducing duplicated code. Code moved from the template to base classes to factor out redundancy.\r\n* General code clean-up in the vector limit found while doing the above work.\r\n* Unit tests for the new mechanism.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330438128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330672784","html_url":"https://github.com/apache/drill/pull/919#issuecomment-330672784","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":330672784,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDY3Mjc4NA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T21:03:09Z","updated_at":"2017-09-19T21:03:09Z","author_association":"CONTRIBUTOR","body":"Attempt to merge into master failed:\r\n\r\n```\r\nCONFLICT (content): Merge conflict in exec/java-exec/src/main/java/org/apache/drill/exec/work/fragment/FragmentStatusReporter.java\r\n```\r\n\r\nPlease rebase onto latest master. While at it, please also squash commits.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330672784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330704839","html_url":"https://github.com/apache/drill/pull/949#issuecomment-330704839","issue_url":"https://api.github.com/repos/apache/drill/issues/949","id":330704839,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDcwNDgzOQ==","user":{"login":"dprofeta","id":10244096,"node_id":"MDQ6VXNlcjEwMjQ0MDk2","avatar_url":"https://avatars.githubusercontent.com/u/10244096?v=4","gravatar_id":"","url":"https://api.github.com/users/dprofeta","html_url":"https://github.com/dprofeta","followers_url":"https://api.github.com/users/dprofeta/followers","following_url":"https://api.github.com/users/dprofeta/following{/other_user}","gists_url":"https://api.github.com/users/dprofeta/gists{/gist_id}","starred_url":"https://api.github.com/users/dprofeta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dprofeta/subscriptions","organizations_url":"https://api.github.com/users/dprofeta/orgs","repos_url":"https://api.github.com/users/dprofeta/repos","events_url":"https://api.github.com/users/dprofeta/events{/privacy}","received_events_url":"https://api.github.com/users/dprofeta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T23:47:16Z","updated_at":"2017-09-19T23:47:16Z","author_association":"CONTRIBUTOR","body":"@parthchandra Can you please review?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330704839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330923461","html_url":"https://github.com/apache/drill/pull/948#issuecomment-330923461","issue_url":"https://api.github.com/repos/apache/drill/issues/948","id":330923461,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDkyMzQ2MQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T17:29:26Z","updated_at":"2017-09-20T17:29:26Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330923461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330941262","html_url":"https://github.com/apache/drill/pull/919#issuecomment-330941262","issue_url":"https://api.github.com/repos/apache/drill/issues/919","id":330941262,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDk0MTI2Mg==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T18:32:28Z","updated_at":"2017-09-20T18:32:28Z","author_association":"CONTRIBUTOR","body":"Rebased on latest master and squashed the initial 3 commits. But I have kept the commit to resolve conflict separate as there are some changes made w.r.t DRILL-3449 behavior, and added some new unit tests.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330941262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330941750","html_url":"https://github.com/apache/drill/pull/946#issuecomment-330941750","issue_url":"https://api.github.com/repos/apache/drill/issues/946","id":330941750,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDk0MTc1MA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T18:34:17Z","updated_at":"2017-09-20T18:34:17Z","author_association":"CONTRIBUTOR","body":"Build issue has been corrected via another PR.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330941750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330942208","html_url":"https://github.com/apache/drill/pull/944#issuecomment-330942208","issue_url":"https://api.github.com/repos/apache/drill/issues/944","id":330942208,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDk0MjIwOA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T18:35:53Z","updated_at":"2017-09-20T18:35:53Z","author_association":"CONTRIBUTOR","body":"@sohami, can you review this one? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330942208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330943629","html_url":"https://github.com/apache/drill/pull/905#issuecomment-330943629","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":330943629,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDk0MzYyOQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T18:40:39Z","updated_at":"2017-09-20T18:40:39Z","author_association":"CONTRIBUTOR","body":"@amansinha100, can you give this one a review? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330943629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/330978781","html_url":"https://github.com/apache/drill/pull/949#issuecomment-330978781","issue_url":"https://api.github.com/repos/apache/drill/issues/949","id":330978781,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDk3ODc4MQ==","user":{"login":"dprofeta","id":10244096,"node_id":"MDQ6VXNlcjEwMjQ0MDk2","avatar_url":"https://avatars.githubusercontent.com/u/10244096?v=4","gravatar_id":"","url":"https://api.github.com/users/dprofeta","html_url":"https://github.com/dprofeta","followers_url":"https://api.github.com/users/dprofeta/followers","following_url":"https://api.github.com/users/dprofeta/following{/other_user}","gists_url":"https://api.github.com/users/dprofeta/gists{/gist_id}","starred_url":"https://api.github.com/users/dprofeta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dprofeta/subscriptions","organizations_url":"https://api.github.com/users/dprofeta/orgs","repos_url":"https://api.github.com/users/dprofeta/repos","events_url":"https://api.github.com/users/dprofeta/events{/privacy}","received_events_url":"https://api.github.com/users/dprofeta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T20:57:59Z","updated_at":"2017-09-20T20:57:59Z","author_association":"CONTRIBUTOR","body":"I will add a unit test to test the number of rowgroups that are scanned by the groupscan to see if the filter is well able to prune rowgroup.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/330978781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331024982","html_url":"https://github.com/apache/drill/pull/805#issuecomment-331024982","issue_url":"https://api.github.com/repos/apache/drill/issues/805","id":331024982,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTAyNDk4Mg==","user":{"login":"sachouche","id":29960235,"node_id":"MDQ6VXNlcjI5OTYwMjM1","avatar_url":"https://avatars.githubusercontent.com/u/29960235?v=4","gravatar_id":"","url":"https://api.github.com/users/sachouche","html_url":"https://github.com/sachouche","followers_url":"https://api.github.com/users/sachouche/followers","following_url":"https://api.github.com/users/sachouche/following{/other_user}","gists_url":"https://api.github.com/users/sachouche/gists{/gist_id}","starred_url":"https://api.github.com/users/sachouche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachouche/subscriptions","organizations_url":"https://api.github.com/users/sachouche/orgs","repos_url":"https://api.github.com/users/sachouche/repos","events_url":"https://api.github.com/users/sachouche/events{/privacy}","received_events_url":"https://api.github.com/users/sachouche/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T01:28:08Z","updated_at":"2017-09-21T01:28:08Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331024982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331145196","html_url":"https://github.com/apache/drill/pull/946#issuecomment-331145196","issue_url":"https://api.github.com/repos/apache/drill/issues/946","id":331145196,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTE0NTE5Ng==","user":{"login":"xhochy","id":70274,"node_id":"MDQ6VXNlcjcwMjc0","avatar_url":"https://avatars.githubusercontent.com/u/70274?v=4","gravatar_id":"","url":"https://api.github.com/users/xhochy","html_url":"https://github.com/xhochy","followers_url":"https://api.github.com/users/xhochy/followers","following_url":"https://api.github.com/users/xhochy/following{/other_user}","gists_url":"https://api.github.com/users/xhochy/gists{/gist_id}","starred_url":"https://api.github.com/users/xhochy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xhochy/subscriptions","organizations_url":"https://api.github.com/users/xhochy/orgs","repos_url":"https://api.github.com/users/xhochy/repos","events_url":"https://api.github.com/users/xhochy/events{/privacy}","received_events_url":"https://api.github.com/users/xhochy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T12:44:08Z","updated_at":"2017-09-21T12:44:08Z","author_association":"MEMBER","body":"@paul-rogers Thanks, rebase fixed the build.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331145196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331147667","html_url":"https://github.com/apache/drill/pull/952#issuecomment-331147667","issue_url":"https://api.github.com/repos/apache/drill/issues/952","id":331147667,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTE0NzY2Nw==","user":{"login":"xhochy","id":70274,"node_id":"MDQ6VXNlcjcwMjc0","avatar_url":"https://avatars.githubusercontent.com/u/70274?v=4","gravatar_id":"","url":"https://api.github.com/users/xhochy","html_url":"https://github.com/xhochy","followers_url":"https://api.github.com/users/xhochy/followers","following_url":"https://api.github.com/users/xhochy/following{/other_user}","gists_url":"https://api.github.com/users/xhochy/gists{/gist_id}","starred_url":"https://api.github.com/users/xhochy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xhochy/subscriptions","organizations_url":"https://api.github.com/users/xhochy/orgs","repos_url":"https://api.github.com/users/xhochy/repos","events_url":"https://api.github.com/users/xhochy/events{/privacy}","received_events_url":"https://api.github.com/users/xhochy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T12:54:42Z","updated_at":"2017-09-21T12:54:42Z","author_association":"MEMBER","body":"It would be nice if someone could point me to the location where I should add a unit test for this.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331147667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331212909","html_url":"https://github.com/apache/drill/pull/942#issuecomment-331212909","issue_url":"https://api.github.com/repos/apache/drill/issues/942","id":331212909,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTIxMjkwOQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T16:37:34Z","updated_at":"2017-09-21T16:37:34Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331212909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331251571","html_url":"https://github.com/apache/drill/pull/949#issuecomment-331251571","issue_url":"https://api.github.com/repos/apache/drill/issues/949","id":331251571,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTI1MTU3MQ==","user":{"login":"dprofeta","id":10244096,"node_id":"MDQ6VXNlcjEwMjQ0MDk2","avatar_url":"https://avatars.githubusercontent.com/u/10244096?v=4","gravatar_id":"","url":"https://api.github.com/users/dprofeta","html_url":"https://github.com/dprofeta","followers_url":"https://api.github.com/users/dprofeta/followers","following_url":"https://api.github.com/users/dprofeta/following{/other_user}","gists_url":"https://api.github.com/users/dprofeta/gists{/gist_id}","starred_url":"https://api.github.com/users/dprofeta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dprofeta/subscriptions","organizations_url":"https://api.github.com/users/dprofeta/orgs","repos_url":"https://api.github.com/users/dprofeta/repos","events_url":"https://api.github.com/users/dprofeta/events{/privacy}","received_events_url":"https://api.github.com/users/dprofeta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T19:04:34Z","updated_at":"2017-09-21T19:04:34Z","author_association":"CONTRIBUTOR","body":"I have updated the patch with a unit test and fixed an issue when everything is filtered.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331251571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331287366","html_url":"https://github.com/apache/drill/pull/951#issuecomment-331287366","issue_url":"https://api.github.com/repos/apache/drill/issues/951","id":331287366,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTI4NzM2Ng==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T21:28:49Z","updated_at":"2017-09-21T21:28:49Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331287366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331291210","html_url":"https://github.com/apache/drill/pull/914#issuecomment-331291210","issue_url":"https://api.github.com/repos/apache/drill/issues/914","id":331291210,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTI5MTIxMA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T21:47:06Z","updated_at":"2017-09-21T21:47:06Z","author_association":"CONTRIBUTOR","body":"This next commit reintroduces a projection feature. With this change, a client can:\r\n\r\n* Define the set of columns to project\r\n* Define the schema of the data source (table, file, etc.)\r\n* Write columns according to the schema\r\n* Harvest only the projected columns.\r\n\r\n### Example\r\n\r\nHere is a simple example adapted from `TestResultSetLoaderProjection`. First, declare the projection\r\n\r\n```\r\n    List<SchemaPath> selection = Lists.newArrayList(\r\n        SchemaPath.getSimplePath(\"c\"),\r\n        SchemaPath.getSimplePath(\"b\"),\r\n        SchemaPath.getSimplePath(\"e\"));\r\n```\r\n\r\nThen, declare the schema. (Here, we declare the schema up-front. Projection also works if the schema is defined as columns are discovered while creating a batch.)\r\n\r\n```\r\n    TupleMetadata schema = new SchemaBuilder()\r\n        .add(\"a\", MinorType.INT)\r\n        .add(\"b\", MinorType.INT)\r\n        .add(\"c\", MinorType.INT)\r\n        .add(\"d\", MinorType.INT)\r\n        .buildSchema();\r\n ```\r\n\r\nThen, use the options mechanisms to pass the information to the result set loader:\r\n\r\n```\r\n   ResultSetOptions options = new OptionBuilder()\r\n        .setProjection(selection)\r\n        .setSchema(schema)\r\n        .build();\r\n    ResultSetLoader rsLoader = new ResultSetLoaderImpl(fixture.allocator(), options);\r\n```\r\n\r\nNow, we can write the four columns in the data source:\r\n\r\n```\r\n    RowSetLoader rootWriter = rsLoader.writer();\r\n    rsLoader.startBatch();\r\n…\r\n    rootWriter.start();\r\n    rootWriter.scalar(“a”).setInt(10);\r\n    rootWriter.scalar(“b”).setInt(20);\r\n    rootWriter.scalar(“c”).setInt(30);\r\n    rootWriter.scalar(“d”).setInt(40);\r\n    rootWriter.save();\r\n\r\n```\r\n\r\nBut, when we harvest the results, we get only the projected columns. Notice that “e” is projected, but does not exist in the table, and so is not projected to the output. A higher level of code will handle this case.\r\n\r\n```\r\n#: b, c\r\n0: 20, 30\r\n```\r\n\r\n### Maps\r\n\r\nAlthough the above example does not show the feature, the mechanism also handles maps and arrays of maps. The rules are:\r\n\r\n* If the projection list includes specific map members (such as “m.b”), then project only those map members.\r\n* If the projection list includes just the map name (such as “m”), then project all map members (such as “m.a” and “m.b”.)\r\n* If the projection list does not include the map at all, then project neither the map nor any of its members.\r\n\r\n### Implementation\r\n\r\nThe implementation builds on previous commits. The idea is that we create a “dummy” column and writer, but we do not create the underlying value vector. This allows the client to be blissfully ignorant of whether the column is projected or not. On the other hand, if the client wants to know if a column is projected (perhaps to optimize away certain operations), then the projection status is available in the column metadata.\r\n\r\n#### Projection Set\r\n\r\nProjection starts with a `ProjectionSet` abstraction. Each tuple (row, map) has a projection set. The projection set can be a set of names (`ProjectionSetImpl`) or a default (`NullProjectionSet`).\r\n\r\n#### Result Set Loader\r\n\r\nThe result set loader is modified to check if a column is projected. If so, the code flow is the same as previously. If not, then the code will create the dummy vector state and dummy writers described above.\r\n\r\nAdding support for non-projected columns involved the usual amount of refactoring and moving bits of code around to get a simple solution.\r\n\r\n#### Accessor Factories\r\n\r\nPrior versions had a `ColumnAccessorFactory` class that created both readers and writers. This commit splits the class into separate reader and writer factories. The writer factory now creates dummy writers if asked to create a writer when the backing vector is null. To make this easier, factory code that previously appeared in each writer has moved into the writer factory. (Note that readers don’t support projection: there is no need.)\r\n\r\n#### Dummy Writers\r\n\r\nThe accessor layer is modified to create a set of dummy writers. Scalar writers have a wide (internal) interface. Dummy scalar writers simply ignore the unsupported operations. Dummy array and tuple writers are also provided.\r\n\r\n#### Unit Test\r\n\r\nThe new `TestResultSetLoaderProjection` test exercises the new code. The new `DummyWriterTest` exercises the dummy writers.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331291210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331325895","html_url":"https://github.com/apache/drill/pull/914#issuecomment-331325895","issue_url":"https://api.github.com/repos/apache/drill/issues/914","id":331325895,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTMyNTg5NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T01:32:38Z","updated_at":"2017-09-22T01:32:38Z","author_association":"CONTRIBUTOR","body":"Rebased onto master to resolve conflict in `exec/jdbc-all/pom.xml`.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331325895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331350881","html_url":"https://github.com/apache/drill/pull/938#issuecomment-331350881","issue_url":"https://api.github.com/repos/apache/drill/issues/938","id":331350881,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTM1MDg4MQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T05:03:53Z","updated_at":"2017-09-22T05:03:53Z","author_association":"CONTRIBUTOR","body":"@Ben-Zvi, unit tests failed with these errors:\r\n```\r\nFailed tests: \r\n  TestHashAggrSpill.testHashAggrFailWithFallbackDisabed:165 null\r\n\r\nTests in error: \r\n  TestHashAggrSpill.testNoPredictHashAggrSpill:135->testSpill:110 » IllegalState\r\n  TestHashAggrSpill.testHashAggrSecondaryTertiarySpill:147->testSpill:110 » IllegalState\r\n  TestHashAggrSpill.testSimpleHashAggrSpill:123->testSpill:110 » IllegalState Cl...\r\n  TestHashAggrSpill.testHashAggrSuccessWithFallbackEnabled:179->testSpill:110 » IllegalState\r\n```\r\nIs this expected at this stage? Are these due to the test framework issue we discussed recently?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331350881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331356588","html_url":"https://github.com/apache/drill/pull/938#issuecomment-331356588","issue_url":"https://api.github.com/repos/apache/drill/issues/938","id":331356588,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTM1NjU4OA==","user":{"login":"Ben-Zvi","id":5465159,"node_id":"MDQ6VXNlcjU0NjUxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/5465159?v=4","gravatar_id":"","url":"https://api.github.com/users/Ben-Zvi","html_url":"https://github.com/Ben-Zvi","followers_url":"https://api.github.com/users/Ben-Zvi/followers","following_url":"https://api.github.com/users/Ben-Zvi/following{/other_user}","gists_url":"https://api.github.com/users/Ben-Zvi/gists{/gist_id}","starred_url":"https://api.github.com/users/Ben-Zvi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ben-Zvi/subscriptions","organizations_url":"https://api.github.com/users/Ben-Zvi/orgs","repos_url":"https://api.github.com/users/Ben-Zvi/repos","events_url":"https://api.github.com/users/Ben-Zvi/events{/privacy}","received_events_url":"https://api.github.com/users/Ben-Zvi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T05:51:33Z","updated_at":"2017-09-22T05:51:33Z","author_association":"CONTRIBUTOR","body":"  These tests passed for me (embedded, on the Mac) after squashing and rebasing yesterday.\n\nWere these failures seen on the cluster ?\n\nThe test that \"failed\" was supposed to hit a failure internally (user error - not enough memory).\n\n\n\n________________________________\nFrom: Paul Rogers <notifications@github.com>\nSent: Thursday, September 21, 2017 10:03:57 PM\nTo: apache/drill\nCc: Boaz Ben-Zvi; Mention\nSubject: Re: [apache/drill] DRILL-5694: Handle HashAgg OOM by spill and retry, plus perf improvement (#938)\n\n\n@Ben-Zvi<https://github.com/ben-zvi>, unit tests failed with these errors:\n\nFailed tests:\n  TestHashAggrSpill.testHashAggrFailWithFallbackDisabed:165 null\n\nTests in error:\n  TestHashAggrSpill.testNoPredictHashAggrSpill:135->testSpill:110 » IllegalState\n  TestHashAggrSpill.testHashAggrSecondaryTertiarySpill:147->testSpill:110 » IllegalState\n  TestHashAggrSpill.testSimpleHashAggrSpill:123->testSpill:110 » IllegalState Cl...\n  TestHashAggrSpill.testHashAggrSuccessWithFallbackEnabled:179->testSpill:110 » IllegalState\n\n\nIs this expected at this stage? Are these due to the test framework issue we discussed recently?\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/apache/drill/pull/938#issuecomment-331350881>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AFNkR8EwAcVMU_x3rbfQNjKDs3GvNhkxks5skz-8gaJpZM4PR2ky>.\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331356588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331501377","html_url":"https://github.com/apache/drill/pull/954#issuecomment-331501377","issue_url":"https://api.github.com/repos/apache/drill/issues/954","id":331501377,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTUwMTM3Nw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T16:53:22Z","updated_at":"2017-09-22T16:53:22Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Can you please review this minor UI update?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331501377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331501783","html_url":"https://github.com/apache/drill/pull/953#issuecomment-331501783","issue_url":"https://api.github.com/repos/apache/drill/issues/953","id":331501783,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTUwMTc4Mw==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T16:55:01Z","updated_at":"2017-09-22T16:55:01Z","author_association":"CONTRIBUTOR","body":"@paul-rogers since you had reviewed the initial PR, thought you should review this minor update as well.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331501783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331511238","html_url":"https://github.com/apache/drill/pull/938#issuecomment-331511238","issue_url":"https://api.github.com/repos/apache/drill/issues/938","id":331511238,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTUxMTIzOA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T17:32:01Z","updated_at":"2017-09-22T17:32:01Z","author_association":"CONTRIBUTOR","body":"These failures were seen on the QA cluster. Look for for build \"MERGE-070921-1\".\r\n\r\nThe team just cleaned up a bunch of failing tests; I hesitate to introduce a commit that causes a new set to fail. Can you investigate please?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331511238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331527500","html_url":"https://github.com/apache/drill/pull/905#issuecomment-331527500","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":331527500,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTUyNzUwMA==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T18:36:04Z","updated_at":"2017-09-22T18:36:04Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi , the example you listed (three tables a,b,c all have same values) seems to be essentially cross-join. For such cases, clearly the current rowCount estimation is way off from the real number, which would impact the estimation of hash join memory cost, and hence the proposed idea would not work. However, I feel it's not a very common case to have two tables joined like a cross join. The question is : does it make sense to modify cost estimation for seemly uncommonly use case?\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331527500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331528039","html_url":"https://github.com/apache/drill/pull/805#issuecomment-331528039","issue_url":"https://api.github.com/repos/apache/drill/issues/805","id":331528039,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTUyODAzOQ==","user":{"login":"jinfengni","id":5742011,"node_id":"MDQ6VXNlcjU3NDIwMTE=","avatar_url":"https://avatars.githubusercontent.com/u/5742011?v=4","gravatar_id":"","url":"https://api.github.com/users/jinfengni","html_url":"https://github.com/jinfengni","followers_url":"https://api.github.com/users/jinfengni/followers","following_url":"https://api.github.com/users/jinfengni/following{/other_user}","gists_url":"https://api.github.com/users/jinfengni/gists{/gist_id}","starred_url":"https://api.github.com/users/jinfengni/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinfengni/subscriptions","organizations_url":"https://api.github.com/users/jinfengni/orgs","repos_url":"https://api.github.com/users/jinfengni/repos","events_url":"https://api.github.com/users/jinfengni/events{/privacy}","received_events_url":"https://api.github.com/users/jinfengni/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T18:38:25Z","updated_at":"2017-09-22T18:38:25Z","author_association":"CONTRIBUTOR","body":"The revised patch addressed my earlier comments. LGTM. \r\n\r\n+1\r\n\r\nps: I did not look into the change of version number. @paul-rogers would have better idea. \r\n ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331528039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331545916","html_url":"https://github.com/apache/drill/pull/955#issuecomment-331545916","issue_url":"https://api.github.com/repos/apache/drill/issues/955","id":331545916,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU0NTkxNg==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T19:57:50Z","updated_at":"2017-09-22T19:57:50Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva Here's the minor change that restores the graph","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331545916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331549452","html_url":"https://github.com/apache/drill/pull/955#issuecomment-331549452","issue_url":"https://api.github.com/repos/apache/drill/issues/955","id":331549452,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU0OTQ1Mg==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T20:13:10Z","updated_at":"2017-09-22T20:13:10Z","author_association":"CONTRIBUTOR","body":"Closing this and submitting a new PR from a new duplicate feature branch which is correctly labelled.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331549452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331580176","html_url":"https://github.com/apache/drill/pull/956#issuecomment-331580176","issue_url":"https://api.github.com/repos/apache/drill/issues/956","id":331580176,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU4MDE3Ng==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T23:07:24Z","updated_at":"2017-09-22T23:07:24Z","author_association":"MEMBER","body":"+1, LGTM. @kkhatua thanks for finding this bug.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331580176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331617147","html_url":"https://github.com/apache/drill/pull/957#issuecomment-331617147","issue_url":"https://api.github.com/repos/apache/drill/issues/957","id":331617147,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTYxNzE0Nw==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-23T07:29:13Z","updated_at":"2017-09-23T07:29:13Z","author_association":"CONTRIBUTOR","body":"@paul-rogers ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331617147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331680490","html_url":"https://github.com/apache/drill/pull/946#issuecomment-331680490","issue_url":"https://api.github.com/repos/apache/drill/issues/946","id":331680490,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTY4MDQ5MA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T01:32:47Z","updated_at":"2017-09-24T01:32:47Z","author_association":"CONTRIBUTOR","body":"@parthchandra or @sohami, can one of you take a quick look at this one since you are familiar with our C builds? ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331680490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331680591","html_url":"https://github.com/apache/drill/pull/952#issuecomment-331680591","issue_url":"https://api.github.com/repos/apache/drill/issues/952","id":331680591,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTY4MDU5MQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T01:35:37Z","updated_at":"2017-09-24T01:35:37Z","author_association":"CONTRIBUTOR","body":"Unit tests for S3 are difficult as we can't guarantee that each developer who runs the tests has visibility. @ilooner is adding test categories. Perhaps we can use one of those to create S3 tests that require some specific S3 setup, perhaps in a user-specific Maven properties file. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331680591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331686739","html_url":"https://github.com/apache/drill/pull/932#issuecomment-331686739","issue_url":"https://api.github.com/repos/apache/drill/issues/932","id":331686739,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTY4NjczOQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T04:39:00Z","updated_at":"2017-09-24T04:39:00Z","author_association":"CONTRIBUTOR","body":"Added a fix for repeated columns that have a low cardinality. If, say, one row in ten has an array entry, then average cardinality (values per row) is 0.1. This was represented by an int, rounded to 0 and caused a zero-length vector to be allocated. Drill then tried to double the length, which resulted in 0, which was doubled again, and so on forever.\r\n\r\nThe fix has three parts:\r\n\r\n* The \"record batch sizer\" uses floats to allow fractional cardinality.\r\n* The vector initializer now works with fractional cardinality.\r\n* If all else fails, if a fixed-width vector is asked to double from zero, it sizes the vector to 256 bytes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331686739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331761570","html_url":"https://github.com/apache/drill/pull/932#issuecomment-331761570","issue_url":"https://api.github.com/repos/apache/drill/issues/932","id":331761570,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTc2MTU3MA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T02:25:31Z","updated_at":"2017-09-25T02:25:31Z","author_association":"CONTRIBUTOR","body":"Rebased onto latest master.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331761570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331766143","html_url":"https://github.com/apache/drill/pull/959#issuecomment-331766143","issue_url":"https://api.github.com/repos/apache/drill/issues/959","id":331766143,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTc2NjE0Mw==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T03:05:50Z","updated_at":"2017-09-25T03:05:50Z","author_association":"CONTRIBUTOR","body":"@amansinha100 - Please help to review.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331766143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331774635","html_url":"https://github.com/apache/drill/pull/805#issuecomment-331774635","issue_url":"https://api.github.com/repos/apache/drill/issues/805","id":331774635,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTc3NDYzNQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T04:30:59Z","updated_at":"2017-09-25T04:30:59Z","author_association":"CONTRIBUTOR","body":"Tried to commit this one. Failed in functional tests:\r\n\r\n{noformat}\r\nData Verification Failures:\r\n/root/drillAutomation/mapr/framework/resources/Functional/metadata_caching/data/varchar_partition6.q\r\n/root/drillAutomation/mapr/framework/resources/Functional/parquet_storage/parquet_date/auto_partition/data/q2.q\r\n/root/drillAutomation/mapr/framework/resources/Functional/metadata_caching/data/varchar_partition3.q\r\n\r\nPlan Verification Failures:\r\n/root/drillAutomation/mapr/framework/resources/Functional/metadata_caching/plan/varchar_partition8.q\r\n/root/drillAutomation/mapr/framework/resources/Functional/metadata_caching/plan/varchar_partition2.q\r\n/root/drillAutomation/mapr/framework/resources/Functional/parquet_storage/parquet_date/auto_partition/plan/q2.q\r\n/root/drillAutomation/mapr/framework/resources/Functional/metadata_caching/plan/varchar_partition1.q\r\n{noformat}\r\n\r\nAnd in unit tests:\r\n\r\n{noformat}\r\nFailed tests: \r\n  TestHashAggrSpill.testHashAggrFailWithFallbackDisabed:165 null\r\n\r\nTests in error: \r\n  TestHashAggrSpill.testNoPredictHashAggrSpill:135->testSpill:110 » IllegalState\r\n  TestHashAggrSpill.testHashAggrSecondaryTertiarySpill:147->testSpill:110 » IllegalState\r\n  TestHashAggrSpill.testSimpleHashAggrSpill:123->testSpill:110 » IllegalState Cl...\r\n  TestHashAggrSpill.testHashAggrSuccessWithFallbackEnabled:179->testSpill:110 » IllegalState\r\n{noformat}\r\n\r\nSee build MERGE-170924-1 for details.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331774635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331852870","html_url":"https://github.com/apache/drill/pull/805#issuecomment-331852870","issue_url":"https://api.github.com/repos/apache/drill/issues/805","id":331852870,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTg1Mjg3MA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T11:28:03Z","updated_at":"2017-09-25T11:55:20Z","author_association":"MEMBER","body":"@paul-rogers, test data should be regenerated (using the Drill version with this fix) before running functional tests since these tests use metadata cache files. Sorry, I had to notify you about that.\r\n\r\nRegarding unit test failures: I rebased onto the master, run tests on my machine and on the test cluster, and for both cases, tests finished without errors. So, perhaps it was a random test failure.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331852870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331857198","html_url":"https://github.com/apache/drill/pull/905#issuecomment-331857198","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":331857198,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTg1NzE5OA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T11:49:39Z","updated_at":"2017-09-25T11:49:39Z","author_association":"MEMBER","body":"@jinfengni it was an inflated example, but considering the case of multiple joins and when tables have several repeated values, the result will be the same. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331857198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331857332","html_url":"https://github.com/apache/drill/pull/905#issuecomment-331857332","issue_url":"https://api.github.com/repos/apache/drill/issues/905","id":331857332,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTg1NzMzMg==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T11:50:15Z","updated_at":"2017-09-25T11:50:15Z","author_association":"MEMBER","body":"Since Drill does not have enough information about tables in the planning time to avoid this OOM and since without using the `getMaxRowCount()` for `ScanPrel`, current approach could not be used and it would be better to defer the fix for this issue until the table statistics is implemented.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331857332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331940971","html_url":"https://github.com/apache/drill/pull/957#issuecomment-331940971","issue_url":"https://api.github.com/repos/apache/drill/issues/957","id":331940971,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk0MDk3MQ==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T16:43:26Z","updated_at":"2017-09-25T16:43:26Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Applied comments and squashed commits","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331940971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331942863","html_url":"https://github.com/apache/drill/pull/805#issuecomment-331942863","issue_url":"https://api.github.com/repos/apache/drill/issues/805","id":331942863,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk0Mjg2Mw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T16:50:05Z","updated_at":"2017-09-25T16:50:05Z","author_association":"CONTRIBUTOR","body":"I'm probably confused. Our goal with the Parquet metadata versioning was that new Drill versions can read old files. Here we have a case in which I was running with old versions of the file, using your new code. Why do I need to rebuild files? Is version backward compatibility already broken?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331942863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331953953","html_url":"https://github.com/apache/drill/pull/946#issuecomment-331953953","issue_url":"https://api.github.com/repos/apache/drill/issues/946","id":331953953,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk1Mzk1Mw==","user":{"login":"parthchandra","id":6529136,"node_id":"MDQ6VXNlcjY1MjkxMzY=","avatar_url":"https://avatars.githubusercontent.com/u/6529136?v=4","gravatar_id":"","url":"https://api.github.com/users/parthchandra","html_url":"https://github.com/parthchandra","followers_url":"https://api.github.com/users/parthchandra/followers","following_url":"https://api.github.com/users/parthchandra/following{/other_user}","gists_url":"https://api.github.com/users/parthchandra/gists{/gist_id}","starred_url":"https://api.github.com/users/parthchandra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/parthchandra/subscriptions","organizations_url":"https://api.github.com/users/parthchandra/orgs","repos_url":"https://api.github.com/users/parthchandra/repos","events_url":"https://api.github.com/users/parthchandra/events{/privacy}","received_events_url":"https://api.github.com/users/parthchandra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T17:30:27Z","updated_at":"2017-09-25T17:30:27Z","author_association":"CONTRIBUTOR","body":"+1. Thanks for the fix. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331953953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/331985344","html_url":"https://github.com/apache/drill/pull/805#issuecomment-331985344","issue_url":"https://api.github.com/repos/apache/drill/issues/805","id":331985344,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk4NTM0NA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T19:22:24Z","updated_at":"2017-09-25T19:22:24Z","author_association":"MEMBER","body":"This my bad habit to regenerate metadata left from the times before fix DRILL-5660. These functional test failures are the result of the mistake that I have made when resolving merge conflicts with DRILL-4264. After I made rebase, older 3.2 version still used in `ParquetReaderUtility` instead of 3.3. \r\nI fixed this bug and functional tests are pass without regenerating parquet metadata cache. Could you please take a look at this change in the last commit?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/331985344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332078616","html_url":"https://github.com/apache/drill/pull/957#issuecomment-332078616","issue_url":"https://api.github.com/repos/apache/drill/issues/957","id":332078616,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjA3ODYxNg==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T03:49:12Z","updated_at":"2017-09-26T03:49:12Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Applied comments and did a few other changes. Unit tests cover backward compatability. I manually tested forward compatability locally by saving some options with the new version using the LocalStore. Then I rolled back to an older version of Drill and loaded the data from the LocalStore.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332078616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332086769","html_url":"https://github.com/apache/drill/pull/959#issuecomment-332086769","issue_url":"https://api.github.com/repos/apache/drill/issues/959","id":332086769,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjA4Njc2OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T05:00:13Z","updated_at":"2017-09-26T05:00:13Z","author_association":"CONTRIBUTOR","body":"The change looks benign. I wonder; do we have a test case that exercises the hash functions so we can be certain that the fix actually solves the original problem?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332086769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332087594","html_url":"https://github.com/apache/drill/pull/957#issuecomment-332087594","issue_url":"https://api.github.com/repos/apache/drill/issues/957","id":332087594,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjA4NzU5NA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T05:06:59Z","updated_at":"2017-09-26T05:06:59Z","author_association":"CONTRIBUTOR","body":"Thanks for the changes.\r\n+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332087594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332107355","html_url":"https://github.com/apache/drill/pull/959#issuecomment-332107355","issue_url":"https://api.github.com/repos/apache/drill/issues/959","id":332107355,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjEwNzM1NQ==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T07:11:28Z","updated_at":"2017-09-26T07:11:28Z","author_association":"CONTRIBUTOR","body":"@paul-rogers - I have added few tests and findings using hash32 and hash64 to compute the 32 bit hash codes in JIRA. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332107355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332113565","html_url":"https://github.com/apache/drill/pull/904#issuecomment-332113565","issue_url":"https://api.github.com/repos/apache/drill/issues/904","id":332113565,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjExMzU2NQ==","user":{"login":"weijietong","id":728692,"node_id":"MDQ6VXNlcjcyODY5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/728692?v=4","gravatar_id":"","url":"https://api.github.com/users/weijietong","html_url":"https://github.com/weijietong","followers_url":"https://api.github.com/users/weijietong/followers","following_url":"https://api.github.com/users/weijietong/following{/other_user}","gists_url":"https://api.github.com/users/weijietong/gists{/gist_id}","starred_url":"https://api.github.com/users/weijietong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weijietong/subscriptions","organizations_url":"https://api.github.com/users/weijietong/orgs","repos_url":"https://api.github.com/users/weijietong/repos","events_url":"https://api.github.com/users/weijietong/events{/privacy}","received_events_url":"https://api.github.com/users/weijietong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T07:40:54Z","updated_at":"2017-09-26T07:40:54Z","author_association":"NONE","body":"@vvysotskyi thanks for your patient review . As you pointed out  , the timezone would not take effect when test cases run in parallel. I also tried the mock strategy. It will also fail in parallel. So I moved out that part of code to a new class called `TestCastFunctionsSpecTZCases` by specifying the timezone before the cluster starts up. It would be clear to the codes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332113565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332241492","html_url":"https://github.com/apache/drill/pull/959#issuecomment-332241492","issue_url":"https://api.github.com/repos/apache/drill/issues/959","id":332241492,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI0MTQ5Mg==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T15:44:28Z","updated_at":"2017-09-26T15:44:28Z","author_association":"NONE","body":"lgtm.  +1.  @sohami could you pls check with @chunhui-shi if unit tests were added previously for  DRILL-4237 (another skew issue)?  If not, could you create a new JIRA to add such tests, which should include the data set for DRILL-4237, DRILL-4119, DRILL-5816 among others. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332241492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332303565","html_url":"https://github.com/apache/drill/pull/962#issuecomment-332303565","issue_url":"https://api.github.com/repos/apache/drill/issues/962","id":332303565,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjMwMzU2NQ==","user":{"login":"sohami","id":22159459,"node_id":"MDQ6VXNlcjIyMTU5NDU5","avatar_url":"https://avatars.githubusercontent.com/u/22159459?v=4","gravatar_id":"","url":"https://api.github.com/users/sohami","html_url":"https://github.com/sohami","followers_url":"https://api.github.com/users/sohami/followers","following_url":"https://api.github.com/users/sohami/following{/other_user}","gists_url":"https://api.github.com/users/sohami/gists{/gist_id}","starred_url":"https://api.github.com/users/sohami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sohami/subscriptions","organizations_url":"https://api.github.com/users/sohami/orgs","repos_url":"https://api.github.com/users/sohami/repos","events_url":"https://api.github.com/users/sohami/events{/privacy}","received_events_url":"https://api.github.com/users/sohami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T19:09:07Z","updated_at":"2017-09-26T19:09:07Z","author_association":"CONTRIBUTOR","body":"@parthchandra - Please help to review","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332303565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332334239","html_url":"https://github.com/apache/drill/pull/953#issuecomment-332334239","issue_url":"https://api.github.com/repos/apache/drill/issues/953","id":332334239,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjMzNDIzOQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T20:59:07Z","updated_at":"2017-09-26T20:59:07Z","author_association":"CONTRIBUTOR","body":"Closed the original PR accidentally. Have filed a new one #963 ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332334239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332334518","html_url":"https://github.com/apache/drill/pull/963#issuecomment-332334518","issue_url":"https://api.github.com/repos/apache/drill/issues/963","id":332334518,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjMzNDUxOA==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T21:00:06Z","updated_at":"2017-09-26T21:00:06Z","author_association":"CONTRIBUTOR","body":"@paul-rogers Opened a new PR as I accidentally closed #953 . This is ready for review.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332334518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332343589","html_url":"https://github.com/apache/drill/pull/932#issuecomment-332343589","issue_url":"https://api.github.com/repos/apache/drill/issues/932","id":332343589,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM0MzU4OQ==","user":{"login":"amansinha100","id":6034475,"node_id":"MDQ6VXNlcjYwMzQ0NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6034475?v=4","gravatar_id":"","url":"https://api.github.com/users/amansinha100","html_url":"https://github.com/amansinha100","followers_url":"https://api.github.com/users/amansinha100/followers","following_url":"https://api.github.com/users/amansinha100/following{/other_user}","gists_url":"https://api.github.com/users/amansinha100/gists{/gist_id}","starred_url":"https://api.github.com/users/amansinha100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amansinha100/subscriptions","organizations_url":"https://api.github.com/users/amansinha100/orgs","repos_url":"https://api.github.com/users/amansinha100/repos","events_url":"https://api.github.com/users/amansinha100/events{/privacy}","received_events_url":"https://api.github.com/users/amansinha100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T21:36:40Z","updated_at":"2017-09-26T21:36:40Z","author_association":"NONE","body":"Changes LGTM.  +1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332343589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332362075","html_url":"https://github.com/apache/drill/pull/954#issuecomment-332362075","issue_url":"https://api.github.com/repos/apache/drill/issues/954","id":332362075,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM2MjA3NQ==","user":{"login":"kkhatua","id":4335237,"node_id":"MDQ6VXNlcjQzMzUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/4335237?v=4","gravatar_id":"","url":"https://api.github.com/users/kkhatua","html_url":"https://github.com/kkhatua","followers_url":"https://api.github.com/users/kkhatua/followers","following_url":"https://api.github.com/users/kkhatua/following{/other_user}","gists_url":"https://api.github.com/users/kkhatua/gists{/gist_id}","starred_url":"https://api.github.com/users/kkhatua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkhatua/subscriptions","organizations_url":"https://api.github.com/users/kkhatua/orgs","repos_url":"https://api.github.com/users/kkhatua/repos","events_url":"https://api.github.com/users/kkhatua/events{/privacy}","received_events_url":"https://api.github.com/users/kkhatua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T23:11:02Z","updated_at":"2017-09-26T23:11:02Z","author_association":"CONTRIBUTOR","body":"@paul-rogers  Made the changes","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332362075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332380571","html_url":"https://github.com/apache/drill/pull/914#issuecomment-332380571","issue_url":"https://api.github.com/repos/apache/drill/issues/914","id":332380571,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM4MDU3MQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T01:17:48Z","updated_at":"2017-09-27T01:17:48Z","author_association":"CONTRIBUTOR","body":"Added final development stage to this PR. This is a minor implementation tweak. The result set loader internals for maps held redundant map vectors. In the final vector container, each map must be represented by a map (or repeated map) vector. But, because the result set loader handles projection and overflow, the set of columns that a map writer works with is a superset of those that appear in the output container. For this reason, there turns out to be no reason to maintain these \"redundant\" map vectors.\r\n\r\nFor repeated map vectors, we must maintain the offset vector. The code already did this; we just strip off the enclosing repeated map vector.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332380571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/332381108","html_url":"https://github.com/apache/drill/pull/964#issuecomment-332381108","issue_url":"https://api.github.com/repos/apache/drill/issues/964","id":332381108,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM4MTEwOA==","user":{"login":"ilooner","id":8020165,"node_id":"MDQ6VXNlcjgwMjAxNjU=","avatar_url":"https://avatars.githubusercontent.com/u/8020165?v=4","gravatar_id":"","url":"https://api.github.com/users/ilooner","html_url":"https://github.com/ilooner","followers_url":"https://api.github.com/users/ilooner/followers","following_url":"https://api.github.com/users/ilooner/following{/other_user}","gists_url":"https://api.github.com/users/ilooner/gists{/gist_id}","starred_url":"https://api.github.com/users/ilooner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilooner/subscriptions","organizations_url":"https://api.github.com/users/ilooner/orgs","repos_url":"https://api.github.com/users/ilooner/repos","events_url":"https://api.github.com/users/ilooner/events{/privacy}","received_events_url":"https://api.github.com/users/ilooner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T01:21:41Z","updated_at":"2017-09-27T01:21:41Z","author_association":"CONTRIBUTOR","body":"@Ben-Zvi @paul-rogers","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/332381108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]