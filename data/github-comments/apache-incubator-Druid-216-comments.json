[{"url":"https://api.github.com/repos/apache/druid/issues/comments/454749603","html_url":"https://github.com/apache/druid/issues/6852#issuecomment-454749603","issue_url":"https://api.github.com/repos/apache/druid/issues/6852","id":454749603,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc0OTYwMw==","user":{"login":"zhangxinyu1","id":12528894,"node_id":"MDQ6VXNlcjEyNTI4ODk0","avatar_url":"https://avatars.githubusercontent.com/u/12528894?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangxinyu1","html_url":"https://github.com/zhangxinyu1","followers_url":"https://api.github.com/users/zhangxinyu1/followers","following_url":"https://api.github.com/users/zhangxinyu1/following{/other_user}","gists_url":"https://api.github.com/users/zhangxinyu1/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangxinyu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangxinyu1/subscriptions","organizations_url":"https://api.github.com/users/zhangxinyu1/orgs","repos_url":"https://api.github.com/users/zhangxinyu1/repos","events_url":"https://api.github.com/users/zhangxinyu1/events{/privacy}","received_events_url":"https://api.github.com/users/zhangxinyu1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T11:42:26Z","updated_at":"2019-01-16T11:42:26Z","author_association":"CONTRIBUTOR","body":"Hi @mihai-cazacu-adswizz, \r\n\r\nAbout the error:\r\n\r\n> java.lang.RuntimeException: java.lang.ClassNotFoundException: Class com.amazon.ws.emr.hadoop.fs.EmrFileSystem not found\r\n\r\nHave you added the \"druid-hdfs-storage\" extension?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454749603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454750390","html_url":"https://github.com/apache/druid/issues/6860#issuecomment-454750390","issue_url":"https://api.github.com/repos/apache/druid/issues/6860","id":454750390,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc1MDM5MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T11:45:35Z","updated_at":"2019-01-16T11:45:35Z","author_association":"MEMBER","body":"IntelliJ users don't really become aware of inspection violations until a PR is created too. A full analysis takes about an hour in TeamCity.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454750390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454752610","html_url":"https://github.com/apache/druid/pull/6381#issuecomment-454752610","issue_url":"https://api.github.com/repos/apache/druid/issues/6381","id":454752610,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc1MjYxMA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T11:53:56Z","updated_at":"2019-01-16T11:53:56Z","author_association":"MEMBER","body":"My long term intention is the opposite: remove `OnheapIncrementalIndex`, along with on-heap `Aggregator`s. Leave only BufferAggregators. It's mentioned here: https://github.com/apache/incubator-druid/pull/5335#issue-166870792, the last paragraph. The umbrella issue is #4622.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454752610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454753070","html_url":"https://github.com/apache/druid/issues/6852#issuecomment-454753070","issue_url":"https://api.github.com/repos/apache/druid/issues/6852","id":454753070,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc1MzA3MA==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T11:55:37Z","updated_at":"2019-01-16T13:25:16Z","author_association":"NONE","body":"Hi @zhangxinyu1 ,\r\n\r\nNo, it's installed but isn't loaded. I'll re-test the spec and I'll come back with the result.\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454753070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454755833","html_url":"https://github.com/apache/druid/pull/6581#issuecomment-454755833","issue_url":"https://api.github.com/repos/apache/druid/issues/6581","id":454755833,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc1NTgzMw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T12:05:53Z","updated_at":"2019-01-16T12:06:02Z","author_association":"MEMBER","body":"@edgan8 as a side note, please don't \"mark converations as resolved\". I wish this Github feature could be turned off. As a reviewer I anyway have to revisit each conversation and verify myself that it's resolved, marking it as resolved just adds clicking work for me.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454755833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454762753","html_url":"https://github.com/apache/druid/pull/6302#issuecomment-454762753","issue_url":"https://api.github.com/repos/apache/druid/issues/6302","id":454762753,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc2Mjc1Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T12:31:53Z","updated_at":"2019-01-16T12:31:53Z","author_association":"MEMBER","body":"@gianm please raise an issue in IntelliJ's YouTrack. Ideally a link to the issue should be in a comment next to suppression, so that people could know when the suppression could be removed. See `DruidFloatPredicate` for an example.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454762753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454768920","html_url":"https://github.com/apache/druid/issues/6852#issuecomment-454768920","issue_url":"https://api.github.com/repos/apache/druid/issues/6852","id":454768920,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDc2ODkyMA==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T12:54:49Z","updated_at":"2019-01-22T11:24:56Z","author_association":"NONE","body":"@zhangxinyu1: I've found that the `druid-hdfs-storage` extension wasn't loaded because we are using S3 for storage (`druid-s3-extensions` instead of `druid-hdfs-storage`). \r\n\r\nNow, the extension `druid-hdfs-storage` is installed and loaded but the error is still the same:\r\n\r\n>org.apache.druid.java.util.common.ISE: **Hadoop dependency [/opt/druid/druid-0.13.0-bin/hadoop-dependencies/hadoop-client/2.3.0] didn't exist!?**\r\n>at org.apache.druid.initialization.Initialization.getHadoopDependencyFilesToLoad(Initialization.java:281) ~[druid-server-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at org.apache.druid.indexing.common.task.HadoopTask.buildClassLoader(HadoopTask.java:158) ~[druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at org.apache.druid.indexing.common.task.HadoopTask.buildClassLoader(HadoopTask.java:132) ~[druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at org.apache.druid.indexing.common.task.HadoopIndexTask.runInternal(HadoopIndexTask.java:262) ~[druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at org.apache.druid.indexing.common.task.HadoopIndexTask.run(HadoopIndexTask.java:232) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at org.apache.druid.indexing.overlord.SingleTaskBackgroundRunner$SingleTaskBackgroundRunnerCallable.call(SingleTaskBackgroundRunner.java:421) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at org.apache.druid.indexing.overlord.SingleTaskBackgroundRunner$SingleTaskBackgroundRunnerCallable.call(SingleTaskBackgroundRunner.java:393) [druid-indexing-service-0.13.0-incubating.jar:0.13.0-incubating]\r\n>at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_191]\r\n>at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_191]\r\n>at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_191]\r\n>at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]\r\n\r\nHere is the content of the mentioned directory:\r\n\r\n> root# ls -lA /opt/druid/druid-0.13.0-bin/hadoop-dependencies/hadoop-client/\r\n> total 20\r\n> drwxr-xr-x 2 root   root   16384 Jan  9 15:13 2.7.3\r\n> drwxrwxr-x 2 root root  4096 Dec 19 13:46 2.8.3\r\n\r\nQ1: Do we have to manually install the `2.3.0` version of `hadoop-client`?\r\nQ2: Why do you use \"druid-hdfs-storage\"? Is not possible to use S3 as a replacement?\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454768920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454836755","html_url":"https://github.com/apache/druid/pull/6381#issuecomment-454836755","issue_url":"https://api.github.com/repos/apache/druid/issues/6381","id":454836755,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDgzNjc1NQ==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T16:09:42Z","updated_at":"2019-01-16T16:09:42Z","author_association":"CONTRIBUTOR","body":"Does this imply that we still want to have synchronization in buffer aggregators?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454836755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454851389","html_url":"https://github.com/apache/druid/issues/6860#issuecomment-454851389","issue_url":"https://api.github.com/repos/apache/druid/issues/6860","id":454851389,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg1MTM4OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T16:46:35Z","updated_at":"2019-01-16T16:46:35Z","author_association":"CONTRIBUTOR","body":"Anecdotally I've seen a few of these inspections show up as warnings and errors in the IntelliJ IDE. I have definitely seen it flag unused declarations (although I think they show up as warnings rather than errors).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454851389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454852200","html_url":"https://github.com/apache/druid/issues/6872#issuecomment-454852200","issue_url":"https://api.github.com/repos/apache/druid/issues/6872","id":454852200,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg1MjIwMA==","user":{"login":"havannavar","id":1104650,"node_id":"MDQ6VXNlcjExMDQ2NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1104650?v=4","gravatar_id":"","url":"https://api.github.com/users/havannavar","html_url":"https://github.com/havannavar","followers_url":"https://api.github.com/users/havannavar/followers","following_url":"https://api.github.com/users/havannavar/following{/other_user}","gists_url":"https://api.github.com/users/havannavar/gists{/gist_id}","starred_url":"https://api.github.com/users/havannavar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/havannavar/subscriptions","organizations_url":"https://api.github.com/users/havannavar/orgs","repos_url":"https://api.github.com/users/havannavar/repos","events_url":"https://api.github.com/users/havannavar/events{/privacy}","received_events_url":"https://api.github.com/users/havannavar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T16:48:48Z","updated_at":"2019-01-16T16:48:48Z","author_association":"NONE","body":"I'm able to fix the issue, as this was network issue and fixed zookeeper in common.properties fiel too","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454852200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454855211","html_url":"https://github.com/apache/druid/issues/6870#issuecomment-454855211","issue_url":"https://api.github.com/repos/apache/druid/issues/6870","id":454855211,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg1NTIxMQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T16:56:27Z","updated_at":"2019-01-16T16:56:27Z","author_association":"CONTRIBUTOR","body":"The unwritten style rule I have been following is that in JSON and in code (method/variable names) the proper spelling is \"dataSource\" or \"DataSource\". But in natural language documentation, the proper spelling is \"datasource\", because writing dataSource or DataSource looks strange in the middle of natural language text.\r\n\r\nIf we were starting from scratch, I'd say call them \"datasources\" everywhere, but it'd be too disruptive to change all the JSON and code.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454855211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454855662","html_url":"https://github.com/apache/druid/issues/6866#issuecomment-454855662","issue_url":"https://api.github.com/repos/apache/druid/issues/6866","id":454855662,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg1NTY2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T16:57:37Z","updated_at":"2019-01-16T16:57:37Z","author_association":"CONTRIBUTOR","body":"Moving benchmarks to test would be fine, so long as the `benchmarks/target/benchmarks.jar` still gets built properly (that's how people run the benchmarks).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454855662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454859337","html_url":"https://github.com/apache/druid/pull/6302#issuecomment-454859337","issue_url":"https://api.github.com/repos/apache/druid/issues/6302","id":454859337,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg1OTMzNw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:07:18Z","updated_at":"2019-01-16T17:07:18Z","author_association":"CONTRIBUTOR","body":"I've raised this issue: https://youtrack.jetbrains.com/issue/IDEA-205535","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454859337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454860017","html_url":"https://github.com/apache/druid/pull/6868#issuecomment-454860017","issue_url":"https://api.github.com/repos/apache/druid/issues/6868","id":454860017,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg2MDAxNw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:09:03Z","updated_at":"2019-01-16T17:09:03Z","author_association":"CONTRIBUTOR","body":"Hi @zhaojiandong, I think something went wrong with a merge in this patch. It has all of a sudden started involving a lot of unrelated code.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454860017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454860088","html_url":"https://github.com/apache/druid/issues/6871#issuecomment-454860088","issue_url":"https://api.github.com/repos/apache/druid/issues/6871","id":454860088,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg2MDA4OA==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:09:12Z","updated_at":"2019-01-16T17:09:12Z","author_association":"NONE","body":"@Stephan3555 Did you try not setting `maxBytesInMemory` and `maxRowsInMemory` ? The idea is that the user shouldn't need to set these configs, if both configs are not set, then `maxBytesInMemory` defaults to `1/6(Runtime.maxMemory())` and `maxRowsInMemory` defaults to `1000000`(1 million) rows. \r\nAnother thing you can do is set `maxBytesInMemory` to 0, that will also set it internally to the default. Would you please try this and let us know.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454860088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454862672","html_url":"https://github.com/apache/druid/pull/6868#issuecomment-454862672","issue_url":"https://api.github.com/repos/apache/druid/issues/6868","id":454862672,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg2MjY3Mg==","user":{"login":"zhaojiandong","id":5977839,"node_id":"MDQ6VXNlcjU5Nzc4Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/5977839?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaojiandong","html_url":"https://github.com/zhaojiandong","followers_url":"https://api.github.com/users/zhaojiandong/followers","following_url":"https://api.github.com/users/zhaojiandong/following{/other_user}","gists_url":"https://api.github.com/users/zhaojiandong/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaojiandong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaojiandong/subscriptions","organizations_url":"https://api.github.com/users/zhaojiandong/orgs","repos_url":"https://api.github.com/users/zhaojiandong/repos","events_url":"https://api.github.com/users/zhaojiandong/events{/privacy}","received_events_url":"https://api.github.com/users/zhaojiandong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:16:36Z","updated_at":"2019-01-16T17:16:36Z","author_association":"CONTRIBUTOR","body":"> Hi @zhaojiandong, I think something went wrong with a merge in this patch. It has all of a sudden started involving a lot of unrelated code.\r\n\r\nSorry, I've merged some commit from master by mistake @gianm ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454862672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454865723","html_url":"https://github.com/apache/druid/issues/3210#issuecomment-454865723","issue_url":"https://api.github.com/repos/apache/druid/issues/3210","id":454865723,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg2NTcyMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:25:01Z","updated_at":"2019-01-16T17:25:01Z","author_association":"CONTRIBUTOR","body":"It looks like this is the same as #3344.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454865723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454870339","html_url":"https://github.com/apache/druid/pull/6868#issuecomment-454870339","issue_url":"https://api.github.com/repos/apache/druid/issues/6868","id":454870339,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg3MDMzOQ==","user":{"login":"zhaojiandong","id":5977839,"node_id":"MDQ6VXNlcjU5Nzc4Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/5977839?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaojiandong","html_url":"https://github.com/zhaojiandong","followers_url":"https://api.github.com/users/zhaojiandong/followers","following_url":"https://api.github.com/users/zhaojiandong/following{/other_user}","gists_url":"https://api.github.com/users/zhaojiandong/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaojiandong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaojiandong/subscriptions","organizations_url":"https://api.github.com/users/zhaojiandong/orgs","repos_url":"https://api.github.com/users/zhaojiandong/repos","events_url":"https://api.github.com/users/zhaojiandong/events{/privacy}","received_events_url":"https://api.github.com/users/zhaojiandong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:38:04Z","updated_at":"2019-01-16T17:38:04Z","author_association":"CONTRIBUTOR","body":"Hi @gianm , I force to push a clean branch to this pr","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454870339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454874035","html_url":"https://github.com/apache/druid/issues/6814#issuecomment-454874035","issue_url":"https://api.github.com/repos/apache/druid/issues/6814","id":454874035,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg3NDAzNQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:48:46Z","updated_at":"2019-01-16T17:48:46Z","author_association":"CONTRIBUTOR","body":"We recently went through some in-depth looks at the HLL implementation in Druid and @leerho is mostly correct on the Druid HLL shortcomings. The reason we haven't switched over to Theta Sketches internally is that for this specific case the devil you know can be better than the devil you don't. We have a lot of experience with the segment size impact and computational impact of the Druid HLL sketch (capacity and resource planning). As such I do not think *removing* Druid-HLL is a valid path forward.\r\n\r\nMaking Data Sketches the default recommended HLL (and just retain documentation for the legacy one) would make sense to me. I think the module system is pretty solid in Druid (despite a few hadoop related issues), so I would prefer if HLL were moved to a core module instead of the other way around.\r\n\r\nFor a few items such as cardinality aggregations against dimensions or dimension value tuples it seems like a good idea to me to move it to the DataSketches library instead. If for no other reason than that is is designed to be resolved at query time instead of ingestion time, and thus the \"correctness\" of the value hashing is not at all controllable. So the Data Sketches lib would be a natural choice for the query-time HLL sketch operations.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454874035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454875012","html_url":"https://github.com/apache/druid/issues/5817#issuecomment-454875012","issue_url":"https://api.github.com/repos/apache/druid/issues/5817","id":454875012,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg3NTAxMg==","user":{"login":"kamaci","id":3921885,"node_id":"MDQ6VXNlcjM5MjE4ODU=","avatar_url":"https://avatars.githubusercontent.com/u/3921885?v=4","gravatar_id":"","url":"https://api.github.com/users/kamaci","html_url":"https://github.com/kamaci","followers_url":"https://api.github.com/users/kamaci/followers","following_url":"https://api.github.com/users/kamaci/following{/other_user}","gists_url":"https://api.github.com/users/kamaci/gists{/gist_id}","starred_url":"https://api.github.com/users/kamaci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamaci/subscriptions","organizations_url":"https://api.github.com/users/kamaci/orgs","repos_url":"https://api.github.com/users/kamaci/repos","events_url":"https://api.github.com/users/kamaci/events{/privacy}","received_events_url":"https://api.github.com/users/kamaci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:51:40Z","updated_at":"2019-01-16T17:51:40Z","author_association":"MEMBER","body":"Is this issue is resolved via #5894 ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454875012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454875962","html_url":"https://github.com/apache/druid/issues/5817#issuecomment-454875962","issue_url":"https://api.github.com/repos/apache/druid/issues/5817","id":454875962,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg3NTk2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:54:15Z","updated_at":"2019-01-16T17:54:15Z","author_association":"CONTRIBUTOR","body":"Yes, I believe so. I'll close this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454875962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454876311","html_url":"https://github.com/apache/druid/issues/5817#issuecomment-454876311","issue_url":"https://api.github.com/repos/apache/druid/issues/5817","id":454876311,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg3NjMxMQ==","user":{"login":"kamaci","id":3921885,"node_id":"MDQ6VXNlcjM5MjE4ODU=","avatar_url":"https://avatars.githubusercontent.com/u/3921885?v=4","gravatar_id":"","url":"https://api.github.com/users/kamaci","html_url":"https://github.com/kamaci","followers_url":"https://api.github.com/users/kamaci/followers","following_url":"https://api.github.com/users/kamaci/following{/other_user}","gists_url":"https://api.github.com/users/kamaci/gists{/gist_id}","starred_url":"https://api.github.com/users/kamaci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kamaci/subscriptions","organizations_url":"https://api.github.com/users/kamaci/orgs","repos_url":"https://api.github.com/users/kamaci/repos","events_url":"https://api.github.com/users/kamaci/events{/privacy}","received_events_url":"https://api.github.com/users/kamaci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T17:55:16Z","updated_at":"2019-01-16T17:55:16Z","author_association":"MEMBER","body":"ðŸ‘ ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454876311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454880798","html_url":"https://github.com/apache/druid/issues/6814#issuecomment-454880798","issue_url":"https://api.github.com/repos/apache/druid/issues/6814","id":454880798,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg4MDc5OA==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T18:07:40Z","updated_at":"2019-01-16T18:07:40Z","author_association":"CONTRIBUTOR","body":"> The reason we haven't switched over to Theta Sketches internally is that for this specific case the devil you know can be better than the devil you don't. We have a lot of experience with the segment size impact and computational impact of the Druid HLL sketch (capacity and resource planning).\r\n\r\nClarification:  Switching from the Druid-HLL sketch to the DataSketches-Theta sketch family makes no sense.  The `Theta` family of sketches are much larger sketches and provide set intersection functionality that the HLL sketches do not.  What I have been proposing is to switch over to the DataSketches-HLL sketch; which has comparable space utilization but with proven accuracy and speed advantages over the Druid-HLL sketch.  I think that this is what you meant to say.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454880798/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454881037","html_url":"https://github.com/apache/druid/issues/6814#issuecomment-454881037","issue_url":"https://api.github.com/repos/apache/druid/issues/6814","id":454881037,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg4MTAzNw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T18:08:24Z","updated_at":"2019-01-16T18:08:24Z","author_association":"CONTRIBUTOR","body":"> As such I do not think removing Druid-HLL is a valid path forward.\r\n\r\n100% agree. We do not ever want to break compatibility with existing on-disk segments, so we need to keep it.\r\n\r\n> I think the module system is pretty solid in Druid (despite a few hadoop related issues), so I would prefer if HLL were moved to a core module instead of the other way around.\r\n\r\nDruid core does need some kind of HLL implementation, so they can't all be moved to modules. It's used by DetermineHashedPartitionsJob and IndexTask to determine partitions. We might end up wanting to use it for other things too, like tracking dimension cardinality statistics on the broker to aid in query planning.\r\n\r\nAnother consideration is that HLL-based counting functionality is a pretty standard thing in databases these days. Offering it as a core thing is nearly universal.\r\n\r\nA final consideration is the interaction with Druid SQL. In Druid SQL, by default, `COUNT(DISTINCT x)` uses HLL. You can set `useApproximateCountDistinct = false` but by default it's true. There have been objections raised to this (https://github.com/apache/incubator-druid/issues/6814#issuecomment-452056269), but I think it's a good choice for Druid, since it adheres to the Druid philosophy that fast is best, and approximations are how you get there. I feel that doing it in exact mode by default would be un-Druidy. It affects the decision of where to put HLL, since the strategy of count-distinct being approximate by default is only feasible if there's an HLL implementation in core Druid.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454881037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454888977","html_url":"https://github.com/apache/druid/issues/6814#issuecomment-454888977","issue_url":"https://api.github.com/repos/apache/druid/issues/6814","id":454888977,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg4ODk3Nw==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T18:31:53Z","updated_at":"2019-01-16T18:32:17Z","author_association":"CONTRIBUTOR","body":"*side note*\r\n\r\nDependency wise the extension looks really clean. The only extra it brings in is apache commons math3 and stuff from `com.yahoo.datasketches`.\r\n\r\nWhat is the likelihood `com.yahoo.datasketches` or `org.apache.commons:commons-math3` will have the same kind of problems Jackson or Guava have with version incompatibilities with other big data handling systems (spark, hive, hadoop, flink, etc)?\r\n\r\n\r\n```\r\n$ mvn dependency:tree -pl extensions-core/datasketches\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] -----------< org.apache.druid.extensions:druid-datasketches >-----------\r\n[INFO] Building druid-datasketches 0.13.0-incubating-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ druid-datasketches ---\r\n[INFO] org.apache.druid.extensions:druid-datasketches:jar:0.13.0-incubating-SNAPSHOT\r\n[INFO] +- com.yahoo.datasketches:sketches-core:jar:0.12.0:compile\r\n[INFO] |  \\- com.yahoo.datasketches:memory:jar:0.12.0:compile\r\n[INFO] +- org.apache.commons:commons-math3:jar:3.6.1:compile\r\n[INFO] +- org.apache.druid:druid-core:jar:0.13.0-incubating-SNAPSHOT:provided\r\n[INFO] |  +- commons-codec:commons-codec:jar:1.7:provided\r\n[INFO] |  +- commons-io:commons-io:jar:2.5:provided\r\n[INFO] |  +- commons-lang:commons-lang:jar:2.6:provided\r\n[INFO] |  +- org.apache.commons:commons-compress:jar:1.16:provided\r\n[INFO] |  +- org.apache.commons:commons-dbcp2:jar:2.0.1:provided\r\n[INFO] |  |  +- org.apache.commons:commons-pool2:jar:2.2:provided\r\n[INFO] |  |  \\- commons-logging:commons-logging:jar:1.1.1:provided\r\n[INFO] |  +- commons-pool:commons-pool:jar:1.6:provided\r\n[INFO] |  +- org.skife.config:config-magic:jar:0.9:provided\r\n[INFO] |  +- org.hibernate:hibernate-validator:jar:5.1.3.Final:provided\r\n[INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.1.3.GA:provided\r\n[INFO] |  |  \\- com.fasterxml:classmate:jar:1.0.0:provided\r\n[INFO] |  +- javax.el:javax.el-api:jar:3.0.0:provided\r\n[INFO] |  +- com.google.guava:guava:jar:16.0.1:provided\r\n[INFO] |  +- com.google.inject:guice:jar:4.1.0:provided\r\n[INFO] |  |  +- javax.inject:javax.inject:jar:1:provided\r\n[INFO] |  |  \\- aopalliance:aopalliance:jar:1.0:provided\r\n[INFO] |  +- com.google.inject.extensions:guice-multibindings:jar:4.1.0:provided\r\n[INFO] |  +- org.jdbi:jdbi:jar:2.63.1:provided\r\n[INFO] |  +- joda-time:joda-time:jar:2.9.9:provided\r\n[INFO] |  +- org.apache.logging.log4j:log4j-api:jar:2.5:provided\r\n[INFO] |  +- org.apache.logging.log4j:log4j-core:jar:2.5:provided\r\n[INFO] |  +- org.apache.logging.log4j:log4j-slf4j-impl:jar:2.5:provided\r\n[INFO] |  +- org.apache.logging.log4j:log4j-jul:jar:2.5:provided\r\n[INFO] |  +- org.apache.logging.log4j:log4j-1.2-api:jar:2.5:provided\r\n[INFO] |  +- org.slf4j:slf4j-api:jar:1.6.4:compile\r\n[INFO] |  +- org.slf4j:jcl-over-slf4j:jar:1.7.12:provided\r\n[INFO] |  +- io.airlift:airline:jar:0.7:provided\r\n[INFO] |  +- io.dropwizard.metrics:metrics-core:jar:4.0.0:provided\r\n[INFO] |  +- net.thisptr:jackson-jq:jar:0.0.7:provided\r\n[INFO] |  |  \\- org.jruby.joni:joni:jar:2.1.11:provided\r\n[INFO] |  |     \\- org.jruby.jcodings:jcodings:jar:1.0.13:provided\r\n[INFO] |  +- it.unimi.dsi:fastutil:jar:8.1.0:provided\r\n[INFO] |  +- com.opencsv:opencsv:jar:4.2:provided\r\n[INFO] |  |  +- org.apache.commons:commons-lang3:jar:3.7:provided\r\n[INFO] |  |  +- org.apache.commons:commons-text:jar:1.3:provided\r\n[INFO] |  |  +- commons-beanutils:commons-beanutils:jar:1.9.3:provided\r\n[INFO] |  |  |  \\- commons-collections:commons-collections:jar:3.2.2:provided\r\n[INFO] |  |  \\- org.apache.commons:commons-collections4:jar:4.1:provided\r\n[INFO] |  +- org.mozilla:rhino:jar:1.7R5:provided\r\n[INFO] |  +- org.tukaani:xz:jar:1.8:provided\r\n[INFO] |  +- com.github.luben:zstd-jni:jar:1.3.3-1:provided\r\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.3.0:provided\r\n[INFO] |  |  \\- net.minidev:json-smart:jar:2.3:provided\r\n[INFO] |  |     \\- net.minidev:accessors-smart:jar:1.2:provided\r\n[INFO] |  +- org.antlr:antlr4-runtime:jar:4.5.1:provided\r\n[INFO] |  +- com.lmax:disruptor:jar:3.3.6:provided\r\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:2.0.1:provided\r\n[INFO] |  +- net.java.dev.jna:jna:jar:4.5.1:provided\r\n[INFO] |  +- javax.validation:validation-api:jar:1.1.0.Final:provided\r\n[INFO] |  +- org.asynchttpclient:async-http-client:jar:2.5.3:provided\r\n[INFO] |  |  +- org.asynchttpclient:async-http-client-netty-utils:jar:2.5.3:provided\r\n[INFO] |  |  |  \\- io.netty:netty-buffer:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- io.netty:netty-codec-http:jar:4.1.29.Final:provided\r\n[INFO] |  |  |  \\- io.netty:netty-codec:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- io.netty:netty-handler:jar:4.1.29.Final:provided\r\n[INFO] |  |  |  \\- io.netty:netty-transport:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- io.netty:netty-codec-socks:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- io.netty:netty-handler-proxy:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.29.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-common:jar:4.1.29.Final:provided\r\n[INFO] |  |  |  \\- io.netty:netty-transport-native-unix-common:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- io.netty:netty-resolver-dns:jar:4.1.29.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-resolver:jar:4.1.29.Final:provided\r\n[INFO] |  |  |  \\- io.netty:netty-codec-dns:jar:4.1.29.Final:provided\r\n[INFO] |  |  +- org.reactivestreams:reactive-streams:jar:1.0.2:provided\r\n[INFO] |  |  +- com.typesafe.netty:netty-reactive-streams:jar:2.0.0:provided\r\n[INFO] |  |  \\- com.sun.activation:javax.activation:jar:1.2.0:provided\r\n[INFO] |  +- org.hyperic:sigar:jar:1.6.5.132:provided\r\n[INFO] |  +- org.gridkit.lab:jvm-attach-api:jar:1.2:provided\r\n[INFO] |  \\- io.netty:netty:jar:3.10.6.Final:provided\r\n[INFO] +- org.apache.druid:druid-processing:jar:0.13.0-incubating-SNAPSHOT:provided\r\n[INFO] |  +- org.apache.druid:druid-hll:jar:0.13.0-incubating-SNAPSHOT:provided\r\n[INFO] |  +- org.apache.druid:extendedset:jar:0.13.0-incubating-SNAPSHOT:provided\r\n[INFO] |  +- org.roaringbitmap:RoaringBitmap:jar:0.7.36:provided\r\n[INFO] |  |  \\- org.roaringbitmap:shims:jar:0.7.36:provided\r\n[INFO] |  +- com.ning:compress-lzf:jar:1.0.4:provided\r\n[INFO] |  +- com.google.errorprone:error_prone_annotations:jar:2.3.2:provided\r\n[INFO] |  +- com.ibm.icu:icu4j:jar:54.1.1:provided\r\n[INFO] |  +- org.lz4:lz4-java:jar:1.5.0:provided\r\n[INFO] |  +- org.mapdb:mapdb:jar:1.0.8:provided\r\n[INFO] |  +- org.ow2.asm:asm:jar:5.2:provided\r\n[INFO] |  +- org.ow2.asm:asm-commons:jar:5.2:provided\r\n[INFO] |  |  \\- org.ow2.asm:asm-tree:jar:5.2:provided\r\n[INFO] |  +- org.checkerframework:checker:jar:2.5.7:provided\r\n[INFO] |  \\- org.apache.maven:maven-artifact:jar:3.6.0:provided\r\n[INFO] |     \\- org.codehaus.plexus:plexus-utils:jar:3.0.15:provided\r\n[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.core:jackson-core:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.datatype:jackson-datatype-guava:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.datatype:jackson-datatype-joda:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-smile:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-json-provider:jar:2.6.7:provided\r\n[INFO] |  +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-base:jar:2.6.7:provided\r\n[INFO] |  \\- com.fasterxml.jackson.module:jackson-module-jaxb-annotations:jar:2.6.7:provided\r\n[INFO] +- com.fasterxml.jackson.jaxrs:jackson-jaxrs-smile-provider:jar:2.6.7:provided\r\n[INFO] +- junit:junit:jar:4.12:test\r\n[INFO] |  \\- org.hamcrest:hamcrest-core:jar:1.3:test\r\n[INFO] +- org.easymock:easymock:jar:3.4:test\r\n[INFO] |  \\- org.objenesis:objenesis:jar:2.2:provided\r\n[INFO] +- org.apache.druid:druid-core:test-jar:tests:0.13.0-incubating-SNAPSHOT:test\r\n[INFO] \\- org.apache.druid:druid-processing:test-jar:tests:0.13.0-incubating-SNAPSHOT:test\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.167 s\r\n[INFO] Finished at: 2019-01-16T10:29:03-08:00\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454888977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454891552","html_url":"https://github.com/apache/druid/issues/6814#issuecomment-454891552","issue_url":"https://api.github.com/repos/apache/druid/issues/6814","id":454891552,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg5MTU1Mg==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T18:39:21Z","updated_at":"2019-01-16T18:39:21Z","author_association":"CONTRIBUTOR","body":"> HLL based counting functionality is a pretty standard thing in databases these days.\r\n\r\nTrue.  And this is why a number of database companies have adopted the DataSketches library into their core code for performing internal query optimization and other internal data analysis tasks.  Not only to use HLL or Theta for unique counting, but also to use the Quantiles sketches for understanding data distributions, and the Frequency sketches for capturing â€œTop Nâ€ data items that may require special handling because of their large number of occurrences.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454891552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454897013","html_url":"https://github.com/apache/druid/issues/6814#issuecomment-454897013","issue_url":"https://api.github.com/repos/apache/druid/issues/6814","id":454897013,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDg5NzAxMw==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T18:55:19Z","updated_at":"2019-01-16T18:55:19Z","author_association":"CONTRIBUTOR","body":"> DataSketches and version compatibility going forward ...\r\n\r\nWe already have intigrations with Hadoop Hive, Pig, and a little Spark,  and our #1 commitment is to maintain binary compatibility going forward.  The APIs may evolve over time but backward compatibility of the stored images is critical.  As our library evolves with implementations in C++ and Python we will have binary compatibility across languages as well.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454897013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454901969","html_url":"https://github.com/apache/druid/issues/6834#issuecomment-454901969","issue_url":"https://api.github.com/repos/apache/druid/issues/6834","id":454901969,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkwMTk2OQ==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T19:10:20Z","updated_at":"2019-01-16T19:10:20Z","author_association":"NONE","body":"@jihoonson Thanks for reading the proposal and your comments. I have added more details in the proposal for phase1 to address your questions. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454901969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454915818","html_url":"https://github.com/apache/druid/pull/6581#issuecomment-454915818","issue_url":"https://api.github.com/repos/apache/druid/issues/6581","id":454915818,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkxNTgxOA==","user":{"login":"edgan8","id":2577963,"node_id":"MDQ6VXNlcjI1Nzc5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/2577963?v=4","gravatar_id":"","url":"https://api.github.com/users/edgan8","html_url":"https://github.com/edgan8","followers_url":"https://api.github.com/users/edgan8/followers","following_url":"https://api.github.com/users/edgan8/following{/other_user}","gists_url":"https://api.github.com/users/edgan8/gists{/gist_id}","starred_url":"https://api.github.com/users/edgan8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgan8/subscriptions","organizations_url":"https://api.github.com/users/edgan8/orgs","repos_url":"https://api.github.com/users/edgan8/repos","events_url":"https://api.github.com/users/edgan8/events{/privacy}","received_events_url":"https://api.github.com/users/edgan8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T19:50:51Z","updated_at":"2019-01-16T19:50:51Z","author_association":"CONTRIBUTOR","body":"@leventov  Ah I did not realize it affected your workflow like that. Sure thing, I will be careful with that in the future!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454915818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454919747","html_url":"https://github.com/apache/druid/issues/6834#issuecomment-454919747","issue_url":"https://api.github.com/repos/apache/druid/issues/6834","id":454919747,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkxOTc0Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T20:02:34Z","updated_at":"2019-01-16T20:02:34Z","author_association":"CONTRIBUTOR","body":"@surekhasaharan thanks. I have some follow-up questions.\r\n\r\n> If these broker configs are enabled, then extra filtering would be done on watchedDataSources in the published segment cache in broker.\r\n\r\nThis part looks vague. Would you please make it clear what configurations you're referring? Also please add why we don't have to consider tiers.\r\n\r\n> One caveat with this is, the new MetadataSegmentView has a dependency that BrokerServerView should be initialized before MetadataSegmentView starts caching published segments.\r\n\r\nSince segments are always published and then loaded by historicals, segments should appear first in the metadata store. How do you reuse the same instance if a segment was only in MetadataSegmentView is added to brokerServerView?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454919747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454922829","html_url":"https://github.com/apache/druid/issues/6876#issuecomment-454922829","issue_url":"https://api.github.com/repos/apache/druid/issues/6876","id":454922829,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkyMjgyOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T20:12:37Z","updated_at":"2019-01-16T20:12:37Z","author_association":"CONTRIBUTOR","body":"Today, line-oriented text files are the only kind of text files we support. It would be nice to support other styles but it is not currently possible.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454922829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454927232","html_url":"https://github.com/apache/druid/issues/6874#issuecomment-454927232","issue_url":"https://api.github.com/repos/apache/druid/issues/6874","id":454927232,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkyNzIzMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T20:25:46Z","updated_at":"2019-01-16T20:25:46Z","author_association":"CONTRIBUTOR","body":"There isn't any official Druid docker image -- currently, the only Druid-project-approved releases are the ones you see here: http://druid.apache.org/downloads (source and binary tarballs). Making an official one would be a good discussion for the Druid dev list (dev@druid.apache.org), as to how to fit it into our release processes, where to serve it from, and how it should work (there's more than one way to build a Docker image!)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454927232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454984332","html_url":"https://github.com/apache/druid/issues/6831#issuecomment-454984332","issue_url":"https://api.github.com/repos/apache/druid/issues/6831","id":454984332,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDk4NDMzMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T23:31:34Z","updated_at":"2019-01-16T23:31:34Z","author_association":"CONTRIBUTOR","body":"It looks not a bug of Druid. @drcrallen would you please check and close this issue if it's not?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454984332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/454991294","html_url":"https://github.com/apache/druid/issues/6853#issuecomment-454991294","issue_url":"https://api.github.com/repos/apache/druid/issues/6853","id":454991294,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDk5MTI5NA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T00:04:22Z","updated_at":"2019-01-17T00:04:22Z","author_association":"CONTRIBUTOR","body":">  I had try with druid 0.12.3 in the same scene and the task commited successfully. So is this a bug in druid 0.13.0 ?\r\n\r\nThanks for the report, this is a bug in 0.13.0 (#6877).\r\n\r\n> Compared the actual result with the query result, i found the quantile query of approximate histogram was more accurate than quantiles sketch, but for the histogram query, quantiles sketch was win.\r\n> \r\n> Can you tell me more about why the the quantile query of approximate histogram was more accurate thanquantiles sketch?\r\n\r\nRegarding the question on sketch accuracy, I'm not too sure myself, but perhaps one of the datasketches folks can comment? @AlexanderSaydakov @leerho \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/454991294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455024915","html_url":"https://github.com/apache/druid/issues/6853#issuecomment-455024915","issue_url":"https://api.github.com/repos/apache/druid/issues/6853","id":455024915,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTAyNDkxNQ==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T03:00:54Z","updated_at":"2019-01-17T03:00:54Z","author_association":"NONE","body":"> Regarding the question on sketch accuracy, I'm not too sure myself, but perhaps one of the datasketches folks can comment? @AlexanderSaydakov @leerho\r\n@jon-wei Thanksï¼\r\n@AlexanderSaydakov  @leerho Do you have any ideas for the question on sketch accuracy?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455024915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455026558","html_url":"https://github.com/apache/druid/issues/6834#issuecomment-455026558","issue_url":"https://api.github.com/repos/apache/druid/issues/6834","id":455026558,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTAyNjU1OA==","user":{"login":"surekhasaharan","id":13008746,"node_id":"MDQ6VXNlcjEzMDA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13008746?v=4","gravatar_id":"","url":"https://api.github.com/users/surekhasaharan","html_url":"https://github.com/surekhasaharan","followers_url":"https://api.github.com/users/surekhasaharan/followers","following_url":"https://api.github.com/users/surekhasaharan/following{/other_user}","gists_url":"https://api.github.com/users/surekhasaharan/gists{/gist_id}","starred_url":"https://api.github.com/users/surekhasaharan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surekhasaharan/subscriptions","organizations_url":"https://api.github.com/users/surekhasaharan/orgs","repos_url":"https://api.github.com/users/surekhasaharan/repos","events_url":"https://api.github.com/users/surekhasaharan/events{/privacy}","received_events_url":"https://api.github.com/users/surekhasaharan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T03:10:39Z","updated_at":"2019-01-17T03:10:39Z","author_association":"NONE","body":"@jihoonson thanks. Added more details on broker config to make it clearer. \r\n>Since segments are always published and then loaded by historicals, segments should appear first in the metadata store. How do you reuse the same instance if a segment was only in MetadataSegmentView is added to brokerServerView?\r\n\r\nChanged the design for this part, to use the `interned` objects, this approach does not depend on the order in which `DataSegment` objects appear in broker heap. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455026558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455033889","html_url":"https://github.com/apache/druid/issues/6860#issuecomment-455033889","issue_url":"https://api.github.com/repos/apache/druid/issues/6860","id":455033889,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTAzMzg4OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T03:56:53Z","updated_at":"2019-01-17T03:56:53Z","author_association":"MEMBER","body":"Of course, IntelliJ shows a lot of warnings, much more than we enforce (yet). I believe Eclipse shows warnings too, many of them should intersect with what IntelliJ shows. Most of those warnings point to actual (albeit often minor) problems with code. Ideally developers should proactively fix them as much as possible, not waiting until they are enforced in TeamCity.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455033889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455034653","html_url":"https://github.com/apache/druid/issues/6870#issuecomment-455034653","issue_url":"https://api.github.com/repos/apache/druid/issues/6870","id":455034653,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTAzNDY1Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T04:01:59Z","updated_at":"2019-01-17T04:01:59Z","author_association":"MEMBER","body":"Good point. I thought that proper spelling in comments is \"data source\" (with a space), but now I'm not sure.\r\n\r\nMaybe the scope of regex could be reduced to Java identifiers. (If not via Checkstyle, I'm pretty sure it's possible with IntelliJ structural search). ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455034653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455093901","html_url":"https://github.com/apache/druid/pull/6863#issuecomment-455093901","issue_url":"https://api.github.com/repos/apache/druid/issues/6863","id":455093901,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTA5MzkwMQ==","user":{"login":"venkatramanp","id":8243207,"node_id":"MDQ6VXNlcjgyNDMyMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8243207?v=4","gravatar_id":"","url":"https://api.github.com/users/venkatramanp","html_url":"https://github.com/venkatramanp","followers_url":"https://api.github.com/users/venkatramanp/followers","following_url":"https://api.github.com/users/venkatramanp/following{/other_user}","gists_url":"https://api.github.com/users/venkatramanp/gists{/gist_id}","starred_url":"https://api.github.com/users/venkatramanp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/venkatramanp/subscriptions","organizations_url":"https://api.github.com/users/venkatramanp/orgs","repos_url":"https://api.github.com/users/venkatramanp/repos","events_url":"https://api.github.com/users/venkatramanp/events{/privacy}","received_events_url":"https://api.github.com/users/venkatramanp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T09:00:41Z","updated_at":"2019-01-17T09:00:41Z","author_association":"CONTRIBUTOR","body":"@surekhasaharan I have added the License file and now CI looks good.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455093901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455117183","html_url":"https://github.com/apache/druid/pull/6370#issuecomment-455117183","issue_url":"https://api.github.com/repos/apache/druid/issues/6370","id":455117183,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTExNzE4Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T10:13:31Z","updated_at":"2019-01-17T10:13:31Z","author_association":"MEMBER","body":"@drcrallen could you please clarify your concerns?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455117183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455118720","html_url":"https://github.com/apache/druid/pull/6381#issuecomment-455118720","issue_url":"https://api.github.com/repos/apache/druid/issues/6381","id":455118720,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTExODcyMA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T10:18:29Z","updated_at":"2019-01-17T10:18:29Z","author_association":"MEMBER","body":"@AlexanderSaydakov yes. But with people writing so many different aggregators now, it seems increasingly wrong to make people do this in aggregators code. I think #3956 should become a high priority issue. I like the approach suggested by @himanshug here: https://github.com/apache/incubator-druid/pull/3956#issuecomment-407502404 with `boolean isThreadSafe()` method in aggregators.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455118720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455151474","html_url":"https://github.com/apache/druid/issues/6871#issuecomment-455151474","issue_url":"https://api.github.com/repos/apache/druid/issues/6871","id":455151474,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTE1MTQ3NA==","user":{"login":"Stephan3555","id":2537072,"node_id":"MDQ6VXNlcjI1MzcwNzI=","avatar_url":"https://avatars.githubusercontent.com/u/2537072?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan3555","html_url":"https://github.com/Stephan3555","followers_url":"https://api.github.com/users/Stephan3555/followers","following_url":"https://api.github.com/users/Stephan3555/following{/other_user}","gists_url":"https://api.github.com/users/Stephan3555/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan3555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan3555/subscriptions","organizations_url":"https://api.github.com/users/Stephan3555/orgs","repos_url":"https://api.github.com/users/Stephan3555/repos","events_url":"https://api.github.com/users/Stephan3555/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan3555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T12:14:32Z","updated_at":"2019-01-17T12:14:32Z","author_association":"NONE","body":"Hi,\r\nthanks for the fast reply. I tested the settings that you recommended:\r\n\r\n- Not set maxBytesInMemory\r\n- Not set maxRowsInMemory\r\n\r\nIngestion spec:\r\n\r\n```\r\n{\r\n\"type\": \"kafka\",\r\n\"dataSchema\": {\r\n\"dataSource\": \"de.id.cms.pageview-geoip-raw_test\",\r\n\"parser\": {\r\n\"type\": \"avro_stream\",\r\n\"avroBytesDecoder\": {\r\n\"type\": \"schema_registry\",\r\n\"url\": \"http://schema.confluent-tools:8081\"\r\n},\r\n\"parseSpec\": {\r\n\"format\": \"avro\",\r\n\"flattenSpec\": {\r\n\"useFieldDiscovery\": \"true\",\r\n\"fields\": [\r\n\"url\",\r\n\"onlineId\",\r\n\"channel\",\r\n\"category\",\r\n\"clientId\",\r\n\"uid\",\r\n\"newUser\",\r\n\"timestamp\",\r\n\"userAgent\",\r\n\"group\",\r\n\"pageType\",\r\n\"os\",\r\n\"deviceType\",\r\n\"browser\",\r\n\"browserType\",\r\n\"headline\",\r\n\"seoHeadline\",\r\n\"documentLabel\",\r\n\"referrer\",\r\n\"referrerDomain\",\r\n\"regional\",\r\n\"authors\",\r\n{\r\n\"type\": \"path\",\r\n\"name\": \"clientIP\",\r\n\"expr\": \"$.clientIP\"\r\n},\r\n{\r\n\"type\": \"path\",\r\n\"name\": \"city\",\r\n\"expr\": \"$.city\"\r\n},\r\n{\r\n\"type\": \"path\",\r\n\"name\": \"location\",\r\n\"expr\": \"$.location\"\r\n},\r\n\"accuracyRadius\",\r\n{\r\n\"type\": \"path\",\r\n\"name\": \"postalCode\",\r\n\"expr\": \"$.postalCode\"\r\n},\r\n\"devicePixelRatio\"\r\n]\r\n},\r\n\"timestampSpec\": {\r\n\"column\": \"timestamp\",\r\n\"format\": \"auto\"\r\n},\r\n\"dimensionsSpec\": {\r\n\"dimensions\": [\r\n\"url\",\r\n\"onlineId\",\r\n\"channel\",\r\n\"category\",\r\n\"clientId\",\r\n\"uid\",\r\n\"newUser\",\r\n\"timestamp\",\r\n\"userAgent\",\r\n\"group\",\r\n\"pageType\",\r\n\"os\",\r\n\"deviceType\",\r\n\"browser\",\r\n\"browserType\",\r\n\"headline\",\r\n\"seoHeadline\",\r\n\"documentLabel\",\r\n\"referrer\",\r\n\"referrerDomain\",\r\n\"regional\",\r\n\"authors\",\r\n\"clientIP\",\r\n\"city\",\r\n\"location\",\r\n\"accuracyRadius\",\r\n\"postalCode\",\r\n\"devicePixelRatio\"\r\n]\r\n}\r\n}\r\n},\r\n\"metricsSpec\": [\r\n{\r\n\"type\": \"count\",\r\n\"name\": \"count\"\r\n},\r\n{\r\n\"type\": \"thetaSketch\",\r\n\"name\": \"uid_sketch\",\r\n\"fieldName\": \"uid\",\r\n\"size\": 16384,\r\n\"shouldFinalize\": true,\r\n\"isInputThetaSketch\": false,\r\n\"errorBoundsStdDev\": null\r\n}\r\n],\r\n\"granularitySpec\": {\r\n\"type\": \"uniform\",\r\n\"segmentGranularity\": \"DAY\",\r\n\"queryGranularity\": \"MINUTE\",\r\n\"rollup\": true,\r\n\"intervals\": null\r\n},\r\n\"transformSpec\": {\r\n\"filter\": null,\r\n\"transforms\": []\r\n}\r\n},\r\n\"tuningConfig\": {\r\n\"type\": \"kafka\",\r\n\"maxRowsPerSegment\": 5000000,\r\n\"maxTotalRows\": null,\r\n\"intermediatePersistPeriod\": \"PT30M\",\r\n\"maxPendingPersists\": 0,\r\n\"indexSpec\": {\r\n\"bitmap\": {\r\n\"type\": \"concise\"\r\n},\r\n\"dimensionCompression\": \"lz4\",\r\n\"metricCompression\": \"lz4\",\r\n\"longEncoding\": \"longs\"\r\n},\r\n\"buildV9Directly\": true,\r\n\"reportParseExceptions\": false,\r\n\"handoffConditionTimeout\": 0,\r\n\"resetOffsetAutomatically\": true,\r\n\"segmentWriteOutMediumFactory\": null,\r\n\"workerThreads\": null,\r\n\"chatThreads\": null,\r\n\"chatRetries\": 8,\r\n\"httpTimeout\": \"PT10S\",\r\n\"shutdownTimeout\": \"PT80S\",\r\n\"offsetFetchPeriod\": \"PT30S\",\r\n\"intermediateHandoffPeriod\": \"P2147483647D\",\r\n\"logParseExceptions\": true,\r\n\"maxParseExceptions\": 2147483647,\r\n\"maxSavedParseExceptions\": 0\r\n},\r\n\"ioConfig\": {\r\n\"topic\": \"de.id.cms.pageview-geoip\",\r\n\"replicas\": 1,\r\n\"taskCount\": 3,\r\n\"taskDuration\": \"PT1800S\",\r\n\"consumerProperties\": {\r\n\"bootstrap.servers\": \"kafka.confluent-kafka:9092\"\r\n},\r\n\"startDelay\": \"PT5S\",\r\n\"period\": \"PT30S\",\r\n\"useEarliestOffset\": true,\r\n\"completionTimeout\": \"PT14400S\",\r\n\"lateMessageRejectionPeriod\": null,\r\n\"earlyMessageRejectionPeriod\": null,\r\n\"skipOffsetGaps\": true\r\n},\r\n\"context\": null,\r\n\"suspended\": false\r\n}\r\n```\r\n\r\nIn the overlord console (http://localhost:8090/console.html) under payload, this is what Druid sets for maxBytesInMemory and maxRowsInMemory:\r\n\r\n```\r\n\"tuningConfig\": {\r\n  \"type\": \"kafka\",\r\n  \"maxRowsInMemory\": 1000000,\r\n  \"maxBytesInMemory\": 0,\r\n  \"maxRowsPerSegment\": 5000000,\r\n  \"maxTotalRows\": null,\r\n  \"intermediatePersistPeriod\": \"PT30M\",\r\n  \"basePersistDirectory\": \"/druid/var/tmp/1547725649334-0\",\r\n  \"maxPendingPersists\": 0,\r\n   ...\r\n```\r\n\r\nThe Task unfortunately is persisting after ~2000 rows and produces the tiny smoosh files of 278076 bytes every few seconds again.\r\n\r\n```\r\n522.903: Application time: 10.0013281 seconds\r\n522.903: Total time for which application threads were stopped: 0.0004769 seconds, Stopping threads took: 0.0000840 seconds\r\n529.391: Application time: 6.4872136 seconds\r\n529.392: [GC pause (G1 Evacuation Pause) (young), 0.0474603 secs]\r\n   [Parallel Time: 45.6 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  529392.4]\r\n      [Ext Root Scanning (ms):  9.3]\r\n      [Update RS (ms):  8.6]\r\n         [Processed Buffers:  74]\r\n      [Scan RS (ms):  0.1]\r\n      [Code Root Scanning (ms):  2.5]\r\n      [Object Copy (ms):  24.9]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  45.5]\r\n      [GC Worker End (ms):  529437.9]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.1 ms]\r\n   [Clear CT: 0.3 ms]\r\n   [Other: 1.4 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.2 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.1 ms]\r\n      [Humongous Register: 0.2 ms]\r\n      [Humongous Reclaim: 0.0 ms]\r\n      [Free CSet: 0.5 ms]\r\n   [Eden: 175.0M(175.0M)->0.0B(175.0M) Survivors: 7168.0K->7168.0K Heap: 227.1M(304.0M)->52.1M(304.0M)]\r\n [Times: user=0.04 sys=0.01, real=0.05 secs] \r\n529.440: Total time for which application threads were stopped: 0.0490273 seconds, Stopping threads took: 0.0002833 seconds\r\n2019-01-17T11:56:33,218 INFO [task-runner-0-priority-0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Submitting persist runnable for dataSource[de.id.cms.pageview-geoip-raw_test]\r\n2019-01-17T11:56:33,219 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Segment[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74], persisting Hydrant[FireHydrant{, queryable=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, count=31}]\r\n2019-01-17T11:56:33,220 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Starting persist for interval[2019-01-17T00:00:00.000Z/2019-01-18T00:00:00.000Z], rows[2,033]\r\n537.121: Application time: 7.6815749 seconds\r\n537.122: Total time for which application threads were stopped: 0.0005229 seconds, Stopping threads took: 0.0001464 seconds\r\n2019-01-17T11:56:33,227 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Using SegmentWriteOutMediumFactory[TmpFileSegmentWriteOutMediumFactory]\r\n2019-01-17T11:56:33,227 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed version.bin in 0 millis.\r\n2019-01-17T11:56:33,227 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed factory.json in 0 millis\r\n2019-01-17T11:56:33,228 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,228 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,229 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,230 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,231 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,279 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] conversions with cardinality[2,033] in 48 millis.\r\n2019-01-17T11:56:33,280 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,355 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] conversions with cardinality[1,932] in 75 millis.\r\n2019-01-17T11:56:33,355 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,356 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,357 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,360 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] conversions with cardinality[1] in 3 millis.\r\n2019-01-17T11:56:33,361 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,362 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,362 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,363 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,364 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,365 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] conversions with cardinality[0] in 1 millis.\r\n2019-01-17T11:56:33,365 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,366 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,367 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,367 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] conversions with cardinality[0] in 0 millis.\r\n2019-01-17T11:56:33,368 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,369 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,369 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,370 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,371 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,373 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,374 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed dim conversions in 147 millis.\r\n2019-01-17T11:56:33,465 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - completed walk through of 2,033 rows in 89 millis.\r\n2019-01-17T11:56:33,466 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed time column in 1 millis.\r\n2019-01-17T11:56:33,468 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[count] in 1 millis.\r\n2019-01-17T11:56:33,468 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[uid_sketch] in 0 millis.\r\n2019-01-17T11:56:33,468 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric columns in 1 millis.\r\n2019-01-17T11:56:33,469 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,471 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,472 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,474 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,475 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,540 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] inverted with cardinality[2,033] in 64 millis.\r\n2019-01-17T11:56:33,541 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,590 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] inverted with cardinality[1,932] in 48 millis.\r\n2019-01-17T11:56:33,592 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,592 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,593 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,594 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,595 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,596 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,597 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,598 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,599 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,600 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:56:33,600 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,601 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,602 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,603 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] inverted with cardinality[0] in 1 millis.\r\n2019-01-17T11:56:33,603 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,604 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,605 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,606 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:33,607 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,608 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:33,609 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed index.drd in 1 millis.\r\n2019-01-17T11:56:33,609 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.java.util.common.io.smoosh.FileSmoosher - Created smoosh file [/druid/var/druid/task/index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_eijbgjpi/work/persist/de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74/31/00000.smoosh] of size [275948] bytes.\r\n2019-01-17T11:56:33,623 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Committing metadata[AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2212999, 4=2216380, 7=2213510, 10=2216450, 13=2213492, 16=2216533, 19=2223430, 22=2216585}}}}] for sinks[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74:32].\r\n537.525: Application time: 0.4036908 seconds\r\n537.526: Total time for which application threads were stopped: 0.0004588 seconds, Stopping threads took: 0.0000713 seconds\r\n2019-01-17T11:56:33,625 INFO [appenderator_persist_0] org.apache.druid.indexing.kafka.IncrementalPublishingKafkaIndexTaskRunner - Persist completed with metadata [AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2212999, 4=2216380, 7=2213510, 10=2216450, 13=2213492, 16=2216533, 19=2223430, 22=2216585}}}}]\r\n539.526: Application time: 2.0004378 seconds\r\n539.527: Total time for which application threads were stopped: 0.0003875 seconds, Stopping threads took: 0.0000913 seconds\r\n550.528: Application time: 11.0013866 seconds\r\n550.529: Total time for which application threads were stopped: 0.0004347 seconds, Stopping threads took: 0.0000670 seconds\r\n2019-01-17T11:56:50,962 INFO [task-runner-0-priority-0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Submitting persist runnable for dataSource[de.id.cms.pageview-geoip-raw_test]\r\n2019-01-17T11:56:50,962 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Segment[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74], persisting Hydrant[FireHydrant{, queryable=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, count=32}]\r\n2019-01-17T11:56:51,215 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Starting persist for interval[2019-01-17T00:00:00.000Z/2019-01-18T00:00:00.000Z], rows[2,033]\r\n555.116: Application time: 4.5873495 seconds\r\n555.117: Total time for which application threads were stopped: 0.0012136 seconds, Stopping threads took: 0.0003019 seconds\r\n2019-01-17T11:56:51,230 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Using SegmentWriteOutMediumFactory[TmpFileSegmentWriteOutMediumFactory]\r\n2019-01-17T11:56:51,231 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed version.bin in 1 millis.\r\n2019-01-17T11:56:51,231 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed factory.json in 0 millis\r\n2019-01-17T11:56:51,232 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,233 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,233 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,234 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,235 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,308 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] conversions with cardinality[2,033] in 73 millis.\r\n2019-01-17T11:56:51,309 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,354 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] conversions with cardinality[1,880] in 45 millis.\r\n2019-01-17T11:56:51,354 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,355 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,355 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,356 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,356 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,357 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,357 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,358 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,359 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,360 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] conversions with cardinality[0] in 1 millis.\r\n2019-01-17T11:56:51,360 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,361 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,361 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,362 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] conversions with cardinality[0] in 1 millis.\r\n2019-01-17T11:56:51,362 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,363 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,363 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,364 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,365 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,365 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,366 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed dim conversions in 135 millis.\r\n2019-01-17T11:56:51,432 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - completed walk through of 2,033 rows in 65 millis.\r\n2019-01-17T11:56:51,433 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed time column in 1 millis.\r\n2019-01-17T11:56:51,434 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[count] in 1 millis.\r\n2019-01-17T11:56:51,434 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[uid_sketch] in 0 millis.\r\n2019-01-17T11:56:51,434 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric columns in 1 millis.\r\n2019-01-17T11:56:51,435 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,436 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,437 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,438 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,439 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,494 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] inverted with cardinality[2,033] in 54 millis.\r\n2019-01-17T11:56:51,496 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,552 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] inverted with cardinality[1,880] in 55 millis.\r\n2019-01-17T11:56:51,844 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,846 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,847 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,848 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,849 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,851 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,852 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,853 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,854 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,855 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:56:51,855 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,856 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,857 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,858 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:56:51,858 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,859 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,860 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,861 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,861 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:56:51,863 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:56:51,864 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed index.drd in 0 millis.\r\n2019-01-17T11:56:51,865 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.java.util.common.io.smoosh.FileSmoosher - Created smoosh file [/druid/var/druid/task/index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_eijbgjpi/work/persist/de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74/32/00000.smoosh] of size [274248] bytes.\r\n2019-01-17T11:56:51,874 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Committing metadata[AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2213250, 4=2216629, 7=2213772, 10=2216707, 13=2213754, 16=2216790, 19=2223687, 22=2216823}}}}] for sinks[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74:33].\r\n555.776: Application time: 0.6590654 seconds\r\n555.777: Total time for which application threads were stopped: 0.0005029 seconds, Stopping threads took: 0.0000730 seconds\r\n2019-01-17T11:56:51,876 INFO [appenderator_persist_0] org.apache.druid.indexing.kafka.IncrementalPublishingKafkaIndexTaskRunner - Persist completed with metadata [AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2213250, 4=2216629, 7=2213772, 10=2216707, 13=2213754, 16=2216790, 19=2223687, 22=2216823}}}}]\r\n560.796: Application time: 5.0195239 seconds\r\n560.797: Total time for which application threads were stopped: 0.0007284 seconds, Stopping threads took: 0.0001206 seconds\r\n560.798: Application time: 0.0006210 seconds\r\n560.801: Total time for which application threads were stopped: 0.0029791 seconds, Stopping threads took: 0.0017597 seconds\r\n561.801: Application time: 1.0002254 seconds\r\n561.802: Total time for which application threads were stopped: 0.0006533 seconds, Stopping threads took: 0.0000876 seconds\r\n2019-01-17T11:57:16,007 INFO [task-runner-0-priority-0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Submitting persist runnable for dataSource[de.id.cms.pageview-geoip-raw_test]\r\n2019-01-17T11:57:16,008 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Segment[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74], persisting Hydrant[FireHydrant{, queryable=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, count=33}]\r\n2019-01-17T11:57:16,009 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Starting persist for interval[2019-01-17T00:00:00.000Z/2019-01-18T00:00:00.000Z], rows[2,033]\r\n2019-01-17T11:57:16,021 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Using SegmentWriteOutMediumFactory[TmpFileSegmentWriteOutMediumFactory]\r\n2019-01-17T11:57:16,021 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed version.bin in 0 millis.\r\n2019-01-17T11:57:16,021 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed factory.json in 0 millis\r\n2019-01-17T11:57:16,022 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,023 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,024 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,024 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,025 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,093 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] conversions with cardinality[2,033] in 67 millis.\r\n2019-01-17T11:57:16,094 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,157 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] conversions with cardinality[2,020] in 63 millis.\r\n2019-01-17T11:57:16,158 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,158 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,159 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,160 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,160 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,161 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,162 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,163 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,164 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,164 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] conversions with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:16,165 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,166 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,167 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,167 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] conversions with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:16,168 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,169 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,172 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] conversions with cardinality[1] in 2 millis.\r\n2019-01-17T11:57:16,173 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,175 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,176 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,177 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed dim conversions in 155 millis.\r\n2019-01-17T11:57:16,287 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - completed walk through of 2,033 rows in 104 millis.\r\n2019-01-17T11:57:16,289 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed time column in 2 millis.\r\n2019-01-17T11:57:16,289 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[count] in 0 millis.\r\n2019-01-17T11:57:16,290 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[uid_sketch] in 1 millis.\r\n2019-01-17T11:57:16,290 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric columns in 1 millis.\r\n2019-01-17T11:57:16,291 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,292 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,293 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,293 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,295 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,345 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] inverted with cardinality[2,033] in 50 millis.\r\n2019-01-17T11:57:16,347 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,397 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] inverted with cardinality[2,020] in 50 millis.\r\n2019-01-17T11:57:16,399 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,400 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,400 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,401 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,402 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,404 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,404 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,405 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,407 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,407 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:16,408 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,409 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,410 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,410 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:16,411 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,412 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,413 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,413 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:16,415 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,416 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:16,417 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed index.drd in 1 millis.\r\n2019-01-17T11:57:16,418 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.java.util.common.io.smoosh.FileSmoosher - Created smoosh file [/druid/var/druid/task/index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_eijbgjpi/work/persist/de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74/33/00000.smoosh] of size [278874] bytes.\r\n2019-01-17T11:57:16,430 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Committing metadata[AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2213513, 4=2216886, 7=2214024, 10=2216945, 13=2214006, 16=2217047, 19=2223944, 22=2217080}}}}] for sinks[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74:34].\r\n580.332: Application time: 18.5304117 seconds\r\n580.333: Total time for which application threads were stopped: 0.0010212 seconds, Stopping threads took: 0.0002746 seconds\r\n2019-01-17T11:57:16,432 INFO [appenderator_persist_0] org.apache.druid.indexing.kafka.IncrementalPublishingKafkaIndexTaskRunner - Persist completed with metadata [AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2213513, 4=2216886, 7=2214024, 10=2216945, 13=2214006, 16=2217047, 19=2223944, 22=2217080}}}}]\r\n589.336: Application time: 9.0027637 seconds\r\n589.336: Total time for which application threads were stopped: 0.0004037 seconds, Stopping threads took: 0.0000695 seconds\r\n605.040: Application time: 15.7038849 seconds\r\n605.041: [GC pause (G1 Evacuation Pause) (young), 0.0656742 secs]\r\n   [Parallel Time: 63.9 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  605041.4]\r\n      [Ext Root Scanning (ms):  9.2]\r\n      [Update RS (ms):  12.2]\r\n         [Processed Buffers:  78]\r\n      [Scan RS (ms):  0.2]\r\n      [Code Root Scanning (ms):  2.5]\r\n      [Object Copy (ms):  39.7]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  63.9]\r\n      [GC Worker End (ms):  605105.3]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.2 ms]\r\n   [Other: 1.5 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.2 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.1 ms]\r\n      [Humongous Register: 0.3 ms]\r\n      [Humongous Reclaim: 0.0 ms]\r\n      [Free CSet: 0.4 ms]\r\n   [Eden: 175.0M(175.0M)->0.0B(175.0M) Survivors: 7168.0K->7168.0K Heap: 227.1M(304.0M)->52.1M(304.0M)]\r\n [Times: user=0.06 sys=0.00, real=0.07 secs] \r\n605.107: Total time for which application threads were stopped: 0.0665684 seconds, Stopping threads took: 0.0001136 seconds\r\n2019-01-17T11:57:41,868 INFO [task-runner-0-priority-0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Submitting persist runnable for dataSource[de.id.cms.pageview-geoip-raw_test]\r\n2019-01-17T11:57:41,868 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Segment[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74], persisting Hydrant[FireHydrant{, queryable=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, count=34}]\r\n2019-01-17T11:57:41,870 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Starting persist for interval[2019-01-17T00:00:00.000Z/2019-01-18T00:00:00.000Z], rows[2,033]\r\n605.771: Application time: 0.6642910 seconds\r\n605.776: Total time for which application threads were stopped: 0.0050451 seconds, Stopping threads took: 0.0040271 seconds\r\n2019-01-17T11:57:41,889 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Using SegmentWriteOutMediumFactory[TmpFileSegmentWriteOutMediumFactory]\r\n2019-01-17T11:57:41,891 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed version.bin in 0 millis.\r\n2019-01-17T11:57:41,891 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed factory.json in 0 millis\r\n2019-01-17T11:57:41,892 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:41,894 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:41,895 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:41,896 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:41,897 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:41,963 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] conversions with cardinality[2,033] in 65 millis.\r\n2019-01-17T11:57:41,964 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,031 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] conversions with cardinality[1,926] in 67 millis.\r\n2019-01-17T11:57:42,032 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,032 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,033 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,034 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,035 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,035 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,036 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,037 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,038 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,038 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] conversions with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:42,039 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,039 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,040 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,041 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] conversions with cardinality[0] in 1 millis.\r\n2019-01-17T11:57:42,041 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,042 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,043 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,044 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,044 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,045 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,045 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed dim conversions in 154 millis.\r\n2019-01-17T11:57:42,132 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - completed walk through of 2,033 rows in 85 millis.\r\n2019-01-17T11:57:42,133 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed time column in 1 millis.\r\n2019-01-17T11:57:42,133 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[count] in 0 millis.\r\n2019-01-17T11:57:42,133 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[uid_sketch] in 0 millis.\r\n2019-01-17T11:57:42,134 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric columns in 0 millis.\r\n2019-01-17T11:57:42,134 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,135 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,136 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,136 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,137 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,185 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] inverted with cardinality[2,033] in 47 millis.\r\n2019-01-17T11:57:42,187 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,234 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] inverted with cardinality[1,926] in 47 millis.\r\n2019-01-17T11:57:42,236 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,237 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,237 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,239 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,240 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,241 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,242 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,243 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,244 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,244 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:42,245 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,246 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,246 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,247 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] inverted with cardinality[0] in 0 millis.\r\n2019-01-17T11:57:42,248 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,249 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,249 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,251 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,252 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] inverted with cardinality[1] in 1 millis.\r\n2019-01-17T11:57:42,252 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] inverted with cardinality[1] in 0 millis.\r\n2019-01-17T11:57:42,253 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed index.drd in 0 millis.\r\n2019-01-17T11:57:42,254 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.java.util.common.io.smoosh.FileSmoosher - Created smoosh file [/druid/var/druid/task/index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_eijbgjpi/work/persist/de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74/34/00000.smoosh] of size [275766] bytes.\r\n2019-01-17T11:57:42,264 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Committing metadata[AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2213818, 4=2217072, 7=2214341, 10=2217150, 13=2214330, 16=2217233, 19=2224268, 22=2217266}}}}] for sinks[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74:35].\r\n606.167: Application time: 0.3906960 seconds\r\n606.168: Total time for which application threads were stopped: 0.0010810 seconds, Stopping threads took: 0.0001912 seconds\r\n2019-01-17T11:57:42,267 INFO [appenderator_persist_0] org.apache.druid.indexing.kafka.IncrementalPublishingKafkaIndexTaskRunner - Persist completed with metadata [AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_8784b0b450099a6_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_74}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2213818, 4=2217072, 7=2214341, 10=2217150, 13=2214330, 16=2217233, 19=2224268, 22=2217266}}}}]\r\n```\r\n\r\nI have a theory about this. The feature uses if nothing is set:\r\n\r\n```\r\nlong DEFAULT_MAX_BYTES_IN_MEMORY = Runtime.getRuntime().maxMemory() / 6;\r\n```\r\n(https://github.com/apache/incubator-druid/blob/druid-0.13.0-incubating/server/src/main/java/org/apache/druid/segment/indexing/TuningConfig.java#L40)\r\n\r\nThe method maxMemory():\r\n\r\n> Returns the maximum amount of memory that the Java virtual machine will attempt to use.\r\n(https://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#maxMemory())\r\n\r\nAs you can see from the logs of the ingestion task, the heap is dynamically allocated because I use the G1 garbage collector for the Peons (see as well my above posted runtime.properties for the MiddleManager). \r\n\r\n```\r\n[Eden: 175.0M(175.0M)->0.0B(175.0M) Survivors: 7168.0K->7168.0K Heap: 227.1M(304.0M)->52.1M(304.0M)]\r\n```\r\n\r\nMaybe `Runtime.getRuntime().maxMemory()` returns the current size of the heap and not the maximum allowed heap that I specified in the MiddleManager runtime.properties (in this case it would be 3GB).\r\n\r\nI found this bugreport that fits quite well with my assumption:\r\nhttps://bugs.openjdk.java.net/browse/JDK-6880903","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455151474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455157632","html_url":"https://github.com/apache/druid/issues/6871#issuecomment-455157632","issue_url":"https://api.github.com/repos/apache/druid/issues/6871","id":455157632,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTE1NzYzMg==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T12:38:36Z","updated_at":"2019-01-17T12:38:36Z","author_association":"MEMBER","body":"I suspect you are running into the issue described in #6743 since your ingestion spec has a theta sketch. This probably means that continuing to use row count based persists will probably be better in your case until that is resolved.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455157632/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455173781","html_url":"https://github.com/apache/druid/issues/6871#issuecomment-455173781","issue_url":"https://api.github.com/repos/apache/druid/issues/6871","id":455173781,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTE3Mzc4MQ==","user":{"login":"Stephan3555","id":2537072,"node_id":"MDQ6VXNlcjI1MzcwNzI=","avatar_url":"https://avatars.githubusercontent.com/u/2537072?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan3555","html_url":"https://github.com/Stephan3555","followers_url":"https://api.github.com/users/Stephan3555/followers","following_url":"https://api.github.com/users/Stephan3555/following{/other_user}","gists_url":"https://api.github.com/users/Stephan3555/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan3555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan3555/subscriptions","organizations_url":"https://api.github.com/users/Stephan3555/orgs","repos_url":"https://api.github.com/users/Stephan3555/repos","events_url":"https://api.github.com/users/Stephan3555/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan3555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T13:35:24Z","updated_at":"2019-01-17T13:35:24Z","author_association":"NONE","body":"Thanks @clintropolis for your help!\r\nI removed the theta sketch from the ingestion task and everything worked fine!\r\n\r\n```\r\n2019-01-17T13:16:59,934 INFO [task-runner-0-priority-0] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Submitting persist runnable for dataSource[de.id.cms.pageview-geoip-raw_test]\r\n2019-01-17T13:16:59,938 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Segment[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_79], persisting Hydrant[FireHydrant{, queryable=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_79, count=0}]\r\n1575.268: Application time: 0.0185650 seconds\r\n1575.269: Total time for which application threads were stopped: 0.0009188 seconds, Stopping threads took: 0.0003164 seconds\r\n1575.269: Application time: 0.0001636 seconds\r\n1575.270: Total time for which application threads were stopped: 0.0006331 seconds, Stopping threads took: 0.0002537 seconds\r\n1575.271: Application time: 0.0008849 seconds\r\n1575.271: Total time for which application threads were stopped: 0.0004810 seconds, Stopping threads took: 0.0000885 seconds\r\n1575.271: Application time: 0.0001060 seconds\r\n1575.272: Total time for which application threads were stopped: 0.0004199 seconds, Stopping threads took: 0.0000723 seconds\r\n1575.272: Application time: 0.0000981 seconds\r\n1575.272: Total time for which application threads were stopped: 0.0004493 seconds, Stopping threads took: 0.0001114 seconds\r\n1575.273: Application time: 0.0003835 seconds\r\n1575.273: Total time for which application threads were stopped: 0.0003974 seconds, Stopping threads took: 0.0000728 seconds\r\n1575.273: Application time: 0.0001719 seconds\r\n1575.274: Total time for which application threads were stopped: 0.0003914 seconds, Stopping threads took: 0.0000696 seconds\r\n1575.274: Application time: 0.0001109 seconds\r\n1575.274: Total time for which application threads were stopped: 0.0005297 seconds, Stopping threads took: 0.0001179 seconds\r\n1575.275: Application time: 0.0003725 seconds\r\n1575.275: Total time for which application threads were stopped: 0.0004270 seconds, Stopping threads took: 0.0000903 seconds\r\n1575.277: Application time: 0.0024217 seconds\r\n1575.280: Total time for which application threads were stopped: 0.0020866 seconds, Stopping threads took: 0.0016118 seconds\r\n1575.282: Application time: 0.0025987 seconds\r\n1575.283: Total time for which application threads were stopped: 0.0010198 seconds, Stopping threads took: 0.0005375 seconds\r\n1575.284: Application time: 0.0011806 seconds\r\n1575.285: Total time for which application threads were stopped: 0.0005294 seconds, Stopping threads took: 0.0000839 seconds\r\n1575.288: Application time: 0.0034820 seconds\r\n1575.289: Total time for which application threads were stopped: 0.0005850 seconds, Stopping threads took: 0.0001164 seconds\r\n1575.292: Application time: 0.0030193 seconds\r\n1575.293: Total time for which application threads were stopped: 0.0004777 seconds, Stopping threads took: 0.0000730 seconds\r\n1575.298: Application time: 0.0056101 seconds\r\n1575.299: Total time for which application threads were stopped: 0.0005410 seconds, Stopping threads took: 0.0000730 seconds\r\n2019-01-17T13:16:59,985 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Starting persist for interval[2019-01-17T00:00:00.000Z/2019-01-18T00:00:00.000Z], rows[279,621]\r\n1575.980: Application time: 0.6807706 seconds\r\n1575.980: [GC pause (G1 Evacuation Pause) (young), 0.3410061 secs]\r\n   [Parallel Time: 335.4 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1575983.9]\r\n      [Ext Root Scanning (ms):  7.7]\r\n      [Update RS (ms):  13.7]\r\n         [Processed Buffers:  69]\r\n      [Scan RS (ms):  30.8]\r\n      [Code Root Scanning (ms):  0.0]\r\n      [Object Copy (ms):  283.0]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  335.3]\r\n      [GC Worker End (ms):  1576319.1]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.2 ms]\r\n   [Other: 5.3 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.3 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.3 ms]\r\n      [Humongous Register: 3.4 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.5 ms]\r\n   [Eden: 137.0M(137.0M)->0.0B(132.0M) Survivors: 14.0M->19.0M Heap: 515.1M(3029.0M)->408.1M(3029.0M)]\r\n [Times: user=0.31 sys=0.03, real=0.34 secs] \r\n1576.321: Total time for which application threads were stopped: 0.3417281 seconds, Stopping threads took: 0.0000703 seconds\r\n2019-01-17T13:17:01,201 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Using SegmentWriteOutMediumFactory[TmpFileSegmentWriteOutMediumFactory]\r\n2019-01-17T13:17:01,207 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed version.bin in 3 millis.\r\n2019-01-17T13:17:01,208 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed factory.json in 1 millis\r\n2019-01-17T13:17:01,250 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] conversions with cardinality[1] in 37 millis.\r\n1576.587: Application time: 0.2652509 seconds\r\n1576.587: Total time for which application threads were stopped: 0.0004030 seconds, Stopping threads took: 0.0000689 seconds\r\n1576.587: Application time: 0.0001091 seconds\r\n1576.587: Total time for which application threads were stopped: 0.0002686 seconds, Stopping threads took: 0.0000386 seconds\r\n2019-01-17T13:17:01,262 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T13:17:01,263 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:01,264 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:01,265 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] conversions with cardinality[1] in 1 millis.\r\n1577.588: Application time: 1.0001300 seconds\r\n1577.588: Total time for which application threads were stopped: 0.0004714 seconds, Stopping threads took: 0.0000972 seconds\r\n1578.588: Application time: 1.0001352 seconds\r\n1578.589: Total time for which application threads were stopped: 0.0003984 seconds, Stopping threads took: 0.0000723 seconds\r\n1583.791: Application time: 5.2024418 seconds\r\n1583.792: [GC pause (G1 Evacuation Pause) (young), 0.3288359 secs]\r\n   [Parallel Time: 321.9 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1583797.2]\r\n      [Ext Root Scanning (ms):  10.6]\r\n      [Update RS (ms):  12.8]\r\n         [Processed Buffers:  51]\r\n      [Scan RS (ms):  34.0]\r\n      [Code Root Scanning (ms):  0.1]\r\n      [Object Copy (ms):  264.0]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  321.7]\r\n      [GC Worker End (ms):  1584118.9]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.2 ms]\r\n   [Other: 6.7 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.6 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.5 ms]\r\n      [Humongous Register: 4.3 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.5 ms]\r\n   [Eden: 132.0M(132.0M)->0.0B(137.0M) Survivors: 19.0M->14.0M Heap: 543.3M(3029.0M)->425.3M(3029.0M)]\r\n [Times: user=0.28 sys=0.04, real=0.32 secs] \r\n1584.121: Total time for which application threads were stopped: 0.3303422 seconds, Stopping threads took: 0.0003253 seconds\r\n1585.122: Application time: 1.0001650 seconds\r\n1585.122: Total time for which application threads were stopped: 0.0009600 seconds, Stopping threads took: 0.0001497 seconds\r\n2019-01-17T13:17:10,122 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] conversions with cardinality[279,621] in 8,856 millis.\r\n2019-01-17T13:17:10,125 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] conversions with cardinality[1] in 2 millis.\r\n1586.123: Application time: 1.0000902 seconds\r\n1586.123: Total time for which application threads were stopped: 0.0007978 seconds, Stopping threads took: 0.0000843 seconds\r\n1590.321: Application time: 4.1972471 seconds\r\n1590.322: Total time for which application threads were stopped: 0.0008713 seconds, Stopping threads took: 0.0002014 seconds\r\n1590.322: Application time: 0.0007491 seconds\r\n1590.323: Total time for which application threads were stopped: 0.0005507 seconds, Stopping threads took: 0.0000983 seconds\r\n1590.791: Application time: 0.4684118 seconds\r\n1590.792: [GC pause (G1 Evacuation Pause) (young), 0.1337641 secs]\r\n   [Parallel Time: 132.2 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1590792.3]\r\n      [Ext Root Scanning (ms):  5.8]\r\n      [Update RS (ms):  10.3]\r\n         [Processed Buffers:  57]\r\n      [Scan RS (ms):  8.5]\r\n      [Code Root Scanning (ms):  0.1]\r\n      [Object Copy (ms):  107.3]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  132.1]\r\n      [GC Worker End (ms):  1590924.4]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.2 ms]\r\n   [Other: 1.4 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.1 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.1 ms]\r\n      [Humongous Register: 0.3 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.4 ms]\r\n   [Eden: 137.0M(137.0M)->0.0B(149.0M) Survivors: 14.0M->2048.0K Heap: 565.3M(3029.0M)->429.8M(3029.0M)]\r\n [Times: user=0.12 sys=0.01, real=0.13 secs] \r\n1590.926: Total time for which application threads were stopped: 0.1346378 seconds, Stopping threads took: 0.0000805 seconds\r\n2019-01-17T13:17:17,064 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] conversions with cardinality[261,855] in 6,938 millis.\r\n2019-01-17T13:17:17,066 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,067 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T13:17:17,068 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,069 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,070 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,071 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,072 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,073 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,075 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] conversions with cardinality[1] in 0 millis.\r\n2019-01-17T13:17:17,076 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] conversions with cardinality[0] in 1 millis.\r\n2019-01-17T13:17:17,077 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,078 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,079 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,080 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] conversions with cardinality[0] in 1 millis.\r\n1592.408: Application time: 1.4818928 seconds\r\n1592.408: [GC pause (Metadata GC Threshold) (young) (initial-mark), 0.0190879 secs]\r\n   [Parallel Time: 17.5 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1592409.0]\r\n      [Ext Root Scanning (ms):  6.4]\r\n      [Update RS (ms):  1.0]\r\n         [Processed Buffers:  45]\r\n      [Scan RS (ms):  0.9]\r\n      [Code Root Scanning (ms):  0.0]\r\n      [Object Copy (ms):  8.6]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  17.0]\r\n      [GC Worker End (ms):  1592426.0]\r\n   [Code Root Fixup: 0.1 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.0 ms]\r\n   [Other: 1.5 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.1 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.0 ms]\r\n      [Humongous Register: 0.1 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.1 ms]\r\n   [Eden: 26.0M(149.0M)->0.0B(148.0M) Survivors: 2048.0K->3072.0K Heap: 455.3M(3029.0M)->430.3M(3029.0M)]\r\n [Times: user=0.02 sys=0.00, real=0.02 secs] \r\n1592.428: Total time for which application threads were stopped: 0.0197868 seconds, Stopping threads took: 0.0000683 seconds\r\n1592.428: [GC concurrent-root-region-scan-start]\r\n2019-01-17T13:17:17,101 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,103 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,104 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,105 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,106 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,107 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] conversions with cardinality[1] in 1 millis.\r\n2019-01-17T13:17:17,107 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed dim conversions in 15,894 millis.\r\n1592.436: [GC concurrent-root-region-scan-end, 0.0081378 secs]\r\n1592.436: [GC concurrent-mark-start]\r\n1593.479: Application time: 1.0509443 seconds\r\n1593.479: Total time for which application threads were stopped: 0.0005342 seconds, Stopping threads took: 0.0000969 seconds\r\n2019-01-17T13:17:18,990 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - completed walk through of 279,621 rows in 1,854 millis.\r\n2019-01-17T13:17:19,033 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed time column in 43 millis.\r\n2019-01-17T13:17:19,034 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric column[count] in 0 millis.\r\n2019-01-17T13:17:19,034 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed metric columns in 1 millis.\r\n1594.369: Application time: 0.8901379 seconds\r\n1594.370: Total time for which application threads were stopped: 0.0004100 seconds, Stopping threads took: 0.0000654 seconds\r\n1594.444: [GC concurrent-mark-end, 2.0078505 secs]\r\n1594.444: Application time: 0.0742115 seconds\r\n1594.444: [GC remark 1594.444: [Finalize Marking, 0.0004515 secs] 1594.445: [GC ref-proc, 0.0006676 secs] 1594.446: [Unloading, 0.0584016 secs], 0.0667406 secs]\r\n [Times: user=0.06 sys=0.02, real=0.07 secs] \r\n1594.511: Total time for which application threads were stopped: 0.0673328 seconds, Stopping threads took: 0.0001364 seconds\r\n1594.511: Application time: 0.0001821 seconds\r\n1594.512: [GC cleanup 439M->418M(3029M), 0.0157070 secs]\r\n [Times: user=0.02 sys=0.00, real=0.01 secs] \r\n1594.528: Total time for which application threads were stopped: 0.0166937 seconds, Stopping threads took: 0.0004281 seconds\r\n1594.528: [GC concurrent-cleanup-start]\r\n1594.528: [GC concurrent-cleanup-end, 0.0001714 secs]\r\n1594.545: Application time: 0.0166952 seconds\r\n1594.546: Total time for which application threads were stopped: 0.0014017 seconds, Stopping threads took: 0.0001089 seconds\r\n1594.547: Application time: 0.0004502 seconds\r\n1594.547: Total time for which application threads were stopped: 0.0006972 seconds, Stopping threads took: 0.0000317 seconds\r\n2019-01-17T13:17:19,338 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[url] inverted with cardinality[1] in 303 millis.\r\n2019-01-17T13:17:19,356 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[onlineId] inverted with cardinality[1] in 10 millis.\r\n2019-01-17T13:17:19,400 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[channel] inverted with cardinality[1] in 42 millis.\r\n2019-01-17T13:17:19,421 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[category] inverted with cardinality[1] in 20 millis.\r\n2019-01-17T13:17:19,432 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientId] inverted with cardinality[1] in 10 millis.\r\n1595.547: Application time: 1.0001128 seconds\r\n1595.548: Total time for which application threads were stopped: 0.0007020 seconds, Stopping threads took: 0.0000958 seconds\r\n1596.548: Application time: 1.0001269 seconds\r\n1596.549: Total time for which application threads were stopped: 0.0003960 seconds, Stopping threads took: 0.0000722 seconds\r\n1598.353: Application time: 1.8042406 seconds\r\n1598.354: [GC pause (G1 Evacuation Pause) (young) (initial-mark), 0.0304997 secs]\r\n   [Parallel Time: 28.3 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1598354.7]\r\n      [Ext Root Scanning (ms):  7.4]\r\n      [Update RS (ms):  2.0]\r\n         [Processed Buffers:  49]\r\n      [Scan RS (ms):  1.4]\r\n      [Code Root Scanning (ms):  0.2]\r\n      [Object Copy (ms):  17.3]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  28.2]\r\n      [GC Worker End (ms):  1598382.9]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.1 ms]\r\n   [Other: 2.1 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.3 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.0 ms]\r\n      [Humongous Register: 0.2 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.2 ms]\r\n   [Eden: 148.0M(148.0M)->0.0B(147.0M) Survivors: 3072.0K->4096.0K Heap: 557.6M(3029.0M)->411.1M(3029.0M)]\r\n [Times: user=0.03 sys=0.00, real=0.03 secs] \r\n1598.384: Total time for which application threads were stopped: 0.0314799 seconds, Stopping threads took: 0.0001738 seconds\r\n1598.385: [GC concurrent-root-region-scan-start]\r\n1598.395: [GC concurrent-root-region-scan-end, 0.0106424 secs]\r\n1598.395: [GC concurrent-mark-start]\r\n1600.385: Application time: 2.0005240 seconds\r\n1600.386: Total time for which application threads were stopped: 0.0010958 seconds, Stopping threads took: 0.0003109 seconds\r\n1600.584: [GC concurrent-mark-end, 2.1884360 secs]\r\n1600.584: Application time: 0.1977137 seconds\r\n1600.585: [GC remark 1600.585: [Finalize Marking, 0.0007084 secs] 1600.586: [GC ref-proc, 0.0008763 secs] 1600.587: [Unloading, 0.0820253 secs], 0.0922652 secs]\r\n [Times: user=0.05 sys=0.04, real=0.09 secs] \r\n1600.677: Total time for which application threads were stopped: 0.0934726 seconds, Stopping threads took: 0.0003446 seconds\r\n1600.677: Application time: 0.0001425 seconds\r\n1600.678: [GC cleanup 487M->487M(3029M), 0.0212721 secs]\r\n [Times: user=0.01 sys=0.01, real=0.02 secs] \r\n1600.699: Total time for which application threads were stopped: 0.0219091 seconds, Stopping threads took: 0.0001203 seconds\r\n2019-01-17T13:17:27,097 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[uid] inverted with cardinality[279,621] in 7,664 millis.\r\n2019-01-17T13:17:27,175 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[newUser] inverted with cardinality[1] in 11 millis.\r\n1602.629: Application time: 1.9295100 seconds\r\n1602.629: [GC pause (G1 Evacuation Pause) (young), 0.0285392 secs]\r\n   [Parallel Time: 27.1 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1602629.8]\r\n      [Ext Root Scanning (ms):  4.0]\r\n      [Update RS (ms):  3.2]\r\n         [Processed Buffers:  54]\r\n      [Scan RS (ms):  0.5]\r\n      [Code Root Scanning (ms):  0.2]\r\n      [Object Copy (ms):  19.1]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  27.0]\r\n      [GC Worker End (ms):  1602656.8]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.2 ms]\r\n   [Other: 1.2 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.1 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.0 ms]\r\n      [Humongous Register: 0.2 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.3 ms]\r\n   [Eden: 147.0M(147.0M)->0.0B(147.0M) Survivors: 4096.0K->4096.0K Heap: 558.1M(3029.0M)->410.6M(3029.0M)]\r\n [Times: user=0.03 sys=0.00, real=0.03 secs] \r\n1602.658: Total time for which application threads were stopped: 0.0293337 seconds, Stopping threads took: 0.0000829 seconds\r\n1604.659: Application time: 2.0004176 seconds\r\n1604.659: Total time for which application threads were stopped: 0.0007897 seconds, Stopping threads took: 0.0001072 seconds\r\n1606.413: Application time: 1.7530535 seconds\r\n1606.413: [GC pause (G1 Evacuation Pause) (young), 0.0471323 secs]\r\n   [Parallel Time: 45.5 ms, GC Workers: 1]\r\n      [GC Worker Start (ms):  1606413.4]\r\n      [Ext Root Scanning (ms):  4.9]\r\n      [Update RS (ms):  6.3]\r\n         [Processed Buffers:  59]\r\n      [Scan RS (ms):  0.2]\r\n      [Code Root Scanning (ms):  6.1]\r\n      [Object Copy (ms):  27.8]\r\n      [Termination (ms):  0.0]\r\n         [Termination Attempts:  1]\r\n      [GC Worker Other (ms):  0.0]\r\n      [GC Worker Total (ms):  45.4]\r\n      [GC Worker End (ms):  1606458.8]\r\n   [Code Root Fixup: 0.0 ms]\r\n   [Code Root Purge: 0.0 ms]\r\n   [Clear CT: 0.2 ms]\r\n   [Other: 1.4 ms]\r\n      [Choose CSet: 0.0 ms]\r\n      [Ref Proc: 0.1 ms]\r\n      [Ref Enq: 0.0 ms]\r\n      [Redirty Cards: 0.1 ms]\r\n      [Humongous Register: 0.2 ms]\r\n      [Humongous Reclaim: 0.1 ms]\r\n      [Free CSet: 0.4 ms]\r\n   [Eden: 147.0M(147.0M)->0.0B(147.0M) Survivors: 4096.0K->4096.0K Heap: 557.6M(3029.0M)->411.1M(3029.0M)]\r\n [Times: user=0.02 sys=0.01, real=0.04 secs] \r\n1606.460: Total time for which application threads were stopped: 0.0478637 seconds, Stopping threads took: 0.0000666 seconds\r\n2019-01-17T13:17:34,055 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[timestamp] inverted with cardinality[261,855] in 6,879 millis.\r\n2019-01-17T13:17:34,103 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[userAgent] inverted with cardinality[1] in 10 millis.\r\n2019-01-17T13:17:34,119 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[group] inverted with cardinality[1] in 15 millis.\r\n2019-01-17T13:17:34,130 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[pageType] inverted with cardinality[1] in 9 millis.\r\n1609.461: Application time: 3.0002492 seconds\r\n1609.461: Total time for which application threads were stopped: 0.0004525 seconds, Stopping threads took: 0.0001270 seconds\r\n2019-01-17T13:17:34,141 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[os] inverted with cardinality[1] in 10 millis.\r\n2019-01-17T13:17:34,356 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[deviceType] inverted with cardinality[1] in 213 millis.\r\n2019-01-17T13:17:34,367 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browser] inverted with cardinality[1] in 10 millis.\r\n2019-01-17T13:17:34,381 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[browserType] inverted with cardinality[1] in 11 millis.\r\n2019-01-17T13:17:34,392 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[headline] inverted with cardinality[1] in 10 millis.\r\n2019-01-17T13:17:34,408 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[seoHeadline] inverted with cardinality[1] in 13 millis.\r\n2019-01-17T13:17:34,410 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[documentLabel] inverted with cardinality[0] in 1 millis.\r\n2019-01-17T13:17:34,424 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrer] inverted with cardinality[1] in 14 millis.\r\n2019-01-17T13:17:34,440 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[referrerDomain] inverted with cardinality[1] in 15 millis.\r\n2019-01-17T13:17:34,453 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[regional] inverted with cardinality[1] in 11 millis.\r\n2019-01-17T13:17:34,455 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[authors] inverted with cardinality[0] in 1 millis.\r\n2019-01-17T13:17:34,464 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[clientIP] inverted with cardinality[1] in 9 millis.\r\n2019-01-17T13:17:34,477 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[city] inverted with cardinality[1] in 12 millis.\r\n2019-01-17T13:17:34,490 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[location] inverted with cardinality[1] in 11 millis.\r\n2019-01-17T13:17:34,500 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[accuracyRadius] inverted with cardinality[1] in 9 millis.\r\n2019-01-17T13:17:34,739 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[postalCode] inverted with cardinality[1] in 238 millis.\r\n2019-01-17T13:17:34,750 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.StringDimensionMergerV9 - Completed dim[devicePixelRatio] inverted with cardinality[1] in 10 millis.\r\n2019-01-17T13:17:34,757 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.IndexMergerV9 - Completed index.drd in 5 millis.\r\n1610.091: Application time: 0.6294283 seconds\r\n1610.091: Total time for which application threads were stopped: 0.0008111 seconds, Stopping threads took: 0.0002008 seconds\r\n1610.091: Application time: 0.0000546 seconds\r\n1610.093: Total time for which application threads were stopped: 0.0017526 seconds, Stopping threads took: 0.0000386 seconds\r\n1610.094: Application time: 0.0005047 seconds\r\n1610.095: Total time for which application threads were stopped: 0.0009286 seconds, Stopping threads took: 0.0000463 seconds\r\n2019-01-17T13:17:34,768 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.java.util.common.io.smoosh.FileSmoosher - Created smoosh file [/druid/var/druid/task/index_kafka_de.id.cms.pageview-geoip-raw_test_9613bc014e062be_pndkmboa/work/persist/de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_79/0/00000.smoosh] of size [28268747] bytes.\r\n1610.123: Application time: 0.0287953 seconds\r\n1610.125: Total time for which application threads were stopped: 0.0016983 seconds, Stopping threads took: 0.0000787 seconds\r\n1610.132: Application time: 0.0071113 seconds\r\n1610.133: Total time for which application threads were stopped: 0.0006287 seconds, Stopping threads took: 0.0000827 seconds\r\n1610.147: Application time: 0.0138957 seconds\r\n1610.148: Total time for which application threads were stopped: 0.0013590 seconds, Stopping threads took: 0.0000640 seconds\r\n2019-01-17T13:17:35,314 INFO [de.id.cms.pageview-geoip-raw_test-incremental-persist] org.apache.druid.segment.realtime.appenderator.AppenderatorImpl - Committing metadata[AppenderatorDriverMetadata{segments={index_kafka_de.id.cms.pageview-geoip-raw_test_9613bc014e062be_0=[SegmentWithState{segmentIdentifier=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_79, state=APPENDING}]}, lastSegmentIds={index_kafka_de.id.cms.pageview-geoip-raw_test_9613bc014e062be_0=de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_79}, callerMetadata={nextPartitions=KafkaPartitions{topic='de.id.cms.pageview-geoip', partitionOffsetMap={1=2271437, 4=2274810, 7=2271950, 10=2274888, 13=2271949, 16=2274971, 19=2281887, 22=2275004}}}}] for sinks[de.id.cms.pageview-geoip-raw_test_2019-01-17T00:00:00.000Z_2019-01-18T00:00:00.000Z_2019-01-17T00:00:05.709Z_79:1].\r\n```\r\n\r\nUnfortunately this means till there is a solution for #6743 I have to use maxRowsInMemory and disable maxBytesInMemory. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455173781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455245749","html_url":"https://github.com/apache/druid/pull/6879#issuecomment-455245749","issue_url":"https://api.github.com/repos/apache/druid/issues/6879","id":455245749,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI0NTc0OQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T16:53:00Z","updated_at":"2019-01-17T16:53:00Z","author_association":"CONTRIBUTOR","body":"Yes please!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455245749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455256103","html_url":"https://github.com/apache/druid/issues/6880#issuecomment-455256103","issue_url":"https://api.github.com/repos/apache/druid/issues/6880","id":455256103,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI1NjEwMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T17:22:46Z","updated_at":"2019-01-17T17:22:46Z","author_association":"CONTRIBUTOR","body":"Instead of random, maybe some kind of deterministic sampling? (Based on a hash, for example.) The reason for this suggestion is that it's good for ingestion to be deterministic - mapper retries during Hadoop-based ingest and replicas during Kafka-based ingest both rely on determinism.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455256103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455257804","html_url":"https://github.com/apache/druid/pull/6881#issuecomment-455257804","issue_url":"https://api.github.com/repos/apache/druid/issues/6881","id":455257804,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI1NzgwNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T17:27:51Z","updated_at":"2019-01-17T17:27:51Z","author_association":"CONTRIBUTOR","body":"True, it is already there. I'll close this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455257804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455325997","html_url":"https://github.com/apache/druid/pull/6581#issuecomment-455325997","issue_url":"https://api.github.com/repos/apache/druid/issues/6581","id":455325997,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTMyNTk5Nw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T20:46:39Z","updated_at":"2019-01-17T20:46:39Z","author_association":"CONTRIBUTOR","body":"@edgan8 There are a couple of checkstyle errors","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455325997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455356689","html_url":"https://github.com/apache/druid/issues/6853#issuecomment-455356689","issue_url":"https://api.github.com/repos/apache/druid/issues/6853","id":455356689,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM1NjY4OQ==","user":{"login":"AlexanderSaydakov","id":13126686,"node_id":"MDQ6VXNlcjEzMTI2Njg2","avatar_url":"https://avatars.githubusercontent.com/u/13126686?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderSaydakov","html_url":"https://github.com/AlexanderSaydakov","followers_url":"https://api.github.com/users/AlexanderSaydakov/followers","following_url":"https://api.github.com/users/AlexanderSaydakov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderSaydakov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderSaydakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderSaydakov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderSaydakov/orgs","repos_url":"https://api.github.com/users/AlexanderSaydakov/repos","events_url":"https://api.github.com/users/AlexanderSaydakov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderSaydakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T22:31:37Z","updated_at":"2019-01-17T23:32:56Z","author_association":"CONTRIBUTOR","body":"It is hard to follow your example. Let's see if I understand it correctly.\r\nYou take the following 11 values:\r\n0.0\r\n99.0\r\n100.0\r\n600.0\r\n2000.0\r\n5.0\r\n20.0\r\n2.0\r\n1772.0\r\n1700.0\r\n300.0\r\nYou expect 0.5, 0.75, 0.9 and 0.95 quantiles to be 100, 1150, 1772 and 1886 respectively.\r\nWhy? Some values you expect were not in the input. Do you expect some sort of interpolation? Our quantiles sketch does not do anything like that. It does not even assume they are numbers. The only requirement for the algorithm is the \"less than\" relation between the values. To calculate, say, 0.75 quantile exactly one needs to sort the above array and see what value has the normalized rank of 0.75, that is 75% of all values should be less than that value. The value 1700 has 8 values below it, so its rank is 8/11 or about 0.73. So our sketch returns 1700 as the best approximation to 0.75 quantile.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455356689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455361941","html_url":"https://github.com/apache/druid/pull/6638#issuecomment-455361941","issue_url":"https://api.github.com/repos/apache/druid/issues/6638","id":455361941,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM2MTk0MQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T22:51:12Z","updated_at":"2019-01-17T22:51:12Z","author_association":"CONTRIBUTOR","body":"I'm going to go ahead and merge this, I think I've addressed the comments and have approval from @clintropolis ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455361941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455366807","html_url":"https://github.com/apache/druid/pull/6370#issuecomment-455366807","issue_url":"https://api.github.com/repos/apache/druid/issues/6370","id":455366807,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM2NjgwNw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:11:30Z","updated_at":"2019-01-17T23:11:30Z","author_association":"CONTRIBUTOR","body":"@leventov sorry for the late review. The latest change looks good to me. Would you please fix the conflicts and Travis?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455366807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455367563","html_url":"https://github.com/apache/druid/pull/6370#issuecomment-455367563","issue_url":"https://api.github.com/repos/apache/druid/issues/6370","id":455367563,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM2NzU2Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:14:56Z","updated_at":"2019-01-17T23:14:56Z","author_association":"CONTRIBUTOR","body":"Ah, probably I saw a stale page. It looks fine after refresh.\r\n\r\n@drcrallen do you have more comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455367563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455367967","html_url":"https://github.com/apache/druid/pull/6370#issuecomment-455367967","issue_url":"https://api.github.com/repos/apache/druid/issues/6370","id":455367967,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM2Nzk2Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:16:52Z","updated_at":"2019-01-17T23:16:52Z","author_association":"CONTRIBUTOR","body":"Oh, I missed one question. @leventov do you have any number for how much memory you could save with this PR?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455367967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455369675","html_url":"https://github.com/apache/druid/pull/6828#issuecomment-455369675","issue_url":"https://api.github.com/repos/apache/druid/issues/6828","id":455369675,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM2OTY3NQ==","user":{"login":"ankit0811","id":12939079,"node_id":"MDQ6VXNlcjEyOTM5MDc5","avatar_url":"https://avatars.githubusercontent.com/u/12939079?v=4","gravatar_id":"","url":"https://api.github.com/users/ankit0811","html_url":"https://github.com/ankit0811","followers_url":"https://api.github.com/users/ankit0811/followers","following_url":"https://api.github.com/users/ankit0811/following{/other_user}","gists_url":"https://api.github.com/users/ankit0811/gists{/gist_id}","starred_url":"https://api.github.com/users/ankit0811/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankit0811/subscriptions","organizations_url":"https://api.github.com/users/ankit0811/orgs","repos_url":"https://api.github.com/users/ankit0811/repos","events_url":"https://api.github.com/users/ankit0811/events{/privacy}","received_events_url":"https://api.github.com/users/ankit0811/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:24:58Z","updated_at":"2019-01-17T23:24:58Z","author_association":"CONTRIBUTOR","body":"> Generally LGTM, but I think this needs one more major change:\r\n> \r\n> Since `stopGracefully` is always called now, we should adjust the tasks that previously implemented graceful shutdown so that they continue to only do graceful shutdown when restore is enabled\r\n\r\nJust wanted to be sure, \r\nThe only case which is not handled here is when `isRestoreOnRestart = False` and `canRestore = True` ?\r\nAs `realtime tasks` have `canRestore` set to `True` and `Index task` have `canRestore` set to `False` always\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455369675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455370600","html_url":"https://github.com/apache/druid/pull/6864#issuecomment-455370600","issue_url":"https://api.github.com/repos/apache/druid/issues/6864","id":455370600,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM3MDYwMA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:29:14Z","updated_at":"2019-01-17T23:29:14Z","author_association":"MEMBER","body":">We currently have several lifecycle instances. Is this because of the dependency between modules? If so, do we need to add a way to define the dependency between modules in the future?\r\n\r\nThe only lifecycles Iâ€™m aware of outside of tests and the main â€˜moduleâ€™ lifecycle which associated to the server lifetime, are the http-clientâ€™s lifecycle [which is itâ€™s own because of history i believe](https://github.com/apache/incubator-druid/pull/6864#discussion_r248094764), the parameterized-uri-emitter, which I think is a similar situation as the http-client lifecycle, and finally the task master lifecycle, which I think makes sense to be a separate lifecycle as it is tied to lifetime of leadership of overlord rather than overall overlord lifetime. \r\n\r\n>do we need to add a way to define the dependency between modules in the future?\r\n\r\nI don't think it's worth introducing any extra complexity until we absolutely have to, and I'm not sure if we've reached that point yet.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455370600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455371698","html_url":"https://github.com/apache/druid/pull/6397#issuecomment-455371698","issue_url":"https://api.github.com/repos/apache/druid/issues/6397","id":455371698,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM3MTY5OA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:34:09Z","updated_at":"2019-01-17T23:34:09Z","author_association":"MEMBER","body":"@leventov any additional comments before I fix up conflicts? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455371698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455372564","html_url":"https://github.com/apache/druid/pull/6782#issuecomment-455372564","issue_url":"https://api.github.com/repos/apache/druid/issues/6782","id":455372564,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM3MjU2NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:38:16Z","updated_at":"2019-01-17T23:38:16Z","author_association":"CONTRIBUTOR","body":"@jon-wei thanks. Updated.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455372564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455374160","html_url":"https://github.com/apache/druid/pull/6828#issuecomment-455374160","issue_url":"https://api.github.com/repos/apache/druid/issues/6828","id":455374160,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM3NDE2MA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T23:45:49Z","updated_at":"2019-01-17T23:45:49Z","author_association":"CONTRIBUTOR","body":"@ankit0811 \r\n\r\nI would change AbstractTask so that stopGracefully() no longer throws an exception but just does nothing:\r\n\r\n``` @Override\r\n  public void stopGracefully()\r\n  {\r\n    // Should not be called when canRestore = false.\r\n    throw new UnsupportedOperationException(\"Cannot stop gracefully\");\r\n  }\r\n```\r\n\r\nFor the tasks that did have a stopGracefully() implementation (AppenderatorDriverRealtimeIndexTask, RealtimeIndexTask, SeekableStreamIndexTask), this used to  be called only when `taskConfig. isRestoreOnRestart` is true, so that check should be moved now into the stopGracefully() implementations there.\r\n\r\nYou could change the stopGracefully() method to have the task runner pass in the TaskConfig object for access to `restoreTasksOnRestart`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455374160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455411153","html_url":"https://github.com/apache/druid/pull/6829#issuecomment-455411153","issue_url":"https://api.github.com/repos/apache/druid/issues/6829","id":455411153,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQxMTE1Mw==","user":{"login":"QiuMM","id":15156517,"node_id":"MDQ6VXNlcjE1MTU2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/15156517?v=4","gravatar_id":"","url":"https://api.github.com/users/QiuMM","html_url":"https://github.com/QiuMM","followers_url":"https://api.github.com/users/QiuMM/followers","following_url":"https://api.github.com/users/QiuMM/following{/other_user}","gists_url":"https://api.github.com/users/QiuMM/gists{/gist_id}","starred_url":"https://api.github.com/users/QiuMM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/QiuMM/subscriptions","organizations_url":"https://api.github.com/users/QiuMM/orgs","repos_url":"https://api.github.com/users/QiuMM/repos","events_url":"https://api.github.com/users/QiuMM/events{/privacy}","received_events_url":"https://api.github.com/users/QiuMM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T03:00:46Z","updated_at":"2019-01-18T03:00:46Z","author_association":"MEMBER","body":"@gianm oops, I didn't look into the code carefully, `CoordinatorDynamicConfig#balancerComputeThreads` does affect the cachingCost strategy, except the random strategy.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455411153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455431091","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455431091","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455431091,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQzMTA5MQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T05:20:58Z","updated_at":"2019-01-18T05:20:58Z","author_association":"CONTRIBUTOR","body":"I wanted to update this thread with the current state of progress. I am hoping there will be a PR ready early next week.\r\n\r\nOne of the main goals of this unified console project was to make it as simple as possible technically. It needs to be maintainable by anyone (even people that are not full-time web developers).\r\n\r\n## Work in progress\r\n\r\nHere are some screenshots of the current WIP:\r\n\r\n### Data sources view:\r\n![image](https://user-images.githubusercontent.com/177816/51366524-f76e5680-1a9a-11e9-8386-3ae157933b72.png)\r\nHighly interactive all the views are cross linked\r\n\r\n### Segments view:\r\n![image](https://user-images.githubusercontent.com/177816/51366559-1b319c80-1a9b-11e9-94fc-ebc621a2ebc7.png)\r\nThe quarries here get pushed down to Druid so the browser does not get overwhelmed \r\n\r\n### Tasks view:\r\n![image](https://user-images.githubusercontent.com/177816/51366610-5cc24780-1a9b-11e9-8f21-c9b592b2148b.png)\r\n\r\n### Servers view:\r\n![image](https://user-images.githubusercontent.com/177816/51366637-7a8fac80-1a9b-11e9-90f3-57c84492d5a9.png)\r\n\r\n### SQL view:\r\n![image](https://user-images.githubusercontent.com/177816/51366669-9430f400-1a9b-11e9-9dff-5bc1e803f502.png)\r\nThis is to run arbitrary SQL, also every view provides a link to see its query in the raw so you can go beyond the predefined structure\r\n\r\n### Legacy consoles:\r\n![image](https://user-images.githubusercontent.com/177816/51366711-c2aecf00-1a9b-11e9-895b-d13357087603.png)\r\nAll 3 legacy consoles are also available and embedded within this console allowing you to have a fallback if there is some old functionality that has not made it over yet into the new console. Note that these legacy consoles will be served from the router as well as from their original places meaning that going forward you can go to the router for all your needs.\r\n\r\n## Design\r\n\r\nHere are some key points driving the design of this console:\r\n\r\n- The console is designed to run on the router node and rely on its management proxy to interface to the overlord and coordinator. This makes it much simpler both form the point of the console developer and the user. The router presents a good unifying interface to all of Druid.\r\n\r\n- Heavy reliance on the SQL system tables: this allows great flexibility and iteration in the development of the views and in further iteration. Hopefully one day this console will be 100% powered by system tables.\r\n\r\n- All frontend code is written TypeScript with strict typing turned on. This is both the best way to develop a complex UI and the best way to ensure that future changes do not break the code. Also it should be very familiar to you Java people.\r\n\r\nAll feedback is very welcome. I will keep updating this thread.\r\n \r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455431091/reactions","total_count":3,"+1":0,"-1":0,"laugh":0,"hooray":3,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455458992","html_url":"https://github.com/apache/druid/pull/6365#issuecomment-455458992","issue_url":"https://api.github.com/repos/apache/druid/issues/6365","id":455458992,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQ1ODk5Mg==","user":{"login":"zhaojiandong","id":5977839,"node_id":"MDQ6VXNlcjU5Nzc4Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/5977839?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaojiandong","html_url":"https://github.com/zhaojiandong","followers_url":"https://api.github.com/users/zhaojiandong/followers","following_url":"https://api.github.com/users/zhaojiandong/following{/other_user}","gists_url":"https://api.github.com/users/zhaojiandong/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaojiandong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaojiandong/subscriptions","organizations_url":"https://api.github.com/users/zhaojiandong/orgs","repos_url":"https://api.github.com/users/zhaojiandong/repos","events_url":"https://api.github.com/users/zhaojiandong/events{/privacy}","received_events_url":"https://api.github.com/users/zhaojiandong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T08:00:16Z","updated_at":"2019-01-18T08:00:16Z","author_association":"CONTRIBUTOR","body":"Hi @gianm   @asdf2014 , can you review my pr. This pr adds a field(timezone) to the constructor of TimestampSpec, so many classes have been modified.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455458992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455470152","html_url":"https://github.com/apache/druid/issues/6853#issuecomment-455470152","issue_url":"https://api.github.com/repos/apache/druid/issues/6853","id":455470152,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQ3MDE1Mg==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T08:47:03Z","updated_at":"2019-01-18T08:47:03Z","author_association":"NONE","body":"> It is hard to follow your example. Let's see if I understand it correctly.\r\n\r\n@AlexanderSaydakov Thanks for quick reply !\r\nYes, you're right.  I had sorted the 11 values asc for interpolation and i got [100, 1150, 1772, 1886] finally. \r\nI see the mechanism of quantiles sketch under your explaining. \r\nThank you so much.\r\nAnd best wishes for @jon-wei  too !","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455470152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455483440","html_url":"https://github.com/apache/druid/issues/2725#issuecomment-455483440","issue_url":"https://api.github.com/repos/apache/druid/issues/2725","id":455483440,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQ4MzQ0MA==","user":{"login":"abhijain1351","id":20940689,"node_id":"MDQ6VXNlcjIwOTQwNjg5","avatar_url":"https://avatars.githubusercontent.com/u/20940689?v=4","gravatar_id":"","url":"https://api.github.com/users/abhijain1351","html_url":"https://github.com/abhijain1351","followers_url":"https://api.github.com/users/abhijain1351/followers","following_url":"https://api.github.com/users/abhijain1351/following{/other_user}","gists_url":"https://api.github.com/users/abhijain1351/gists{/gist_id}","starred_url":"https://api.github.com/users/abhijain1351/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhijain1351/subscriptions","organizations_url":"https://api.github.com/users/abhijain1351/orgs","repos_url":"https://api.github.com/users/abhijain1351/repos","events_url":"https://api.github.com/users/abhijain1351/events{/privacy}","received_events_url":"https://api.github.com/users/abhijain1351/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T09:33:28Z","updated_at":"2019-01-18T09:33:28Z","author_association":"NONE","body":"Has anyone worked on the Heap space issue because of namespaces","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455483440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455525817","html_url":"https://github.com/apache/druid/pull/6370#issuecomment-455525817","issue_url":"https://api.github.com/repos/apache/druid/issues/6370","id":455525817,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTUyNTgxNw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T12:09:44Z","updated_at":"2019-01-18T12:10:22Z","author_association":"MEMBER","body":"@jihoonson I don't have a number. I hope the effect of removing `segments` maps from `DruidServer` and `ImmutableDruidServer` will be considerable. There are also some changes I want to do to avoid creating temporary collections of the all-segments cardinality (similar to #6827, but for coordination subsystem rather than SQL). I wait for this PR to make that changes.\r\n\r\nThanks for review!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455525817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455556062","html_url":"https://github.com/apache/druid/pull/6349#issuecomment-455556062","issue_url":"https://api.github.com/repos/apache/druid/issues/6349","id":455556062,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTU1NjA2Mg==","user":{"login":"egor-ryashin","id":14215045,"node_id":"MDQ6VXNlcjE0MjE1MDQ1","avatar_url":"https://avatars.githubusercontent.com/u/14215045?v=4","gravatar_id":"","url":"https://api.github.com/users/egor-ryashin","html_url":"https://github.com/egor-ryashin","followers_url":"https://api.github.com/users/egor-ryashin/followers","following_url":"https://api.github.com/users/egor-ryashin/following{/other_user}","gists_url":"https://api.github.com/users/egor-ryashin/gists{/gist_id}","starred_url":"https://api.github.com/users/egor-ryashin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/egor-ryashin/subscriptions","organizations_url":"https://api.github.com/users/egor-ryashin/orgs","repos_url":"https://api.github.com/users/egor-ryashin/repos","events_url":"https://api.github.com/users/egor-ryashin/events{/privacy}","received_events_url":"https://api.github.com/users/egor-ryashin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T14:03:02Z","updated_at":"2019-01-18T14:03:02Z","author_association":"CONTRIBUTOR","body":"@glasser \r\n> So I could wait until the historical's segment/count metric goes to zero, or until the SQL query {\"query\":\"SELECT count(*) AS segments FROM sys.server_segments WHERE server = '10.48.27.16:8083'\"} goes to 0?\r\n\r\nExactly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455556062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455561610","html_url":"https://github.com/apache/druid/issues/5859#issuecomment-455561610","issue_url":"https://api.github.com/repos/apache/druid/issues/5859","id":455561610,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTU2MTYxMA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T14:21:08Z","updated_at":"2019-01-18T14:21:08Z","author_association":"CONTRIBUTOR","body":"I see I'm kind of late to the party here ;-). We are using the `/segments` endpoint internally for validation purposes. I.e. we have long running Tasks with EventReceiverFirehose and the service that pushes data, then checks if appropriate segments/shards got created by the Task.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455561610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455605375","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455605375","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455605375,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwNTM3NQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T16:27:54Z","updated_at":"2019-01-18T16:27:54Z","author_association":"CONTRIBUTOR","body":"while i totally agree and love the idea of unifying the consoles, making (1) router node and (2) sql module mandatory elements is a major limitation IMO.\r\n\r\n1. Most of the complaint we hear about Druid is related to how many different node types we have and this work is going to make Router yet another mandatory node which is not great IMO.\r\n2. SQL module comes with some overhead (updating schema ...etc) that is not needed per say since all the info can be retrieved when needed instead of the caching that can add extra GC and extra CPU pressure extra memory footprint on all the brokers.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455605375/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455609321","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455609321","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455609321,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwOTMyMQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T16:39:19Z","updated_at":"2019-01-18T17:02:47Z","author_association":"CONTRIBUTOR","body":"@b-slim The tradeoff between incorporating another Druid process (note: Druid nodes are processes and were poorly named by myself and @cheddar) to unify the consoles is worth it, and this is coming from someone that has been the # 1 advocate of reducing processes in Druid. The router requires minimal configuration and there's no other straightforward way of even building a unified console without the router. As someone that created the original coordinator and overlord console, was heavily involved in creating the 2nd gen coordinator console, I can't emphasize enough how much this contribution is needed to make Druid better. Today, you have to go to multiple places to understand where segments are getting built and when they've been finalized. This is a huge pain for initial setup, and debugging segment problems in production is difficult. I've had probably 1000+ conversations about the problems with split consoles and the information that is lacking from them today. This is not to say that reducing Druid processes shouldn't be a goal of the project - as a community I think we should strive to think about how we can merge and simplify processes, but I think today incorporating these changes will make the project better as we continue to work on longer term changes to simplify Druid's architecture.\r\n\r\nThese changes, combined with the repackaging of Druid, will make significant strides to having more adoption, and a much better out of the box experience. Furthermore, debugging issues in production should also become much simpler. Once we reduce Druid's deployment down to 3 server types, each with colocated processes, people will stop focusing on every individual processes and focus much more on server types themselves.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455609321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455610785","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455610785","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455610785,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYxMDc4NQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T16:43:42Z","updated_at":"2019-01-18T16:43:42Z","author_association":"CONTRIBUTOR","body":"@b-slim with regards to the SQL module - once again, I think the tradeoff is well worth it. System tables have completely changed how people get metadata from Druid, and drastically simplifies operations of the project. They've been tested and validated in production at large scale clusters with minimal impact.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455610785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455632288","html_url":"https://github.com/apache/druid/pull/6864#issuecomment-455632288","issue_url":"https://api.github.com/repos/apache/druid/issues/6864","id":455632288,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzMjI4OA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:52:44Z","updated_at":"2019-01-18T17:52:44Z","author_association":"CONTRIBUTOR","body":"@drcrallen any more comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455632288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455657819","html_url":"https://github.com/apache/druid/pull/3956#issuecomment-455657819","issue_url":"https://api.github.com/repos/apache/druid/issues/3956","id":455657819,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1NzgxOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:18:51Z","updated_at":"2019-01-18T19:18:51Z","author_association":"CONTRIBUTOR","body":"The `isThreadSafe()` method sounds like an interesting approach. Or: maybe a `asThreadSafe()` method on Aggregator / BufferAggregator that returns a thread-safe clone of the aggregator. Some might return `this` and some might return a new impl that synchronizes stuff.\r\n\r\nThe idea would be to avoid using synchronization for cases where it's not necessary, like usage of aggregators by query engines.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455657819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455671914","html_url":"https://github.com/apache/druid/issues/6853#issuecomment-455671914","issue_url":"https://api.github.com/repos/apache/druid/issues/6853","id":455671914,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY3MTkxNA==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T20:08:18Z","updated_at":"2019-01-18T20:08:18Z","author_association":"CONTRIBUTOR","body":"@quenlang \r\n\r\nThere are very good reasons why it is not a good idea for a quantiles (or histogram) sketch to \"interpolate\" between actual values in the data.  Fundamentally, in order for the sketch to be independent of the input data distribution, it cannot make any assumptions about what that distribution might be.  And, in order to \"interpolate\", one must make assumptions about the input data distribution.  For example, interpolating using linear, power-law, Gaussian, or discontinuous step distributions would produce wildly different results. Therefore it is best to not to make any assumptions about the input data distribution and only return values actually sampled from the real data. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455671914/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455683608","html_url":"https://github.com/apache/druid/pull/6828#issuecomment-455683608","issue_url":"https://api.github.com/repos/apache/druid/issues/6828","id":455683608,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY4MzYwOA==","user":{"login":"ankit0811","id":12939079,"node_id":"MDQ6VXNlcjEyOTM5MDc5","avatar_url":"https://avatars.githubusercontent.com/u/12939079?v=4","gravatar_id":"","url":"https://api.github.com/users/ankit0811","html_url":"https://github.com/ankit0811","followers_url":"https://api.github.com/users/ankit0811/followers","following_url":"https://api.github.com/users/ankit0811/following{/other_user}","gists_url":"https://api.github.com/users/ankit0811/gists{/gist_id}","starred_url":"https://api.github.com/users/ankit0811/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankit0811/subscriptions","organizations_url":"https://api.github.com/users/ankit0811/orgs","repos_url":"https://api.github.com/users/ankit0811/repos","events_url":"https://api.github.com/users/ankit0811/events{/privacy}","received_events_url":"https://api.github.com/users/ankit0811/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T20:51:29Z","updated_at":"2019-01-18T20:51:29Z","author_association":"CONTRIBUTOR","body":"@jihoonson @jon-wei \r\nThanks for the reviews\r\nAs per your suggestions, have made the necessary changes to stopGracefully() method\r\nCan u pls review the same\r\nThanks :)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455683608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455686741","html_url":"https://github.com/apache/druid/issues/6869#issuecomment-455686741","issue_url":"https://api.github.com/repos/apache/druid/issues/6869","id":455686741,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY4Njc0MQ==","user":{"login":"niketh","id":626548,"node_id":"MDQ6VXNlcjYyNjU0OA==","avatar_url":"https://avatars.githubusercontent.com/u/626548?v=4","gravatar_id":"","url":"https://api.github.com/users/niketh","html_url":"https://github.com/niketh","followers_url":"https://api.github.com/users/niketh/followers","following_url":"https://api.github.com/users/niketh/following{/other_user}","gists_url":"https://api.github.com/users/niketh/gists{/gist_id}","starred_url":"https://api.github.com/users/niketh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketh/subscriptions","organizations_url":"https://api.github.com/users/niketh/orgs","repos_url":"https://api.github.com/users/niketh/repos","events_url":"https://api.github.com/users/niketh/events{/privacy}","received_events_url":"https://api.github.com/users/niketh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T21:03:20Z","updated_at":"2019-01-18T21:03:20Z","author_association":"CONTRIBUTOR","body":"Makes sense. Also a note on size of Approx Historgram vs size of Quantile Sketch would be nice.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455686741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455693720","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455693720","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455693720,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY5MzcyMA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T21:30:43Z","updated_at":"2019-01-18T21:30:43Z","author_association":"CONTRIBUTOR","body":"I think @b-slim agrees on that the unified UI is cool, but is concerned about that the router should be set up for the new UI. I think it's a valid concern. The router is currently optional, so it would be not good for someone who wants to use the new UI but doesn't want to run the router. \r\n\r\nHow about adding a new configuration like `enableRouting` to brokers? If this is set to true, then the brokers are also capable of what routers do.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455693720/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455694182","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455694182","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455694182,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY5NDE4Mg==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T21:32:22Z","updated_at":"2019-01-18T21:32:22Z","author_association":"CONTRIBUTOR","body":"I'm on board with that","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455694182/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455723140","html_url":"https://github.com/apache/druid/issues/6826#issuecomment-455723140","issue_url":"https://api.github.com/repos/apache/druid/issues/6826","id":455723140,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTcyMzE0MA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T23:45:59Z","updated_at":"2019-01-18T23:45:59Z","author_association":"CONTRIBUTOR","body":"@surekhasaharan would you please link the PR you raise to this issue? It would work if you mention this issue in your PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455723140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455724486","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455724486","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455724486,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTcyNDQ4Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T23:54:23Z","updated_at":"2019-01-18T23:54:23Z","author_association":"CONTRIBUTOR","body":"> Most of the complaint we hear about Druid is related to how many different node types we have and this work is going to make Router yet another mandatory node which is not great IMO.\r\n\r\nI think adding an out-of-the-box UI for some querying functionality (SQL view in this new UI) is pretty great for users, and since the UI would also have the coordinator/overlord console functionality, the router seems like a reasonable place to run the UI.\r\n\r\nI definitely agree with your point on too many node types; adding to @jihoonson's comment, what do think about eventually combining the router and broker into a process that's positioned as a \"unified access point\" for the cluster?\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455724486/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455738225","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455738225","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455738225,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTczODIyNQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-19T01:46:45Z","updated_at":"2019-01-19T01:46:45Z","author_association":"CONTRIBUTOR","body":"As i said i love the idea to consolidate the ui and have less nodes.  but to get to that goal i think this UI need to be as part of coordinator (thus we do not create need for router). It seems to me that most of what the UI is serving is part of the coordinator/overlord state thus it makes more sense to me to added it there should rely on the coordinator to construct the timeline or cache it at the coordinator, instead of making ALL the brokers do that duplicate work that has an impact on the query side, also lot of the users don't care about SQL and it will be unfair to make it mandatory on by default. Would love to hear from the original main author how hard it is to by pass the SQL layer and what are the pros/cons ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455738225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455746463","html_url":"https://github.com/apache/druid/issues/6853#issuecomment-455746463","issue_url":"https://api.github.com/repos/apache/druid/issues/6853","id":455746463,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTc0NjQ2Mw==","user":{"login":"quenlang","id":11764573,"node_id":"MDQ6VXNlcjExNzY0NTcz","avatar_url":"https://avatars.githubusercontent.com/u/11764573?v=4","gravatar_id":"","url":"https://api.github.com/users/quenlang","html_url":"https://github.com/quenlang","followers_url":"https://api.github.com/users/quenlang/followers","following_url":"https://api.github.com/users/quenlang/following{/other_user}","gists_url":"https://api.github.com/users/quenlang/gists{/gist_id}","starred_url":"https://api.github.com/users/quenlang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/quenlang/subscriptions","organizations_url":"https://api.github.com/users/quenlang/orgs","repos_url":"https://api.github.com/users/quenlang/repos","events_url":"https://api.github.com/users/quenlang/events{/privacy}","received_events_url":"https://api.github.com/users/quenlang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-19T03:44:46Z","updated_at":"2019-01-19T03:44:46Z","author_association":"NONE","body":"@leerho That is great ! Thanks for quick reply.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455746463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/455873571","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-455873571","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":455873571,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTg3MzU3MQ==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-20T15:01:56Z","updated_at":"2019-01-20T15:01:56Z","author_association":"CONTRIBUTOR","body":"I love the idea of a better, unified UI as well. But I also agree with @b-slim on the Router part. We sometimes do quite small, on premise deployments of Druid (think, 1-2 machines) for our clients and adding another node there can actually be a dealbreaker, because of already scarce resources. I know this may be a bit \"unorthodox\" usage of Druid, but it's real.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/455873571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456129145","html_url":"https://github.com/apache/druid/issues/6891#issuecomment-456129145","issue_url":"https://api.github.com/repos/apache/druid/issues/6891","id":456129145,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEyOTE0NQ==","user":{"login":"peferron","id":7009852,"node_id":"MDQ6VXNlcjcwMDk4NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7009852?v=4","gravatar_id":"","url":"https://api.github.com/users/peferron","html_url":"https://github.com/peferron","followers_url":"https://api.github.com/users/peferron/followers","following_url":"https://api.github.com/users/peferron/following{/other_user}","gists_url":"https://api.github.com/users/peferron/gists{/gist_id}","starred_url":"https://api.github.com/users/peferron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peferron/subscriptions","organizations_url":"https://api.github.com/users/peferron/orgs","repos_url":"https://api.github.com/users/peferron/repos","events_url":"https://api.github.com/users/peferron/events{/privacy}","received_events_url":"https://api.github.com/users/peferron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T16:23:18Z","updated_at":"2019-01-21T16:23:18Z","author_association":"CONTRIBUTOR","body":"Are you referring to the `V2` in `ListObjectsV2Request` in the linked Druid source code? If so, I believe this `V2` just means that it's a revised version of the List Objects API, not that it's using Signature Version 2.\r\n\r\nSee the Python SDK docs where this is clearly mentioned: https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/s3.html#S3.Client.list_objects_v2\r\n\r\nThe Signature Version is configured separately, and all AWS SDKs appear to use Signature Version 4 by default since May 2016: https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingAWSSDK.html#specify-signature-version","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456129145/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456132245","html_url":"https://github.com/apache/druid/issues/6891#issuecomment-456132245","issue_url":"https://api.github.com/repos/apache/druid/issues/6891","id":456132245,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEzMjI0NQ==","user":{"login":"Stephan3555","id":2537072,"node_id":"MDQ6VXNlcjI1MzcwNzI=","avatar_url":"https://avatars.githubusercontent.com/u/2537072?v=4","gravatar_id":"","url":"https://api.github.com/users/Stephan3555","html_url":"https://github.com/Stephan3555","followers_url":"https://api.github.com/users/Stephan3555/followers","following_url":"https://api.github.com/users/Stephan3555/following{/other_user}","gists_url":"https://api.github.com/users/Stephan3555/gists{/gist_id}","starred_url":"https://api.github.com/users/Stephan3555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stephan3555/subscriptions","organizations_url":"https://api.github.com/users/Stephan3555/orgs","repos_url":"https://api.github.com/users/Stephan3555/repos","events_url":"https://api.github.com/users/Stephan3555/events{/privacy}","received_events_url":"https://api.github.com/users/Stephan3555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T16:32:54Z","updated_at":"2019-01-21T16:32:54Z","author_association":"NONE","body":"Thanks for the explanation @peferron!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456132245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456173712","html_url":"https://github.com/apache/druid/pull/6370#issuecomment-456173712","issue_url":"https://api.github.com/repos/apache/druid/issues/6370","id":456173712,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjE3MzcxMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T19:10:55Z","updated_at":"2019-01-21T19:10:55Z","author_association":"CONTRIBUTOR","body":"Thanks. Iâ€™m merging this pr.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456173712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456222528","html_url":"https://github.com/apache/druid/issues/5568#issuecomment-456222528","issue_url":"https://api.github.com/repos/apache/druid/issues/5568","id":456222528,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjIyMjUyOA==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T23:17:10Z","updated_at":"2019-01-21T23:17:10Z","author_association":"MEMBER","body":"This should be fixed by #6864.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456222528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456230342","html_url":"https://github.com/apache/druid/issues/2725#issuecomment-456230342","issue_url":"https://api.github.com/repos/apache/druid/issues/2725","id":456230342,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjIzMDM0Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T00:16:57Z","updated_at":"2019-01-22T00:16:57Z","author_association":"CONTRIBUTOR","body":"Not that I am aware of.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456230342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456230568","html_url":"https://github.com/apache/druid/issues/6887#issuecomment-456230568","issue_url":"https://api.github.com/repos/apache/druid/issues/6887","id":456230568,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjIzMDU2OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T00:18:43Z","updated_at":"2019-01-22T00:18:43Z","author_association":"CONTRIBUTOR","body":"That's true, currently the SQL metadata doesn't tell you whether something was ingested as a dimension or a metric. The SegmentMetadataQuery should, though. It tells you column types and aggregator specs if you ask for them via analysisTypes. For data ingested in relatively recent versions of Druid, it's safe to assume that anything with an aggregator spec is a metric (and anything without is a dimension).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456230568/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456236368","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-456236368","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":456236368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjIzNjM2OA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T01:02:18Z","updated_at":"2019-01-22T01:02:18Z","author_association":"CONTRIBUTOR","body":"Just wanted to update this thread with some progress:\r\n\r\n## Dark mode style:\r\n![image](https://user-images.githubusercontent.com/177816/51505835-d14bfd80-1d9d-11e9-8e24-828d2fa6b399.png)\r\n\r\n## Ability to change runtime configurations:\r\n![image](https://user-images.githubusercontent.com/177816/51505860-f476ad00-1d9d-11e9-9aa0-ae780372033a.png)\r\n\r\n## All 'actions' implemented:\r\n![image](https://user-images.githubusercontent.com/177816/51505899-1b34e380-1d9e-11e9-9b71-991473776974.png)\r\n\r\nCurrently working on getting this integrated with maven.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456236368/reactions","total_count":6,"+1":2,"-1":0,"laugh":0,"hooray":4,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456238607","html_url":"https://github.com/apache/druid/pull/6897#issuecomment-456238607","issue_url":"https://api.github.com/repos/apache/druid/issues/6897","id":456238607,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjIzODYwNw==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T01:18:07Z","updated_at":"2019-01-22T01:18:07Z","author_association":"MEMBER","body":"Merging to fix master and PR builds","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456238607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456240683","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-456240683","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":456240683,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjI0MDY4Mw==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T01:31:01Z","updated_at":"2019-01-22T01:31:01Z","author_association":"CONTRIBUTOR","body":"@KenjiTakahashi how would you feel if the unified web console ran on the broker node (enabled by a config)?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456240683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456243803","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-456243803","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":456243803,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjI0MzgwMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T01:51:03Z","updated_at":"2019-01-22T01:51:03Z","author_association":"CONTRIBUTOR","body":"Or maybe the coordinator? Either way (coordinator or broker) a new proxy route would be needed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456243803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456244612","html_url":"https://github.com/apache/druid/issues/6832#issuecomment-456244612","issue_url":"https://api.github.com/repos/apache/druid/issues/6832","id":456244612,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjI0NDYxMg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T01:56:38Z","updated_at":"2019-01-22T01:56:38Z","author_association":"CONTRIBUTOR","body":"Just for completeness I would also like to throw in the historical node for consideration of where the console might run :-p","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456244612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456372631","html_url":"https://github.com/apache/druid/issues/6852#issuecomment-456372631","issue_url":"https://api.github.com/repos/apache/druid/issues/6852","id":456372631,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjM3MjYzMQ==","user":{"login":"mihai-cazacu-adswizz","id":45362709,"node_id":"MDQ6VXNlcjQ1MzYyNzA5","avatar_url":"https://avatars.githubusercontent.com/u/45362709?v=4","gravatar_id":"","url":"https://api.github.com/users/mihai-cazacu-adswizz","html_url":"https://github.com/mihai-cazacu-adswizz","followers_url":"https://api.github.com/users/mihai-cazacu-adswizz/followers","following_url":"https://api.github.com/users/mihai-cazacu-adswizz/following{/other_user}","gists_url":"https://api.github.com/users/mihai-cazacu-adswizz/gists{/gist_id}","starred_url":"https://api.github.com/users/mihai-cazacu-adswizz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mihai-cazacu-adswizz/subscriptions","organizations_url":"https://api.github.com/users/mihai-cazacu-adswizz/orgs","repos_url":"https://api.github.com/users/mihai-cazacu-adswizz/repos","events_url":"https://api.github.com/users/mihai-cazacu-adswizz/events{/privacy}","received_events_url":"https://api.github.com/users/mihai-cazacu-adswizz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T11:51:37Z","updated_at":"2019-01-22T11:51:37Z","author_association":"NONE","body":"After installing `hadoop-client:2.3.0`, using this command:\r\n\r\n> java -classpath \"./lib/*\" org.apache.druid.cli.Main tools pull-deps -h org.apache.hadoop:hadoop-client:2.3.0\r\n\r\nit complains about a missing class:\r\n\r\n>2019-01-22T11:46:06,322 ERROR [task-runner-0-priority-0] org.apache.druid.indexer.hadoop.DatasourceInputFormat - Exception getting splits\r\n>java.lang.RuntimeException: java.lang.ClassNotFoundException: **Class com.amazon.ws.emr.hadoop.fs.EmrFileSystem not found**\r\n>\tat org.apache.hadoop.conf.Configuration.getClass(Configuration.java:1882) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.FileSystem.getFileSystemClass(FileSystem.java:2298) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:2311) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:90) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2350) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2332) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.FileSystem.get(FileSystem.java:369) ~[hadoop-common-2.3.0.jar:?]\r\n>\tat org.apache.hadoop.fs.Path.getFileSystem(Path.java:296) ~[hadoop-common-2.3.0.jar:?]","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456372631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456508064","html_url":"https://github.com/apache/druid/issues/5859#issuecomment-456508064","issue_url":"https://api.github.com/repos/apache/druid/issues/5859","id":456508064,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjUwODA2NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T18:24:10Z","updated_at":"2019-01-30T00:50:05Z","author_association":"CONTRIBUTOR","body":"@KenjiTakahashi Would you please give us more details about how you use â€˜/segmentsâ€™ for validation? Iâ€™m not sure what you mean by the validation. How do you know what segments are expected to be generated? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456508064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456547977","html_url":"https://github.com/apache/druid/pull/6397#issuecomment-456547977","issue_url":"https://api.github.com/repos/apache/druid/issues/6397","id":456547977,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU0Nzk3Nw==","user":{"login":"clintropolis","id":1577461,"node_id":"MDQ6VXNlcjE1Nzc0NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1577461?v=4","gravatar_id":"","url":"https://api.github.com/users/clintropolis","html_url":"https://github.com/clintropolis","followers_url":"https://api.github.com/users/clintropolis/followers","following_url":"https://api.github.com/users/clintropolis/following{/other_user}","gists_url":"https://api.github.com/users/clintropolis/gists{/gist_id}","starred_url":"https://api.github.com/users/clintropolis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintropolis/subscriptions","organizations_url":"https://api.github.com/users/clintropolis/orgs","repos_url":"https://api.github.com/users/clintropolis/repos","events_url":"https://api.github.com/users/clintropolis/events{/privacy}","received_events_url":"https://api.github.com/users/clintropolis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T20:18:48Z","updated_at":"2019-01-22T20:18:48Z","author_association":"MEMBER","body":"Any more comments on this PR @leventov ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456547977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456554529","html_url":"https://github.com/apache/druid/issues/2725#issuecomment-456554529","issue_url":"https://api.github.com/repos/apache/druid/issues/2725","id":456554529,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU1NDUyOQ==","user":{"login":"abhijain1351","id":20940689,"node_id":"MDQ6VXNlcjIwOTQwNjg5","avatar_url":"https://avatars.githubusercontent.com/u/20940689?v=4","gravatar_id":"","url":"https://api.github.com/users/abhijain1351","html_url":"https://github.com/abhijain1351","followers_url":"https://api.github.com/users/abhijain1351/followers","following_url":"https://api.github.com/users/abhijain1351/following{/other_user}","gists_url":"https://api.github.com/users/abhijain1351/gists{/gist_id}","starred_url":"https://api.github.com/users/abhijain1351/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhijain1351/subscriptions","organizations_url":"https://api.github.com/users/abhijain1351/orgs","repos_url":"https://api.github.com/users/abhijain1351/repos","events_url":"https://api.github.com/users/abhijain1351/events{/privacy}","received_events_url":"https://api.github.com/users/abhijain1351/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T20:39:06Z","updated_at":"2019-01-22T20:39:06Z","author_association":"NONE","body":"I did a workaround. Thanks anyway.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456554529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456606915","html_url":"https://github.com/apache/druid/issues/6900#issuecomment-456606915","issue_url":"https://api.github.com/repos/apache/druid/issues/6900","id":456606915,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYwNjkxNQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T23:33:23Z","updated_at":"2019-01-22T23:33:23Z","author_association":"CONTRIBUTOR","body":"> I'm looking at adding a wantClientAuthconfiguration for Druid to make client authentication optional so that server will request for a client certificate, but will not fail if the client doesn't provide one.\r\n\r\nThat seems fine to me, it's a supported option on the SSL socket.\r\n\r\n>  This doesn't allow Druid to support other forms of client authentication once Mutual TLS is enabled.\r\n\r\nI'm curious though, in your use case, what checks happen when a client does not provide a valid client cert?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456606915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456611123","html_url":"https://github.com/apache/druid/pull/6581#issuecomment-456611123","issue_url":"https://api.github.com/repos/apache/druid/issues/6581","id":456611123,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYxMTEyMw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T23:53:01Z","updated_at":"2019-01-22T23:53:01Z","author_association":"CONTRIBUTOR","body":"@edgan8 Can you fix the checkstyle errors and conflict when you get a chance?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456611123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456629007","html_url":"https://github.com/apache/druid/issues/6889#issuecomment-456629007","issue_url":"https://api.github.com/repos/apache/druid/issues/6889","id":456629007,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYyOTAwNw==","user":{"login":"peferron","id":7009852,"node_id":"MDQ6VXNlcjcwMDk4NTI=","avatar_url":"https://avatars.githubusercontent.com/u/7009852?v=4","gravatar_id":"","url":"https://api.github.com/users/peferron","html_url":"https://github.com/peferron","followers_url":"https://api.github.com/users/peferron/followers","following_url":"https://api.github.com/users/peferron/following{/other_user}","gists_url":"https://api.github.com/users/peferron/gists{/gist_id}","starred_url":"https://api.github.com/users/peferron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peferron/subscriptions","organizations_url":"https://api.github.com/users/peferron/orgs","repos_url":"https://api.github.com/users/peferron/repos","events_url":"https://api.github.com/users/peferron/events{/privacy}","received_events_url":"https://api.github.com/users/peferron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T01:19:30Z","updated_at":"2019-01-23T01:21:05Z","author_association":"CONTRIBUTOR","body":"I need to re-evaluate this in the context of the query vectorization proposed in #6794.\r\n\r\nSolution B yields good improvements with the current one-row-at-a-time query engine,but will likely not work as well with the vectorized query engine, since even low-selectivity filters are likely to have at least one matching row per batch (the default batch size in #6794 is 512 rows).\r\n\r\nOn the other hand, it becomes possible to implement solution A on a per-batch basis. Right now, it looks like #6794 does not use bitmap iteration to build the list of matching rows, but checks the value of each row instead (see `SingleValueStringVectorValueMatcher`), so there might be room for improving filtered aggregator performance there as well.\r\n\r\nI'm going to try implementing solution A on top of the `vectoreyes` (what a pun @gianm) branch of #6794 to see how it goes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456629007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/456634526","html_url":"https://github.com/apache/druid/issues/6889#issuecomment-456634526","issue_url":"https://api.github.com/repos/apache/druid/issues/6889","id":456634526,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYzNDUyNg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T01:38:25Z","updated_at":"2019-01-23T01:38:25Z","author_association":"CONTRIBUTOR","body":"An aside: right now, for query level filters, Druid always uses indexes when possible. But this is not always optimal. Consider a query-level filter like `countryName = 'UK' AND comment LIKE '%foo%'`. Here `countryName` is low cardinality and `comment` is high cardinality (possibly nearly-unique). If \"UK\" is, let's say, 15% of the total row count of `countryName`, then it's probably better to resolve this filter by resolving `countryName = 'UK'` with the index and `comment LIKE '%foo%'` while scanning. The rationale here is that filters resolved via indexes cannot short-circuit, but filters resolved via scanning _can_ short-circuit. So ideally Druid should potentially move some filters to scan-time and even reorder them based on factors like this.\r\n\r\nComing back to the proposal at hand: @peferron you point out that filtered aggregators, today, never use indexes. By the rationale above, this is probably sometimes better and sometimes worse than using indexes. (And it seems like your benchmarks show the same thing.)\r\n\r\nIMO we should be working to make the behavior here consistent: it shouldn't matter whether a filter is query-level or in an aggregator. In either case Druid should resolve them using some logic that tries to take advantage of the factors mentioned above.\r\n\r\nBut, inevitably, it won't always make the best decision. So IMO I also think we should have some way of 'hinting' Druid to use, or not use, the index for a particular filter.\r\n\r\nPutting these two suggestions together: how about we build the hinting system first, which should let users that \"know better\" tell Druid what to do, and then build the automatic decisionmaking system afterwards? (With the goal that most users shouldn't have to provide hints.)\r\n\r\n> Indexes differentiate Druid from its competitionâ€”which is usually faster on raw scan speedâ€”so I think it makes sense to try to squeeze as much out of indexes as possible, especially when implementations as good as Roaring are available.\r\n\r\nHopefully the gap narrows, closes, or even inverts with vectorization (#6794) and adaptive compression (#6016).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/456634526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]