[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454806686","html_url":"https://github.com/apache/couchdb/issues/1857#issuecomment-454806686","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1857","id":454806686,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDgwNjY4Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T14:51:53Z","updated_at":"2019-01-16T14:51:53Z","author_association":"CONTRIBUTOR","body":"@AlexanderKaraberov\r\n\r\n https://bugs.erlang.org/browse/ERL-821 : would affect tests so running tests would not work but would not affect production. This is fixed in the latest 21.2.3\r\n\r\nhttps://bugs.erlang.org/browse/ERL-827 : not sure about this one, it is manifesting on FreeBSD, perhaps that's a necessary trigger for the bug and on other machines (Linux) might not happen. This is not fixed yet and and the cause it not known yet.\r\n\r\nhttps://bugs.erlang.org/browse/ERL-830 : not sure how likely this one is to happen, it does seem serious. One the other hand, I'd imagine if random bytes of data are not sent it would break http protocol and json formatting so connections would be retried. This is also fixed in 21.2.3\r\n\r\nWould you have the option of building a point release? Then I would try 21.2.3 perhaps. To be even more stable perhaps try 20.3.8.14, I've seen that run in production across hundreds of machine already for months without any issues.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454806686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454811121","html_url":"https://github.com/apache/couchdb/issues/1857#issuecomment-454811121","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1857","id":454811121,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDgxMTEyMQ==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T15:04:11Z","updated_at":"2019-01-16T15:04:47Z","author_association":"CONTRIBUTOR","body":"Hi @nickva , \r\nThank you for a prompt and detailed feedback. \r\n\r\n> Would you have the option of building a point release? Then I would try 21.2.3 perhaps.\r\n\r\nThis option is good for us. And from what I see it addresses some of the pinpointed problems. OTP 21.x delivers a lot of performance improvements to I/O subsystem hence we would be happy to stay on this major release instead of rolling back to 20.x","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454811121/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454836836","html_url":"https://github.com/apache/couchdb/issues/1653#issuecomment-454836836","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1653","id":454836836,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDgzNjgzNg==","user":{"login":"jasons316","id":44164832,"node_id":"MDQ6VXNlcjQ0MTY0ODMy","avatar_url":"https://avatars.githubusercontent.com/u/44164832?v=4","gravatar_id":"","url":"https://api.github.com/users/jasons316","html_url":"https://github.com/jasons316","followers_url":"https://api.github.com/users/jasons316/followers","following_url":"https://api.github.com/users/jasons316/following{/other_user}","gists_url":"https://api.github.com/users/jasons316/gists{/gist_id}","starred_url":"https://api.github.com/users/jasons316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasons316/subscriptions","organizations_url":"https://api.github.com/users/jasons316/orgs","repos_url":"https://api.github.com/users/jasons316/repos","events_url":"https://api.github.com/users/jasons316/events{/privacy}","received_events_url":"https://api.github.com/users/jasons316/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T16:09:54Z","updated_at":"2019-01-16T16:09:54Z","author_association":"NONE","body":"We are still getting issues like the above.\r\n\r\nUsing Apache Benchmark, we can call a single document (10000 iterations, 100 concurrent), and we get over 900 requests/sec when the cluster is not indexing. This drops to around 400 /sec if indexing, and around 150 /sec if indexing and data is being written/updated simultaneously.\r\n\r\nAs mentioned previously, this prevents read requests responding in a timely manner.\r\n\r\nDoes anybody have any ideas?\r\n\r\nThanks,\r\nJason","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454836836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454913239","html_url":"https://github.com/apache/couchdb/issues/1653#issuecomment-454913239","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1653","id":454913239,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkxMzIzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T19:43:19Z","updated_at":"2019-01-16T19:43:19Z","author_association":"MEMBER","body":"@jasons316 Try limiting the number of concurrent indexing processes to be (NCPUS - 1), aka 31. Be sure to account for shards - use the output of `/_active_tasks` to ensure you're not running more than 31 indexing jobs per node.\r\n\r\nDoes it help with your benchmark?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454913239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454926994","html_url":"https://github.com/apache/couchdb/pull/1842#issuecomment-454926994","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1842","id":454926994,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkyNjk5NA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T20:24:58Z","updated_at":"2019-01-16T20:24:58Z","author_association":"MEMBER","body":"@eiri Yeah, though this isn't intended to be a security feature to have hard constraints. This is just a foot-gun preventative so that a user doesn't get too far out into production before realizing that storing all docs under a single partition doesn't scale. With that in mind it seems forgivable to be able to go over some percentage of a bulk_docs call.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454926994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454936875","html_url":"https://github.com/apache/couchdb/issues/1653#issuecomment-454936875","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1653","id":454936875,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDkzNjg3NQ==","user":{"login":"jasons316","id":44164832,"node_id":"MDQ6VXNlcjQ0MTY0ODMy","avatar_url":"https://avatars.githubusercontent.com/u/44164832?v=4","gravatar_id":"","url":"https://api.github.com/users/jasons316","html_url":"https://github.com/jasons316","followers_url":"https://api.github.com/users/jasons316/followers","following_url":"https://api.github.com/users/jasons316/following{/other_user}","gists_url":"https://api.github.com/users/jasons316/gists{/gist_id}","starred_url":"https://api.github.com/users/jasons316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasons316/subscriptions","organizations_url":"https://api.github.com/users/jasons316/orgs","repos_url":"https://api.github.com/users/jasons316/repos","events_url":"https://api.github.com/users/jasons316/events{/privacy}","received_events_url":"https://api.github.com/users/jasons316/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T20:53:58Z","updated_at":"2019-01-16T20:53:58Z","author_association":"NONE","body":"Thanks for the response.\r\n\r\nI am unsure of how to limit the number of indexing processes. Is this in the config files?\r\n\r\nThanks,\r\nJason","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454936875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454952971","html_url":"https://github.com/apache/couchdb/issues/1653#issuecomment-454952971","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1653","id":454952971,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDk1Mjk3MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T21:39:13Z","updated_at":"2019-01-16T21:39:13Z","author_association":"MEMBER","body":"@jasons316 remove:\r\n\r\n```\r\nos_process_limit = 2000\r\nos_process_soft_limit = 1000\r\n```\r\n\r\nfrom your .ini file. This will restore the default value of 100. This is a good start.\r\n\r\nWhen generating a JavaScript index, CouchDB uses one external `couchjs` process per shard. For the default configuration, that's 8 processes per design document per database. Your increased limit means that up to (2000 / 8) = 250 indexes might be building at once, using 2000 `couchjs` processes. It should be clear that a machine with 16 cores/32 threads will have a hard time juggling 2000 active processes at once, leading to lots of context switches and reduced performance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/454952971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455015094","html_url":"https://github.com/apache/couchdb/issues/1864#issuecomment-455015094","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1864","id":455015094,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTAxNTA5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T02:06:43Z","updated_at":"2019-01-17T02:06:43Z","author_association":"MEMBER","body":"@fredguth If you use curl to PUT a new value that is simply numeric, does it fix things? Or if you edit the `.ini` file?\r\n\r\nCouch doesn't sanitize its input on the `_config` interface. This is a known issue - and I don't know if it'll be fixed any time soon.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455015094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455170725","html_url":"https://github.com/apache/couchdb/issues/1864#issuecomment-455170725","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1864","id":455170725,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTE3MDcyNQ==","user":{"login":"fredguth","id":392879,"node_id":"MDQ6VXNlcjM5Mjg3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/392879?v=4","gravatar_id":"","url":"https://api.github.com/users/fredguth","html_url":"https://github.com/fredguth","followers_url":"https://api.github.com/users/fredguth/followers","following_url":"https://api.github.com/users/fredguth/following{/other_user}","gists_url":"https://api.github.com/users/fredguth/gists{/gist_id}","starred_url":"https://api.github.com/users/fredguth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fredguth/subscriptions","organizations_url":"https://api.github.com/users/fredguth/orgs","repos_url":"https://api.github.com/users/fredguth/repos","events_url":"https://api.github.com/users/fredguth/events{/privacy}","received_events_url":"https://api.github.com/users/fredguth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T13:24:51Z","updated_at":"2019-01-17T13:24:51Z","author_association":"NONE","body":"@wohali As I am not very savy on CouchDB, I eventually deleted everything and started from scratch.  Thus, unfortunately I don't have the context anymore. Maybe we can close this issue, but I wanted to warn about this problem. Sorry for any inconvenience.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455170725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455258121","html_url":"https://github.com/apache/couchdb/issues/1653#issuecomment-455258121","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1653","id":455258121,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI1ODEyMQ==","user":{"login":"jasons316","id":44164832,"node_id":"MDQ6VXNlcjQ0MTY0ODMy","avatar_url":"https://avatars.githubusercontent.com/u/44164832?v=4","gravatar_id":"","url":"https://api.github.com/users/jasons316","html_url":"https://github.com/jasons316","followers_url":"https://api.github.com/users/jasons316/followers","following_url":"https://api.github.com/users/jasons316/following{/other_user}","gists_url":"https://api.github.com/users/jasons316/gists{/gist_id}","starred_url":"https://api.github.com/users/jasons316/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasons316/subscriptions","organizations_url":"https://api.github.com/users/jasons316/orgs","repos_url":"https://api.github.com/users/jasons316/repos","events_url":"https://api.github.com/users/jasons316/events{/privacy}","received_events_url":"https://api.github.com/users/jasons316/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T17:28:51Z","updated_at":"2019-01-17T17:28:51Z","author_association":"NONE","body":"Hi @wohali ,\r\n\r\nThank you for the continued advice. Forgive my naivety. The CouchDB documentation suggests 10-20x the default value is normal for production, so I simply went with that, as our nodes are individually quite high spec. What you say makes sense, and I have set the limits lower and will monitor and test accordingly.\r\n\r\nDoes the [ioq] concurrency setting have any bearing on this situation? If so, how does it affect indexing processes?\r\n\r\nThanks again,\r\nJason","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455258121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455264657","html_url":"https://github.com/apache/couchdb/pull/1865#issuecomment-455264657","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1865","id":455264657,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI2NDY1Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T17:47:50Z","updated_at":"2019-01-17T17:47:50Z","author_association":"MEMBER","body":"For history, this was because the initial accumulator being `{ok, []}` ended up causing us to create an improper list which blew up on [1] when we exceeded 100 elements to reorder.\r\n\r\n[1] https://github.com/apache/couchdb/blob/21359d2034daa348b9520f8e49f6fa1806eebd92/src/couch/src/couch_util.erl#L527","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455264657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455269102","html_url":"https://github.com/apache/couchdb/pull/1443#issuecomment-455269102","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1443","id":455269102,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI2OTEwMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T18:01:19Z","updated_at":"2019-01-17T18:01:19Z","author_association":"MEMBER","body":"@chewbranca looks like this is your patch. Do you have any time to review this?\r\n\r\nWhile I'm at it, what can we do about the `/{db}/{ddoc}/_info` endpoint to solve the same problem?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455269102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455271576","html_url":"https://github.com/apache/couchdb/issues/1653#issuecomment-455271576","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1653","id":455271576,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTI3MTU3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-17T18:09:09Z","updated_at":"2019-01-17T18:09:09Z","author_association":"MEMBER","body":"@jasons316 My pleasure - it can be OK to bump this number, but only once you've set up proper cluster monitoring and know that your hardware setup can handle it. It's also intended to be set that high for ongoing maintenance of views that are already built, not for initial building of views of DBs with massive amounts of data.\r\n\r\nBuilding views from scratch ties up `couchjs` processes in a way that incremental view updates don't. You could keep the number high but restrict how many views you build from scratch at once as an option, too.\r\n\r\nAs to your other question: none of this is a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455271576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455383235","html_url":"https://github.com/apache/couchdb/pull/1865#issuecomment-455383235","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1865","id":455383235,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTM4MzIzNQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T00:31:20Z","updated_at":"2019-01-18T00:31:20Z","author_association":"CONTRIBUTOR","body":"thanks @davisp for additional explanation. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455383235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455500572","html_url":"https://github.com/apache/couchdb/issues/1559#issuecomment-455500572","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1559","id":455500572,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTUwMDU3Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T10:30:34Z","updated_at":"2019-01-18T10:30:34Z","author_association":"MEMBER","body":"@zekenaulty in your scenario, you probably don’t want a single doc with 1M+ keys or array elements.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455500572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455505865","html_url":"https://github.com/apache/couchdb/issues/1559#issuecomment-455505865","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1559","id":455505865,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTUwNTg2NQ==","user":{"login":"SinanGabel","id":5586130,"node_id":"MDQ6VXNlcjU1ODYxMzA=","avatar_url":"https://avatars.githubusercontent.com/u/5586130?v=4","gravatar_id":"","url":"https://api.github.com/users/SinanGabel","html_url":"https://github.com/SinanGabel","followers_url":"https://api.github.com/users/SinanGabel/followers","following_url":"https://api.github.com/users/SinanGabel/following{/other_user}","gists_url":"https://api.github.com/users/SinanGabel/gists{/gist_id}","starred_url":"https://api.github.com/users/SinanGabel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinanGabel/subscriptions","organizations_url":"https://api.github.com/users/SinanGabel/orgs","repos_url":"https://api.github.com/users/SinanGabel/repos","events_url":"https://api.github.com/users/SinanGabel/events{/privacy}","received_events_url":"https://api.github.com/users/SinanGabel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T10:50:08Z","updated_at":"2019-01-18T10:50:08Z","author_association":"NONE","body":"I believe that your specific use case is better served with e.g. sqlite3 if\nI understand it correctly that you are importing kind of .csv data and want\nto make partial updates.\n\nOn Fri, 18 Jan 2019 at 11:30, Jan Lehnardt <notifications@github.com> wrote:\n\n> @zekenaulty <https://github.com/zekenaulty> in your scenario, you\n> probably don’t want a single doc with 1M+ keys or array elements.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/1559#issuecomment-455500572>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AFU80kf1qf1gm87_i41fTn3LBpsPwR_lks5vEaJOgaJpZM4V9xVu>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455505865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455608211","html_url":"https://github.com/apache/couchdb/pull/1783#issuecomment-455608211","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1783","id":455608211,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwODIxMQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T16:36:06Z","updated_at":"2019-01-18T16:36:06Z","author_association":"CONTRIBUTOR","body":"@willholley : It doesn't generate an error and will be an improvement. My only concern is that it will break existing functionality. I have a test suite for that so that shouldn't be a problem. The issue I'm currently running into is getting all 3 to produce the same result.\r\n\r\nEx: \r\n\r\n```\r\n1) {\"age\": 22, \"$or\": []}\r\n\r\n2) {\"$or\": []}\r\n```\r\nproduce different results in json, _all_docs, and text depending on where part of the code is implemented. The correct solution should be IMO should be\r\n\r\n1) We get all documents back where the age is 22\r\n2) We get 0 documents back.\r\n\r\nfor all 3 index types. I'm debugging why it's currently not the case\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455608211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455617847","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455617847","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455617847,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYxNzg0Nw==","user":{"login":"surveyservice","id":46577261,"node_id":"MDQ6VXNlcjQ2NTc3MjYx","avatar_url":"https://avatars.githubusercontent.com/u/46577261?v=4","gravatar_id":"","url":"https://api.github.com/users/surveyservice","html_url":"https://github.com/surveyservice","followers_url":"https://api.github.com/users/surveyservice/followers","following_url":"https://api.github.com/users/surveyservice/following{/other_user}","gists_url":"https://api.github.com/users/surveyservice/gists{/gist_id}","starred_url":"https://api.github.com/users/surveyservice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surveyservice/subscriptions","organizations_url":"https://api.github.com/users/surveyservice/orgs","repos_url":"https://api.github.com/users/surveyservice/repos","events_url":"https://api.github.com/users/surveyservice/events{/privacy}","received_events_url":"https://api.github.com/users/surveyservice/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:05:40Z","updated_at":"2019-01-18T17:05:40Z","author_association":"NONE","body":"I am running into the same issue with Ubuntu 18.04.1\r\n\r\nThe only note I would add is that I upgraded from 16.04, this was not a fresh install.\r\n\r\n```\r\nadministrator@mfalcon:~$ sudo apt-get update && sudo apt-get install couchdb\r\n[sudo] password for administrator: \r\nHit:1 http://us.archive.ubuntu.com/ubuntu bionic InRelease\r\nGet:2 http://us.archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]                                                \r\nGet:3 http://security.ubuntu.com/ubuntu bionic-security InRelease [83.2 kB]                                                            \r\nGet:4 http://us.archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]                                                         \r\nIgn:5 https://apache.bintray.com/couchdb-deb bionic InRelease                                                                                     \r\nGet:6 https://apache.bintray.com/couchdb-deb bionic Release [1,840 B]                \r\nFetched 248 kB in 1s (247 kB/s)                               \r\nReading package lists... Done\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nPackage couchdb is not available, but is referred to by another package.\r\nThis may mean that the package is missing, has been obsoleted, or\r\nis only available from another source\r\n\r\nE: Package 'couchdb' has no installation candidate\r\nadministrator@mfalcon:~$ \r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455617847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455618424","html_url":"https://github.com/apache/couchdb/issues/1855#issuecomment-455618424","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1855","id":455618424,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYxODQyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:07:27Z","updated_at":"2019-01-18T17:07:27Z","author_association":"MEMBER","body":"Hi there @feg624 ,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)\r\n\r\nThanks so much for your interest in Apache CouchDB!\r\n\r\nP.S. That plugin was written for CouchDB 1.x and probably won't work with 2.x.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455618424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455623007","html_url":"https://github.com/apache/couchdb/issues/1584#issuecomment-455623007","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1584","id":455623007,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYyMzAwNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:21:42Z","updated_at":"2019-01-18T17:21:42Z","author_association":"MEMBER","body":"Terminated with reason normal - this is normal behaviour, just a very noisy log message.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455623007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455625926","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455625926","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455625926,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYyNTkyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:31:15Z","updated_at":"2019-01-18T17:31:15Z","author_association":"MEMBER","body":"@surveyservice What if you uninstall, then reinstall couchdb?\r\n\r\nThis will not remove your data.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455625926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455631266","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455631266","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455631266,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzMTI2Ng==","user":{"login":"surveyservice","id":46577261,"node_id":"MDQ6VXNlcjQ2NTc3MjYx","avatar_url":"https://avatars.githubusercontent.com/u/46577261?v=4","gravatar_id":"","url":"https://api.github.com/users/surveyservice","html_url":"https://github.com/surveyservice","followers_url":"https://api.github.com/users/surveyservice/followers","following_url":"https://api.github.com/users/surveyservice/following{/other_user}","gists_url":"https://api.github.com/users/surveyservice/gists{/gist_id}","starred_url":"https://api.github.com/users/surveyservice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surveyservice/subscriptions","organizations_url":"https://api.github.com/users/surveyservice/orgs","repos_url":"https://api.github.com/users/surveyservice/repos","events_url":"https://api.github.com/users/surveyservice/events{/privacy}","received_events_url":"https://api.github.com/users/surveyservice/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:49:20Z","updated_at":"2019-01-18T17:49:20Z","author_association":"NONE","body":"CouchDB is not installed. (and hasn't been on this machine)\r\nThis morning, I upgraded the OS from 16.04 Xenial to 18.04 Bionic, added the CouchDB repo and key, and tried to install.\r\nIt appears as though the CouchDB repository is being read, however I am consistently getting the `Package 'couchdb' has no installation candidate`. message. \r\nI've tried the same steps as in the original post, but no luck.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455631266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455633120","html_url":"https://github.com/apache/couchdb/pull/1867#issuecomment-455633120","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1867","id":455633120,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzMzEyMA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:55:32Z","updated_at":"2019-01-18T17:55:32Z","author_association":"MEMBER","body":"Also, this has already passed Jenkins CI.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455633120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455633278","html_url":"https://github.com/apache/couchdb/pull/1867#issuecomment-455633278","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1867","id":455633278,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzMzI3OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:56:03Z","updated_at":"2019-01-18T17:56:03Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455633278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455635749","html_url":"https://github.com/apache/couchdb/pull/1867#issuecomment-455635749","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1867","id":455635749,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzNTc0OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:05:06Z","updated_at":"2019-01-18T18:05:06Z","author_association":"MEMBER","body":"+1 from me too, and thanks for fixing Jenkins!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455635749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455639419","html_url":"https://github.com/apache/couchdb/pull/1811#issuecomment-455639419","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1811","id":455639419,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYzOTQxOQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:17:48Z","updated_at":"2019-01-18T18:17:48Z","author_association":"MEMBER","body":"+1\r\n\r\nI don't think I'd nest it since its not quite the same.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455639419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455640650","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455640650","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455640650,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0MDY1MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:21:38Z","updated_at":"2019-01-18T18:21:52Z","author_association":"MEMBER","body":"I don't know what to say, and I'm unable to reproduce the problem. People are able to download it - and there's even been an uptick since 2.2.0 - see the attached image, which is stats *just* for the .deb packages.\r\n\r\n![mwsnap 2019-01-18 13_19_53](https://user-images.githubusercontent.com/112292/51405249-d736aa00-1b23-11e9-8ac1-26ce4a5a4baf.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455640650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455640980","html_url":"https://github.com/apache/couchdb/pull/1811#issuecomment-455640980","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1811","id":455640980,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0MDk4MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:22:39Z","updated_at":"2019-01-18T18:22:39Z","author_association":"MEMBER","body":"TY @davisp - will leave it as is.\r\n\r\nDocumentation PR to land after this one.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455640980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455641027","html_url":"https://github.com/apache/couchdb/pull/1811#issuecomment-455641027","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1811","id":455641027,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0MTAyNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:22:51Z","updated_at":"2019-01-18T18:22:51Z","author_association":"MEMBER","body":"rebase before merging though","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455641027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455645990","html_url":"https://github.com/apache/couchdb/pull/1865#issuecomment-455645990","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1865","id":455645990,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0NTk5MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:39:42Z","updated_at":"2019-01-18T18:40:20Z","author_association":"MEMBER","body":"@jiangphcn Please be careful with your JIRA issue tagging - you linked this one to \"Build under snap container is denied access to /bindf\" - not the right issue.\r\n\r\nWe're not using JIRA any more, so you probably don't need to reference any COUCHDB-#### issues from this point forward. Feel free to reference GitHub issues if they exist, though.\r\n\r\n(I only notice this because I closed out every single JIRA issue, so I get personal email every time one of them gets updated.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455645990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455646472","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455646472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455646472,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0NjQ3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:41:17Z","updated_at":"2019-01-18T18:41:17Z","author_association":"MEMBER","body":"FYI I have reached out to a Debian/Ubuntu expert for advice; we'll see if anything comes back.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455646472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455646900","html_url":"https://github.com/apache/couchdb/pull/1844#issuecomment-455646900","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1844","id":455646900,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0NjkwMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:42:47Z","updated_at":"2019-01-18T18:42:47Z","author_association":"MEMBER","body":"Still looks broken @davisp, maybe start again?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455646900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455647213","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-455647213","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":455647213,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0NzIxMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:43:53Z","updated_at":"2019-01-18T18:43:53Z","author_association":"MEMBER","body":"@jaydoane OK, I give up, let's not let perfect be the enemy of the good.\r\n\r\nCan you please merge this, then get a docs PR up? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455647213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455648284","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455648284","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455648284,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0ODI4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:47:21Z","updated_at":"2019-01-18T18:47:21Z","author_association":"MEMBER","body":"@surveyservice Can you please run\r\n\r\n```\r\napt policy couchdb\r\n```\r\n\r\nto see if something is pinned in such a way as to make it uninstallable?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455648284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455649336","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455649336","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455649336,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0OTMzNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:51:07Z","updated_at":"2019-01-18T18:51:07Z","author_association":"MEMBER","body":"You should also check the apt cache directly, there should be a file in `/var/lib/apt/lists/`, something like `apache.bintray.com_couchdb-deb_bionic_main_Packages`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455649336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455649386","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455649386","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455649386,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY0OTM4Ng==","user":{"login":"surveyservice","id":46577261,"node_id":"MDQ6VXNlcjQ2NTc3MjYx","avatar_url":"https://avatars.githubusercontent.com/u/46577261?v=4","gravatar_id":"","url":"https://api.github.com/users/surveyservice","html_url":"https://github.com/surveyservice","followers_url":"https://api.github.com/users/surveyservice/followers","following_url":"https://api.github.com/users/surveyservice/following{/other_user}","gists_url":"https://api.github.com/users/surveyservice/gists{/gist_id}","starred_url":"https://api.github.com/users/surveyservice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surveyservice/subscriptions","organizations_url":"https://api.github.com/users/surveyservice/orgs","repos_url":"https://api.github.com/users/surveyservice/repos","events_url":"https://api.github.com/users/surveyservice/events{/privacy}","received_events_url":"https://api.github.com/users/surveyservice/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:51:14Z","updated_at":"2019-01-18T18:52:54Z","author_association":"NONE","body":"the results:\r\n\r\n```\r\nadministrator@mfalcon:~$ apt policy couchdb\r\ncouchdb:\r\n  Installed: (none)\r\n  Candidate: (none)\r\n  Version table:\r\n     1.6.0-0ubuntu7 -1\r\n        100 /var/lib/dpkg/status\r\nadministrator@mfalcon:~$ \r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455649386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455651100","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455651100","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455651100,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1MTEwMA==","user":{"login":"surveyservice","id":46577261,"node_id":"MDQ6VXNlcjQ2NTc3MjYx","avatar_url":"https://avatars.githubusercontent.com/u/46577261?v=4","gravatar_id":"","url":"https://api.github.com/users/surveyservice","html_url":"https://github.com/surveyservice","followers_url":"https://api.github.com/users/surveyservice/followers","following_url":"https://api.github.com/users/surveyservice/following{/other_user}","gists_url":"https://api.github.com/users/surveyservice/gists{/gist_id}","starred_url":"https://api.github.com/users/surveyservice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surveyservice/subscriptions","organizations_url":"https://api.github.com/users/surveyservice/orgs","repos_url":"https://api.github.com/users/surveyservice/repos","events_url":"https://api.github.com/users/surveyservice/events{/privacy}","received_events_url":"https://api.github.com/users/surveyservice/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T18:57:25Z","updated_at":"2019-01-18T18:57:25Z","author_association":"NONE","body":"there is a file called `apache.bintray.com_couchdb-deb_dists_bionic_Release`\r\n\r\nI put its contents here in [this gist](https://gist.github.com/surveyservice/20a4a36202c67a0efc31d6b28cb3adaf)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455651100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455654628","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455654628","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455654628,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1NDYyOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:08:23Z","updated_at":"2019-01-18T19:08:49Z","author_association":"MEMBER","body":"@surveyservice can you confirm this is an `amd64` host, not `i386` or `armhf` or `aarch64` or other? CouchDB only supplies 64-bit `amd64` (`x86_64`) packages at this time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455654628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455655266","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455655266","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455655266,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1NTI2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:10:21Z","updated_at":"2019-01-18T19:10:21Z","author_association":"MEMBER","body":"@StoicLoofah Same point as above - was your machine 32-bit (`i386`)? That would explain the absence of packages.\r\n\r\n@surveyservice Your output says this is a 32-bit install, sorry, we only provide 64-bit packages. You'll need to upgrade to a 64-bit processor, or install the 64-bit version of Ubuntu to get packages from us.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455655266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455656006","html_url":"https://github.com/apache/couchdb/pull/1844#issuecomment-455656006","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1844","id":455656006,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1NjAwNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:12:42Z","updated_at":"2019-01-18T19:12:42Z","author_association":"MEMBER","body":"Sorry. I've been updating the other PRs and it gets all weird. Soon as the partition limit PR is merged here in a bit I'll update this to be off master so that its not constantly getting all weird.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455656006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455657360","html_url":"https://github.com/apache/couchdb/issues/1554#issuecomment-455657360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1554","id":455657360,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1NzM2MA==","user":{"login":"garbados","id":883103,"node_id":"MDQ6VXNlcjg4MzEwMw==","avatar_url":"https://avatars.githubusercontent.com/u/883103?v=4","gravatar_id":"","url":"https://api.github.com/users/garbados","html_url":"https://github.com/garbados","followers_url":"https://api.github.com/users/garbados/followers","following_url":"https://api.github.com/users/garbados/following{/other_user}","gists_url":"https://api.github.com/users/garbados/gists{/gist_id}","starred_url":"https://api.github.com/users/garbados/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garbados/subscriptions","organizations_url":"https://api.github.com/users/garbados/orgs","repos_url":"https://api.github.com/users/garbados/repos","events_url":"https://api.github.com/users/garbados/events{/privacy}","received_events_url":"https://api.github.com/users/garbados/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:17:17Z","updated_at":"2019-01-18T19:57:07Z","author_association":"CONTRIBUTOR","body":"I wrote up a [gist](https://gist.github.com/garbados/dd698bc835bf6f0df0552c4edff6eb56) describing a possible `/{db}/_update` endpoint for facilitating Mango-based VDUs, based on the discussion in this thread. I based the `transform` syntax on this [secret update syntax](https://github.com/apache/couchdb/blob/master/src/mango/src/mango_doc.erl#L134-L159) in the Mango source. The `transform` syntax could also be dropped from the proposal entirely, as it adds a great deal of extra work over simply validating an update.\r\n\r\nWhat do y'all think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455657360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455659819","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455659819","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455659819,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY1OTgxOQ==","user":{"login":"surveyservice","id":46577261,"node_id":"MDQ6VXNlcjQ2NTc3MjYx","avatar_url":"https://avatars.githubusercontent.com/u/46577261?v=4","gravatar_id":"","url":"https://api.github.com/users/surveyservice","html_url":"https://github.com/surveyservice","followers_url":"https://api.github.com/users/surveyservice/followers","following_url":"https://api.github.com/users/surveyservice/following{/other_user}","gists_url":"https://api.github.com/users/surveyservice/gists{/gist_id}","starred_url":"https://api.github.com/users/surveyservice/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surveyservice/subscriptions","organizations_url":"https://api.github.com/users/surveyservice/orgs","repos_url":"https://api.github.com/users/surveyservice/repos","events_url":"https://api.github.com/users/surveyservice/events{/privacy}","received_events_url":"https://api.github.com/users/surveyservice/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:25:42Z","updated_at":"2019-01-18T19:25:42Z","author_association":"NONE","body":"@wohali Well that certainly explains it... thoroughly misjudged the machine I'm working with... thank you for your help and sorry for wasting your time...\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455659819/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455661358","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-455661358","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":455661358,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY2MTM1OA==","user":{"login":"StoicLoofah","id":1123311,"node_id":"MDQ6VXNlcjExMjMzMTE=","avatar_url":"https://avatars.githubusercontent.com/u/1123311?v=4","gravatar_id":"","url":"https://api.github.com/users/StoicLoofah","html_url":"https://github.com/StoicLoofah","followers_url":"https://api.github.com/users/StoicLoofah/followers","following_url":"https://api.github.com/users/StoicLoofah/following{/other_user}","gists_url":"https://api.github.com/users/StoicLoofah/gists{/gist_id}","starred_url":"https://api.github.com/users/StoicLoofah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StoicLoofah/subscriptions","organizations_url":"https://api.github.com/users/StoicLoofah/orgs","repos_url":"https://api.github.com/users/StoicLoofah/repos","events_url":"https://api.github.com/users/StoicLoofah/events{/privacy}","received_events_url":"https://api.github.com/users/StoicLoofah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:30:41Z","updated_at":"2019-01-18T19:30:41Z","author_association":"NONE","body":"@wohali confirmed that I am on a 64-bit machine\r\n\r\n```\r\nme@server:~$ uname -a\r\nLinux ... SMP PREEMPT Mon Dec 10 18:25:47 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n\r\nMy `/var/lib/apt/lists/apache.bintray.com_couchdb-deb_dists_bionic_Release` matches https://gist.github.com/surveyservice/20a4a36202c67a0efc31d6b28cb3adaf\r\n\r\nAlso \r\n\r\n```\r\nme@server:~$ apt policy couchdb\r\ncouchdb:\r\n  Installed: (none)\r\n  Candidate: (none)\r\n  Version table:\r\n```\r\n\r\nSince @surveyservice also mentioned it, I also did upgrade from 14.04 to 18.04 via 16.04 within the past month as well","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455661358/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455664067","html_url":"https://github.com/apache/couchdb/pull/1844#issuecomment-455664067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1844","id":455664067,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY2NDA2Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T19:39:57Z","updated_at":"2019-01-18T19:39:57Z","author_association":"MEMBER","body":"Fixed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455664067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455692463","html_url":"https://github.com/apache/couchdb/pull/1684#issuecomment-455692463","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1684","id":455692463,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTY5MjQ2Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T21:26:03Z","updated_at":"2019-01-18T21:26:03Z","author_association":"MEMBER","body":"Whoops. PRs into PRs are weird.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455692463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455741458","html_url":"https://github.com/apache/couchdb/pull/1865#issuecomment-455741458","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1865","id":455741458,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTc0MTQ1OA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-19T02:26:01Z","updated_at":"2019-01-19T02:26:01Z","author_association":"CONTRIBUTOR","body":"thanks Joan @wohali for reminder. Will follow later.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455741458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455751952","html_url":"https://github.com/apache/couchdb/issues/1554#issuecomment-455751952","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1554","id":455751952,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTc1MTk1Mg==","user":{"login":"garbados","id":883103,"node_id":"MDQ6VXNlcjg4MzEwMw==","avatar_url":"https://avatars.githubusercontent.com/u/883103?v=4","gravatar_id":"","url":"https://api.github.com/users/garbados","html_url":"https://github.com/garbados","followers_url":"https://api.github.com/users/garbados/followers","following_url":"https://api.github.com/users/garbados/following{/other_user}","gists_url":"https://api.github.com/users/garbados/gists{/gist_id}","starred_url":"https://api.github.com/users/garbados/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garbados/subscriptions","organizations_url":"https://api.github.com/users/garbados/orgs","repos_url":"https://api.github.com/users/garbados/repos","events_url":"https://api.github.com/users/garbados/events{/privacy}","received_events_url":"https://api.github.com/users/garbados/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-19T05:41:48Z","updated_at":"2019-01-19T05:41:48Z","author_association":"CONTRIBUTOR","body":"After digging into Mango's source and discussing this feature with folks, I think only one new method+endpoint is necessary to facilitate Mango VDUs: `POST /{db}/_update`, which acts much like `POST /{db}` but it applies the new doc to the first matching VDU. The `?use_index=...` query parameter can be used to force the use of a particular VDU, much like in `POST /{db}/_find`.\r\n\r\nVDUs in this case are Mango indexes with the `type` field set to `vdu`. Their form differs from a `\"type\": \"json\"` index in the following ways:\r\n\r\n- No `partial_filter_selector` since applying something at \"index time\" doesn't make sense for this context.\r\n- No `index.fields`, since there is no indexing involved in a VDU.\r\n- The field `index.guard` contains a selector which checks if the VDU applies to a given document. Documents which do not pass this selector are not affected by this VDU.\r\n- The field `index.condition` contains a selector which validates the document against the VDU. The VDU will reject documents which pass its guard but not its condition.\r\n- If an update selector syntax is ever developed or implemented, an `index.action` or `index.transform` field could be used to apply them to documents which pass both the guard and the condition.\r\n\r\nI suggest this approach because `mango_idx.erl` already contains facilities for supporting new types of indexes, making it much easier to develop a new type of index than to reimplement all the `/{db}/_index` handlers for a new endpoint.\r\n\r\nVDU selectors in this formulation can use string substitution to access `$userCtx` and `$secObj`. Accessing `$oldDoc` requires a fabric call, which extends the window for conflicts to appear, so I would be inclined to permit only `index.condition` to access it so as to minimize which updates can create lengthy conflict windows.\r\n\r\nFor example:\r\n\r\n```json\r\n{\r\n  \"index\": {\r\n    \"guard\": { \"type\": \"article\" },\r\n    \"condition\": {\r\n      \"name\": { \"$in\": \"$secObj.members.names\" },\r\n      \"$or\": {\r\n        \"$not\": { \"$exists\": \"$oldDoc.author\" },\r\n        \"author\": { \"$eq\": \"$oldDoc.author\" }\r\n      }\r\n    }\r\n  },\r\n  \"type\": \"vdu\"\r\n}\r\n```\r\n\r\nDoes that make sense? Seem reasonable?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455751952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455917727","html_url":"https://github.com/apache/couchdb/issues/1053#issuecomment-455917727","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1053","id":455917727,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTkxNzcyNw==","user":{"login":"pealthoff","id":4707333,"node_id":"MDQ6VXNlcjQ3MDczMzM=","avatar_url":"https://avatars.githubusercontent.com/u/4707333?v=4","gravatar_id":"","url":"https://api.github.com/users/pealthoff","html_url":"https://github.com/pealthoff","followers_url":"https://api.github.com/users/pealthoff/followers","following_url":"https://api.github.com/users/pealthoff/following{/other_user}","gists_url":"https://api.github.com/users/pealthoff/gists{/gist_id}","starred_url":"https://api.github.com/users/pealthoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pealthoff/subscriptions","organizations_url":"https://api.github.com/users/pealthoff/orgs","repos_url":"https://api.github.com/users/pealthoff/repos","events_url":"https://api.github.com/users/pealthoff/events{/privacy}","received_events_url":"https://api.github.com/users/pealthoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T00:36:15Z","updated_at":"2019-01-21T00:36:15Z","author_association":"CONTRIBUTOR","body":"> @wohali I am still getting same error. Same meaning without providing --login and --password it doesn't work, and the password may need to be presented in a different manner.\r\n> \r\n> ```\r\n> # /opt/couchdb/bin/couchup replicate -a --login admin --password whateverisadminpassword\r\n> Starting replication for configuration...\r\n> Traceback (most recent call last):\r\n>   File \"/opt/couchdb/bin/couchup\", line 508, in <module>\r\n>     main(sys.argv)\r\n>   File \"/opt/couchdb/bin/couchup\", line 502, in main\r\n>     args.func(args)\r\n>   File \"/opt/couchdb/bin/couchup\", line 223, in _replicate\r\n>     auth = 'Basic ' + base64.b64encode(':'.join(args['creds']))\r\n>   File \"/usr/lib/python3.6/base64.py\", line 58, in b64encode\r\n>     encoded = binascii.b2a_base64(s, newline=False)\r\n> TypeError: a bytes-like object is required, not 'str'\r\n> ```\r\n\r\n@SohamChakraborty\r\n\r\nI was having the same problem, and correct this by using python2 to run the couchup.\r\nTo run you will have to correct an error on the couchup script, the alternative to python2 (inside the exept) must be:\r\n\r\n> from urllib import quote","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455917727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455925547","html_url":"https://github.com/apache/couchdb/pull/1867#issuecomment-455925547","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1867","id":455925547,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTkyNTU0Nw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T01:54:07Z","updated_at":"2019-01-21T01:54:07Z","author_association":"CONTRIBUTOR","body":"thanks Paul","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455925547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455930291","html_url":"https://github.com/apache/couchdb/pull/1868#issuecomment-455930291","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1868","id":455930291,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTkzMDI5MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T02:32:04Z","updated_at":"2019-01-21T02:32:04Z","author_association":"MEMBER","body":"@pealthoff Thanks, we'll take this, but keep in mind we don't support Python 2 for the script anymore, see line 1:\r\n\r\nhttps://github.com/apache/couchdb/blob/master/rel/overlay/bin/couchup#L1\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455930291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455976599","html_url":"https://github.com/apache/couchdb/pull/1669#issuecomment-455976599","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1669","id":455976599,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTk3NjU5OQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T07:45:23Z","updated_at":"2019-01-21T07:45:23Z","author_association":"MEMBER","body":"Closing since this isn't needed anymore.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/455976599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456021304","html_url":"https://github.com/apache/couchdb/issues/1554#issuecomment-456021304","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1554","id":456021304,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjAyMTMwNA==","user":{"login":"mikerhodes","id":453210,"node_id":"MDQ6VXNlcjQ1MzIxMA==","avatar_url":"https://avatars.githubusercontent.com/u/453210?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerhodes","html_url":"https://github.com/mikerhodes","followers_url":"https://api.github.com/users/mikerhodes/followers","following_url":"https://api.github.com/users/mikerhodes/following{/other_user}","gists_url":"https://api.github.com/users/mikerhodes/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerhodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerhodes/subscriptions","organizations_url":"https://api.github.com/users/mikerhodes/orgs","repos_url":"https://api.github.com/users/mikerhodes/repos","events_url":"https://api.github.com/users/mikerhodes/events{/privacy}","received_events_url":"https://api.github.com/users/mikerhodes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T10:19:00Z","updated_at":"2019-01-21T10:19:00Z","author_association":"CONTRIBUTOR","body":"Good to see some movement here, and nice write up.\r\n\r\nIt feels a little odd to overload the term `index` in this way -- in particular because, as you say, \"there is no indexing involved\" 😄 . I'm not sure this UX is going to work out, it feels like putting a VDU as a sibling to a `map` function. In many ways, this is unrelated to Mango querying so I'd say that, like `/_update` is new, a new `/_vdus` or whatever endpoint that's a parallel to `/_index` is more appropriate.\r\n\r\nAnother reason to avoid overloading the index term is that the VDU index section has a very different schema to a normal Mango index section too, which makes writing client libraries pretty tough (especially those libraries that map JSON to concrete types, which is a primary utility of a client library over raw HTTP calls IMO).\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456021304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456102915","html_url":"https://github.com/apache/couchdb/issues/1584#issuecomment-456102915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1584","id":456102915,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEwMjkxNQ==","user":{"login":"danieltaylor-nz","id":3458851,"node_id":"MDQ6VXNlcjM0NTg4NTE=","avatar_url":"https://avatars.githubusercontent.com/u/3458851?v=4","gravatar_id":"","url":"https://api.github.com/users/danieltaylor-nz","html_url":"https://github.com/danieltaylor-nz","followers_url":"https://api.github.com/users/danieltaylor-nz/followers","following_url":"https://api.github.com/users/danieltaylor-nz/following{/other_user}","gists_url":"https://api.github.com/users/danieltaylor-nz/gists{/gist_id}","starred_url":"https://api.github.com/users/danieltaylor-nz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danieltaylor-nz/subscriptions","organizations_url":"https://api.github.com/users/danieltaylor-nz/orgs","repos_url":"https://api.github.com/users/danieltaylor-nz/repos","events_url":"https://api.github.com/users/danieltaylor-nz/events{/privacy}","received_events_url":"https://api.github.com/users/danieltaylor-nz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T15:01:24Z","updated_at":"2019-01-21T15:01:24Z","author_association":"NONE","body":"We are having trouble with our installation of CouchDB and this ticket is the only one I can find with the same error message. We are having several crashes per day with errors like so:\r\n```\r\n[error] 2019-01-21T02:36:46.517675Z nonode@nohost <0.27332.3> -------- CRASH REPORT Process (<0.27332.3>) with 0 neighbors exited with reason: killed at gen_server:terminate/7(line:812) <= proc_lib:init_p_do_apply/3(line:247); initial_call: {couch_index_updater,init,['Argument__1']}, ancestors: [<0.27329.3>,<0.27328.3>], messages: [], links: [], dictionary: [], trap_exit: true, status: running, heap_size: 376, stack_size: 27, reductions: 126\r\n```\r\n\r\n```\r\n[error] 2019-01-21T11:44:36.456408Z nonode@nohost <0.29674.15> -------- CRASH REPORT Process (<0.29674.15>) with 0 neighbors exited with reason: killed at gen_server:terminate/7(line:812) <= proc_lib:init_p_do_apply/3(line:247); initial_call: {couch_index_compactor,init,['Argument__1']}, ancestors: [<0.29671.15>,<0.29670.15>], messages: [], links: [], dictionary: [], trap_exit: true, status: running, heap_size: 376, stack_size: 27, reductions: 126\r\n```\r\n\r\nI would like to know if based on this, someone can give us some feedback. We are running inside a docker container on a GCE instance 2 vCPUs, 3.75 GB memory, AND CPU usage is always about 3% before a crash. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456102915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456126998","html_url":"https://github.com/apache/couchdb/issues/1775#issuecomment-456126998","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1775","id":456126998,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEyNjk5OA==","user":{"login":"sblaisot","id":2768193,"node_id":"MDQ6VXNlcjI3NjgxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/2768193?v=4","gravatar_id":"","url":"https://api.github.com/users/sblaisot","html_url":"https://github.com/sblaisot","followers_url":"https://api.github.com/users/sblaisot/followers","following_url":"https://api.github.com/users/sblaisot/following{/other_user}","gists_url":"https://api.github.com/users/sblaisot/gists{/gist_id}","starred_url":"https://api.github.com/users/sblaisot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sblaisot/subscriptions","organizations_url":"https://api.github.com/users/sblaisot/orgs","repos_url":"https://api.github.com/users/sblaisot/repos","events_url":"https://api.github.com/users/sblaisot/events{/privacy}","received_events_url":"https://api.github.com/users/sblaisot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T16:16:24Z","updated_at":"2019-01-21T16:16:24Z","author_association":"CONTRIBUTOR","body":"I vote for this issue. I have the exact same problem than @regner in #1579 on a server runnng 2.3.0 with about 10k databases and the following configuration for compaction daemon:\r\n\r\n```\r\ncheck_interval = 300\r\nmin_file_size = 10485760\r\nsnooze_period = 1\r\n_default = [{db_fragmentation, \"50%\"}, {view_fragmentation, \"40%\"}, {from, \"20:00\"}, {to, \"08:00\"}]\r\n```\r\n\r\nsome databases, and especially `_global_changes` are never compacted so disk use increases until I have to manually trigger a compaction on `_global_changes` with the `_compact` endpoint, which free dozens of gigabytes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456126998/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456138368","html_url":"https://github.com/apache/couchdb/pull/1766#issuecomment-456138368","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1766","id":456138368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjEzODM2OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T16:52:35Z","updated_at":"2019-01-21T16:52:35Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456138368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456161458","html_url":"https://github.com/apache/couchdb/issues/1857#issuecomment-456161458","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1857","id":456161458,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjE2MTQ1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T18:20:00Z","updated_at":"2019-01-21T18:20:00Z","author_association":"MEMBER","body":"We just heard from @dch that 21.2.3 seems to have fixed ERL-827. So it will be sufficient to blacklist 21.2, 21.2.1, and 21.2.2.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456161458/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456175098","html_url":"https://github.com/apache/couchdb/issues/1584#issuecomment-456175098","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1584","id":456175098,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjE3NTA5OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T19:16:35Z","updated_at":"2019-01-21T19:16:35Z","author_association":"MEMBER","body":"@danieltaylor-nz This is not the same issue.\r\n\r\nCouchDB will in normal operation generate some \"CRASH REPORTs\" in the logfiles. Unless you are having client issues, this is not a problem.\r\n\r\nIf CouchDB is actually crashing, forcing a process restart, open a new ticket and we'll investigate.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456175098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456194675","html_url":"https://github.com/apache/couchdb/issues/1863#issuecomment-456194675","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1863","id":456194675,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjE5NDY3NQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T20:47:02Z","updated_at":"2019-01-21T20:47:02Z","author_association":"MEMBER","body":"@wohali So I've checked it and I was wrong, there are a proper type casting from binary to list in `etag_match`. I've added [a new elixir test](https://github.com/apache/couchdb/pull/1869) to confirm it works as expected","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456194675/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456284794","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-456284794","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":456284794,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjI4NDc5NA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T06:23:56Z","updated_at":"2019-01-22T06:23:56Z","author_association":"CONTRIBUTOR","body":"@rnewson I'm curious whether you think having the same salt configured on all cluster nodes is somehow a security problem? Since we already do something similar with `[couch_httpd_auth] secret` it seems ok to me, but I'd love another opinion.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456284794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456447533","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-456447533","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":456447533,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjQ0NzUzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T15:44:39Z","updated_at":"2019-01-22T15:44:39Z","author_association":"MEMBER","body":"@jaydoane I'm not @rnewson but I can tell you that if the same salt on all nodes isn't set correctly, Fauxton behind a load balancer breaks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456447533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456465331","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-456465331","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":456465331,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjQ2NTMzMQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T16:29:43Z","updated_at":"2019-01-22T16:29:43Z","author_association":"CONTRIBUTOR","body":"@wohali I was assuming I needed either an explicit `+1` or a review approval to merge. Please LMK if that's not correct. Also, happy to merge without Bob's review.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456465331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280565735","html_url":"https://github.com/apache/couchdb/issues/4211#issuecomment-1280565735","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4211","id":1280565735,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1NjU3MzU=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T17:29:10Z","updated_at":"2019-01-22T17:29:10Z","author_association":"MEMBER","body":"@mikeymckay again, the problem is one of volume and type of load. CouchDB performance is very load-dependent. You need a very different setup if you're doing 100s of simultaneous filtered replications vs. 1000s of PUTs per second vs. 1000s of GETs per second on views whose definitions update semi-often.\r\n\r\nMultiple servers is more about guaranteeing availability when a node fails (and nodes WILL fail), though obviously the aggregate bandwidth of 3 nodes is greater than that of a single node (assuming the load balancer ahead of the cluster is capable of handling that bandwidth).\r\n\r\nIt's also highly recommended to terminate SSL ahead of CouchDB at the load balancer, which could be haproxy running on the same machine, sure. Erlang keeps getting SSL wrong- in fact, we've just had to blacklist Erlang versions 21.2 through 21.2.2 because SSL is completely bustsed in those versions. (This has happened multiple times in the past.)\r\n\r\nSo I guess we're looking at multiple best configuration settings here for low-spec HW, depending on whether you're running single-node or cluster, and depending on whether you're replication-heavy, view-heavy, write-heavy, or some combination of the above.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280565735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456497955","html_url":"https://github.com/apache/couchdb/pull/1804#issuecomment-456497955","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1804","id":456497955,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjQ5Nzk1NQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T17:56:53Z","updated_at":"2019-01-22T17:56:53Z","author_association":"MEMBER","body":"Also, to force the bug, the skip would have to be set to `Q * $max_rows` because the current apply_limit throws away the skip bump to the limit we'd end up returning 0 rows when there was actual data to return.\r\n\r\nThat is of course an unlikely scenario and goes against the general recommendation to not use a large skip value but it'd still be an incorrect response if someone did get into that situation where maybe `$max_rows` was set low enough to be not super crazy.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456497955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456554453","html_url":"https://github.com/apache/couchdb/pull/1870#issuecomment-456554453","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1870","id":456554453,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU1NDQ1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T20:38:52Z","updated_at":"2019-01-22T20:38:52Z","author_association":"MEMBER","body":"+1, PR to blacklist to follow","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456554453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456564019","html_url":"https://github.com/apache/couchdb/pull/1871#issuecomment-456564019","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1871","id":456564019,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU2NDAxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T21:08:54Z","updated_at":"2019-01-22T22:36:39Z","author_association":"MEMBER","body":"So we have a problem. Travis only has `20.3.8`, `20.3.8.1` and `20.3.8.5` available for testing. They don't actually have `20.3.8.11` or higher. (Inventory: https://s3.amazonaws.com/travis-otp-releases)\r\n\r\nOptions:\r\n* Get Travis admins to provide 20.3.8.18.\r\n* Detect that we're in a Travis CI run and skip the version check (see nNck's comment below)\r\n* Force Travis to use kerl to build 20.3.8.11+, which would happen every build. (Big slowdown.)\r\n* Install 20.3.8.18 from packages.erlang-solutions.com in `.travis.yml`. (Fiddly `.travis.yml` work.)\r\n* Print a warning at compile time instead of a hard `halt`.\r\n* Print a warning instead of a hard `halt`, but only when we match against `20.3.8`\r\n* Don't have Travis test against `20.3.8` anymore, just `19.3` and `21.2.3` (or newer)\r\n\r\n@davisp @nickva @janl what do you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456564019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456566501","html_url":"https://github.com/apache/couchdb/pull/1804#issuecomment-456566501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1804","id":456566501,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU2NjUwMQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T21:16:41Z","updated_at":"2019-01-22T21:16:41Z","author_association":"MEMBER","body":"Turns out fabric_util was too far up. However we can just move it up one call so the RPC workers don't call it again and that fixes the issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456566501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456566601","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-456566601","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":456566601,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU2NjYwMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T21:16:58Z","updated_at":"2019-01-22T21:16:58Z","author_association":"MEMBER","body":"You're right, you need a formal +1, and I'm selecting out of the ability to review this patch because my Erlang-fu is presently too weak. I was only commenting on the salt bit :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456566601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456587268","html_url":"https://github.com/apache/couchdb/pull/1871#issuecomment-456587268","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1871","id":456587268,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjU4NzI2OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T22:25:51Z","updated_at":"2019-01-22T22:25:51Z","author_association":"CONTRIBUTOR","body":"Maybe don't halt on 20.3.8 and print the warning if running in Travis? There is `TRAVIS=true` environment variable we can check I think. With some comment saying \"when/if 20.3.8.11 + becomes available we'll make it halt\". ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456587268/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456604432","html_url":"https://github.com/apache/couchdb/pull/1871#issuecomment-456604432","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1871","id":456604432,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYwNDQzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T23:24:51Z","updated_at":"2019-01-22T23:44:38Z","author_association":"MEMBER","body":"I opted to wrap the `halt` call in a check for the `TRAVIS` envvar. We should be smart enough to not put a bad version number intentionally into `.travis.yml`.\r\n\r\n`./configure` locally fails on `20.3.8.6`, `20.3`, and `21.2`.\r\n`./configure` locally passes on `19.3.6.8`, `20.3.8.18` and `21.2.3`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456604432/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456613829","html_url":"https://github.com/apache/couchdb/pull/1871#issuecomment-456613829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1871","id":456613829,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYxMzgyOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T00:05:09Z","updated_at":"2019-01-23T00:06:50Z","author_association":"CONTRIBUTOR","body":"I think can simplify the test with:\r\n\r\n```\r\ncase VerList of\r\n    [20 | _] = V20 when V20 < [20, 3, 8, 11] -> NotSupported(VerString);\r\n    [20 | _] = V20 when V20 >=  [20, 3, 8, 11] -> ok;\r\n    [21, 2] -> NotSupported(VerString);\r\n    [21, 2, N | _] when N < 3 -> NotSupported(VerString);\r\n    _ -> ok\r\nend.\r\n```\r\n\r\nThis would take care of 20.2.9.9 type versions. What we are saying there if it's a 20 version, anything less than 20.3.8.11 is no good. Otherwise (>=) it's ok.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456613829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456862512","html_url":"https://github.com/apache/couchdb/issues/1554#issuecomment-456862512","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1554","id":456862512,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Njg2MjUxMg==","user":{"login":"garbados","id":883103,"node_id":"MDQ6VXNlcjg4MzEwMw==","avatar_url":"https://avatars.githubusercontent.com/u/883103?v=4","gravatar_id":"","url":"https://api.github.com/users/garbados","html_url":"https://github.com/garbados","followers_url":"https://api.github.com/users/garbados/followers","following_url":"https://api.github.com/users/garbados/following{/other_user}","gists_url":"https://api.github.com/users/garbados/gists{/gist_id}","starred_url":"https://api.github.com/users/garbados/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garbados/subscriptions","organizations_url":"https://api.github.com/users/garbados/orgs","repos_url":"https://api.github.com/users/garbados/repos","events_url":"https://api.github.com/users/garbados/events{/privacy}","received_events_url":"https://api.github.com/users/garbados/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T16:11:42Z","updated_at":"2019-01-23T16:11:42Z","author_association":"CONTRIBUTOR","body":"That makes sense, that overloading `/_index` with a process that doesn't involve indexing does indeed not make sense. Thanks for that reality check :)\r\n\r\nI still like the guard-condition syntax for the VDU, where the guard and condition are selectors with different expectations and abilities. I'll go for another few dives into the source and see if I can't figure out a PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456862512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456868252","html_url":"https://github.com/apache/couchdb/issues/1554#issuecomment-456868252","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1554","id":456868252,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Njg2ODI1Mg==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T16:26:20Z","updated_at":"2019-01-23T16:26:20Z","author_association":"MEMBER","body":"Diana, this is really cool. If you need some help understanding the code, let me know. I’m happy to help.\n\n\n________________________________\nFrom: Diana Thayer <notifications@github.com>\nSent: Wednesday, January 23, 2019 6:11 PM\nTo: apache/couchdb\nCc: Subscribed\nSubject: Re: [apache/couchdb] Additional Mango-based update handler / VDU functionality (#1554)\n\n\nThat makes sense, that overloading /_index with a process that doesn't involve indexing does indeed not make sense. Thanks for that reality check :)\n\nI still like the guard-condition syntax for the VDU, where the guard and condition are selectors with different expectations and abilities. I'll go for another few dives into the source and see if I can't figure out a PR.\n\n—\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/1554#issuecomment-456862512>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAK9AsNusxhLYYBUvmFubc5WpW1MulBUks5vGIm_gaJpZM4V5aai>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456868252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456918811","html_url":"https://github.com/apache/couchdb/pull/1872#issuecomment-456918811","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1872","id":456918811,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjkxODgxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T18:42:39Z","updated_at":"2019-01-23T18:42:39Z","author_association":"MEMBER","body":"Because we can't test this on a branch, I'm going to merge it as soon as the Travis run completes. The change is uncontroversial.\r\n\r\nI'll then mention this on the development mailing list.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/456918811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457132430","html_url":"https://github.com/apache/couchdb/pull/1873#issuecomment-457132430","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1873","id":457132430,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzEzMjQzMA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T09:44:19Z","updated_at":"2019-01-24T09:44:19Z","author_association":"CONTRIBUTOR","body":"+1\r\n```\r\njiangphs-MacBook-Pro-2:elixir jiangph$ mix test --trace test/partition_design_docs_test.exs\r\nExcluding tags: [pending: true]\r\n\r\n\r\nPartitionDesignDocsTest\r\n  * test /_partition/:pk/_design/doc 404 (717.2ms)\r\n\r\nPartitionHelpers\r\n\r\n\r\nFinished in 0.9 seconds\r\n1 test, 0 failures\r\n\r\nRandomized with seed 592919\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457132430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457185270","html_url":"https://github.com/apache/couchdb/issues/1559#issuecomment-457185270","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1559","id":457185270,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzE4NTI3MA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T12:50:32Z","updated_at":"2019-01-24T12:50:32Z","author_association":"MEMBER","body":"Heads-up: proof of concept work on this is progressing on this with a team at work, progress is somewhat slow as we do this as a side and training-project. I just wanted to let the project know in case someone else wants to work on this as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457185270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457229368","html_url":"https://github.com/apache/couchdb/issues/1781#issuecomment-457229368","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1781","id":457229368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzIyOTM2OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T15:05:12Z","updated_at":"2019-01-24T15:05:12Z","author_association":"MEMBER","body":"the _cluster_setup endpoint expects that nodes have no admin users set at all.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457229368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457229576","html_url":"https://github.com/apache/couchdb/issues/1775#issuecomment-457229576","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1775","id":457229576,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzIyOTU3Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T15:05:45Z","updated_at":"2019-01-24T15:05:45Z","author_association":"MEMBER","body":"@sblaisot we don’t take votes here, but patches are always welcome :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457229576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457231023","html_url":"https://github.com/apache/couchdb/issues/1775#issuecomment-457231023","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1775","id":457231023,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzIzMTAyMw==","user":{"login":"sblaisot","id":2768193,"node_id":"MDQ6VXNlcjI3NjgxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/2768193?v=4","gravatar_id":"","url":"https://api.github.com/users/sblaisot","html_url":"https://github.com/sblaisot","followers_url":"https://api.github.com/users/sblaisot/followers","following_url":"https://api.github.com/users/sblaisot/following{/other_user}","gists_url":"https://api.github.com/users/sblaisot/gists{/gist_id}","starred_url":"https://api.github.com/users/sblaisot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sblaisot/subscriptions","organizations_url":"https://api.github.com/users/sblaisot/orgs","repos_url":"https://api.github.com/users/sblaisot/repos","events_url":"https://api.github.com/users/sblaisot/events{/privacy}","received_events_url":"https://api.github.com/users/sblaisot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T15:09:45Z","updated_at":"2019-01-24T15:09:57Z","author_association":"CONTRIBUTOR","body":"I know but knowing how much users are impacted can change priorization ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457231023/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457275190","html_url":"https://github.com/apache/couchdb/issues/1837#issuecomment-457275190","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1837","id":457275190,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzI3NTE5MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T17:03:14Z","updated_at":"2019-01-24T17:03:14Z","author_association":"MEMBER","body":"This is resolved - you need a minimum of `21.2.3` for the `21.2` series.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457275190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457279653","html_url":"https://github.com/apache/couchdb/issues/1799#issuecomment-457279653","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1799","id":457279653,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzI3OTY1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-24T17:15:51Z","updated_at":"2019-01-24T17:15:51Z","author_association":"MEMBER","body":"@jiangphcn We'd like to get 2.3.1 out very shortly - any chance of getting to this one soonish? Should be simple.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457279653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457429224","html_url":"https://github.com/apache/couchdb/issues/1799#issuecomment-457429224","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1799","id":457429224,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzQyOTIyNA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T02:06:10Z","updated_at":"2019-01-25T02:06:10Z","author_association":"CONTRIBUTOR","body":"hey @wohali i will follow in coming days (there are some other stuff in parallel).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457429224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457472961","html_url":"https://github.com/apache/couchdb/issues/1781#issuecomment-457472961","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1781","id":457472961,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzQ3Mjk2MQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T06:45:32Z","updated_at":"2019-01-25T06:45:32Z","author_association":"CONTRIBUTOR","body":"Hmm, but the [docs](http://docs.couchdb.org/en/latest/setup/cluster.html#preparing-couchdb-nodes-to-be-joined-into-a-cluster) say \"The settings we recommend you set now, before joining the nodes into a cluster, are: ... At least one server administrator user (and password)\"\r\n\r\nAlso, [these docs](http://docs.couchdb.org/en/latest/setup/cluster.html#the-cluster-setup-api) show admin creds being used e.g. `http://admin:password@127.0.0.1:5984/_cluster_setup`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457472961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457537118","html_url":"https://github.com/apache/couchdb/issues/1334#issuecomment-457537118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1334","id":457537118,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzUzNzExOA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T11:01:32Z","updated_at":"2019-01-25T11:01:32Z","author_association":"MEMBER","body":"Our current thinking is not moving to Chakra after all, and instead updating to latest SpiderMonkey after all.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457537118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457540427","html_url":"https://github.com/apache/couchdb/issues/1505#issuecomment-457540427","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1505","id":457540427,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU0MDQyNw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T11:14:21Z","updated_at":"2019-01-25T11:14:21Z","author_association":"MEMBER","body":"This needs review in light of the recent clustered purge feature, since that had the same issue to work with","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457540427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457541592","html_url":"https://github.com/apache/couchdb/issues/1517#issuecomment-457541592","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1517","id":457541592,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU0MTU5Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T11:18:48Z","updated_at":"2019-01-25T11:18:48Z","author_association":"MEMBER","body":"@nickva is working on a shard splitting proposal which would be the technical foundation of this,","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457541592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457542197","html_url":"https://github.com/apache/couchdb/issues/1522#issuecomment-457542197","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1522","id":457542197,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU0MjE5Nw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T11:21:30Z","updated_at":"2019-01-25T11:21:30Z","author_association":"MEMBER","body":"let’s get the test suite down before considering this again, closing in the meantime,","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457542197/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457544329","html_url":"https://github.com/apache/couchdb/issues/1537#issuecomment-457544329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1537","id":457544329,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU0NDMyOQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T11:29:41Z","updated_at":"2019-01-25T11:29:41Z","author_association":"MEMBER","body":"I currently don’t see anyone working on this in the near or even far future. Closing until a champion brings up an RFC","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457544329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457579894","html_url":"https://github.com/apache/couchdb/issues/1334#issuecomment-457579894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1334","id":457579894,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzU3OTg5NA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T13:55:28Z","updated_at":"2019-01-25T13:55:28Z","author_association":"MEMBER","body":"I wonder about the rationale for this switch. We know ChakraCore has additional use cases within Microsoft that are actually better-aligned to the needs of CouchDB than Edge. Are the current capabilities of SpiderMonkey up to par with Chakra, or is this really a hedge against Microsoft moving away from Chakra altogether?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457579894/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457734869","html_url":"https://github.com/apache/couchdb/pull/1783#issuecomment-457734869","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1783","id":457734869,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzczNDg2OQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T21:26:34Z","updated_at":"2019-01-25T21:26:34Z","author_association":"CONTRIBUTOR","body":"Full regression  + new tests passed. I kept the existing functionality intact.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457734869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457737014","html_url":"https://github.com/apache/couchdb/issues/1334#issuecomment-457737014","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1334","id":457737014,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzczNzAxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T21:33:27Z","updated_at":"2019-01-25T21:33:27Z","author_association":"MEMBER","body":"@kocolosk It's a hedge against Chakra being dropped altogether, yes. Messaging from Microsoft is unclear and discouraging; there is also very little involvement in its development outside of MS. So: should MS switch to V8 or something else for CosmosDB - Chakra would be done for.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457737014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457769479","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-457769479","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":457769479,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Nzc2OTQ3OQ==","user":{"login":"natevw","id":265902,"node_id":"MDQ6VXNlcjI2NTkwMg==","avatar_url":"https://avatars.githubusercontent.com/u/265902?v=4","gravatar_id":"","url":"https://api.github.com/users/natevw","html_url":"https://github.com/natevw","followers_url":"https://api.github.com/users/natevw/followers","following_url":"https://api.github.com/users/natevw/following{/other_user}","gists_url":"https://api.github.com/users/natevw/gists{/gist_id}","starred_url":"https://api.github.com/users/natevw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natevw/subscriptions","organizations_url":"https://api.github.com/users/natevw/orgs","repos_url":"https://api.github.com/users/natevw/repos","events_url":"https://api.github.com/users/natevw/events{/privacy}","received_events_url":"https://api.github.com/users/natevw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-25T23:25:35Z","updated_at":"2019-01-26T00:00:24Z","author_association":"NONE","body":"Fwiw, I'm seeing something quite similar on a view request under 2.3.0 (macOS application, running with project-specific vm.args and local.ini configuration). The database is `?q=1&n=1`, and note that it is a user database rather than a system one.\r\n\r\n```\r\n3:19:30 PM dev_db.1  |  [notice] 2019-01-25T23:19:30.658485Z dev_env-couchdb@localhost <0.29058.20> 066f90a8b8 localhost:4100 127.0.0.1 admin GET /my-db\r\n3:19:30 PM dev_db.1  |  >  /_design/my-app/_view/data_by_user_unit_and_seq?startkey=%5B%22alice%22%2C%22unit-9494675355963408%22%2C1342%5D&endkey=%5B%22ali\r\n3:19:30 PM dev_db.1  |  >  ce%22%2C%22unit-9494675355963408%22%2C%7B%7D%5D&include_docs=true&limit=4294967295 200 ok 3\r\n3:19:30 PM dev_web.1 |  POLL GOT null { total_rows: 296, offset: 292, rows: [] } for 1342\r\n3:19:31 PM dev_db.1  |  [error] 2019-01-25T23:19:31.030654Z dev_env-couchdb@localhost <0.25965.20> e181293c16 req_err(1125717067) unknown_error : normal\r\n3:19:31 PM dev_db.1  |      [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_req\r\n3:19:31 PM dev_db.1  |  >  uest_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n```\r\n\r\nIt does not happen every time the view is polled. In fact it seems to happen only ~~once,~~ [have now seen double error messages] a little while after whenever my middleware process gets force-restarted. (The CouchDB instance is *not* getting restarted very frequently.) The middleware process includes a continuous changes watcher via [fermata-couchdb's watchChanges helper](https://github.com/natevw/fermata-couchdb/blob/e728377ad9f70cab9d11f2be7222e050de218024/fermata-couchdb.js#L56) as well as a number of database/view calls.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457769479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457778998","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-457778998","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":457778998,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Nzc3ODk5OA==","user":{"login":"natevw","id":265902,"node_id":"MDQ6VXNlcjI2NTkwMg==","avatar_url":"https://avatars.githubusercontent.com/u/265902?v=4","gravatar_id":"","url":"https://api.github.com/users/natevw","html_url":"https://github.com/natevw","followers_url":"https://api.github.com/users/natevw/followers","following_url":"https://api.github.com/users/natevw/following{/other_user}","gists_url":"https://api.github.com/users/natevw/gists{/gist_id}","starred_url":"https://api.github.com/users/natevw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natevw/subscriptions","organizations_url":"https://api.github.com/users/natevw/orgs","repos_url":"https://api.github.com/users/natevw/repos","events_url":"https://api.github.com/users/natevw/events{/privacy}","received_events_url":"https://api.github.com/users/natevw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-26T00:18:47Z","updated_at":"2019-01-26T00:23:34Z","author_association":"NONE","body":"I think at least in my case these errors are simply a result of the client dropping its connection to CouchDB. I added some code to my middleware in support of a little experiment:\r\n\r\n* Each time my middleware starts, it randomly decides whether to fetch continuous changes.\r\n* I made sure to avoid any other requests to my middleware and therefore to CouchDB\r\n\r\nHere's a sample log:\r\n\r\n```\r\n4:04:33 PM dev_web.1 |  Starting child process with 'node middleware.js'\r\n4:04:34 PM dev_web.1 |  not monitoring changes\r\n4:04:34 PM dev_web.1 |  Listening on 4000, using backend http://localhost:4100/my-db\r\n\r\n4:04:54 PM dev_web.1 |  Program node middleware.js exited with code null\r\n4:04:54 PM dev_web.1 |  Starting child process with 'node middleware.js'\r\n4:04:54 PM dev_web.1 |  not monitoring changes\r\n4:04:54 PM dev_web.1 |  Listening on 4000, using backend http://localhost:4100/my-db\r\n\r\n4:05:14 PM dev_web.1 |  Program node middleware.js exited with code null\r\n4:05:14 PM dev_web.1 |  Starting child process with 'node middleware.js'\r\n4:05:15 PM dev_web.1 |  MONITORING CHANGES\r\n4:05:15 PM dev_web.1 |  Listening on 4000, using backend http://localhost:4100/my-db\r\n\r\n4:05:38 PM dev_web.1 |  Program node middleware.js exited with code null\r\n4:05:38 PM dev_web.1 |  Starting child process with 'node middleware.js'\r\n4:05:38 PM dev_web.1 |  MONITORING CHANGES\r\n4:05:38 PM dev_web.1 |  Listening on 4000, using backend http://localhost:4100/my-db\r\n4:05:44 PM dev_db.1  |  [error] 2019-01-26T00:05:44.996419Z dev_env-couchdb@localhost <0.13577.22> 04cdfa9352 req_err(1125717067) unknown_error : normal\r\n4:05:44 PM dev_db.1  |      [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_req\r\n4:05:44 PM dev_db.1  |  >  uest_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n\r\n4:08:09 PM dev_web.1 |  Program node middleware.js exited with code null\r\n4:08:09 PM dev_web.1 |  Starting child process with 'node middleware.js'\r\n4:08:09 PM dev_web.1 |  not monitoring changes\r\n4:08:10 PM dev_web.1 |  Listening on 4000, using backend http://localhost:4100/my-db\r\n4:08:17 PM dev_db.1  |  [error] 2019-01-26T00:08:17.562625Z dev_env-couchdb@localhost <0.13974.22> 0908a8896c req_err(1125717067) unknown_error : normal\r\n4:08:17 PM dev_db.1  |      [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_req\r\n4:08:17 PM dev_db.1  |  >  uest_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n\r\n4:16:32 PM dev_web.1 |  Program node middleware.js exited with code null\r\n4:16:32 PM dev_web.1 |  Starting child process with 'node middleware.js'\r\n4:16:32 PM dev_web.1 |  MONITORING CHANGES\r\n4:16:32 PM dev_web.1 |  Listening on 4000, using backend http://localhost:4100/my-db\r\n```\r\n\r\nEach time you see \"Program node middleware.js exited with code null\" was me killing the middleware process. I think the pattern's pretty clear.\r\n\r\n1. First restart shown (4:04:33) is ambiguous since the log doesn't include whether the *previous* run was monitoring or not, but note that that middleware instance — call it \"Process-1\" — does **not** monitor changes.\r\n2. There is no error after Process-1 is killed (at 4:04:54) and Process-2 is started (again **not** monitoring changes).\r\n3. There is no error after Process-2 is killed (at 4:05:15) and Process-3 is started. Note that Process-3 **does** monitor changes.\r\n4. After Process-3 is killed (at 4:05:38), there *is* an error shortly after (at 4:05:44). The new Process-4 **does** monitor changes.\r\n5. After Process-4 is killed (at 4:08:09) there is again an error shortly after (at 4:08:17). The new Process-5 does *not* monitor changes.\r\n6. After Process-5 is killed (at 4:16:32) there was no error logged (not within five minutes anyway…).\r\n\r\nPerhap's in the OP's case [their client library](https://github.com/go-kivik/kivik) is dropping its connection \"too quickly\" in the case of a 4xx response code from the server?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457778998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457781345","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-457781345","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":457781345,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Nzc4MTM0NQ==","user":{"login":"natevw","id":265902,"node_id":"MDQ6VXNlcjI2NTkwMg==","avatar_url":"https://avatars.githubusercontent.com/u/265902?v=4","gravatar_id":"","url":"https://api.github.com/users/natevw","html_url":"https://github.com/natevw","followers_url":"https://api.github.com/users/natevw/followers","following_url":"https://api.github.com/users/natevw/following{/other_user}","gists_url":"https://api.github.com/users/natevw/gists{/gist_id}","starred_url":"https://api.github.com/users/natevw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natevw/subscriptions","organizations_url":"https://api.github.com/users/natevw/orgs","repos_url":"https://api.github.com/users/natevw/repos","events_url":"https://api.github.com/users/natevw/events{/privacy}","received_events_url":"https://api.github.com/users/natevw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-26T00:34:27Z","updated_at":"2019-01-26T00:34:44Z","author_association":"NONE","body":"Hah, forget all that \"Process-N\" mumbo-jumbo. Here's an easy repro:\r\n\r\n1. In one terminal: `curl \"http://localhost:5986/some-db/_changes?since=now&feed=continuous\"`\r\n2. From another terminal, kill that curl process.\r\n\r\nDoesn't seem to happen as quickly or reliably if simply Ctrl-C'ing curl, or when `feed=longpoll` but maybe the delay between the connection dropping and the error logging is just longer than I am patient in these cases. (After a few minutes I seem to get a pile of errors in my CouchDB log but by then I've forgotten what I was testing…)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457781345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457835201","html_url":"https://github.com/apache/couchdb/issues/1334#issuecomment-457835201","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1334","id":457835201,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NzgzNTIwMQ==","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-26T14:24:34Z","updated_at":"2019-01-26T14:24:34Z","author_association":"CONTRIBUTOR","body":"Obviously I'll be the last person to actually do anything with the js engine, but is there a reason specifically for focusing on Chakra/v8/spidermonkey etc?\r\n\r\ne.g. https://duktape.org/guide.html is a neat little js runtime, MIT licensed, focused on embedding, with the ability to load bytecode and skip the compilation step each time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457835201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457842340","html_url":"https://github.com/apache/couchdb/issues/1334#issuecomment-457842340","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1334","id":457842340,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Nzg0MjM0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-26T15:58:55Z","updated_at":"2019-01-26T15:58:55Z","author_association":"MEMBER","body":"I'd mentioned duktape on the lists long ago, then forgot all about it.\r\n\r\nWorth looking at.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/457842340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458014752","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458014752","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458014752,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODAxNDc1Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T06:41:53Z","updated_at":"2019-01-28T06:41:53Z","author_association":"MEMBER","body":"The JavaScript engine has not, and will not, have access to document attachments. Sorry.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458014752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458018163","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458018163","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458018163,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODAxODE2Mw==","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T07:01:19Z","updated_at":"2019-01-28T07:01:19Z","author_association":"CONTRIBUTOR","body":"@nkronlage I‘ll look into it. @wohali, your verdict seems bit premature.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458018163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458019517","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458019517","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458019517,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODAxOTUxNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T07:08:32Z","updated_at":"2019-01-28T07:08:32Z","author_association":"MEMBER","body":"@ermouth let me know if you find a problem, i assumed it was related to attachments.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458019517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458063838","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458063838","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458063838,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODA2MzgzOA==","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T09:55:41Z","updated_at":"2019-01-28T09:55:41Z","author_association":"CONTRIBUTOR","body":"JS rewrite definitely sees attachments sent in that way, which may be checked using ddoc returning request JSON:\r\n```\r\n{\r\n  \"_id\": \"_design/reflect\",\r\n  \"rewrites\": \"function (req) {\\n\\t\\treturn {\\n\\t\\t\\tcode:200,\\n\\t\\t\\tpath:'/',\\n\\t\\t\\tbody:JSON.stringify(req, null, '  ')\\n\\t\\t};\\n  }\"\r\n}\r\n```\r\nHowever, it’s unclear what happens when rewrite fn conveys result to Couch. \r\n\r\nExplicitly defining `{path, method, body, headers, query}` of a rewrite result I see no hang, but I still can’t save an attach this way. Regardless how I pass revision – as `query.rev`, or as `If-Match` header – I get `{\"error\":\"not_found\",\"reason\":\"missing_rev\"}`.\r\n\r\nGonna dig into it, smth interesting.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458063838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458069948","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458069948","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458069948,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODA2OTk0OA==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T10:12:18Z","updated_at":"2019-01-28T10:12:18Z","author_association":"CONTRIBUTOR","body":"I don't know why tests fail, it compiles OK on my computer 🤔","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458069948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]