[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620361924","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-620361924","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":620361924,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDM2MTkyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T03:41:40Z","updated_at":"2020-04-28T03:41:49Z","author_association":"CONTRIBUTOR","body":"> bthread用了之后再使用线程的mutex的时候死锁\r\n\r\n临界区内有做阻塞或等待另一个资源的操作么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620361924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620391004","html_url":"https://github.com/apache/brpc/issues/1103#issuecomment-620391004","issue_url":"https://api.github.com/repos/apache/brpc/issues/1103","id":620391004,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDM5MTAwNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T05:34:57Z","updated_at":"2020-04-28T05:34:57Z","author_association":"MEMBER","body":"是一个版本，已经更新0.9.7的下载链接了，可以再试一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620391004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620404939","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-620404939","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":620404939,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDQwNDkzOQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T06:21:06Z","updated_at":"2020-04-28T06:21:06Z","author_association":"MEMBER","body":"stream目前对照的语义是和tcp连接类似的(除了有消息边界外). 这个接口用int在当时的设计上是也是为了能够合适的方式传递用户态错误而不需要改接口。\r\n你可以看下目前的场景直接Close是否能满足需求，这个应该是目前唯一的可以提前结束的手段。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620404939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620412579","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-620412579","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":620412579,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDQxMjU3OQ==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T06:42:03Z","updated_at":"2020-04-28T06:42:03Z","author_association":"NONE","body":"btw：StreamClose这里有个坑，因为client端上层传给brpc的是handler的指针，有可能上层析构了on_closed还会被调用，有可能访问到已经析构了的数据，这块需要处理一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620412579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620425842","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-620425842","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":620425842,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDQyNTg0Mg==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T07:14:44Z","updated_at":"2020-04-28T07:14:44Z","author_association":"NONE","body":"@bailiyang 这块如果能有个option支持普通rpc的保序就好了，你要是改好了回头可以提个PR？看到好几个人问过这个问题了。我的场景下用stream保证了顺序，不过普通rpc要是能保序还是挺方便的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620425842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620520334","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-620520334","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":620520334,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDUyMDMzNA==","user":{"login":"cstarc","id":11407488,"node_id":"MDQ6VXNlcjExNDA3NDg4","avatar_url":"https://avatars.githubusercontent.com/u/11407488?v=4","gravatar_id":"","url":"https://api.github.com/users/cstarc","html_url":"https://github.com/cstarc","followers_url":"https://api.github.com/users/cstarc/followers","following_url":"https://api.github.com/users/cstarc/following{/other_user}","gists_url":"https://api.github.com/users/cstarc/gists{/gist_id}","starred_url":"https://api.github.com/users/cstarc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cstarc/subscriptions","organizations_url":"https://api.github.com/users/cstarc/orgs","repos_url":"https://api.github.com/users/cstarc/repos","events_url":"https://api.github.com/users/cstarc/events{/privacy}","received_events_url":"https://api.github.com/users/cstarc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T10:27:50Z","updated_at":"2020-04-28T10:27:50Z","author_association":"CONTRIBUTOR","body":"@chenzhangyi  close 是直接调用streamclose？可以在receive端调用？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620520334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620538667","html_url":"https://github.com/apache/brpc/issues/1103#issuecomment-620538667","issue_url":"https://api.github.com/repos/apache/brpc/issues/1103","id":620538667,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDUzODY2Nw==","user":{"login":"darmac","id":29532367,"node_id":"MDQ6VXNlcjI5NTMyMzY3","avatar_url":"https://avatars.githubusercontent.com/u/29532367?v=4","gravatar_id":"","url":"https://api.github.com/users/darmac","html_url":"https://github.com/darmac","followers_url":"https://api.github.com/users/darmac/followers","following_url":"https://api.github.com/users/darmac/following{/other_user}","gists_url":"https://api.github.com/users/darmac/gists{/gist_id}","starred_url":"https://api.github.com/users/darmac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darmac/subscriptions","organizations_url":"https://api.github.com/users/darmac/orgs","repos_url":"https://api.github.com/users/darmac/repos","events_url":"https://api.github.com/users/darmac/events{/privacy}","received_events_url":"https://api.github.com/users/darmac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T11:08:08Z","updated_at":"2020-04-28T11:08:08Z","author_association":"NONE","body":"好的,谢谢.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620538667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620589519","html_url":"https://github.com/apache/brpc/issues/1096#issuecomment-620589519","issue_url":"https://api.github.com/repos/apache/brpc/issues/1096","id":620589519,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDU4OTUxOQ==","user":{"login":"old-bear","id":1525532,"node_id":"MDQ6VXNlcjE1MjU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1525532?v=4","gravatar_id":"","url":"https://api.github.com/users/old-bear","html_url":"https://github.com/old-bear","followers_url":"https://api.github.com/users/old-bear/followers","following_url":"https://api.github.com/users/old-bear/following{/other_user}","gists_url":"https://api.github.com/users/old-bear/gists{/gist_id}","starred_url":"https://api.github.com/users/old-bear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/old-bear/subscriptions","organizations_url":"https://api.github.com/users/old-bear/orgs","repos_url":"https://api.github.com/users/old-bear/repos","events_url":"https://api.github.com/users/old-bear/events{/privacy}","received_events_url":"https://api.github.com/users/old-bear/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T12:57:25Z","updated_at":"2020-04-28T12:57:25Z","author_association":"CONTRIBUTOR","body":"感谢指正，我看了下 DoRead中确实存在bug，但具体问题好像与你描述的不同：\r\n1. `append_from_SSL_channel`中不断调用`SSL_read`，已经读入了一些内容，`nr>0`，此时最后一次`SSL_read`返回`rc=0`，而`append_from_SSL_channel`返回`nr (>0)`\r\n2. `DoRead`中进入default分支，打印了`Fail to read from ssl_fd=id`，返回`nr (>0)`\r\n3. `InputMessenger`中调用`DoRead`得到`nr>0`，处理消息，然后循环`while (!read_eof)`，继续调用`DoRead -> SSL_read`，此时则rc=0，一路return出去，被当做eof\r\n\r\n因此，我这边看这个bug主要在于会错误打印一句warning日志，应该不影响fd关闭或者fd泄漏\r\n如果你这边有具体复现场景描述，或者相关日志，希望能提供一下，谢谢\r\n\r\n另外，SSL握手目前被视作一种**连通性**指标，如果server拒绝与client建立SSL（无论何种因素），那么后续任何请求肯定无法成功。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620589519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620614694","html_url":"https://github.com/apache/brpc/issues/1104#issuecomment-620614694","issue_url":"https://api.github.com/repos/apache/brpc/issues/1104","id":620614694,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDYxNDY5NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T13:39:52Z","updated_at":"2020-04-28T13:39:52Z","author_association":"CONTRIBUTOR","body":"rpc-press的输入可以是一个json文件，从中随机选取","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620614694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620982299","html_url":"https://github.com/apache/brpc/issues/1105#issuecomment-620982299","issue_url":"https://api.github.com/repos/apache/brpc/issues/1105","id":620982299,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDk4MjI5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T04:27:58Z","updated_at":"2020-04-29T04:27:58Z","author_association":"CONTRIBUTOR","body":"哪个模块的内存？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620982299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620990930","html_url":"https://github.com/apache/brpc/issues/1105#issuecomment-620990930","issue_url":"https://api.github.com/repos/apache/brpc/issues/1105","id":620990930,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDk5MDkzMA==","user":{"login":"tojoyccnu","id":12874335,"node_id":"MDQ6VXNlcjEyODc0MzM1","avatar_url":"https://avatars.githubusercontent.com/u/12874335?v=4","gravatar_id":"","url":"https://api.github.com/users/tojoyccnu","html_url":"https://github.com/tojoyccnu","followers_url":"https://api.github.com/users/tojoyccnu/followers","following_url":"https://api.github.com/users/tojoyccnu/following{/other_user}","gists_url":"https://api.github.com/users/tojoyccnu/gists{/gist_id}","starred_url":"https://api.github.com/users/tojoyccnu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tojoyccnu/subscriptions","organizations_url":"https://api.github.com/users/tojoyccnu/orgs","repos_url":"https://api.github.com/users/tojoyccnu/repos","events_url":"https://api.github.com/users/tojoyccnu/events{/privacy}","received_events_url":"https://api.github.com/users/tojoyccnu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T05:08:11Z","updated_at":"2020-04-29T05:08:11Z","author_association":"NONE","body":"![counter_1](https://user-images.githubusercontent.com/12874335/80562445-5e0e4e00-8a1a-11ea-8613-ec752f82614a.jpg)\r\n![counter_2](https://user-images.githubusercontent.com/12874335/80562451-5fd81180-8a1a-11ea-98dc-e3b5a08c4375.jpg)\r\n![counter_3](https://user-images.githubusercontent.com/12874335/80562453-61093e80-8a1a-11ea-8a42-1ded3d25bfcb.jpg)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620990930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621000469","html_url":"https://github.com/apache/brpc/issues/1105#issuecomment-621000469","issue_url":"https://api.github.com/repos/apache/brpc/issues/1105","id":621000469,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTAwMDQ2OQ==","user":{"login":"tojoyccnu","id":12874335,"node_id":"MDQ6VXNlcjEyODc0MzM1","avatar_url":"https://avatars.githubusercontent.com/u/12874335?v=4","gravatar_id":"","url":"https://api.github.com/users/tojoyccnu","html_url":"https://github.com/tojoyccnu","followers_url":"https://api.github.com/users/tojoyccnu/followers","following_url":"https://api.github.com/users/tojoyccnu/following{/other_user}","gists_url":"https://api.github.com/users/tojoyccnu/gists{/gist_id}","starred_url":"https://api.github.com/users/tojoyccnu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tojoyccnu/subscriptions","organizations_url":"https://api.github.com/users/tojoyccnu/orgs","repos_url":"https://api.github.com/users/tojoyccnu/repos","events_url":"https://api.github.com/users/tojoyccnu/events{/privacy}","received_events_url":"https://api.github.com/users/tojoyccnu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T05:35:35Z","updated_at":"2020-04-29T05:35:35Z","author_association":"NONE","body":"改成两个rpc_press 都做example.CounterService.get 查询，没有 braft 状态机 apply 。\r\n![counter_4](https://user-images.githubusercontent.com/12874335/80563662-43d66f00-8a1e-11ea-9fc7-bd095beb82e6.jpg)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621000469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621002773","html_url":"https://github.com/apache/brpc/issues/1105#issuecomment-621002773","issue_url":"https://api.github.com/repos/apache/brpc/issues/1105","id":621002773,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTAwMjc3Mw==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T05:45:08Z","updated_at":"2020-04-29T05:45:08Z","author_association":"MEMBER","body":"用了tcmalloc没？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621002773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621003812","html_url":"https://github.com/apache/brpc/issues/1105#issuecomment-621003812","issue_url":"https://api.github.com/repos/apache/brpc/issues/1105","id":621003812,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTAwMzgxMg==","user":{"login":"tojoyccnu","id":12874335,"node_id":"MDQ6VXNlcjEyODc0MzM1","avatar_url":"https://avatars.githubusercontent.com/u/12874335?v=4","gravatar_id":"","url":"https://api.github.com/users/tojoyccnu","html_url":"https://github.com/tojoyccnu","followers_url":"https://api.github.com/users/tojoyccnu/followers","following_url":"https://api.github.com/users/tojoyccnu/following{/other_user}","gists_url":"https://api.github.com/users/tojoyccnu/gists{/gist_id}","starred_url":"https://api.github.com/users/tojoyccnu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tojoyccnu/subscriptions","organizations_url":"https://api.github.com/users/tojoyccnu/orgs","repos_url":"https://api.github.com/users/tojoyccnu/repos","events_url":"https://api.github.com/users/tojoyccnu/events{/privacy}","received_events_url":"https://api.github.com/users/tojoyccnu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T05:49:22Z","updated_at":"2020-04-29T05:49:22Z","author_association":"NONE","body":"> 用了tcmalloc没？\r\n\r\n用了的。\r\n\r\n![counter_5](https://user-images.githubusercontent.com/12874335/80564366-35895280-8a20-11ea-9921-b0045131448c.jpg)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621003812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621004069","html_url":"https://github.com/apache/brpc/issues/1105#issuecomment-621004069","issue_url":"https://api.github.com/repos/apache/brpc/issues/1105","id":621004069,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMTAwNDA2OQ==","user":{"login":"tojoyccnu","id":12874335,"node_id":"MDQ6VXNlcjEyODc0MzM1","avatar_url":"https://avatars.githubusercontent.com/u/12874335?v=4","gravatar_id":"","url":"https://api.github.com/users/tojoyccnu","html_url":"https://github.com/tojoyccnu","followers_url":"https://api.github.com/users/tojoyccnu/followers","following_url":"https://api.github.com/users/tojoyccnu/following{/other_user}","gists_url":"https://api.github.com/users/tojoyccnu/gists{/gist_id}","starred_url":"https://api.github.com/users/tojoyccnu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tojoyccnu/subscriptions","organizations_url":"https://api.github.com/users/tojoyccnu/orgs","repos_url":"https://api.github.com/users/tojoyccnu/repos","events_url":"https://api.github.com/users/tojoyccnu/events{/privacy}","received_events_url":"https://api.github.com/users/tojoyccnu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-29T05:50:20Z","updated_at":"2020-04-29T05:50:20Z","author_association":"NONE","body":"![counter_5](https://user-images.githubusercontent.com/12874335/80564421-58b40200-8a20-11ea-95eb-78ea2264ff1e.jpg)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/621004069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/622347261","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-622347261","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":622347261,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjM0NzI2MQ==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-01T11:09:51Z","updated_at":"2020-05-01T11:09:51Z","author_association":"NONE","body":"> @bailiyang 这块如果能有个option支持普通rpc的保序就好了，你要是改好了回头可以提个PR？看到好几个人问过这个问题了。我的场景下用stream保证了顺序，不过普通rpc要是能保序还是挺方便的\r\n\r\n可能没办法向你说的这样做到普通rpc保序，目前的写法跟redis-server一样，执行做在parse里面而不是process里面，这样可以在拆协议之前就保证有序触发用户自定义的回调\r\n但是这同时带来了一个新的问题：不切成多个bthread触发回调，单线程触发性能无法发挥了\r\n我们公司为这个专门做了一个uid相关的排队锁保证强制有序，但是涉及到no_steal的bthread改动，改动非常大，提了pr但是他们没合入","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/622347261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/624467256","html_url":"https://github.com/apache/brpc/issues/207#issuecomment-624467256","issue_url":"https://api.github.com/repos/apache/brpc/issues/207","id":624467256,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDQ2NzI1Ng==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-06T06:32:40Z","updated_at":"2020-05-06T06:32:40Z","author_association":"CONTRIBUTOR","body":"请问支持domain socket了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/624467256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/624997837","html_url":"https://github.com/apache/brpc/issues/1108#issuecomment-624997837","issue_url":"https://api.github.com/repos/apache/brpc/issues/1108","id":624997837,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDk5NzgzNw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-07T02:48:41Z","updated_at":"2020-05-07T02:48:41Z","author_association":"CONTRIBUTOR","body":"这个测试场景太简单了，说明不了什么问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/624997837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/624998385","html_url":"https://github.com/apache/brpc/issues/1108#issuecomment-624998385","issue_url":"https://api.github.com/repos/apache/brpc/issues/1108","id":624998385,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDk5ODM4NQ==","user":{"login":"rickonji","id":46045107,"node_id":"MDQ6VXNlcjQ2MDQ1MTA3","avatar_url":"https://avatars.githubusercontent.com/u/46045107?v=4","gravatar_id":"","url":"https://api.github.com/users/rickonji","html_url":"https://github.com/rickonji","followers_url":"https://api.github.com/users/rickonji/followers","following_url":"https://api.github.com/users/rickonji/following{/other_user}","gists_url":"https://api.github.com/users/rickonji/gists{/gist_id}","starred_url":"https://api.github.com/users/rickonji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rickonji/subscriptions","organizations_url":"https://api.github.com/users/rickonji/orgs","repos_url":"https://api.github.com/users/rickonji/repos","events_url":"https://api.github.com/users/rickonji/events{/privacy}","received_events_url":"https://api.github.com/users/rickonji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-07T02:50:50Z","updated_at":"2020-05-07T02:50:50Z","author_association":"NONE","body":"没有挑战的意思哈，就是想问下原因，或者怎么解决。比如是不是对tcmalloc的版本有要求。感觉开不开tcmalloc没变化很奇怪","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/624998385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/625592581","html_url":"https://github.com/apache/brpc/issues/954#issuecomment-625592581","issue_url":"https://api.github.com/repos/apache/brpc/issues/954","id":625592581,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTU5MjU4MQ==","user":{"login":"huntinux","id":6072626,"node_id":"MDQ6VXNlcjYwNzI2MjY=","avatar_url":"https://avatars.githubusercontent.com/u/6072626?v=4","gravatar_id":"","url":"https://api.github.com/users/huntinux","html_url":"https://github.com/huntinux","followers_url":"https://api.github.com/users/huntinux/followers","following_url":"https://api.github.com/users/huntinux/following{/other_user}","gists_url":"https://api.github.com/users/huntinux/gists{/gist_id}","starred_url":"https://api.github.com/users/huntinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huntinux/subscriptions","organizations_url":"https://api.github.com/users/huntinux/orgs","repos_url":"https://api.github.com/users/huntinux/repos","events_url":"https://api.github.com/users/huntinux/events{/privacy}","received_events_url":"https://api.github.com/users/huntinux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-08T02:22:11Z","updated_at":"2020-05-08T02:27:59Z","author_association":"NONE","body":"非pb编码的协议，可以参考mcpack的实现，就是上面戈神说的pb插件+pb options，个人感觉比较复杂。\r\n另一种方案是参考redis协议，并利用现有的tars序列化和反序列化。缺点是存在不必要的拷贝，可能不高效。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/625592581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/625678862","html_url":"https://github.com/apache/brpc/issues/1109#issuecomment-625678862","issue_url":"https://api.github.com/repos/apache/brpc/issues/1109","id":625678862,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTY3ODg2Mg==","user":{"login":"codeofdave","id":5085284,"node_id":"MDQ6VXNlcjUwODUyODQ=","avatar_url":"https://avatars.githubusercontent.com/u/5085284?v=4","gravatar_id":"","url":"https://api.github.com/users/codeofdave","html_url":"https://github.com/codeofdave","followers_url":"https://api.github.com/users/codeofdave/followers","following_url":"https://api.github.com/users/codeofdave/following{/other_user}","gists_url":"https://api.github.com/users/codeofdave/gists{/gist_id}","starred_url":"https://api.github.com/users/codeofdave/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codeofdave/subscriptions","organizations_url":"https://api.github.com/users/codeofdave/orgs","repos_url":"https://api.github.com/users/codeofdave/repos","events_url":"https://api.github.com/users/codeofdave/events{/privacy}","received_events_url":"https://api.github.com/users/codeofdave/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-08T07:25:44Z","updated_at":"2020-05-08T07:25:44Z","author_association":"NONE","body":"详细报错：\r\n`===== begin build incubator-brpc-0.9.5\r\n-- The C compiler identification is GNU 7.3.0\r\n-- The CXX compiler identification is GNU 7.3.0\r\n-- Check for working C compiler: /usr/bin/gcc\r\n-- Check for working C compiler: /usr/bin/gcc -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Check for working CXX compiler: /usr/bin/g++\r\n-- Check for working CXX compiler: /usr/bin/g++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Found gflags: /root/incubator-doris-master/thirdparty/installed/lib/libgflags.a\r\nfatal: Not a git repository (or any of the parent directories): .git\r\n-- Looking for pthread.h\r\n-- Looking for pthread.h - found\r\n-- Looking for pthread_create\r\n-- Looking for pthread_create - not found\r\n-- Looking for pthread_create in pthreads\r\n-- Looking for pthread_create in pthreads - not found\r\n-- Looking for pthread_create in pthread\r\n-- Looking for pthread_create in pthread - found\r\n-- Found Threads: TRUE  \r\n-- Found Protobuf: /root/incubator-doris-master/thirdparty/installed/lib/libprotobuf.a;-lpthread (found version \"3.5.1\") \r\n-- Found OpenSSL: /root/incubator-doris-master/thirdparty/installed/lib/libcrypto.a (found version \"1.0.2k\") \r\n-- Found Protobuf: /root/incubator-doris-master/thirdparty/installed/lib/libprotobuf.a;-lpthread;-lpthread (found version \"3.5.1\") \r\n-- Configuring done\r\n-- Generating done\r\n-- Build files have been written to: /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/build\r\nScanning dependencies of target PROTO_LIB\r\n[  0%] Building CXX object CMakeFiles/PROTO_LIB.dir/idl_options.pb.cc.o\r\nScanning dependencies of target OBJ_LIB\r\n[  1%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/rtmp.pb.cc.o\r\n[  1%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/collector.cpp.o\r\n[  1%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/rpc_dump.pb.cc.o\r\n[  1%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/get_favicon.pb.cc.o\r\n[  1%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/default_variables.cpp.o\r\n[  1%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/span.pb.cc.o\r\n[  2%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/detail/percentile.cpp.o\r\n[  3%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/builtin_service.pb.cc.o\r\n[  3%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/detail/sampler.cpp.o\r\n[  3%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/gflag.cpp.o\r\n[  4%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/latency_recorder.cpp.o\r\n[  4%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/get_js.pb.cc.o\r\n[  4%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bvar/variable.cpp.o\r\n[  4%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/errno.pb.cc.o\r\n[  5%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/nshead_meta.pb.cc.o\r\n[  5%] Building CXX object src/CMakeFiles/OBJ_LIB.dir/bthread/bthread.cpp.o\r\nIn file included from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack.h:25:0,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/task_meta.h:26,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/task_control.h:28,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/task_group.h:23,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/bthread.cpp:22:\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/context.h:69:1: error: expected initializer before ‘bthread_jump_fcontext’\r\n bthread_jump_fcontext(bthread_fcontext_t * ofc, bthread_fcontext_t nfc,\r\n ^~~~~~~~~~~~~~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/context.h:72:1: error: expected initializer before ‘bthread_make_fcontext’\r\n bthread_make_fcontext(void* sp, size_t size, void (* fn)( intptr_t));\r\n ^~~~~~~~~~~~~~~~~~~~~\r\nIn file included from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack.h:78:0,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/task_meta.h:26,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/task_control.h:28,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/task_group.h:23,\r\n                 from /root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/bthread.cpp:22:\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h: In function ‘void bthread::jump_stack(bthread::ContextualStack*, bthread::ContextualStack*)’:\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:129:75: error: expression list treated as compound expression in functional cast [-fpermissive]\r\n     bthread_fcontext_t(&from->context, to->context, 0/*not skip remained*/);\r\n                                                                           ^\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:129:24: warning: left operand of comma operator has no effect [-Wunused-value]\r\n     bthread_fcontext_t(&from->context, to->context, 0/*not skip remained*/);\r\n                        ^~~~~~~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:129:44: warning: right operand of comma operator has no effect [-Wunused-value]\r\n     bthread_fcontext_t(&from->context, to->context, 0/*not skip remained*/);\r\n                                        ~~~~^~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:129:75: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]\r\n     bthread_fcontext_t(&from->context, to->context, 0/*not skip remained*/);\r\n                                                                           ^\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:129:5: warning: statement has no effect [-Wunused-value]\r\n     bthread_fcontext_t(&from->context, to->context, 0/*not skip remained*/);\r\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n[  5%] Building CXX object CMakeFiles/PROTO_LIB.dir/brpc/options.pb.cc.o\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h: In instantiation of ‘bthread::StackFactory<StackClass>::Wrapper::Wrapper(void (*)(intptr_t)) [with\r\n StackClass = bthread::SmallStackClass; intptr_t = long int]’:/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool_inl.h:188:13:   required from ‘T* butil::ObjectPool<T>::LocalPool::get(const A1&) [with A1 = void (*)\r\n(long int); T = bthread::StackFactory<bthread::SmallStackClass>::Wrapper]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool_inl.h:235:32:   required from ‘T* butil::ObjectPool<T>::get_object(const A1&) [with A1 = void (*)(lon\r\ng int); T = bthread::StackFactory<bthread::SmallStackClass>::Wrapper]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool.h:78:55:   required from ‘T* butil::get_object(const A1&) [with T = bthread::StackFactory<bthread::Sm\r\nallStackClass>::Wrapper; A1 = void (*)(long int)]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:68:42:   required from ‘static bthread::ContextualStack* bthread::StackFactory<StackClass>::get_sta\r\nck(void (*)(intptr_t)) [with StackClass = bthread::SmallStackClass; intptr_t = long int]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:98:47:   required from here\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:23: error: expression list treated as compound expression in functional cast [-fpermissive]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:50: warning: left operand of comma operator has no effect [-Wunused-value]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                                          ~~~~~~~~^~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:66: warning: right operand of comma operator has no effect [-Wunused-value]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                                                          ~~~~~~~~^~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h: In instantiation of ‘bthread::StackFactory<StackClass>::Wrapper::Wrapper(void (*)(intptr_t)) [with\r\n StackClass = bthread::NormalStackClass; intptr_t = long int]’:/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool_inl.h:188:13:   required from ‘T* butil::ObjectPool<T>::LocalPool::get(const A1&) [with A1 = void (*)\r\n(long int); T = bthread::StackFactory<bthread::NormalStackClass>::Wrapper]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool_inl.h:235:32:   required from ‘T* butil::ObjectPool<T>::get_object(const A1&) [with A1 = void (*)(lon\r\ng int); T = bthread::StackFactory<bthread::NormalStackClass>::Wrapper]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool.h:78:55:   required from ‘T* butil::get_object(const A1&) [with T = bthread::StackFactory<bthread::No\r\nrmalStackClass>::Wrapper; A1 = void (*)(long int)]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:68:42:   required from ‘static bthread::ContextualStack* bthread::StackFactory<StackClass>::get_sta\r\nck(void (*)(intptr_t)) [with StackClass = bthread::NormalStackClass; intptr_t = long int]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:100:48:   required from here\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:23: error: expression list treated as compound expression in functional cast [-fpermissive]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:50: warning: left operand of comma operator has no effect [-Wunused-value]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                                          ~~~~~~~~^~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:66: warning: right operand of comma operator has no effect [-Wunused-value]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                                                          ~~~~~~~~^~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h: In instantiation of ‘bthread::StackFactory<StackClass>::Wrapper::Wrapper(void (*)(intptr_t)) [with\r\n StackClass = bthread::LargeStackClass; intptr_t = long int]’:/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool_inl.h:188:13:   required from ‘T* butil::ObjectPool<T>::LocalPool::get(const A1&) [with A1 = void (*)\r\n(long int); T = bthread::StackFactory<bthread::LargeStackClass>::Wrapper]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool_inl.h:235:32:   required from ‘T* butil::ObjectPool<T>::get_object(const A1&) [with A1 = void (*)(lon\r\ng int); T = bthread::StackFactory<bthread::LargeStackClass>::Wrapper]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/butil/object_pool.h:78:55:   required from ‘T* butil::get_object(const A1&) [with T = bthread::StackFactory<bthread::La\r\nrgeStackClass>::Wrapper; A1 = void (*)(long int)]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:68:42:   required from ‘static bthread::ContextualStack* bthread::StackFactory<StackClass>::get_sta\r\nck(void (*)(intptr_t)) [with StackClass = bthread::LargeStackClass; intptr_t = long int]’/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:102:47:   required from here\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:23: error: expression list treated as compound expression in functional cast [-fpermissive]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:50: warning: left operand of comma operator has no effect [-Wunused-value]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                                          ~~~~~~~~^~~~~~\r\n/root/incubator-doris-master/thirdparty/src/incubator-brpc-0.9.5/src/bthread/stack_inl.h:55:66: warning: right operand of comma operator has no effect [-Wunused-value]\r\n             context = bthread_fcontext_t(storage.bottom, storage.stacksize, entry);\r\n                                                          ~~~~~~~~^~~~~~~~~\r\n`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/625678862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/625737300","html_url":"https://github.com/apache/brpc/issues/41#issuecomment-625737300","issue_url":"https://api.github.com/repos/apache/brpc/issues/41","id":625737300,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTczNzMwMA==","user":{"login":"huntinux","id":6072626,"node_id":"MDQ6VXNlcjYwNzI2MjY=","avatar_url":"https://avatars.githubusercontent.com/u/6072626?v=4","gravatar_id":"","url":"https://api.github.com/users/huntinux","html_url":"https://github.com/huntinux","followers_url":"https://api.github.com/users/huntinux/followers","following_url":"https://api.github.com/users/huntinux/following{/other_user}","gists_url":"https://api.github.com/users/huntinux/gists{/gist_id}","starred_url":"https://api.github.com/users/huntinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huntinux/subscriptions","organizations_url":"https://api.github.com/users/huntinux/orgs","repos_url":"https://api.github.com/users/huntinux/repos","events_url":"https://api.github.com/users/huntinux/events{/privacy}","received_events_url":"https://api.github.com/users/huntinux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-08T09:51:55Z","updated_at":"2020-05-08T09:51:55Z","author_association":"NONE","body":"感觉rpc支持多语言是刚需，支持多语言才有旺盛的生命力","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/625737300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626163176","html_url":"https://github.com/apache/brpc/issues/1109#issuecomment-626163176","issue_url":"https://api.github.com/repos/apache/brpc/issues/1109","id":626163176,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjE2MzE3Ng==","user":{"login":"machh","id":8188104,"node_id":"MDQ6VXNlcjgxODgxMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/8188104?v=4","gravatar_id":"","url":"https://api.github.com/users/machh","html_url":"https://github.com/machh","followers_url":"https://api.github.com/users/machh/followers","following_url":"https://api.github.com/users/machh/following{/other_user}","gists_url":"https://api.github.com/users/machh/gists{/gist_id}","starred_url":"https://api.github.com/users/machh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machh/subscriptions","organizations_url":"https://api.github.com/users/machh/orgs","repos_url":"https://api.github.com/users/machh/repos","events_url":"https://api.github.com/users/machh/events{/privacy}","received_events_url":"https://api.github.com/users/machh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-09T11:44:18Z","updated_at":"2020-05-09T11:44:18Z","author_association":"NONE","body":"试下 0.90","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626163176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626166330","html_url":"https://github.com/apache/brpc/issues/1072#issuecomment-626166330","issue_url":"https://api.github.com/repos/apache/brpc/issues/1072","id":626166330,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjE2NjMzMA==","user":{"login":"machh","id":8188104,"node_id":"MDQ6VXNlcjgxODgxMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/8188104?v=4","gravatar_id":"","url":"https://api.github.com/users/machh","html_url":"https://github.com/machh","followers_url":"https://api.github.com/users/machh/followers","following_url":"https://api.github.com/users/machh/following{/other_user}","gists_url":"https://api.github.com/users/machh/gists{/gist_id}","starred_url":"https://api.github.com/users/machh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machh/subscriptions","organizations_url":"https://api.github.com/users/machh/orgs","repos_url":"https://api.github.com/users/machh/repos","events_url":"https://api.github.com/users/machh/events{/privacy}","received_events_url":"https://api.github.com/users/machh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-09T12:08:54Z","updated_at":"2020-05-09T12:08:54Z","author_association":"NONE","body":"> \r\n> \r\n> 用一下0.9.7或master，加入了对arm64的支持\r\n\r\narm64没问题 ， 我这是32位arm，.armv7hl \r\n\r\nLinux localhost 4.19.72-300.el7.armv7hl","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626166330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626300499","html_url":"https://github.com/apache/brpc/issues/1111#issuecomment-626300499","issue_url":"https://api.github.com/repos/apache/brpc/issues/1111","id":626300499,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjMwMDQ5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-10T09:40:05Z","updated_at":"2020-05-10T09:40:05Z","author_association":"CONTRIBUTOR","body":"brpc不支持32位系统","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626300499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626447746","html_url":"https://github.com/apache/brpc/issues/1108#issuecomment-626447746","issue_url":"https://api.github.com/repos/apache/brpc/issues/1108","id":626447746,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjQ0Nzc0Ng==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-11T03:15:04Z","updated_at":"2020-05-11T03:15:04Z","author_association":"NONE","body":"这个取决于场景的，tcmalloc适合于大量的小块内存分配","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626447746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626522804","html_url":"https://github.com/apache/brpc/issues/1108#issuecomment-626522804","issue_url":"https://api.github.com/repos/apache/brpc/issues/1108","id":626522804,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNjUyMjgwNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-11T07:28:01Z","updated_at":"2020-05-11T07:28:01Z","author_association":"CONTRIBUTOR","body":"@rickonji 确认下server确实开启了tcmalloc，方式是看下http_server的/hotspots/cpu或/hotspots/heap是否可访问","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/626522804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/627054248","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-627054248","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":627054248,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzA1NDI0OA==","user":{"login":"vanehu","id":625102,"node_id":"MDQ6VXNlcjYyNTEwMg==","avatar_url":"https://avatars.githubusercontent.com/u/625102?v=4","gravatar_id":"","url":"https://api.github.com/users/vanehu","html_url":"https://github.com/vanehu","followers_url":"https://api.github.com/users/vanehu/followers","following_url":"https://api.github.com/users/vanehu/following{/other_user}","gists_url":"https://api.github.com/users/vanehu/gists{/gist_id}","starred_url":"https://api.github.com/users/vanehu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vanehu/subscriptions","organizations_url":"https://api.github.com/users/vanehu/orgs","repos_url":"https://api.github.com/users/vanehu/repos","events_url":"https://api.github.com/users/vanehu/events{/privacy}","received_events_url":"https://api.github.com/users/vanehu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-12T01:29:26Z","updated_at":"2020-05-12T01:29:26Z","author_association":"NONE","body":"例如，业务需要请求其他的数据，但是这个数据是另外的人写的 他可不管你用什么锁 直接mutex 就上去了 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/627054248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/628022514","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-628022514","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":628022514,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODAyMjUxNA==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-13T14:21:34Z","updated_at":"2020-05-13T14:29:13Z","author_association":"NONE","body":"研究下代码，发现是必现的(已经在线下复现)。\r\n条件是：","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/628022514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/628024255","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-628024255","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":628024255,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODAyNDI1NQ==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-13T14:24:13Z","updated_at":"2020-05-13T14:28:29Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/11960192/81824686-572e2200-9568-11ea-84e6-07e7554e3d22.png)\r\n满足这几个条件，+h2:grpc + 有重试， 必然会core\r\n原因在于cntl->HandleSendFailed()会issuseRpc，但是_serialize_request并没有执行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/628024255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/628474484","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-628474484","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":628474484,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODQ3NDQ4NA==","user":{"login":"yann-yy","id":32092715,"node_id":"MDQ6VXNlcjMyMDkyNzE1","avatar_url":"https://avatars.githubusercontent.com/u/32092715?v=4","gravatar_id":"","url":"https://api.github.com/users/yann-yy","html_url":"https://github.com/yann-yy","followers_url":"https://api.github.com/users/yann-yy/followers","following_url":"https://api.github.com/users/yann-yy/following{/other_user}","gists_url":"https://api.github.com/users/yann-yy/gists{/gist_id}","starred_url":"https://api.github.com/users/yann-yy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yann-yy/subscriptions","organizations_url":"https://api.github.com/users/yann-yy/orgs","repos_url":"https://api.github.com/users/yann-yy/repos","events_url":"https://api.github.com/users/yann-yy/events{/privacy}","received_events_url":"https://api.github.com/users/yann-yy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-14T08:19:23Z","updated_at":"2020-05-14T08:19:23Z","author_association":"NONE","body":"#1114 相同的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/628474484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/629090777","html_url":"https://github.com/apache/brpc/issues/1114#issuecomment-629090777","issue_url":"https://api.github.com/repos/apache/brpc/issues/1114","id":629090777,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTA5MDc3Nw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-15T07:57:12Z","updated_at":"2020-05-15T07:57:12Z","author_association":"MEMBER","body":"Thanks for reporting and we will check it and fix this later.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/629090777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/629959156","html_url":"https://github.com/apache/brpc/issues/933#issuecomment-629959156","issue_url":"https://api.github.com/repos/apache/brpc/issues/933","id":629959156,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTk1OTE1Ng==","user":{"login":"JiaoZiLang","id":9896920,"node_id":"MDQ6VXNlcjk4OTY5MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9896920?v=4","gravatar_id":"","url":"https://api.github.com/users/JiaoZiLang","html_url":"https://github.com/JiaoZiLang","followers_url":"https://api.github.com/users/JiaoZiLang/followers","following_url":"https://api.github.com/users/JiaoZiLang/following{/other_user}","gists_url":"https://api.github.com/users/JiaoZiLang/gists{/gist_id}","starred_url":"https://api.github.com/users/JiaoZiLang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JiaoZiLang/subscriptions","organizations_url":"https://api.github.com/users/JiaoZiLang/orgs","repos_url":"https://api.github.com/users/JiaoZiLang/repos","events_url":"https://api.github.com/users/JiaoZiLang/events{/privacy}","received_events_url":"https://api.github.com/users/JiaoZiLang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-18T05:46:02Z","updated_at":"2020-05-18T05:46:02Z","author_association":"CONTRIBUTOR","body":"想问下这个目前是否有支持、或者有相关的计划？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/629959156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/631273064","html_url":"https://github.com/apache/brpc/issues/1117#issuecomment-631273064","issue_url":"https://api.github.com/repos/apache/brpc/issues/1117","id":631273064,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTI3MzA2NA==","user":{"login":"leonardltk","id":22384973,"node_id":"MDQ6VXNlcjIyMzg0OTcz","avatar_url":"https://avatars.githubusercontent.com/u/22384973?v=4","gravatar_id":"","url":"https://api.github.com/users/leonardltk","html_url":"https://github.com/leonardltk","followers_url":"https://api.github.com/users/leonardltk/followers","following_url":"https://api.github.com/users/leonardltk/following{/other_user}","gists_url":"https://api.github.com/users/leonardltk/gists{/gist_id}","starred_url":"https://api.github.com/users/leonardltk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonardltk/subscriptions","organizations_url":"https://api.github.com/users/leonardltk/orgs","repos_url":"https://api.github.com/users/leonardltk/repos","events_url":"https://api.github.com/users/leonardltk/events{/privacy}","received_events_url":"https://api.github.com/users/leonardltk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T06:49:05Z","updated_at":"2020-05-20T06:49:05Z","author_association":"NONE","body":"Ok i followed this instructions and it works now [link](https://gist.github.com/dustismo/6203329)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/631273064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/631380008","html_url":"https://github.com/apache/brpc/issues/1119#issuecomment-631380008","issue_url":"https://api.github.com/repos/apache/brpc/issues/1119","id":631380008,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTM4MDAwOA==","user":{"login":"liumh8","id":26078945,"node_id":"MDQ6VXNlcjI2MDc4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26078945?v=4","gravatar_id":"","url":"https://api.github.com/users/liumh8","html_url":"https://github.com/liumh8","followers_url":"https://api.github.com/users/liumh8/followers","following_url":"https://api.github.com/users/liumh8/following{/other_user}","gists_url":"https://api.github.com/users/liumh8/gists{/gist_id}","starred_url":"https://api.github.com/users/liumh8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liumh8/subscriptions","organizations_url":"https://api.github.com/users/liumh8/orgs","repos_url":"https://api.github.com/users/liumh8/repos","events_url":"https://api.github.com/users/liumh8/events{/privacy}","received_events_url":"https://api.github.com/users/liumh8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T10:09:20Z","updated_at":"2020-05-20T10:09:20Z","author_association":"NONE","body":"@zyearn 请问是否有这样的问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/631380008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/631396573","html_url":"https://github.com/apache/brpc/issues/1119#issuecomment-631396573","issue_url":"https://api.github.com/repos/apache/brpc/issues/1119","id":631396573,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTM5NjU3Mw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T10:43:13Z","updated_at":"2020-05-20T10:43:13Z","author_association":"MEMBER","body":"是的，目前有这个问题，正在计划修复，先用非batch版本吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/631396573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/632450703","html_url":"https://github.com/apache/brpc/pull/1116#issuecomment-632450703","issue_url":"https://api.github.com/repos/apache/brpc/issues/1116","id":632450703,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjQ1MDcwMw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-22T02:57:08Z","updated_at":"2020-05-22T02:57:08Z","author_association":"MEMBER","body":"LGTM. I have checked that all COMPLELE have been replaced by COMPLETE.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/632450703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/632451719","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-632451719","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":632451719,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjQ1MTcxOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-22T03:00:44Z","updated_at":"2020-05-22T03:00:44Z","author_association":"MEMBER","body":"如果连接异常的话，会自动重试的；如果是因为异常导致rpc失败，会体现在controller.Failed()，以及controller.ErrorText()中","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/632451719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/632515886","html_url":"https://github.com/apache/brpc/issues/1120#issuecomment-632515886","issue_url":"https://api.github.com/repos/apache/brpc/issues/1120","id":632515886,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjUxNTg4Ng==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-22T06:35:11Z","updated_at":"2020-05-22T06:35:11Z","author_association":"CONTRIBUTOR","body":"event_dispatcher_num 保持默认值即可","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/632515886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633176304","html_url":"https://github.com/apache/brpc/issues/1120#issuecomment-633176304","issue_url":"https://api.github.com/repos/apache/brpc/issues/1120","id":633176304,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMzE3NjMwNA==","user":{"login":"baiwfg2","id":5157680,"node_id":"MDQ6VXNlcjUxNTc2ODA=","avatar_url":"https://avatars.githubusercontent.com/u/5157680?v=4","gravatar_id":"","url":"https://api.github.com/users/baiwfg2","html_url":"https://github.com/baiwfg2","followers_url":"https://api.github.com/users/baiwfg2/followers","following_url":"https://api.github.com/users/baiwfg2/following{/other_user}","gists_url":"https://api.github.com/users/baiwfg2/gists{/gist_id}","starred_url":"https://api.github.com/users/baiwfg2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baiwfg2/subscriptions","organizations_url":"https://api.github.com/users/baiwfg2/orgs","repos_url":"https://api.github.com/users/baiwfg2/repos","events_url":"https://api.github.com/users/baiwfg2/events{/privacy}","received_events_url":"https://api.github.com/users/baiwfg2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-24T04:12:51Z","updated_at":"2020-05-24T04:20:25Z","author_association":"NONE","body":"@gydong 实际压测发现不是如此哦，我的server 24cores,一种情况是num_threads=event_dispatcher_num=24， 一种是num_threads=24,event_dispatcher_num默认，结果随着连接数增加，吞吐前者明显要好 ，延时也要好！\r\n\r\n![image](https://user-images.githubusercontent.com/5157680/82745457-23989680-9db7-11ea-9fb0-2ba21a2a5ed2.png)\r\n\r\n![image](https://user-images.githubusercontent.com/5157680/82745499-b9ccbc80-9db7-11ea-9738-cfc575b53012.png)\r\n\r\n`以上测试是基于http_server 用wrk发post请求`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633176304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633241209","html_url":"https://github.com/apache/brpc/issues/1120#issuecomment-633241209","issue_url":"https://api.github.com/repos/apache/brpc/issues/1120","id":633241209,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMzI0MTIwOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-24T14:42:11Z","updated_at":"2020-05-24T14:42:11Z","author_association":"MEMBER","body":"目前event_dispatcher跑在worker里，epoll_wait会无限阻塞worker，如果event_dispatcher_num大于worker数量的话，那么所有worker都被阻塞了。这时候发一个SIGINT，并没有可用worker来做一些清理工作，所以一直卡住了。把event_dispatcher_num设置小于worker数量（至少有一个可用worker）可以暂时规避这个问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633241209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633909211","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-633909211","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":633909211,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMzkwOTIxMQ==","user":{"login":"billowqiu","id":720496,"node_id":"MDQ6VXNlcjcyMDQ5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/720496?v=4","gravatar_id":"","url":"https://api.github.com/users/billowqiu","html_url":"https://github.com/billowqiu","followers_url":"https://api.github.com/users/billowqiu/followers","following_url":"https://api.github.com/users/billowqiu/following{/other_user}","gists_url":"https://api.github.com/users/billowqiu/gists{/gist_id}","starred_url":"https://api.github.com/users/billowqiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/billowqiu/subscriptions","organizations_url":"https://api.github.com/users/billowqiu/orgs","repos_url":"https://api.github.com/users/billowqiu/repos","events_url":"https://api.github.com/users/billowqiu/events{/privacy}","received_events_url":"https://api.github.com/users/billowqiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-26T09:16:13Z","updated_at":"2020-05-26T09:16:13Z","author_association":"NONE","body":"> > 我看文档，感觉bthread 和boost.fiber 差不多\r\n> > 另外bthread用了之后再使用线程的mutex的时候死锁，这个多人开发的时候不太好操作了。没办法每个人都知道哪些函数需要bthread的mutex,哪些是需要thread mutex\r\n> \r\n> +1。那个bthread用std::mutex导致死锁的问题，感觉很蛋疼。\r\n\r\n目前没细看实现，文档里面有这方面的说明么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633909211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633935973","html_url":"https://github.com/apache/brpc/issues/1119#issuecomment-633935973","issue_url":"https://api.github.com/repos/apache/brpc/issues/1119","id":633935973,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMzkzNTk3Mw==","user":{"login":"liumh8","id":26078945,"node_id":"MDQ6VXNlcjI2MDc4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26078945?v=4","gravatar_id":"","url":"https://api.github.com/users/liumh8","html_url":"https://github.com/liumh8","followers_url":"https://api.github.com/users/liumh8/followers","following_url":"https://api.github.com/users/liumh8/following{/other_user}","gists_url":"https://api.github.com/users/liumh8/gists{/gist_id}","starred_url":"https://api.github.com/users/liumh8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liumh8/subscriptions","organizations_url":"https://api.github.com/users/liumh8/orgs","repos_url":"https://api.github.com/users/liumh8/repos","events_url":"https://api.github.com/users/liumh8/events{/privacy}","received_events_url":"https://api.github.com/users/liumh8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-26T10:12:25Z","updated_at":"2020-05-27T10:37:19Z","author_association":"NONE","body":"> 是的，目前有这个问题，正在计划修复，先用非batch版本吧。\r\n\r\n@zyearn 请问这个大概什么时候能修复好？此外，有另一个问题，对于一个命令'set key value'，RedisCommandHandler的Run函数提供了[const std::vector<const char*>& args](https://github.com/apache/incubator-brpc/blob/a3b22660096c4f00cfdffc7571063603ccb5a428/src/brpc/redis.h#L262)这个参数，但是如果value里面包含字符 '\\0'，该怎么处理？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/633935973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634374845","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-634374845","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":634374845,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDM3NDg0NQ==","user":{"login":"dengbq1234","id":65647621,"node_id":"MDQ6VXNlcjY1NjQ3NjIx","avatar_url":"https://avatars.githubusercontent.com/u/65647621?v=4","gravatar_id":"","url":"https://api.github.com/users/dengbq1234","html_url":"https://github.com/dengbq1234","followers_url":"https://api.github.com/users/dengbq1234/followers","following_url":"https://api.github.com/users/dengbq1234/following{/other_user}","gists_url":"https://api.github.com/users/dengbq1234/gists{/gist_id}","starred_url":"https://api.github.com/users/dengbq1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dengbq1234/subscriptions","organizations_url":"https://api.github.com/users/dengbq1234/orgs","repos_url":"https://api.github.com/users/dengbq1234/repos","events_url":"https://api.github.com/users/dengbq1234/events{/privacy}","received_events_url":"https://api.github.com/users/dengbq1234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T01:40:51Z","updated_at":"2020-05-27T01:40:51Z","author_association":"NONE","body":"自动重试和Failed，这两种情况我知道，但前提是得有业务去主动调用rpc接口才能知道failed了，如果业务不想每隔几秒去调用某个接口，但又想知道当前的连接是否有异常，当前好像是没有办法的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634374845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634399316","html_url":"https://github.com/apache/brpc/issues/392#issuecomment-634399316","issue_url":"https://api.github.com/repos/apache/brpc/issues/392","id":634399316,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDM5OTMxNg==","user":{"login":"cstarc","id":11407488,"node_id":"MDQ6VXNlcjExNDA3NDg4","avatar_url":"https://avatars.githubusercontent.com/u/11407488?v=4","gravatar_id":"","url":"https://api.github.com/users/cstarc","html_url":"https://github.com/cstarc","followers_url":"https://api.github.com/users/cstarc/followers","following_url":"https://api.github.com/users/cstarc/following{/other_user}","gists_url":"https://api.github.com/users/cstarc/gists{/gist_id}","starred_url":"https://api.github.com/users/cstarc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cstarc/subscriptions","organizations_url":"https://api.github.com/users/cstarc/orgs","repos_url":"https://api.github.com/users/cstarc/repos","events_url":"https://api.github.com/users/cstarc/events{/privacy}","received_events_url":"https://api.github.com/users/cstarc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T03:04:06Z","updated_at":"2020-05-27T03:04:06Z","author_association":"CONTRIBUTOR","body":"也遇到了类似问题，当A在给B发送普通rpc请求是，同时发送stream，同一个端口，同一个service，会出现此错误， 分开端口就没问题，是不能同一个端口？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634399316/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634412546","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-634412546","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":634412546,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDQxMjU0Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T03:54:53Z","updated_at":"2020-05-27T03:54:53Z","author_association":"MEMBER","body":"既然不想调用某接口，为什么还要知道当前连接是否有异常呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634412546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634533467","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-634533467","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":634533467,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDUzMzQ2Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T09:11:30Z","updated_at":"2020-05-27T09:11:30Z","author_association":"CONTRIBUTOR","body":"有流量吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634533467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634534882","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-634534882","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":634534882,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDUzNDg4Mg==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T09:14:14Z","updated_at":"2020-05-27T09:14:14Z","author_association":"NONE","body":"> 有流量吗？\r\n\r\n有的。生成的contention文件也比较小，只有十几k，感觉是没数据。这种该怎么排查呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634534882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634574156","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-634574156","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":634574156,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDU3NDE1Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T10:33:12Z","updated_at":"2020-05-27T10:33:12Z","author_association":"CONTRIBUTOR","body":"> > 有流量吗？\r\n> \r\n> 有的。生成的contention文件也比较小，只有十几k，感觉是没数据。这种该怎么排查呢？\r\n\r\n那可能就是没有contention","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/634574156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635032520","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-635032520","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":635032520,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTAzMjUyMA==","user":{"login":"dengbq1234","id":65647621,"node_id":"MDQ6VXNlcjY1NjQ3NjIx","avatar_url":"https://avatars.githubusercontent.com/u/65647621?v=4","gravatar_id":"","url":"https://api.github.com/users/dengbq1234","html_url":"https://github.com/dengbq1234","followers_url":"https://api.github.com/users/dengbq1234/followers","following_url":"https://api.github.com/users/dengbq1234/following{/other_user}","gists_url":"https://api.github.com/users/dengbq1234/gists{/gist_id}","starred_url":"https://api.github.com/users/dengbq1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dengbq1234/subscriptions","organizations_url":"https://api.github.com/users/dengbq1234/orgs","repos_url":"https://api.github.com/users/dengbq1234/repos","events_url":"https://api.github.com/users/dengbq1234/events{/privacy}","received_events_url":"https://api.github.com/users/dengbq1234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T01:13:36Z","updated_at":"2020-05-28T01:13:36Z","author_association":"NONE","body":"   我们想在客户端与服务端连接异常（如网络断连）时，做一些处理。如果只有调用接口这一种方法，那业务得专门增加一个检测线程，这与 brpc的 health check 线程的作用重复了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635032520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635064453","html_url":"https://github.com/apache/brpc/issues/1119#issuecomment-635064453","issue_url":"https://api.github.com/repos/apache/brpc/issues/1119","id":635064453,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTA2NDQ1Mw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T02:53:57Z","updated_at":"2020-05-28T02:53:57Z","author_association":"MEMBER","body":"> > 是的，目前有这个问题，正在计划修复，先用非batch版本吧。\r\n> \r\n> @zyearn 请问这个大概什么时候能修复好？此外，有另一个问题，对于一个命令'set key value'，RedisCommandHandler的Run函数提供了[const std::vector<const char*>& args](https://github.com/apache/incubator-brpc/blob/a3b22660096c4f00cfdffc7571063603ccb5a428/src/brpc/redis.h#L262)这个参数，但是如果value里面包含字符 '\\0'，该怎么处理？\r\n\r\nbatch的问题会尽快修复，可能1~2周。目前的实现value不是二进制安全的，可以先做个base64来绕过这个问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635064453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635071949","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-635071949","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":635071949,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTA3MTk0OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T03:19:31Z","updated_at":"2020-05-28T03:19:31Z","author_association":"MEMBER","body":"如果一定要这么做的话，可以实现一个Channel继承brpc::Channel，然后实现CheckHealth接口，具体实现是调用brpc::Channel::CheckHealth()，继承和接口关系看一下Channel和ChannelBase的定义。然后调用chan.CheckHealth()能达到你要的效果","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635071949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635161891","html_url":"https://github.com/apache/brpc/issues/1126#issuecomment-635161891","issue_url":"https://api.github.com/repos/apache/brpc/issues/1126","id":635161891,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTE2MTg5MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T07:25:50Z","updated_at":"2020-05-28T07:25:50Z","author_association":"MEMBER","body":"这个是老版本吧，新版本（master或者0.9.7）已经修复了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635161891/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635324617","html_url":"https://github.com/apache/brpc/pull/1127#issuecomment-635324617","issue_url":"https://api.github.com/repos/apache/brpc/issues/1127","id":635324617,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTMyNDYxNw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T12:39:09Z","updated_at":"2020-05-28T12:39:09Z","author_association":"MEMBER","body":"@liumh8 ci里的单测挂了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635324617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635861391","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-635861391","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":635861391,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTg2MTM5MQ==","user":{"login":"dengbq1234","id":65647621,"node_id":"MDQ6VXNlcjY1NjQ3NjIx","avatar_url":"https://avatars.githubusercontent.com/u/65647621?v=4","gravatar_id":"","url":"https://api.github.com/users/dengbq1234","html_url":"https://github.com/dengbq1234","followers_url":"https://api.github.com/users/dengbq1234/followers","following_url":"https://api.github.com/users/dengbq1234/following{/other_user}","gists_url":"https://api.github.com/users/dengbq1234/gists{/gist_id}","starred_url":"https://api.github.com/users/dengbq1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dengbq1234/subscriptions","organizations_url":"https://api.github.com/users/dengbq1234/orgs","repos_url":"https://api.github.com/users/dengbq1234/repos","events_url":"https://api.github.com/users/dengbq1234/events{/privacy}","received_events_url":"https://api.github.com/users/dengbq1234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T09:03:00Z","updated_at":"2020-05-29T09:03:00Z","author_association":"NONE","body":"ok,多谢，我试一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635861391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635935134","html_url":"https://github.com/apache/brpc/issues/923#issuecomment-635935134","issue_url":"https://api.github.com/repos/apache/brpc/issues/923","id":635935134,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTkzNTEzNA==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T12:02:59Z","updated_at":"2020-05-29T12:02:59Z","author_association":"NONE","body":"这个得看下那个perl脚本，它的逻辑是判断对应执行文件是否在当前目录，如果不在的话，就认为是remote。手动改下脚本就行了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/635935134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636571579","html_url":"https://github.com/apache/brpc/pull/536#issuecomment-636571579","issue_url":"https://api.github.com/repos/apache/brpc/issues/536","id":636571579,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjU3MTU3OQ==","user":{"login":"lacey1102","id":7149382,"node_id":"MDQ6VXNlcjcxNDkzODI=","avatar_url":"https://avatars.githubusercontent.com/u/7149382?v=4","gravatar_id":"","url":"https://api.github.com/users/lacey1102","html_url":"https://github.com/lacey1102","followers_url":"https://api.github.com/users/lacey1102/followers","following_url":"https://api.github.com/users/lacey1102/following{/other_user}","gists_url":"https://api.github.com/users/lacey1102/gists{/gist_id}","starred_url":"https://api.github.com/users/lacey1102/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lacey1102/subscriptions","organizations_url":"https://api.github.com/users/lacey1102/orgs","repos_url":"https://api.github.com/users/lacey1102/repos","events_url":"https://api.github.com/users/lacey1102/events{/privacy}","received_events_url":"https://api.github.com/users/lacey1102/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-01T01:48:31Z","updated_at":"2020-06-01T01:48:31Z","author_association":"NONE","body":"536 muultiple connection目前尚未合入master，是为什么呢？是基于功能、性能等哪方面的考虑呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636571579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636665178","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-636665178","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":636665178,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjY2NTE3OA==","user":{"login":"junxfl","id":24217314,"node_id":"MDQ6VXNlcjI0MjE3MzE0","avatar_url":"https://avatars.githubusercontent.com/u/24217314?v=4","gravatar_id":"","url":"https://api.github.com/users/junxfl","html_url":"https://github.com/junxfl","followers_url":"https://api.github.com/users/junxfl/followers","following_url":"https://api.github.com/users/junxfl/following{/other_user}","gists_url":"https://api.github.com/users/junxfl/gists{/gist_id}","starred_url":"https://api.github.com/users/junxfl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junxfl/subscriptions","organizations_url":"https://api.github.com/users/junxfl/orgs","repos_url":"https://api.github.com/users/junxfl/repos","events_url":"https://api.github.com/users/junxfl/events{/privacy}","received_events_url":"https://api.github.com/users/junxfl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-01T07:30:45Z","updated_at":"2020-06-01T07:30:45Z","author_association":"NONE","body":"大神，我想通过brpc实现分布式存储的数据节点的server，通过顺序读取socket数据保证io顺序，比如client通过socket建立连接之后，通过数据消息传递io数据，服务端接收到网络数据消息之后，直接落盘，然后再次通过socket读取下一个网络数据消息，请问下，stream rpc可以实现这个功能吗？非常感谢。@jamesge @zhijunfu @bailiyang @zyearn 非常感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636665178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636671156","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-636671156","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":636671156,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjY3MTE1Ng==","user":{"login":"dengbq1234","id":65647621,"node_id":"MDQ6VXNlcjY1NjQ3NjIx","avatar_url":"https://avatars.githubusercontent.com/u/65647621?v=4","gravatar_id":"","url":"https://api.github.com/users/dengbq1234","html_url":"https://github.com/dengbq1234","followers_url":"https://api.github.com/users/dengbq1234/followers","following_url":"https://api.github.com/users/dengbq1234/following{/other_user}","gists_url":"https://api.github.com/users/dengbq1234/gists{/gist_id}","starred_url":"https://api.github.com/users/dengbq1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dengbq1234/subscriptions","organizations_url":"https://api.github.com/users/dengbq1234/orgs","repos_url":"https://api.github.com/users/dengbq1234/repos","events_url":"https://api.github.com/users/dengbq1234/events{/privacy}","received_events_url":"https://api.github.com/users/dengbq1234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-01T07:42:21Z","updated_at":"2020-06-01T07:42:21Z","author_association":"NONE","body":"试了一下，继承channel，重载CheckHealth,不起作用。\r\n直接在channel.cpp的checkHealth()里面加打印日志，结果加的打印日志根本没有执行，而加在其它的地方的打印日志有执行。\r\n使用的example/echo++这个例子修改的。\r\n难道CheckHealth函数是做其它用途的?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636671156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636741568","html_url":"https://github.com/apache/brpc/issues/1120#issuecomment-636741568","issue_url":"https://api.github.com/repos/apache/brpc/issues/1120","id":636741568,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjc0MTU2OA==","user":{"login":"onmore","id":11650544,"node_id":"MDQ6VXNlcjExNjUwNTQ0","avatar_url":"https://avatars.githubusercontent.com/u/11650544?v=4","gravatar_id":"","url":"https://api.github.com/users/onmore","html_url":"https://github.com/onmore","followers_url":"https://api.github.com/users/onmore/followers","following_url":"https://api.github.com/users/onmore/following{/other_user}","gists_url":"https://api.github.com/users/onmore/gists{/gist_id}","starred_url":"https://api.github.com/users/onmore/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/onmore/subscriptions","organizations_url":"https://api.github.com/users/onmore/orgs","repos_url":"https://api.github.com/users/onmore/repos","events_url":"https://api.github.com/users/onmore/events{/privacy}","received_events_url":"https://api.github.com/users/onmore/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-01T09:39:41Z","updated_at":"2020-06-01T09:39:41Z","author_association":"NONE","body":"\n\n\n\n\n\n\n\n\nunsubscribe\n\n\n\n\n\n\n\n在 2020-05-22 14:35:55，\"gydong\" <notifications@github.com> 写道：\n\nevent_dispatcher_num 保持默认值即可\n\n—\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636741568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636794417","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-636794417","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":636794417,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjc5NDQxNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-01T11:16:00Z","updated_at":"2020-06-01T11:16:00Z","author_association":"CONTRIBUTOR","body":"这个checkhealth只在SelectiveChannel中有用，其他情况下连接断开时不会去调用的。RPC层面不太会暴露“连接是否在“这种信息的，因为RPC和TCP没有必然联系，完全可以基于不需要连接的传输协议。从这点来说，你的需求也显得有些奇怪，你可以描述地更具体一些，看看是不是其实并不需要“定期去检查连接是否在”","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/636794417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637200663","html_url":"https://github.com/apache/brpc/issues/1118#issuecomment-637200663","issue_url":"https://api.github.com/repos/apache/brpc/issues/1118","id":637200663,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzIwMDY2Mw==","user":{"login":"dengbq1234","id":65647621,"node_id":"MDQ6VXNlcjY1NjQ3NjIx","avatar_url":"https://avatars.githubusercontent.com/u/65647621?v=4","gravatar_id":"","url":"https://api.github.com/users/dengbq1234","html_url":"https://github.com/dengbq1234","followers_url":"https://api.github.com/users/dengbq1234/followers","following_url":"https://api.github.com/users/dengbq1234/following{/other_user}","gists_url":"https://api.github.com/users/dengbq1234/gists{/gist_id}","starred_url":"https://api.github.com/users/dengbq1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dengbq1234/subscriptions","organizations_url":"https://api.github.com/users/dengbq1234/orgs","repos_url":"https://api.github.com/users/dengbq1234/repos","events_url":"https://api.github.com/users/dengbq1234/events{/privacy}","received_events_url":"https://api.github.com/users/dengbq1234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T00:40:45Z","updated_at":"2020-06-02T00:40:45Z","author_association":"NONE","body":"我的需求就是之前描述 的，在网络异常或者服务端异常退出时，客户端做一些相应的处理。我查了下，grpc也没有提供这样的接口。看来rpc偏重调用，对网络通道本身的情况提供的功能接口偏少。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637200663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637442681","html_url":"https://github.com/apache/brpc/issues/1131#issuecomment-637442681","issue_url":"https://api.github.com/repos/apache/brpc/issues/1131","id":637442681,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzQ0MjY4MQ==","user":{"login":"liumh8","id":26078945,"node_id":"MDQ6VXNlcjI2MDc4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26078945?v=4","gravatar_id":"","url":"https://api.github.com/users/liumh8","html_url":"https://github.com/liumh8","followers_url":"https://api.github.com/users/liumh8/followers","following_url":"https://api.github.com/users/liumh8/following{/other_user}","gists_url":"https://api.github.com/users/liumh8/gists{/gist_id}","starred_url":"https://api.github.com/users/liumh8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liumh8/subscriptions","organizations_url":"https://api.github.com/users/liumh8/orgs","repos_url":"https://api.github.com/users/liumh8/repos","events_url":"https://api.github.com/users/liumh8/events{/privacy}","received_events_url":"https://api.github.com/users/liumh8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T10:19:55Z","updated_at":"2020-06-02T10:19:55Z","author_association":"NONE","body":"如果parser返回PARSE_OK，才arena.clear()","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637442681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637443126","html_url":"https://github.com/apache/brpc/issues/1131#issuecomment-637443126","issue_url":"https://api.github.com/repos/apache/brpc/issues/1131","id":637443126,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzQ0MzEyNg==","user":{"login":"liumh8","id":26078945,"node_id":"MDQ6VXNlcjI2MDc4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26078945?v=4","gravatar_id":"","url":"https://api.github.com/users/liumh8","html_url":"https://github.com/liumh8","followers_url":"https://api.github.com/users/liumh8/followers","following_url":"https://api.github.com/users/liumh8/following{/other_user}","gists_url":"https://api.github.com/users/liumh8/gists{/gist_id}","starred_url":"https://api.github.com/users/liumh8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liumh8/subscriptions","organizations_url":"https://api.github.com/users/liumh8/orgs","repos_url":"https://api.github.com/users/liumh8/repos","events_url":"https://api.github.com/users/liumh8/events{/privacy}","received_events_url":"https://api.github.com/users/liumh8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T10:20:48Z","updated_at":"2020-06-02T10:20:48Z","author_association":"NONE","body":"@zyearn 你好，请确认一下是否如上所述？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637443126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637449105","html_url":"https://github.com/apache/brpc/issues/41#issuecomment-637449105","issue_url":"https://api.github.com/repos/apache/brpc/issues/41","id":637449105,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzQ0OTEwNQ==","user":{"login":"baiwfg2","id":5157680,"node_id":"MDQ6VXNlcjUxNTc2ODA=","avatar_url":"https://avatars.githubusercontent.com/u/5157680?v=4","gravatar_id":"","url":"https://api.github.com/users/baiwfg2","html_url":"https://github.com/baiwfg2","followers_url":"https://api.github.com/users/baiwfg2/followers","following_url":"https://api.github.com/users/baiwfg2/following{/other_user}","gists_url":"https://api.github.com/users/baiwfg2/gists{/gist_id}","starred_url":"https://api.github.com/users/baiwfg2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baiwfg2/subscriptions","organizations_url":"https://api.github.com/users/baiwfg2/orgs","repos_url":"https://api.github.com/users/baiwfg2/repos","events_url":"https://api.github.com/users/baiwfg2/events{/privacy}","received_events_url":"https://api.github.com/users/baiwfg2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T10:33:50Z","updated_at":"2020-06-02T10:33:50Z","author_association":"NONE","body":"请问这个官方有计划吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637449105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637608392","html_url":"https://github.com/apache/brpc/issues/1131#issuecomment-637608392","issue_url":"https://api.github.com/repos/apache/brpc/issues/1131","id":637608392,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzYwODM5Mg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T15:15:32Z","updated_at":"2020-06-02T15:15:32Z","author_association":"MEMBER","body":"是的，我看到你在新的commit修复了，我看一下。另外pr还剩两个review意见也修改提交一下吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/637608392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638102042","html_url":"https://github.com/apache/brpc/issues/392#issuecomment-638102042","issue_url":"https://api.github.com/repos/apache/brpc/issues/392","id":638102042,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODEwMjA0Mg==","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-03T10:17:25Z","updated_at":"2020-06-04T03:46:04Z","author_association":"CONTRIBUTOR","body":"好像是普通rpc和streaming rpc不能混用一个连接，可以考虑把streaming rpc的connection_type设置成pooled试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638102042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638125363","html_url":"https://github.com/apache/brpc/issues/392#issuecomment-638125363","issue_url":"https://api.github.com/repos/apache/brpc/issues/392","id":638125363,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODEyNTM2Mw==","user":{"login":"yujun777","id":8347843,"node_id":"MDQ6VXNlcjgzNDc4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/8347843?v=4","gravatar_id":"","url":"https://api.github.com/users/yujun777","html_url":"https://github.com/yujun777","followers_url":"https://api.github.com/users/yujun777/followers","following_url":"https://api.github.com/users/yujun777/following{/other_user}","gists_url":"https://api.github.com/users/yujun777/gists{/gist_id}","starred_url":"https://api.github.com/users/yujun777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yujun777/subscriptions","organizations_url":"https://api.github.com/users/yujun777/orgs","repos_url":"https://api.github.com/users/yujun777/repos","events_url":"https://api.github.com/users/yujun777/events{/privacy}","received_events_url":"https://api.github.com/users/yujun777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-03T11:08:20Z","updated_at":"2020-06-03T11:08:20Z","author_association":"NONE","body":"我也遇到这种报错了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638125363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638590744","html_url":"https://github.com/apache/brpc/pull/1128#issuecomment-638590744","issue_url":"https://api.github.com/repos/apache/brpc/issues/1128","id":638590744,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODU5MDc0NA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T04:10:49Z","updated_at":"2020-06-04T04:10:49Z","author_association":"MEMBER","body":"@liumh8 在github上提交一个commit会自动跑ci的，不用先close再reopen","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638590744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638591963","html_url":"https://github.com/apache/brpc/pull/1128#issuecomment-638591963","issue_url":"https://api.github.com/repos/apache/brpc/issues/1128","id":638591963,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODU5MTk2Mw==","user":{"login":"liumh8","id":26078945,"node_id":"MDQ6VXNlcjI2MDc4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26078945?v=4","gravatar_id":"","url":"https://api.github.com/users/liumh8","html_url":"https://github.com/liumh8","followers_url":"https://api.github.com/users/liumh8/followers","following_url":"https://api.github.com/users/liumh8/following{/other_user}","gists_url":"https://api.github.com/users/liumh8/gists{/gist_id}","starred_url":"https://api.github.com/users/liumh8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liumh8/subscriptions","organizations_url":"https://api.github.com/users/liumh8/orgs","repos_url":"https://api.github.com/users/liumh8/repos","events_url":"https://api.github.com/users/liumh8/events{/privacy}","received_events_url":"https://api.github.com/users/liumh8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T04:15:52Z","updated_at":"2020-06-04T04:16:35Z","author_association":"NONE","body":"> @liumh8 在github上提交一个commit会自动跑ci的，不用先close再reopen\r\n\r\n这个是因为跑ci失败了，我这边好像只能reopen才能让它再跑一次。你看一下这几个ci失败，应该不是我的问题？[694222518](https://travis-ci.org/github/apache/incubator-brpc/builds/694222518)\r\n[692861060](https://travis-ci.org/github/apache/incubator-brpc/builds/692861060)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/638591963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/639232981","html_url":"https://github.com/apache/brpc/issues/1133#issuecomment-639232981","issue_url":"https://api.github.com/repos/apache/brpc/issues/1133","id":639232981,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTIzMjk4MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T03:15:19Z","updated_at":"2020-06-05T03:15:19Z","author_association":"MEMBER","body":"可以找一个example/下的任一例子看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/639232981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/639233365","html_url":"https://github.com/apache/brpc/issues/1133#issuecomment-639233365","issue_url":"https://api.github.com/repos/apache/brpc/issues/1133","id":639233365,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTIzMzM2NQ==","user":{"login":"DieYoungWsn","id":30366098,"node_id":"MDQ6VXNlcjMwMzY2MDk4","avatar_url":"https://avatars.githubusercontent.com/u/30366098?v=4","gravatar_id":"","url":"https://api.github.com/users/DieYoungWsn","html_url":"https://github.com/DieYoungWsn","followers_url":"https://api.github.com/users/DieYoungWsn/followers","following_url":"https://api.github.com/users/DieYoungWsn/following{/other_user}","gists_url":"https://api.github.com/users/DieYoungWsn/gists{/gist_id}","starred_url":"https://api.github.com/users/DieYoungWsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DieYoungWsn/subscriptions","organizations_url":"https://api.github.com/users/DieYoungWsn/orgs","repos_url":"https://api.github.com/users/DieYoungWsn/repos","events_url":"https://api.github.com/users/DieYoungWsn/events{/privacy}","received_events_url":"https://api.github.com/users/DieYoungWsn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T03:16:33Z","updated_at":"2020-06-05T03:16:33Z","author_association":"NONE","body":"我的意思是开启brpc本身框架的log，不用用户自己打的那种","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/639233365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/639260889","html_url":"https://github.com/apache/brpc/issues/1133#issuecomment-639260889","issue_url":"https://api.github.com/repos/apache/brpc/issues/1133","id":639260889,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTI2MDg4OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T05:05:46Z","updated_at":"2020-06-05T05:05:46Z","author_association":"MEMBER","body":"可以用./program --help看一下，搜一下'Flags from src/butil/logging.cc'。\r\n\r\n另一个可能有用的log是-http_verbose，可以把http req/res打印出来。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/639260889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/640176526","html_url":"https://github.com/apache/brpc/issues/1133#issuecomment-640176526","issue_url":"https://api.github.com/repos/apache/brpc/issues/1133","id":640176526,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MDE3NjUyNg==","user":{"login":"DieYoungWsn","id":30366098,"node_id":"MDQ6VXNlcjMwMzY2MDk4","avatar_url":"https://avatars.githubusercontent.com/u/30366098?v=4","gravatar_id":"","url":"https://api.github.com/users/DieYoungWsn","html_url":"https://github.com/DieYoungWsn","followers_url":"https://api.github.com/users/DieYoungWsn/followers","following_url":"https://api.github.com/users/DieYoungWsn/following{/other_user}","gists_url":"https://api.github.com/users/DieYoungWsn/gists{/gist_id}","starred_url":"https://api.github.com/users/DieYoungWsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DieYoungWsn/subscriptions","organizations_url":"https://api.github.com/users/DieYoungWsn/orgs","repos_url":"https://api.github.com/users/DieYoungWsn/repos","events_url":"https://api.github.com/users/DieYoungWsn/events{/privacy}","received_events_url":"https://api.github.com/users/DieYoungWsn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-07T08:21:54Z","updated_at":"2020-06-07T08:21:54Z","author_association":"NONE","body":"好的，非常感谢～","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/640176526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/642573763","html_url":"https://github.com/apache/brpc/pull/1121#issuecomment-642573763","issue_url":"https://api.github.com/repos/apache/brpc/issues/1121","id":642573763,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MjU3Mzc2Mw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-11T11:06:25Z","updated_at":"2020-06-11T11:06:25Z","author_association":"CONTRIBUTOR","body":"what if someone uses thrift whose version less than 0.13.0?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/642573763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/642673163","html_url":"https://github.com/apache/brpc/pull/1121#issuecomment-642673163","issue_url":"https://api.github.com/repos/apache/brpc/issues/1121","id":642673163,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MjY3MzE2Mw==","user":{"login":"curoky","id":53091022,"node_id":"MDQ6VXNlcjUzMDkxMDIy","avatar_url":"https://avatars.githubusercontent.com/u/53091022?v=4","gravatar_id":"","url":"https://api.github.com/users/curoky","html_url":"https://github.com/curoky","followers_url":"https://api.github.com/users/curoky/followers","following_url":"https://api.github.com/users/curoky/following{/other_user}","gists_url":"https://api.github.com/users/curoky/gists{/gist_id}","starred_url":"https://api.github.com/users/curoky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curoky/subscriptions","organizations_url":"https://api.github.com/users/curoky/orgs","repos_url":"https://api.github.com/users/curoky/repos","events_url":"https://api.github.com/users/curoky/events{/privacy}","received_events_url":"https://api.github.com/users/curoky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-11T13:59:38Z","updated_at":"2020-06-11T13:59:38Z","author_association":"NONE","body":"> what if someone uses thrift whose version less than 0.13.0?\r\n\r\nThrift add `_THRIFT_STDCXX_H_` after `0.10.0`, remove it from `0.13.0`.\r\n\r\nThis means that users whose version <= `0.10.0` will fail to compile, but if we don't change it, all users whose version >= `0.13.0` will fail to compile.\r\n\r\nMaybe there is a better way to solve this problem which not need to change default behavior. For example, we can determine whether file `stdcxx.h` exists in cmake or bazel.\r\n\r\nBut no matter what, we should make a change\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/642673163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643733589","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-643733589","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":643733589,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzczMzU4OQ==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T08:06:27Z","updated_at":"2020-06-14T08:06:27Z","author_association":"NONE","body":"@lorinlee 请教一下，这个工具里面通过bthread_frame id之后bt打出来的栈，和在gdb里直接切换到某一个线程下面用bt打印出来的栈两者的区别？\r\n用bthread_frame打印出来的是换出的bthread的堆栈，而用gdb里可以直接切换到某个线程直接bt打印出来的是正被绑定到该线程的bthread的堆栈？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643733589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643739513","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-643739513","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":643739513,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzczOTUxMw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T09:07:38Z","updated_at":"2020-06-14T09:07:38Z","author_association":"CONTRIBUTOR","body":"@kof02guy 是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643739513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643739857","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-643739857","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":643739857,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzczOTg1Nw==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T09:11:31Z","updated_at":"2020-06-14T09:11:31Z","author_association":"NONE","body":"> @kof02guy 是的\r\n\r\n多谢 @lorinlee 再请教一下，用bthread_list列出来的所有的bthread里包含在task_group里面的_rq里的thread吗？我看bthread_list列出来的bthread有一些是\"no stack\"的，是不是因为这些bthread还只是在_rq里，并没有开始执行，所以是\"no stack\"？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643739857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643742916","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-643742916","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":643742916,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc0MjkxNg==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T09:41:52Z","updated_at":"2020-06-14T09:41:52Z","author_association":"CONTRIBUTOR","body":"@kof02guy 是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643742916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643743924","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-643743924","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":643743924,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc0MzkyNA==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T09:52:13Z","updated_at":"2020-06-14T09:52:13Z","author_association":"NONE","body":"> @kof02guy 是的\r\n\r\n我刚才从g_task_group的_rq里面打印出一个tid，但是从bthread_list里面列出来的tid里面没有搜到。这一般是什么原因呀？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643743924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643770988","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-643770988","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":643770988,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc3MDk4OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T14:04:10Z","updated_at":"2020-06-14T14:04:10Z","author_association":"CONTRIBUTOR","body":"可以先尝试设置一下最大并发（-max_concurrency）以避免_rq被打满","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643770988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643913547","html_url":"https://github.com/apache/brpc/pull/1138#issuecomment-643913547","issue_url":"https://api.github.com/repos/apache/brpc/issues/1138","id":643913547,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzkxMzU0Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-15T05:38:16Z","updated_at":"2020-06-15T05:38:16Z","author_association":"CONTRIBUTOR","body":"去空格的改动能否单独一个pr？混在一起日后回看也很不方便","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643913547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643925425","html_url":"https://github.com/apache/brpc/issues/1135#issuecomment-643925425","issue_url":"https://api.github.com/repos/apache/brpc/issues/1135","id":643925425,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzkyNTQyNQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-15T06:14:26Z","updated_at":"2020-06-15T06:14:26Z","author_association":"CONTRIBUTOR","body":"是说当限流发生的时候，会触发 callee 被caller熔断的问题吗？ 限流的error code 是 ELIMIT 这个code是不被熔断机制所惩罚的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/643925425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/644044834","html_url":"https://github.com/apache/brpc/issues/863#issuecomment-644044834","issue_url":"https://api.github.com/repos/apache/brpc/issues/863","id":644044834,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDA0NDgzNA==","user":{"login":"tobegit3hub","id":2715000,"node_id":"MDQ6VXNlcjI3MTUwMDA=","avatar_url":"https://avatars.githubusercontent.com/u/2715000?v=4","gravatar_id":"","url":"https://api.github.com/users/tobegit3hub","html_url":"https://github.com/tobegit3hub","followers_url":"https://api.github.com/users/tobegit3hub/followers","following_url":"https://api.github.com/users/tobegit3hub/following{/other_user}","gists_url":"https://api.github.com/users/tobegit3hub/gists{/gist_id}","starred_url":"https://api.github.com/users/tobegit3hub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobegit3hub/subscriptions","organizations_url":"https://api.github.com/users/tobegit3hub/orgs","repos_url":"https://api.github.com/users/tobegit3hub/repos","events_url":"https://api.github.com/users/tobegit3hub/events{/privacy}","received_events_url":"https://api.github.com/users/tobegit3hub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-15T10:27:57Z","updated_at":"2020-06-15T10:27:57Z","author_association":"CONTRIBUTOR","body":"Thanks @timmyyao and +1 for this issues. We should not require users to set the error code desc as \"Unknown error\" which may return other unicode strings in different language. This may crash the program and we may ignore the issue by updating the code.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/644044834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/644070829","html_url":"https://github.com/apache/brpc/issues/94#issuecomment-644070829","issue_url":"https://api.github.com/repos/apache/brpc/issues/94","id":644070829,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDA3MDgyOQ==","user":{"login":"better0001","id":66950117,"node_id":"MDQ6VXNlcjY2OTUwMTE3","avatar_url":"https://avatars.githubusercontent.com/u/66950117?v=4","gravatar_id":"","url":"https://api.github.com/users/better0001","html_url":"https://github.com/better0001","followers_url":"https://api.github.com/users/better0001/followers","following_url":"https://api.github.com/users/better0001/following{/other_user}","gists_url":"https://api.github.com/users/better0001/gists{/gist_id}","starred_url":"https://api.github.com/users/better0001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/better0001/subscriptions","organizations_url":"https://api.github.com/users/better0001/orgs","repos_url":"https://api.github.com/users/better0001/repos","events_url":"https://api.github.com/users/better0001/events{/privacy}","received_events_url":"https://api.github.com/users/better0001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-15T11:26:17Z","updated_at":"2020-06-15T11:26:17Z","author_association":"NONE","body":"\r\n当前版本parallel channel支持http了吗？谢谢\r\n\r\n> http在当前实现下用不了parallel channel，但可以用[半同步](https://github.com/brpc/brpc/blob/master/docs/cn/client.md#%E5%8D%8A%E5%90%8C%E6%AD%A5)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/644070829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/644553683","html_url":"https://github.com/apache/brpc/issues/1123#issuecomment-644553683","issue_url":"https://api.github.com/repos/apache/brpc/issues/1123","id":644553683,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDU1MzY4Mw==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-16T06:13:06Z","updated_at":"2020-06-16T06:13:06Z","author_association":"MEMBER","body":"这个是已知问题，bthread里面没法跑jni代码.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/644553683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645286189","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-645286189","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":645286189,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTI4NjE4OQ==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T10:16:16Z","updated_at":"2020-06-17T10:16:16Z","author_association":"NONE","body":"> > > 有流量吗？\r\n> > \r\n> > \r\n> > 有的。生成的contention文件也比较小，只有十几k，感觉是没数据。这种该怎么排查呢？\r\n> \r\n> 那可能就是没有contention\r\n\r\n使用这个依赖libprofile么？我这里也用不了，不过网页上错误如下：\r\nFail to execute `perl ./rpc_data/profiling/pprof.pl --dot ./ts ./rpc_data/profiling/180f54b113b35acab63e2f8d1cd0d898/20200617.181201.contention 2>&1 ', No child processes\r\n\r\n生成的.contention文件大约2MB左右","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645286189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645397373","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-645397373","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":645397373,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTM5NzM3Mw==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T14:09:26Z","updated_at":"2020-06-17T14:09:26Z","author_association":"NONE","body":"不依赖的，你这个错误可能是 代码里面ignore了SIGTERM，我之前遇到过同样的问题。\r\n \r\n> 使用这个依赖libprofile么？我这里也用不了，不过网页上错误如下：\r\n> Fail to execute `perl ./rpc_data/profiling/pprof.pl --dot ./ts ./rpc_data/profiling/180f54b113b35acab63e2f8d1cd0d898/20200617.181201.contention 2>&1 ', No child processes\r\n> \r\n> 生成的.contention文件大约2MB左右\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645397373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645712800","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-645712800","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":645712800,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTcxMjgwMA==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T01:24:41Z","updated_at":"2020-06-18T01:24:41Z","author_association":"NONE","body":"> 不依赖的，你这个错误可能是 代码里面ignore了SIGTERM，我之前遇到过同样的问题。\r\n> \r\n> > 使用这个依赖libprofile么？我这里也用不了，不过网页上错误如下：\r\n> > Fail to execute `perl ./rpc_data/profiling/pprof.pl --dot ./ts ./rpc_data/profiling/180f54b113b35acab63e2f8d1cd0d898/20200617.181201.contention 2>&1 ', No child processes\r\n> > 生成的.contention文件大约2MB左右\r\n\r\nSIGTERM不是正常的退出SIGNAL么，这个一般都会被截获然后实现优雅退出的逻辑吧，我们也是的。我这边看到生成的contention文件里面有内容，里面还有各个数字以及相应的内存地址，addr2line是可以正常转换为具体的代码行数的，但是不是图，所以没法看\r\n我理解应该是在转换为图的时候出了什么问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645712800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645722085","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-645722085","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":645722085,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTcyMjA4NQ==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T01:56:31Z","updated_at":"2020-06-18T01:56:31Z","author_association":"NONE","body":"那可能还不太一样，我这边遇到过两个问题：\r\n>  一个是C++的程序，是因为ignore了SIGTERM，错误现象和你的一样，后来解决掉了；\r\n>  另外一个是java里面load C++的so，然后报了这个issue里面的错误，还没有找到原因","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645722085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645728114","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-645728114","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":645728114,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTcyODExNA==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T02:17:46Z","updated_at":"2020-06-18T02:17:46Z","author_association":"NONE","body":"> 那可能还不太一样，我这边遇到过两个问题：\r\n> \r\n> > 一个是C++的程序，是因为ignore了SIGTERM，错误现象和你的一样，后来解决掉了；\r\n> > 另外一个是java里面load C++的so，然后报了这个issue里面的错误，还没有找到原因\r\n\r\n我这边没有用到java。c++的话你说的ignore了sigterm是值没有自己处理sigterm吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645728114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645728694","html_url":"https://github.com/apache/brpc/issues/1125#issuecomment-645728694","issue_url":"https://api.github.com/repos/apache/brpc/issues/1125","id":645728694,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTcyODY5NA==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T02:19:54Z","updated_at":"2020-06-18T02:19:54Z","author_association":"NONE","body":"> > 那可能还不太一样，我这边遇到过两个问题：\r\n> > > 一个是C++的程序，是因为ignore了SIGTERM，错误现象和你的一样，后来解决掉了；\r\n> > > 另外一个是java里面load C++的so，然后报了这个issue里面的错误，还没有找到原因\r\n> \r\n> 我这边没有用到java。c++的话你说的ignore了sigterm是值没有自己处理sigterm吗？\r\n\r\noops，我说错了，是ignore了SIG_CHLD，就是设置了SIG_IGN，因为现在brpc用的popen和子进程交互，如果ignore了这个signal的话，pclose的时候会失败","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645728694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645988854","html_url":"https://github.com/apache/brpc/issues/1145#issuecomment-645988854","issue_url":"https://api.github.com/repos/apache/brpc/issues/1145","id":645988854,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTk4ODg1NA==","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T12:34:28Z","updated_at":"2020-06-18T12:34:28Z","author_association":"CONTRIBUTOR","body":"我发现实际上我们并没有用到 ZLIB，那为什么要有个 `-DHAVE_ZLIB`？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/645988854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/646919045","html_url":"https://github.com/apache/brpc/pull/1146#issuecomment-646919045","issue_url":"https://api.github.com/repos/apache/brpc/issues/1146","id":646919045,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjkxOTA0NQ==","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-20T01:49:30Z","updated_at":"2020-06-20T01:49:30Z","author_association":"CONTRIBUTOR","body":"The failed checks is not related to this change.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/646919045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/646969859","html_url":"https://github.com/apache/brpc/issues/1145#issuecomment-646969859","issue_url":"https://api.github.com/repos/apache/brpc/issues/1145","id":646969859,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Njk2OTg1OQ==","user":{"login":"zyctree","id":17808052,"node_id":"MDQ6VXNlcjE3ODA4MDUy","avatar_url":"https://avatars.githubusercontent.com/u/17808052?v=4","gravatar_id":"","url":"https://api.github.com/users/zyctree","html_url":"https://github.com/zyctree","followers_url":"https://api.github.com/users/zyctree/followers","following_url":"https://api.github.com/users/zyctree/following{/other_user}","gists_url":"https://api.github.com/users/zyctree/gists{/gist_id}","starred_url":"https://api.github.com/users/zyctree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyctree/subscriptions","organizations_url":"https://api.github.com/users/zyctree/orgs","repos_url":"https://api.github.com/users/zyctree/repos","events_url":"https://api.github.com/users/zyctree/events{/privacy}","received_events_url":"https://api.github.com/users/zyctree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-20T09:42:59Z","updated_at":"2020-06-20T09:42:59Z","author_association":"CONTRIBUTOR","body":"add\r\n```\r\nnew_local_repository(\r\n    name = \"zlib\",\r\n    build_file = \"bazel/zlib.BUILD\",\r\n    path = \"bazel/zlib_empty\"\r\n)\r\n```\r\nwith content like\r\n```\r\ncc_library(\r\n    name = \"zlib\",\r\n    linkopts = [\r\n        \"-lz\",\r\n    ],\r\n)\r\n```\r\nin workspace\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/646969859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/647252103","html_url":"https://github.com/apache/brpc/pull/1146#issuecomment-647252103","issue_url":"https://api.github.com/repos/apache/brpc/issues/1146","id":647252103,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzI1MjEwMw==","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T03:33:36Z","updated_at":"2020-06-22T03:33:36Z","author_association":"CONTRIBUTOR","body":"@jamesge would you like to take a look at this MR? The failed CI check is not related to this change.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/647252103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/648611289","html_url":"https://github.com/apache/brpc/issues/1147#issuecomment-648611289","issue_url":"https://api.github.com/repos/apache/brpc/issues/1147","id":648611289,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODYxMTI4OQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-24T06:06:43Z","updated_at":"2020-06-24T06:06:43Z","author_association":"MEMBER","body":"不会","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/648611289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/649196027","html_url":"https://github.com/apache/brpc/pull/1138#issuecomment-649196027","issue_url":"https://api.github.com/repos/apache/brpc/issues/1138","id":649196027,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTE5NjAyNw==","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T03:38:51Z","updated_at":"2020-06-25T03:39:11Z","author_association":"CONTRIBUTOR","body":"去掉了这个pr里去空格的改动，另外提了一个去空格的pr","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/649196027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/650753019","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-650753019","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":650753019,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDc1MzAxOQ==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-28T13:03:00Z","updated_at":"2020-06-28T13:03:00Z","author_association":"NONE","body":"@jamesge 请教一下关于bthread stack的内存管理相关的问题。\r\n就这个问题，现在我们定位到了是由于触碰到了max_map_count，使得task被分配到了pthread上运行。这使得bthread worker线程都被占满（有可能这时候所有的worker都在等被换出的bthread拿到的锁），从而hung住\r\n因此问题的关注点到了bthread的stack count，我从bthread_stack_count这个指标观察，发现这个指标只增不减。在代码里发现，bthread stack会在调用allocate_stack_storage的时候增加，而在deallocate_stack_storage的时候减少，而bthread stack会被object pool来管理。\r\n所以我现在怀疑是object pool里存储了过多的bthread stack对象。这些对象其实已经没有相应实际运行的任务和其对应了，但是还是在object pool中，所以占用了很多的map_count。\r\n所以我想请教一下，这些object会在什么时候被真正释放呢？有什么参数或者方法可以对这些在free listi里的对象的个数进行调节，使其提早释放？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/650753019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]