[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1283371599","html_url":"https://github.com/apache/couchdb/pull/4201#issuecomment-1283371599","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4201","id":1283371599,"node_id":"IC_kwDOAAMmUc5MfrJP","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-19T03:34:32Z","updated_at":"2022-10-19T03:34:32Z","author_association":"CONTRIBUTOR","body":"> I wonder if there's a minor bug in the coverage plugin because when I look at e.g. `.eunit/fabric_open_revs_test.COVER.html` I don't actually see _any_ code that's not covered by tests.\r\n\r\nI noticed that too. The coverage was reported as 100% at some point. But then I did a minor refactoring and it switched 99% even though it still didn't show any red \"missed\" lines in the output. I suspect it's rounding error somewhere.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1283371599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1285787944","html_url":"https://github.com/apache/couchdb/issues/4235#issuecomment-1285787944","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4235","id":1285787944,"node_id":"IC_kwDOAAMmUc5Mo5Eo","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-20T15:49:55Z","updated_at":"2022-10-20T15:49:55Z","author_association":"CONTRIBUTOR","body":"Hi,\n\nwhat do you exactly mean with getsession? Do you mean the data you get from the /_session endpoint?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1285787944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1285800139","html_url":"https://github.com/apache/couchdb/issues/4235#issuecomment-1285800139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4235","id":1285800139,"node_id":"IC_kwDOAAMmUc5Mo8DL","user":{"login":"burotica49","id":82665881,"node_id":"MDQ6VXNlcjgyNjY1ODgx","avatar_url":"https://avatars.githubusercontent.com/u/82665881?v=4","gravatar_id":"","url":"https://api.github.com/users/burotica49","html_url":"https://github.com/burotica49","followers_url":"https://api.github.com/users/burotica49/followers","following_url":"https://api.github.com/users/burotica49/following{/other_user}","gists_url":"https://api.github.com/users/burotica49/gists{/gist_id}","starred_url":"https://api.github.com/users/burotica49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burotica49/subscriptions","organizations_url":"https://api.github.com/users/burotica49/orgs","repos_url":"https://api.github.com/users/burotica49/repos","events_url":"https://api.github.com/users/burotica49/events{/privacy}","received_events_url":"https://api.github.com/users/burotica49/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-20T15:57:39Z","updated_at":"2022-10-20T15:57:39Z","author_association":"NONE","body":"Yes that's it.\r\nBecause I don't see how to retrieve the information of the connected account in another way\r\nThe GET and POST on _session does not return any custom fields from _users","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1285800139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1285815868","html_url":"https://github.com/apache/couchdb/issues/4235#issuecomment-1285815868","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4235","id":1285815868,"node_id":"IC_kwDOAAMmUc5Mo_48","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-20T16:09:44Z","updated_at":"2022-10-20T16:09:44Z","author_association":"CONTRIBUTOR","body":"You can store your user data in special documents. Then you can get your needed informations from that. For more information you can look [here](https://docs.couchdb.org/en/3.2.2-docs/intro/security.html?highlight=_users#authentication-database).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1285815868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289439226","html_url":"https://github.com/apache/couchdb/pull/4232#issuecomment-1289439226","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4232","id":1289439226,"node_id":"IC_kwDOAAMmUc5M20f6","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T18:37:26Z","updated_at":"2022-10-24T18:37:26Z","author_association":"CONTRIBUTOR","body":"Fix #4215.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289439226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289440496","html_url":"https://github.com/apache/couchdb/issues/3608#issuecomment-1289440496","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3608","id":1289440496,"node_id":"IC_kwDOAAMmUc5M20zw","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T18:38:24Z","updated_at":"2022-10-24T18:38:24Z","author_association":"CONTRIBUTOR","body":"Closing this as it seems to work as expected as @noahshaw11 indicated","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289440496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289442396","html_url":"https://github.com/apache/couchdb/issues/3497#issuecomment-1289442396","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3497","id":1289442396,"node_id":"IC_kwDOAAMmUc5M21Rc","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T18:40:02Z","updated_at":"2022-10-24T18:40:02Z","author_association":"CONTRIBUTOR","body":"This is working again. Closing","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289442396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289443795","html_url":"https://github.com/apache/couchdb/pull/4238#issuecomment-1289443795","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4238","id":1289443795,"node_id":"IC_kwDOAAMmUc5M21nT","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T18:41:11Z","updated_at":"2022-10-24T18:41:11Z","author_association":"CONTRIBUTOR","body":"This PR also fixed https://github.com/apache/couchdb/issues/3328","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289443795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289444702","html_url":"https://github.com/apache/couchdb/issues/3328#issuecomment-1289444702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3328","id":1289444702,"node_id":"IC_kwDOAAMmUc5M211e","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T18:42:02Z","updated_at":"2022-10-24T18:42:02Z","author_association":"CONTRIBUTOR","body":"This issue should be fixed by https://github.com/apache/couchdb/pull/4238\r\n\r\nIf attachment are stubbed out then the document chunk will be returned as application/json now instead of a multipart without any nested parts.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289444702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289461528","html_url":"https://github.com/apache/couchdb/issues/3943#issuecomment-1289461528","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3943","id":1289461528,"node_id":"IC_kwDOAAMmUc5M258Y","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T18:57:27Z","updated_at":"2022-10-24T18:57:27Z","author_association":"CONTRIBUTOR","body":"I think it would be hard to justify adding support for multiple _bulk-docs formats at this point since it's a fairly established API at this point. Adding modes would make the API description a bit too confusing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289461528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289492418","html_url":"https://github.com/apache/couchdb/issues/2639#issuecomment-1289492418","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2639","id":1289492418,"node_id":"IC_kwDOAAMmUc5M3BfC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T19:25:07Z","updated_at":"2022-10-24T19:25:07Z","author_association":"CONTRIBUTOR","body":"We provide Debian deb packages for arm64. Using an older or similar version (based off the Debian version ubuntu was based on) should work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289492418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289495607","html_url":"https://github.com/apache/couchdb/issues/3241#issuecomment-1289495607","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3241","id":1289495607,"node_id":"IC_kwDOAAMmUc5M3CQ3","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T19:27:56Z","updated_at":"2022-10-24T19:27:56Z","author_association":"CONTRIBUTOR","body":"It was possible that nodes were not automatically reconnected when network connectivity was restored. We have fixed this by implementing explicit re-connections in https://github.com/apache/couchdb/pull/4182","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289495607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289495776","html_url":"https://github.com/apache/couchdb/pull/4182#issuecomment-1289495776","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4182","id":1289495776,"node_id":"IC_kwDOAAMmUc5M3CTg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T19:28:07Z","updated_at":"2022-10-24T19:28:07Z","author_association":"CONTRIBUTOR","body":"This issue fixes https://github.com/apache/couchdb/issues/3241","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289495776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289500092","html_url":"https://github.com/apache/couchdb/issues/3047#issuecomment-1289500092","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3047","id":1289500092,"node_id":"IC_kwDOAAMmUc5M3DW8","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T19:32:11Z","updated_at":"2022-10-24T19:32:11Z","author_association":"CONTRIBUTOR","body":"Closing as fixed in https://github.com/apache/couchdb/issues/3047#issuecomment-854230247","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289500092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289525851","html_url":"https://github.com/apache/couchdb/issues/2220#issuecomment-1289525851","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2220","id":1289525851,"node_id":"IC_kwDOAAMmUc5M3Jpb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T19:54:40Z","updated_at":"2022-10-24T19:54:40Z","author_association":"CONTRIBUTOR","body":"This behavior is expected. It should be possible to insert a deleted document. `Deleted` is a just a `{\"_deleted\": true}` field or it may have additional data in the document body such as `{\"_deleted\": true, \"extra_data\": \"foo\"}`.\r\n\r\nDocument ID auto-generation is also a supported feature and is orthogonal to the deleted/not deleted feature. If the _id is not present it will be generated as uuid.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289525851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289559799","html_url":"https://github.com/apache/couchdb/issues/4239#issuecomment-1289559799","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4239","id":1289559799,"node_id":"IC_kwDOAAMmUc5M3R73","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T20:17:05Z","updated_at":"2022-10-24T20:17:05Z","author_association":"CONTRIBUTOR","body":"One idea how implement it is to add a separate cleanup channel to smoosh so instead spawning unmonitored processes there is channel which controls both capacity and concurrency of these cleanups. The database object would be clustered databases so if we're already enqueued clustered db `db1` once when we try to enqueue it again we ignore (de-duplicate) the second request.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289559799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289565739","html_url":"https://github.com/apache/couchdb/issues/4239#issuecomment-1289565739","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4239","id":1289565739,"node_id":"IC_kwDOAAMmUc5M3TYr","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-24T20:21:21Z","updated_at":"2022-10-25T14:54:49Z","author_association":"CONTRIBUTOR","body":"Another idea is in addition to the index cleanup also remove stale view purge checkpoints (_local docs). During often view updates those can end up left behind, and when that happens they can prevent further purge request processing. This manifests as warnings and error in the logs as seen in some recent issues like https://github.com/apache/couchdb/issues/4181 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1289565739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290105626","html_url":"https://github.com/apache/couchdb/pull/4232#issuecomment-1290105626","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4232","id":1290105626,"node_id":"IC_kwDOAAMmUc5M5XMa","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-25T07:21:44Z","updated_at":"2022-10-25T07:21:44Z","author_association":"CONTRIBUTOR","body":"Merging this now, getting no further responses or vetos from the dev mailing list.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290105626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290107775","html_url":"https://github.com/apache/couchdb/issues/4215#issuecomment-1290107775","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4215","id":1290107775,"node_id":"IC_kwDOAAMmUc5M5Xt_","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-25T07:23:59Z","updated_at":"2022-10-25T07:23:59Z","author_association":"CONTRIBUTOR","body":"Fixed by #4232.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290107775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290113908","html_url":"https://github.com/apache/couchdb/issues/4022#issuecomment-1290113908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4022","id":1290113908,"node_id":"IC_kwDOAAMmUc5M5ZN0","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-25T07:29:46Z","updated_at":"2022-10-25T07:29:46Z","author_association":"CONTRIBUTOR","body":"Getting no response, closing now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290113908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290115369","html_url":"https://github.com/apache/couchdb/issues/3960#issuecomment-1290115369","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3960","id":1290115369,"node_id":"IC_kwDOAAMmUc5M5Zkp","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-25T07:31:09Z","updated_at":"2022-10-25T07:31:09Z","author_association":"CONTRIBUTOR","body":"Fixed by #3960.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290115369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290124594","html_url":"https://github.com/apache/couchdb/issues/3581#issuecomment-1290124594","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3581","id":1290124594,"node_id":"IC_kwDOAAMmUc5M5b0y","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-25T07:39:47Z","updated_at":"2022-10-25T07:39:47Z","author_association":"CONTRIBUTOR","body":"Closing this, we're >= Erlang 23 right now. Please reopen if it'S not working with the actual windows version of CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290124594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290130011","html_url":"https://github.com/apache/couchdb/issues/3823#issuecomment-1290130011","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3823","id":1290130011,"node_id":"IC_kwDOAAMmUc5M5dJb","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-25T07:44:53Z","updated_at":"2022-10-25T07:44:53Z","author_association":"CONTRIBUTOR","body":"Closing this, can't reproduce with latest main.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1290130011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1291472010","html_url":"https://github.com/apache/couchdb/issues/3328#issuecomment-1291472010","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3328","id":1291472010,"node_id":"IC_kwDOAAMmUc5M-kyK","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-26T04:12:59Z","updated_at":"2022-10-26T04:12:59Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/couchdb/pull/4238  merged to main. Closing the issue as fixed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1291472010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1291556050","html_url":"https://github.com/apache/couchdb/pull/4242#issuecomment-1291556050","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4242","id":1291556050,"node_id":"IC_kwDOAAMmUc5M-5TS","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-26T06:19:37Z","updated_at":"2022-10-26T06:19:37Z","author_association":"CONTRIBUTOR","body":"Note: that in order to pass the main Jenkins CI had to reformat it the code with `erlfmt` before committing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1291556050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293351452","html_url":"https://github.com/apache/couchdb/issues/1374#issuecomment-1293351452","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1374","id":1293351452,"node_id":"IC_kwDOAAMmUc5NFvoc","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T10:58:18Z","updated_at":"2022-10-27T10:58:18Z","author_association":"CONTRIBUTOR","body":"Closing, fixed by #1375.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293351452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293357733","html_url":"https://github.com/apache/couchdb/pull/1443#issuecomment-1293357733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1443","id":1293357733,"node_id":"IC_kwDOAAMmUc5NFxKl","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:03:32Z","updated_at":"2022-10-27T11:03:32Z","author_association":"CONTRIBUTOR","body":"Any plans to get this in? Maybe this needs a rebase to `main`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293357733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293383204","html_url":"https://github.com/apache/couchdb/issues/1909#issuecomment-1293383204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1909","id":1293383204,"node_id":"IC_kwDOAAMmUc5NF3Yk","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:25:24Z","updated_at":"2022-10-27T11:25:24Z","author_association":"CONTRIBUTOR","body":"Closing this, tag 1.7.2 isn't online, but the sources are released at the archive server.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293383204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293385812","html_url":"https://github.com/apache/couchdb/issues/1618#issuecomment-1293385812","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1618","id":1293385812,"node_id":"IC_kwDOAAMmUc5NF4BU","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:27:56Z","updated_at":"2022-10-27T11:27:56Z","author_association":"CONTRIBUTOR","body":"Closing this old ticket. Please reopen if your problem exists with the newest version of CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293385812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293394087","html_url":"https://github.com/apache/couchdb/issues/1978#issuecomment-1293394087","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1978","id":1293394087,"node_id":"IC_kwDOAAMmUc5NF6Cn","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:35:19Z","updated_at":"2022-10-27T11:35:19Z","author_association":"CONTRIBUTOR","body":"Closing this old ticket. Please reopen if your problem exists with the newest version of CouchDB. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293394087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293401059","html_url":"https://github.com/apache/couchdb/issues/3349#issuecomment-1293401059","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3349","id":1293401059,"node_id":"IC_kwDOAAMmUc5NF7vj","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:41:41Z","updated_at":"2022-10-27T11:41:41Z","author_association":"CONTRIBUTOR","body":"Closing this, belonging to [janl/couchdb-mac-app](https://github.com/janl/couchdb-mac-app).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293401059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293404511","html_url":"https://github.com/apache/couchdb/issues/4228#issuecomment-1293404511","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4228","id":1293404511,"node_id":"IC_kwDOAAMmUc5NF8lf","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:45:04Z","updated_at":"2022-10-27T11:45:04Z","author_association":"CONTRIBUTOR","body":"@hadrysmateusz, @Syedpash Is this still an issue?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293404511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293407319","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1293407319","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1293407319,"node_id":"IC_kwDOAAMmUc5NF9RX","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:47:47Z","updated_at":"2022-10-27T11:47:47Z","author_association":"CONTRIBUTOR","body":"@CanRau Is this still an issue?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293407319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293413227","html_url":"https://github.com/apache/couchdb/issues/3758#issuecomment-1293413227","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3758","id":1293413227,"node_id":"IC_kwDOAAMmUc5NF-tr","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T11:53:15Z","updated_at":"2022-10-27T11:53:15Z","author_association":"CONTRIBUTOR","body":"@meveno Nested JWT-Tokens isn't pissible with `roles_claim_name`. A new parameter [roles_claim_path](https://docs.couchdb.org/en/latest/config/auth.html#jwt_auth/roles_claim_path) is fixing this issue. You can use it, if you build couchdb from source or wait for the next release. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293413227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293595875","html_url":"https://github.com/apache/couchdb/pull/1443#issuecomment-1293595875","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1443","id":1293595875,"node_id":"IC_kwDOAAMmUc5NGrTj","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T14:18:17Z","updated_at":"2022-10-27T14:18:17Z","author_association":"CONTRIBUTOR","body":"We have implemented something like this which also allows getting multiple db infos:\r\n\r\n```\r\n% http $DB/_dbs_info'?key=\"db1\"'\r\n\r\n[\r\n    {\r\n        \"info\": {\r\n            \"cluster\": {\r\n                \"n\": 1,\r\n                \"q\": 2,\r\n                \"r\": 1,\r\n                \"w\": 1\r\n            },\r\n            \"compact_running\": false,\r\n            \"db_name\": \"db1\",\r\n            \"disk_format_version\": 8,\r\n            \"doc_count\": 0,\r\n            \"doc_del_count\": 0,\r\n            \"instance_start_time\": \"1666880205\",\r\n            \"props\": {},\r\n            \"purge_seq\": \"0-g1AAAABTeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQeC5BkaABS_4EgK5EBp8pEhqR6iJIsACz0Fj4\",\r\n            \"sizes\": {\r\n                \"active\": 0,\r\n                \"external\": 0,\r\n                \"file\": 16696\r\n            },\r\n            \"update_seq\": \"0-g1AAAACTeJzLYWBgYMpgTmHgz8tPSTV0MDQy1zMAQsMckEQeC5BkaABS_4EgK4M5kSEXKMBubmCckmRkhKkLp0mJDEn1KEYYGCcZmiVjMSILABMCI_8\"\r\n        },\r\n        \"key\": \"db1\"\r\n    }\r\n]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293595875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293816057","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1293816057","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1293816057,"node_id":"IC_kwDOAAMmUc5NHhD5","user":{"login":"CanRau","id":5196971,"node_id":"MDQ6VXNlcjUxOTY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/5196971?v=4","gravatar_id":"","url":"https://api.github.com/users/CanRau","html_url":"https://github.com/CanRau","followers_url":"https://api.github.com/users/CanRau/followers","following_url":"https://api.github.com/users/CanRau/following{/other_user}","gists_url":"https://api.github.com/users/CanRau/gists{/gist_id}","starred_url":"https://api.github.com/users/CanRau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CanRau/subscriptions","organizations_url":"https://api.github.com/users/CanRau/orgs","repos_url":"https://api.github.com/users/CanRau/repos","events_url":"https://api.github.com/users/CanRau/events{/privacy}","received_events_url":"https://api.github.com/users/CanRau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T16:59:32Z","updated_at":"2022-10-27T16:59:32Z","author_association":"NONE","body":"Sorry I don't know as I'm not working on this anymore, so at least for me it's not and could be closed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293816057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293821701","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1293821701","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1293821701,"node_id":"IC_kwDOAAMmUc5NHicF","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T17:04:52Z","updated_at":"2022-10-27T17:04:52Z","author_association":"NONE","body":"I can make a test.\r\nIs required to make the test on the latest stable version?\r\nCan I test using `apache/couchdb:latest` docker image?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293821701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293854750","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1293854750","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1293854750,"node_id":"IC_kwDOAAMmUc5NHqge","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T17:35:49Z","updated_at":"2022-10-27T17:35:49Z","author_association":"CONTRIBUTOR","body":"Try it with the latest source from main or with 3.2.2. I can't say something to use inside docker, but you can test it...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293854750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293927901","html_url":"https://github.com/apache/couchdb/pull/4245#issuecomment-1293927901","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4245","id":1293927901,"node_id":"IC_kwDOAAMmUc5NH8Xd","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-27T18:45:48Z","updated_at":"2022-10-27T18:45:48Z","author_association":"CONTRIBUTOR","body":"Before:\r\n\r\n```\r\nsmoosh_server:get_priority(foo, {<<\"shards/80000000-ffffffff/db2.1666895357\">>, <<\"x\">>}).\r\n** exception error: no case clause matching {database_does_not_exist,\r\n                                                [{mem3_shards,load_shards_from_db,\"db2\",\r\n                                                     [{file,\"src/mem3_shards.erl\"},{line,430}]},\r\n                                                 {mem3_shards,load_shards_from_disk,1,\r\n                                                     [{file,\"src/mem3_shards.erl\"},{line,405}]},\r\n                                                 {mem3_shards,load_shards_from_disk,2,\r\n                                                     [{file,\"src/mem3_shards.erl\"},{line,434}]},\r\n                                                 {mem3_shards,for_docid,3,\r\n                                                     [{file,\"src/mem3_shards.erl\"},{line,100}]},\r\n                                                 {fabric_doc_open,go,3,\r\n                                                     [{file,\"src/fabric_doc_open.erl\"},{line,39}]},\r\n                                                 {couch_index_server,'-get_index/3-fun-0-',2,\r\n                                                     [{file,\"src/couch_index_server.erl\"},{line,74}]}]}\r\n     in function  smoosh_server:get_priority/2 (src/smoosh_server.erl, line 348)\r\n```\r\n\r\nWith the PR:\r\n\r\n```\r\nsmoosh_server:get_priority(foo, {<<\"shards/80000000-ffffffff/db2.1666895357\">>, <<\"x\">>}).\r\n0\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1293927901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1294361573","html_url":"https://github.com/apache/couchdb/pull/4246#issuecomment-1294361573","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4246","id":1294361573,"node_id":"IC_kwDOAAMmUc5NJmPl","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-28T02:21:53Z","updated_at":"2022-10-28T02:21:53Z","author_association":"CONTRIBUTOR","body":"Ah good point. I'll lower the iteration count.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1294361573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1296343437","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1296343437","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1296343437,"node_id":"IC_kwDOAAMmUc5NRKGN","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-30T20:23:21Z","updated_at":"2022-10-30T20:23:21Z","author_association":"CONTRIBUTOR","body":"This still works perfectly for me, since 2.3.x til 3.2.2 atm.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1296343437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1298108185","html_url":"https://github.com/apache/couchdb/issues/2791#issuecomment-1298108185","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2791","id":1298108185,"node_id":"IC_kwDOAAMmUc5NX48Z","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-01T07:05:00Z","updated_at":"2022-11-01T07:05:00Z","author_association":"CONTRIBUTOR","body":"Closing wil close this for now, @sergey-safarov if you have a reproducible test case, please re-open this issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1298108185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1300712103","html_url":"https://github.com/apache/couchdb/issues/4253#issuecomment-1300712103","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4253","id":1300712103,"node_id":"IC_kwDOAAMmUc5Nh0qn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-02T15:40:28Z","updated_at":"2022-11-02T15:40:28Z","author_association":"CONTRIBUTOR","body":"To point that that https://github.com/apache/couchdb/pull/3832 followed the existing design of POST _dbs_info as far as admin permissions go. We should fix the permissions for both GET and the POST version though before the next release.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1300712103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1301648282","html_url":"https://github.com/apache/couchdb/issues/2867#issuecomment-1301648282","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2867","id":1301648282,"node_id":"IC_kwDOAAMmUc5NlZOa","user":{"login":"pauljonescodes","id":1176952,"node_id":"MDQ6VXNlcjExNzY5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1176952?v=4","gravatar_id":"","url":"https://api.github.com/users/pauljonescodes","html_url":"https://github.com/pauljonescodes","followers_url":"https://api.github.com/users/pauljonescodes/followers","following_url":"https://api.github.com/users/pauljonescodes/following{/other_user}","gists_url":"https://api.github.com/users/pauljonescodes/gists{/gist_id}","starred_url":"https://api.github.com/users/pauljonescodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pauljonescodes/subscriptions","organizations_url":"https://api.github.com/users/pauljonescodes/orgs","repos_url":"https://api.github.com/users/pauljonescodes/repos","events_url":"https://api.github.com/users/pauljonescodes/events{/privacy}","received_events_url":"https://api.github.com/users/pauljonescodes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T05:14:18Z","updated_at":"2022-11-03T05:14:18Z","author_association":"NONE","body":"I am also experiencing what @mikeymckay is reporting. I can create admins, but when I attempt to use them to create a user:\r\n\r\n```\r\ncurl -X PUT http://localhost:5984/_users/org.couchdb.user:jan \\ ;; subsititing my values\r\n     -H \"Accept: application/json\" \\\r\n     -H \"Content-Type: application/json\" \\\r\n     -d '{\"name\": \"jan\", \"password\": \"apple\", \"roles\": [], \"type\": \"user\"}'\r\n```\r\n\r\nI receive: `{\"error\":\"unknown_error\",\"reason\":\"undefined\"}`, running an add user from Fauxton also fails, as does verifying the installation on step `Create View`.\r\n\r\nI have a suspicion that this is a problem with the \"Bitnami\" side of things, though that's only a guess.\r\n\r\n```\r\n[error] 2022-11-03T05:03:05.683431Z couchdb@127.0.0.1 <0.521.0> -------- OS Process Error <0.522.0> :: {os_process_error,{exit_status,139}}\r\n[notice] 2022-11-03T05:03:08.330962Z couchdb@127.0.0.1 <0.374.0> -------- couch_replicator_clustering : cluster stable\r\n[notice] 2022-11-03T05:03:08.335963Z couchdb@127.0.0.1 <0.401.0> -------- Started replicator db changes listener <0.540.0>\r\n[info] 2022-11-03T05:03:08.336856Z couchdb@127.0.0.1 <0.542.0> -------- open_result error {not_found,no_db_file} for _replicator\r\n[error] 2022-11-03T05:03:10.648455Z couchdb@127.0.0.1 <0.513.0> -------- rexi_server: from: couchdb@127.0.0.1(<0.509.0>) mfa: fabric_rpc:update_docs/3 exit:{timeout,{gen_server,call,[couch_proc_manager,{get_proc,{doc,<<\"_design/_auth\">>,{1,[<<117,58,224,21,122,139,26,34,51,159,60,14,244,241,191,25>>]},{[{<<\"language\">>,<<\"javascript\">>},{<<\"validate_doc_update\">>,<<\"\\n    function(newDoc, oldDoc, userCtx, secObj) {\\n        if (newDoc._deleted === true) {\\n            // allow deletes by admins and matching users\\n            // without checking the other fields\\n            if ((userCtx.roles.indexOf('_admin') !== -1) ||\\n                (userCtx.name == oldDoc.name)) {\\n                return;\\n            } else {\\n                throw({forbidden: 'Only admins may delete other user docs.'});\\n            }\\n        }\\n\\n        if (newDoc.type !== 'user') {\\n            throw({forbidden : 'doc.type must be user'});\\n        } // we only allow user docs for now\\n\\n        if (!newDoc.name) {\\n            throw({forbidden: 'doc.name is required'});\\n        }\\n\\n        if (!newDoc.roles) {\\n            throw({forbidden: 'doc.roles must exist'});\\n        }\\n\\n        if (!isArray(newDoc.roles)) {\\n            throw({forbidden: 'doc.roles must be an array'});\\n        }\\n\\n        for (var idx = 0; idx < newDoc.roles.length; idx++) {\\n            if (typeof newDoc.roles[idx] !== 'string') {\\n                throw({forbidden: 'doc.roles can only contain strings'});\\n            }\\n        }\\n\\n        if (newDoc._id !== ('org.couchdb.user:' + newDoc.name)) {\\n            throw({\\n                forbidden: 'Doc ID must be of the form org.couchdb.user:name'\\n            });\\n        }\\n\\n        if (oldDoc) { // validate all updates\\n            if (oldDoc.name !== newDoc.name) {\\n                throw({forbidden: 'Usernames can not be changed.'});\\n            }\\n        }\\n\\n        if (newDoc.password_sha && !newDoc.salt) {\\n            throw({\\n                forbidden: 'Users with password_sha must have a salt.' +\\n                    'See /_utils/script/couch.js for example code.'\\n            });\\n        }\\n\\n        var available_schemes = [\\\"simple\\\", \\\"pbkdf2\\\", \\\"bcrypt\\\"];\\n        if (newDoc.password_scheme\\n                && available_schemes.indexOf(newDoc.password_scheme) == -1) {\\n            throw({\\n                forbidden: 'Password scheme `' + newDoc.password_scheme\\n                    + '` not supported.'\\n            });\\n        }\\n\\n        if (newDoc.password_scheme === \\\"pbkdf2\\\") {\\n            if (typeof(newDoc.iterations) !== \\\"number\\\") {\\n               throw({forbidden: \\\"iterations must be a number.\\\"});\\n            }\\n            if (typeof(newDoc.derived_key) !== \\\"string\\\") {\\n               throw({forbidden: \\\"derived_key must be a string.\\\"});\\n            }\\n        }\\n\\n        var is_server_or_database_admin = function(userCtx, secObj) {\\n            // see if the user is a server admin\\n            if(userCtx.roles.indexOf('_admin') !== -1) {\\n                return true; // a server admin\\n            }\\n\\n            // see if the user a database admin specified by name\\n            if(secObj && secObj.admins && secObj.admins.names) {\\n                if(secObj.admins.names.indexOf(userCtx.name) !== -1) {\\n                    return true; // database admin\\n                }\\n            }\\n\\n            // see if the user a database admin specified by role\\n            if(secObj && secObj.admins && secObj.admins.roles) {\\n                var db_roles = secObj.admins.roles;\\n                for(var idx = 0; idx < userCtx.roles.length; idx++) {\\n                    var user_role = userCtx.roles[idx];\\n                    if(db_roles.indexOf(user_role) !== -1) {\\n                        return true; // role matches!\\n                    }\\n                }\\n            }\\n\\n            return false; // default to no admin\\n        }\\n\\n        if (!is_server_or_database_admin(userCtx, secObj)) {\\n            if (oldDoc) { // validate non-admin updates\\n                if (userCtx.name !== newDoc.name) {\\n                    throw({\\n                        forbidden: 'You may only update your own user document.'\\n                    });\\n                }\\n                // validate role updates\\n                var oldRoles = (oldDoc.roles || []).sort();\\n                var newRoles = newDoc.roles.sort();\\n\\n                if (oldRoles.length !== newRoles.length) {\\n                    throw({forbidden: 'Only _admin may edit roles'});\\n                }\\n\\n                for (var i = 0; i < oldRoles.length; i++) {\\n                    if (oldRoles[i] !== newRoles[i]) {\\n                        throw({forbidden: 'Only _admin may edit roles'});\\n                    }\\n                }\\n            } else if (newDoc.roles.length > 0) {\\n                throw({forbidden: 'Only _admin may set roles'});\\n            }\\n        }\\n\\n        // no system roles in users db\\n        for (var i = 0; i < newDoc.roles.length; i++) {\\n            if (newDoc.roles[i] !== '_metrics') {\\n              if (newDoc.roles[i][0] === '_') {\\n                  throw({\\n                      forbidden:\\n                      'No system roles (starting with underscore) in users db.'\\n                  });\\n              }\\n            }\\n        }\\n\\n        // no system names as names\\n        if (newDoc.name[0] === '_') {\\n            throw({forbidden: 'Username may not start with underscore.'});\\n        }\\n\\n        var badUserNameChars = [':'];\\n\\n        for (var i = 0; i < badUserNameChars.length; i++) {\\n            if (newDoc.name.indexOf(badUserNameChars[i]) >= 0) {\\n                throw({forbidden: 'Character `' + badUserNameChars[i] +\\n                        '` is not allowed in usernames.'});\\n            }\\n        }\\n    }\\n\">>}]},[],false,[]},{<<\"_design/_auth\">>,<<\"1-753ae0157a8b1a22339f3c0ef4f1bf19\">>}},5000]}} [{gen_server,call,3,[{file,\"gen_server.erl\"},{line,247}]},{couch_query_servers,get_ddoc_process,2,[{file,\"src/couch_query_servers.erl\"},{line,630}]},{couch_query_servers,with_ddoc_proc,2,[{file,\"src/couch_query_servers.erl\"},{line,525}]},{couch_query_servers,validate_doc_update,5,[{file,\"src/couch_query_servers.erl\"},{line,368}]},{couch_db,'-validate_doc_update_int/3-lc$^0/1-0-',5,[{file,\"src/couch_db.erl\"},{line,914}]},{couch_db,'-validate_doc_update_int/3-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,917}]},{couch_stats,update_histogram,2,[{file,\"src/couch_stats.erl\"},{line,102}]},{couch_db,'-prep_and_validate_updates/6-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,1014}]}]\r\n[notice] 2022-11-03T05:03:10.659312Z couchdb@127.0.0.1 <0.487.0> 95d609dc5c 34.97.188.226:5984 24.185.35.19 admin PUT /_users/org.couchdb.user:jan 500 ok 5096\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1301648282/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1301808787","html_url":"https://github.com/apache/couchdb/pull/4254#issuecomment-1301808787","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4254","id":1301808787,"node_id":"IC_kwDOAAMmUc5NmAaT","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T09:02:36Z","updated_at":"2022-11-03T09:02:36Z","author_association":"MEMBER","body":"I foresee people coming back and wanting one closed but not the other. Do we really want to make this a single setting or should we introduce a new `admin_only_dbs_info` config?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1301808787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1302222761","html_url":"https://github.com/apache/couchdb/pull/4254#issuecomment-1302222761","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4254","id":1302222761,"node_id":"IC_kwDOAAMmUc5Nnlep","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T14:45:09Z","updated_at":"2022-11-03T14:47:18Z","author_association":"CONTRIBUTOR","body":"Mainly to avoid introducing another config option and since _dbs_info is essentially a fancy extension of _all_dbs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1302222761/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1302755661","html_url":"https://github.com/apache/couchdb/issues/2867#issuecomment-1302755661","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2867","id":1302755661,"node_id":"IC_kwDOAAMmUc5NpnlN","user":{"login":"pauljonescodes","id":1176952,"node_id":"MDQ6VXNlcjExNzY5NTI=","avatar_url":"https://avatars.githubusercontent.com/u/1176952?v=4","gravatar_id":"","url":"https://api.github.com/users/pauljonescodes","html_url":"https://github.com/pauljonescodes","followers_url":"https://api.github.com/users/pauljonescodes/followers","following_url":"https://api.github.com/users/pauljonescodes/following{/other_user}","gists_url":"https://api.github.com/users/pauljonescodes/gists{/gist_id}","starred_url":"https://api.github.com/users/pauljonescodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pauljonescodes/subscriptions","organizations_url":"https://api.github.com/users/pauljonescodes/orgs","repos_url":"https://api.github.com/users/pauljonescodes/repos","events_url":"https://api.github.com/users/pauljonescodes/events{/privacy}","received_events_url":"https://api.github.com/users/pauljonescodes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T22:35:18Z","updated_at":"2022-11-03T22:35:18Z","author_association":"NONE","body":"I have confirmed this is something to do with Bitnami's distribution, when I follow these instructions:\r\n\r\nhttps://www.linode.com/docs/guides/install-couchdb-20-on-ubuntu/\r\n\r\nI receive no such errors.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1302755661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1303012248","html_url":"https://github.com/apache/couchdb/issues/3319#issuecomment-1303012248","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3319","id":1303012248,"node_id":"IC_kwDOAAMmUc5NqmOY","user":{"login":"WillBDaniels","id":4605758,"node_id":"MDQ6VXNlcjQ2MDU3NTg=","avatar_url":"https://avatars.githubusercontent.com/u/4605758?v=4","gravatar_id":"","url":"https://api.github.com/users/WillBDaniels","html_url":"https://github.com/WillBDaniels","followers_url":"https://api.github.com/users/WillBDaniels/followers","following_url":"https://api.github.com/users/WillBDaniels/following{/other_user}","gists_url":"https://api.github.com/users/WillBDaniels/gists{/gist_id}","starred_url":"https://api.github.com/users/WillBDaniels/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WillBDaniels/subscriptions","organizations_url":"https://api.github.com/users/WillBDaniels/orgs","repos_url":"https://api.github.com/users/WillBDaniels/repos","events_url":"https://api.github.com/users/WillBDaniels/events{/privacy}","received_events_url":"https://api.github.com/users/WillBDaniels/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T06:02:02Z","updated_at":"2022-11-04T06:02:02Z","author_association":"NONE","body":"Big +1 to this feature. Specifically, this bug blocks integration with AWS Cognito, who's `kid` is always suffixed with a `=`. Since that's the case, there's no way for jwt's generated from logging into cognito to them be used for auth in CouchDB :( \r\n@mtenrero did you get any traction re-opening/moving that PR over to the main repo from the (now archived) config? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1303012248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1303109564","html_url":"https://github.com/apache/couchdb/issues/4258#issuecomment-1303109564","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4258","id":1303109564,"node_id":"IC_kwDOAAMmUc5Nq9-8","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-04T08:24:53Z","updated_at":"2022-11-04T08:24:53Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\nthere is no config option to disable the server version header. If you really need to hide this, you need to comment out [these](https://github.com/apache/couchdb/blob/7f1d2b2ed63be13a7297e0d229b78e620a4204b8/src/couch/src/couch_httpd.erl#L1206-L1208) lines and compile CouchDB by yourself. The server header will then be replaced by a default one from MochiWeb.\r\n\r\nPlease keep in mind that security by obscurity alone does not create a higher level of security.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1303109564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1305322029","html_url":"https://github.com/apache/couchdb/issues/3319#issuecomment-1305322029","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3319","id":1305322029,"node_id":"IC_kwDOAAMmUc5NzaIt","user":{"login":"mtenrero","id":6759022,"node_id":"MDQ6VXNlcjY3NTkwMjI=","avatar_url":"https://avatars.githubusercontent.com/u/6759022?v=4","gravatar_id":"","url":"https://api.github.com/users/mtenrero","html_url":"https://github.com/mtenrero","followers_url":"https://api.github.com/users/mtenrero/followers","following_url":"https://api.github.com/users/mtenrero/following{/other_user}","gists_url":"https://api.github.com/users/mtenrero/gists{/gist_id}","starred_url":"https://api.github.com/users/mtenrero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtenrero/subscriptions","organizations_url":"https://api.github.com/users/mtenrero/orgs","repos_url":"https://api.github.com/users/mtenrero/repos","events_url":"https://api.github.com/users/mtenrero/events{/privacy}","received_events_url":"https://api.github.com/users/mtenrero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-07T09:23:27Z","updated_at":"2022-11-07T09:23:27Z","author_association":"NONE","body":"> Big +1 to this feature. Specifically, this bug blocks integration with AWS Cognito, who's `kid` is always suffixed with a `=`. Since that's the case, there's no way for jwt's generated from logging into cognito to them be used for auth in CouchDB :( @mtenrero did you get any traction re-opening/moving that PR over to the main repo from the (now archived) config?\r\n\r\nsure, I'll work on this during this week.\r\n\r\nI did this change specifically for cognito as well :D ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1305322029/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1306845479","html_url":"https://github.com/apache/couchdb/issues/3047#issuecomment-1306845479","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3047","id":1306845479,"node_id":"IC_kwDOAAMmUc5N5OEn","user":{"login":"molecular","id":589745,"node_id":"MDQ6VXNlcjU4OTc0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/589745?v=4","gravatar_id":"","url":"https://api.github.com/users/molecular","html_url":"https://github.com/molecular","followers_url":"https://api.github.com/users/molecular/followers","following_url":"https://api.github.com/users/molecular/following{/other_user}","gists_url":"https://api.github.com/users/molecular/gists{/gist_id}","starred_url":"https://api.github.com/users/molecular/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/molecular/subscriptions","organizations_url":"https://api.github.com/users/molecular/orgs","repos_url":"https://api.github.com/users/molecular/repos","events_url":"https://api.github.com/users/molecular/events{/privacy}","received_events_url":"https://api.github.com/users/molecular/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-08T08:49:17Z","updated_at":"2022-11-08T09:33:08Z","author_association":"NONE","body":"@seigel has this ever resolved for me?\r\n\r\nYeah, kind of. I tune based on observing:\r\n\r\n```sh\r\ncurl -s -u admin2:<pw> -X GET http://localhost:5984/<db> | \\\r\njq '\r\n{ \r\n\tsizes: {\r\n\t\tfile_mb: ( .sizes.file / 1E6 ),\r\n\t\texternal_mb: ( .sizes.external / 1E6 ),\r\n\t\tactive_mb: ( .sizes.active / 1E6 )\r\n\t},\r\n\tcalculated: {\r\n\t\tslack: (.sizes.file - .sizes.active),\r\n\t\tslack_mb: ((.sizes.file - .sizes.active) / 1E6),\r\n\t\tratio: (.sizes.file / .sizes.active) \r\n\t}\r\n}\r\n'\r\n```\r\n\r\nwhich gives nice result like this (look at `calculated`)\r\n\r\n```json\r\n{\r\n  \"sizes\": {\r\n    \"file_mb\": 5912.287,\r\n    \"external_mb\": 4011.914088,\r\n    \"active_mb\": 5779.26155\r\n  },\r\n  \"calculated\": {\r\n    \"slack\": 133025450,\r\n    \"slack_mb\": 133.02545,\r\n    \"ratio\": 1.023017724470352\r\n  }\r\n}\r\n```\r\n\r\nI'm still a bit confused which rules are used and I think the parameter names are misleadning (especially 'priority' should be 'treshold' or something). I'm also confused like @bdoyle0182 as to wether ratio or slack or both channels are used as triggers when both are specified (like in `view_channels = upgrade_views,ratio_views,slack_views`.\r\n\r\nI'm also confused about `ratio`. API docs say it's calculated as `sizes.file / sizes.active', which for me currently is 1.023. Using min_priority=1.1 on ratio channel doesn't seem to trigger, but on another (much smaller) db with ratio=1.015 it DOES continually trigger. Setting min_priority=2.0 helps. But 1.015 is SMALLER than 1.1, so I don't get why it triggers at 1.1 but not at 2.0.\r\n\r\nCurrently running with 500MB slack, 2.0 ratio. Not sure how often it's triggered, don't really have logs on this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1306845479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1310867069","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-1310867069","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":1310867069,"node_id":"IC_kwDOAAMmUc5OIj59","user":{"login":"tsloughter","id":36227,"node_id":"MDQ6VXNlcjM2MjI3","avatar_url":"https://avatars.githubusercontent.com/u/36227?v=4","gravatar_id":"","url":"https://api.github.com/users/tsloughter","html_url":"https://github.com/tsloughter","followers_url":"https://api.github.com/users/tsloughter/followers","following_url":"https://api.github.com/users/tsloughter/following{/other_user}","gists_url":"https://api.github.com/users/tsloughter/gists{/gist_id}","starred_url":"https://api.github.com/users/tsloughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsloughter/subscriptions","organizations_url":"https://api.github.com/users/tsloughter/orgs","repos_url":"https://api.github.com/users/tsloughter/repos","events_url":"https://api.github.com/users/tsloughter/events{/privacy}","received_events_url":"https://api.github.com/users/tsloughter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T20:39:26Z","updated_at":"2022-11-10T20:39:26Z","author_association":"NONE","body":"Ran into CouchDB metrics somewhere today and it made me think of this issue, so thought I'd pop an update here. I see in dev the required OTP version is now OTP 23+. Also, 1.0 of Erlang/Elixir Opentelemetry was released back in February https://medium.com/opentelemetry/opentelemetry-erlang-elixir-javascript-and-ruby-v1-0-3a0c32e0add4","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1310867069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1310943860","html_url":"https://github.com/apache/couchdb/issues/2139#issuecomment-1310943860","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2139","id":1310943860,"node_id":"IC_kwDOAAMmUc5OI2p0","user":{"login":"xrobau","id":457798,"node_id":"MDQ6VXNlcjQ1Nzc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/457798?v=4","gravatar_id":"","url":"https://api.github.com/users/xrobau","html_url":"https://github.com/xrobau","followers_url":"https://api.github.com/users/xrobau/followers","following_url":"https://api.github.com/users/xrobau/following{/other_user}","gists_url":"https://api.github.com/users/xrobau/gists{/gist_id}","starred_url":"https://api.github.com/users/xrobau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xrobau/subscriptions","organizations_url":"https://api.github.com/users/xrobau/orgs","repos_url":"https://api.github.com/users/xrobau/repos","events_url":"https://api.github.com/users/xrobau/events{/privacy}","received_events_url":"https://api.github.com/users/xrobau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T21:45:15Z","updated_at":"2022-11-10T21:45:15Z","author_association":"CONTRIBUTOR","body":"I'm REALLY REALLY sorry to necro-comment on this ticket, but it's the first google result for this problem, and is annoyingly tricky to solve once you get yourself into this state.  We have a 5 node cluster, and one record was 100% broken because of this. It was returning 404 deleted, but could not be updated (and note we have NOT changed _revs_limit from the default, whatever it may be)\r\n\r\nIf anyone ELSE is having this problem, and the instructions above don't fix it, you will have to purge the record before you can recreate it.  Here's what my journey was:\r\n\r\n```\r\nDBURL='http://admin:admin@10.10.10.10:5984/sad_db'\r\nRECORD=Broken.3924858000126984351\r\ncurl \"$DBURL/_changes?filter=_doc_ids&doc_ids=\\[\\\"$RECORD\\\"\\]\"\r\n```\r\nThat gave me the rev of when it was deleted, which was `2-9c504538e77f1ef3eff158b0f99a6c63` in this case\r\n\r\n```\r\nR=2-9c504538e77f1ef3eff158b0f99a6c63\r\ncurl \"$DBURL/$RECORD?rev=$R\"\r\n```\r\n\r\nI tried posting that straight back, so it would just bump the revision but not change any data, but still had the document conflict. I also tried setting random keys/values/etc to try to make it create rev3, but it wouldn't work and was completely stuck.\r\n\r\nThis appears to be some sort of edge case bug that I didn't have time to diagnose, so I had to just use the shotgun method, and purge the record and hope that this doesn't cause issues with other nodes that were replicating from this one!\r\n\r\n```\r\ncurl -X POST \"$DBURL/_purge\" -d \"{\\\"$RECORD\\\":\\[\\\"$R\\\"\\]}\" -Hcontent-type:application/json\r\n```\r\n\r\nI was then able to import it again, and it appeared as a new record with rev 1.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1310943860/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1310998970","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-1310998970","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":1310998970,"node_id":"IC_kwDOAAMmUc5OJEG6","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T22:51:25Z","updated_at":"2022-11-10T22:51:25Z","author_association":"CONTRIBUTOR","body":"@tsloughter thanks for stopping by and for the reminder! Yeah, with Erlang 23 as the minimum version it should make it easier to integrate.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1310998970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1311573142","html_url":"https://github.com/apache/couchdb/pull/4139#issuecomment-1311573142","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4139","id":1311573142,"node_id":"IC_kwDOAAMmUc5OLQSW","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-11T11:23:00Z","updated_at":"2022-11-11T11:23:00Z","author_association":"MEMBER","body":"From the PR description:\r\n\r\n> Each user also now gets a new internal role _user automatically appended to their list of roles to simplify access control setup. If a databases has this role in its _security object, it means: each authenticated user can access the database.\r\n\r\nThis needs rethinking/clarifying: We still would want to allow two databases to have a non-overlapping set of users (as per _users) to access one but not the other database","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1311573142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1312632718","html_url":"https://github.com/apache/couchdb/issues/3047#issuecomment-1312632718","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3047","id":1312632718,"node_id":"IC_kwDOAAMmUc5OPS-O","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T03:54:15Z","updated_at":"2022-11-13T03:54:15Z","author_association":"CONTRIBUTOR","body":"@molecular this issue might be interesting https://github.com/apache/couchdb/issues/4263\r\n\r\nThere is a fix that would hopefully go into the upcoming 3.3 release linked to the issue.\r\n\r\n> wether ratio or slack or both channels are used as triggers when both are specified (like in view_channels = upgrade_views,ratio_views,slack_views.\r\n\r\nThe first channel which matches (for which we calculate a priority > 0) will enqueue the shard for compaction. So ratio would attempt first, and if that matches, it will enqueue the shard and matching stops. If ratio channel doesn't enqueue it, then slack channel will calculate priority and it may be enqueued there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1312632718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1313966490","html_url":"https://github.com/apache/couchdb/pull/4264#issuecomment-1313966490","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4264","id":1313966490,"node_id":"IC_kwDOAAMmUc5OUYma","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T15:49:30Z","updated_at":"2022-11-14T15:49:30Z","author_association":"MEMBER","body":"I think this is papering over a different bug/misbehavior. I'm not sure if we documented it as such, but \"active size\" should be a rough representation of how many bytes are reachable from the root nodes in the header. The idea there being that active size would be a rough approximation of the size of the database just after compaction finishes.\r\n\r\nGoing back to the original issue of \"deleting gigabytes of data and smoosh not noticing\" my wild guess is that given small enough individual documents, coupled with a randomish (with respect to doc_id or update_seq order) could lead to enough \"active garbage inner nodes\" that smoosh gets confused.\r\n\r\nAlso, how much data are we missing here? And/or can we generate a test case that demonstrates the behavior? If anyone has run this in production, I'd be curious to see how many compactions are running on the regular, along with the expected vs actual post compaction file sizes.\r\n\r\nFor instance, in the \"smoosh didn't notice and perform compaction\", did there end up being a massive file size shrinkage? Or is this is \"huh, weird that there's no compaction triggered\" issue. Given that deletions are only removing doc bodies and the trees themselves aren't changing shape maybe its just unexpected overhead of the trees being swamped in the smoosh calculations?\r\n\r\nBasically, it does sound like there *could* be an issue here, but I doubt that this is the correct fix. Unless I'm forgetting something crazy big, this basically seems like a \"external size after compression applied\" calculation which might be useful, but is definitely different than what the original intent was.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1313966490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1313980009","html_url":"https://github.com/apache/couchdb/pull/4264#issuecomment-1313980009","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4264","id":1313980009,"node_id":"IC_kwDOAAMmUc5OUb5p","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T15:58:42Z","updated_at":"2022-11-14T16:01:57Z","author_association":"CONTRIBUTOR","body":">  small enough individual documents,\r\n\r\nThere were just over 1Mb and it was about 1000 of them, and smoosh never noticed they were deleted and that it could free almost 1Gb of disk space. There is a gist to try it out https://gist.github.com/nickva/243caf230f7aa3b61f43bbde57063f72. This variant https://gist.github.com/nickva/9c3c73498433a100b862226529d59a25 is more complicated and can update a document a bunch of times in row and then also create more than one document. I used this to do 1000 of them.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1313980009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1313995290","html_url":"https://github.com/apache/couchdb/pull/4264#issuecomment-1313995290","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4264","id":1313995290,"node_id":"IC_kwDOAAMmUc5OUfoa","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T16:07:34Z","updated_at":"2022-11-14T16:09:59Z","author_association":"CONTRIBUTOR","body":"> Unless I'm forgetting something crazy big, this basically seems like a \"external size after compression applied\"\r\n\r\nYap, I had noticed that too. My initial suggesting was to use external, perhaps with a compression fudge factor as the trigger signal.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1313995290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1314032505","html_url":"https://github.com/apache/couchdb/pull/4264#issuecomment-1314032505","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4264","id":1314032505,"node_id":"IC_kwDOAAMmUc5OUot5","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T16:29:16Z","updated_at":"2022-11-14T16:29:16Z","author_association":"MEMBER","body":"Ignore everything I said earlier because I wasn't paying attention enough to realize that the internal nodes not being counted was for key trees, not b trees. This looks right to me in that we shouldn't be counting the size of the deleted internal nodes of a revision tree.\r\n\r\nThe change in the docs/active size definition should go from something like \"The approximate number of bytes to represent this database after compaction\" which is slightly different than \"The number of active bytes reachable from root\" because we're purposefully ignoring bytes we can get to that will no longer exist after compaction.\r\n\r\nAnd that doc change is only if we don't definite it as such already.\r\n\r\nGood work and sorry for the Monday morning noise!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1314032505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1317554450","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1317554450","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1317554450,"node_id":"IC_kwDOAAMmUc5OiEkS","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T19:25:09Z","updated_at":"2022-11-16T19:25:09Z","author_association":"CONTRIBUTOR","body":"Is there anything weird in your log files?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1317554450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318218047","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1318218047","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1318218047,"node_id":"IC_kwDOAAMmUc5Okmk_","user":{"login":"waversky","id":18565394,"node_id":"MDQ6VXNlcjE4NTY1Mzk0","avatar_url":"https://avatars.githubusercontent.com/u/18565394?v=4","gravatar_id":"","url":"https://api.github.com/users/waversky","html_url":"https://github.com/waversky","followers_url":"https://api.github.com/users/waversky/followers","following_url":"https://api.github.com/users/waversky/following{/other_user}","gists_url":"https://api.github.com/users/waversky/gists{/gist_id}","starred_url":"https://api.github.com/users/waversky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waversky/subscriptions","organizations_url":"https://api.github.com/users/waversky/orgs","repos_url":"https://api.github.com/users/waversky/repos","events_url":"https://api.github.com/users/waversky/events{/privacy}","received_events_url":"https://api.github.com/users/waversky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T07:44:37Z","updated_at":"2022-11-17T07:45:17Z","author_association":"NONE","body":"> Is there anything weird in your log files?\r\n\r\nThis?\r\n![image](https://user-images.githubusercontent.com/18565394/202386190-a194a3b5-df2f-42d4-b812-93ccf0379423.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318218047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318779575","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1318779575","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1318779575,"node_id":"IC_kwDOAAMmUc5Omvq3","user":{"login":"domstorey","id":5566472,"node_id":"MDQ6VXNlcjU1NjY0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5566472?v=4","gravatar_id":"","url":"https://api.github.com/users/domstorey","html_url":"https://github.com/domstorey","followers_url":"https://api.github.com/users/domstorey/followers","following_url":"https://api.github.com/users/domstorey/following{/other_user}","gists_url":"https://api.github.com/users/domstorey/gists{/gist_id}","starred_url":"https://api.github.com/users/domstorey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domstorey/subscriptions","organizations_url":"https://api.github.com/users/domstorey/orgs","repos_url":"https://api.github.com/users/domstorey/repos","events_url":"https://api.github.com/users/domstorey/events{/privacy}","received_events_url":"https://api.github.com/users/domstorey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T15:11:35Z","updated_at":"2022-11-17T15:11:35Z","author_association":"NONE","body":"Is there any outlook here for when couch will be supported on RHEL 9? We'd also like to move to ubi9 minimal here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318779575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318824042","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1318824042","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1318824042,"node_id":"IC_kwDOAAMmUc5Om6hq","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T15:40:57Z","updated_at":"2022-11-17T15:40:57Z","author_association":"CONTRIBUTOR","body":"Any chance mozjs91 or other version made their way into EPEL repos? Perhaps we can advise users to use that.\r\n\r\nWe could be slightly sneaky and depend on polkit and use its private moz78 instance, but that sound like a hack.\r\n\r\nOtherwise, we'd have to bundle mozjs just for RHEL 9 (and its clones) and then maintain security patches for it.  It might be the we go with eventually, but it's hard to justify spending time it currently.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318824042/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318874444","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1318874444","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1318874444,"node_id":"IC_kwDOAAMmUc5OnG1M","user":{"login":"domstorey","id":5566472,"node_id":"MDQ6VXNlcjU1NjY0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5566472?v=4","gravatar_id":"","url":"https://api.github.com/users/domstorey","html_url":"https://github.com/domstorey","followers_url":"https://api.github.com/users/domstorey/followers","following_url":"https://api.github.com/users/domstorey/following{/other_user}","gists_url":"https://api.github.com/users/domstorey/gists{/gist_id}","starred_url":"https://api.github.com/users/domstorey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domstorey/subscriptions","organizations_url":"https://api.github.com/users/domstorey/orgs","repos_url":"https://api.github.com/users/domstorey/repos","events_url":"https://api.github.com/users/domstorey/events{/privacy}","received_events_url":"https://api.github.com/users/domstorey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T16:15:49Z","updated_at":"2022-11-17T16:29:10Z","author_association":"NONE","body":"Does look like mozjs-91 is out there in some forms: https://www.google.com/search?q=mozjs-91+EPEL\r\n\r\neg. https://src.fedoraproject.org/rpms/mozjs91 & https://ubuntu.pkgs.org/22.04/ubuntu-updates-main-arm64/libmozjs-91-dev_91.10.0-0ubuntu1_arm64.deb.html & http://rpms.remirepo.net/rpmphp/zoom.php?rpm=mozjs91\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318874444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318895165","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1318895165","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1318895165,"node_id":"IC_kwDOAAMmUc5OnL49","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T16:30:43Z","updated_at":"2022-11-17T16:30:43Z","author_association":"CONTRIBUTOR","body":"Fedora 35 version is probably a good bet","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1318895165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320019288","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1320019288","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1320019288,"node_id":"IC_kwDOAAMmUc5OreVY","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T13:50:46Z","updated_at":"2022-11-18T13:50:46Z","author_association":"CONTRIBUTOR","body":"Is this all in your logs?\r\nCan you show your [log] config section?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320019288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320233885","html_url":"https://github.com/apache/couchdb/issues/4239#issuecomment-1320233885","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4239","id":1320233885,"node_id":"IC_kwDOAAMmUc5OsSud","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T16:13:46Z","updated_at":"2022-11-18T16:13:46Z","author_association":"CONTRIBUTOR","body":"Index cleanup was improved in https://github.com/apache/couchdb/pull/4261\r\n\r\nIt's set to happen automatically in https://github.com/apache/couchdb/pull/4266 pending review","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320233885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320424219","html_url":"https://github.com/apache/couchdb/pull/4268#issuecomment-1320424219","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4268","id":1320424219,"node_id":"IC_kwDOAAMmUc5OtBMb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T19:10:51Z","updated_at":"2022-11-18T19:10:51Z","author_association":"CONTRIBUTOR","body":"I'll merge this, since it's ready to go, otherwise smoosh optimization PR would make it stale again.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320424219/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320481390","html_url":"https://github.com/apache/couchdb/issues/3660#issuecomment-1320481390","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3660","id":1320481390,"node_id":"IC_kwDOAAMmUc5OtPJu","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T20:16:54Z","updated_at":"2022-11-21T18:19:24Z","author_association":"CONTRIBUTOR","body":"Sorry to bother @Nayana-ibm, not sure if you'd even know about it, but it looks like the s390x Jenkins worker donated by IBM (`couchdb01`) is down. \r\n\r\nTo help identify it, the IP can be seen in: https://github.com/apache/couchdb-infra-cm/blob/02a0d1ed2dbbebf2b88d5fcf4e94d9022acd2362/production#L167-L179\r\n\r\nDid it accidentally got shut down or removed and just needs a restart or is it gone for good?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320481390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320531981","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1320531981","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1320531981,"node_id":"IC_kwDOAAMmUc5OtbgN","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T21:18:05Z","updated_at":"2022-11-18T21:18:05Z","author_association":"CONTRIBUTOR","body":"Since I mentioned polikit above here what I tried:\r\n\r\n```\r\n% docker run -it rockylinux/rockylinux:9\r\n\r\n# yum install polkit-libs -y\r\n\r\n# rpm -ql polkit-libs | grep mozjs\r\n/usr/lib64/polkit-1/libmozjs-78.so\r\n```\r\n\r\nSo mozjs78 is available there. Too much of a hack for the time being?\r\n\r\nInstalling mozjs91 from F35 seems to work as well:\r\n\r\n```\r\n% docker run -it rockylinux/rockylinux:9\r\n\r\n# yum install wget\r\n\r\n# wget https://kojipkgs.fedoraproject.org//packages/mozjs91/91.2.0/1.fc35/x86_64/mozjs91-91.2.0-1.fc35.x86_64.rpm\r\n\r\n# rpm -i ./mozjs91-91.2.0-1.fc35.x86_64.rpm\r\n\r\n# rpm -ql mozjs91\r\n/usr/lib/.build-id\r\n/usr/lib/.build-id/bc\r\n/usr/lib/.build-id/bc/18c2125dbd7527a2f5423f2452df0ff29d9e2f\r\n/usr/lib64/libmozjs-91.so.0\r\n/usr/lib64/libmozjs-91.so.0.0.0\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320531981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320579445","html_url":"https://github.com/apache/couchdb/issues/4239#issuecomment-1320579445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4239","id":1320579445,"node_id":"IC_kwDOAAMmUc5OtnF1","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T22:07:09Z","updated_at":"2022-11-18T22:07:09Z","author_association":"CONTRIBUTOR","body":"With https://github.com/apache/couchdb/pull/4266 index cleanup got its won smoosh channel and is enabled by default\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320579445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320790876","html_url":"https://github.com/apache/couchdb/pull/4268#issuecomment-1320790876","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4268","id":1320790876,"node_id":"IC_kwDOAAMmUc5Ouatc","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-19T04:13:53Z","updated_at":"2022-11-19T04:13:53Z","author_association":"CONTRIBUTOR","body":"Thanks for merging! I rebased 3 times already trying to get it done.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320790876/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320820784","html_url":"https://github.com/apache/couchdb/issues/4244#issuecomment-1320820784","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4244","id":1320820784,"node_id":"IC_kwDOAAMmUc5OuiAw","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-19T07:05:21Z","updated_at":"2022-11-19T07:05:21Z","author_association":"CONTRIBUTOR","body":"Thanks for your bug report. Is restarting, is always necessary, simply letting the compaction finish does result in the new values taking a effect?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1320820784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321383483","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1321383483","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1321383483,"node_id":"IC_kwDOAAMmUc5OwrY7","user":{"login":"waversky","id":18565394,"node_id":"MDQ6VXNlcjE4NTY1Mzk0","avatar_url":"https://avatars.githubusercontent.com/u/18565394?v=4","gravatar_id":"","url":"https://api.github.com/users/waversky","html_url":"https://github.com/waversky","followers_url":"https://api.github.com/users/waversky/followers","following_url":"https://api.github.com/users/waversky/following{/other_user}","gists_url":"https://api.github.com/users/waversky/gists{/gist_id}","starred_url":"https://api.github.com/users/waversky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waversky/subscriptions","organizations_url":"https://api.github.com/users/waversky/orgs","repos_url":"https://api.github.com/users/waversky/repos","events_url":"https://api.github.com/users/waversky/events{/privacy}","received_events_url":"https://api.github.com/users/waversky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T02:50:09Z","updated_at":"2022-11-21T02:51:34Z","author_association":"NONE","body":"I know nothing about erlang，You can tell me how to get logs，\r\nI checked the configuration of these three files (**default.ini、local.ini、local.ini.dist**), and I'm sure they are all default, because each line starts with \";\"\r\n![image](https://user-images.githubusercontent.com/18565394/202952483-5c239fe1-963d-4113-b28f-70811e92dc18.png)\r\n![image](https://user-images.githubusercontent.com/18565394/202952818-886309c4-d66f-4c47-9f0c-ca084d8784f8.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321383483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321388294","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1321388294","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1321388294,"node_id":"IC_kwDOAAMmUc5OwskG","user":{"login":"waversky","id":18565394,"node_id":"MDQ6VXNlcjE4NTY1Mzk0","avatar_url":"https://avatars.githubusercontent.com/u/18565394?v=4","gravatar_id":"","url":"https://api.github.com/users/waversky","html_url":"https://github.com/waversky","followers_url":"https://api.github.com/users/waversky/followers","following_url":"https://api.github.com/users/waversky/following{/other_user}","gists_url":"https://api.github.com/users/waversky/gists{/gist_id}","starred_url":"https://api.github.com/users/waversky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waversky/subscriptions","organizations_url":"https://api.github.com/users/waversky/orgs","repos_url":"https://api.github.com/users/waversky/repos","events_url":"https://api.github.com/users/waversky/events{/privacy}","received_events_url":"https://api.github.com/users/waversky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T02:59:15Z","updated_at":"2022-11-21T02:59:15Z","author_association":"NONE","body":"Today, the CPU usage of erl.exe soared again(about 30%). I ended its thread, but it immediately revived. After the revival, the CPU usage was about 20%. After several seconds, it dropped to a very low level. Now it is stable.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321388294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321682591","html_url":"https://github.com/apache/couchdb/issues/3047#issuecomment-1321682591","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3047","id":1321682591,"node_id":"IC_kwDOAAMmUc5Ox0af","user":{"login":"molecular","id":589745,"node_id":"MDQ6VXNlcjU4OTc0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/589745?v=4","gravatar_id":"","url":"https://api.github.com/users/molecular","html_url":"https://github.com/molecular","followers_url":"https://api.github.com/users/molecular/followers","following_url":"https://api.github.com/users/molecular/following{/other_user}","gists_url":"https://api.github.com/users/molecular/gists{/gist_id}","starred_url":"https://api.github.com/users/molecular/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/molecular/subscriptions","organizations_url":"https://api.github.com/users/molecular/orgs","repos_url":"https://api.github.com/users/molecular/repos","events_url":"https://api.github.com/users/molecular/events{/privacy}","received_events_url":"https://api.github.com/users/molecular/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T08:27:00Z","updated_at":"2022-11-21T08:27:00Z","author_association":"NONE","body":"> @molecular this issue might be interesting #4263\r\n\r\nThis makes a lot of sense. However doesn't affect me since I don't delete or update documents, only create.\r\n\r\nThanks for the clarification on ratio/slack triggering.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321682591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321857685","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1321857685","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1321857685,"node_id":"IC_kwDOAAMmUc5OyfKV","user":{"login":"domstorey","id":5566472,"node_id":"MDQ6VXNlcjU1NjY0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5566472?v=4","gravatar_id":"","url":"https://api.github.com/users/domstorey","html_url":"https://github.com/domstorey","followers_url":"https://api.github.com/users/domstorey/followers","following_url":"https://api.github.com/users/domstorey/following{/other_user}","gists_url":"https://api.github.com/users/domstorey/gists{/gist_id}","starred_url":"https://api.github.com/users/domstorey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domstorey/subscriptions","organizations_url":"https://api.github.com/users/domstorey/orgs","repos_url":"https://api.github.com/users/domstorey/repos","events_url":"https://api.github.com/users/domstorey/events{/privacy}","received_events_url":"https://api.github.com/users/domstorey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T10:46:44Z","updated_at":"2022-11-21T11:34:40Z","author_association":"NONE","body":"With that dependency installed should we be able to build the couch binaries do you think on the ubi9 base? I noticed that we use runit too, https://packagecloud.io/imeyer/runit?page=2 to build and I couldnt get that too work on ubi9 either :-(","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1321857685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322391254","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1322391254","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1322391254,"node_id":"IC_kwDOAAMmUc5O0hbW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T17:10:58Z","updated_at":"2022-11-21T17:10:58Z","author_association":"CONTRIBUTOR","body":"`ubi9` seems to work as far as installing and resolving dependencies at least:\r\n\r\n```\r\n% docker pull redhat/ubi9\r\n# yum install wget ...\r\n# ldd /usr/lib64/libmozjs-91.so.0\r\n\tlinux-vdso.so.1 (0x00007fffa9778000)\r\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007f068cb09000)\r\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007f068ca2e000)\r\n\tlibstdc++.so.6 => /lib64/libstdc++.so.6 (0x00007f068c807000)\r\n\tlibgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f068c7ec000)\r\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f068c5e3000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f068e79e000)\r\n```\r\n\r\nNot sure about runit. I guess we could use any other daemon supervisor thing instead.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322391254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322417637","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1322417637","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1322417637,"node_id":"IC_kwDOAAMmUc5O0n3l","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T17:31:55Z","updated_at":"2022-11-22T15:42:25Z","author_association":"CONTRIBUTOR","body":"One strange thing I noticed is that the above mozj91 doesn't seem to link to libicu. It turns out it was an earlier mozjs 91.2.0 version, the later versions started linking against it and requiring libicu\r\n\r\n```\r\n# wget https://kojipkgs.fedoraproject.org//packages/mozjs91/91.13.0/1.fc35/x86_64/mozjs91-91.13.0-1.fc35.x86_64.rpm\r\n# rpm -i mozjs91-91.13.0-1.fc35.x86_64.rpm\r\nerror: Failed dependencies:\r\n\tlibicui18n.so.69()(64bit) is needed by mozjs91-91.13.0-1.fc35.x86_64\r\n\tlibicuuc.so.69()(64bit) is needed by mozjs91-91.13.0-1.fc35.x86_64\r\n```\r\n\r\nSo if we want to stay current, we are back to building it ourselves and continuously maintaining the build or relying on the  hidden polkit libmozjs-78.so version from polkit-libs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322417637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322465691","html_url":"https://github.com/apache/couchdb/issues/3660#issuecomment-1322465691","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3660","id":1322465691,"node_id":"IC_kwDOAAMmUc5O0zmb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T18:14:25Z","updated_at":"2022-11-21T18:14:25Z","author_association":"CONTRIBUTOR","body":"s390x node was removed from the CI workers lists for now https://github.com/apache/couchdb-infra-cm/commit/67a646854cef7e634855390f9540e0922e83f1f3","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322465691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322518775","html_url":"https://github.com/apache/couchdb/issues/3047#issuecomment-1322518775","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3047","id":1322518775,"node_id":"IC_kwDOAAMmUc5O1Aj3","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T19:05:22Z","updated_at":"2022-11-21T19:05:22Z","author_association":"CONTRIBUTOR","body":"> This makes a lot of sense. However doesn't affect me since I don't delete or update documents, only create.\r\n\r\nThat makes sense. If it's just newly created documents with no updates or deletions, then this wouldn't affect your use case.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1322518775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1323391720","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1323391720","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1323391720,"node_id":"IC_kwDOAAMmUc5O4Vro","user":{"login":"domstorey","id":5566472,"node_id":"MDQ6VXNlcjU1NjY0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5566472?v=4","gravatar_id":"","url":"https://api.github.com/users/domstorey","html_url":"https://github.com/domstorey","followers_url":"https://api.github.com/users/domstorey/followers","following_url":"https://api.github.com/users/domstorey/following{/other_user}","gists_url":"https://api.github.com/users/domstorey/gists{/gist_id}","starred_url":"https://api.github.com/users/domstorey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domstorey/subscriptions","organizations_url":"https://api.github.com/users/domstorey/orgs","repos_url":"https://api.github.com/users/domstorey/repos","events_url":"https://api.github.com/users/domstorey/events{/privacy}","received_events_url":"https://api.github.com/users/domstorey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T09:52:04Z","updated_at":"2022-11-22T09:52:04Z","author_association":"NONE","body":"mmm yes, not perfect. Too many hacks will make it difficult next time too and will complicate keeping security updates current on all the dependencies if we are pinned..","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1323391720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1323882838","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1323882838","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1323882838,"node_id":"IC_kwDOAAMmUc5O6NlW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T15:48:00Z","updated_at":"2022-11-22T15:48:00Z","author_association":"CONTRIBUTOR","body":"Agree it's a hack. I think we'll have to return to building it ourselves like we did previously: https://github.com/apache/couchdb-pkg/tree/main/js\r\n\r\nAnother option is to embed a smaller JS execution engine like [QuickJS](https://bellard.org/quickjs) so we can just vendor it in.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1323882838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1323932426","html_url":"https://github.com/apache/couchdb/issues/4273#issuecomment-1323932426","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4273","id":1323932426,"node_id":"IC_kwDOAAMmUc5O6ZsK","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T16:24:42Z","updated_at":"2022-11-22T16:24:42Z","author_association":"CONTRIBUTOR","body":"It looks like most of the above commits except  https://github.com/apache/couchdb/commit/b38d77fbada7cce7de288d2cdcca8839b09888f4 are already merged to `main`.\r\n\r\nDirectly cherry picking that commit won't work, but we can go with the same idea - move the parsing code to `couch_replicator_parse` module. Then, update it to do extra validations and checks which the JS VDU might be doing but Erlang code doesn't do yet. There is a good opportunity to enhance it even, add more checks , better error messages on failures, etc, then plug that right into `before_doc_update` handler. Finally, remove the JS VDU from the code and also leave a stub deletion code snippet to try to clean up the already created JS VDU documents.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1323932426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1324845246","html_url":"https://github.com/apache/couchdb/issues/4244#issuecomment-1324845246","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4244","id":1324845246,"node_id":"IC_kwDOAAMmUc5O94i-","user":{"login":"ornotnull","id":115115560,"node_id":"U_kgDOBtyGKA","avatar_url":"https://avatars.githubusercontent.com/u/115115560?v=4","gravatar_id":"","url":"https://api.github.com/users/ornotnull","html_url":"https://github.com/ornotnull","followers_url":"https://api.github.com/users/ornotnull/followers","following_url":"https://api.github.com/users/ornotnull/following{/other_user}","gists_url":"https://api.github.com/users/ornotnull/gists{/gist_id}","starred_url":"https://api.github.com/users/ornotnull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ornotnull/subscriptions","organizations_url":"https://api.github.com/users/ornotnull/orgs","repos_url":"https://api.github.com/users/ornotnull/repos","events_url":"https://api.github.com/users/ornotnull/events{/privacy}","received_events_url":"https://api.github.com/users/ornotnull/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T10:32:01Z","updated_at":"2022-11-23T10:32:01Z","author_association":"NONE","body":"restart performed after compaction is finished \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1324845246/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1328406728","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1328406728","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1328406728,"node_id":"IC_kwDOAAMmUc5PLeDI","user":{"login":"waversky","id":18565394,"node_id":"MDQ6VXNlcjE4NTY1Mzk0","avatar_url":"https://avatars.githubusercontent.com/u/18565394?v=4","gravatar_id":"","url":"https://api.github.com/users/waversky","html_url":"https://github.com/waversky","followers_url":"https://api.github.com/users/waversky/followers","following_url":"https://api.github.com/users/waversky/following{/other_user}","gists_url":"https://api.github.com/users/waversky/gists{/gist_id}","starred_url":"https://api.github.com/users/waversky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waversky/subscriptions","organizations_url":"https://api.github.com/users/waversky/orgs","repos_url":"https://api.github.com/users/waversky/repos","events_url":"https://api.github.com/users/waversky/events{/privacy}","received_events_url":"https://api.github.com/users/waversky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T01:23:04Z","updated_at":"2022-11-28T01:23:04Z","author_association":"NONE","body":"After Windows sleep for a weekend, activate Windows, erl.exe CPU usage reaches 50% - 70%, It may be related to the windows sleep switch","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1328406728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1328588728","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1328588728","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1328588728,"node_id":"IC_kwDOAAMmUc5PMKe4","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T06:08:23Z","updated_at":"2022-11-28T06:08:23Z","author_association":"CONTRIBUTOR","body":"Are there any active tasks in CouchDB while erl-CPU is high?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1328588728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1329383477","html_url":"https://github.com/apache/couchdb/issues/4273#issuecomment-1329383477","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4273","id":1329383477,"node_id":"IC_kwDOAAMmUc5PPMg1","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T16:28:50Z","updated_at":"2022-11-28T16:28:50Z","author_association":"CONTRIBUTOR","body":"Work on improving the replication parser started in https://github.com/apache/couchdb/pull/4274\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1329383477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1329387314","html_url":"https://github.com/apache/couchdb/issues/4273#issuecomment-1329387314","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4273","id":1329387314,"node_id":"IC_kwDOAAMmUc5PPNcy","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T16:30:51Z","updated_at":"2022-11-28T16:30:51Z","author_association":"CONTRIBUTOR","body":"It's pretty wild that we allow arbitrary socket settings to be used in replication options. Even the `valid` list from https://github.com/apache/couchdb/commit/b38d77fbada7cce7de288d2cdcca8839b09888f4 may be too wide. I can see making those things configurable, in some cases it would be nice to experiment but those can also be a footgun or just lead to weirdness.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1329387314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1329577926","html_url":"https://github.com/apache/couchdb/pull/4280#issuecomment-1329577926","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4280","id":1329577926,"node_id":"IC_kwDOAAMmUc5PP7_G","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T18:42:18Z","updated_at":"2022-11-28T18:42:18Z","author_association":"CONTRIBUTOR","body":"Merging PR.\r\n\r\nThank you for your contribution, @jo\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1329577926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1330039919","html_url":"https://github.com/apache/couchdb/pull/4276#issuecomment-1330039919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4276","id":1330039919,"node_id":"IC_kwDOAAMmUc5PRsxv","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T03:55:32Z","updated_at":"2022-11-29T03:55:32Z","author_association":"CONTRIBUTOR","body":"@big-r81 mind if I merge it? I have a PR pending which touch the .ini so didn't want to have to solve conflicts.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1330039919/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1330160438","html_url":"https://github.com/apache/couchdb/pull/4274#issuecomment-1330160438","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4274","id":1330160438,"node_id":"IC_kwDOAAMmUc5PSKM2","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T06:48:36Z","updated_at":"2022-11-29T06:48:36Z","author_association":"CONTRIBUTOR","body":"Note for the reviewer: the diff looks a bit larger than it is, but it's mostly because the parsing functions were moved to a separate parsing module - `couch_replicator_parse`. This idea was borrowed from the `fdbmain` replicator, and it seems like a better organization scheme.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1330160438/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1334128022","html_url":"https://github.com/apache/couchdb/issues/4282#issuecomment-1334128022","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4282","id":1334128022,"node_id":"IC_kwDOAAMmUc5PhS2W","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T17:44:12Z","updated_at":"2022-12-01T17:44:12Z","author_association":"CONTRIBUTOR","body":"apache.bintray.com is decommissioned (all of bintray is I think).\r\n\r\nsee https://docs.couchdb.org/en/3.2.2-docs/install/unix.html#enabling-the-apache-couchdb-package-repository\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1334128022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1335508950","html_url":"https://github.com/apache/couchdb/pull/4285#issuecomment-1335508950","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4285","id":1335508950,"node_id":"IC_kwDOAAMmUc5Pmj_W","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T16:32:55Z","updated_at":"2022-12-02T16:32:55Z","author_association":"CONTRIBUTOR","body":"The output with the debug lines should look like:\r\n\r\n```\r\n  smoosh_tests:27: smoosh_test_ (t_checkpointing_works)...test/smoosh_tests.erl:242:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:249:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:251:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:252:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:260:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:262:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:265:<0.1658.0>: <-\r\ntest/smoosh_tests.erl:267:<0.1658.0>: <-\r\n[0.312 s] ok\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1335508950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1335835116","html_url":"https://github.com/apache/couchdb/issues/4159#issuecomment-1335835116","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4159","id":1335835116,"node_id":"IC_kwDOAAMmUc5Pnzns","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T20:51:52Z","updated_at":"2022-12-02T20:51:52Z","author_association":"CONTRIBUTOR","body":"Closing since there is no activity in a few months","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1335835116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336198290","html_url":"https://github.com/apache/couchdb/issues/3319#issuecomment-1336198290","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3319","id":1336198290,"node_id":"IC_kwDOAAMmUc5PpMSS","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-03T16:59:55Z","updated_at":"2022-12-03T17:01:41Z","author_association":"CONTRIBUTOR","body":"I tried a different approach here where we allow `=` in the key with the constraint that we have to use \"k = v\" form instead of \"k=v\".\r\n\r\nhttps://github.com/apache/couchdb/pull/4287","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336198290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336273945","html_url":"https://github.com/apache/couchdb/pull/4287#issuecomment-1336273945","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4287","id":1336273945,"node_id":"IC_kwDOAAMmUc5PpewZ","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-03T22:57:57Z","updated_at":"2022-12-03T22:57:57Z","author_association":"CONTRIBUTOR","body":"Just a couple nits: First, the title of the PR \"Allow = in config key values\" makes it sound like we're allowing the `=` character in the _values_, but I think you mean \"key names\"?\r\n\r\n> There are allowed only for the `k = v` form and not `k=v`. \r\n\r\nDo you mean \"They are allowed ...\"? \r\n\r\n> The idea is to split on `=` first, and if that fails to produce a valid kv pair we split on `=` as before.\r\n\r\nShould the first one contain spaces on either side of the equal sign, like ` = `?\r\n\r\n> Also added 100% test coverage to the parser.\r\n\r\n💯 awesome\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336273945/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336334575","html_url":"https://github.com/apache/couchdb/pull/4287#issuecomment-1336334575","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4287","id":1336334575,"node_id":"IC_kwDOAAMmUc5Pptjv","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T06:45:19Z","updated_at":"2022-12-04T06:45:19Z","author_association":"CONTRIBUTOR","body":"> Just a couple nits: First, the title of the PR \"Allow = in config key values\" makes it sound like we're allowing the `=` character in the _values_, but I think you mean \"key names\"?\r\n> \r\n\r\nGood catch. Yeah that is ambiguous, I meant \"key names\".\r\n\r\n> > There are allowed only for the `k = v` form and not `k=v`.\r\n> \r\n> Do you mean \"They are allowed ...\"?\r\n>\r\n\r\nYup! Silly mistake. Thanks for noticing!\r\n\r\n> > The idea is to split on `=` first, and if that fails to produce a valid kv pair we split on `=` as before.\r\n> \r\n> Should the first one contain spaces on either side of the equal sign, like `=`?\r\n> \r\n\r\nI had it in the commit comment but then tried to make prettier in the PR comment messed it up instead. I'll return back to using quotes.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336334575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336335490","html_url":"https://github.com/apache/couchdb/pull/4287#issuecomment-1336335490","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4287","id":1336335490,"node_id":"IC_kwDOAAMmUc5PptyC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T06:52:54Z","updated_at":"2022-12-04T06:52:54Z","author_association":"CONTRIBUTOR","body":"Updated and added docs for it. \r\n\r\nWhen adding docs a typo (`[jwt_key]` should be `[jwt_keys]`) so fixed that along the way as well.\r\n\r\nIn addition manually tested that it's possible to set and get the value via the `_config/` API:\r\n\r\n```\r\n% curl -XPUT -H'Content-Type:application/json'  $DB/_node/_local/_config/s1/k1 -d '\"v1\"'\r\n% curl -XPUT -H'Content-Type:application/json'  $DB/_node/_local/_config/s1/k=1 -d '\"v1\"'\r\n% curl -XPUT -H'Content-Type:application/json'  $DB/_node/_local/_config/s1/k=== -d '\"v1\"'\r\n\r\n% curl -s $DB/_node/_local/_config/s1 | jq '.'\r\n{\r\n  \"k1\": \"v1\",\r\n  \"k=1\": \"v1\",\r\n  \"k===\": \"v1\"\r\n}\r\n\r\n% cat dev/lib/node1/etc/local.ini\r\n...\r\n[s1]\r\nk1 = v1\r\nk=1 = v1\r\nk=== = v1\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1336335490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]