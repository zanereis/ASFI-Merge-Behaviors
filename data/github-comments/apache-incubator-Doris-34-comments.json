[{"url":"https://api.github.com/repos/apache/doris/issues/comments/698155254","html_url":"https://github.com/apache/doris/issues/4662#issuecomment-698155254","issue_url":"https://api.github.com/repos/apache/doris/issues/4662","id":698155254,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODE1NTI1NA==","user":{"login":"chaoyli","id":44767902,"node_id":"MDQ6VXNlcjQ0NzY3OTAy","avatar_url":"https://avatars.githubusercontent.com/u/44767902?v=4","gravatar_id":"","url":"https://api.github.com/users/chaoyli","html_url":"https://github.com/chaoyli","followers_url":"https://api.github.com/users/chaoyli/followers","following_url":"https://api.github.com/users/chaoyli/following{/other_user}","gists_url":"https://api.github.com/users/chaoyli/gists{/gist_id}","starred_url":"https://api.github.com/users/chaoyli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chaoyli/subscriptions","organizations_url":"https://api.github.com/users/chaoyli/orgs","repos_url":"https://api.github.com/users/chaoyli/repos","events_url":"https://api.github.com/users/chaoyli/events{/privacy}","received_events_url":"https://api.github.com/users/chaoyli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T06:58:40Z","updated_at":"2020-09-24T06:58:40Z","author_association":"CONTRIBUTOR","body":"Reproduce the bug\r\n```\r\n1. load a file using stream load\r\n2. kill BE process\r\n3. show proc \r\n```","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698155254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/698169607","html_url":"https://github.com/apache/doris/pull/4661#issuecomment-698169607","issue_url":"https://api.github.com/repos/apache/doris/issues/4661","id":698169607,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODE2OTYwNw==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T07:30:41Z","updated_at":"2020-09-24T07:30:41Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698169607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/698323195","html_url":"https://github.com/apache/doris/issues/4581#issuecomment-698323195","issue_url":"https://api.github.com/repos/apache/doris/issues/4581","id":698323195,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODMyMzE5NQ==","user":{"login":"ccoffline","id":45881148,"node_id":"MDQ6VXNlcjQ1ODgxMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/45881148?v=4","gravatar_id":"","url":"https://api.github.com/users/ccoffline","html_url":"https://github.com/ccoffline","followers_url":"https://api.github.com/users/ccoffline/followers","following_url":"https://api.github.com/users/ccoffline/following{/other_user}","gists_url":"https://api.github.com/users/ccoffline/gists{/gist_id}","starred_url":"https://api.github.com/users/ccoffline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccoffline/subscriptions","organizations_url":"https://api.github.com/users/ccoffline/orgs","repos_url":"https://api.github.com/users/ccoffline/repos","events_url":"https://api.github.com/users/ccoffline/events{/privacy}","received_events_url":"https://api.github.com/users/ccoffline/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T12:50:19Z","updated_at":"2020-09-24T12:50:19Z","author_association":"CONTRIBUTOR","body":"This happens again when a `CaseExpr` didn't set its `selectivity`.\r\n\r\nIt seems a lot of `Expr`s haven't set `selectivity` properly. And they will all cause this `computeStats` error.\r\n\r\nI will count all of these `Expr`s later and put a list here.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698323195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/698449483","html_url":"https://github.com/apache/doris/pull/4667#issuecomment-698449483","issue_url":"https://api.github.com/repos/apache/doris/issues/4667","id":698449483,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODQ0OTQ4Mw==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T16:23:58Z","updated_at":"2020-09-24T16:23:58Z","author_association":"CONTRIBUTOR","body":"Thanks for your PR. But I am not sure this is correct. I need to check the code","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698449483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/698696772","html_url":"https://github.com/apache/doris/issues/4581#issuecomment-698696772","issue_url":"https://api.github.com/repos/apache/doris/issues/4581","id":698696772,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODY5Njc3Mg==","user":{"login":"ccoffline","id":45881148,"node_id":"MDQ6VXNlcjQ1ODgxMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/45881148?v=4","gravatar_id":"","url":"https://api.github.com/users/ccoffline","html_url":"https://github.com/ccoffline","followers_url":"https://api.github.com/users/ccoffline/followers","following_url":"https://api.github.com/users/ccoffline/following{/other_user}","gists_url":"https://api.github.com/users/ccoffline/gists{/gist_id}","starred_url":"https://api.github.com/users/ccoffline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccoffline/subscriptions","organizations_url":"https://api.github.com/users/ccoffline/orgs","repos_url":"https://api.github.com/users/ccoffline/repos","events_url":"https://api.github.com/users/ccoffline/events{/privacy}","received_events_url":"https://api.github.com/users/ccoffline/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T03:15:16Z","updated_at":"2020-09-25T03:16:02Z","author_association":"CONTRIBUTOR","body":"Most of `Expr`s haven't set `selectivity` so I'll just list those that have.\r\n\r\n- `LikePredicate`\r\n- `InPredicate`\r\n- `IsNullPredicate`\r\n- `BinaryPredicate`\r\n- `CompoundPredicate`\r\n- `BoolLiteral` that #4590 has just added\r\n- `SlotRef`\r\n\r\nThere are lots that need to modify. Since queries should not be affected, I'm thinking that `cardinality` of `SelectNode` should just set to `-1` when `computeSelectivity()` is not correct instead of hard preconditions that produce unknown error.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698696772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/698716379","html_url":"https://github.com/apache/doris/issues/4581#issuecomment-698716379","issue_url":"https://api.github.com/repos/apache/doris/issues/4581","id":698716379,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODcxNjM3OQ==","user":{"login":"liutang123","id":17537020,"node_id":"MDQ6VXNlcjE3NTM3MDIw","avatar_url":"https://avatars.githubusercontent.com/u/17537020?v=4","gravatar_id":"","url":"https://api.github.com/users/liutang123","html_url":"https://github.com/liutang123","followers_url":"https://api.github.com/users/liutang123/followers","following_url":"https://api.github.com/users/liutang123/following{/other_user}","gists_url":"https://api.github.com/users/liutang123/gists{/gist_id}","starred_url":"https://api.github.com/users/liutang123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liutang123/subscriptions","organizations_url":"https://api.github.com/users/liutang123/orgs","repos_url":"https://api.github.com/users/liutang123/repos","events_url":"https://api.github.com/users/liutang123/events{/privacy}","received_events_url":"https://api.github.com/users/liutang123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T04:41:50Z","updated_at":"2020-09-25T04:41:50Z","author_association":"CONTRIBUTOR","body":"Give your PR linked this issue please.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698716379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/698787757","html_url":"https://github.com/apache/doris/issues/4153#issuecomment-698787757","issue_url":"https://api.github.com/repos/apache/doris/issues/4153","id":698787757,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODc4Nzc1Nw==","user":{"login":"aiyojun","id":32353521,"node_id":"MDQ6VXNlcjMyMzUzNTIx","avatar_url":"https://avatars.githubusercontent.com/u/32353521?v=4","gravatar_id":"","url":"https://api.github.com/users/aiyojun","html_url":"https://github.com/aiyojun","followers_url":"https://api.github.com/users/aiyojun/followers","following_url":"https://api.github.com/users/aiyojun/following{/other_user}","gists_url":"https://api.github.com/users/aiyojun/gists{/gist_id}","starred_url":"https://api.github.com/users/aiyojun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiyojun/subscriptions","organizations_url":"https://api.github.com/users/aiyojun/orgs","repos_url":"https://api.github.com/users/aiyojun/repos","events_url":"https://api.github.com/users/aiyojun/events{/privacy}","received_events_url":"https://api.github.com/users/aiyojun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T08:05:52Z","updated_at":"2020-09-25T08:05:52Z","author_association":"NONE","body":"Maybe you can check the shell command `/bin/limit3` or `/bin/ulimit` (in `start_be.sh`). Cause no `limit3` in my os, so palo_be always occurred error!","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/698787757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699493868","html_url":"https://github.com/apache/doris/issues/4673#issuecomment-699493868","issue_url":"https://api.github.com/repos/apache/doris/issues/4673","id":699493868,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ5Mzg2OA==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T13:10:27Z","updated_at":"2020-09-26T13:10:27Z","author_association":"CONTRIBUTOR","body":"This is strange. the code shows that this is because the tablet does not exist.\r\nThis is hard to debug without fe.log.\r\nBut this is not a very serious problem, we can modify the code to just skip this tablet.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699493868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699495981","html_url":"https://github.com/apache/doris/issues/4674#issuecomment-699495981","issue_url":"https://api.github.com/repos/apache/doris/issues/4674","id":699495981,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTQ5NTk4MQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T13:29:59Z","updated_at":"2020-09-26T13:29:59Z","author_association":"CONTRIBUTOR","body":"Hi @Youngwb \r\nGood proposal.\r\nCould you please send this proposal as a email to dev@doris.apache.org?\r\nThat could help Doris be more in Apache Way.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699495981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699506099","html_url":"https://github.com/apache/doris/pull/4621#issuecomment-699506099","issue_url":"https://api.github.com/repos/apache/doris/issues/4621","id":699506099,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTUwNjA5OQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-26T14:55:07Z","updated_at":"2020-09-26T14:55:07Z","author_association":"CONTRIBUTOR","body":"Hi @xinghuayu007 , thanks for your PR, but I think #4658 has a more clear error msg.\r\nSo I approve that PR and will close this one.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699506099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699586356","html_url":"https://github.com/apache/doris/pull/4640#issuecomment-699586356","issue_url":"https://api.github.com/repos/apache/doris/issues/4640","id":699586356,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTU4NjM1Ng==","user":{"login":"ccoffline","id":45881148,"node_id":"MDQ6VXNlcjQ1ODgxMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/45881148?v=4","gravatar_id":"","url":"https://api.github.com/users/ccoffline","html_url":"https://github.com/ccoffline","followers_url":"https://api.github.com/users/ccoffline/followers","following_url":"https://api.github.com/users/ccoffline/following{/other_user}","gists_url":"https://api.github.com/users/ccoffline/gists{/gist_id}","starred_url":"https://api.github.com/users/ccoffline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccoffline/subscriptions","organizations_url":"https://api.github.com/users/ccoffline/orgs","repos_url":"https://api.github.com/users/ccoffline/repos","events_url":"https://api.github.com/users/ccoffline/events{/privacy}","received_events_url":"https://api.github.com/users/ccoffline/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T05:08:24Z","updated_at":"2020-09-27T05:10:11Z","author_association":"CONTRIBUTOR","body":"> Could you please add document for this new function?\r\n> under `sql-reference/sql-functions/date-time-functions/`\r\n\r\nLike I said, `TIMESTAMPDIFF` implementation in FE has some syntactic sugar on the time units, which combines all the functions into one. This makes the doc look much prettier.\r\n\r\nThis function set has (#4619)\r\n\r\n> `7(year, month, week, day, hour, minute, second) * 2(floor, ceil) * 4([timestamp], [ts, period], [ts, origin], [ts, period, origin])` = 56 functions. \r\n\r\nI'll try to make the doc look simple.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699586356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699610449","html_url":"https://github.com/apache/doris/issues/4656#issuecomment-699610449","issue_url":"https://api.github.com/repos/apache/doris/issues/4656","id":699610449,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYxMDQ0OQ==","user":{"login":"xinghuayu007","id":12771191,"node_id":"MDQ6VXNlcjEyNzcxMTkx","avatar_url":"https://avatars.githubusercontent.com/u/12771191?v=4","gravatar_id":"","url":"https://api.github.com/users/xinghuayu007","html_url":"https://github.com/xinghuayu007","followers_url":"https://api.github.com/users/xinghuayu007/followers","following_url":"https://api.github.com/users/xinghuayu007/following{/other_user}","gists_url":"https://api.github.com/users/xinghuayu007/gists{/gist_id}","starred_url":"https://api.github.com/users/xinghuayu007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinghuayu007/subscriptions","organizations_url":"https://api.github.com/users/xinghuayu007/orgs","repos_url":"https://api.github.com/users/xinghuayu007/repos","events_url":"https://api.github.com/users/xinghuayu007/events{/privacy}","received_events_url":"https://api.github.com/users/xinghuayu007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T09:27:08Z","updated_at":"2020-09-27T09:27:08Z","author_association":"CONTRIBUTOR","body":"能给一个复现的例子吗","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699610449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699620639","html_url":"https://github.com/apache/doris/issues/4598#issuecomment-699620639","issue_url":"https://api.github.com/repos/apache/doris/issues/4598","id":699620639,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYyMDYzOQ==","user":{"login":"BabySid","id":6658943,"node_id":"MDQ6VXNlcjY2NTg5NDM=","avatar_url":"https://avatars.githubusercontent.com/u/6658943?v=4","gravatar_id":"","url":"https://api.github.com/users/BabySid","html_url":"https://github.com/BabySid","followers_url":"https://api.github.com/users/BabySid/followers","following_url":"https://api.github.com/users/BabySid/following{/other_user}","gists_url":"https://api.github.com/users/BabySid/gists{/gist_id}","starred_url":"https://api.github.com/users/BabySid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BabySid/subscriptions","organizations_url":"https://api.github.com/users/BabySid/orgs","repos_url":"https://api.github.com/users/BabySid/repos","events_url":"https://api.github.com/users/BabySid/events{/privacy}","received_events_url":"https://api.github.com/users/BabySid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T11:06:54Z","updated_at":"2020-09-27T11:06:54Z","author_association":"CONTRIBUTOR","body":"@Astralidea thanks for your pr. it run ok if the sql is simple. e.g. ```with tmp as (..) select xx from tmp```\r\n\r\nbut i found a problem in my production-env if i run a sql with join/union, it will run failed as below\r\n\r\n```\r\nMySQL [(none)]> with tmp as (SELECT dt, app, bitmap_union(cuids) as uids\r\n    ->     FROM db.mytable\r\n    ->     WHERE dt = 20200925\r\n    ->         AND app IN ('xxx')\r\n    ->     GROUP BY dt, app)\r\n    -> \r\n    -> select a.dt, b.app , a.uv from \r\n    -> (select dt, count(distinct uids) as uv from tmp group by dt) a\r\n    -> left join (select dt, app from tmp) b on a.dt = b.dt;\r\nERROR 1046 (3D000): errCode = 2, detailMessage = No database selected\r\n```\r\n\r\nbtw: Is the with syntax a simple macro replacement or a result set reuse at run time?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699620639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699622904","html_url":"https://github.com/apache/doris/pull/4666#issuecomment-699622904","issue_url":"https://api.github.com/repos/apache/doris/issues/4666","id":699622904,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYyMjkwNA==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T11:29:35Z","updated_at":"2020-09-27T11:29:35Z","author_association":"CONTRIBUTOR","body":"I think a more simple way to fix this issue is:\r\n\r\n```\r\n     @Override\r\n     protected Expr uncheckedCastTo(Type targetType) throws AnalysisException {\r\n-        if (targetType.isFloatingPointType()) {\r\n+        if (targetType.isDecimal() || targetType.isDecimalV2()) {\r\n+            return this;\r\n+        } else if (targetType.isFloatingPointType()) {\r\n\r\n@@ -769,7 +749,9 @@ public class FunctionSet {\r\n         final Type[] candicateArgTypes = candicate.getArgs();\r\n         if (functionName.equalsIgnoreCase(\"hex\")\r\n                 || functionName.equalsIgnoreCase(\"greast\")\r\n-                || functionName.equalsIgnoreCase(\"least\")) {\r\n+                || functionName.equalsIgnoreCase(\"least\")\r\n+                || functionName.equalsIgnoreCase(\"lead\")\r\n+                || functionName.equalsIgnoreCase(\"lag\")) {\r\n```\r\nMy fixed way has been passed a lot of tests.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699622904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699622997","html_url":"https://github.com/apache/doris/pull/4666#issuecomment-699622997","issue_url":"https://api.github.com/repos/apache/doris/issues/4666","id":699622997,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTYyMjk5Nw==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-27T11:30:30Z","updated_at":"2020-09-27T11:30:30Z","author_association":"CONTRIBUTOR","body":"Besides，you should add a UT for this bug.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699622997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699739056","html_url":"https://github.com/apache/doris/pull/4666#issuecomment-699739056","issue_url":"https://api.github.com/repos/apache/doris/issues/4666","id":699739056,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTczOTA1Ng==","user":{"login":"HappenLee","id":10553413,"node_id":"MDQ6VXNlcjEwNTUzNDEz","avatar_url":"https://avatars.githubusercontent.com/u/10553413?v=4","gravatar_id":"","url":"https://api.github.com/users/HappenLee","html_url":"https://github.com/HappenLee","followers_url":"https://api.github.com/users/HappenLee/followers","following_url":"https://api.github.com/users/HappenLee/following{/other_user}","gists_url":"https://api.github.com/users/HappenLee/gists{/gist_id}","starred_url":"https://api.github.com/users/HappenLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HappenLee/subscriptions","organizations_url":"https://api.github.com/users/HappenLee/orgs","repos_url":"https://api.github.com/users/HappenLee/repos","events_url":"https://api.github.com/users/HappenLee/events{/privacy}","received_events_url":"https://api.github.com/users/HappenLee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T02:44:58Z","updated_at":"2020-09-28T02:44:58Z","author_association":"CONTRIBUTOR","body":"> I think a more simple way to fix this issue is:\r\n> \r\n> ```\r\n>      @Override\r\n>      protected Expr uncheckedCastTo(Type targetType) throws AnalysisException {\r\n> -        if (targetType.isFloatingPointType()) {\r\n> +        if (targetType.isDecimal() || targetType.isDecimalV2()) {\r\n> +            return this;\r\n> +        } else if (targetType.isFloatingPointType()) {\r\n> \r\n> @@ -769,7 +749,9 @@ public class FunctionSet {\r\n>          final Type[] candicateArgTypes = candicate.getArgs();\r\n>          if (functionName.equalsIgnoreCase(\"hex\")\r\n>                  || functionName.equalsIgnoreCase(\"greast\")\r\n> -                || functionName.equalsIgnoreCase(\"least\")) {\r\n> +                || functionName.equalsIgnoreCase(\"least\")\r\n> +                || functionName.equalsIgnoreCase(\"lead\")\r\n> +                || functionName.equalsIgnoreCase(\"lag\")) {\r\n> ```\r\n> \r\n> My fixed way has been passed a lot of tests.\r\n\r\nThanks，I will check again the repair way again.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699739056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/699936166","html_url":"https://github.com/apache/doris/pull/4640#issuecomment-699936166","issue_url":"https://api.github.com/repos/apache/doris/issues/4640","id":699936166,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTkzNjE2Ng==","user":{"login":"ccoffline","id":45881148,"node_id":"MDQ6VXNlcjQ1ODgxMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/45881148?v=4","gravatar_id":"","url":"https://api.github.com/users/ccoffline","html_url":"https://github.com/ccoffline","followers_url":"https://api.github.com/users/ccoffline/followers","following_url":"https://api.github.com/users/ccoffline/following{/other_user}","gists_url":"https://api.github.com/users/ccoffline/gists{/gist_id}","starred_url":"https://api.github.com/users/ccoffline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccoffline/subscriptions","organizations_url":"https://api.github.com/users/ccoffline/orgs","repos_url":"https://api.github.com/users/ccoffline/repos","events_url":"https://api.github.com/users/ccoffline/events{/privacy}","received_events_url":"https://api.github.com/users/ccoffline/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T11:00:30Z","updated_at":"2020-09-28T11:00:30Z","author_association":"CONTRIBUTOR","body":"@morningman docs added","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/699936166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/700591829","html_url":"https://github.com/apache/doris/issues/4689#issuecomment-700591829","issue_url":"https://api.github.com/repos/apache/doris/issues/4689","id":700591829,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDU5MTgyOQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T09:43:12Z","updated_at":"2020-09-29T09:43:12Z","author_association":"CONTRIBUTOR","body":"Use this instead:\r\nhttps://doris-thirdparty-repo.bj.bcebos.com/thirdparty/libevent-20180622-24236aed01798303745470e6c498bf606e88724a.zip\r\n\r\n\r\nI will modify the code later","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/700591829/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/700619249","html_url":"https://github.com/apache/doris/pull/4670#issuecomment-700619249","issue_url":"https://api.github.com/repos/apache/doris/issues/4670","id":700619249,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDYxOTI0OQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T10:39:25Z","updated_at":"2020-09-29T10:39:36Z","author_association":"CONTRIBUTOR","body":"Hi @weizuo93 , I tested in my env with high frequency load, And I recommend to add following patch.\r\n\r\n```\r\ndiff --git a/be/src/olap/compaction.cpp b/be/src/olap/compaction.cpp\r\nindex f81a029cc..aa0f0b452 100644\r\n--- a/be/src/olap/compaction.cpp\r\n+++ b/be/src/olap/compaction.cpp\r\n@@ -39,13 +39,13 @@ OLAPStatus Compaction::do_compaction(int64_t permits) {\r\n     TRACE(\"start to do compaction\");\r\n     _tablet->data_dir()->disks_compaction_score_increment(permits);\r\n     _tablet->data_dir()->disks_compaction_num_increment(1);\r\n-    OLAPStatus st = do_compaction_impl();\r\n+    OLAPStatus st = do_compaction_impl(permits);\r\n     _tablet->data_dir()->disks_compaction_score_increment(-permits);\r\n     _tablet->data_dir()->disks_compaction_num_increment(-1);\r\n     return st;\r\n }\r\n\r\n-OLAPStatus Compaction::do_compaction_impl() {\r\n+OLAPStatus Compaction::do_compaction_impl(int64_t permits) {\r\n     OlapStopWatch watch;\r\n\r\n     // 1. prepare input and output parameters\r\n@@ -63,7 +63,8 @@ OLAPStatus Compaction::do_compaction_impl() {\r\n     _tablet->compute_version_hash_from_rowsets(_input_rowsets, &_output_version_hash);\r\n\r\n     LOG(INFO) << \"start \" << compaction_name() << \". tablet=\" << _tablet->full_name()\r\n-            << \", output version is=\" << _output_version.first << \"-\" << _output_version.second;\r\n+            << \", output version is=\" << _output_version.first << \"-\" << _output_version.second\r\n+            << \", score: \" << permits;\r\n\r\n     RETURN_NOT_OK(construct_output_rowset_writer());\r\n     RETURN_NOT_OK(construct_input_rowset_readers());\r\ndiff --git a/be/src/olap/compaction.h b/be/src/olap/compaction.h\r\nindex 20a567cdc..f43bc6f1d 100644\r\n--- a/be/src/olap/compaction.h\r\n+++ b/be/src/olap/compaction.h\r\n@@ -55,7 +55,7 @@ protected:\r\n     virtual ReaderType compaction_type() const = 0;\r\n\r\n     OLAPStatus do_compaction(int64_t permits);\r\n-    OLAPStatus do_compaction_impl();\r\n+    OLAPStatus do_compaction_impl(int64_t permits);\r\n\r\n     void modify_rowsets();\r\n     OLAPStatus gc_unused_rowsets();\r\ndiff --git a/be/src/olap/storage_engine.cpp b/be/src/olap/storage_engine.cpp\r\nindex 020b40fca..c2cfcc162 100644\r\n--- a/be/src/olap/storage_engine.cpp\r\n+++ b/be/src/olap/storage_engine.cpp\r\n@@ -598,8 +598,8 @@ void StorageEngine::_perform_cumulative_compaction(TabletSharedPtr best_tablet)\r\n\r\n     OLAPStatus res = cumulative_compaction.compact();\r\n     if (res != OLAP_SUCCESS) {\r\n-        best_tablet->set_last_cumu_compaction_failure_time(UnixMillis());\r\n         if (res != OLAP_ERR_CUMULATIVE_NO_SUITABLE_VERSIONS) {\r\n+            best_tablet->set_last_cumu_compaction_failure_time(UnixMillis());\r\n             DorisMetrics::instance()->cumulative_compaction_request_failed->increment(1);\r\n             LOG(WARNING) << \"failed to do cumulative compaction. res=\" << res\r\n                         << \", table=\" << best_tablet->full_name();\r\ndiff --git a/be/src/olap/tablet_manager.cpp b/be/src/olap/tablet_manager.cpp\r\nindex fdfa99631..bf7d09890 100644\r\n--- a/be/src/olap/tablet_manager.cpp\r\n+++ b/be/src/olap/tablet_manager.cpp\r\n@@ -763,7 +763,7 @@ TabletSharedPtr TabletManager::find_best_tablet_to_compaction(\r\n     }\r\n\r\n     if (best_tablet != nullptr) {\r\n-        LOG(INFO) << \"Found the best tablet for compaction. \"\r\n+        VLOG(1) << \"Found the best tablet for compaction. \"\r\n                   << \"compaction_type=\" << compaction_type_str\r\n                   << \", tablet_id=\" << best_tablet->tablet_id()\r\n                   << \", highest_score=\" << highest_score;\r\n```\r\n\r\nFor 3 things:\r\n1. Avoid too many \"Found the best tablet for compaction. \" log.\r\n2. Still show the highest score int log, but along with the compaction start log.\r\n3. Do not set `last_cumu_compaction_failure_time` of tablet if error is `OLAP_ERR_CUMULATIVE_NO_SUITABLE_VERSIONS`. This can make compaction process continue running.\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/700619249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/700762256","html_url":"https://github.com/apache/doris/issues/4691#issuecomment-700762256","issue_url":"https://api.github.com/repos/apache/doris/issues/4691","id":700762256,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDc2MjI1Ng==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T14:55:47Z","updated_at":"2020-09-29T14:55:47Z","author_association":"CONTRIBUTOR","body":"see #4689","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/700762256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/701121994","html_url":"https://github.com/apache/doris/pull/4670#issuecomment-701121994","issue_url":"https://api.github.com/repos/apache/doris/issues/4670","id":701121994,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMTEyMTk5NA==","user":{"login":"weizuo93","id":68884553,"node_id":"MDQ6VXNlcjY4ODg0NTUz","avatar_url":"https://avatars.githubusercontent.com/u/68884553?v=4","gravatar_id":"","url":"https://api.github.com/users/weizuo93","html_url":"https://github.com/weizuo93","followers_url":"https://api.github.com/users/weizuo93/followers","following_url":"https://api.github.com/users/weizuo93/following{/other_user}","gists_url":"https://api.github.com/users/weizuo93/gists{/gist_id}","starred_url":"https://api.github.com/users/weizuo93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weizuo93/subscriptions","organizations_url":"https://api.github.com/users/weizuo93/orgs","repos_url":"https://api.github.com/users/weizuo93/repos","events_url":"https://api.github.com/users/weizuo93/events{/privacy}","received_events_url":"https://api.github.com/users/weizuo93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-30T02:34:31Z","updated_at":"2020-09-30T02:34:31Z","author_association":"CONTRIBUTOR","body":"> Hi @weizuo93 , I tested in my env with high frequency load, And I recommend to add following patch.\r\n> \r\n> ```\r\n> diff --git a/be/src/olap/compaction.cpp b/be/src/olap/compaction.cpp\r\n> index f81a029cc..aa0f0b452 100644\r\n> --- a/be/src/olap/compaction.cpp\r\n> +++ b/be/src/olap/compaction.cpp\r\n> @@ -39,13 +39,13 @@ OLAPStatus Compaction::do_compaction(int64_t permits) {\r\n>      TRACE(\"start to do compaction\");\r\n>      _tablet->data_dir()->disks_compaction_score_increment(permits);\r\n>      _tablet->data_dir()->disks_compaction_num_increment(1);\r\n> -    OLAPStatus st = do_compaction_impl();\r\n> +    OLAPStatus st = do_compaction_impl(permits);\r\n>      _tablet->data_dir()->disks_compaction_score_increment(-permits);\r\n>      _tablet->data_dir()->disks_compaction_num_increment(-1);\r\n>      return st;\r\n>  }\r\n> \r\n> -OLAPStatus Compaction::do_compaction_impl() {\r\n> +OLAPStatus Compaction::do_compaction_impl(int64_t permits) {\r\n>      OlapStopWatch watch;\r\n> \r\n>      // 1. prepare input and output parameters\r\n> @@ -63,7 +63,8 @@ OLAPStatus Compaction::do_compaction_impl() {\r\n>      _tablet->compute_version_hash_from_rowsets(_input_rowsets, &_output_version_hash);\r\n> \r\n>      LOG(INFO) << \"start \" << compaction_name() << \". tablet=\" << _tablet->full_name()\r\n> -            << \", output version is=\" << _output_version.first << \"-\" << _output_version.second;\r\n> +            << \", output version is=\" << _output_version.first << \"-\" << _output_version.second\r\n> +            << \", score: \" << permits;\r\n> \r\n>      RETURN_NOT_OK(construct_output_rowset_writer());\r\n>      RETURN_NOT_OK(construct_input_rowset_readers());\r\n> diff --git a/be/src/olap/compaction.h b/be/src/olap/compaction.h\r\n> index 20a567cdc..f43bc6f1d 100644\r\n> --- a/be/src/olap/compaction.h\r\n> +++ b/be/src/olap/compaction.h\r\n> @@ -55,7 +55,7 @@ protected:\r\n>      virtual ReaderType compaction_type() const = 0;\r\n> \r\n>      OLAPStatus do_compaction(int64_t permits);\r\n> -    OLAPStatus do_compaction_impl();\r\n> +    OLAPStatus do_compaction_impl(int64_t permits);\r\n> \r\n>      void modify_rowsets();\r\n>      OLAPStatus gc_unused_rowsets();\r\n> diff --git a/be/src/olap/storage_engine.cpp b/be/src/olap/storage_engine.cpp\r\n> index 020b40fca..c2cfcc162 100644\r\n> --- a/be/src/olap/storage_engine.cpp\r\n> +++ b/be/src/olap/storage_engine.cpp\r\n> @@ -598,8 +598,8 @@ void StorageEngine::_perform_cumulative_compaction(TabletSharedPtr best_tablet)\r\n> \r\n>      OLAPStatus res = cumulative_compaction.compact();\r\n>      if (res != OLAP_SUCCESS) {\r\n> -        best_tablet->set_last_cumu_compaction_failure_time(UnixMillis());\r\n>          if (res != OLAP_ERR_CUMULATIVE_NO_SUITABLE_VERSIONS) {\r\n> +            best_tablet->set_last_cumu_compaction_failure_time(UnixMillis());\r\n>              DorisMetrics::instance()->cumulative_compaction_request_failed->increment(1);\r\n>              LOG(WARNING) << \"failed to do cumulative compaction. res=\" << res\r\n>                          << \", table=\" << best_tablet->full_name();\r\n> diff --git a/be/src/olap/tablet_manager.cpp b/be/src/olap/tablet_manager.cpp\r\n> index fdfa99631..bf7d09890 100644\r\n> --- a/be/src/olap/tablet_manager.cpp\r\n> +++ b/be/src/olap/tablet_manager.cpp\r\n> @@ -763,7 +763,7 @@ TabletSharedPtr TabletManager::find_best_tablet_to_compaction(\r\n>      }\r\n> \r\n>      if (best_tablet != nullptr) {\r\n> -        LOG(INFO) << \"Found the best tablet for compaction. \"\r\n> +        VLOG(1) << \"Found the best tablet for compaction. \"\r\n>                    << \"compaction_type=\" << compaction_type_str\r\n>                    << \", tablet_id=\" << best_tablet->tablet_id()\r\n>                    << \", highest_score=\" << highest_score;\r\n> ```\r\n> \r\n> For 3 things:\r\n> \r\n> 1. Avoid too many \"Found the best tablet for compaction. \" log.\r\n> 2. Still show the highest score int log, but along with the compaction start log.\r\n> 3. Do not set `last_cumu_compaction_failure_time` of tablet if error is `OLAP_ERR_CUMULATIVE_NO_SUITABLE_VERSIONS`. This can make compaction process continue running.\r\n\r\nOK. It seems more reasonable.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/701121994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/703189659","html_url":"https://github.com/apache/doris/pull/4688#issuecomment-703189659","issue_url":"https://api.github.com/repos/apache/doris/issues/4688","id":703189659,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMzE4OTY1OQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-04T02:16:35Z","updated_at":"2020-10-04T02:16:35Z","author_association":"CONTRIBUTOR","body":"Hi @acelyc111 , thanks for your PR.\r\nAnd I suggest to add document for new API. Better to place it here:\r\n`administrator-guide/http-actions/be/lru-cache-action.md`.\r\n\r\nYou can refer to the content format in `administrator-guide/http-actions/fe/connection-action.md`","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/703189659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/706472342","html_url":"https://github.com/apache/doris/pull/4690#issuecomment-706472342","issue_url":"https://api.github.com/repos/apache/doris/issues/4690","id":706472342,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjQ3MjM0Mg==","user":{"login":"gengjun-git","id":54172532,"node_id":"MDQ6VXNlcjU0MTcyNTMy","avatar_url":"https://avatars.githubusercontent.com/u/54172532?v=4","gravatar_id":"","url":"https://api.github.com/users/gengjun-git","html_url":"https://github.com/gengjun-git","followers_url":"https://api.github.com/users/gengjun-git/followers","following_url":"https://api.github.com/users/gengjun-git/following{/other_user}","gists_url":"https://api.github.com/users/gengjun-git/gists{/gist_id}","starred_url":"https://api.github.com/users/gengjun-git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gengjun-git/subscriptions","organizations_url":"https://api.github.com/users/gengjun-git/orgs","repos_url":"https://api.github.com/users/gengjun-git/repos","events_url":"https://api.github.com/users/gengjun-git/events{/privacy}","received_events_url":"https://api.github.com/users/gengjun-git/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-10T02:37:40Z","updated_at":"2020-10-10T02:37:40Z","author_association":"CONTRIBUTOR","body":"> fe hard-coded to check the schema, oss should added here. and i had checcked it by mine oss broker\r\n> `https://github.com/apache/incubator-doris/blob/master/fe/fe-core/src/main/java/org/apache/doris/analysis/ExportStmt.java`\r\n> ![image](https://user-images.githubusercontent.com/5908412/94631195-5a992e80-02fa-11eb-8849-ff6db47ed76e.png)\r\n\r\nOk, I have changed and commited.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/706472342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/706505942","html_url":"https://github.com/apache/doris/issues/3306#issuecomment-706505942","issue_url":"https://api.github.com/repos/apache/doris/issues/3306","id":706505942,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjUwNTk0Mg==","user":{"login":"wuyunfeng","id":5183061,"node_id":"MDQ6VXNlcjUxODMwNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5183061?v=4","gravatar_id":"","url":"https://api.github.com/users/wuyunfeng","html_url":"https://github.com/wuyunfeng","followers_url":"https://api.github.com/users/wuyunfeng/followers","following_url":"https://api.github.com/users/wuyunfeng/following{/other_user}","gists_url":"https://api.github.com/users/wuyunfeng/gists{/gist_id}","starred_url":"https://api.github.com/users/wuyunfeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuyunfeng/subscriptions","organizations_url":"https://api.github.com/users/wuyunfeng/orgs","repos_url":"https://api.github.com/users/wuyunfeng/repos","events_url":"https://api.github.com/users/wuyunfeng/events{/privacy}","received_events_url":"https://api.github.com/users/wuyunfeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-10T07:43:40Z","updated_at":"2020-10-10T07:43:40Z","author_association":"MEMBER","body":"https://github.com/apache/incubator-doris/pull/4699  support alter operation for ES table","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/706505942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/706506226","html_url":"https://github.com/apache/doris/pull/4699#issuecomment-706506226","issue_url":"https://api.github.com/repos/apache/doris/issues/4699","id":706506226,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjUwNjIyNg==","user":{"login":"wuyunfeng","id":5183061,"node_id":"MDQ6VXNlcjUxODMwNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5183061?v=4","gravatar_id":"","url":"https://api.github.com/users/wuyunfeng","html_url":"https://github.com/wuyunfeng","followers_url":"https://api.github.com/users/wuyunfeng/followers","following_url":"https://api.github.com/users/wuyunfeng/following{/other_user}","gists_url":"https://api.github.com/users/wuyunfeng/gists{/gist_id}","starred_url":"https://api.github.com/users/wuyunfeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuyunfeng/subscriptions","organizations_url":"https://api.github.com/users/wuyunfeng/orgs","repos_url":"https://api.github.com/users/wuyunfeng/repos","events_url":"https://api.github.com/users/wuyunfeng/events{/privacy}","received_events_url":"https://api.github.com/users/wuyunfeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-10T07:45:58Z","updated_at":"2020-10-10T07:45:58Z","author_association":"MEMBER","body":"This PR can also be applied with `Elasticsearch` external table. This is so good","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/706506226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/706907194","html_url":"https://github.com/apache/doris/pull/4652#issuecomment-706907194","issue_url":"https://api.github.com/repos/apache/doris/issues/4652","id":706907194,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjkwNzE5NA==","user":{"login":"Astralidea","id":4392280,"node_id":"MDQ6VXNlcjQzOTIyODA=","avatar_url":"https://avatars.githubusercontent.com/u/4392280?v=4","gravatar_id":"","url":"https://api.github.com/users/Astralidea","html_url":"https://github.com/Astralidea","followers_url":"https://api.github.com/users/Astralidea/followers","following_url":"https://api.github.com/users/Astralidea/following{/other_user}","gists_url":"https://api.github.com/users/Astralidea/gists{/gist_id}","starred_url":"https://api.github.com/users/Astralidea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Astralidea/subscriptions","organizations_url":"https://api.github.com/users/Astralidea/orgs","repos_url":"https://api.github.com/users/Astralidea/repos","events_url":"https://api.github.com/users/Astralidea/events{/privacy}","received_events_url":"https://api.github.com/users/Astralidea/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T06:44:31Z","updated_at":"2020-10-12T06:44:31Z","author_association":"CONTRIBUTOR","body":"这个仓库又让我搞没了，换到另一个 #4712 吧，我改了一下描述，看看还有啥问题。","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/706907194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/706999709","html_url":"https://github.com/apache/doris/pull/4719#issuecomment-706999709","issue_url":"https://api.github.com/repos/apache/doris/issues/4719","id":706999709,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNjk5OTcwOQ==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T09:25:27Z","updated_at":"2020-10-12T09:25:27Z","author_association":"CONTRIBUTOR","body":"+1. But please add a UT for this bug.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/706999709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707000923","html_url":"https://github.com/apache/doris/pull/4719#issuecomment-707000923","issue_url":"https://api.github.com/repos/apache/doris/issues/4719","id":707000923,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzAwMDkyMw==","user":{"login":"EmmyMiao87","id":25147274,"node_id":"MDQ6VXNlcjI1MTQ3Mjc0","avatar_url":"https://avatars.githubusercontent.com/u/25147274?v=4","gravatar_id":"","url":"https://api.github.com/users/EmmyMiao87","html_url":"https://github.com/EmmyMiao87","followers_url":"https://api.github.com/users/EmmyMiao87/followers","following_url":"https://api.github.com/users/EmmyMiao87/following{/other_user}","gists_url":"https://api.github.com/users/EmmyMiao87/gists{/gist_id}","starred_url":"https://api.github.com/users/EmmyMiao87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EmmyMiao87/subscriptions","organizations_url":"https://api.github.com/users/EmmyMiao87/orgs","repos_url":"https://api.github.com/users/EmmyMiao87/repos","events_url":"https://api.github.com/users/EmmyMiao87/events{/privacy}","received_events_url":"https://api.github.com/users/EmmyMiao87/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T09:27:35Z","updated_at":"2020-10-12T09:27:35Z","author_association":"CONTRIBUTOR","body":"> +1. But please add a UT for this bug.\r\n\r\nThis single test is a bit difficult to add, because the slot information is not displayed in the explain.\r\n\r\nOr should I just add a single test for this function `materializeBaseTableRefResultForCrossJoinOrCountStar` ?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707000923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707002334","html_url":"https://github.com/apache/doris/issues/4654#issuecomment-707002334","issue_url":"https://api.github.com/repos/apache/doris/issues/4654","id":707002334,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzAwMjMzNA==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T09:30:06Z","updated_at":"2020-10-12T09:30:06Z","author_association":"CONTRIBUTOR","body":"@li-ang-666 Hi,  @HangyuanLiu  has fixed this bug.  \r\n\r\n@HangyuanLiu Hi, please submit a PR when you have time, thanks!","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707002334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707012733","html_url":"https://github.com/apache/doris/pull/4719#issuecomment-707012733","issue_url":"https://api.github.com/repos/apache/doris/issues/4719","id":707012733,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzAxMjczMw==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-12T09:49:02Z","updated_at":"2020-10-12T09:49:02Z","author_association":"CONTRIBUTOR","body":"> > +1. But please add a UT for this bug.\r\n> \r\n> This single test is a bit difficult to add, because the slot information is not displayed in the explain.\r\n> \r\n> Or should I just add a single test for this function `materializeBaseTableRefResultForCrossJoinOrCountStar` ?\r\n\r\nOK","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707012733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707416763","html_url":"https://github.com/apache/doris/issues/4598#issuecomment-707416763","issue_url":"https://api.github.com/repos/apache/doris/issues/4598","id":707416763,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQxNjc2Mw==","user":{"login":"Astralidea","id":4392280,"node_id":"MDQ6VXNlcjQzOTIyODA=","avatar_url":"https://avatars.githubusercontent.com/u/4392280?v=4","gravatar_id":"","url":"https://api.github.com/users/Astralidea","html_url":"https://github.com/Astralidea","followers_url":"https://api.github.com/users/Astralidea/followers","following_url":"https://api.github.com/users/Astralidea/following{/other_user}","gists_url":"https://api.github.com/users/Astralidea/gists{/gist_id}","starred_url":"https://api.github.com/users/Astralidea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Astralidea/subscriptions","organizations_url":"https://api.github.com/users/Astralidea/orgs","repos_url":"https://api.github.com/users/Astralidea/repos","events_url":"https://api.github.com/users/Astralidea/events{/privacy}","received_events_url":"https://api.github.com/users/Astralidea/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T00:41:58Z","updated_at":"2020-10-13T00:42:21Z","author_association":"CONTRIBUTOR","body":"> @Astralidea thanks for your pr. it run ok if the sql is simple. e.g. `with tmp as (..) select xx from tmp`\r\n> \r\n> but i found a problem in my production-env if i run a sql with join/union, it will run failed as below\r\n> \r\n> ```\r\n> MySQL [(none)]> with tmp as (SELECT dt, app, bitmap_union(cuids) as uids\r\n>     ->     FROM db.mytable\r\n>     ->     WHERE dt = 20200925\r\n>     ->         AND app IN ('xxx')\r\n>     ->     GROUP BY dt, app)\r\n>     -> \r\n>     -> select a.dt, b.app , a.uv from \r\n>     -> (select dt, count(distinct uids) as uv from tmp group by dt) a\r\n>     -> left join (select dt, app from tmp) b on a.dt = b.dt;\r\n> ERROR 1046 (3D000): errCode = 2, detailMessage = No database selected\r\n> ```\r\n> \r\n> btw: Is the with syntax a simple macro replacement or a result set reuse at run time?\r\n\r\nI'll see why Doris can't do this case recently","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707416763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707433023","html_url":"https://github.com/apache/doris/issues/4703#issuecomment-707433023","issue_url":"https://api.github.com/repos/apache/doris/issues/4703","id":707433023,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQzMzAyMw==","user":{"login":"yangzhg","id":9098473,"node_id":"MDQ6VXNlcjkwOTg0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9098473?v=4","gravatar_id":"","url":"https://api.github.com/users/yangzhg","html_url":"https://github.com/yangzhg","followers_url":"https://api.github.com/users/yangzhg/followers","following_url":"https://api.github.com/users/yangzhg/following{/other_user}","gists_url":"https://api.github.com/users/yangzhg/gists{/gist_id}","starred_url":"https://api.github.com/users/yangzhg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangzhg/subscriptions","organizations_url":"https://api.github.com/users/yangzhg/orgs","repos_url":"https://api.github.com/users/yangzhg/repos","events_url":"https://api.github.com/users/yangzhg/events{/privacy}","received_events_url":"https://api.github.com/users/yangzhg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T01:45:15Z","updated_at":"2020-10-13T01:45:15Z","author_association":"MEMBER","body":"Nice job!","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707433023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707446084","html_url":"https://github.com/apache/doris/issues/4711#issuecomment-707446084","issue_url":"https://api.github.com/repos/apache/doris/issues/4711","id":707446084,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ0NjA4NA==","user":{"login":"yangzhg","id":9098473,"node_id":"MDQ6VXNlcjkwOTg0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9098473?v=4","gravatar_id":"","url":"https://api.github.com/users/yangzhg","html_url":"https://github.com/yangzhg","followers_url":"https://api.github.com/users/yangzhg/followers","following_url":"https://api.github.com/users/yangzhg/following{/other_user}","gists_url":"https://api.github.com/users/yangzhg/gists{/gist_id}","starred_url":"https://api.github.com/users/yangzhg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangzhg/subscriptions","organizations_url":"https://api.github.com/users/yangzhg/orgs","repos_url":"https://api.github.com/users/yangzhg/repos","events_url":"https://api.github.com/users/yangzhg/events{/privacy}","received_events_url":"https://api.github.com/users/yangzhg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T02:31:32Z","updated_at":"2020-10-13T02:31:32Z","author_association":"MEMBER","body":"How to reproduce this core and which version of doris you are using","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707446084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707448065","html_url":"https://github.com/apache/doris/issues/4698#issuecomment-707448065","issue_url":"https://api.github.com/repos/apache/doris/issues/4698","id":707448065,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ0ODA2NQ==","user":{"login":"yangzhg","id":9098473,"node_id":"MDQ6VXNlcjkwOTg0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9098473?v=4","gravatar_id":"","url":"https://api.github.com/users/yangzhg","html_url":"https://github.com/yangzhg","followers_url":"https://api.github.com/users/yangzhg/followers","following_url":"https://api.github.com/users/yangzhg/following{/other_user}","gists_url":"https://api.github.com/users/yangzhg/gists{/gist_id}","starred_url":"https://api.github.com/users/yangzhg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangzhg/subscriptions","organizations_url":"https://api.github.com/users/yangzhg/orgs","repos_url":"https://api.github.com/users/yangzhg/repos","events_url":"https://api.github.com/users/yangzhg/events{/privacy}","received_events_url":"https://api.github.com/users/yangzhg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T02:38:47Z","updated_at":"2020-10-13T02:38:47Z","author_association":"MEMBER","body":"Please provide information about the building environment","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707448065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707452216","html_url":"https://github.com/apache/doris/issues/4508#issuecomment-707452216","issue_url":"https://api.github.com/repos/apache/doris/issues/4508","id":707452216,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ1MjIxNg==","user":{"login":"yangzhg","id":9098473,"node_id":"MDQ6VXNlcjkwOTg0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9098473?v=4","gravatar_id":"","url":"https://api.github.com/users/yangzhg","html_url":"https://github.com/yangzhg","followers_url":"https://api.github.com/users/yangzhg/followers","following_url":"https://api.github.com/users/yangzhg/following{/other_user}","gists_url":"https://api.github.com/users/yangzhg/gists{/gist_id}","starred_url":"https://api.github.com/users/yangzhg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangzhg/subscriptions","organizations_url":"https://api.github.com/users/yangzhg/orgs","repos_url":"https://api.github.com/users/yangzhg/repos","events_url":"https://api.github.com/users/yangzhg/events{/privacy}","received_events_url":"https://api.github.com/users/yangzhg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T02:55:03Z","updated_at":"2020-10-13T02:55:03Z","author_association":"MEMBER","body":"If the aggregation type of the table you use is unique and the fe configuration item enable_batch_delete_by_default is true or the table has executed enable feature batch_delete, this column will be created. This column will not affect your use. The hidden logic will be improved in subsequent versions to make it Invisible","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707452216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707455652","html_url":"https://github.com/apache/doris/issues/4656#issuecomment-707455652","issue_url":"https://api.github.com/repos/apache/doris/issues/4656","id":707455652,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ1NTY1Mg==","user":{"login":"li-ang-666","id":71430517,"node_id":"MDQ6VXNlcjcxNDMwNTE3","avatar_url":"https://avatars.githubusercontent.com/u/71430517?v=4","gravatar_id":"","url":"https://api.github.com/users/li-ang-666","html_url":"https://github.com/li-ang-666","followers_url":"https://api.github.com/users/li-ang-666/followers","following_url":"https://api.github.com/users/li-ang-666/following{/other_user}","gists_url":"https://api.github.com/users/li-ang-666/gists{/gist_id}","starred_url":"https://api.github.com/users/li-ang-666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/li-ang-666/subscriptions","organizations_url":"https://api.github.com/users/li-ang-666/orgs","repos_url":"https://api.github.com/users/li-ang-666/repos","events_url":"https://api.github.com/users/li-ang-666/events{/privacy}","received_events_url":"https://api.github.com/users/li-ang-666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T03:08:27Z","updated_at":"2020-10-13T03:08:27Z","author_association":"NONE","body":"> 能给一个复现的例子吗\r\n\r\n我给超勇哥提供了例子～","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707455652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707458483","html_url":"https://github.com/apache/doris/issues/4656#issuecomment-707458483","issue_url":"https://api.github.com/repos/apache/doris/issues/4656","id":707458483,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQ1ODQ4Mw==","user":{"login":"li-ang-666","id":71430517,"node_id":"MDQ6VXNlcjcxNDMwNTE3","avatar_url":"https://avatars.githubusercontent.com/u/71430517?v=4","gravatar_id":"","url":"https://api.github.com/users/li-ang-666","html_url":"https://github.com/li-ang-666","followers_url":"https://api.github.com/users/li-ang-666/followers","following_url":"https://api.github.com/users/li-ang-666/following{/other_user}","gists_url":"https://api.github.com/users/li-ang-666/gists{/gist_id}","starred_url":"https://api.github.com/users/li-ang-666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/li-ang-666/subscriptions","organizations_url":"https://api.github.com/users/li-ang-666/orgs","repos_url":"https://api.github.com/users/li-ang-666/repos","events_url":"https://api.github.com/users/li-ang-666/events{/privacy}","received_events_url":"https://api.github.com/users/li-ang-666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T03:17:49Z","updated_at":"2020-10-13T03:17:49Z","author_association":"NONE","body":"> 能给一个复现的例子吗\r\n\r\n@chaoyli 勇哥","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707458483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707609205","html_url":"https://github.com/apache/doris/issues/4598#issuecomment-707609205","issue_url":"https://api.github.com/repos/apache/doris/issues/4598","id":707609205,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzYwOTIwNQ==","user":{"login":"Astralidea","id":4392280,"node_id":"MDQ6VXNlcjQzOTIyODA=","avatar_url":"https://avatars.githubusercontent.com/u/4392280?v=4","gravatar_id":"","url":"https://api.github.com/users/Astralidea","html_url":"https://github.com/Astralidea","followers_url":"https://api.github.com/users/Astralidea/followers","following_url":"https://api.github.com/users/Astralidea/following{/other_user}","gists_url":"https://api.github.com/users/Astralidea/gists{/gist_id}","starred_url":"https://api.github.com/users/Astralidea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Astralidea/subscriptions","organizations_url":"https://api.github.com/users/Astralidea/orgs","repos_url":"https://api.github.com/users/Astralidea/repos","events_url":"https://api.github.com/users/Astralidea/events{/privacy}","received_events_url":"https://api.github.com/users/Astralidea/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T09:15:40Z","updated_at":"2020-10-13T09:15:40Z","author_association":"CONTRIBUTOR","body":"> @Astralidea thanks for your pr. it run ok if the sql is simple. e.g. `with tmp as (..) select xx from tmp`\r\n> \r\n> but i found a problem in my production-env if i run a sql with join/union, it will run failed as below\r\n> \r\n> ```\r\n> MySQL [(none)]> with tmp as (SELECT dt, app, bitmap_union(cuids) as uids\r\n>     ->     FROM db.mytable\r\n>     ->     WHERE dt = 20200925\r\n>     ->         AND app IN ('xxx')\r\n>     ->     GROUP BY dt, app)\r\n>     -> \r\n>     -> select a.dt, b.app , a.uv from \r\n>     -> (select dt, count(distinct uids) as uv from tmp group by dt) a\r\n>     -> left join (select dt, app from tmp) b on a.dt = b.dt;\r\n> ERROR 1046 (3D000): errCode = 2, detailMessage = No database selected\r\n> ```\r\n> \r\n> btw: Is the with syntax a simple macro replacement or a result set reuse at run time?\r\n\r\nThis is because when select nested select, with does not push down the analysis.\r\nI will submit a PR later.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707609205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707635045","html_url":"https://github.com/apache/doris/pull/4636#issuecomment-707635045","issue_url":"https://api.github.com/repos/apache/doris/issues/4636","id":707635045,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzYzNTA0NQ==","user":{"login":"penfree","id":15196366,"node_id":"MDQ6VXNlcjE1MTk2MzY2","avatar_url":"https://avatars.githubusercontent.com/u/15196366?v=4","gravatar_id":"","url":"https://api.github.com/users/penfree","html_url":"https://github.com/penfree","followers_url":"https://api.github.com/users/penfree/followers","following_url":"https://api.github.com/users/penfree/following{/other_user}","gists_url":"https://api.github.com/users/penfree/gists{/gist_id}","starred_url":"https://api.github.com/users/penfree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/penfree/subscriptions","organizations_url":"https://api.github.com/users/penfree/orgs","repos_url":"https://api.github.com/users/penfree/repos","events_url":"https://api.github.com/users/penfree/events{/privacy}","received_events_url":"https://api.github.com/users/penfree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T10:03:24Z","updated_at":"2020-10-13T10:10:19Z","author_association":"NONE","body":"this also cannot resolve the problem, replace \r\nhttps://repository.cloudera.com/content/groups/public/ ->  https://repository.cloudera.com/artifactory/cloudera-repos/\r\nhttps://repository.cloudera.com/content/repositories/third-party/ ->  https://repository.cloudera.com/artifactory/cloudera-repos/\r\nthen it worked","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707635045/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/707649869","html_url":"https://github.com/apache/doris/issues/4730#issuecomment-707649869","issue_url":"https://api.github.com/repos/apache/doris/issues/4730","id":707649869,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzY0OTg2OQ==","user":{"login":"francisoliverlee","id":5908412,"node_id":"MDQ6VXNlcjU5MDg0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/5908412?v=4","gravatar_id":"","url":"https://api.github.com/users/francisoliverlee","html_url":"https://github.com/francisoliverlee","followers_url":"https://api.github.com/users/francisoliverlee/followers","following_url":"https://api.github.com/users/francisoliverlee/following{/other_user}","gists_url":"https://api.github.com/users/francisoliverlee/gists{/gist_id}","starred_url":"https://api.github.com/users/francisoliverlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/francisoliverlee/subscriptions","organizations_url":"https://api.github.com/users/francisoliverlee/orgs","repos_url":"https://api.github.com/users/francisoliverlee/repos","events_url":"https://api.github.com/users/francisoliverlee/events{/privacy}","received_events_url":"https://api.github.com/users/francisoliverlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-13T10:32:55Z","updated_at":"2020-10-13T10:33:24Z","author_association":"MEMBER","body":"some related issues \r\nhttps://github.com/apache/incubator-doris/issues/1842\r\nhttps://github.com/apache/incubator-doris/issues/4665\r\n\r\nsome pr about lead and lag bug:\r\nhttps://github.com/apache/incubator-doris/pull/4666","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/707649869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/708097530","html_url":"https://github.com/apache/doris/pull/4735#issuecomment-708097530","issue_url":"https://api.github.com/repos/apache/doris/issues/4735","id":708097530,"node_id":"MDEyOklzc3VlQ29tbWVudDcwODA5NzUzMA==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-14T01:25:13Z","updated_at":"2020-10-14T01:25:13Z","author_association":"CONTRIBUTOR","body":"Hi, @xinyiZzz \r\nIs there an issue describing the specific problem?\r\nThe previous version of Doris had problems when handling Null partition columns, and the current code should have been fixed.\r\nIf you want to prohibit the Partition column from being null, you need to discuss it in the Issue or Mail list.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/708097530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/709231740","html_url":"https://github.com/apache/doris/pull/4739#issuecomment-709231740","issue_url":"https://api.github.com/repos/apache/doris/issues/4739","id":709231740,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTIzMTc0MA==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T11:45:25Z","updated_at":"2020-10-15T11:45:25Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/709231740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/709369939","html_url":"https://github.com/apache/doris/pull/4745#issuecomment-709369939","issue_url":"https://api.github.com/repos/apache/doris/issues/4745","id":709369939,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTM2OTkzOQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T14:37:28Z","updated_at":"2020-10-15T14:37:28Z","author_association":"CONTRIBUTOR","body":"But branch-0.12 is out of date and no longer  being maintained.\r\nAnd do we need to modify the pom in master branch?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/709369939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/709373847","html_url":"https://github.com/apache/doris/pull/4735#issuecomment-709373847","issue_url":"https://api.github.com/repos/apache/doris/issues/4735","id":709373847,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTM3Mzg0Nw==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-15T14:43:23Z","updated_at":"2020-10-15T14:43:23Z","author_association":"CONTRIBUTOR","body":"> Hi, @xinyiZzz\r\n> Is there an issue describing the specific problem?\r\n> The previous version of Doris had problems when handling Null partition columns, and the current code should have been fixed.\r\n> If you want to prohibit the Partition column from being null, you need to discuss it in the Issue or Mail list.\r\n\r\nThe null value to be a partition value is very confusing.\r\nCurrently, the null value is stored in the partition with MIN_VALUE lower bound. But if that partition is dropped, the null value\r\ncan not be loaded. So it is not a good way to solve the problem.\r\n\r\nSome other database use a special partition to save null value. But I think it is very hard to maintain and hard to understand.\r\nIs it necessary to allow null value to be a partition value?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/709373847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/709685512","html_url":"https://github.com/apache/doris/pull/4735#issuecomment-709685512","issue_url":"https://api.github.com/repos/apache/doris/issues/4735","id":709685512,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY4NTUxMg==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T02:04:20Z","updated_at":"2020-10-16T02:04:20Z","author_association":"CONTRIBUTOR","body":"> > Hi, @xinyiZzz\r\n> > Is there an issue describing the specific problem?\r\n> > The previous version of Doris had problems when handling Null partition columns, and the current code should have been fixed.\r\n> > If you want to prohibit the Partition column from being null, you need to discuss it in the Issue or Mail list.\r\n> \r\n> The null value to be a partition value is very confusing.\r\n> Currently, the null value is stored in the partition with MIN_VALUE lower bound. But if that partition is dropped, the null value\r\n> can not be loaded. So it is not a good way to solve the problem.\r\n> \r\n> Some other database use a special partition to save null value. But I think it is very hard to maintain and hard to understand.\r\n> Is it necessary to allow null value to be a partition value?\r\n\r\nYes，I agree with you about Null partition is confusing.\r\n\r\nHowever some tables currently contain Null values. If the null partition column is not supported in the future, how to deal with the current existing data, I think there should be a more complete plan.\r\n\r\nHow about creating another issue to discuss about it?\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/709685512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/709686702","html_url":"https://github.com/apache/doris/pull/4735#issuecomment-709686702","issue_url":"https://api.github.com/repos/apache/doris/issues/4735","id":709686702,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTY4NjcwMg==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T02:09:07Z","updated_at":"2020-10-16T02:09:07Z","author_association":"CONTRIBUTOR","body":"@xinyiZzz , hi , i think we can discuss it in dev@ mail list.\r\nCould you please send a email to start with it？","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/709686702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/709701279","html_url":"https://github.com/apache/doris/pull/4688#issuecomment-709701279","issue_url":"https://api.github.com/repos/apache/doris/issues/4688","id":709701279,"node_id":"MDEyOklzc3VlQ29tbWVudDcwOTcwMTI3OQ==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-16T02:59:59Z","updated_at":"2020-10-16T02:59:59Z","author_association":"MEMBER","body":"Please review https://github.com/apache/incubator-doris/pull/4751 at first","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/709701279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/710755151","html_url":"https://github.com/apache/doris/pull/4747#issuecomment-710755151","issue_url":"https://api.github.com/repos/apache/doris/issues/4747","id":710755151,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMDc1NTE1MQ==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-17T05:42:58Z","updated_at":"2020-10-17T05:42:58Z","author_association":"CONTRIBUTOR","body":"@yangzhg  Why all checks failed?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/710755151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/711495554","html_url":"https://github.com/apache/doris/pull/4688#issuecomment-711495554","issue_url":"https://api.github.com/repos/apache/doris/issues/4688","id":711495554,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTQ5NTU1NA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T03:47:48Z","updated_at":"2020-10-19T03:47:48Z","author_association":"MEMBER","body":"> Hi @acelyc111 , thanks for your PR.\r\n> And I suggest to add document for new API. Better to place it here:\r\n> `administrator-guide/http-actions/be/lru-cache-action.md`.\r\n> \r\n> You can refer to the content format in `administrator-guide/http-actions/fe/connection-action.md`\r\n\r\n@morningman I've change to expose these status to metric instead of http API, metric is more firendly to third-party monitor system.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/711495554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/711581660","html_url":"https://github.com/apache/doris/pull/4747#issuecomment-711581660","issue_url":"https://api.github.com/repos/apache/doris/issues/4747","id":711581660,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTU4MTY2MA==","user":{"login":"yangzhg","id":9098473,"node_id":"MDQ6VXNlcjkwOTg0NzM=","avatar_url":"https://avatars.githubusercontent.com/u/9098473?v=4","gravatar_id":"","url":"https://api.github.com/users/yangzhg","html_url":"https://github.com/yangzhg","followers_url":"https://api.github.com/users/yangzhg/followers","following_url":"https://api.github.com/users/yangzhg/following{/other_user}","gists_url":"https://api.github.com/users/yangzhg/gists{/gist_id}","starred_url":"https://api.github.com/users/yangzhg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangzhg/subscriptions","organizations_url":"https://api.github.com/users/yangzhg/orgs","repos_url":"https://api.github.com/users/yangzhg/repos","events_url":"https://api.github.com/users/yangzhg/events{/privacy}","received_events_url":"https://api.github.com/users/yangzhg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T05:12:04Z","updated_at":"2020-10-19T05:12:04Z","author_association":"MEMBER","body":"> @yangzhg Why all checks failed?\r\n\r\nmaybe need rebase","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/711581660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/711759337","html_url":"https://github.com/apache/doris/issues/4761#issuecomment-711759337","issue_url":"https://api.github.com/repos/apache/doris/issues/4761","id":711759337,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTc1OTMzNw==","user":{"login":"wuyunfeng","id":5183061,"node_id":"MDQ6VXNlcjUxODMwNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5183061?v=4","gravatar_id":"","url":"https://api.github.com/users/wuyunfeng","html_url":"https://github.com/wuyunfeng","followers_url":"https://api.github.com/users/wuyunfeng/followers","following_url":"https://api.github.com/users/wuyunfeng/following{/other_user}","gists_url":"https://api.github.com/users/wuyunfeng/gists{/gist_id}","starred_url":"https://api.github.com/users/wuyunfeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuyunfeng/subscriptions","organizations_url":"https://api.github.com/users/wuyunfeng/orgs","repos_url":"https://api.github.com/users/wuyunfeng/repos","events_url":"https://api.github.com/users/wuyunfeng/events{/privacy}","received_events_url":"https://api.github.com/users/wuyunfeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T07:31:34Z","updated_at":"2020-10-19T07:31:34Z","author_association":"MEMBER","body":"I will process this later @blackfox1983 ","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/711759337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/711831974","html_url":"https://github.com/apache/doris/issues/4761#issuecomment-711831974","issue_url":"https://api.github.com/repos/apache/doris/issues/4761","id":711831974,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMTgzMTk3NA==","user":{"login":"HappenLee","id":10553413,"node_id":"MDQ6VXNlcjEwNTUzNDEz","avatar_url":"https://avatars.githubusercontent.com/u/10553413?v=4","gravatar_id":"","url":"https://api.github.com/users/HappenLee","html_url":"https://github.com/HappenLee","followers_url":"https://api.github.com/users/HappenLee/followers","following_url":"https://api.github.com/users/HappenLee/following{/other_user}","gists_url":"https://api.github.com/users/HappenLee/gists{/gist_id}","starred_url":"https://api.github.com/users/HappenLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HappenLee/subscriptions","organizations_url":"https://api.github.com/users/HappenLee/orgs","repos_url":"https://api.github.com/users/HappenLee/repos","events_url":"https://api.github.com/users/HappenLee/events{/privacy}","received_events_url":"https://api.github.com/users/HappenLee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T08:24:45Z","updated_at":"2020-10-19T08:25:07Z","author_association":"CONTRIBUTOR","body":"[ODBC of Doris] The External table of ODBC have the same problem, I will fix the same problem of ODBC table. @wuyunfeng @blackfox1983 ","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/711831974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712105654","html_url":"https://github.com/apache/doris/issues/4765#issuecomment-712105654","issue_url":"https://api.github.com/repos/apache/doris/issues/4765","id":712105654,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjEwNTY1NA==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T11:55:19Z","updated_at":"2020-10-19T11:55:19Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/55968745/96447739-f60c2800-1244-11eb-81be-5b8d8bfce387.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712105654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712105740","html_url":"https://github.com/apache/doris/issues/4765#issuecomment-712105740","issue_url":"https://api.github.com/repos/apache/doris/issues/4765","id":712105740,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjEwNTc0MA==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T11:55:28Z","updated_at":"2020-10-19T11:55:28Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/55968745/96447776-06240780-1245-11eb-8780-28818a53c39c.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712105740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712107751","html_url":"https://github.com/apache/doris/issues/4765#issuecomment-712107751","issue_url":"https://api.github.com/repos/apache/doris/issues/4765","id":712107751,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjEwNzc1MQ==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T11:59:26Z","updated_at":"2020-10-19T11:59:26Z","author_association":"CONTRIBUTOR","body":"@caiconghui \r\nDit you try to log asynchronously？","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712107751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712111330","html_url":"https://github.com/apache/doris/issues/4765#issuecomment-712111330","issue_url":"https://api.github.com/repos/apache/doris/issues/4765","id":712111330,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjExMTMzMA==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T12:06:01Z","updated_at":"2020-10-19T12:06:01Z","author_association":"CONTRIBUTOR","body":"> @caiconghui\r\n> Dit you try to log asynchronously？\r\n\r\nThis is a solution, but there are still some risk to lost log data for this solution. In my option, the log level should be changed from info to debug in some class such as  FrontendServiceImpl, which process event may be in high qps. and only when we want to trace problem should we log data again. many useless log cause the log file huge at the same time.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712111330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712119895","html_url":"https://github.com/apache/doris/issues/4765#issuecomment-712119895","issue_url":"https://api.github.com/repos/apache/doris/issues/4765","id":712119895,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjExOTg5NQ==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-19T12:22:57Z","updated_at":"2020-10-19T12:23:10Z","author_association":"CONTRIBUTOR","body":"another solution is https://logging.apache.org/log4j/2.x/manual/async.html","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712119895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712579180","html_url":"https://github.com/apache/doris/issues/4767#issuecomment-712579180","issue_url":"https://api.github.com/repos/apache/doris/issues/4767","id":712579180,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjU3OTE4MA==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T04:22:04Z","updated_at":"2020-10-20T04:22:04Z","author_association":"CONTRIBUTOR","body":"We still recommend using the bare disk method. Because Doris itself already has multiple copies, using Raid will cause unnecessary storage waste. In addition, the raid itself will also depend on specific hardware conditions","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712579180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712593716","html_url":"https://github.com/apache/doris/pull/4768#issuecomment-712593716","issue_url":"https://api.github.com/repos/apache/doris/issues/4768","id":712593716,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjU5MzcxNg==","user":{"login":"wuyunfeng","id":5183061,"node_id":"MDQ6VXNlcjUxODMwNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5183061?v=4","gravatar_id":"","url":"https://api.github.com/users/wuyunfeng","html_url":"https://github.com/wuyunfeng","followers_url":"https://api.github.com/users/wuyunfeng/followers","following_url":"https://api.github.com/users/wuyunfeng/following{/other_user}","gists_url":"https://api.github.com/users/wuyunfeng/gists{/gist_id}","starred_url":"https://api.github.com/users/wuyunfeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuyunfeng/subscriptions","organizations_url":"https://api.github.com/users/wuyunfeng/orgs","repos_url":"https://api.github.com/users/wuyunfeng/repos","events_url":"https://api.github.com/users/wuyunfeng/events{/privacy}","received_events_url":"https://api.github.com/users/wuyunfeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T05:12:22Z","updated_at":"2020-10-20T05:12:22Z","author_association":"MEMBER","body":"Construct the UT is so difficult that this PR can not provide the UT","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712593716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712612048","html_url":"https://github.com/apache/doris/pull/4768#issuecomment-712612048","issue_url":"https://api.github.com/repos/apache/doris/issues/4768","id":712612048,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjYxMjA0OA==","user":{"login":"HappenLee","id":10553413,"node_id":"MDQ6VXNlcjEwNTUzNDEz","avatar_url":"https://avatars.githubusercontent.com/u/10553413?v=4","gravatar_id":"","url":"https://api.github.com/users/HappenLee","html_url":"https://github.com/HappenLee","followers_url":"https://api.github.com/users/HappenLee/followers","following_url":"https://api.github.com/users/HappenLee/following{/other_user}","gists_url":"https://api.github.com/users/HappenLee/gists{/gist_id}","starred_url":"https://api.github.com/users/HappenLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HappenLee/subscriptions","organizations_url":"https://api.github.com/users/HappenLee/orgs","repos_url":"https://api.github.com/users/HappenLee/repos","events_url":"https://api.github.com/users/HappenLee/events{/privacy}","received_events_url":"https://api.github.com/users/HappenLee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T05:58:00Z","updated_at":"2020-10-20T05:58:00Z","author_association":"CONTRIBUTOR","body":"@wuyunfeng LGTM","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712612048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712617920","html_url":"https://github.com/apache/doris/issues/4767#issuecomment-712617920","issue_url":"https://api.github.com/repos/apache/doris/issues/4767","id":712617920,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjYxNzkyMA==","user":{"login":"chxfantasy","id":5556993,"node_id":"MDQ6VXNlcjU1NTY5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5556993?v=4","gravatar_id":"","url":"https://api.github.com/users/chxfantasy","html_url":"https://github.com/chxfantasy","followers_url":"https://api.github.com/users/chxfantasy/followers","following_url":"https://api.github.com/users/chxfantasy/following{/other_user}","gists_url":"https://api.github.com/users/chxfantasy/gists{/gist_id}","starred_url":"https://api.github.com/users/chxfantasy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chxfantasy/subscriptions","organizations_url":"https://api.github.com/users/chxfantasy/orgs","repos_url":"https://api.github.com/users/chxfantasy/repos","events_url":"https://api.github.com/users/chxfantasy/events{/privacy}","received_events_url":"https://api.github.com/users/chxfantasy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T06:10:59Z","updated_at":"2020-10-20T06:10:59Z","author_association":"NONE","body":"> We still recommend using the bare disk method. Because Doris itself already has multiple copies, using Raid will cause unnecessary storage waste. In addition, the raid itself will also depend on specific hardware conditions\r\n\r\nraid可以用软件raid，冗余还好。\r\n想问一下，如果我在be上配置了多个磁盘，be在往磁盘写数据的时候，是顺序往各个磁盘上写吗？\r\n如果是这样，那我直接用软件raid盘，io性能可以提升好几倍？\r\n我们在使用clickhouse的时候就是这样的，raid 让io吞吐提升好几倍。","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712617920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/712705076","html_url":"https://github.com/apache/doris/issues/4767#issuecomment-712705076","issue_url":"https://api.github.com/repos/apache/doris/issues/4767","id":712705076,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMjcwNTA3Ng==","user":{"login":"chxfantasy","id":5556993,"node_id":"MDQ6VXNlcjU1NTY5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/5556993?v=4","gravatar_id":"","url":"https://api.github.com/users/chxfantasy","html_url":"https://github.com/chxfantasy","followers_url":"https://api.github.com/users/chxfantasy/followers","following_url":"https://api.github.com/users/chxfantasy/following{/other_user}","gists_url":"https://api.github.com/users/chxfantasy/gists{/gist_id}","starred_url":"https://api.github.com/users/chxfantasy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chxfantasy/subscriptions","organizations_url":"https://api.github.com/users/chxfantasy/orgs","repos_url":"https://api.github.com/users/chxfantasy/repos","events_url":"https://api.github.com/users/chxfantasy/events{/privacy}","received_events_url":"https://api.github.com/users/chxfantasy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-20T09:02:33Z","updated_at":"2020-10-20T09:02:33Z","author_association":"NONE","body":"> We still recommend using the bare disk method. Because Doris itself already has multiple copies, using Raid will cause unnecessary storage waste. In addition, the raid itself will also depend on specific hardware conditions\r\n\r\ndoes BE write data to multi disks serialized or in turn? \r\nif so,  i think raid can raise the disk io?\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/712705076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/713667455","html_url":"https://github.com/apache/doris/issues/4767#issuecomment-713667455","issue_url":"https://api.github.com/repos/apache/doris/issues/4767","id":713667455,"node_id":"MDEyOklzc3VlQ29tbWVudDcxMzY2NzQ1NQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-21T15:39:36Z","updated_at":"2020-10-21T15:39:36Z","author_association":"CONTRIBUTOR","body":"You can use raid0 to improve some disk performance. This is similar to replacing a hard disk with an SSD to improve IO performance.\r\n\r\nHigher-level raid is of little significance, because Doris's 3-replicas mechanism can already guarantee the reliability of data.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/713667455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/714364816","html_url":"https://github.com/apache/doris/pull/4778#issuecomment-714364816","issue_url":"https://api.github.com/repos/apache/doris/issues/4778","id":714364816,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDM2NDgxNg==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-22T09:33:30Z","updated_at":"2020-10-22T09:33:30Z","author_association":"CONTRIBUTOR","body":"It is best to talk about the cause of the problem and the idea of PR change.\r\nThis will allow others to better review the code","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/714364816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/714889069","html_url":"https://github.com/apache/doris/pull/4766#issuecomment-714889069","issue_url":"https://api.github.com/repos/apache/doris/issues/4766","id":714889069,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDg4OTA2OQ==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T03:40:05Z","updated_at":"2020-10-23T03:40:05Z","author_association":"CONTRIBUTOR","body":">Change some log level from info to debug to escape performance bottlenecks\r\n\r\nAre you sure the log is the FE performance bottlenecks? did you do any test or benchmark?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/714889069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/714969696","html_url":"https://github.com/apache/doris/issues/4654#issuecomment-714969696","issue_url":"https://api.github.com/repos/apache/doris/issues/4654","id":714969696,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDk2OTY5Ng==","user":{"login":"li-ang-666","id":71430517,"node_id":"MDQ6VXNlcjcxNDMwNTE3","avatar_url":"https://avatars.githubusercontent.com/u/71430517?v=4","gravatar_id":"","url":"https://api.github.com/users/li-ang-666","html_url":"https://github.com/li-ang-666","followers_url":"https://api.github.com/users/li-ang-666/followers","following_url":"https://api.github.com/users/li-ang-666/following{/other_user}","gists_url":"https://api.github.com/users/li-ang-666/gists{/gist_id}","starred_url":"https://api.github.com/users/li-ang-666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/li-ang-666/subscriptions","organizations_url":"https://api.github.com/users/li-ang-666/orgs","repos_url":"https://api.github.com/users/li-ang-666/repos","events_url":"https://api.github.com/users/li-ang-666/events{/privacy}","received_events_url":"https://api.github.com/users/li-ang-666/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T06:34:03Z","updated_at":"2020-10-23T06:34:03Z","author_association":"NONE","body":"> @li-ang-666 Hi, @HangyuanLiu has fixed this bug.\r\n> \r\n> @HangyuanLiu Hi, please submit a PR when you have time, thanks!\r\n\r\n@kangkaisen 0.13.9 , 这个bug修复好了嘛","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/714969696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/714980396","html_url":"https://github.com/apache/doris/pull/4766#issuecomment-714980396","issue_url":"https://api.github.com/repos/apache/doris/issues/4766","id":714980396,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNDk4MDM5Ng==","user":{"login":"caiconghui","id":55968745,"node_id":"MDQ6VXNlcjU1OTY4NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/55968745?v=4","gravatar_id":"","url":"https://api.github.com/users/caiconghui","html_url":"https://github.com/caiconghui","followers_url":"https://api.github.com/users/caiconghui/followers","following_url":"https://api.github.com/users/caiconghui/following{/other_user}","gists_url":"https://api.github.com/users/caiconghui/gists{/gist_id}","starred_url":"https://api.github.com/users/caiconghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caiconghui/subscriptions","organizations_url":"https://api.github.com/users/caiconghui/orgs","repos_url":"https://api.github.com/users/caiconghui/repos","events_url":"https://api.github.com/users/caiconghui/events{/privacy}","received_events_url":"https://api.github.com/users/caiconghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T06:40:15Z","updated_at":"2020-10-23T06:58:15Z","author_association":"CONTRIBUTOR","body":"> > Change some log level from info to debug to escape performance bottlenecks\r\n> \r\n> Are you sure the log is the FE performance bottlenecks? did you do any test or benchmark?\r\n\r\nthe heavy work is still stream load and tablet schedule in fe,  but log in FrontendServiceImpl make thing worse when cpu load is higher, we found that all stream load request failed when qps is higher because all threads(the limit is 4096) in fe blocked in db lock or log lock, and cannot process any request. just like the issue(#4765) mentioned. \r\n\r\nand I test the log performance in local machine with 8 logic core.\r\n```\r\n           LOG.info(\"start to test bench mark for log info\");\r\n            int totalThread = 4000;\r\n            TStreamLoadPutRequest request = new TStreamLoadPutRequest(\"test\", \"test\", \"test\", \"test\", null, 1111L, null, null);\r\n            CountDownLatch cdl = new CountDownLatch(totalThread);\r\n            long startTime = System.currentTimeMillis();\r\n            for (int i = 0; i < totalThread; i++) {\r\n                new Thread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        for (int j = 0; j < 5000; j++) {\r\n                            LOG.info(\"receive stream load put request. db:{}, tbl: {}, txn id: {}, load id: {}, backend: {}\",\r\n                                    request.getDb(), request.getTbl(), request.getTxnId(), DebugUtil.printId(request.getLoadId()),\r\n                                    \"localhost\");\r\n                        }\r\n                        cdl.countDown();\r\n                    }\r\n                }).start();\r\n            }\r\n            cdl.await();\r\n            long endTime = System.currentTimeMillis();\r\n            LOG.info(\"finish to test bench mark log info cost {} ms\", endTime - startTime);\r\n            System.exit(-1);\r\n```\r\nit cost about 149388ms, every log cost about 0.075ms.\r\nby the way, our fe log is heavy because of frequent stream load request which may have many rpc request, so we set the log in \r\nFrontendServiceImpl from info level to debug level, but still keep it open, so that other user can still see the log, but we can close the log switch in FrontendServiceImpl which is useless for use at most of time.\r\n\r\nMaybe the title is not accurate description for this PR.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/714980396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/715175538","html_url":"https://github.com/apache/doris/pull/4766#issuecomment-715175538","issue_url":"https://api.github.com/repos/apache/doris/issues/4766","id":715175538,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNTE3NTUzOA==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-23T08:30:29Z","updated_at":"2020-10-23T08:30:29Z","author_association":"CONTRIBUTOR","body":"@caiconghui I see. Thank you.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/715175538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716269925","html_url":"https://github.com/apache/doris/issues/4780#issuecomment-716269925","issue_url":"https://api.github.com/repos/apache/doris/issues/4780","id":716269925,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI2OTkyNQ==","user":{"login":"hli191","id":32082726,"node_id":"MDQ6VXNlcjMyMDgyNzI2","avatar_url":"https://avatars.githubusercontent.com/u/32082726?v=4","gravatar_id":"","url":"https://api.github.com/users/hli191","html_url":"https://github.com/hli191","followers_url":"https://api.github.com/users/hli191/followers","following_url":"https://api.github.com/users/hli191/following{/other_user}","gists_url":"https://api.github.com/users/hli191/gists{/gist_id}","starred_url":"https://api.github.com/users/hli191/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hli191/subscriptions","organizations_url":"https://api.github.com/users/hli191/orgs","repos_url":"https://api.github.com/users/hli191/repos","events_url":"https://api.github.com/users/hli191/events{/privacy}","received_events_url":"https://api.github.com/users/hli191/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T02:36:43Z","updated_at":"2020-10-26T02:36:43Z","author_association":"NONE","body":"我最近也在关注这个问题，能否在源表进行join的时候考虑命中已经存在的rollup来提高查询效率","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716269925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716271173","html_url":"https://github.com/apache/doris/issues/4780#issuecomment-716271173","issue_url":"https://api.github.com/repos/apache/doris/issues/4780","id":716271173,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI3MTE3Mw==","user":{"login":"Yao-MR-zz","id":8596901,"node_id":"MDQ6VXNlcjg1OTY5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8596901?v=4","gravatar_id":"","url":"https://api.github.com/users/Yao-MR-zz","html_url":"https://github.com/Yao-MR-zz","followers_url":"https://api.github.com/users/Yao-MR-zz/followers","following_url":"https://api.github.com/users/Yao-MR-zz/following{/other_user}","gists_url":"https://api.github.com/users/Yao-MR-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Yao-MR-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yao-MR-zz/subscriptions","organizations_url":"https://api.github.com/users/Yao-MR-zz/orgs","repos_url":"https://api.github.com/users/Yao-MR-zz/repos","events_url":"https://api.github.com/users/Yao-MR-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Yao-MR-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T02:42:03Z","updated_at":"2020-10-26T02:42:03Z","author_association":"NONE","body":"> 我最近也在关注这个问题，能否在源表进行join的时候考虑命中已经存在的rollup来提高查询效率\r\n\r\n目前来看在源表进行join的时候是可以命中rollup表的，会直接用rollup 进行join，\r\n\r\n但是在rollup 进行join的时候按照逻辑是可以再次进行优化join的，比如是否可以对rollup的distribute by 按照join的key进行分区，此时rollup 的直接的join是可以优化为colocation join，将会进一步的优化join的成本\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716271173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716271439","html_url":"https://github.com/apache/doris/issues/4780#issuecomment-716271439","issue_url":"https://api.github.com/repos/apache/doris/issues/4780","id":716271439,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjI3MTQzOQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T02:43:07Z","updated_at":"2020-10-26T02:43:07Z","author_association":"CONTRIBUTOR","body":"that is a good idea,\r\nbut subquery rewriting is a complex thing，we may consider it when Doris move to a more advanced query optimizer","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716271439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716314611","html_url":"https://github.com/apache/doris/issues/4788#issuecomment-716314611","issue_url":"https://api.github.com/repos/apache/doris/issues/4788","id":716314611,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMxNDYxMQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:35:05Z","updated_at":"2020-10-26T05:35:05Z","author_association":"CONTRIBUTOR","body":"Good proposal.\r\nI think we can allow user to create rollup will different distribution key when there is no data in table.\r\nThis is simple and no need the \"data shuffle\" things.\r\nAnd then we can implement more complicated schema change in future.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716314611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716317740","html_url":"https://github.com/apache/doris/issues/4789#issuecomment-716317740","issue_url":"https://api.github.com/repos/apache/doris/issues/4789","id":716317740,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMxNzc0MA==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:44:00Z","updated_at":"2020-10-26T05:44:00Z","author_association":"CONTRIBUTOR","body":"Currently, Doris only support a row with max length of 100KB.\r\nYou can add the config in `fe.conf`\r\n```\r\nmax_layout_length_per_row=xxx\r\n```\r\nto configure this value, the default is 100000, unit is Byte.\r\n\r\nAnd it may impact the performance, which we are not sure about it.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716317740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716319938","html_url":"https://github.com/apache/doris/issues/4789#issuecomment-716319938","issue_url":"https://api.github.com/repos/apache/doris/issues/4789","id":716319938,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMxOTkzOA==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:50:05Z","updated_at":"2020-10-26T05:50:05Z","author_association":"NONE","body":"> Currently, Doris only support a row with max length of 100KB.\r\n> You can add the config in `fe.conf`\r\n> \r\n> ```\r\n> max_layout_length_per_row=xxx\r\n> ```\r\n> \r\n> to configure this value, the default is 100000, unit is Byte.\r\n> \r\n> And it may impact the performance, which we are not sure about it.\r\n\r\nCan I add this in PROPERTIES while creating table ? Or must be set in fe.conf?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716319938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716321589","html_url":"https://github.com/apache/doris/issues/4789#issuecomment-716321589","issue_url":"https://api.github.com/repos/apache/doris/issues/4789","id":716321589,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMyMTU4OQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:54:18Z","updated_at":"2020-10-26T05:54:18Z","author_association":"CONTRIBUTOR","body":"Property is not supported yet, you have to set it in fe.conf, currently.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716321589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716322040","html_url":"https://github.com/apache/doris/issues/4789#issuecomment-716322040","issue_url":"https://api.github.com/repos/apache/doris/issues/4789","id":716322040,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjMyMjA0MA==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T05:55:32Z","updated_at":"2020-10-26T05:55:32Z","author_association":"NONE","body":"> Property is not supported yet, you have to set it in fe.conf, currently.\r\n\r\nThank you. I figured out.\r\nSet this in clause.\r\nADMIN SET FRONTEND CONFIG (\"fe_config_name\" = \"fe_config_value\");","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716322040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716385648","html_url":"https://github.com/apache/doris/issues/4788#issuecomment-716385648","issue_url":"https://api.github.com/repos/apache/doris/issues/4788","id":716385648,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjM4NTY0OA==","user":{"login":"Yao-MR-zz","id":8596901,"node_id":"MDQ6VXNlcjg1OTY5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8596901?v=4","gravatar_id":"","url":"https://api.github.com/users/Yao-MR-zz","html_url":"https://github.com/Yao-MR-zz","followers_url":"https://api.github.com/users/Yao-MR-zz/followers","following_url":"https://api.github.com/users/Yao-MR-zz/following{/other_user}","gists_url":"https://api.github.com/users/Yao-MR-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Yao-MR-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yao-MR-zz/subscriptions","organizations_url":"https://api.github.com/users/Yao-MR-zz/orgs","repos_url":"https://api.github.com/users/Yao-MR-zz/repos","events_url":"https://api.github.com/users/Yao-MR-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Yao-MR-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T08:11:59Z","updated_at":"2020-10-26T08:11:59Z","author_association":"NONE","body":"why not give the right to the user, and user can set the distribute key of rollup table, instead of the aggreate key, so that\r\nuser can control the location of data, cause the aggreate key may improve the performance of bigmap union Scenes, but may not cause the improvement of performance in other Scenes","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716385648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716391152","html_url":"https://github.com/apache/doris/issues/4788#issuecomment-716391152","issue_url":"https://api.github.com/repos/apache/doris/issues/4788","id":716391152,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjM5MTE1Mg==","user":{"login":"wangbo","id":12951030,"node_id":"MDQ6VXNlcjEyOTUxMDMw","avatar_url":"https://avatars.githubusercontent.com/u/12951030?v=4","gravatar_id":"","url":"https://api.github.com/users/wangbo","html_url":"https://github.com/wangbo","followers_url":"https://api.github.com/users/wangbo/followers","following_url":"https://api.github.com/users/wangbo/following{/other_user}","gists_url":"https://api.github.com/users/wangbo/gists{/gist_id}","starred_url":"https://api.github.com/users/wangbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangbo/subscriptions","organizations_url":"https://api.github.com/users/wangbo/orgs","repos_url":"https://api.github.com/users/wangbo/repos","events_url":"https://api.github.com/users/wangbo/events{/privacy}","received_events_url":"https://api.github.com/users/wangbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T08:23:06Z","updated_at":"2020-10-26T08:23:06Z","author_association":"CONTRIBUTOR","body":">why not give the right to the user, and user can set the distribute key of rollup table, instead of the aggreate key, so that\r\nuser can control the location of data, cause the aggreate key may improve the performance of bigmap union Scenes, but may not cause the improvement of performance in other Scenes\r\n\r\n@Yao-MR  This is more flexible, and I also plan to do as you say.\r\nLater I'll provide user interface design, please review as you have time.\r\nBut I'm more curious about your real usage scenarios for ```user can control the location of data```","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716391152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716397086","html_url":"https://github.com/apache/doris/issues/4788#issuecomment-716397086","issue_url":"https://api.github.com/repos/apache/doris/issues/4788","id":716397086,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjM5NzA4Ng==","user":{"login":"Yao-MR-zz","id":8596901,"node_id":"MDQ6VXNlcjg1OTY5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8596901?v=4","gravatar_id":"","url":"https://api.github.com/users/Yao-MR-zz","html_url":"https://github.com/Yao-MR-zz","followers_url":"https://api.github.com/users/Yao-MR-zz/followers","following_url":"https://api.github.com/users/Yao-MR-zz/following{/other_user}","gists_url":"https://api.github.com/users/Yao-MR-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Yao-MR-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yao-MR-zz/subscriptions","organizations_url":"https://api.github.com/users/Yao-MR-zz/orgs","repos_url":"https://api.github.com/users/Yao-MR-zz/repos","events_url":"https://api.github.com/users/Yao-MR-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Yao-MR-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T08:35:33Z","updated_at":"2020-10-26T08:39:10Z","author_association":"NONE","body":"> > why not give the right to the user, and user can set the distribute key of rollup table, instead of the aggreate key, so that\r\n> > user can control the location of data, cause the aggreate key may improve the performance of bigmap union Scenes, but may not cause the improvement of performance in other Scenes\r\n> \r\n> @Yao-MR This is more flexible, and I also plan to do as you say.\r\n> Later I'll provide user interface design, please review as you have time.\r\n> But I'm more curious about your real usage scenarios for `user can control the location of data`\r\n\r\nFirst, we can know that location of rollup table will not affect the data consistent, even if in the bitmap union scenarios,\r\n\r\nSecond, the bucket key just control the data location,  and if user`s subquery hit the the rollup table, we can not know the follow useage of the rollup table, so can can just think the rollup table like the special 'base table', \r\nso, like we can not refuse the use define bucket key,  the base table can have the user define bucket key, why not set the user define key as the bucket key of the rollup table\r\n\r\none usage scenarios i know is that, the two rollup table have the same user define bucket key, when the rollup table join on the same user define key, this will improve the performance of the join, which is same as the colocation join use the DISTRIBUTED BY HASH(`join key`) \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716397086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716422477","html_url":"https://github.com/apache/doris/issues/4772#issuecomment-716422477","issue_url":"https://api.github.com/repos/apache/doris/issues/4772","id":716422477,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjQyMjQ3Nw==","user":{"login":"ccoffline","id":45881148,"node_id":"MDQ6VXNlcjQ1ODgxMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/45881148?v=4","gravatar_id":"","url":"https://api.github.com/users/ccoffline","html_url":"https://github.com/ccoffline","followers_url":"https://api.github.com/users/ccoffline/followers","following_url":"https://api.github.com/users/ccoffline/following{/other_user}","gists_url":"https://api.github.com/users/ccoffline/gists{/gist_id}","starred_url":"https://api.github.com/users/ccoffline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccoffline/subscriptions","organizations_url":"https://api.github.com/users/ccoffline/orgs","repos_url":"https://api.github.com/users/ccoffline/repos","events_url":"https://api.github.com/users/ccoffline/events{/privacy}","received_events_url":"https://api.github.com/users/ccoffline/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T09:23:38Z","updated_at":"2020-10-26T10:06:48Z","author_association":"CONTRIBUTOR","body":"This bug is caused by #4206's fix #4235, `scanNodes.clear()` here remove all previous `scanNodes` if the last statement is considered to return an empty set.\r\nhttps://github.com/apache/incubator-doris/blob/a61eea3b2e76d741c98b9faed8cec51c1d469f94/fe/fe-core/src/main/java/org/apache/doris/planner/SingleNodePlanner.java#L284-L290","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716422477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716494100","html_url":"https://github.com/apache/doris/issues/4772#issuecomment-716494100","issue_url":"https://api.github.com/repos/apache/doris/issues/4772","id":716494100,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjQ5NDEwMA==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-26T11:42:39Z","updated_at":"2020-10-26T11:42:39Z","author_association":"CONTRIBUTOR","body":"I forget to submit a PR to the Github master branch.\r\nYou could change the code to, and submit a PR.\r\n```\r\n        if (analyzer.hasEmptyResultSet()) {\r\n            List<TupleId> scanTupleIds = root.getAllScanTupleIds();\r\n            PlanNode node = createEmptyNode(stmt, analyzer);\r\n            // Ensure result exprs will be substituted by right outputSmap\r\n            node.setOutputSmap(root.outputSmap);\r\n\r\n            // Must and could only remove the scanNode that the tuple id is same with EmptyNode,\r\n            // otherwise we will get NPE in Coordinator::computeScanRangeAssignment\r\n            scanNodes.removeIf(scanNode -> scanTupleIds.contains(scanNode.getTupleIds().get(0)));\r\n            // Currently, getMaterializedTupleIds for AnalyticEvalNode is wrong,\r\n            // So we explicitly add AnalyticEvalNode tuple ids to EmptySetNode\r\n            if (root instanceof AnalyticEvalNode) {\r\n                node.getTupleIds().addAll(root.tupleIds);\r\n            }\r\n            return node;\r\n        }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716494100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716912651","html_url":"https://github.com/apache/doris/issues/4782#issuecomment-716912651","issue_url":"https://api.github.com/repos/apache/doris/issues/4782","id":716912651,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkxMjY1MQ==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T01:10:28Z","updated_at":"2020-10-27T01:10:28Z","author_association":"CONTRIBUTOR","body":"You can create table with `unique key` to support upsert operation.\r\nYou can reference http://doris.apache.org/master/en/getting-started/data-model-rollup.html#uniq-model ","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716912651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716918696","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716918696","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716918696,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkxODY5Ng==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T01:30:05Z","updated_at":"2020-10-27T01:30:05Z","author_association":"CONTRIBUTOR","body":"I understand this is equivalent to handing part of the cumulative compaction work to the load stage to complete?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716918696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716927426","html_url":"https://github.com/apache/doris/issues/4782#issuecomment-716927426","issue_url":"https://api.github.com/repos/apache/doris/issues/4782","id":716927426,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkyNzQyNg==","user":{"login":"mmuru","id":11397834,"node_id":"MDQ6VXNlcjExMzk3ODM0","avatar_url":"https://avatars.githubusercontent.com/u/11397834?v=4","gravatar_id":"","url":"https://api.github.com/users/mmuru","html_url":"https://github.com/mmuru","followers_url":"https://api.github.com/users/mmuru/followers","following_url":"https://api.github.com/users/mmuru/following{/other_user}","gists_url":"https://api.github.com/users/mmuru/gists{/gist_id}","starred_url":"https://api.github.com/users/mmuru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmuru/subscriptions","organizations_url":"https://api.github.com/users/mmuru/orgs","repos_url":"https://api.github.com/users/mmuru/repos","events_url":"https://api.github.com/users/mmuru/events{/privacy}","received_events_url":"https://api.github.com/users/mmuru/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T01:57:07Z","updated_at":"2020-10-27T01:57:07Z","author_association":"NONE","body":"@imay: Thanks. The uniq-model documentation had a syntax error in unique key('user_id', 'username'). However, like Apache Impala supports update table statement hence I would expect Apache Doris should support update statement which is the basic feature in any SQL database. \r\n\r\nCurrently, performing update on any table model (aggregate, unique or duplicate) throws the exception. \r\n\r\n`2020-10-06 17:41:09,617 WARN (doris-mysql-nio-pool-82|684) [ConnectProcessor.analyze():243] origin_stmt: update table1 set username='muru' where siteid=5; Analyze error message: Syntax error in line 1:\r\nupdate table1 set username='muru' where siteid=5\r\n^\r\nEncountered: IDENTIFIER\r\nExpected\r\norg.apache.doris.common.AnalysisException: errCode = 2, detailMessage = Syntax error\r\n        at org.apache.doris.analysis.SqlParser.unrecovered_syntax_error(SqlParser.java:1749) ~[palo-fe.jar:3.4.0]\r\n        at java_cup.runtime.lr_parser.parse(lr_parser.java:616) ~[jflex-1.4.3.jar:?]\r\n        at org.apache.doris.common.util.SqlParserUtils.getMultiStmts(SqlParserUtils.java:50) ~[palo-fe.jar:3.4.0]\r\n        at org.apache.doris.qe.ConnectProcessor.analyze(ConnectProcessor.java:239) ~[palo-fe.jar:3.4.0]\r\n        at org.apache.doris.qe.ConnectProcessor.handleQuery(ConnectProcessor.java:183) ~[palo-fe.jar:3.4.0]\r\n        at org.apache.doris.qe.ConnectProcessor.dispatch(ConnectProcessor.java:325) ~[palo-fe.jar:3.4.0]\r\n        at org.apache.doris.qe.ConnectProcessor.processOnce(ConnectProcessor.java:510) ~[palo-fe.jar:3.4.0]\r\n        at org.apache.doris.mysql.nio.ReadListener.lambda$handleEvent$0(ReadListener.java:50) ~[palo-fe.jar:3.4.0]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_262]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_262]\r\n        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_262]\r\n` \r\nI am going to submit a request to add update table support. ","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716927426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716929333","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716929333","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716929333,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkyOTMzMw==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:03:07Z","updated_at":"2020-10-27T02:03:07Z","author_association":"CONTRIBUTOR","body":"In fact. you are doing the in-memory compaction, but we will also do disk compaction, which is repetitive. How do you avoid this issue?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716929333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716932451","html_url":"https://github.com/apache/doris/issues/4799#issuecomment-716932451","issue_url":"https://api.github.com/repos/apache/doris/issues/4799","id":716932451,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzMjQ1MQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:13:22Z","updated_at":"2020-10-27T02:13:22Z","author_association":"CONTRIBUTOR","body":"Does UPDATE command in Impala only support KUDU table?\r\n\r\nThis function is limited by the implementation of the underlying storage engine.\r\nThe Kudu engine supports the update function, while the Doris storage engine currently does not support update.\r\nWe are working hard in this direction, but it is difficult to have a perfect solution in the short term.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716932451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716933515","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716933515","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716933515,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzMzUxNQ==","user":{"login":"weizuo93","id":68884553,"node_id":"MDQ6VXNlcjY4ODg0NTUz","avatar_url":"https://avatars.githubusercontent.com/u/68884553?v=4","gravatar_id":"","url":"https://api.github.com/users/weizuo93","html_url":"https://github.com/weizuo93","followers_url":"https://api.github.com/users/weizuo93/followers","following_url":"https://api.github.com/users/weizuo93/following{/other_user}","gists_url":"https://api.github.com/users/weizuo93/gists{/gist_id}","starred_url":"https://api.github.com/users/weizuo93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weizuo93/subscriptions","organizations_url":"https://api.github.com/users/weizuo93/orgs","repos_url":"https://api.github.com/users/weizuo93/repos","events_url":"https://api.github.com/users/weizuo93/events{/privacy}","received_events_url":"https://api.github.com/users/weizuo93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:16:36Z","updated_at":"2020-10-27T02:16:36Z","author_association":"CONTRIBUTOR","body":"> I understand this is equivalent to handing part of the cumulative compaction work to the load stage to complete?\r\n\r\nAbsolutely.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716933515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716933891","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716933891","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716933891,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzMzg5MQ==","user":{"login":"weizuo93","id":68884553,"node_id":"MDQ6VXNlcjY4ODg0NTUz","avatar_url":"https://avatars.githubusercontent.com/u/68884553?v=4","gravatar_id":"","url":"https://api.github.com/users/weizuo93","html_url":"https://github.com/weizuo93","followers_url":"https://api.github.com/users/weizuo93/followers","following_url":"https://api.github.com/users/weizuo93/following{/other_user}","gists_url":"https://api.github.com/users/weizuo93/gists{/gist_id}","starred_url":"https://api.github.com/users/weizuo93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weizuo93/subscriptions","organizations_url":"https://api.github.com/users/weizuo93/orgs","repos_url":"https://api.github.com/users/weizuo93/repos","events_url":"https://api.github.com/users/weizuo93/events{/privacy}","received_events_url":"https://api.github.com/users/weizuo93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:17:48Z","updated_at":"2020-10-27T02:17:48Z","author_association":"CONTRIBUTOR","body":"> Currently, MemTable isn't queryable. If you buffer a small Memtable for a long time, which means the user couldn't real-time analyze.\r\n\r\nAll the MemTables in `vector<MemTable>` have been flushed after each load job finished. These MemTables are buffered only for the purpose of merging with subsequent  MemTable to flush a large segment file. After merge operation finished and flush  a large segment file, all the previous rowsets corresponding to MemTable in `vector<MemTable>` will be deleted. So, it will not have an effect on real-time analyze.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716933891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716935452","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716935452","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716935452,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzNTQ1Mg==","user":{"login":"weizuo93","id":68884553,"node_id":"MDQ6VXNlcjY4ODg0NTUz","avatar_url":"https://avatars.githubusercontent.com/u/68884553?v=4","gravatar_id":"","url":"https://api.github.com/users/weizuo93","html_url":"https://github.com/weizuo93","followers_url":"https://api.github.com/users/weizuo93/followers","following_url":"https://api.github.com/users/weizuo93/following{/other_user}","gists_url":"https://api.github.com/users/weizuo93/gists{/gist_id}","starred_url":"https://api.github.com/users/weizuo93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weizuo93/subscriptions","organizations_url":"https://api.github.com/users/weizuo93/orgs","repos_url":"https://api.github.com/users/weizuo93/repos","events_url":"https://api.github.com/users/weizuo93/events{/privacy}","received_events_url":"https://api.github.com/users/weizuo93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:22:26Z","updated_at":"2020-10-27T02:22:26Z","author_association":"CONTRIBUTOR","body":"> In fact. you are doing the in-memory compaction, but we will also do disk compaction, which is repetitive. How do you avoid this issue?\r\n\r\nSometimes, disk compaction may not be done in time.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716935452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716936716","html_url":"https://github.com/apache/doris/issues/4782#issuecomment-716936716","issue_url":"https://api.github.com/repos/apache/doris/issues/4782","id":716936716,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzNjcxNg==","user":{"login":"imay","id":1249159,"node_id":"MDQ6VXNlcjEyNDkxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1249159?v=4","gravatar_id":"","url":"https://api.github.com/users/imay","html_url":"https://github.com/imay","followers_url":"https://api.github.com/users/imay/followers","following_url":"https://api.github.com/users/imay/following{/other_user}","gists_url":"https://api.github.com/users/imay/gists{/gist_id}","starred_url":"https://api.github.com/users/imay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imay/subscriptions","organizations_url":"https://api.github.com/users/imay/orgs","repos_url":"https://api.github.com/users/imay/repos","events_url":"https://api.github.com/users/imay/events{/privacy}","received_events_url":"https://api.github.com/users/imay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:26:25Z","updated_at":"2020-10-27T02:26:25Z","author_association":"CONTRIBUTOR","body":"> The uniq-model documentation had a syntax error in unique key('user_id', 'username')\r\n\r\nIf you want to change username, you should create a table like \r\n\r\n```\r\nCREATE TABLE `test_unique` (\r\n    user_id int,\r\n    username varchar(64)\r\n) ENGINE=OLAP\r\nUNIQUE KEY(`user_id`)\r\nDISTRIBUTED BY HASH(`user_id`) BUCKETS 1\r\nPROPERTIES (\r\n\"replication_num\" = \"1\"\r\n);\r\n```\r\ninsert one row by \"insert into test_unique values (1, \"hello\");\"\r\n\r\nThen you can change 'username' by insert a new row to overwrite the old one, such as \"insert into test_unique values (1, \"world\");\"\r\nThen the user name is changed to \"world\"\r\n\r\n> I am going to submit a request to add update table support.\r\n\r\nI think supporing update is complicated operation. Can you give us some detail about your change?\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716936716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716938157","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716938157","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716938157,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzODE1Nw==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:31:03Z","updated_at":"2020-10-27T02:31:03Z","author_association":"CONTRIBUTOR","body":"> all the previous rowsets corresponding to MemTable in `vector<MemTable>` will be deleted\r\n\r\nThis is not easy to implement. the rowsets which already been flushed to the disk may be merged by cumulative or base compaction, so that you can not find all origin rowsets.\r\nIf you implement what you designed, you need to consider the existing compaction logic. As far as I can think of, I am not sure whether the additional memory and IO overhead brought by this approach will have other effects.\r\n\r\nIn fact, this is an implementation of \"Group Commit\". And I think a readable Memtable and WAL may be a better way.\r\n\r\nI remember that @vagetablechicken and @decster was try to implement \"Memory Engine #3382\". Can we go that way?","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716938157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716938770","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716938770","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716938770,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjkzODc3MA==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:33:05Z","updated_at":"2020-10-27T02:33:05Z","author_association":"CONTRIBUTOR","body":"> > In fact. you are doing the in-memory compaction, but we will also do disk compaction, which is repetitive. How do you avoid this issue?\r\n> \r\n> Sometimes, disk compaction may not be done in time.\r\n\r\nYou shouldn't do this assumption always, we should the mechanism to avoid one tablet does in-memory compaction and disk compaction at the same time.\r\n\r\nBesides, you should consider memory usage. If one table load involves 1000 tablets, at most, you will use 1000 * 100MB = 100GB memory. How do you avoid this issue? \r\n\r\nDoes the vector<MemTable> respect to `DeltaWriter::flush_memtable_and_wait`?   If so, I think it isn't very simple.\r\n  ","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716938770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716940441","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-716940441","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":716940441,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjk0MDQ0MQ==","user":{"login":"yiguolei","id":9208457,"node_id":"MDQ6VXNlcjkyMDg0NTc=","avatar_url":"https://avatars.githubusercontent.com/u/9208457?v=4","gravatar_id":"","url":"https://api.github.com/users/yiguolei","html_url":"https://github.com/yiguolei","followers_url":"https://api.github.com/users/yiguolei/followers","following_url":"https://api.github.com/users/yiguolei/following{/other_user}","gists_url":"https://api.github.com/users/yiguolei/gists{/gist_id}","starred_url":"https://api.github.com/users/yiguolei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yiguolei/subscriptions","organizations_url":"https://api.github.com/users/yiguolei/orgs","repos_url":"https://api.github.com/users/yiguolei/repos","events_url":"https://api.github.com/users/yiguolei/events{/privacy}","received_events_url":"https://api.github.com/users/yiguolei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T02:38:32Z","updated_at":"2020-10-27T02:40:23Z","author_association":"CONTRIBUTOR","body":"@weizuo93 I think this is a very big change. You should consider the read process and replication/clone process, and maybe you should also consider a Write-Ahead-Log. Could you please provide more information on WAL and clone and read?\r\nAnd also It does not mean load process finished when memtable is generated because load is a two phase procedure. There may be many useless memtable in vector<MemTable>.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716940441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716952268","html_url":"https://github.com/apache/doris/issues/4799#issuecomment-716952268","issue_url":"https://api.github.com/repos/apache/doris/issues/4799","id":716952268,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjk1MjI2OA==","user":{"login":"yiguolei","id":9208457,"node_id":"MDQ6VXNlcjkyMDg0NTc=","avatar_url":"https://avatars.githubusercontent.com/u/9208457?v=4","gravatar_id":"","url":"https://api.github.com/users/yiguolei","html_url":"https://github.com/yiguolei","followers_url":"https://api.github.com/users/yiguolei/followers","following_url":"https://api.github.com/users/yiguolei/following{/other_user}","gists_url":"https://api.github.com/users/yiguolei/gists{/gist_id}","starred_url":"https://api.github.com/users/yiguolei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yiguolei/subscriptions","organizations_url":"https://api.github.com/users/yiguolei/orgs","repos_url":"https://api.github.com/users/yiguolei/repos","events_url":"https://api.github.com/users/yiguolei/events{/privacy}","received_events_url":"https://api.github.com/users/yiguolei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T03:18:37Z","updated_at":"2020-10-27T03:18:37Z","author_association":"CONTRIBUTOR","body":"@morningman How about implement Update Where Stmt as a alter job？ ","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716952268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716976794","html_url":"https://github.com/apache/doris/issues/4772#issuecomment-716976794","issue_url":"https://api.github.com/repos/apache/doris/issues/4772","id":716976794,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjk3Njc5NA==","user":{"login":"ccoffline","id":45881148,"node_id":"MDQ6VXNlcjQ1ODgxMTQ4","avatar_url":"https://avatars.githubusercontent.com/u/45881148?v=4","gravatar_id":"","url":"https://api.github.com/users/ccoffline","html_url":"https://github.com/ccoffline","followers_url":"https://api.github.com/users/ccoffline/followers","following_url":"https://api.github.com/users/ccoffline/following{/other_user}","gists_url":"https://api.github.com/users/ccoffline/gists{/gist_id}","starred_url":"https://api.github.com/users/ccoffline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccoffline/subscriptions","organizations_url":"https://api.github.com/users/ccoffline/orgs","repos_url":"https://api.github.com/users/ccoffline/repos","events_url":"https://api.github.com/users/ccoffline/events{/privacy}","received_events_url":"https://api.github.com/users/ccoffline/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T04:42:16Z","updated_at":"2020-10-27T04:42:16Z","author_association":"CONTRIBUTOR","body":"> I forget to submit a PR to the Github master branch.\r\n> You could change the code to, and submit a PR.\r\n> \r\n> ```\r\n>         if (analyzer.hasEmptyResultSet()) {\r\n>             List<TupleId> scanTupleIds = root.getAllScanTupleIds();\r\n>             PlanNode node = createEmptyNode(stmt, analyzer);\r\n>             // Ensure result exprs will be substituted by right outputSmap\r\n>             node.setOutputSmap(root.outputSmap);\r\n> \r\n>             // Must and could only remove the scanNode that the tuple id is same with EmptyNode,\r\n>             // otherwise we will get NPE in Coordinator::computeScanRangeAssignment\r\n>             scanNodes.removeIf(scanNode -> scanTupleIds.contains(scanNode.getTupleIds().get(0)));\r\n>             // Currently, getMaterializedTupleIds for AnalyticEvalNode is wrong,\r\n>             // So we explicitly add AnalyticEvalNode tuple ids to EmptySetNode\r\n>             if (root instanceof AnalyticEvalNode) {\r\n>                 node.getTupleIds().addAll(root.tupleIds);\r\n>             }\r\n>             return node;\r\n>         }\r\n> ```\r\n\r\nI can't find method `getAllScanTupleIds` in `PlanNode root`","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716976794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/716987878","html_url":"https://github.com/apache/doris/issues/4772#issuecomment-716987878","issue_url":"https://api.github.com/repos/apache/doris/issues/4772","id":716987878,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNjk4Nzg3OA==","user":{"login":"kangkaisen","id":9894906,"node_id":"MDQ6VXNlcjk4OTQ5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9894906?v=4","gravatar_id":"","url":"https://api.github.com/users/kangkaisen","html_url":"https://github.com/kangkaisen","followers_url":"https://api.github.com/users/kangkaisen/followers","following_url":"https://api.github.com/users/kangkaisen/following{/other_user}","gists_url":"https://api.github.com/users/kangkaisen/gists{/gist_id}","starred_url":"https://api.github.com/users/kangkaisen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kangkaisen/subscriptions","organizations_url":"https://api.github.com/users/kangkaisen/orgs","repos_url":"https://api.github.com/users/kangkaisen/repos","events_url":"https://api.github.com/users/kangkaisen/events{/privacy}","received_events_url":"https://api.github.com/users/kangkaisen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T05:17:57Z","updated_at":"2020-10-27T05:21:15Z","author_association":"CONTRIBUTOR","body":"@ccoffline Sorry. you could add this method to `PlanNode`:\r\n\r\n```\r\n    protected List<TupleId> getAllScanTupleIds() {\r\n        List<TupleId> tupleIds = Lists.newArrayList();\r\n        List<ScanNode> scanNodes = Lists.newArrayList();\r\n        collectAll(Predicates.instanceOf(ScanNode.class), scanNodes);\r\n        for(ScanNode node: scanNodes) {\r\n            tupleIds.addAll(node.getTupleIds());\r\n        }\r\n        return tupleIds;\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/716987878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/717045058","html_url":"https://github.com/apache/doris/issues/4799#issuecomment-717045058","issue_url":"https://api.github.com/repos/apache/doris/issues/4799","id":717045058,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzA0NTA1OA==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T07:26:29Z","updated_at":"2020-10-27T07:26:29Z","author_association":"CONTRIBUTOR","body":"> @morningman How about implement Update Where Stmt as a alter job？\r\n\r\nIf so, currently we can only do it in UNIQUE_KEY model, and the performance can not be guaranteed.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/717045058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/717150935","html_url":"https://github.com/apache/doris/issues/4797#issuecomment-717150935","issue_url":"https://api.github.com/repos/apache/doris/issues/4797","id":717150935,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzE1MDkzNQ==","user":{"login":"weizuo93","id":68884553,"node_id":"MDQ6VXNlcjY4ODg0NTUz","avatar_url":"https://avatars.githubusercontent.com/u/68884553?v=4","gravatar_id":"","url":"https://api.github.com/users/weizuo93","html_url":"https://github.com/weizuo93","followers_url":"https://api.github.com/users/weizuo93/followers","following_url":"https://api.github.com/users/weizuo93/following{/other_user}","gists_url":"https://api.github.com/users/weizuo93/gists{/gist_id}","starred_url":"https://api.github.com/users/weizuo93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weizuo93/subscriptions","organizations_url":"https://api.github.com/users/weizuo93/orgs","repos_url":"https://api.github.com/users/weizuo93/repos","events_url":"https://api.github.com/users/weizuo93/events{/privacy}","received_events_url":"https://api.github.com/users/weizuo93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T10:40:48Z","updated_at":"2020-10-27T10:40:48Z","author_association":"CONTRIBUTOR","body":" I encountered some troubles when I optimize MemTable flush mechanism to solve the problem of to many small segment files. I'll try other solution to deal with it.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/717150935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/717652899","html_url":"https://github.com/apache/doris/issues/4805#issuecomment-717652899","issue_url":"https://api.github.com/repos/apache/doris/issues/4805","id":717652899,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzY1Mjg5OQ==","user":{"login":"Yao-MR-zz","id":8596901,"node_id":"MDQ6VXNlcjg1OTY5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8596901?v=4","gravatar_id":"","url":"https://api.github.com/users/Yao-MR-zz","html_url":"https://github.com/Yao-MR-zz","followers_url":"https://api.github.com/users/Yao-MR-zz/followers","following_url":"https://api.github.com/users/Yao-MR-zz/following{/other_user}","gists_url":"https://api.github.com/users/Yao-MR-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Yao-MR-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Yao-MR-zz/subscriptions","organizations_url":"https://api.github.com/users/Yao-MR-zz/orgs","repos_url":"https://api.github.com/users/Yao-MR-zz/repos","events_url":"https://api.github.com/users/Yao-MR-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Yao-MR-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T02:21:49Z","updated_at":"2020-10-28T02:21:49Z","author_association":"NONE","body":"why must cast the int to date type?\r\n\r\nin my idea, i think this the type cast problem, so the problem is what is the type should the cast the int to,  \r\n\r\nso just cast the int to the type of the partition key type,\r\n\r\nand i also doubt that why scan the all partion. \r\n\r\n\r\nmyabe this is the right flow ,\r\n\r\n1, we should know that the condition key has the partion key, and get the info from the catalog \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/717652899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/doris/issues/comments/717662848","html_url":"https://github.com/apache/doris/issues/4805#issuecomment-717662848","issue_url":"https://api.github.com/repos/apache/doris/issues/4805","id":717662848,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzY2Mjg0OA==","user":{"login":"xinghuayu007","id":12771191,"node_id":"MDQ6VXNlcjEyNzcxMTkx","avatar_url":"https://avatars.githubusercontent.com/u/12771191?v=4","gravatar_id":"","url":"https://api.github.com/users/xinghuayu007","html_url":"https://github.com/xinghuayu007","followers_url":"https://api.github.com/users/xinghuayu007/followers","following_url":"https://api.github.com/users/xinghuayu007/following{/other_user}","gists_url":"https://api.github.com/users/xinghuayu007/gists{/gist_id}","starred_url":"https://api.github.com/users/xinghuayu007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinghuayu007/subscriptions","organizations_url":"https://api.github.com/users/xinghuayu007/orgs","repos_url":"https://api.github.com/users/xinghuayu007/repos","events_url":"https://api.github.com/users/xinghuayu007/events{/privacy}","received_events_url":"https://api.github.com/users/xinghuayu007/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-28T02:55:42Z","updated_at":"2020-10-28T02:55:42Z","author_association":"CONTRIBUTOR","body":"Yes, this is the problem of type-casting. In current system, sql like `select * from table where date in (20201030);` date is type of DATE; date and 20201030 will be casted to `DOUBLE` type. That is not corret. I think the invalid type should be found in `Analyze Phase`, not be found in phase of 'Pruning Partitions'. This problem will not cause to scan all partitions.","reactions":{"url":"https://api.github.com/repos/apache/doris/issues/comments/717662848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]