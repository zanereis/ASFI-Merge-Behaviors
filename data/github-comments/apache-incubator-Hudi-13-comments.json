[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431194859","html_url":"https://github.com/apache/hudi/pull/484#issuecomment-431194859","issue_url":"https://api.github.com/repos/apache/hudi/issues/484","id":431194859,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTE5NDg1OQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-18T23:15:36Z","updated_at":"2018-10-18T23:15:36Z","author_association":"CONTRIBUTOR","body":"@shangxinli As @vinothchandar mentioned, could we add a check (in a test) and confirm that the props are carried over ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431194859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431195175","html_url":"https://github.com/apache/hudi/pull/488#issuecomment-431195175","issue_url":"https://api.github.com/repos/apache/hudi/issues/488","id":431195175,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTE5NTE3NQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-18T23:17:23Z","updated_at":"2018-10-18T23:17:23Z","author_association":"CONTRIBUTOR","body":"@bvaradar Before reviewing the diff, have one question. If the intention of the diff to reduce listStatus calls when accessing the filesystem view repeatedly within the same job or is the intention to reduce across ingestion vs compaction ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431195175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431196336","html_url":"https://github.com/apache/hudi/pull/470#issuecomment-431196336","issue_url":"https://api.github.com/repos/apache/hudi/issues/470","id":431196336,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTE5NjMzNg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-18T23:24:15Z","updated_at":"2018-10-18T23:24:15Z","author_association":"CONTRIBUTOR","body":"@vinothchandar removed WIP","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431196336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431203108","html_url":"https://github.com/apache/hudi/pull/488#issuecomment-431203108","issue_url":"https://api.github.com/repos/apache/hudi/issues/488","id":431203108,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTIwMzEwOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T00:04:40Z","updated_at":"2018-10-19T00:04:40Z","author_association":"CONTRIBUTOR","body":"@n3nash : The intent was to avoid the repeated list-status calls from each IO handle task during ingestion and compaction. No change on the reader's path though. This is similar to the closed PR https://github.com/uber/hudi/pull/278 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431203108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431208701","html_url":"https://github.com/apache/hudi/pull/484#issuecomment-431208701","issue_url":"https://api.github.com/repos/apache/hudi/issues/484","id":431208701,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTIwODcwMQ==","user":{"login":"shangxinli","id":31421745,"node_id":"MDQ6VXNlcjMxNDIxNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31421745?v=4","gravatar_id":"","url":"https://api.github.com/users/shangxinli","html_url":"https://github.com/shangxinli","followers_url":"https://api.github.com/users/shangxinli/followers","following_url":"https://api.github.com/users/shangxinli/following{/other_user}","gists_url":"https://api.github.com/users/shangxinli/gists{/gist_id}","starred_url":"https://api.github.com/users/shangxinli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shangxinli/subscriptions","organizations_url":"https://api.github.com/users/shangxinli/orgs","repos_url":"https://api.github.com/users/shangxinli/repos","events_url":"https://api.github.com/users/shangxinli/events{/privacy}","received_events_url":"https://api.github.com/users/shangxinli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T00:42:28Z","updated_at":"2018-10-19T00:42:28Z","author_association":"CONTRIBUTOR","body":"I am working on it. It is almost done but I got a lot of meetings today. So\nI will send the test soon.\n\nOn Thu, Oct 18, 2018 at 4:17 PM n3nash <notifications@github.com> wrote:\n\n> @shangxinli <https://github.com/shangxinli> As @vinothchandar\n> <https://github.com/vinothchandar> mentioned, could we add a check (in a\n> test) and confirm that the props are carried over ?\n>\n> â€”\n> You are receiving this because you were mentioned.\n>\n>\n> Reply to this email directly, view it on GitHub\n> <https://github.com/uber/hudi/pull/484#issuecomment-431194859>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/Ad91MUOoRf6_zKol3RqoIMywAaklJNDFks5umQv0gaJpZM4XYYD->\n> .\n>\n-- \nXinli Shang\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431208701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431404786","html_url":"https://github.com/apache/hudi/pull/484#issuecomment-431404786","issue_url":"https://api.github.com/repos/apache/hudi/issues/484","id":431404786,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQwNDc4Ng==","user":{"login":"shangxinli","id":31421745,"node_id":"MDQ6VXNlcjMxNDIxNzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31421745?v=4","gravatar_id":"","url":"https://api.github.com/users/shangxinli","html_url":"https://github.com/shangxinli","followers_url":"https://api.github.com/users/shangxinli/followers","following_url":"https://api.github.com/users/shangxinli/following{/other_user}","gists_url":"https://api.github.com/users/shangxinli/gists{/gist_id}","starred_url":"https://api.github.com/users/shangxinli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shangxinli/subscriptions","organizations_url":"https://api.github.com/users/shangxinli/orgs","repos_url":"https://api.github.com/users/shangxinli/repos","events_url":"https://api.github.com/users/shangxinli/events{/privacy}","received_events_url":"https://api.github.com/users/shangxinli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T15:35:43Z","updated_at":"2018-10-19T15:35:43Z","author_association":"CONTRIBUTOR","body":"Added unit test","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431404786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431425529","html_url":"https://github.com/apache/hudi/pull/484#issuecomment-431425529","issue_url":"https://api.github.com/repos/apache/hudi/issues/484","id":431425529,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQyNTUyOQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T16:44:24Z","updated_at":"2018-10-19T16:44:24Z","author_association":"CONTRIBUTOR","body":"@shangxinli one minor comment, rest looks good.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431425529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431478999","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-431478999","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":431478999,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTQ3ODk5OQ==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T19:48:43Z","updated_at":"2018-10-19T19:48:43Z","author_association":"CONTRIBUTOR","body":"Thanks will come back with updates based on comments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431478999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431512819","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-431512819","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":431512819,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTUxMjgxOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-19T22:03:42Z","updated_at":"2018-10-19T22:03:42Z","author_association":"MEMBER","body":"+1 on for a HoodieJavaStreamingApp .. we are looking into streaming as a standard deployment mode for MOR datasets.\r\n\r\nwe can have a call sometime to brainstorm and hash out ideas.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431512819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431915532","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-431915532","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":431915532,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTkxNTUzMg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-22T17:56:43Z","updated_at":"2018-10-22T17:56:43Z","author_association":"MEMBER","body":"Done! ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431915532/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431915678","html_url":"https://github.com/apache/hudi/issues/490#issuecomment-431915678","issue_url":"https://api.github.com/repos/apache/hudi/issues/490","id":431915678,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTkxNTY3OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-22T17:57:10Z","updated_at":"2018-10-22T17:57:10Z","author_association":"MEMBER","body":"interesting.. any reproducible cases? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431915678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431929770","html_url":"https://github.com/apache/hudi/pull/484#issuecomment-431929770","issue_url":"https://api.github.com/repos/apache/hudi/issues/484","id":431929770,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTkyOTc3MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-22T18:38:20Z","updated_at":"2018-10-22T18:38:20Z","author_association":"MEMBER","body":"@shangxinli can you address the minor ones. we can merge thereafter","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431929770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431983610","html_url":"https://github.com/apache/hudi/pull/488#issuecomment-431983610","issue_url":"https://api.github.com/repos/apache/hudi/issues/488","id":431983610,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMTk4MzYxMA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-22T20:59:03Z","updated_at":"2018-10-22T20:59:03Z","author_association":"CONTRIBUTOR","body":"General comment : The HoodieTable needs to hold this cache on the driver. There are 2 repercussions of this : \r\n\r\n1. The hoodieTable object will be much larger not only in the driver but also in the executor (since it needs to be there to avoid listStatus). This means it will eat up part of the JVM memory.\r\n\r\n2. The hoodieTable object must be created (and cached) on the driver and sent over to all executors. There is an added network overhead. \r\n\r\n@bvaradar I will share a document with you which shows numbers for each of these. I think it may be worth while to make this whole caching configurable.\r\n\r\n@vinothchandar WDYT ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/431983610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432419469","html_url":"https://github.com/apache/hudi/pull/484#issuecomment-432419469","issue_url":"https://api.github.com/repos/apache/hudi/issues/484","id":432419469,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQxOTQ2OQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:05:41Z","updated_at":"2018-10-23T21:05:41Z","author_association":"MEMBER","body":"@shangxinli please squash your commits as well into one","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432419469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432420485","html_url":"https://github.com/apache/hudi/issues/472#issuecomment-432420485","issue_url":"https://api.github.com/repos/apache/hudi/issues/472","id":432420485,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyMDQ4NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:08:49Z","updated_at":"2018-10-23T21:08:49Z","author_association":"MEMBER","body":"incremental DF works that way coz it only reads new data..  For regular data source, without glob we would have to read the entire table..\r\n\r\nclosing since this is not an issue","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432420485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432422803","html_url":"https://github.com/apache/hudi/issues/429#issuecomment-432422803","issue_url":"https://api.github.com/repos/apache/hudi/issues/429","id":432422803,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyMjgwMw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:16:12Z","updated_at":"2018-10-23T21:16:12Z","author_association":"MEMBER","body":"Thinking more about this, without specific knowledge about the datasource its not possible to design checkpoints.. Hence, we will close this and add new sources based on demand","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432422803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432422934","html_url":"https://github.com/apache/hudi/issues/430#issuecomment-432422934","issue_url":"https://api.github.com/repos/apache/hudi/issues/430","id":432422934,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyMjkzNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:16:35Z","updated_at":"2018-10-23T21:16:35Z","author_association":"MEMBER","body":"this is merged","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432422934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432423155","html_url":"https://github.com/apache/hudi/issues/424#issuecomment-432423155","issue_url":"https://api.github.com/repos/apache/hudi/issues/424","id":432423155,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyMzE1NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:17:11Z","updated_at":"2018-10-23T21:17:11Z","author_association":"MEMBER","body":"Think we have the workaround here.. reopen if further discussion is needed","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432423155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432423395","html_url":"https://github.com/apache/hudi/issues/414#issuecomment-432423395","issue_url":"https://api.github.com/repos/apache/hudi/issues/414","id":432423395,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyMzM5NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:17:50Z","updated_at":"2018-10-23T21:17:50Z","author_association":"MEMBER","body":"already fixed on master.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432423395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432424078","html_url":"https://github.com/apache/hudi/issues/410#issuecomment-432424078","issue_url":"https://api.github.com/repos/apache/hudi/issues/410","id":432424078,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyNDA3OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:19:54Z","updated_at":"2018-10-23T21:19:54Z","author_association":"MEMBER","body":"@vectorijk apologies.. missed this..  \r\n\r\nCurrently we use Avro GenericRecord as the canonical representation of a record inside Hoodie. While that works great if your source has avro, (e.g kafka), it incurs additional Row -> Avro conversion if your source is another dataframe (e.g rthe datasource) route. this issue is to explore a way to write rows all the way.  hope that clears it up ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432424078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432424538","html_url":"https://github.com/apache/hudi/issues/363#issuecomment-432424538","issue_url":"https://api.github.com/repos/apache/hudi/issues/363","id":432424538,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyNDUzOA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:21:19Z","updated_at":"2018-10-23T21:21:19Z","author_association":"MEMBER","body":"@n3nash you fixed this right. please close the issue if so ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432424538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432425125","html_url":"https://github.com/apache/hudi/issues/333#issuecomment-432425125","issue_url":"https://api.github.com/repos/apache/hudi/issues/333","id":432425125,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyNTEyNQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:23:10Z","updated_at":"2018-10-23T21:23:10Z","author_association":"MEMBER","body":"Closing this since PR has been inactive for a while. please reopen if needed","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432425125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432425511","html_url":"https://github.com/apache/hudi/issues/270#issuecomment-432425511","issue_url":"https://api.github.com/repos/apache/hudi/issues/270","id":432425511,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyNTUxMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:24:20Z","updated_at":"2018-10-23T21:24:20Z","author_association":"MEMBER","body":"@n3nash ping ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432425511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432426832","html_url":"https://github.com/apache/hudi/issues/107#issuecomment-432426832","issue_url":"https://api.github.com/repos/apache/hudi/issues/107","id":432426832,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQyNjgzMg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T21:28:24Z","updated_at":"2018-10-23T21:28:24Z","author_association":"MEMBER","body":"Closing since we are not pursuing this anymore","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432426832/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432471336","html_url":"https://github.com/apache/hudi/issues/437#issuecomment-432471336","issue_url":"https://api.github.com/repos/apache/hudi/issues/437","id":432471336,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjQ3MTMzNg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T00:42:54Z","updated_at":"2018-10-24T00:42:54Z","author_association":"MEMBER","body":"rolling this under #284 and closing this","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432471336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432699184","html_url":"https://github.com/apache/hudi/pull/477#issuecomment-432699184","issue_url":"https://api.github.com/repos/apache/hudi/issues/477","id":432699184,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjY5OTE4NA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T15:10:04Z","updated_at":"2018-10-24T15:10:04Z","author_association":"CONTRIBUTOR","body":"Few minor comments, rest LGTM","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432699184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432738582","html_url":"https://github.com/apache/hudi/pull/481#issuecomment-432738582","issue_url":"https://api.github.com/repos/apache/hudi/issues/481","id":432738582,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjczODU4Mg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T16:51:30Z","updated_at":"2018-10-24T16:51:30Z","author_association":"CONTRIBUTOR","body":"Minor comments, didn't go through each command in very detail but in general looks fine to me.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432738582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432899218","html_url":"https://github.com/apache/hudi/pull/485#issuecomment-432899218","issue_url":"https://api.github.com/repos/apache/hudi/issues/485","id":432899218,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjg5OTIxOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-25T03:10:59Z","updated_at":"2018-10-25T03:10:59Z","author_association":"CONTRIBUTOR","body":"@n3nash @vinothchandar : Ready for review\r\n\r\n@n3nash : This PR allows user-defined transformation function to be applied for delta-streamer sources. I had to also refactor \"Source\" hierarchy to avoid extra data-format transformation. A naive implementation would have resulted in the following format changes before writing :  Row (Source) -> Avro -> Row ->  Row (transformed) -> Avro (for writing) when both a Row Source and a transformer is configured.  With the changes, the chain becomes  Row (Source) -> Row (transformed) -> Avro (writing).","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432899218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432921237","html_url":"https://github.com/apache/hudi/pull/477#issuecomment-432921237","issue_url":"https://api.github.com/repos/apache/hudi/issues/477","id":432921237,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjkyMTIzNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-25T05:39:12Z","updated_at":"2018-10-25T05:39:12Z","author_association":"CONTRIBUTOR","body":"@n3nash @vinothchandar : Addressed review comments. Please review ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/432921237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433128983","html_url":"https://github.com/apache/hudi/pull/481#issuecomment-433128983","issue_url":"https://api.github.com/repos/apache/hudi/issues/481","id":433128983,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzEyODk4Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-25T17:00:45Z","updated_at":"2018-10-25T17:00:45Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @n3nash : Addressed review comments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433128983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433234094","html_url":"https://github.com/apache/hudi/pull/488#issuecomment-433234094","issue_url":"https://api.github.com/repos/apache/hudi/issues/488","id":433234094,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzIzNDA5NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-25T23:04:16Z","updated_at":"2018-10-25T23:04:16Z","author_association":"CONTRIBUTOR","body":"@vinothchandar : Yet to address your general comment. Will take a look and get back","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433234094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433291922","html_url":"https://github.com/apache/hudi/pull/488#issuecomment-433291922","issue_url":"https://api.github.com/repos/apache/hudi/issues/488","id":433291922,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI5MTkyMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T05:36:02Z","updated_at":"2018-10-26T05:36:02Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @n3nash : Updated commit message with information on #listStatus savings.\r\n\r\nAlso added a config property to control caching. Wanted to discuss how to measure #listStatus call savings when we try with komondor with caching turned on/off \r\n\r\nAlso created a new Option class and replaced guava Optional with that class.\r\n\r\nWith this, all other comments should have been addressed too.  Please review when you get a chance.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433291922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433479175","html_url":"https://github.com/apache/hudi/issues/221#issuecomment-433479175","issue_url":"https://api.github.com/repos/apache/hudi/issues/221","id":433479175,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzQ3OTE3NQ==","user":{"login":"vectorijk","id":3419881,"node_id":"MDQ6VXNlcjM0MTk4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3419881?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorijk","html_url":"https://github.com/vectorijk","followers_url":"https://api.github.com/users/vectorijk/followers","following_url":"https://api.github.com/users/vectorijk/following{/other_user}","gists_url":"https://api.github.com/users/vectorijk/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorijk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorijk/subscriptions","organizations_url":"https://api.github.com/users/vectorijk/orgs","repos_url":"https://api.github.com/users/vectorijk/repos","events_url":"https://api.github.com/users/vectorijk/events{/privacy}","received_events_url":"https://api.github.com/users/vectorijk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T17:12:34Z","updated_at":"2018-10-26T17:12:34Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Is that possible to set my own payload class as `DataSourceWriteOptions.PAYLOAD_CLASS_OPT_KEY` when using DataSource API to write any dataframe into hoodie managed dataset (like [here](https://uber.github.io/hudi/incremental_processing.html#via-custom-spark-job))? \r\n\r\nPlus, I also saw there are some comments in `HoodieRecordPayload`. These comments mentioned two use cases. Case 1 is using `combineAndGetUpdateValue` to update counter. I wonder how to add a new `counter` field into `IndexedRecord` which store the value of counter. If it was `GenericRecord`, we could simply call `put(key, value)`. But, I don't know how to do this in `IndexedRecord`.\r\n\r\nDo you have any example code of how to use `payload` class which I can take a look at?\r\n\r\nThanks a lot!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433479175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433506347","html_url":"https://github.com/apache/hudi/issues/221#issuecomment-433506347","issue_url":"https://api.github.com/repos/apache/hudi/issues/221","id":433506347,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUwNjM0Nw==","user":{"login":"vectorijk","id":3419881,"node_id":"MDQ6VXNlcjM0MTk4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3419881?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorijk","html_url":"https://github.com/vectorijk","followers_url":"https://api.github.com/users/vectorijk/followers","following_url":"https://api.github.com/users/vectorijk/following{/other_user}","gists_url":"https://api.github.com/users/vectorijk/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorijk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorijk/subscriptions","organizations_url":"https://api.github.com/users/vectorijk/orgs","repos_url":"https://api.github.com/users/vectorijk/repos","events_url":"https://api.github.com/users/vectorijk/events{/privacy}","received_events_url":"https://api.github.com/users/vectorijk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T18:43:31Z","updated_at":"2018-10-26T18:43:31Z","author_association":"CONTRIBUTOR","body":"Maybe I could cast `IndexedRecord` to `GenericData.Record`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433506347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433519165","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-433519165","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":433519165,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzUxOTE2NQ==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T19:32:00Z","updated_at":"2018-10-26T19:32:00Z","author_association":"CONTRIBUTOR","body":"Fixed typo and added tests and demo for structured streaming. \r\nPlease let me know if this is a good starting point to have some brain storming. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/433519165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434008903","html_url":"https://github.com/apache/hudi/pull/488#issuecomment-434008903","issue_url":"https://api.github.com/repos/apache/hudi/issues/488","id":434008903,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDAwODkwMw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-29T17:43:56Z","updated_at":"2018-10-29T17:44:58Z","author_association":"CONTRIBUTOR","body":"@bvaradar The code looks good to me. I just have one concern, caching the listStatus in hoodieTable makes the size of the hoodieTable large. This means more memory use and also when driver needs to send this cache to the executor, there is a minor network overhead along with each executor holding information about all latestFileSlices increase memory overhead in each executor too. I have privately sent you a google doc with all this analysis. I was just wondering, should be keep this cache compressed per partition (or even file id) ? This way when an executor needs the cache, it only decompresses the fileSlice information it needs and the memory overhead is drastically reduced. This will also help in network overhead. The driver memory may remain the same since it needs all FileSLices anyways. There is obviously an additional CPU overhead of compress/decompress. WDYT ?\r\n@vinothchandar \r\n\r\nFor eg. \r\n\r\nCache { \r\npartition 1 -> compressed_file_slice_info_1\r\n...\r\n...\r\n\r\n}\r\n\r\ncache.get(partition) -> only decompresses compressed_file_slice_info_1\r\n\r\nJust a thought..","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434008903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434011133","html_url":"https://github.com/apache/hudi/pull/477#issuecomment-434011133","issue_url":"https://api.github.com/repos/apache/hudi/issues/477","id":434011133,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDAxMTEzMw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-29T17:49:29Z","updated_at":"2018-10-29T17:49:29Z","author_association":"CONTRIBUTOR","body":"@bvaradar Not sure if you got a chance to look at my comments...","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434011133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434026705","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-434026705","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":434026705,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDAyNjcwNQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-29T18:27:57Z","updated_at":"2018-10-29T18:27:57Z","author_association":"MEMBER","body":"let me take another pass today.. \r\n\r\nOn brainstorming, what I was referring to was :  if we were to run a Structured Streaming pipeline at 1 minute batch interval, then we definitely need to schedule compaction asynchronously.. Just want to understand how you plan to deploy this and make a roadmap for getting to the 1minute pipelines. does that sound interesting? We can work on merging this PR and then do a video call sometime? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434026705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434042850","html_url":"https://github.com/apache/hudi/pull/477#issuecomment-434042850","issue_url":"https://api.github.com/repos/apache/hudi/issues/477","id":434042850,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDA0Mjg1MA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-29T19:15:06Z","updated_at":"2018-10-29T19:15:06Z","author_association":"CONTRIBUTOR","body":"LGTM, ready to be merged","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434042850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434077433","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-434077433","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":434077433,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDA3NzQzMw==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-29T20:58:52Z","updated_at":"2018-10-29T20:58:52Z","author_association":"CONTRIBUTOR","body":"Thanks and that makes sense to me, @vinothchandar. \r\n\r\nA little bit background about our deploy plan:\r\n- for now, we are just leveraging the spark streaming scheduler to run the microbatch jobs for us, especially we do not have the luxury of integrating Marmaray yet. And I am currently writing another PR to make hoodie a spark streaming source (this one is for a spark streaming sink). \r\n- we will be using s3 as our file system to store the data\r\n\r\nA little bit more detail, \r\n- we will have a spark streaming job to fetch log from kafka and ingest into a COW table on s3\r\n- we will have another spark streaming job to fetch data from COW table, aggregate the data and ingest the aggregated data into Redshift\r\n- we will set up a presto cluster to run Adhoc query against the COW table\r\n\r\nI like the idea to make the ingestion more realtime and let's discuss this in detail in video call. So far my knowledge about MOR tables is just from the doc, let me know if there is any piece of code I might need to take a look at before the brainstorming.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434077433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434481721","html_url":"https://github.com/apache/hudi/pull/485#issuecomment-434481721","issue_url":"https://api.github.com/repos/apache/hudi/issues/485","id":434481721,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDQ4MTcyMQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T21:45:59Z","updated_at":"2018-10-30T21:45:59Z","author_association":"CONTRIBUTOR","body":"@bvaradar Left some comments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434481721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434802446","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-434802446","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":434802446,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDgwMjQ0Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T18:42:29Z","updated_at":"2018-10-31T18:42:29Z","author_association":"MEMBER","body":"@leletan thanks for sharing the plans.. That sounds good and we are happy to support any gaps you hit.. lets chat over slack on scheduling the call ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434802446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434808120","html_url":"https://github.com/apache/hudi/issues/494#issuecomment-434808120","issue_url":"https://api.github.com/repos/apache/hudi/issues/494","id":434808120,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDgwODEyMA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T18:59:52Z","updated_at":"2018-10-31T18:59:52Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @n3nash : We would need to prioritize this some time.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434808120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434836960","html_url":"https://github.com/apache/hudi/pull/453#issuecomment-434836960","issue_url":"https://api.github.com/repos/apache/hudi/issues/453","id":434836960,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDgzNjk2MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T20:31:02Z","updated_at":"2018-10-31T20:31:02Z","author_association":"MEMBER","body":"@n3nash are you planning on resuming this?  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/434836960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/435498519","html_url":"https://github.com/apache/hudi/issues/493#issuecomment-435498519","issue_url":"https://api.github.com/repos/apache/hudi/issues/493","id":435498519,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTQ5ODUxOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-02T20:25:33Z","updated_at":"2018-11-02T20:25:33Z","author_association":"MEMBER","body":"@bvaradar :) Hive expert.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/435498519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/436004440","html_url":"https://github.com/apache/hudi/issues/494#issuecomment-436004440","issue_url":"https://api.github.com/repos/apache/hudi/issues/494","id":436004440,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjAwNDQ0MA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-05T19:29:33Z","updated_at":"2018-11-05T19:29:33Z","author_association":"CONTRIBUTOR","body":"Yeah, I'll take this up","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/436004440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/436463973","html_url":"https://github.com/apache/hudi/pull/485#issuecomment-436463973","issue_url":"https://api.github.com/repos/apache/hudi/issues/485","id":436463973,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjQ2Mzk3Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-07T00:52:42Z","updated_at":"2018-11-07T00:52:42Z","author_association":"CONTRIBUTOR","body":"@vinothchandar : Addressed all the comments including schemaProvider handling for RowSource. Please take a look when you get a chance.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/436463973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/436589142","html_url":"https://github.com/apache/hudi/issues/75#issuecomment-436589142","issue_url":"https://api.github.com/repos/apache/hudi/issues/75","id":436589142,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjU4OTE0Mg==","user":{"login":"gorros","id":10191638,"node_id":"MDQ6VXNlcjEwMTkxNjM4","avatar_url":"https://avatars.githubusercontent.com/u/10191638?v=4","gravatar_id":"","url":"https://api.github.com/users/gorros","html_url":"https://github.com/gorros","followers_url":"https://api.github.com/users/gorros/followers","following_url":"https://api.github.com/users/gorros/following{/other_user}","gists_url":"https://api.github.com/users/gorros/gists{/gist_id}","starred_url":"https://api.github.com/users/gorros/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gorros/subscriptions","organizations_url":"https://api.github.com/users/gorros/orgs","repos_url":"https://api.github.com/users/gorros/repos","events_url":"https://api.github.com/users/gorros/events{/privacy}","received_events_url":"https://api.github.com/users/gorros/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-07T11:09:32Z","updated_at":"2018-11-07T11:09:32Z","author_association":"NONE","body":"Do I understand correctly that Hudi does allow deletion of particular rows from partitioned data on HDFS in an efficient way, without overwriting whole data? Does this ticket cover that use-case?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/436589142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/437160758","html_url":"https://github.com/apache/hudi/issues/75#issuecomment-437160758","issue_url":"https://api.github.com/repos/apache/hudi/issues/75","id":437160758,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNzE2MDc1OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-08T21:23:00Z","updated_at":"2018-11-08T21:23:00Z","author_association":"MEMBER","body":"yes that's correct.. Happy to provide more support over slack if thats something interests you ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/437160758/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438469440","html_url":"https://github.com/apache/hudi/pull/497#issuecomment-438469440","issue_url":"https://api.github.com/repos/apache/hudi/issues/497","id":438469440,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ2OTQ0MA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-13T22:53:19Z","updated_at":"2018-11-13T22:53:19Z","author_association":"CONTRIBUTOR","body":"Opened the issue here : https://github.com/uber/hudi/issues/499","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438469440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438469843","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-438469843","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":438469843,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ2OTg0Mw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-13T22:54:56Z","updated_at":"2018-11-13T22:54:56Z","author_association":"CONTRIBUTOR","body":"@louisliu318 Hard deletes are done by providing an optional generic record to your payload and soft deletes can be done by nulling out all the fields except the HoodieKey. What is your requirement ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438469843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438485678","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-438485678","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":438485678,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ4NTY3OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T00:02:04Z","updated_at":"2018-11-14T00:02:04Z","author_association":"MEMBER","body":"You can take a look at `TestHoodieClientOnCopyOnWriteStorage.java` and `TestRawTripPayload` for examples.. Please let us know if that helps ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438485678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438486214","html_url":"https://github.com/apache/hudi/issues/499#issuecomment-438486214","issue_url":"https://api.github.com/repos/apache/hudi/issues/499","id":438486214,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ4NjIxNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T00:04:23Z","updated_at":"2018-11-14T00:04:23Z","author_association":"MEMBER","body":"yes that would greatly help understand the root cause .. We should let the IOHandles deal with empty iterators anyway.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438486214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438492067","html_url":"https://github.com/apache/hudi/pull/500#issuecomment-438492067","issue_url":"https://api.github.com/repos/apache/hudi/issues/500","id":438492067,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ5MjA2Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T00:32:14Z","updated_at":"2018-11-14T00:32:14Z","author_association":"MEMBER","body":"Okay fair enough.. This was a conscious decision I made at that point to round down.. Conversely, did you notice any correlation with doing this and observing the null/empty mergehandles? Coz rounding up can cause that technically.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438492067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438494855","html_url":"https://github.com/apache/hudi/pull/500#issuecomment-438494855","issue_url":"https://api.github.com/repos/apache/hudi/issues/500","id":438494855,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODQ5NDg1NQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T00:46:13Z","updated_at":"2018-11-14T00:46:13Z","author_association":"CONTRIBUTOR","body":"Nope, the rounding up logic isn't running for the topics that are failing, it still uses the current code.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438494855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438546503","html_url":"https://github.com/apache/hudi/issues/160#issuecomment-438546503","issue_url":"https://api.github.com/repos/apache/hudi/issues/160","id":438546503,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODU0NjUwMw==","user":{"login":"charleso","id":31059,"node_id":"MDQ6VXNlcjMxMDU5","avatar_url":"https://avatars.githubusercontent.com/u/31059?v=4","gravatar_id":"","url":"https://api.github.com/users/charleso","html_url":"https://github.com/charleso","followers_url":"https://api.github.com/users/charleso/followers","following_url":"https://api.github.com/users/charleso/following{/other_user}","gists_url":"https://api.github.com/users/charleso/gists{/gist_id}","starred_url":"https://api.github.com/users/charleso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/charleso/subscriptions","organizations_url":"https://api.github.com/users/charleso/orgs","repos_url":"https://api.github.com/users/charleso/repos","events_url":"https://api.github.com/users/charleso/events{/privacy}","received_events_url":"https://api.github.com/users/charleso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T05:51:50Z","updated_at":"2018-11-14T05:51:50Z","author_association":"NONE","body":"@vinothchandar Sorry to be a pain, I just hit this too on a clean clone/build too. I can't see that jar in either of the two configured repositories.\r\n\r\n- http://central.maven.org/maven2/org/pentaho/\r\n- https://repository.cloudera.com/artifactory/repo/org/pentaho/","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438546503/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438556127","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-438556127","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":438556127,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODU1NjEyNw==","user":{"login":"louisliu318","id":9956334,"node_id":"MDQ6VXNlcjk5NTYzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9956334?v=4","gravatar_id":"","url":"https://api.github.com/users/louisliu318","html_url":"https://github.com/louisliu318","followers_url":"https://api.github.com/users/louisliu318/followers","following_url":"https://api.github.com/users/louisliu318/following{/other_user}","gists_url":"https://api.github.com/users/louisliu318/gists{/gist_id}","starred_url":"https://api.github.com/users/louisliu318/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/louisliu318/subscriptions","organizations_url":"https://api.github.com/users/louisliu318/orgs","repos_url":"https://api.github.com/users/louisliu318/repos","events_url":"https://api.github.com/users/louisliu318/events{/privacy}","received_events_url":"https://api.github.com/users/louisliu318/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T06:45:33Z","updated_at":"2018-11-14T06:45:33Z","author_association":"NONE","body":"> @louisliu318 Hard deletes are done by providing an optional generic record to your payload and soft deletes can be done by nulling out all the fields except the HoodieKey. What is your requirement ?\r\n\r\n@n3nash Thanks for the reply. What I want is hard delete.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438556127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438556447","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-438556447","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":438556447,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODU1NjQ0Nw==","user":{"login":"louisliu318","id":9956334,"node_id":"MDQ6VXNlcjk5NTYzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9956334?v=4","gravatar_id":"","url":"https://api.github.com/users/louisliu318","html_url":"https://github.com/louisliu318","followers_url":"https://api.github.com/users/louisliu318/followers","following_url":"https://api.github.com/users/louisliu318/following{/other_user}","gists_url":"https://api.github.com/users/louisliu318/gists{/gist_id}","starred_url":"https://api.github.com/users/louisliu318/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/louisliu318/subscriptions","organizations_url":"https://api.github.com/users/louisliu318/orgs","repos_url":"https://api.github.com/users/louisliu318/repos","events_url":"https://api.github.com/users/louisliu318/events{/privacy}","received_events_url":"https://api.github.com/users/louisliu318/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T06:47:22Z","updated_at":"2018-11-14T06:47:22Z","author_association":"NONE","body":"> You can take a look at `TestHoodieClientOnCopyOnWriteStorage.java` and `TestRawTripPayload` for examples.. Please let us know if that helps\r\n\r\n@vinothchandar Thanks for your help. I will look into it.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438556447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438562005","html_url":"https://github.com/apache/hudi/pull/500#issuecomment-438562005","issue_url":"https://api.github.com/repos/apache/hudi/issues/500","id":438562005,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODU2MjAwNQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T07:15:42Z","updated_at":"2018-11-14T07:15:42Z","author_association":"CONTRIBUTOR","body":"@vinothchandar addressed your comments","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438562005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438563017","html_url":"https://github.com/apache/hudi/issues/499#issuecomment-438563017","issue_url":"https://api.github.com/repos/apache/hudi/issues/499","id":438563017,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODU2MzAxNw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T07:20:33Z","updated_at":"2018-11-14T07:21:42Z","author_association":"CONTRIBUTOR","body":"@vinothchandar That's the fix I have put in our internal repo as of now. The Handle simply returns an empty WriteStatus iterator. Although, the concern I have is for a large number of small files to be fixed, they may never get chosen and insert buckets get priority always (in a worst case scenario)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438563017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438779181","html_url":"https://github.com/apache/hudi/pull/495#issuecomment-438779181","issue_url":"https://api.github.com/repos/apache/hudi/issues/495","id":438779181,"node_id":"MDEyOklzc3VlQ29tbWVudDQzODc3OTE4MQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-14T19:01:57Z","updated_at":"2018-11-14T19:01:57Z","author_association":"MEMBER","body":"> The side effect of this is that if the payload stores types which are serializable by Kryo (by registering them with Spark kryo), this serialization will fail.\r\n\r\ncan you expand on this? We are forcing kryo as the serializer in hoodie anyway.. How is spilling locally within an executor interplay with kryo? I think this will be a problem if we serialize generic record? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/438779181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439134642","html_url":"https://github.com/apache/hudi/issues/160#issuecomment-439134642","issue_url":"https://api.github.com/repos/apache/hudi/issues/160","id":439134642,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTEzNDY0Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-15T18:02:35Z","updated_at":"2018-11-15T18:02:35Z","author_association":"MEMBER","body":"@bvaradar as well. Did you hit this issue by any chance when you did the docker stuff? \r\nShould we just add the repository. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439134642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439135790","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-439135790","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":439135790,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTEzNTc5MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-15T18:06:28Z","updated_at":"2018-11-15T18:06:28Z","author_association":"MEMBER","body":"@leletan Just confirming.. the next step here is to introduce the flag you mentioned over our call and one more round.. then we can merge","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439135790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439150778","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-439150778","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":439150778,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTE1MDc3OA==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-15T18:54:59Z","updated_at":"2018-11-15T18:54:59Z","author_association":"CONTRIBUTOR","body":"@vinothchandar will do. \r\nWas concerned about if the (#499) was introduced by streaming before, it seems not.\r\nAnd we are investigating some performance issues with our staging pipeline with real production data running on top of this PR, not sure related to the streaming change. Hopefully just some nob tuning. \r\n\r\nSo there are 2 options - I can add the flag and improve the tests now and check them in. If we found the performance issue was related with this PR, will issue another patch. \r\nOr we can have another 1 - 2 weeks to investigate the perf issue to make sure the PR not to introduce any performance issues. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439150778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439151575","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-439151575","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":439151575,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTE1MTU3NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-15T18:57:25Z","updated_at":"2018-11-15T18:57:25Z","author_association":"MEMBER","body":"I vote for merging this & another follow on patch, if you are fine with that. I don't think this patch per se will cause any new perf issues. what could surface is some bottlenecks for running things in a streaming fashion, which probably is better to go on a different PR ..  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439151575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439153082","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-439153082","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":439153082,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTE1MzA4Mg==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-15T19:02:15Z","updated_at":"2018-11-15T19:02:15Z","author_association":"CONTRIBUTOR","body":"Got it @vinothchandar Will create a PR soon","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439153082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767543","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-439767543","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":439767543,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTc2NzU0Mw==","user":{"login":"louisliu318","id":9956334,"node_id":"MDQ6VXNlcjk5NTYzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9956334?v=4","gravatar_id":"","url":"https://api.github.com/users/louisliu318","html_url":"https://github.com/louisliu318","followers_url":"https://api.github.com/users/louisliu318/followers","following_url":"https://api.github.com/users/louisliu318/following{/other_user}","gists_url":"https://api.github.com/users/louisliu318/gists{/gist_id}","starred_url":"https://api.github.com/users/louisliu318/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/louisliu318/subscriptions","organizations_url":"https://api.github.com/users/louisliu318/orgs","repos_url":"https://api.github.com/users/louisliu318/repos","events_url":"https://api.github.com/users/louisliu318/events{/privacy}","received_events_url":"https://api.github.com/users/louisliu318/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T04:21:25Z","updated_at":"2018-11-19T04:21:25Z","author_association":"NONE","body":"@vinothchandar I can do records delete with table type **COPY_ON_WRITE** in **TestHoodieClientOnCopyOnWriteStorage.java** ,but when I change the table type to **MERGE_ON_READ** ï¼Œthe records delete fails. \r\n\r\nI also failed to do records delete  with the following way : \r\n\r\n1.  upsert records with the following method:\r\n**testSimpleInsertAndUpdate() @ TestMergeOnReadTable.java**, \r\n\r\n2. then I do a compaction with the following code : \r\n`        String compactionInstantTime = client.scheduleCompaction(Optional.empty()).get().toString();\r\n        JavaRDD<WriteStatus> result = client.compact(compactionInstantTime);` . \r\n\r\n3. sync to hive with HiveSyncTool\r\n\r\nCould you help identify where went wrong with my way? Thanks~ \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767776","html_url":"https://github.com/apache/hudi/issues/505#issuecomment-439767776","issue_url":"https://api.github.com/repos/apache/hudi/issues/505","id":439767776,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTc2Nzc3Ng==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T04:23:16Z","updated_at":"2018-11-19T04:23:16Z","author_association":"CONTRIBUTOR","body":"@rajeshbalamohan thanks for opening up this issue. We have a CombinedInputFormat in our internal repo which works for Hive 1.x. Let's take a look at that and see what can be changed to address Hive 2.x.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767918","html_url":"https://github.com/apache/hudi/issues/503#issuecomment-439767918","issue_url":"https://api.github.com/repos/apache/hudi/issues/503","id":439767918,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTc2NzkxOA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T04:24:25Z","updated_at":"2018-11-19T04:24:25Z","author_association":"CONTRIBUTOR","body":"There is a plan to do something along these lines to improve incremental pull view on hoodie. Once that is done, the InputFormat can leverage this for query results as well.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767964","html_url":"https://github.com/apache/hudi/issues/502#issuecomment-439767964","issue_url":"https://api.github.com/repos/apache/hudi/issues/502","id":439767964,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTc2Nzk2NA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T04:24:49Z","updated_at":"2018-11-19T04:24:57Z","author_association":"CONTRIBUTOR","body":"@rajeshbalamohan \r\nCan you shed some more light on this with may be an example of what you mean ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/439767964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440049701","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-440049701","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":440049701,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDA0OTcwMQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T21:35:12Z","updated_at":"2018-11-19T21:35:12Z","author_association":"CONTRIBUTOR","body":"@louisliu318 There are some gaps in record deletes on MERGE_ON_READ table. Let me get back to you on that.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440049701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440142512","html_url":"https://github.com/apache/hudi/issues/504#issuecomment-440142512","issue_url":"https://api.github.com/repos/apache/hudi/issues/504","id":440142512,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE0MjUxMg==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T05:19:15Z","updated_at":"2018-11-20T05:19:15Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440142512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440143348","html_url":"https://github.com/apache/hudi/issues/504#issuecomment-440143348","issue_url":"https://api.github.com/repos/apache/hudi/issues/504","id":440143348,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE0MzM0OA==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T05:22:38Z","updated_at":"2018-11-20T05:22:38Z","author_association":"CONTRIBUTOR","body":"This will be especially helpful for object stores where read/seek is more expensive than hdfs","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440143348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440144940","html_url":"https://github.com/apache/hudi/issues/499#issuecomment-440144940","issue_url":"https://api.github.com/repos/apache/hudi/issues/499","id":440144940,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE0NDk0MA==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T05:28:43Z","updated_at":"2018-11-20T05:28:43Z","author_association":"CONTRIBUTOR","body":"I was not able to reproduce this error after enforcing the parallelisms to be the same\r\n```\r\n    .option(\"hoodie.insert.shuffle.parallelism\", shufflePartitions)\r\n    .option(\"hoodie.upsert.shuffle.parallelism\", shufflePartitions)\r\n    .option(\"hoodie.finalize.write.parallelism\", shufflePartitions)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440144940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440151900","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440151900","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440151900,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE1MTkwMA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T05:53:51Z","updated_at":"2018-11-20T05:53:51Z","author_association":"MEMBER","body":"![screen shot 2018-11-19 at 12 34 51 pm](https://user-images.githubusercontent.com/1179324/48754169-90bcf000-ec45-11e8-9a54-6c4bd2181af5.png)\r\n![screen shot 2018-11-19 at 11 12 10 am](https://user-images.githubusercontent.com/1179324/48754172-961a3a80-ec45-11e8-936c-71daee0f497a.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440151900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440152826","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440152826","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440152826,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE1MjgyNg==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T05:57:06Z","updated_at":"2018-11-20T06:00:16Z","author_association":"CONTRIBUTOR","body":"In `com.uber.hoodie.index.bloom.HoodieBloomIndex`, made a patch as moving *autoComputeParallelism* into *findMatchingFilesForRecordKeys*, there are other ways to do it, just putting some thoughts there:\r\n\r\n```\r\n  /**\r\n   * Lookup the location for each record key and return the pair<record_key,location> for all record\r\n   * keys already present and drop the record keys if not present\r\n   */\r\n  private JavaPairRDD<String, String> lookupIndex(\r\n      JavaPairRDD<String, String> partitionRecordKeyPairRDD, final JavaSparkContext\r\n      jsc, final HoodieTable hoodieTable) {\r\n    // Obtain records per partition, in the incoming records\r\n    Map<String, Long> recordsPerPartition = partitionRecordKeyPairRDD.countByKey();\r\n    List<String> affectedPartitionPathList = new ArrayList<>(recordsPerPartition.keySet());\r\n\r\n    // Step 2: Load all involved files as <Partition, filename> pairs\r\n    List<Tuple2<String, BloomIndexFileInfo>> fileInfoList = loadInvolvedFiles(affectedPartitionPathList, jsc,\r\n        hoodieTable);\r\n    final Map<String, List<BloomIndexFileInfo>> partitionToFileInfo = fileInfoList.stream()\r\n        .collect(groupingBy(Tuple2::_1, mapping(Tuple2::_2, toList())));\r\n\r\n    // Step 3: Obtain a RDD, for each incoming record, that already exists, with the file id,\r\n    // that contains it.\r\n    return findMatchingFilesForRecordKeys(\r\n        recordsPerPartition,\r\n        partitionToFileInfo,\r\n        partitionRecordKeyPairRDD,\r\n        hoodieTable.getMetaClient());\r\n  }\r\n\r\n\r\n...\r\n\r\n\r\n /**\r\n   * The index lookup can be skewed in three dimensions : #files, #partitions, #records\r\n   * <p>\r\n   * To be able to smoothly handle skews, we need to compute how to split each partitions into\r\n   * subpartitions. We do it here, in a way that keeps the amount of each Spark join partition to <\r\n   * 2GB.\r\n   * <p>\r\n   * If {@link com.uber.hoodie.config.HoodieIndexConfig#BLOOM_INDEX_PARALLELISM_PROP} is specified\r\n   * as a NON-zero number, then that is used explicitly.\r\n   */\r\n  private int autoComputeParallelism(final Map<String, Long> recordsPerPartition,\r\n      final Map<String, List<BloomIndexFileInfo>> partitionToFileInfo,\r\n      JavaPairRDD<String, Tuple2<String, HoodieKey>> fileTripletRDD) {\r\n\r\n    long totalComparisons = 0;\r\n    if (config.getBloomIndexPruneByRanges()) {\r\n      // we will just try exploding the input and then count to determine comparisons\r\n      totalComparisons = fileTripletRDD.count();\r\n    } else {\r\n      // if not pruning by ranges, then each file in a partition needs to compared against all\r\n      // records for a partition.\r\n      Map<String, Long> filesPerPartition = partitionToFileInfo.entrySet().stream()\r\n          .collect(Collectors.toMap(Map.Entry::getKey, e -> Long.valueOf(e.getValue().size())));\r\n      long totalFiles = 0;\r\n      long totalRecords = 0;\r\n      for (String partitionPath : recordsPerPartition.keySet()) {\r\n        long numRecords = recordsPerPartition.get(partitionPath);\r\n        long numFiles =\r\n            filesPerPartition.containsKey(partitionPath) ? filesPerPartition.get(partitionPath)\r\n                : 1L;\r\n\r\n        totalComparisons += numFiles * numRecords;\r\n        totalFiles +=\r\n            filesPerPartition.containsKey(partitionPath) ? filesPerPartition.get(partitionPath)\r\n                : 0L;\r\n        totalRecords += numRecords;\r\n      }\r\n      logger.info(\"TotalRecords: \" + totalRecords + \", TotalFiles: \" + totalFiles\r\n          + \", TotalAffectedPartitions:\" + recordsPerPartition.size());\r\n    }\r\n\r\n    // each partition will have an item per comparison.\r\n    int parallelism = (int) (totalComparisons / MAX_ITEMS_PER_SHUFFLE_PARTITION + 1);\r\n    logger.info(\r\n        \"Auto computed parallelism :\" + parallelism + \", totalComparisons: \" + totalComparisons);\r\n    return parallelism;\r\n  }\r\n\r\n\r\n...\r\n\r\n\r\n/**\r\n   * Find out <RowKey, filename> pair. All workload grouped by file-level.\r\n   * <p>\r\n   * Join PairRDD(PartitionPath, RecordKey) and PairRDD(PartitionPath, File) & then repartition such\r\n   * that each RDD partition is a file, then for each file, we do (1) load bloom filter, (2) load\r\n   * rowKeys, (3) Tag rowKey\r\n   * <p>\r\n   * Make sure the parallelism is atleast the groupby parallelism for tagging location\r\n   */\r\n  @VisibleForTesting\r\n  JavaPairRDD<String, String> findMatchingFilesForRecordKeys(\r\n      final Map<String, Long> recordsPerPartition,\r\n      final Map<String, List<BloomIndexFileInfo>> partitionToFileIndexInfo,\r\n      JavaPairRDD<String, String> partitionRecordKeyPairRDD,\r\n      HoodieTableMetaClient metaClient) {\r\n\r\n    JavaPairRDD<String, Tuple2<String, HoodieKey>> fileTripletRDD =\r\n        explodeRecordRDDWithFileComparisons(partitionToFileIndexInfo, partitionRecordKeyPairRDD);\r\n\r\n    if (config.getBloomIndexUseCaching()) {\r\n      fileTripletRDD.persist(StorageLevel.MEMORY_AND_DISK_SER());\r\n    }\r\n\r\n    int totalSubpartitions = autoComputeParallelism(recordsPerPartition, partitionToFileIndexInfo,\r\n        fileTripletRDD);\r\n\r\n    int joinParallelism = determineParallelism(partitionRecordKeyPairRDD.partitions().size(),\r\n        totalSubpartitions);\r\n\r\n    JavaPairRDD<String, Tuple2<String, HoodieKey>> fileSortedTripletRDD =\r\n        fileTripletRDD\r\n            // sort further based on filename, such that all checking for the file can happen within\r\n            // a single partition, on-the-fly\r\n            .sortByKey(true, joinParallelism);\r\n\r\n    if (config.getBloomIndexUseCaching()) {\r\n      fileTripletRDD.unpersist();\r\n    }\r\n\r\n    return fileSortedTripletRDD.mapPartitionsWithIndex(\r\n        new HoodieBloomIndexCheckFunction(metaClient, config.getBasePath()), true)\r\n        .flatMap(indexLookupResults -> indexLookupResults.iterator())\r\n        .filter(lookupResult -> lookupResult.getMatchingRecordKeys().size() > 0)\r\n        .flatMapToPair(lookupResult -> {\r\n          List<Tuple2<String, String>> vals = new ArrayList<>();\r\n          for (String recordKey : lookupResult.getMatchingRecordKeys()) {\r\n            vals.add(new Tuple2<>(recordKey, lookupResult.getFileName()));\r\n          }\r\n          return vals.iterator();\r\n        });\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440152826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440154266","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440154266","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440154266,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE1NDI2Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T06:02:06Z","updated_at":"2018-11-20T06:02:06Z","author_association":"MEMBER","body":"Let me pore over this and get back. What I don't understand is that `recordRDD` is already cached & the other partitionToFileIndexInfo is also in memory . So going another pass over should have been fine.. Let me look into this with @bvaradar & @n3nash, on why its not helping and we can move from there..","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440154266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440157741","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440157741","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440157741,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE1Nzc0MQ==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T06:19:16Z","updated_at":"2018-11-20T06:51:37Z","author_association":"CONTRIBUTOR","body":"~~My guess is that, between `recordRDD.persist()` and `partitionToFileIndexInfo.collect()`, `loadInvolvedFiles` is an expensive method for object stores, especially for `GlobalBloomIndex`, there will be list, seek and read from object stores, making it slow?~~\r\n\r\nSorry scratch that, `loadInvolvedFiles` is returning a list, so it should not matter","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440157741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440159619","html_url":"https://github.com/apache/hudi/issues/498#issuecomment-440159619","issue_url":"https://api.github.com/repos/apache/hudi/issues/498","id":440159619,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE1OTYxOQ==","user":{"login":"louisliu318","id":9956334,"node_id":"MDQ6VXNlcjk5NTYzMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9956334?v=4","gravatar_id":"","url":"https://api.github.com/users/louisliu318","html_url":"https://github.com/louisliu318","followers_url":"https://api.github.com/users/louisliu318/followers","following_url":"https://api.github.com/users/louisliu318/following{/other_user}","gists_url":"https://api.github.com/users/louisliu318/gists{/gist_id}","starred_url":"https://api.github.com/users/louisliu318/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/louisliu318/subscriptions","organizations_url":"https://api.github.com/users/louisliu318/orgs","repos_url":"https://api.github.com/users/louisliu318/repos","events_url":"https://api.github.com/users/louisliu318/events{/privacy}","received_events_url":"https://api.github.com/users/louisliu318/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T06:29:37Z","updated_at":"2018-11-20T06:29:37Z","author_association":"NONE","body":"@n3nash Thanks ~ . Looking Forward to your help .","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440159619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440184757","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440184757","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440184757,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDE4NDc1Nw==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T08:24:38Z","updated_at":"2018-11-20T18:20:15Z","author_association":"CONTRIBUTOR","body":"I guess for my case, `explodeRecordRDDWithFileComparisons` is expensive even when cached and collected, seeing close to 5000 files out of `loadInvolvedFiles`, cartesian with 30 million records of incoming `recordRDD`, which is doing 150 billion sets of comparisons, each set need to check `indexInfo.hasKeyRanges`, `minRecordKey.compareTo(recordKey) <= 0` and `maxRecordKey.compareTo(recordKey) >= 0`, so ~450 billion comparisons between rdd and driver memory (hopefully spark is broadcasting the file list), which might take a while even with 128 cores. Will run more tests and come back with more info.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440184757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440383612","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440383612","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440383612,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM4MzYxMg==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T18:34:38Z","updated_at":"2018-11-20T18:35:37Z","author_association":"CONTRIBUTOR","body":"Actually I have another 2 runs and seeing much more time spent on\r\n`flatMapToPair at HoodieGlobalBloomIndex.java:107`, which is in the `explodeRecordRDDWithFileComparisons` and kind of proved my hypothesis.\r\nno idea why this did not show up as big in the previous runs, no config changes.\r\n \r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440383612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440383688","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440383688","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440383688,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM4MzY4OA==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T18:34:53Z","updated_at":"2018-11-20T18:34:53Z","author_association":"CONTRIBUTOR","body":"![screen shot 2018-11-20 at 10 31 14 am](https://user-images.githubusercontent.com/6158502/48794814-e4642380-ecaf-11e8-9a0e-436a1e0af03b.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440383688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440385186","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440385186","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440385186,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM4NTE4Ng==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T18:39:33Z","updated_at":"2018-11-20T18:39:33Z","author_association":"CONTRIBUTOR","body":"The run with 831 files (attached as the first images in this ticket) is running against a much smaller existing table, which makes sense not to have too much time for reading.\r\n\r\nHowever, the following run with 3398 files across 4 partitions did not spend too much time on `explodeRecordRDDWithFileComparisons` either, which confused me.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440385186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440385271","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440385271","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440385271,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM4NTI3MQ==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T18:39:49Z","updated_at":"2018-11-20T18:39:49Z","author_association":"CONTRIBUTOR","body":"![screen shot 2018-11-19 at 3 54 02 pm](https://user-images.githubusercontent.com/6158502/48795029-956abe00-ecb0-11e8-8750-07bbfb982be0.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440385271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440396202","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440396202","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440396202,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM5NjIwMg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T19:13:50Z","updated_at":"2018-11-20T19:13:50Z","author_association":"CONTRIBUTOR","body":"Sample screenshot of a successful job \r\n\r\n<img width=\"1409\" alt=\"screen shot 2018-11-20 at 11 12 37 am\" src=\"https://user-images.githubusercontent.com/2722167/48796769-555a0a00-ecb5-11e8-85cb-46e3c8817906.png\">\r\n\r\n@vinothchandar @leletan FYI","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440396202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440396324","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440396324","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440396324,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM5NjMyNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T19:14:16Z","updated_at":"2018-11-20T19:14:16Z","author_association":"MEMBER","body":"@leletan there could be variability within runs - depending on data.. \r\nyes, the Global index basically will incur a lot of comparisons.. \r\n\r\nHmmm. may be we should look into building https://github.com/uber/hudi/wiki/HashMap-Index more seriously? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440396324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440397042","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440397042","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440397042,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM5NzA0Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T19:16:35Z","updated_at":"2018-11-20T19:16:35Z","author_association":"MEMBER","body":"@n3nash is that a kafka or db ingestion?  can we get one of each? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440397042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440412347","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440412347","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440412347,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQxMjM0Nw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T20:07:07Z","updated_at":"2018-11-20T20:07:07Z","author_association":"CONTRIBUTOR","body":"@vinothchandar That's a db ingestion one, as discussed kafka does not have such a DAG.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440412347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440422455","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440422455","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440422455,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQyMjQ1NQ==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T20:42:41Z","updated_at":"2018-11-21T00:19:40Z","author_association":"CONTRIBUTOR","body":"interesting, roughly the same size but much higher number of partitions than my job, and it seems `explodeRecordRDDWithFileComparisons` is also an expensive stage (13 mins) in the sample uber job - with 738 files from the table to compare (please correct me if I am wrong).  \r\n\r\n@n3nash Wondering what is the resource config for that spark job and is there any special config / trick (like special JVM config) is used?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440422455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440422790","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440422790","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440422790,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQyMjc5MA==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T20:43:48Z","updated_at":"2018-11-20T20:43:48Z","author_association":"CONTRIBUTOR","body":"Wondering what is rule of the thumb to determine the number of partitions.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440422790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440425652","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440425652","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440425652,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQyNTY1Mg==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T20:53:32Z","updated_at":"2018-11-20T20:53:32Z","author_association":"CONTRIBUTOR","body":"Tried bumping up the number of partitions and does not seem helping in the performance. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440425652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440440249","html_url":"https://github.com/apache/hudi/issues/499#issuecomment-440440249","issue_url":"https://api.github.com/repos/apache/hudi/issues/499","id":440440249,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ0MDI0OQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T21:44:39Z","updated_at":"2018-11-20T21:44:39Z","author_association":"MEMBER","body":"@n3nash can you port your fix into a PR? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440440249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440462970","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440462970","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440462970,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ2Mjk3MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T23:14:08Z","updated_at":"2018-11-20T23:14:08Z","author_association":"MEMBER","body":"Summarizing what each line shown in the UI does.. \r\n\r\n\r\n1. `countByKey / HoodieBloomIndex:144` - Tries to get a Map<PartitionPath, number_of_input_records> to help determine parallelism\r\n2. `collect / HoodieBloomIndex:249` - Gets a list of all data files. \r\n3. `collect / HoodieBloomIndex:263` -  Reads footers containing range of keys in the file.\r\n4. `count / HoodieBloomIndex:179` - Computes parallelism needed after pruning the keys. This needs to check each input key against all involved files (for global index, this is all files in the data set) and determine if it falls within range. \r\n5. `sortByKey / HoodieBloomIndex:368` - This does the exploding again, but sorts the fileName#recordKey rdd by file with the right parallelism such that within each partition we open the file fewest time possible (too high parallelism means, files opened multiple times. too low can lead to slowness), while respecting the spark 2GB/partition limitation\r\n6. `mapToPair/ HoodieBloomIndex:389` - This gets the recordRDD to be in joinable state\r\n7. `flatMapToPair/ HoodieGlobalBloomIndex:107` or `flatMapToPair/HoodieBloomIndex: 374???` - This does the actual checking of the bloom index against the incoming keys.. \r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440462970/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440465144","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440465144","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440465144,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ2NTE0NA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T23:23:17Z","updated_at":"2018-11-20T23:23:17Z","author_association":"MEMBER","body":">>it seems explodeRecordRDDWithFileComparisons is also an expensive stage (13 mins) in the sample uber job\r\nNo the actual checking is what takes time for us. What @n3nash pasted is a db ingest job with lot of updates. so bloom filter would get hits and you may end up opening files anyway. For your case, inserts, with proper tuning of bloom filter (default is 60K keys per file), you should nt get any hits at all and it should be fast. if step 7 takes a while for you, then its a cue to tune the bloom filter number.. \r\n\r\n\r\nI think the root issue here is simply the large cardinality for comparisons.. 30M x 5000 files, from the global indexing.. if you look at the second image I pasted in the ticket, the maximum time spent is on these comparisons.. So caching the result of that may make sense in general if you are doing Global bloom.. \r\n\r\n>>Wondering what is rule of the thumb to determine the number of partitions.\r\nMost of the complexity/functionality (whichever way you look at it :)) in Bloom Index is from auto tuning partitions to meet the balance, spark 2gb limit I mentioned in 5. Can we ditch this and go faster? may be. but we wrote it that way, coz we need something that runs reliably across different skew types across 1000s of feeds, even if it ran a lil slowly.. \r\n\r\nWhat are some AIs, in your mind?  Is the current performance adequate in the short term for you? \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440465144/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440466381","html_url":"https://github.com/apache/hudi/issues/502#issuecomment-440466381","issue_url":"https://api.github.com/repos/apache/hudi/issues/502","id":440466381,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ2NjM4MQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T23:29:16Z","updated_at":"2018-11-20T23:29:16Z","author_association":"MEMBER","body":"#393 already is open around this.. We internally have this patched already.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440466381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440467042","html_url":"https://github.com/apache/hudi/issues/504#issuecomment-440467042","issue_url":"https://api.github.com/repos/apache/hudi/issues/504","id":440467042,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ2NzA0Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T23:32:27Z","updated_at":"2018-11-20T23:32:27Z","author_association":"MEMBER","body":"Not sure if we want to add this to the .hoodie file.. but we do have thoughts around building a metaserver (we call it TimelineServer) that can provide file listings to ipf.getSplits . However one challenge is that the ipf does not have knowledge of the predicates in the query.. @rajeshbalamohan any thoughts on that? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440467042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440489730","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440489730","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440489730,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ4OTczMA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-21T01:04:43Z","updated_at":"2018-11-21T01:04:43Z","author_association":"MEMBER","body":"Okay here is my proposal for the two issues \r\n\r\n**1) Range pruning being expensive**\r\nCurrently we compare each incoming record key against all `BloomIndexFileInfo` objects, in a linear search. So complexity is `O(N * F)` (or 150B comparisons for what you are trying to do). If we stored the file key ranges in an Interval tree, then it would become `O(N log F)` or (30M log 5000 = ~120M comparisons or ~1000x faster)\r\n\r\n**2) Double invocation of .`explodeRecordRDDWithFileComparisons`** \r\nI still think we have to determine the parallelism properly before we do the actual bloom checking. So we can either cache it like how @leletan did above or use a sample instead of going over entire RDD.. \r\nOpen to both..\r\n\r\n@nsivabalan  please let me know if you want to take a stab at this ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440489730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440492680","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440492680","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440492680,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQ5MjY4MA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-21T01:20:14Z","updated_at":"2018-11-21T01:20:14Z","author_association":"CONTRIBUTOR","body":"@vinothchandar : sure. Will take a stab.  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440492680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440539479","html_url":"https://github.com/apache/hudi/pull/486#issuecomment-440539479","issue_url":"https://api.github.com/repos/apache/hudi/issues/486","id":440539479,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDUzOTQ3OQ==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-21T05:46:08Z","updated_at":"2018-11-21T05:46:08Z","author_association":"CONTRIBUTOR","body":"Added the retry logic to get some early feedback if possible. \r\nMeanwhile will do more work on the testing side, learning the new testing framework.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440539479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440557506","html_url":"https://github.com/apache/hudi/issues/506#issuecomment-440557506","issue_url":"https://api.github.com/repos/apache/hudi/issues/506","id":440557506,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDU1NzUwNg==","user":{"login":"leletan","id":6158502,"node_id":"MDQ6VXNlcjYxNTg1MDI=","avatar_url":"https://avatars.githubusercontent.com/u/6158502?v=4","gravatar_id":"","url":"https://api.github.com/users/leletan","html_url":"https://github.com/leletan","followers_url":"https://api.github.com/users/leletan/followers","following_url":"https://api.github.com/users/leletan/following{/other_user}","gists_url":"https://api.github.com/users/leletan/gists{/gist_id}","starred_url":"https://api.github.com/users/leletan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leletan/subscriptions","organizations_url":"https://api.github.com/users/leletan/orgs","repos_url":"https://api.github.com/users/leletan/repos","events_url":"https://api.github.com/users/leletan/events{/privacy}","received_events_url":"https://api.github.com/users/leletan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-21T06:52:57Z","updated_at":"2018-11-21T18:56:16Z","author_association":"CONTRIBUTOR","body":"Thanks for the explanation! Really helpful.\r\n\r\nOne further question about configurations - \r\nif I use hour partition and normal bloom filter (just in partition dedup), there are ~500 files in the RO view of each partition, even considering the long tail of events merging to small files.\r\nAnd every batch there are almost always 50 - 100 files to insert/ merging for small files after deduping.\r\nEvery batch, the incoming data exploded in memory is ~40G.\r\nAnd I am using auto split with small file size 128M.\r\nThis batch size is for 10 min microbatch, ideally we would like to have at least extra 50% room in case we need to run catch up.\r\n\r\n1. What would be recommended insert / upsert / finalize partition? shall I have them different or the same?\r\n\r\n2. How about executor # and cpu & memory for each executor? \r\n\r\nAnd also regarding to 1 core executor, discussed a little bit in #254, concern about only 1 core per executor - other than inter-executor shuffling, since every each partition will have `SparkBoundedInMemoryExecutor` along with producer and consumer threads, will there a lot of context switching? (feel free to correct me)\r\n\r\n3. Any JVM configs (like GC type) or other tricks on the less common spark configs?\r\n\r\n> Summarizing what each line shown in the UI does..\r\n> \r\n> 1. `countByKey / HoodieBloomIndex:144` - Tries to get a Map<PartitionPath, number_of_input_records> to help determine parallelism\r\n> 2. `collect / HoodieBloomIndex:249` - Gets a list of all data files.\r\n> 3. `collect / HoodieBloomIndex:263` -  Reads footers containing range of keys in the file.\r\n> 4. `count / HoodieBloomIndex:179` - Computes parallelism needed after pruning the keys. This needs to check each input key against all involved files (for global index, this is all files in the data set) and determine if it falls within range.\r\n> 5. `sortByKey / HoodieBloomIndex:368` - This does the exploding again, but sorts the fileName#recordKey rdd by file with the right parallelism such that within each partition we open the file fewest time possible (too high parallelism means, files opened multiple times. too low can lead to slowness), while respecting the spark 2GB/partition limitation\r\n> 6. `mapToPair/ HoodieBloomIndex:389` - This gets the recordRDD to be in joinable state\r\n> 7. `flatMapToPair/ HoodieGlobalBloomIndex:107` or `flatMapToPair/HoodieBloomIndex: 374???` - This does the actual checking of the bloom index against the incoming keys..\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/440557506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]