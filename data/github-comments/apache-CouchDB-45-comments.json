[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387764044","html_url":"https://github.com/apache/couchdb/issues/1300#issuecomment-387764044","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1300","id":387764044,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzc2NDA0NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-09T14:46:55Z","updated_at":"2018-05-09T14:46:55Z","author_association":"MEMBER","body":"@jvegaseg this GH issue really isn't the place, but to replace a node, just reinstall a new machine with the same IP, same version of CouchDB, and same ini files, then join it to the cluster. Internal replication will re-replicate all data to that node.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387764044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387764467","html_url":"https://github.com/apache/couchdb/issues/1319#issuecomment-387764467","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1319","id":387764467,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzc2NDQ2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-09T14:48:07Z","updated_at":"2018-05-09T14:48:48Z","author_association":"MEMBER","body":"Are you using attachments? If so, how many per document, and how large is each attachment? What is the maximum size of each attachment?\r\n\r\nIf so, there is a known issue with excessive CPU/RAM usage in this scenario that will be fixed with the release of 2.2.0, see #745 .","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387764467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387776586","html_url":"https://github.com/apache/couchdb/issues/1300#issuecomment-387776586","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1300","id":387776586,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzc3NjU4Ng==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-09T15:23:07Z","updated_at":"2018-05-09T15:23:07Z","author_association":"NONE","body":"Thanks, I will try.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387776586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387786518","html_url":"https://github.com/apache/couchdb/issues/1300#issuecomment-387786518","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1300","id":387786518,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzc4NjUxOA==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-09T15:53:10Z","updated_at":"2018-05-09T15:53:10Z","author_association":"NONE","body":"@wohali, I would appreciate if you can tell me how to join the new machine to the cluster. I am not sure how to do it. I do not want to break nothing more ;->\r\n\r\nRemember we have a cluster with 6 nodes X.X.X.120 to X.X.X.125 and the broken machine is X.X.X.125.\r\n\r\nIn documentation explains how to add a machine to a cluster but current nodes already have the IP X.X.X.125 joined. So, what command have I to execute in new machine?\r\nPlease, help me on this.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387786518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387861011","html_url":"https://github.com/apache/couchdb/issues/1320#issuecomment-387861011","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1320","id":387861011,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzg2MTAxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-09T20:12:15Z","updated_at":"2018-05-09T20:13:39Z","author_association":"MEMBER","body":"2.2.0 and forward will have a new way of defining maximum document sizes and may or may not have maximum allowed attachment sizes as well. See for reference: #1253 #1200 \r\n\r\nThese will, however, be set at a server-wide level, not on a per-database setting.\r\n\r\nUnfortunately, the view server (couchjs) subsystem intentionally has no facility for accessing information as regards attachments. This was done intentionally very early on in CouchDB's development to ensure rapid performance of view building, even when attachments are large. We don't expect this to change any time soon.\r\n\r\nI hate to close this as a wontfix, but I hope that the above will provide some hope that you'll be able to achieve what you want soon. I would encourage you to comment on #1253 with your thoughts, and any enhancements you might think would be useful, so that we can enforce useful limits without having to resort to an inefficient VDU.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387861011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387949989","html_url":"https://github.com/apache/couchdb/issues/1316#issuecomment-387949989","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1316","id":387949989,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzk0OTk4OQ==","user":{"login":"Nayana-ibm","id":20816038,"node_id":"MDQ6VXNlcjIwODE2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20816038?v=4","gravatar_id":"","url":"https://api.github.com/users/Nayana-ibm","html_url":"https://github.com/Nayana-ibm","followers_url":"https://api.github.com/users/Nayana-ibm/followers","following_url":"https://api.github.com/users/Nayana-ibm/following{/other_user}","gists_url":"https://api.github.com/users/Nayana-ibm/gists{/gist_id}","starred_url":"https://api.github.com/users/Nayana-ibm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nayana-ibm/subscriptions","organizations_url":"https://api.github.com/users/Nayana-ibm/orgs","repos_url":"https://api.github.com/users/Nayana-ibm/repos","events_url":"https://api.github.com/users/Nayana-ibm/events{/privacy}","received_events_url":"https://api.github.com/users/Nayana-ibm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T04:40:05Z","updated_at":"2018-05-10T04:40:05Z","author_association":"NONE","body":"Any suggestion to resolve this failure? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387949989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387964360","html_url":"https://github.com/apache/couchdb/issues/1319#issuecomment-387964360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1319","id":387964360,"node_id":"MDEyOklzc3VlQ29tbWVudDM4Nzk2NDM2MA==","user":{"login":"DanKrt82","id":12826813,"node_id":"MDQ6VXNlcjEyODI2ODEz","avatar_url":"https://avatars.githubusercontent.com/u/12826813?v=4","gravatar_id":"","url":"https://api.github.com/users/DanKrt82","html_url":"https://github.com/DanKrt82","followers_url":"https://api.github.com/users/DanKrt82/followers","following_url":"https://api.github.com/users/DanKrt82/following{/other_user}","gists_url":"https://api.github.com/users/DanKrt82/gists{/gist_id}","starred_url":"https://api.github.com/users/DanKrt82/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanKrt82/subscriptions","organizations_url":"https://api.github.com/users/DanKrt82/orgs","repos_url":"https://api.github.com/users/DanKrt82/repos","events_url":"https://api.github.com/users/DanKrt82/events{/privacy}","received_events_url":"https://api.github.com/users/DanKrt82/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T06:25:57Z","updated_at":"2018-05-10T06:33:55Z","author_association":"NONE","body":"We had the same problem on a installation of CouchDB (2.1.1) on a Windows Server 2012 R2 (not virtual). We saw the problem only on the DELETE request to CouchDB.\r\nWe saw that the CPU was stable and low and also the RAM usage. We don't use any attachment on our environment. Unfortunately I have that problem on a critical machine and I need to solve the problem as soon as possible, so I cannot do many investigation and troubleshooting. I restarted the server and that didn't resolve the problem, after some time (some houres) the problem dissappear.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/387964360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388079295","html_url":"https://github.com/apache/couchdb/issues/1319#issuecomment-388079295","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1319","id":388079295,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODA3OTI5NQ==","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T14:57:32Z","updated_at":"2018-05-10T14:57:32Z","author_association":"NONE","body":"Thank you for reply Joan.\r\n\r\nYes - we use attachments. Generally they are quite small (up to 100KB), but some of them are larger (4-5MB). Currently we have a size limit set to 10MB by our application layer, but I have to check for any bigger attachments, that might got added to CouchDB before this limit was introduced.\r\n\r\nI checked the issue you linked, and I can confirm that there are errors like that in our backup db (replication initiator). Unfortunately, they occurred two days before actual issue, so I believe this might be unrelated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388079295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388114384","html_url":"https://github.com/apache/couchdb/issues/1316#issuecomment-388114384","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1316","id":388114384,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODExNDM4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T16:53:25Z","updated_at":"2018-05-10T16:53:25Z","author_association":"MEMBER","body":"The next build of CouchDB will include pre-built libmozjs185 binaries for all supported Ubuntu, Debian, CentOS and RedHad platforms. The build instructions for those builds will be made public.\r\n\r\nStrictly speaking this is not a CouchDB issue, but since the dependency is very old and we're one of the few remaining applications that need it, we'll help out here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388114384/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388115389","html_url":"https://github.com/apache/couchdb/issues/1319#issuecomment-388115389","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1319","id":388115389,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODExNTM4OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-10T16:56:52Z","updated_at":"2018-05-10T16:56:52Z","author_association":"MEMBER","body":" **Please note that CouchDB on Windows is not intended as a production quality platform**. It may work for you, but there are reports of performance issues that are as of yet unresolved. We know that running the exact same load on Linux on the exact same machine configuration is significantly more performant! Further, we have no resources to help investigate these problems.\r\n\r\n@DanielMidali that sounds unrelated.\r\n\r\n@arekdygas Can you try adding the following to your `etc\\vm.args` file:\r\n\r\n```\r\n-ssl session_lifetime 300\r\n```\r\n\r\nThen, restart the CouchDB service.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388115389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388392348","html_url":"https://github.com/apache/couchdb/issues/1322#issuecomment-388392348","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1322","id":388392348,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODM5MjM0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-11T15:08:27Z","updated_at":"2018-05-11T15:08:27Z","author_association":"MEMBER","body":"We need more logs to know what's happening.\r\n\r\nPlease share a full CouchDB logfile showing the failure scenario.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388392348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388409052","html_url":"https://github.com/apache/couchdb/issues/1319#issuecomment-388409052","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1319","id":388409052,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODQwOTA1Mg==","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-11T16:06:56Z","updated_at":"2018-05-11T16:06:56Z","author_association":"NONE","body":"It looks like the problem was not related to replication after all.\r\n\r\nWe installed another CouchDB instance yesterday, to test some application changes on separate environment. One of our clients who was testing the changes, reported that system does not respond to requests. As this was just a test db, we were able to experiment with it a bit.\r\n\r\nWe discovered that the problem started when our app sent hundreds of requests to CouchDB - at some point in time db responses became slower and slower, unless they were so slow, that it looked like db was not responding at all. In the end, the direct cause of the problem was the management of connections in our application - instead of reusing the single connection, or some connections pool, each request created a separate connection. It looks like we reached some CouchDB limit, but weren't sure how to increase it.\r\n\r\nWe modified max_dbs_open to 5000 in default.ini and added '+Q 65536' in vm.args (this should work like ERL_MAX_PORTS, but maybe I'm wrong). We also checked the suggested '-ssl session_lifetime 300' (just in case), but unfortunately nothing helped.\r\n\r\nFinally, we changed connections management in our application, so that now they are reused, and the problem doesn't occur anymore. This is great, but I must admit, that I'd be glad if I knew what happened on db side :)\r\n\r\nAs to the Windows platform - I know this OS support is not a priority for your team, but I didn't know that running CouchDB on Windows was not supposed in production. We will think on changing the environment.\r\n\r\nThank you very much for hints and help Joan!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388409052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388519686","html_url":"https://github.com/apache/couchdb/issues/1322#issuecomment-388519686","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1322","id":388519686,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODUxOTY4Ng==","user":{"login":"codehakase","id":9336187,"node_id":"MDQ6VXNlcjkzMzYxODc=","avatar_url":"https://avatars.githubusercontent.com/u/9336187?v=4","gravatar_id":"","url":"https://api.github.com/users/codehakase","html_url":"https://github.com/codehakase","followers_url":"https://api.github.com/users/codehakase/followers","following_url":"https://api.github.com/users/codehakase/following{/other_user}","gists_url":"https://api.github.com/users/codehakase/gists{/gist_id}","starred_url":"https://api.github.com/users/codehakase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codehakase/subscriptions","organizations_url":"https://api.github.com/users/codehakase/orgs","repos_url":"https://api.github.com/users/codehakase/repos","events_url":"https://api.github.com/users/codehakase/events{/privacy}","received_events_url":"https://api.github.com/users/codehakase/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T01:11:42Z","updated_at":"2018-05-12T01:12:29Z","author_association":"NONE","body":"@wohali This is pretty much the output for the errors:\r\n\r\n```\r\nMay 12 01:51:27 raspberrypi couchdb[5121]: [error] 2018-05-12T00:51:27.786059Z couchdb@127.0.0.1 <0.1343.0> -------- Replicator, request GET to \"http://admin:*****@remote-ip-address:5984/boxhub/_changes?feed=continuous&style=all_docs&since=%xxx&timeout=10000\" failed due to error {error,req_timedout}\r\n\r\nMay 12 01:51:57 raspberrypi couchdb[5121]: [error] 2018-05-12T00:51:57.753190Z couchdb@127.0.0.1 <0.1343.0> -------- Replicator, request GET to \"http://admin:*****@remote-ip-address:5984/boxhub/_changes?feed=continuous&style=all_docs&since=xxx&timeout=10000\" failed due to error {error,req_timedout}\r\n\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388519686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388520041","html_url":"https://github.com/apache/couchdb/issues/1322#issuecomment-388520041","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1322","id":388520041,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODUyMDA0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T01:16:49Z","updated_at":"2018-05-12T01:16:49Z","author_association":"MEMBER","body":"Well, I don't know what to say. I and other team members here run CouchDB just fine on a RPi 3.\r\n\r\nThat scenario says that the local couch is unable to access the remote IP address without timing out. Does a curl from the command line of that local couch to the remote IP address at port 5984 also fail?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388520041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388553937","html_url":"https://github.com/apache/couchdb/issues/1322#issuecomment-388553937","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1322","id":388553937,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU1MzkzNw==","user":{"login":"codehakase","id":9336187,"node_id":"MDQ6VXNlcjkzMzYxODc=","avatar_url":"https://avatars.githubusercontent.com/u/9336187?v=4","gravatar_id":"","url":"https://api.github.com/users/codehakase","html_url":"https://github.com/codehakase","followers_url":"https://api.github.com/users/codehakase/followers","following_url":"https://api.github.com/users/codehakase/following{/other_user}","gists_url":"https://api.github.com/users/codehakase/gists{/gist_id}","starred_url":"https://api.github.com/users/codehakase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codehakase/subscriptions","organizations_url":"https://api.github.com/users/codehakase/orgs","repos_url":"https://api.github.com/users/codehakase/repos","events_url":"https://api.github.com/users/codehakase/events{/privacy}","received_events_url":"https://api.github.com/users/codehakase/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T13:05:36Z","updated_at":"2018-05-12T13:05:36Z","author_association":"NONE","body":"@wohali I did try to curl the remote IP, first few trials all failed, then I noticed it was actually a network issue","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388553937/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388553953","html_url":"https://github.com/apache/couchdb/issues/1322#issuecomment-388553953","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1322","id":388553953,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU1Mzk1Mw==","user":{"login":"codehakase","id":9336187,"node_id":"MDQ6VXNlcjkzMzYxODc=","avatar_url":"https://avatars.githubusercontent.com/u/9336187?v=4","gravatar_id":"","url":"https://api.github.com/users/codehakase","html_url":"https://github.com/codehakase","followers_url":"https://api.github.com/users/codehakase/followers","following_url":"https://api.github.com/users/codehakase/following{/other_user}","gists_url":"https://api.github.com/users/codehakase/gists{/gist_id}","starred_url":"https://api.github.com/users/codehakase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codehakase/subscriptions","organizations_url":"https://api.github.com/users/codehakase/orgs","repos_url":"https://api.github.com/users/codehakase/repos","events_url":"https://api.github.com/users/codehakase/events{/privacy}","received_events_url":"https://api.github.com/users/codehakase/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T13:05:54Z","updated_at":"2018-05-12T13:07:47Z","author_association":"NONE","body":"@wohali  Is there a way to increase the timeout for replication on couchdb?\r\n\r\nWhile trying curl the remote ip, the response was slow, cause of the connection provided by the USB modem.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388553953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388565308","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-388565308","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":388565308,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU2NTMwOA==","user":{"login":"navneet21sharma","id":20189518,"node_id":"MDQ6VXNlcjIwMTg5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/20189518?v=4","gravatar_id":"","url":"https://api.github.com/users/navneet21sharma","html_url":"https://github.com/navneet21sharma","followers_url":"https://api.github.com/users/navneet21sharma/followers","following_url":"https://api.github.com/users/navneet21sharma/following{/other_user}","gists_url":"https://api.github.com/users/navneet21sharma/gists{/gist_id}","starred_url":"https://api.github.com/users/navneet21sharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navneet21sharma/subscriptions","organizations_url":"https://api.github.com/users/navneet21sharma/orgs","repos_url":"https://api.github.com/users/navneet21sharma/repos","events_url":"https://api.github.com/users/navneet21sharma/events{/privacy}","received_events_url":"https://api.github.com/users/navneet21sharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T16:09:27Z","updated_at":"2018-05-12T16:09:27Z","author_association":"NONE","body":"I am having CouchDB 2.1.1  for mac and having same issue. When I start couchDB then it start opening new tab with address http://127.0.0.1:5984/_utils/ and refused to connect.  It continue to open until I force quit it. I tried to do according to your reply but Didn't find local.ini file. Please let me know the path of this file for mac \r\nPlease find crash log file \r\n[CouchDB2.log](https://github.com/apache/couchdb/files/1997744/CouchDB2.log)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388565308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388565550","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-388565550","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":388565550,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU2NTU1MA==","user":{"login":"navneet21sharma","id":20189518,"node_id":"MDQ6VXNlcjIwMTg5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/20189518?v=4","gravatar_id":"","url":"https://api.github.com/users/navneet21sharma","html_url":"https://github.com/navneet21sharma","followers_url":"https://api.github.com/users/navneet21sharma/followers","following_url":"https://api.github.com/users/navneet21sharma/following{/other_user}","gists_url":"https://api.github.com/users/navneet21sharma/gists{/gist_id}","starred_url":"https://api.github.com/users/navneet21sharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navneet21sharma/subscriptions","organizations_url":"https://api.github.com/users/navneet21sharma/orgs","repos_url":"https://api.github.com/users/navneet21sharma/repos","events_url":"https://api.github.com/users/navneet21sharma/events{/privacy}","received_events_url":"https://api.github.com/users/navneet21sharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T16:13:20Z","updated_at":"2018-05-12T16:13:20Z","author_association":"NONE","body":"I am having CouchDB 2.1.1 for mac and having same issue. When I start couchDB then it start opening new tab with address http://127.0.0.1:5984/_utils/ and refused to connect. It continue to open until I force quit it. I tried to do according to your reply but Didn't find local.ini file. Please let me know the path of this file for mac\r\nPlease find crash log file\r\n[CouchDB2.log](https://github.com/apache/couchdb/files/1997747/CouchDB2.log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388565550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388566250","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-388566250","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":388566250,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU2NjI1MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T16:23:34Z","updated_at":"2018-05-12T16:23:34Z","author_association":"MEMBER","body":"@navneet21sharma do not hijack other bugs with your issue, it is distinct from this one.\r\n\r\nYour log shows `{{shutdown,{failed_to_start_child,chttpd,invalid_bind_address}}` which means you need to change the `[chttpd] bind_address` value in your `local.ini` file to `0.0.0.0` or `127.0.0.1` and try again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388566250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388566336","html_url":"https://github.com/apache/couchdb/issues/1322#issuecomment-388566336","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1322","id":388566336,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU2NjMzNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T16:24:51Z","updated_at":"2018-05-12T16:24:51Z","author_association":"MEMBER","body":"In your local.ini, put:\r\n\r\n```\r\n[replicator]\r\nconnection_timeout = 60000\r\n```\r\n\r\nor whatever value you want, in milliseconds. The default is `30000`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388566336/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388568241","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-388568241","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":388568241,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU2ODI0MQ==","user":{"login":"navneet21sharma","id":20189518,"node_id":"MDQ6VXNlcjIwMTg5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/20189518?v=4","gravatar_id":"","url":"https://api.github.com/users/navneet21sharma","html_url":"https://github.com/navneet21sharma","followers_url":"https://api.github.com/users/navneet21sharma/followers","following_url":"https://api.github.com/users/navneet21sharma/following{/other_user}","gists_url":"https://api.github.com/users/navneet21sharma/gists{/gist_id}","starred_url":"https://api.github.com/users/navneet21sharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navneet21sharma/subscriptions","organizations_url":"https://api.github.com/users/navneet21sharma/orgs","repos_url":"https://api.github.com/users/navneet21sharma/repos","events_url":"https://api.github.com/users/navneet21sharma/events{/privacy}","received_events_url":"https://api.github.com/users/navneet21sharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T16:53:46Z","updated_at":"2018-05-12T16:53:46Z","author_association":"NONE","body":"oh, I was not able to read that issue from logs. Thanks for your reply, I tried to find local.ini file but didn't find the path of this file. Can you please help me to find this file so that I can change it to 0.0.0.0\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388568241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388569450","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-388569450","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":388569450,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU2OTQ1MA==","user":{"login":"navneet21sharma","id":20189518,"node_id":"MDQ6VXNlcjIwMTg5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/20189518?v=4","gravatar_id":"","url":"https://api.github.com/users/navneet21sharma","html_url":"https://github.com/navneet21sharma","followers_url":"https://api.github.com/users/navneet21sharma/followers","following_url":"https://api.github.com/users/navneet21sharma/following{/other_user}","gists_url":"https://api.github.com/users/navneet21sharma/gists{/gist_id}","starred_url":"https://api.github.com/users/navneet21sharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navneet21sharma/subscriptions","organizations_url":"https://api.github.com/users/navneet21sharma/orgs","repos_url":"https://api.github.com/users/navneet21sharma/repos","events_url":"https://api.github.com/users/navneet21sharma/events{/privacy}","received_events_url":"https://api.github.com/users/navneet21sharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T17:11:44Z","updated_at":"2018-05-12T17:12:19Z","author_association":"NONE","body":"I found it under cd /Applications/Apache\\ CouchDB.app/Contents/Resources/couchdbx-core/etc/local.ini \r\nIt was having 127.0.0.1 under chttpd so I changed it to 0.0.0.0 . Then again I checked and got this log. It is still showing the same {{shutdown,{failed_to_start_child,chttpd,invalid_bind_address}} issue. \r\n[CouchDB2.log](https://github.com/apache/couchdb/files/1997780/CouchDB2.log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388569450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388571086","html_url":"https://github.com/apache/couchdb/issues/1325#issuecomment-388571086","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1325","id":388571086,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU3MTA4Ng==","user":{"login":"navneet21sharma","id":20189518,"node_id":"MDQ6VXNlcjIwMTg5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/20189518?v=4","gravatar_id":"","url":"https://api.github.com/users/navneet21sharma","html_url":"https://github.com/navneet21sharma","followers_url":"https://api.github.com/users/navneet21sharma/followers","following_url":"https://api.github.com/users/navneet21sharma/following{/other_user}","gists_url":"https://api.github.com/users/navneet21sharma/gists{/gist_id}","starred_url":"https://api.github.com/users/navneet21sharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/navneet21sharma/subscriptions","organizations_url":"https://api.github.com/users/navneet21sharma/orgs","repos_url":"https://api.github.com/users/navneet21sharma/repos","events_url":"https://api.github.com/users/navneet21sharma/events{/privacy}","received_events_url":"https://api.github.com/users/navneet21sharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T17:38:29Z","updated_at":"2018-05-12T17:38:29Z","author_association":"NONE","body":"I reinstalled this software but again getting the same issue. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388571086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388587249","html_url":"https://github.com/apache/couchdb/issues/1325#issuecomment-388587249","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1325","id":388587249,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU4NzI0OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-12T22:18:35Z","updated_at":"2018-05-12T22:18:35Z","author_association":"MEMBER","body":"@navneet21sharma you closed this issue so I presume you found the problem?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388587249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388598932","html_url":"https://github.com/apache/couchdb/issues/1050#issuecomment-388598932","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1050","id":388598932,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODU5ODkzMg==","user":{"login":"chintan-mishra","id":24296709,"node_id":"MDQ6VXNlcjI0Mjk2NzA5","avatar_url":"https://avatars.githubusercontent.com/u/24296709?v=4","gravatar_id":"","url":"https://api.github.com/users/chintan-mishra","html_url":"https://github.com/chintan-mishra","followers_url":"https://api.github.com/users/chintan-mishra/followers","following_url":"https://api.github.com/users/chintan-mishra/following{/other_user}","gists_url":"https://api.github.com/users/chintan-mishra/gists{/gist_id}","starred_url":"https://api.github.com/users/chintan-mishra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chintan-mishra/subscriptions","organizations_url":"https://api.github.com/users/chintan-mishra/orgs","repos_url":"https://api.github.com/users/chintan-mishra/repos","events_url":"https://api.github.com/users/chintan-mishra/events{/privacy}","received_events_url":"https://api.github.com/users/chintan-mishra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-13T03:47:22Z","updated_at":"2018-05-13T03:47:22Z","author_association":"NONE","body":"Also, Couchbase-Lite 2.0 doesn't support CouchDB based DBs. Please refer to [this link](https://developer.couchbase.com/documentation/mobile/2.0/references/couchbase-lite/release-notes/index.html) related to Release Notes of latest Couchbase-Lite 2.0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388598932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388624057","html_url":"https://github.com/apache/couchdb/issues/1326#issuecomment-388624057","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1326","id":388624057,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODYyNDA1Nw==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-13T12:41:21Z","updated_at":"2018-05-13T12:41:21Z","author_association":"NONE","body":"As adicional information, database _scheduler is not created.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388624057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388649323","html_url":"https://github.com/apache/couchdb/issues/1326#issuecomment-388649323","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1326","id":388649323,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODY0OTMyMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-13T19:14:57Z","updated_at":"2018-05-13T19:14:57Z","author_association":"MEMBER","body":"Are you trying to create a `/_scheduler` database?\r\n\r\nThis is a 400 response on an httpd port. Something must be trying to create this database externally. It's not CouchDB itself.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388649323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388780229","html_url":"https://github.com/apache/couchdb/issues/1326#issuecomment-388780229","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1326","id":388780229,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODc4MDIyOQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-14T11:08:11Z","updated_at":"2018-05-14T11:08:11Z","author_association":"NONE","body":"Could be Fauxton or internal replication? This database should exist?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388780229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388840761","html_url":"https://github.com/apache/couchdb/issues/1328#issuecomment-388840761","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1328","id":388840761,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODg0MDc2MQ==","user":{"login":"ahayes","id":1750076,"node_id":"MDQ6VXNlcjE3NTAwNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1750076?v=4","gravatar_id":"","url":"https://api.github.com/users/ahayes","html_url":"https://github.com/ahayes","followers_url":"https://api.github.com/users/ahayes/followers","following_url":"https://api.github.com/users/ahayes/following{/other_user}","gists_url":"https://api.github.com/users/ahayes/gists{/gist_id}","starred_url":"https://api.github.com/users/ahayes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahayes/subscriptions","organizations_url":"https://api.github.com/users/ahayes/orgs","repos_url":"https://api.github.com/users/ahayes/repos","events_url":"https://api.github.com/users/ahayes/events{/privacy}","received_events_url":"https://api.github.com/users/ahayes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-14T14:38:51Z","updated_at":"2018-05-14T14:38:51Z","author_association":"NONE","body":"I think this is just a symptom of another problem affecting couchdb in an Ubuntu LX zone on SmartOS. After several couchdb restarts and couchup retries (each throwing different errors) it was ultimately successful in replicating.\r\n\r\nI am closing this and will add a comment pointing to the LX zone issue when I have it created.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388840761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388849059","html_url":"https://github.com/apache/couchdb/issues/1326#issuecomment-388849059","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1326","id":388849059,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODg0OTA1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-14T15:01:13Z","updated_at":"2018-05-14T15:01:13Z","author_association":"MEMBER","body":"There are useful endpoints, `_scheduler/jobs` and `_scheduler/docs`, but neither are POSTed or PUT by internal processes. You can GET either of those for more info about the scheduler.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388849059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388850658","html_url":"https://github.com/apache/couchdb/issues/1327#issuecomment-388850658","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1327","id":388850658,"node_id":"MDEyOklzc3VlQ29tbWVudDM4ODg1MDY1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-14T15:05:43Z","updated_at":"2018-05-14T15:05:43Z","author_association":"MEMBER","body":"This says that you do not have the os_mon Erlang application correctly installed.\r\n\r\nTry reinstalling Erlang - especially, use the erlang packages provided here: https://packages.erlang-solutions.com/ .","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/388850658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389027596","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389027596","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389027596,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTAyNzU5Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T03:00:18Z","updated_at":"2018-05-15T03:00:18Z","author_association":"MEMBER","body":"Check your database for conflicted documents - this could be why your DB has a distinct disk vs. data size. Compaction will not remove document conflicts.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389027596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389086383","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-389086383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":389086383,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTA4NjM4Mw==","user":{"login":"alxndrsn","id":191496,"node_id":"MDQ6VXNlcjE5MTQ5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/191496?v=4","gravatar_id":"","url":"https://api.github.com/users/alxndrsn","html_url":"https://github.com/alxndrsn","followers_url":"https://api.github.com/users/alxndrsn/followers","following_url":"https://api.github.com/users/alxndrsn/following{/other_user}","gists_url":"https://api.github.com/users/alxndrsn/gists{/gist_id}","starred_url":"https://api.github.com/users/alxndrsn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alxndrsn/subscriptions","organizations_url":"https://api.github.com/users/alxndrsn/orgs","repos_url":"https://api.github.com/users/alxndrsn/repos","events_url":"https://api.github.com/users/alxndrsn/events{/privacy}","received_events_url":"https://api.github.com/users/alxndrsn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T08:28:00Z","updated_at":"2018-05-15T08:28:00Z","author_association":"CONTRIBUTOR","body":"@SK-CSE I ran into the same issue.  It may not help in your case, but I worked around it by using [`pouchdb-server`](https://github.com/pouchdb/pouchdb-server) instead.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389086383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389104804","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389104804","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389104804,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTEwNDgwNA==","user":{"login":"joshrodman","id":39284543,"node_id":"MDQ6VXNlcjM5Mjg0NTQz","avatar_url":"https://avatars.githubusercontent.com/u/39284543?v=4","gravatar_id":"","url":"https://api.github.com/users/joshrodman","html_url":"https://github.com/joshrodman","followers_url":"https://api.github.com/users/joshrodman/followers","following_url":"https://api.github.com/users/joshrodman/following{/other_user}","gists_url":"https://api.github.com/users/joshrodman/gists{/gist_id}","starred_url":"https://api.github.com/users/joshrodman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshrodman/subscriptions","organizations_url":"https://api.github.com/users/joshrodman/orgs","repos_url":"https://api.github.com/users/joshrodman/repos","events_url":"https://api.github.com/users/joshrodman/events{/privacy}","received_events_url":"https://api.github.com/users/joshrodman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T09:32:24Z","updated_at":"2018-05-15T09:32:24Z","author_association":"NONE","body":"@wohali All my database are independent and have never participated in any replication. My understanding from reading the documentation (and from experience) is that in a single-node setup, conflicts are prevented by requiring the most recent revision's \"_rev\" when supplying an updated document. Am I incorrect in my understanding, or is there another way to get conflicts that I'm unaware of in a single-node system?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389104804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389122182","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-389122182","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":389122182,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTEyMjE4Mg==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T10:38:10Z","updated_at":"2018-05-15T10:38:10Z","author_association":"NONE","body":"Hello, it seams that increasing timeout in fabric solves the problem:\r\n\r\n```\r\n[fabric]\r\nrequest_timeout = 300000\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389122182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389152537","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389152537","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389152537,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTE1MjUzNw==","user":{"login":"joshrodman","id":39284543,"node_id":"MDQ6VXNlcjM5Mjg0NTQz","avatar_url":"https://avatars.githubusercontent.com/u/39284543?v=4","gravatar_id":"","url":"https://api.github.com/users/joshrodman","html_url":"https://github.com/joshrodman","followers_url":"https://api.github.com/users/joshrodman/followers","following_url":"https://api.github.com/users/joshrodman/following{/other_user}","gists_url":"https://api.github.com/users/joshrodman/gists{/gist_id}","starred_url":"https://api.github.com/users/joshrodman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshrodman/subscriptions","organizations_url":"https://api.github.com/users/joshrodman/orgs","repos_url":"https://api.github.com/users/joshrodman/repos","events_url":"https://api.github.com/users/joshrodman/events{/privacy}","received_events_url":"https://api.github.com/users/joshrodman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T12:42:39Z","updated_at":"2018-05-15T12:42:39Z","author_association":"NONE","body":"[Using source of 1.6.1]\r\n\r\nI have confirmed in https://github.com/apache/couchdb/blob/1.6.x/src/couchdb/couch_compaction_daemon.erl:367 that \"FileSize\" referenced in the documentation is an alias for disk_size. That's a weakness of the documentation I would hope someone would be willing to correct.\r\n\r\nAlso, I see in https://github.com/apache/couchdb/blob/1.6.x/src/couchdb/couch_compaction_daemon.erl:292 that get_db_info (https://github.com/apache/couchdb/blob/1.6.x/src/couchdb/couch_db.erl:260) is indirectly used to get disk_size. The function appears to use `couch_file:bytes(Fd)` to retrieve disk_size, which would appear to be a raw byte count of the file on disk (although I'm not 100% sure because yesterday was the first day I've tried to read this language). \r\n\r\nThis last fact would seem to support the theory I stated in my write-up that disk_size is a misleading measure for the compaction daemon when CouchDB compression options are enabled. Yes, it is very handy to know how big the actual file is on disk, but for the purposes of triggering compaction, disk_size needs to represent the uncompressed sum of the sizes of the elements, if data_size also represents an uncompressed size–which I have not confirmed beacause that function is significantly less easy to trace to untrained eyes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389152537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389232514","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-389232514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":389232514,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTIzMjUxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T16:37:26Z","updated_at":"2018-05-15T16:37:26Z","author_association":"MEMBER","body":"This is a sign that your cluster is overloaded...but it is not a bug in CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389232514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389232897","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389232897","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389232897,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTIzMjg5Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T16:38:44Z","updated_at":"2018-05-15T16:38:44Z","author_association":"MEMBER","body":"@joshrodman That is true in 1.x, it is not true in 2.x.\r\n\r\nI'll tag this issue as 1.x - but be aware that no additional development beyond critical bug fixes will be landing on the 1.x release branch at this time. All new development is on 2.x and beyond.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389232897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389233124","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389233124","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389233124,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTIzMzEyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T16:39:22Z","updated_at":"2018-05-15T16:39:22Z","author_association":"MEMBER","body":"An additional note - when 3.x releases, all 1.x issues will be mass-closed, as CouchDB only supports the current and n-1 releases.e","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389233124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389266982","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389266982","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389266982,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTI2Njk4Mg==","user":{"login":"joshrodman","id":39284543,"node_id":"MDQ6VXNlcjM5Mjg0NTQz","avatar_url":"https://avatars.githubusercontent.com/u/39284543?v=4","gravatar_id":"","url":"https://api.github.com/users/joshrodman","html_url":"https://github.com/joshrodman","followers_url":"https://api.github.com/users/joshrodman/followers","following_url":"https://api.github.com/users/joshrodman/following{/other_user}","gists_url":"https://api.github.com/users/joshrodman/gists{/gist_id}","starred_url":"https://api.github.com/users/joshrodman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshrodman/subscriptions","organizations_url":"https://api.github.com/users/joshrodman/orgs","repos_url":"https://api.github.com/users/joshrodman/repos","events_url":"https://api.github.com/users/joshrodman/events{/privacy}","received_events_url":"https://api.github.com/users/joshrodman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T18:27:45Z","updated_at":"2018-05-15T18:27:45Z","author_association":"NONE","body":"@wohali I have not explored the major functionality of 2.x, are you saying that due to design changes, 2.x and higher are not susceptible to this issue?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389266982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389275811","html_url":"https://github.com/apache/couchdb/issues/1329#issuecomment-389275811","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1329","id":389275811,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTI3NTgxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-15T18:56:08Z","updated_at":"2018-05-15T18:56:08Z","author_association":"MEMBER","body":"2.x calculates things differently. I don't know if you'd run into the same problem. If you do, we'd be happy to investigate.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389275811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389965539","html_url":"https://github.com/apache/couchdb/issues/1293#issuecomment-389965539","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1293","id":389965539,"node_id":"MDEyOklzc3VlQ29tbWVudDM4OTk2NTUzOQ==","user":{"login":"thescrublet","id":39379357,"node_id":"MDQ6VXNlcjM5Mzc5MzU3","avatar_url":"https://avatars.githubusercontent.com/u/39379357?v=4","gravatar_id":"","url":"https://api.github.com/users/thescrublet","html_url":"https://github.com/thescrublet","followers_url":"https://api.github.com/users/thescrublet/followers","following_url":"https://api.github.com/users/thescrublet/following{/other_user}","gists_url":"https://api.github.com/users/thescrublet/gists{/gist_id}","starred_url":"https://api.github.com/users/thescrublet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thescrublet/subscriptions","organizations_url":"https://api.github.com/users/thescrublet/orgs","repos_url":"https://api.github.com/users/thescrublet/repos","events_url":"https://api.github.com/users/thescrublet/events{/privacy}","received_events_url":"https://api.github.com/users/thescrublet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-17T18:33:33Z","updated_at":"2018-05-17T18:33:33Z","author_association":"NONE","body":"Just in case you didn't have enough information on this already, when we found this occurring we tracked it down to ONLY PUT requests with our design documents:\r\n\r\ncouchdb_1 | SyntaxError: JSON.parse\r\ncouchdb_1 | SyntaxError: JSON.parse\r\ncouchdb_1 | Stacktrace:\r\ncouchdb_1 | ()@./share/server/main.js:1576\r\ncouchdb_1 | ()@./share/server/main.js:1603\r\ncouchdb_1 | @./share/server/main.js:1\r\ncouchdb_1 | Failed to execute script.\r\ncouchdb_1 | Stacktrace:\r\ncouchdb_1 | ()@./share/server/main.js:1576\r\ncouchdb_1 | ()@./share/server/main.js:1603\r\ncouchdb_1 | @./share/server/main.js:1\r\ncouchdb_1 | Failed to execute script.\r\n\r\nAnd that couchdb log would scroll until the service was stopped. We used the following to trigger the error:\r\ncurl -vX PUT -H “Content-Type: application/json” http://127.0.0.1:5984/our-database/_design/dom -d ‘{ “_id”: “_design/dom”, “views”: { “dom”: { “map”: “function (doc) { // our function code }” } }, “language”: “javascript” }’\r\n\r\nPUTs of non-design-docs worked, POSTs and GETs worked, it was just PUT of /_design/ddoc that was a problem.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/389965539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390027161","html_url":"https://github.com/apache/couchdb/issues/1293#issuecomment-390027161","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1293","id":390027161,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDAyNzE2MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-17T21:59:30Z","updated_at":"2018-05-17T21:59:30Z","author_association":"MEMBER","body":"Thanks @thescrublet , this is consistent with our understanding.\r\n\r\nWe're going to work around this by shipping our own js packages that replace the os-provided ones on all binary platforms.\r\n\r\nWe hope to have a new binary release soon.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390027161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390065785","html_url":"https://github.com/apache/couchdb/issues/1332#issuecomment-390065785","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1332","id":390065785,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDA2NTc4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-18T01:26:02Z","updated_at":"2018-05-18T01:26:02Z","author_association":"MEMBER","body":"Hi @krishnakode  I'm so sorry... we no longer support CouchDB 0.11.0. Not only that, Elasticsearch doesn't support the CouchDB river plugin [since 2015](https://github.com/elastic/elasticsearch-river-couchdb), either.\r\n\r\nThe `enotconn` error means that the external process was unable to connect correctly. Beyond that I can't be of any more help.\r\n\r\nYou would do best to join, then email our mailing list, user@couchdb.apache.org, for advice on migrating from 0.11 to the latest 2.1.1 release.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390065785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390066270","html_url":"https://github.com/apache/couchdb/issues/1331#issuecomment-390066270","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1331","id":390066270,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDA2NjI3MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-18T01:29:09Z","updated_at":"2018-05-18T01:29:09Z","author_association":"MEMBER","body":"Hi @krishnakode , goodness, that is an old version of CouchDB. You may get more help if you ask on our user mailing list (user@couchdb.apache.org) than here. You will need to subscribe to the list to be able to post.\r\n\r\nWhere are you starting the replication from - the 1.6.0 CouchDB or the 0.11.0 CouchDB? What happens if you start the replication from the other server?\r\n\r\nNote that CouchDB 1.6.0 has [serious security holes](https://blog.couchdb.org/2017/11/14/apache-couchdb-cve-2017-12635-and-cve-2017-12636/) - we strongly encourage you to upgrade to CouchDB 1.7.1 or 2.1.1 instead.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390066270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390282102","html_url":"https://github.com/apache/couchdb/issues/1333#issuecomment-390282102","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1333","id":390282102,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDI4MjEwMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-18T17:46:58Z","updated_at":"2018-05-18T17:46:58Z","author_association":"MEMBER","body":"Hi @browndav ,\r\n\r\n1. Sadly, there is no way to build CouchDB's `couchjs` binary against any newer version of SpiderMonkey. There are a number of reasons, but the most compelling is that the current specification of a design document map / reduce function as a bare `function () {...}` is [no longer syntactically valid any modern JavaScript engine](https://issues.apache.org/jira/browse/COUCHDB-1643).\r\n\r\nTo move to a newer version, we must either deprecate the current design document syntax, or auto-transform/auto-wrap JS functions within it. The problem with the latter approach is that a small percentage of users have stuck other stuff ahead of the function declaration in their `map` / `reduce` / etc. functions, such as variable declarations or library imports, that would break with a simple auto-rewrite wrapper.\r\n\r\nWith the very next release of CouchDB binaries, Apache CouchDB will be supplying pre-built SM1.8.5 binaries via our own open build chain. This is to ensure that the most popular platforms (Debian, Ubuntu, CentOS, RedHat, Windows, docker) have the library built with the right options. This is motivated by recent distributions dropping support for SM1.8.5, or changing build-time options such that instability is introduced.\r\n\r\nThere was an [experimental Node-based replacement](https://issues.apache.org/jira/browse/COUCHDB-1894) for the SM 1.8.5 view server in 1.x, but the \"extreme sandboxing\" we accomplish with Spidermonkey is not there, meaning that the Node-based viewserver is a gaping security hole, and violates the view server specification (no side effects are allowed!) As such we can't recommend you use it anywhere. The effort is abandoned.\r\n\r\nThe current plan **forward** is two-fold.\r\n\r\nFirst, the team is working as hard as possible on improving [mango](http://docs.couchdb.org/en/2.1.1/api/database/find.html), the in-built declarative solution, to provide coverage of as many boilerplate secondary indexes as possible. Foremost, Mango is inherently faster than any external query server can ever be. This reduces the need for JavaScript overall. Users can also add the dreyfus / clouseau add-on from Cloudant to enable Lucene-powered full-text search as another kind of secondary index.\r\n\r\nSecond, we've had (thanks to @dmunch) initial good experiences with the [Microsoft ChakraCore engine](https://github.com/microsoft/ChakraCore). Unlike V8/Node, ChakraCore is lightweight, small, and intended to be embedded in other systems directly. Microsoft's own Cosmos DB (formerly Document DB) was inspired by Apache CouchDB, and uses ChakraCore extensively as its JS engine, as does the new Edge browser.\r\n\r\n@dmunch's [experimental ChakraCore-based query server](https://github.com/dmunch/couch-chakra) already solves both the sandboxing and the anonymous function concerns, and has a number of other exciting features as well. It is also compatibly licensed (ALv2.0) as is ChakraCore itself (MIT).\r\n\r\nSuch a major change - swapping out SM1.8.5 - that induces any sort of backwards incompatibility can't occur until a major version release, so the earliest I'd expect to see anything like this in CouchDB would be the 3.0 release. If we can solve the remaining TODOs for the couch-chakra solution, we could drop it in sooner (maybe 2.3.0). We'd welcome any help you might be able to give us on this!\r\n\r\n2. Yes, we keep tabs on the MITRE CVEs for vulnerabilities. We also welcome any security reports at our (security email address)[security@couchdb.apache.org]. Because of the aforementioned sandboxing, and the fact that couchjs wraps SM1.8.5 in a very constrained environment, the very large proportion of exploits possible with a JS engine are effectively mitigated.\r\n\r\nFor bookkeeping, I'm going to close this ticket out and open forward-looking tickets that make more sense for our plans, but I'm happy to continue this discussion here or in those tickets.\r\n\r\nCan I ask - other than being successful deploying SM1.8.5 easily, are there any other concerns you or your team have? For instance, are you writing complex JS views that require newer ECMAScript functionality? Or are you trying to achieve something else with a view?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390282102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390328043","html_url":"https://github.com/apache/couchdb/issues/1106#issuecomment-390328043","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1106","id":390328043,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDMyODA0Mw==","user":{"login":"davedoesdev","id":2329683,"node_id":"MDQ6VXNlcjIzMjk2ODM=","avatar_url":"https://avatars.githubusercontent.com/u/2329683?v=4","gravatar_id":"","url":"https://api.github.com/users/davedoesdev","html_url":"https://github.com/davedoesdev","followers_url":"https://api.github.com/users/davedoesdev/followers","following_url":"https://api.github.com/users/davedoesdev/following{/other_user}","gists_url":"https://api.github.com/users/davedoesdev/gists{/gist_id}","starred_url":"https://api.github.com/users/davedoesdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davedoesdev/subscriptions","organizations_url":"https://api.github.com/users/davedoesdev/orgs","repos_url":"https://api.github.com/users/davedoesdev/repos","events_url":"https://api.github.com/users/davedoesdev/events{/privacy}","received_events_url":"https://api.github.com/users/davedoesdev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-18T20:48:19Z","updated_at":"2018-05-18T20:48:19Z","author_association":"NONE","body":"Seeing this too:\r\n\r\n```\r\n[error] 2018-05-18T20:05:47.597777Z couchdb@127.0.0.1 emulator -------- Error in process <0.288.0> on node 'couchdb@127.0.0.1' with exit value:\r\n{badarg,[{ets,member,[mem3_openers,<<\"_users\">>],[]},{mem3_shards,maybe_spawn_shard_writer,3,[{file,\"src/mem3_shards.erl\"},{line,475}]},{mem3_shards,load_shards_from_db,2,[{file,\"src/mem3_shards.erl\"},{line,380}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,369}]},{mem3_shards,load_shards_from_disk,2,[{file,\"src/mem3_shards.erl\"},{line,398}]},{mem3_shards,for_docid,3,[{file,\"src/mem3_shards.erl\"},{line,91}]},{fabric_doc_open,go,3,[{file,\"src/fabric_doc_open.erl\"},{line,38}]},{couch_index_server,'-get_index/3-fun-0-',2,[{file,\"src/couch_index_server.erl\"},{line,68}]}]}\r\n\r\n[error] 2018-05-18T20:05:47.597860Z couchdb@127.0.0.1 <0.273.0> -------- Error opening view group `_auth` from database `shards/40000000-5fffffff/_users.1526504179`: {'EXIT',{{badmatch,{badarg,[{ets,member,[mem3_openers,<<\"_users\">>],[]},{mem3_shards,maybe_spawn_shard_writer,3,[{file,\"src/mem3_shards.erl\"},{line,475}]},{mem3_shards,load_shards_from_db,2,[{file,\"src/mem3_shards.erl\"},{line,380}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,369}]},{mem3_shards,load_shards_from_disk,2,[{file,\"src/mem3_shards.erl\"},{line,398}]},{mem3_shards,for_docid,3,[{file,\"src/mem3_shards.erl\"},{line,91}]},{fabric_doc_open,go,3,[{file,\"src/fabric_doc_open.erl\"},{line,38}]},{couch_index_server,'-get_index/3-fun-0-',2,[{file,\"src/couch_index_server.erl\"},{line,68}]}]}},[{couch_mrview,get_info,2,[{file,\"src/couch_mrview.erl\"},{line,334}]},{couch_compaction_daemon,maybe_compact_view,3,[{file,\"src/couch_compaction_daemon.erl\"},{line,257}]},{couch_compaction_daemon,maybe_compact_views,3,[{file,\"src/couch_compaction_daemon.erl\"},{line,228}]},{couch_compaction_daemon,'-compact_loop/1-fun-0-',4,[{file,\"src/couch_compaction_daemon.erl\"},{line,142}]},{couch_server,'-all_databases/2-fun-0-',4,[{file,\"src/couch_server.erl\"},{line,312}]},{couch_util,fold_files2,6,[{file,\"src/couch_util.erl\"},{line,107}]},{couch_util,fold_files2,6,[{file,\"src/couch_util.erl\"},{line,112}]},{couch_server,all_databases,2,[{file,\"src/couch_server.erl\"},{line,302}]}]}}\r\n```\r\n\r\nDoesn't seem to affect functionality though.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390328043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390430432","html_url":"https://github.com/apache/couchdb/issues/1316#issuecomment-390430432","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1316","id":390430432,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQzMDQzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-19T20:25:55Z","updated_at":"2018-05-19T20:54:19Z","author_association":"MEMBER","body":"Our [apache/couchdb-pkg](https://github.com/apache/couchdb-pkg) repo now has support to build SM 1.8.5 for all supported Debian and Ubuntu platforms: debian jessie / stretch and ubuntu trusty / xenial / bionic. Support is on the way for CentOS/RHEL 6 and 7.\r\n\r\nIf you have the necessary prerequisites installed, `make couch-js-debs PLATFORM=bionic` will build you `couch-libmozjs185-1.0` and `couch-libmozjs185-dev` packages suitable for installing.\r\n\r\nWe'll be transitioning the `couchdb` package to depend on these new packages instead of the OS-provided ones with the next binary release.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390430432/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390496881","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-390496881","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":390496881,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDQ5Njg4MQ==","user":{"login":"jvegaseg","id":12508470,"node_id":"MDQ6VXNlcjEyNTA4NDcw","avatar_url":"https://avatars.githubusercontent.com/u/12508470?v=4","gravatar_id":"","url":"https://api.github.com/users/jvegaseg","html_url":"https://github.com/jvegaseg","followers_url":"https://api.github.com/users/jvegaseg/followers","following_url":"https://api.github.com/users/jvegaseg/following{/other_user}","gists_url":"https://api.github.com/users/jvegaseg/gists{/gist_id}","starred_url":"https://api.github.com/users/jvegaseg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvegaseg/subscriptions","organizations_url":"https://api.github.com/users/jvegaseg/orgs","repos_url":"https://api.github.com/users/jvegaseg/repos","events_url":"https://api.github.com/users/jvegaseg/events{/privacy}","received_events_url":"https://api.github.com/users/jvegaseg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-20T17:12:14Z","updated_at":"2018-05-20T17:12:14Z","author_association":"NONE","body":"Sorry but the problem arises again (also with request_timeout = 300000).\r\nMachines are not overloaded (nor disk nor CPU). \r\nUploading an attachment of very few kilobytes can not take 5 minutes in 3 nodes at same time (it reports the error on 3 nodes for same request).\r\n\r\nIs there any limit about how many requests (for uploading attachments) can be handled?\r\n\r\nAs info, we have only 2 databases and both together has a size of 3 Terabytes. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390496881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390532898","html_url":"https://github.com/apache/couchdb/issues/1333#issuecomment-390532898","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1333","id":390532898,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDUzMjg5OA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T01:57:12Z","updated_at":"2018-05-21T02:03:35Z","author_association":"NONE","body":"The concern that first sent me down this path was CVE-2014-1513, which IIRC was full RCE demonstrated at pwn2own in 2014. It wasn't clear to me how javascript sandboxing would mitigate a heap overflow, and I wasn't able to easily find any relevant mitigations or backported patches in the source .deb packages for libmozjs185. I may be missing something.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390532898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390552401","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390552401","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390552401,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDU1MjQwMQ==","user":{"login":"garethbowen","id":2064938,"node_id":"MDQ6VXNlcjIwNjQ5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2064938?v=4","gravatar_id":"","url":"https://api.github.com/users/garethbowen","html_url":"https://github.com/garethbowen","followers_url":"https://api.github.com/users/garethbowen/followers","following_url":"https://api.github.com/users/garethbowen/following{/other_user}","gists_url":"https://api.github.com/users/garethbowen/gists{/gist_id}","starred_url":"https://api.github.com/users/garethbowen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garethbowen/subscriptions","organizations_url":"https://api.github.com/users/garethbowen/orgs","repos_url":"https://api.github.com/users/garethbowen/repos","events_url":"https://api.github.com/users/garethbowen/events{/privacy}","received_events_url":"https://api.github.com/users/garethbowen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T04:50:23Z","updated_at":"2018-05-21T04:50:23Z","author_association":"NONE","body":"@SK-CSE Any update on this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390552401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390553969","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390553969","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390553969,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDU1Mzk2OQ==","user":{"login":"SK-CSE","id":11860522,"node_id":"MDQ6VXNlcjExODYwNTIy","avatar_url":"https://avatars.githubusercontent.com/u/11860522?v=4","gravatar_id":"","url":"https://api.github.com/users/SK-CSE","html_url":"https://github.com/SK-CSE","followers_url":"https://api.github.com/users/SK-CSE/followers","following_url":"https://api.github.com/users/SK-CSE/following{/other_user}","gists_url":"https://api.github.com/users/SK-CSE/gists{/gist_id}","starred_url":"https://api.github.com/users/SK-CSE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SK-CSE/subscriptions","organizations_url":"https://api.github.com/users/SK-CSE/orgs","repos_url":"https://api.github.com/users/SK-CSE/repos","events_url":"https://api.github.com/users/SK-CSE/events{/privacy}","received_events_url":"https://api.github.com/users/SK-CSE/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T05:04:31Z","updated_at":"2018-05-21T05:04:31Z","author_association":"NONE","body":"no.. still waiting for release package","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390553969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390726389","html_url":"https://github.com/apache/couchdb/issues/1335#issuecomment-390726389","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1335","id":390726389,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDcyNjM4OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T17:35:45Z","updated_at":"2018-05-21T17:35:45Z","author_association":"MEMBER","body":"The endpoint moved to `/_node/_local/_stats` in 2.x","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390726389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390726647","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390726647","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390726647,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDcyNjY0Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T17:36:35Z","updated_at":"2018-05-21T17:36:35Z","author_association":"MEMBER","body":"Packages are coming, please be patient.\r\n\r\npouchdb-server is not an equivalent solution, nor is it anywhere near as performant. (We love the pouch folks!)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390726647/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390728127","html_url":"https://github.com/apache/couchdb/issues/1333#issuecomment-390728127","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1333","id":390728127,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDcyODEyNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T17:41:46Z","updated_at":"2018-05-21T17:41:46Z","author_association":"MEMBER","body":"That particular exploit doesn't go as far back as 1.8.5; the affected file (TypedArrayObject.cpp) is newer than 1.8.5.\r\n\r\nSee https://bugzilla.mozilla.org/show_bug.cgi?id=982974 and:\r\n\r\n```\r\n$ tar xfz js185-1.0.0.tar.gz\r\n$ cd js-1.8.5/\r\n$ find . -name TypedArrayObject.cpp\r\n$\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390728127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390795501","html_url":"https://github.com/apache/couchdb/issues/1333#issuecomment-390795501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1333","id":390795501,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDc5NTUwMQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T21:57:47Z","updated_at":"2018-05-21T21:57:47Z","author_association":"NONE","body":"Thanks, I missed that; that's super-helpful. Do you know off the top of your head if CVE-2013-5619 is in the same situation?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390795501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390804609","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390804609","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390804609,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDgwNDYwOQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-21T22:41:44Z","updated_at":"2018-05-21T22:41:44Z","author_association":"NONE","body":"This is low-priority, but can I ask if you have a good source for couchdb vs. pouchdb benchmark data that covers one or more of the pouchdb backends? I'd like to understand more about the performance characteristics, but don't want to duplicate effort if someone's already covered this ground thoroughly. Thanks in advance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390804609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390864941","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390864941","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390864941,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg2NDk0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T05:11:44Z","updated_at":"2018-05-22T05:11:44Z","author_association":"MEMBER","body":"Talk to the developers of pouchdb. Nolan Lawson said he created pouchdb-server as a development tool and that he thinks it'd be terrible in production at any sort of scale.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390864941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390868351","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390868351","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390868351,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg2ODM1MQ==","user":{"login":"mattpr","id":1196252,"node_id":"MDQ6VXNlcjExOTYyNTI=","avatar_url":"https://avatars.githubusercontent.com/u/1196252?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpr","html_url":"https://github.com/mattpr","followers_url":"https://api.github.com/users/mattpr/followers","following_url":"https://api.github.com/users/mattpr/following{/other_user}","gists_url":"https://api.github.com/users/mattpr/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpr/subscriptions","organizations_url":"https://api.github.com/users/mattpr/orgs","repos_url":"https://api.github.com/users/mattpr/repos","events_url":"https://api.github.com/users/mattpr/events{/privacy}","received_events_url":"https://api.github.com/users/mattpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T05:34:46Z","updated_at":"2018-05-22T05:34:46Z","author_association":"NONE","body":"Just curious... is there something distro specific (besides systemd/upstart/init files) that prevents the provision of a generic linux-x64 binary (say in addition to the distro specific packages)?  Having a generic binary would make it much easier to deploy to new or unsupported distros.  End-users would obviously have to decide if they want to run couchdb as a service and add their own systemd units (or whatever).... but it would be a nice alternative to building from source on unsupported production systems.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390868351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390868506","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390868506","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390868506,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg2ODUwNg==","user":{"login":"SK-CSE","id":11860522,"node_id":"MDQ6VXNlcjExODYwNTIy","avatar_url":"https://avatars.githubusercontent.com/u/11860522?v=4","gravatar_id":"","url":"https://api.github.com/users/SK-CSE","html_url":"https://github.com/SK-CSE","followers_url":"https://api.github.com/users/SK-CSE/followers","following_url":"https://api.github.com/users/SK-CSE/following{/other_user}","gists_url":"https://api.github.com/users/SK-CSE/gists{/gist_id}","starred_url":"https://api.github.com/users/SK-CSE/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SK-CSE/subscriptions","organizations_url":"https://api.github.com/users/SK-CSE/orgs","repos_url":"https://api.github.com/users/SK-CSE/repos","events_url":"https://api.github.com/users/SK-CSE/events{/privacy}","received_events_url":"https://api.github.com/users/SK-CSE/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T05:35:45Z","updated_at":"2018-05-22T05:35:45Z","author_association":"NONE","body":"thanks @wohali :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390868506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390872269","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-390872269","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":390872269,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg3MjI2OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T05:59:04Z","updated_at":"2018-05-22T05:59:04Z","author_association":"MEMBER","body":"@mattpr we depend on a large number of libraries and runtimes, so it is better for us not to be shipping ourselves, and having the OS provide. thus packages are one of the better options for distributing couchdb.\r\n\r\nthe snap package is currently unmaintained but promiseds what you describe. there is also the docker image that many seem to like.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390872269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390876360","html_url":"https://github.com/apache/couchdb/issues/1333#issuecomment-390876360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1333","id":390876360,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDg3NjM2MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T06:22:36Z","updated_at":"2018-05-22T06:22:36Z","author_association":"MEMBER","body":"Specifically the patch in https://bugzilla.mozilla.org/show_bug.cgi?id=917841 refers only to files that aren't in SM 1.8.5, but the general principle might apply. \r\n\r\nThe CVE is labelled medium priority. No known exploits were out there - this was a preventative change. I wouldn't consider this critical enough for our use of the library to patch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390876360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390992599","html_url":"https://github.com/apache/couchdb/issues/782#issuecomment-390992599","issue_url":"https://api.github.com/repos/apache/couchdb/issues/782","id":390992599,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDk5MjU5OQ==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T13:36:43Z","updated_at":"2018-05-22T13:36:43Z","author_association":"NONE","body":"Custom revisions works without any issue in CouchDB 2.1.1. You just need to specify new_edits=false and include correct _revisions field. It is simper than in looks and more logical than using the last revision field.\r\n\r\nPUT `http://localhost:5984/custom_revs/customRevTest?new_edits=false`\r\n\r\n```\r\n{\r\n\"_id\":\"customRevTest\",\r\n\"_revisions\":{\"start\":1,\"ids\":[\"my_custom_revision\"]},\r\n\"foo\":\"bar\"\r\n}\r\n```\r\nThe `_rev` field can be omitted if the document contains field `_revisions`. Because the revision of the document is always the first, so CouchDB can calculate it\r\n```\r\n{\r\n\"_id\":\"customRevTest\",\r\n\"_revisions\":{\"start\":2,\"ids\":[\"my_super_extra_long_custom_revision\",\"my_custom_revision\"]},\r\n\"foo\":\"bar2\"\r\n}\r\n```\r\nI have tested longer  revision than usual and passed\r\n```\r\n{\r\n\"_id\":\"customRevTest\",\r\n\"_revisions\":{\"start\":3,\"ids\":[\"long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long\",\"my_super_extra_long_custom_revision\",\"my_custom_revision\"]},\r\n\"foo\":\"bar4\"\r\n}\r\n```\r\nApparently you don't need to include the whole revision history. Once there is matching record, the CouchDB is happy.\r\n```\r\n{\r\n\"_id\":\"customRevTest\",\r\n\"_revisions\":{\"start\":4,\"ids\":[\"short\",\"long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long\"]},\r\n\"foo\":\"bar5\"\r\n}\r\n```\r\nThe CouchDB is still tracking revision history.\r\n\r\n`GET http://localhost:5984/custom_revs/customRevTest?revs=true`\r\n```\r\n{\"_id\":\"customRevTest\",\"_rev\":\"4-short\",\"foo\":\"bar5\",\"_revisions\":{\"start\":4,\"ids\":[\"short\",\"long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long_long\",\"my_super_extra_long_custom_revision\",\"my_custom_revision\"]}}\r\n```\r\n\r\nSo you _can_ generate a custom revision. You can encode various information into it: For instance\r\n\r\n`N-<timestamp>_<userid>_<random>`\r\n\r\nyou can easily track who made changes and when\r\n\r\nHas it some disadvantages? Yes. I still considering this technique as non-standard. It works, because it is part of the replication protocol. The database must accept any weird revisions as long as they are comprising correct history chain. From the database's perspective, the request looks as part of ongoing replication. \r\n\r\nHowever, once the inconsistency is submitted, there is no 409 error. It results to creation of the conflicted document. \r\n\r\nAlso note that two different documents with the same `_rev` and `_id` are considered as equal.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/390992599/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391125362","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-391125362","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":391125362,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTEyNTM2Mg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T20:14:32Z","updated_at":"2018-05-22T20:14:32Z","author_association":"NONE","body":"I think I'm seeing the same on 16.04 LTS FWIW.\r\n\r\n```\r\nW: The repository 'https://apache.bintray.com/couchdb-deb {distribution} Release' does not have a Release file.\r\nN: Data from such a repository can't be authenticated and is therefore potentially dangerous to use.\r\nN: See apt-secure(8) manpage for repository creation and user configuration details.\r\nE: Failed to fetch https://apache.bintray.com/couchdb-deb/dists/{distribution}/main/binary-amd64/Packages  404  Not Found\r\nE: Some index files failed to download. They have been ignored, or old ones used instead.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391125362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391143052","html_url":"https://github.com/apache/couchdb/issues/1314#issuecomment-391143052","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1314","id":391143052,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTE0MzA1Mg==","user":{"login":"mattpr","id":1196252,"node_id":"MDQ6VXNlcjExOTYyNTI=","avatar_url":"https://avatars.githubusercontent.com/u/1196252?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpr","html_url":"https://github.com/mattpr","followers_url":"https://api.github.com/users/mattpr/followers","following_url":"https://api.github.com/users/mattpr/following{/other_user}","gists_url":"https://api.github.com/users/mattpr/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpr/subscriptions","organizations_url":"https://api.github.com/users/mattpr/orgs","repos_url":"https://api.github.com/users/mattpr/repos","events_url":"https://api.github.com/users/mattpr/events{/privacy}","received_events_url":"https://api.github.com/users/mattpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-22T21:14:40Z","updated_at":"2018-05-22T21:14:40Z","author_association":"NONE","body":"@browndav  you need to replace `{distribution}` with the specific distro you want the package for (e.g. \"xenial\" for 16.04).\r\n\r\nhttp://docs.couchdb.org/en/latest/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391143052/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391228383","html_url":"https://github.com/apache/couchdb/pull/1336#issuecomment-391228383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1336","id":391228383,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTIyODM4Mw==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-23T05:50:45Z","updated_at":"2018-05-23T05:50:45Z","author_association":"MEMBER","body":"thanks @eiri - updated to remove the superfluous sort ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391228383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391312155","html_url":"https://github.com/apache/couchdb/issues/1269#issuecomment-391312155","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1269","id":391312155,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTMxMjE1NQ==","user":{"login":"lucidNTR","id":1176068,"node_id":"MDQ6VXNlcjExNzYwNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1176068?v=4","gravatar_id":"","url":"https://api.github.com/users/lucidNTR","html_url":"https://github.com/lucidNTR","followers_url":"https://api.github.com/users/lucidNTR/followers","following_url":"https://api.github.com/users/lucidNTR/following{/other_user}","gists_url":"https://api.github.com/users/lucidNTR/gists{/gist_id}","starred_url":"https://api.github.com/users/lucidNTR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucidNTR/subscriptions","organizations_url":"https://api.github.com/users/lucidNTR/orgs","repos_url":"https://api.github.com/users/lucidNTR/repos","events_url":"https://api.github.com/users/lucidNTR/events{/privacy}","received_events_url":"https://api.github.com/users/lucidNTR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-23T11:22:53Z","updated_at":"2018-05-23T11:22:53Z","author_association":"NONE","body":"@davisp any news on this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391312155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391325646","html_url":"https://github.com/apache/couchdb/issues/1293#issuecomment-391325646","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1293","id":391325646,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTMyNTY0Ng==","user":{"login":"cbonnissent","id":665588,"node_id":"MDQ6VXNlcjY2NTU4OA==","avatar_url":"https://avatars.githubusercontent.com/u/665588?v=4","gravatar_id":"","url":"https://api.github.com/users/cbonnissent","html_url":"https://github.com/cbonnissent","followers_url":"https://api.github.com/users/cbonnissent/followers","following_url":"https://api.github.com/users/cbonnissent/following{/other_user}","gists_url":"https://api.github.com/users/cbonnissent/gists{/gist_id}","starred_url":"https://api.github.com/users/cbonnissent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbonnissent/subscriptions","organizations_url":"https://api.github.com/users/cbonnissent/orgs","repos_url":"https://api.github.com/users/cbonnissent/repos","events_url":"https://api.github.com/users/cbonnissent/events{/privacy}","received_events_url":"https://api.github.com/users/cbonnissent/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-23T12:18:10Z","updated_at":"2018-05-23T12:18:10Z","author_association":"NONE","body":"Hello, \r\n\r\nI have the same issue with user creation. The first creation is OK and the following make an error 500 with this stack trace : \r\n\r\n    [error] 2018-05-22T09:07:07.613386Z couchdb@127.0.0.1 <0.17418.240> -------- rexi_server: from:   couchdb@127.0.0.1(<0.15783.240>) mfa: fabric_rpc:update_docs/3 exit:{timeout,{gen_server,call,  [couch_proc_manager,{get_proc,{doc,<<\"_design/_auth\">>, {1,[<<199,155,192,12,136,156,233,185,18,251,222,138,63,82,222,55>>]},{[{<<\"language\">>, <<\"javascript\">>},{<<\"validate_doc_update\">>,<<\"\r\n    function(newDoc, oldDoc, userCtx, secObj) {\r\n        if (newDoc._deleted === true) {\r\n            // allow deletes by admins and matching users\r\n            // without checking the other fields\r\n            if ((userCtx.roles.indexOf('_admin') !== -1) ||\r\n                (userCtx.name == oldDoc.name)) {\r\n                return;\r\n            } else {\r\n                throw({forbidden: 'Only admins may delete other user docs.'});\r\n            }\r\n        }\r\n\r\n        if (newDoc.type !== 'user') {\r\n            throw({forbidden : 'doc.type must be user'});\r\n        } // we only allow user docs for now\r\n\r\n        if (!newDoc.name) {\r\n            throw({forbidden: 'doc.name is required'});\r\n        }\r\n\r\n        if (!newDoc.roles) {\r\n            throw({forbidden: 'doc.roles must exist'});\r\n        }\r\n\r\n        if (!isArray(newDoc.roles)) {\r\n            throw({forbidden: 'doc.roles must be an array'});\r\n        }\r\n\r\n        for (var idx = 0; idx < newDoc.roles.length; idx++) {\r\n            if (typeof newDoc.roles[idx] !== 'string') {\r\n                throw({forbidden: 'doc.roles can only contain strings'});\r\n            }\r\n        }\r\n\r\n        if (newDoc._id !== ('org.couchdb.user:' + newDoc.name)) {\r\n            throw({\r\n                forbidden: 'Doc ID must be of the form org.couchdb.user:name'\r\n            });\r\n        }\r\n\r\n        if (oldDoc) { // validate all updates\r\n            if (oldDoc.name !== newDoc.name) {\r\n                throw({forbidden: 'Usernames can not be changed.'});\r\n            }\r\n        }\r\n\r\n        if (newDoc.password_sha && !newDoc.salt) {\r\n            throw({\r\n                forbidden: 'Users with password_sha must have a salt.' +\r\n                    'See /_utils/script/couch.js for example code.'\r\n            });\r\n        }\r\n\r\n        if (newDoc.password_scheme === \\\"pbkdf2\\\") {\r\n            if (typeof(newDoc.iterations) !== \\\"number\\\") {\r\n               throw({forbidden: \\\"iterations must be a number.\\\"});\r\n            }\r\n            if (typeof(newDoc.derived_key) !== \\\"string\\\") {\r\n               throw({forbidden: \\\"derived_key must be a string.\\\"});\r\n            }\r\n        }\r\n\r\n        var is_server_or_database_admin = function(userCtx, secObj) {\r\n            // see if the user is a server admin\r\n            if(userCtx.roles.indexOf('_admin') !== -1) {\r\n                return true; // a server admin\r\n            }\r\n\r\n            // see if the user a database admin specified by name\r\n            if(secObj && secObj.admins && secObj.admins.names) {\r\n                if(secObj.admins.names.indexOf(userCtx.name) !== -1) {\r\n                    return true; // database admin\r\n                }\r\n            }\r\n\r\n            // see if the user a database admin specified by role\r\n            if(secObj && secObj.admins && secObj.admins.roles) {\r\n                var db_roles = secObj.admins.roles;\r\n                for(var idx = 0; idx < userCtx.roles.length; idx++) {\r\n                    var user_role = userCtx.roles[idx];\r\n                    if(db_roles.indexOf(user_role) !== -1) {\r\n                        return true; // role matches!\r\n                    }\r\n                }\r\n            }\r\n\r\n            return false; // default to no admin\r\n        }\r\n\r\n        if (!is_server_or_database_admin(userCtx, secObj)) {\r\n            if (oldDoc) { // validate non-admin updates\r\n                if (userCtx.name !== newDoc.name) {\r\n                    throw({\r\n                        forbidden: 'You may only update your own user document.'\r\n                    });\r\n                }\r\n                // validate role updates\r\n                var oldRoles = (oldDoc.roles || []).sort();\r\n                var newRoles = newDoc.roles.sort();\r\n\r\n                if (oldRoles.length !== newRoles.length) {\r\n                    throw({forbidden: 'Only _admin may edit roles'});\r\n                }\r\n\r\n                for (var i = 0; i < oldRoles.length; i++) {\r\n                    if (oldRoles[i] !== newRoles[i]) {\r\n                        throw({forbidden: 'Only _admin may edit roles'});\r\n                    }\r\n                }\r\n            } else if (newDoc.roles.length > 0) {\r\n                throw({forbidden: 'Only _admin may set roles'});\r\n            }\r\n        }\r\n\r\n        // no system roles in users db\r\n        for (var i = 0; i < newDoc.roles.length; i++) {\r\n            if (newDoc.roles[i][0] === '_') {\r\n                throw({\r\n                    forbidden:\r\n                    'No system roles (starting with underscore) in users db.'\r\n                });\r\n            }\r\n        }\r\n\r\n        // no system names as names\r\n        if (newDoc.name[0] === '_') {\r\n            throw({forbidden: 'Username may not start with underscore.'});\r\n        }\r\n\r\n        var badUserNameChars = [':'];\r\n\r\n        for (var i = 0; i < badUserNameChars.length; i++) {\r\n            if (newDoc.name.indexOf(badUserNameChars[i]) >= 0) {\r\n                throw({forbidden: 'Character `' + badUserNameChars[i] +\r\n                        '` is not allowed in usernames.'});\r\n            }\r\n        }\r\n    }\r\n    \">>}]},[],false,[]},{<<\"_design/_auth\">>,<<\"1-c79bc00c889ce9b912fbde8a3f52de37\">>}},5000]}} [{gen_server,call,3,[{file,\"gen_server.erl\"},{line,212}]},{couch_query_servers,get_ddoc_process,2,[{file,\"src/couch_query_servers.erl\"},{line,498}]},{couch_query_servers,with_ddoc_proc,2,[{file,\"src/couch_query_servers.erl\"},{line,463}]},{couch_query_servers,validate_doc_update,5,[{file,\"src/couch_query_servers.erl\"},{line,318}]},{couch_db,'-validate_doc_update_int/3-lc$^0/1-0-',5,[{file,\"src/couch_db.erl\"},{line,784}]},{couch_db,'-validate_doc_update_int/3-fun-0-',3,[{file,\"src/couch_db.erl\"},{line,784}]},{couch_stats,update_histogram,2,[{file,\"src/couch_stats.erl\"},{line,102}]},{couch_db,'-prep_and_validate_updates/6-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,878}]}]\r\n``\r\n\r\nI have reverted the js package to the version 1.8.5-19 and it's work","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391325646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391691432","html_url":"https://github.com/apache/couchdb/issues/1338#issuecomment-391691432","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1338","id":391691432,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTY5MTQzMg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T12:12:07Z","updated_at":"2018-05-24T12:12:07Z","author_association":"CONTRIBUTOR","body":"I think that we need to specialize type of nodes for following reasons:\r\n\r\n1. we want to modernize CouchDB API and deprecate not scalable interfaces.\r\n2. we want to experiment with latest research on distributed databases\r\n3. we want to scale the parts independently\r\n4. it makes economic sense to run some types of nodes in containerized environment\r\n5. we might want to consider rich client architecture\r\n\r\nIn order to achieve `#1` we need to introduce API versioning. Since it would take time to update all clients which use CouchDB. We would have to support multiple versions of API for a while. How we can do it? Option 1) restructure the codebase to have a dispatcher module and have separate versions of modules implementing http endpoints and fabric logic. 2) split the node to `api`  and `storage` and connect them using stable (non Erlang distribution based) protocol. I do believe that second approach is better because in such case the `api` node for old version of API could be implemented using `adapter` pattern. Which makes it possible to run two versions of `api` nodes at the same time.\r\n\r\nThis architecture makes it possible to instantiate dedicated `api` nodes per user. In such case we can do:\r\n - throttle requests on `api` nodes based on the current load of `storage` layer.\r\n - place `api` nodes in VPC available to customer and tunnel traffic to storage backend\r\n - implement application firewall on `api` node\r\n - over time move authentication and authorization modules to `api` node so unauthorized requests do not reach `storage` layer at all \r\n\r\nThe same for `replicator`. We might want to support new versions of replication protocol which is based on modern fast set reconciliation algorithms. We need a way to run two versions of protocol side by side.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391691432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391749726","html_url":"https://github.com/apache/couchdb/issues/1339#issuecomment-391749726","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1339","id":391749726,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTc0OTcyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T15:08:03Z","updated_at":"2018-05-24T15:08:03Z","author_association":"MEMBER","body":"Duplicate of #1103 and #892.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391749726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391826998","html_url":"https://github.com/apache/couchdb/issues/1340#issuecomment-391826998","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1340","id":391826998,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTgyNjk5OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T19:11:39Z","updated_at":"2018-05-24T19:11:39Z","author_association":"MEMBER","body":"Duplicate of #1293.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391826998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391861526","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391861526","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391861526,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTg2MTUyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T21:03:52Z","updated_at":"2018-05-24T21:03:52Z","author_association":"MEMBER","body":"How are you launching your container? What is your host's CPU/RAM/disk setup?\r\n\r\nI don't have time to look at your database, but assuming they're straightforward views, you probably don't have enough CPUs allocated. See #1301 for instance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391861526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391888317","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391888317","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391888317,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTg4ODMxNw==","user":{"login":"pzduniak","id":917230,"node_id":"MDQ6VXNlcjkxNzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/917230?v=4","gravatar_id":"","url":"https://api.github.com/users/pzduniak","html_url":"https://github.com/pzduniak","followers_url":"https://api.github.com/users/pzduniak/followers","following_url":"https://api.github.com/users/pzduniak/following{/other_user}","gists_url":"https://api.github.com/users/pzduniak/gists{/gist_id}","starred_url":"https://api.github.com/users/pzduniak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pzduniak/subscriptions","organizations_url":"https://api.github.com/users/pzduniak/orgs","repos_url":"https://api.github.com/users/pzduniak/repos","events_url":"https://api.github.com/users/pzduniak/events{/privacy}","received_events_url":"https://api.github.com/users/pzduniak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T22:43:35Z","updated_at":"2018-05-24T22:43:41Z","author_association":"NONE","body":">How are you launching your container?\r\n\r\nDefault Docker image params + my small script, basically the couchdb-docker repo.\r\n\r\n>What is your host's CPU/RAM/disk setup?\r\n\r\nGoogle Cloud, 1 vCPU, 3.75GB of RAM, their standard 300GB disk\r\n\r\n>you probably don't have enough CPUs allocated.\r\n\r\nAre you seriously suggesting that it should take more than 4 minutes to generate views for 15 rows?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391888317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391888803","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391888803","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391888803,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTg4ODgwMw==","user":{"login":"pzduniak","id":917230,"node_id":"MDQ6VXNlcjkxNzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/917230?v=4","gravatar_id":"","url":"https://api.github.com/users/pzduniak","html_url":"https://github.com/pzduniak","followers_url":"https://api.github.com/users/pzduniak/followers","following_url":"https://api.github.com/users/pzduniak/following{/other_user}","gists_url":"https://api.github.com/users/pzduniak/gists{/gist_id}","starred_url":"https://api.github.com/users/pzduniak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pzduniak/subscriptions","organizations_url":"https://api.github.com/users/pzduniak/orgs","repos_url":"https://api.github.com/users/pzduniak/repos","events_url":"https://api.github.com/users/pzduniak/events{/privacy}","received_events_url":"https://api.github.com/users/pzduniak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T22:45:51Z","updated_at":"2018-05-24T22:45:51Z","author_association":"NONE","body":"Let me rephrase: the database doesn't start at all. The view functionality is dead. This should not happen. This is some obscure bug with Erlang failing to startup and I have not modified the scripts in the container enough to warrant any suspicion that it could happen in my code.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391888803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391889983","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391889983","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391889983,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTg4OTk4Mw==","user":{"login":"pzduniak","id":917230,"node_id":"MDQ6VXNlcjkxNzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/917230?v=4","gravatar_id":"","url":"https://api.github.com/users/pzduniak","html_url":"https://github.com/pzduniak","followers_url":"https://api.github.com/users/pzduniak/followers","following_url":"https://api.github.com/users/pzduniak/following{/other_user}","gists_url":"https://api.github.com/users/pzduniak/gists{/gist_id}","starred_url":"https://api.github.com/users/pzduniak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pzduniak/subscriptions","organizations_url":"https://api.github.com/users/pzduniak/orgs","repos_url":"https://api.github.com/users/pzduniak/repos","events_url":"https://api.github.com/users/pzduniak/events{/privacy}","received_events_url":"https://api.github.com/users/pzduniak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T22:51:38Z","updated_at":"2018-05-24T22:51:38Z","author_association":"NONE","body":"Alright, what the hell, if CouchDB can't even start on a single core (it worked just fine on 1.x), then why is this behavior accepted. Is there absolutely no way to increase the timeouts on the initial handshake or whatever?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391889983/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391900971","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391900971","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391900971,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTkwMDk3MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-24T23:57:07Z","updated_at":"2018-05-24T23:57:07Z","author_association":"MEMBER","body":"@pzduniak I'll remind you we have a [Code of Conduct](https://couchdb.apache.org/conduct.html) at this project. Please choose your words a bit more carefully. You're also getting all of this support for free. We are a volunteer-run project here.\r\n\r\n/cc @janl \r\n\r\n\"The database doesn't start at all\" vs. \"the view functionality is dead\" are two different complaints. If you are able to `GET /` and get a response back, CouchDB is running.\r\n\r\nCouchDB runs inside of Erlang. The JavaScript view functionality is provided by 1 or more additional, forked, external `couchjs` processes. When CouchDB is busy, Erlang will gladly eat an entire core, meaning you may need to provide an additional core for `couchjs`.\r\n\r\nFurther, in 2.x, the default is to split each database into 8 shards on disk. CouchDB 2.x forks a separate `couchjs` process for each of these shards, meaning your Docker container is running 8 additional, separate processes _per design document_ to build those views. More databases and more design documents mean multiplicatively more external `couchjs` processes.\r\n\r\nThere are ways to alter [how many processes can run simultaneously](http://docs.couchdb.org/en/latest/config/query-servers.html#query_server_config/limit), and ways to [adjust the number of shards for each newly created database](http://docs.couchdb.org/en/latest/api/database/common.html?highlight=shards#put--db) as well as a [global default for newly created databases](http://docs.couchdb.org/en/latest/config/cluster.html#cluster-options). You may also wish to pipeline your view builds at startup so that not all of the views are attempted to be built at once (by querying them one at a time). Finally, if you simply want to wait longer, you can increase the [os process timeout](http://docs.couchdb.org/en/latest/config/couchdb.html?highlight=os_process_timeout#couchdb/os_process_timeout), and have your startup script try multiple times to `GET` the results of a view before it gives up.\r\n\r\nIf you're looking to reduce CPU requirements, look into whether or not you can replace your views with declarative Mango secondary indexes. With the addition of [Mango-powered secondary indexes](http://docs.couchdb.org/en/latest/api/database/find.html) to CouchDB, JS views are becoming less necessary. As Mango runs inside of the Erlang process, it shares CPU with the main process more reasonably.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391900971/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391903918","html_url":"https://github.com/apache/couchdb/issues/1338#issuecomment-391903918","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1338","id":391903918,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTkwMzkxOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T00:14:58Z","updated_at":"2018-05-25T00:14:58Z","author_association":"MEMBER","body":"It occurs to me: We have some of these things already in the `GET /` response; the idea was to expose different features there. It'd be good if we surfaced these ideas via the same mechanism.\r\n\r\nStill munching over the idea in general. Other than proposing the general infrastructure for this @kocolosk are you willing to share what other roles you're considering - or alternative deployment architectures that differ from the current configuration? That would help me think about the proposal more reasonably.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391903918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391925667","html_url":"https://github.com/apache/couchdb/issues/1290#issuecomment-391925667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1290","id":391925667,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTkyNTY2Nw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T02:50:42Z","updated_at":"2018-05-25T02:50:42Z","author_association":"CONTRIBUTOR","body":"hey @smartheye, is there more needed from couchdb side? If not, I plan to close this case by the end of this week.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391925667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391945581","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391945581","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391945581,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTk0NTU4MQ==","user":{"login":"pzduniak","id":917230,"node_id":"MDQ6VXNlcjkxNzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/917230?v=4","gravatar_id":"","url":"https://api.github.com/users/pzduniak","html_url":"https://github.com/pzduniak","followers_url":"https://api.github.com/users/pzduniak/followers","following_url":"https://api.github.com/users/pzduniak/following{/other_user}","gists_url":"https://api.github.com/users/pzduniak/gists{/gist_id}","starred_url":"https://api.github.com/users/pzduniak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pzduniak/subscriptions","organizations_url":"https://api.github.com/users/pzduniak/orgs","repos_url":"https://api.github.com/users/pzduniak/repos","events_url":"https://api.github.com/users/pzduniak/events{/privacy}","received_events_url":"https://api.github.com/users/pzduniak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T05:29:58Z","updated_at":"2018-05-25T05:29:58Z","author_association":"NONE","body":"Thank you, limiting the process count seems to work. But:\r\n\r\n1) What's up with the sudden CoC mention? Are we supposed to be G-rated? Or did you think that some message was a personal attack? I just don't get it. I expressed my shock at how CouchDB has diverted from its roots. The same project that my colleague used on Raspberry Pis on farms in Africa suddenly started choking on relatively powerful hardware when it has like 10 views on barely any data, who would've thought? Maybe if 2.x breaks so easily, a dynamic default should be used for the process limit, probably one scaling with the CPU count? For example, Go doesn't spawn \"up to 100 processes\" when it starts up a hello world app.\r\n\r\n2) There were no docs to assist me. A guy on IRC had to tell me about the existence of something called \"fabric\" (that I still don't know what it is, I only know that it has a setting that I had to increase), which is nearly unmentioned in the docs (I only found some references in the changelog). Additionally, I feel like there should be a huge disclaimer that says \"the software might break if you run it on perfectly fine 2 server cores, please change the following settings to prevent it\" somewhere in the docs.\r\n\r\n3) Additionally, it feels like my issue was discarded nearly immediately without anyone looking into the actual configuration. Out of 3 interlinked issues, 1 was someone starving the database on purpose (50MB of RAM, come on), 1 person with a non-insignificant amount of data and 1 person dealing with different behaviour (degradation vs startup issue). Most of the timeouts that you've suggested were already in place.\r\n\r\nI still believe that what I reported _is_ a valid issue. CouchDB somehow manages to break its startup process by spawning tens of compute-hungry processes, even if only 1-2 cores are available. Is 2.x only supposed to be run on beefy servers now? A product that I'm working on (where I was forced to use CouchDB to in fact limit resource usage) started out with 1.x running on mobile servers (think notebook CPUs in small boxes) that are used to deliver educational content to students in developing countries. It would be a shame if I had to rewrite the database interaction layer just because it's impossible to both use modern features of CouchDB and have any reliability on slower hardware.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391945581/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391976422","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-391976422","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":391976422,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MTk3NjQyMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T08:09:54Z","updated_at":"2018-05-25T08:09:54Z","author_association":"MEMBER","body":"> I expressed my shock at how CouchDB has diverted from its roots.\r\n\r\nLet me express my shock at your analysis of this in light of insufficient data.\r\n\r\nAs for the CoC mention, I’m not issuing a formal notice yet, but keep the aggressive undertone out of this please. If you don’t get what I mean, let someone who you trust read over what you wrote and see if they can find what we see. I’m not suggesting your feelings aren’t warranted here, but you express them in a way we usually don’t conduct communication in this project. We appreciate your cooperation. In general: if you expect support from someone, best not antagonise them up front, however warranted. We are all doing this in our spare time and getting on our nerves is the easiest way to get ignored here ;) — As for quickly closing issues: it’s just how we do things here to make sure we give everyone the same amount of attention. If you can’t live with your issues being closed while we wait for more info, I can’t help you.\r\n\r\nFor the technical stuff.\r\n\r\nAbove anything we don’t recommend running CouchDB in Docker for reasons that have nothing to do with CouchDB and everything to do with the Docker ecosystem not being mature enough to handle low latency network and io-bound applications to a degree that would make us comfortable. That said, there are happy Docker CouchDB users, and I don’t want to discourage them being successful with their configurations.\r\n\r\n> CouchDB somehow manages to break its startup process by spawning tens of compute-hungry processes\r\n\r\nCouchDB startup succeeds just fine, otherwise you wouldn’t get to the error messages you are seeing.\r\n\r\n> There were no docs to assist me\r\n\r\nThis point is well taken. CouchDB is designed to run on beefy servers and CouchDB 2.x especially so. That doesn’t mean it can also run on low-spec hardware, but the defaults are not set that way (unless you follow one of the documented setup paths, which you aren't). What’s lacking are docs on configuring CouchDB 2 for low-spec hardware. I’m sorry that’s the case, and once you work through all this, we gladly accept a PR to the docs.\r\n\r\n(FWIW: replying to this issue was eating about all the time I can spend on CouchDB for a couple of days, so don’t expect rapid follow-ups here).\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/391976422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392004915","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-392004915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":392004915,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjAwNDkxNQ==","user":{"login":"pzduniak","id":917230,"node_id":"MDQ6VXNlcjkxNzIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/917230?v=4","gravatar_id":"","url":"https://api.github.com/users/pzduniak","html_url":"https://github.com/pzduniak","followers_url":"https://api.github.com/users/pzduniak/followers","following_url":"https://api.github.com/users/pzduniak/following{/other_user}","gists_url":"https://api.github.com/users/pzduniak/gists{/gist_id}","starred_url":"https://api.github.com/users/pzduniak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pzduniak/subscriptions","organizations_url":"https://api.github.com/users/pzduniak/orgs","repos_url":"https://api.github.com/users/pzduniak/repos","events_url":"https://api.github.com/users/pzduniak/events{/privacy}","received_events_url":"https://api.github.com/users/pzduniak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T10:00:34Z","updated_at":"2018-05-25T10:39:02Z","author_association":"NONE","body":">CouchDB is designed to run on beefy servers and CouchDB 2.x especially so.\r\n\r\nHuh, my bad then, seems like the applications that I've worked on where Couch's replication was the perfect solution (replication over intermittent connectivity on \"edge deployments\" and stuff like that) weren't what the project was made for. Looks like PouchDB took over that role after it matured?\r\n\r\n>That doesn’t mean it can also run on low-spec hardware, but the defaults are not set that way (unless you follow one of the documented setup paths, which you aren't).\r\n\r\nDo you mean http://docs.couchdb.org/en/2.1.1/config/query-servers.html#query_server_config/os_process_limit? I'm struggling to find anything else.\r\n\r\nAs much as being overly PC conflicts my nature (and culture!), whatever, I can do that. Thank you for maintaining the project, I wish you didn't jump to a Code of Conduct as soon as you see something that you don't like. Just correct the person instead of making threats (of _a notice_). No one's trying to attack you, no one is trying to undermine your competence. Different people talk in different ways, in the end we all want mostly the same thing.\r\n\r\nOh, also, writing a paragraph about your issue workflow might be useful for the CONTRIBUTING.md - I'm used to issues staying open until either of the sides marks them as resolved, unless they're blatantly invalid (or duplicate).\r\n\r\nEDIT: That got lost in a few iterations of the comment trying to be PC: sorry if you felt attacked, I usually don't deal with projects with such a strict CoC (if any, usually meritocracy is sufficient).\r\n\r\nEDIT2: Oh wow, I just realized how you interpreted my comments. I'm talking about the code. Not about you. Code. I'm surprised by how the code works. Not your comments. The comment about accepting behavior was about the code too. And by closing the issue I feel like you \"accept\" it. It's a bug for me - it may not be for you. That's cool, I'm not the maintainer, you have the power. I got that it's by design (or lack of safety guards for an edge case), there's no point in offending me too :^)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392004915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392100227","html_url":"https://github.com/apache/couchdb/issues/1341#issuecomment-392100227","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1341","id":392100227,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjEwMDIyNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T15:47:19Z","updated_at":"2018-05-25T15:47:19Z","author_association":"MEMBER","body":"I will open a new ticket on documenting being successful configuring and running CouchDB on low-spec hardware configurations.\r\n\r\nFWIW @chewbranca and I both run CouchDB 2.x just fine on Raspberry Pis (but don't use the JavaScript view engine at all!)\r\n\r\nSs to bringing up the CoC: The Apache Software Foundation has a saying: **Code is community**. You act disrespectful to the code, you are acting disrespectful to the community. We have a lot going on here, as you can see from IRC, Slack, our issue tracker, the repositories, the mailing lists, and so on. We are all volunteers. Trying to solve your issues shouldn't also have to tolerate being yelled at while we do it. This isn't about being PC, it's about being polite. Try holding back your anger for a little longer next time - you might find you'll get better help.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392100227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392141033","html_url":"https://github.com/apache/couchdb/issues/1338#issuecomment-392141033","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1338","id":392141033,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjE0MTAzMw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-25T18:21:04Z","updated_at":"2018-05-25T18:21:04Z","author_association":"MEMBER","body":"Good point on the capabilities thing in the `GET /` response @wohali.\r\n\r\nThe gist of my thinking is to make it possible to have the different capabilities inside a CouchDB cluster delivered by processes that have a slightly higher degree of isolation between them (say, separate containers). I think the best ROI comes from these different groupings:\r\n\r\n1. `replicator` - replication jobs can be fairly resource-intensive on the cluster node where they are mediated. Technically one could just spin up a separate cluster for running replications (and that's not a bad idea) but this would enable some isolation of the replication resources without any changes to the API.\r\n2. `coordinator` / `api` (I like @iilyak 's suggestion on the name here) - these containers would have just enough ephemeral storage to hold the internal databases like `/_nodes` and `/_dbs` that are replicated to every node. They would handle client TCP connections, run the `chttpd` logic, and submit `fabric_rpc` requests to the `storage` nodes hosting the actual user data. One could auto-scale this group up and down, although we'd likely want to make the `/_up` endpoint smarter so a load balancer in front of this tier could automatically determine when a new `api` container is actually ready to start handling requests (i.e., it has replicated the full content of `/_nodes` and `/_dbs`).\r\n3. `storage` - these containers would not do any clustered coordination or HTTP traffic; they would simply receive `fabric_rpc` requests coming in on `rexi_server` and respond to them. (Of course we could leave the fabric and chttpd apps running for debugging purposes here, but the point is that the workload running on this container is simpler.\r\n4 `compute` / `functions` - this would be a future  item, but if we could iterate on the view server protocol and come up with something that made sense over the wire I could see running an autoscaled pool of JS processes separated from the `storage` containers. This could give us some additional sandboxing tools and also allow for an easier and more efficient response to variable compute demands.\r\n\r\nIn this design steps 1-3 don't change anything about the communication protocols and interfaces used to communicate between different parts of the stack inside CouchDB. Each of those containers is a full Erlang VM and a full member of the distributed Erlang cluster. In the future it may well make sense to investigate some alternatives there but no changes would be required initially.\r\n\r\nDoes that help?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392141033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392277913","html_url":"https://github.com/apache/couchdb/issues/1343#issuecomment-392277913","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1343","id":392277913,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjI3NzkxMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-26T18:03:00Z","updated_at":"2018-05-26T18:03:00Z","author_association":"MEMBER","body":"@codeyash The convenience binaries for CouchDB are only semi-official.\r\n\r\nWhether that ticket is open or not, the work is ongoing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392277913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392335166","html_url":"https://github.com/apache/couchdb/issues/755#issuecomment-392335166","issue_url":"https://api.github.com/repos/apache/couchdb/issues/755","id":392335166,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjMzNTE2Ng==","user":{"login":"touy","id":122671,"node_id":"MDQ6VXNlcjEyMjY3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/122671?v=4","gravatar_id":"","url":"https://api.github.com/users/touy","html_url":"https://github.com/touy","followers_url":"https://api.github.com/users/touy/followers","following_url":"https://api.github.com/users/touy/following{/other_user}","gists_url":"https://api.github.com/users/touy/gists{/gist_id}","starred_url":"https://api.github.com/users/touy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/touy/subscriptions","organizations_url":"https://api.github.com/users/touy/orgs","repos_url":"https://api.github.com/users/touy/repos","events_url":"https://api.github.com/users/touy/events{/privacy}","received_events_url":"https://api.github.com/users/touy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-27T14:30:55Z","updated_at":"2018-05-27T14:30:55Z","author_association":"NONE","body":"I have a similar problem , newer doc could not be in the result of the view \r\n_view/byIMEIGPSYEARMONTHDATE?&key=[[2018,5,27],\"027029927506\"]&limit=1&reduce=false\r\n\r\nbut it could show any result on 2018,5,11 \r\nthis day  I made a compact and back up ,but event I restore the data to other server the result of 2018,5,27 still not being shown , what Is the real problem here ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392335166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392392073","html_url":"https://github.com/apache/couchdb/issues/755#issuecomment-392392073","issue_url":"https://api.github.com/repos/apache/couchdb/issues/755","id":392392073,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjM5MjA3Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T00:38:48Z","updated_at":"2018-05-28T00:38:48Z","author_association":"MEMBER","body":"@wonderfuljamesjin @touy GitHub issues is for bug reports, not for usage questions. This doesn't look like an actual bug in the software, but rather something that can be handled by our user mailing list or IRC/Slack channel.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392392073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392425012","html_url":"https://github.com/apache/couchdb/issues/1343#issuecomment-392425012","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1343","id":392425012,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjQyNTAxMg==","user":{"login":"codeyash","id":654242,"node_id":"MDQ6VXNlcjY1NDI0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/654242?v=4","gravatar_id":"","url":"https://api.github.com/users/codeyash","html_url":"https://github.com/codeyash","followers_url":"https://api.github.com/users/codeyash/followers","following_url":"https://api.github.com/users/codeyash/following{/other_user}","gists_url":"https://api.github.com/users/codeyash/gists{/gist_id}","starred_url":"https://api.github.com/users/codeyash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codeyash/subscriptions","organizations_url":"https://api.github.com/users/codeyash/orgs","repos_url":"https://api.github.com/users/codeyash/repos","events_url":"https://api.github.com/users/codeyash/events{/privacy}","received_events_url":"https://api.github.com/users/codeyash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T05:43:52Z","updated_at":"2018-05-28T05:43:52Z","author_association":"NONE","body":"Any expected date please?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392425012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392562969","html_url":"https://github.com/apache/couchdb/issues/755#issuecomment-392562969","issue_url":"https://api.github.com/repos/apache/couchdb/issues/755","id":392562969,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjU2Mjk2OQ==","user":{"login":"touy","id":122671,"node_id":"MDQ6VXNlcjEyMjY3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/122671?v=4","gravatar_id":"","url":"https://api.github.com/users/touy","html_url":"https://github.com/touy","followers_url":"https://api.github.com/users/touy/followers","following_url":"https://api.github.com/users/touy/following{/other_user}","gists_url":"https://api.github.com/users/touy/gists{/gist_id}","starred_url":"https://api.github.com/users/touy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/touy/subscriptions","organizations_url":"https://api.github.com/users/touy/orgs","repos_url":"https://api.github.com/users/touy/repos","events_url":"https://api.github.com/users/touy/events{/privacy}","received_events_url":"https://api.github.com/users/touy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T16:09:22Z","updated_at":"2018-05-28T16:09:22Z","author_association":"NONE","body":"yes, today I recheck my code, then found that I put {docs:arr} to a single insert function not a bulk function, it was my mistake and took me days to fix it , ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392562969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392606714","html_url":"https://github.com/apache/couchdb/issues/1326#issuecomment-392606714","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1326","id":392606714,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYwNjcxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T21:35:27Z","updated_at":"2018-05-28T21:35:27Z","author_association":"MEMBER","body":"If you can provide a reproducible test case, we can look at this...otherwise there's nothing we can do.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392606714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392607955","html_url":"https://github.com/apache/couchdb/issues/1226#issuecomment-392607955","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1226","id":392607955,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYwNzk1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T21:47:21Z","updated_at":"2018-05-28T21:47:21Z","author_association":"MEMBER","body":"@eiri any progress on this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392607955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392608179","html_url":"https://github.com/apache/couchdb/issues/1342#issuecomment-392608179","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1342","id":392608179,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYwODE3OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T21:49:42Z","updated_at":"2018-05-28T21:49:42Z","author_association":"MEMBER","body":"CouchDB is an eventually consistent datastore. No guarantees are provided that you will read-your-writes. There are scenarios, even with n=2 and w=2, where a degraded or overloaded node can still result in you failing to see your write materialised in a view's results.\r\n\r\nYou can try doing all your writes with `?w=3` as a partial workaround, but again, there is no guarantee this will work 100% of the time, especially in a degraded state.\r\n\r\nProposals have existed for years on adding RYW functionality to CouchDB, but nothing has landed yet. One discussion from 2009 [is here](https://lists.apache.org/thread.html/4efb725b6cc2cf034e4c8ca50788c1d4459a3b09f7450bd97d9b0d54@1234751430@%3Cdev.couchdb.apache.org%3E).\r\n\r\nOne bit of work in progress that might help you is the return of view etag support, which is [in progress](https://github.com/apache/couchdb/issues/1226).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392608179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392615493","html_url":"https://github.com/apache/couchdb/issues/1226#issuecomment-392615493","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1226","id":392615493,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYxNTQ5Mw==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T23:14:34Z","updated_at":"2018-05-28T23:14:34Z","author_association":"MEMBER","body":"@wohali I thought we agreed not to move it forward until 2.2.0 is out? The actual work is done and I have a half of the tests completed locally, but then switched to a different work waiting for the release. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392615493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392616416","html_url":"https://github.com/apache/couchdb/pull/1347#issuecomment-392616416","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1347","id":392616416,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYxNjQxNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T23:26:17Z","updated_at":"2018-05-28T23:26:17Z","author_association":"MEMBER","body":"As @janl said before, no one else is helping with the build effort, so I'm +1'ing this myself. (It's also, strictly speaking, not a change to our release/running code.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392616416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392617528","html_url":"https://github.com/apache/couchdb/issues/1293#issuecomment-392617528","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1293","id":392617528,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjYxNzUyOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-28T23:39:15Z","updated_at":"2018-05-29T21:13:02Z","author_association":"MEMBER","body":"~As early advice to anyone bitten by this bug, once you have the CouchDB repo added to your install, you can just:~\r\n\r\n~yum install -y couch-js~\r\n\r\n~to get a working library that replaces the broken one from CentOS.~\r\n\r\n~The very next push of CouchDB builds to the repo will require this new `couch-js` package instead of the `js` package. These builds are done - and are undergoing upgrade testing right now. They will be released shortly.~\r\n\r\nPackages have been temporarily removed due to conflicts with the js package and the old CouchDB .rpms. Once I have finished testing the new CouchDB .rpms I will re-publish these packages. Sorry for the inconvenience.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392617528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392657143","html_url":"https://github.com/apache/couchdb/issues/1350#issuecomment-392657143","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1350","id":392657143,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjY1NzE0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T05:30:16Z","updated_at":"2018-05-29T05:30:16Z","author_association":"MEMBER","body":"I was hoping I'd fix this before anyone noticed :)\r\n\r\nI'm working on fixing #1293. This problem will be resolved in a few hours. Sorry for the inconvenience.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392657143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392657308","html_url":"https://github.com/apache/couchdb/issues/1226#issuecomment-392657308","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1226","id":392657308,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjY1NzMwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T05:31:27Z","updated_at":"2018-05-29T05:31:27Z","author_association":"MEMBER","body":"Yes agreed :) I just was curious if you'd finished the tests or if a branch was pushed with the work, that's all.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392657308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392667138","html_url":"https://github.com/apache/couchdb/issues/1351#issuecomment-392667138","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1351","id":392667138,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjY2NzEzOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T06:32:27Z","updated_at":"2018-05-29T06:32:27Z","author_association":"MEMBER","body":"emfile often means too many open files. Can you try increasing your ulimit for files (`ulimit -n`) beyond the default 4096?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392667138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392667428","html_url":"https://github.com/apache/couchdb/issues/1349#issuecomment-392667428","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1349","id":392667428,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjY2NzQyOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T06:34:00Z","updated_at":"2018-05-29T06:34:00Z","author_association":"MEMBER","body":"Multiple failures now on this, see:\r\n\r\nhttps://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/master/256/pipeline/45\r\nhttps://couchdb-vm2.apache.org/ci_errorlogs/jenkins-couchdb-256-2018-05-29T05:47:44.109317/couchlog.tar.gz\r\n\r\nhttps://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/master/257/pipeline/47\r\nhttps://couchdb-vm2.apache.org/ci_errorlogs/jenkins-couchdb-257-2018-05-29T06:27:54.367624/couchlog.tar.gz\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392667428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392672183","html_url":"https://github.com/apache/couchdb/issues/1349#issuecomment-392672183","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1349","id":392672183,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjY3MjE4Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T06:57:44Z","updated_at":"2018-05-29T06:57:44Z","author_association":"MEMBER","body":"Again:\r\n\r\nhttps://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/master/258/pipeline/46\r\nhttps://couchdb-vm2.apache.org/ci_errorlogs/****-couchdb-258-2018-05-29T06:56:52.681510/couchlog.tar.gz\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392672183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392692130","html_url":"https://github.com/apache/couchdb/issues/1351#issuecomment-392692130","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1351","id":392692130,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MjY5MjEzMA==","user":{"login":"abdasgupta","id":15626057,"node_id":"MDQ6VXNlcjE1NjI2MDU3","avatar_url":"https://avatars.githubusercontent.com/u/15626057?v=4","gravatar_id":"","url":"https://api.github.com/users/abdasgupta","html_url":"https://github.com/abdasgupta","followers_url":"https://api.github.com/users/abdasgupta/followers","following_url":"https://api.github.com/users/abdasgupta/following{/other_user}","gists_url":"https://api.github.com/users/abdasgupta/gists{/gist_id}","starred_url":"https://api.github.com/users/abdasgupta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdasgupta/subscriptions","organizations_url":"https://api.github.com/users/abdasgupta/orgs","repos_url":"https://api.github.com/users/abdasgupta/repos","events_url":"https://api.github.com/users/abdasgupta/events{/privacy}","received_events_url":"https://api.github.com/users/abdasgupta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-05-29T08:17:42Z","updated_at":"2018-05-29T08:17:42Z","author_association":"NONE","body":"Hi @wohali \r\n\r\nAll test cases are passing now after increasing the ulimit to 188898 . I am closing this issue as it is resolved. Thank you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/392692130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]