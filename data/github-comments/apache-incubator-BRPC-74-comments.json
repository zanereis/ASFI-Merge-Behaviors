[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2128949264","html_url":"https://github.com/apache/brpc/pull/2602#issuecomment-2128949264","issue_url":"https://api.github.com/repos/apache/brpc/issues/2602","id":2128949264,"node_id":"IC_kwDOBhmkcs5-5TAQ","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-24T08:40:14Z","updated_at":"2024-05-24T08:40:14Z","author_association":"MEMBER","body":"Hi, let's merge this? ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2128949264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2129192263","html_url":"https://github.com/apache/brpc/pull/2602#issuecomment-2129192263","issue_url":"https://api.github.com/repos/apache/brpc/issues/2602","id":2129192263,"node_id":"IC_kwDOBhmkcs5-6OVH","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-24T10:27:10Z","updated_at":"2024-05-24T10:27:10Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 这个PR应该可以合了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2129192263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132281391","html_url":"https://github.com/apache/brpc/pull/2634#issuecomment-2132281391","issue_url":"https://api.github.com/repos/apache/brpc/issues/2634","id":2132281391,"node_id":"IC_kwDOBhmkcs5_GAgv","user":{"login":"j05070415","id":7128724,"node_id":"MDQ6VXNlcjcxMjg3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7128724?v=4","gravatar_id":"","url":"https://api.github.com/users/j05070415","html_url":"https://github.com/j05070415","followers_url":"https://api.github.com/users/j05070415/followers","following_url":"https://api.github.com/users/j05070415/following{/other_user}","gists_url":"https://api.github.com/users/j05070415/gists{/gist_id}","starred_url":"https://api.github.com/users/j05070415/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j05070415/subscriptions","organizations_url":"https://api.github.com/users/j05070415/orgs","repos_url":"https://api.github.com/users/j05070415/repos","events_url":"https://api.github.com/users/j05070415/events{/privacy}","received_events_url":"https://api.github.com/users/j05070415/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-26T16:42:14Z","updated_at":"2024-05-26T16:42:14Z","author_association":"NONE","body":"谢谢，您的邮件我已收到！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132281391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132545658","html_url":"https://github.com/apache/brpc/issues/2636#issuecomment-2132545658","issue_url":"https://api.github.com/repos/apache/brpc/issues/2636","id":2132545658,"node_id":"IC_kwDOBhmkcs5_HBB6","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-27T02:44:06Z","updated_at":"2024-05-27T02:44:06Z","author_association":"CONTRIBUTOR","body":"目前只支持不回包的请求。\r\n\r\n什么场景需要支持回包的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132545658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132556055","html_url":"https://github.com/apache/brpc/pull/2610#issuecomment-2132556055","issue_url":"https://api.github.com/repos/apache/brpc/issues/2610","id":2132556055,"node_id":"IC_kwDOBhmkcs5_HDkX","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-27T02:58:54Z","updated_at":"2024-05-27T02:58:54Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 这个PR还有问题吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132556055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132705346","html_url":"https://github.com/apache/brpc/pull/2602#issuecomment-2132705346","issue_url":"https://api.github.com/repos/apache/brpc/issues/2602","id":2132705346,"node_id":"IC_kwDOBhmkcs5_HoBC","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-27T06:04:27Z","updated_at":"2024-05-27T06:04:27Z","author_association":"MEMBER","body":"这里对日志时间的影响是可接收的吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132705346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132713933","html_url":"https://github.com/apache/brpc/pull/2602#issuecomment-2132713933","issue_url":"https://api.github.com/repos/apache/brpc/issues/2602","id":2132713933,"node_id":"IC_kwDOBhmkcs5_HqHN","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-27T06:11:55Z","updated_at":"2024-05-27T06:11:55Z","author_association":"CONTRIBUTOR","body":"日志时间应该是跟原来一样的，只影响落盘时间。\r\n\r\nhttps://github.com/apache/brpc/blob/bdc141c9e4f287f3b6e6397e09ea821838d273ee/src/butil/logging.cc#L1308-L1314","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132713933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132771624","html_url":"https://github.com/apache/brpc/issues/2636#issuecomment-2132771624","issue_url":"https://api.github.com/repos/apache/brpc/issues/2636","id":2132771624,"node_id":"IC_kwDOBhmkcs5_H4Mo","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-27T06:56:23Z","updated_at":"2024-05-27T06:56:23Z","author_association":"NONE","body":"> 目前只支持不回包的请求。\r\n> \r\n> 什么场景需要支持回包的？\r\n\r\n有时候想完全忽略回包, 但是还是需要自己new cntl, new repsonse, 还要在 done Closure中 删除cntl, response","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2132771624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2133669737","html_url":"https://github.com/apache/brpc/issues/2052#issuecomment-2133669737","issue_url":"https://api.github.com/repos/apache/brpc/issues/2052","id":2133669737,"node_id":"IC_kwDOBhmkcs5_LTdp","user":{"login":"ballontt","id":4750065,"node_id":"MDQ6VXNlcjQ3NTAwNjU=","avatar_url":"https://avatars.githubusercontent.com/u/4750065?v=4","gravatar_id":"","url":"https://api.github.com/users/ballontt","html_url":"https://github.com/ballontt","followers_url":"https://api.github.com/users/ballontt/followers","following_url":"https://api.github.com/users/ballontt/following{/other_user}","gists_url":"https://api.github.com/users/ballontt/gists{/gist_id}","starred_url":"https://api.github.com/users/ballontt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ballontt/subscriptions","organizations_url":"https://api.github.com/users/ballontt/orgs","repos_url":"https://api.github.com/users/ballontt/repos","events_url":"https://api.github.com/users/ballontt/events{/privacy}","received_events_url":"https://api.github.com/users/ballontt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-27T15:09:28Z","updated_at":"2024-05-27T15:09:28Z","author_association":"NONE","body":"> 1. ，使用 cut() 函数避免 copy，直接引用 iobuf 中的数据来 deserialize，避免原来\r\n\r\n请教一下，接收端如何使用cut来避免copy？brpc中的cutn()函数实现都是有copy的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2133669737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2134433391","html_url":"https://github.com/apache/brpc/pull/2634#issuecomment-2134433391","issue_url":"https://api.github.com/repos/apache/brpc/issues/2634","id":2134433391,"node_id":"IC_kwDOBhmkcs5_ON5v","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-28T06:24:55Z","updated_at":"2024-05-28T06:24:55Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2134433391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2136879471","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-2136879471","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":2136879471,"node_id":"IC_kwDOBhmkcs5_XjFv","user":{"login":"ballontt","id":4750065,"node_id":"MDQ6VXNlcjQ3NTAwNjU=","avatar_url":"https://avatars.githubusercontent.com/u/4750065?v=4","gravatar_id":"","url":"https://api.github.com/users/ballontt","html_url":"https://github.com/ballontt","followers_url":"https://api.github.com/users/ballontt/followers","following_url":"https://api.github.com/users/ballontt/following{/other_user}","gists_url":"https://api.github.com/users/ballontt/gists{/gist_id}","starred_url":"https://api.github.com/users/ballontt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ballontt/subscriptions","organizations_url":"https://api.github.com/users/ballontt/orgs","repos_url":"https://api.github.com/users/ballontt/repos","events_url":"https://api.github.com/users/ballontt/events{/privacy}","received_events_url":"https://api.github.com/users/ballontt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-29T08:47:42Z","updated_at":"2024-05-29T08:47:42Z","author_association":"NONE","body":"mark\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2136879471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2137649026","html_url":"https://github.com/apache/brpc/issues/2653#issuecomment-2137649026","issue_url":"https://api.github.com/repos/apache/brpc/issues/2653","id":2137649026,"node_id":"IC_kwDOBhmkcs5_ae-C","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-29T15:07:29Z","updated_at":"2024-05-29T15:07:29Z","author_association":"CONTRIBUTOR","body":"这里“作为指标暴露出去”是指期望怎么暴露？使用场景的话，比如可以用builtin service看这个bvar，访问 http://ip:internal_port/vars/process_username 就可以看到这个bvar对应的值。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2137649026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2137705599","html_url":"https://github.com/apache/brpc/issues/2652#issuecomment-2137705599","issue_url":"https://api.github.com/repos/apache/brpc/issues/2652","id":2137705599,"node_id":"IC_kwDOBhmkcs5_asx_","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-29T15:33:17Z","updated_at":"2024-05-29T15:33:17Z","author_association":"CONTRIBUTOR","body":"目前是生产环境遇到了什么问题吗？\r\n\r\n依赖管理角度的话，确实可以支持一个编译参数关闭对leveldb的依赖。\r\n\r\n切换rocksdb我觉得需要看看实际的遇到问题是什么，rocksdb确实比leveldb在很多地方都有优化，但也导致了它整个实现是比较复杂的，要看引入的必要性了。在rpcz这个场景我个人觉得leveldb是够用的，切换到rocksdb的好处是什么呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2137705599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2137742497","html_url":"https://github.com/apache/brpc/issues/2652#issuecomment-2137742497","issue_url":"https://api.github.com/repos/apache/brpc/issues/2652","id":2137742497,"node_id":"IC_kwDOBhmkcs5_a1yh","user":{"login":"corznoc","id":63059433,"node_id":"MDQ6VXNlcjYzMDU5NDMz","avatar_url":"https://avatars.githubusercontent.com/u/63059433?v=4","gravatar_id":"","url":"https://api.github.com/users/corznoc","html_url":"https://github.com/corznoc","followers_url":"https://api.github.com/users/corznoc/followers","following_url":"https://api.github.com/users/corznoc/following{/other_user}","gists_url":"https://api.github.com/users/corznoc/gists{/gist_id}","starred_url":"https://api.github.com/users/corznoc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/corznoc/subscriptions","organizations_url":"https://api.github.com/users/corznoc/orgs","repos_url":"https://api.github.com/users/corznoc/repos","events_url":"https://api.github.com/users/corznoc/events{/privacy}","received_events_url":"https://api.github.com/users/corznoc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-29T15:50:42Z","updated_at":"2024-05-29T15:50:42Z","author_association":"NONE","body":"用的挺好的，没有遇到问题，rocksdb我也觉得复杂了些，只是leveldb公司不让用了😀-------- 原始邮件 --------发件人： LorinLee ***@***.***>日期： 2024年5月29日周三 23:33收件人： apache/brpc ***@***.***>抄送： corznoc ***@***.***>, Author ***@***.***>主    题： Re: [apache/brpc] leveldb已经老旧化，是否考虑切到rocksdb (Issue #2652)\r\n目前是生产环境遇到了什么问题吗？\r\n依赖管理角度的话，确实可以支持一个编译参数关闭对leveldb的依赖。\r\n切换rocksdb我觉得需要看看实际的遇到问题是什么，rocksdb确实比leveldb在很多地方都有优化，但也导致了它整个实现是比较复杂的，要看引入的必要性了。在rpcz这个场景我个人觉得leveldb是够用的，切换到rocksdb的好处是什么呢\r\n\r\n—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2137742497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2138550242","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2138550242","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2138550242,"node_id":"IC_kwDOBhmkcs5_d6_i","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-30T02:17:18Z","updated_at":"2024-05-30T02:17:18Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 也看看这个PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2138550242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2138558460","html_url":"https://github.com/apache/brpc/issues/2650#issuecomment-2138558460","issue_url":"https://api.github.com/repos/apache/brpc/issues/2650","id":2138558460,"node_id":"IC_kwDOBhmkcs5_d8_8","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-30T02:27:20Z","updated_at":"2024-05-30T02:27:20Z","author_association":"CONTRIBUTOR","body":"请问jemalloc是什么版本？NUMA配的cpu分配策略和内存分配策略是什么？另外可以开启ASAN跑一下吗，不确定是不是其他地方的内存踩坏导致这里出错","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2138558460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2141045529","html_url":"https://github.com/apache/brpc/issues/2405#issuecomment-2141045529","issue_url":"https://api.github.com/repos/apache/brpc/issues/2405","id":2141045529,"node_id":"IC_kwDOBhmkcs5_ncMZ","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T00:31:54Z","updated_at":"2024-05-31T00:31:54Z","author_association":"CONTRIBUTOR","body":"功能3的意思是用户可以不用pb协议，使用其它类型协议也可以是吗？c++客户端到服务端直接这样可以吗？中间不用加一层代理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2141045529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2141089142","html_url":"https://github.com/apache/brpc/issues/2405#issuecomment-2141089142","issue_url":"https://api.github.com/repos/apache/brpc/issues/2405","id":2141089142,"node_id":"IC_kwDOBhmkcs5_nm12","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T01:36:03Z","updated_at":"2024-05-31T01:36:03Z","author_association":"CONTRIBUTOR","body":"> 用户可以不用pb协议，使用其它类型协议也可以是吗？\r\n\r\n要求能跟pb互转，例如json。\r\n\r\n> c++客户端到服务端直接这样可以吗？\r\n\r\n可以的。HTTP body类似。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2141089142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2141183108","html_url":"https://github.com/apache/brpc/pull/2560#issuecomment-2141183108","issue_url":"https://api.github.com/repos/apache/brpc/issues/2560","id":2141183108,"node_id":"IC_kwDOBhmkcs5_n9yE","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-31T03:47:59Z","updated_at":"2024-05-31T03:47:59Z","author_association":"CONTRIBUTOR","body":"rebase解决冲突","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2141183108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2143409006","html_url":"https://github.com/apache/brpc/issues/2405#issuecomment-2143409006","issue_url":"https://api.github.com/repos/apache/brpc/issues/2405","id":2143409006,"node_id":"IC_kwDOBhmkcs5_wdNu","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-01T11:09:56Z","updated_at":"2024-06-01T11:09:56Z","author_association":"CONTRIBUTOR","body":"为啥需要和pb互转呢？我理解这个过程bRPC完全透传了用户的消息，不用做任何处理，就类似attachment。\r\nbRPC只处理baidu_std这层协议使用的是pb。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2143409006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2143682622","html_url":"https://github.com/apache/brpc/issues/2654#issuecomment-2143682622","issue_url":"https://api.github.com/repos/apache/brpc/issues/2654","id":2143682622,"node_id":"IC_kwDOBhmkcs5_xgA-","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-02T03:31:16Z","updated_at":"2024-06-02T03:31:16Z","author_association":"CONTRIBUTOR","body":"Sorry, at the moment, there are no development plans related to this feature. We are very welcoming of your initiative to submit a Pull Request.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2143682622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2143792989","html_url":"https://github.com/apache/brpc/issues/1241#issuecomment-2143792989","issue_url":"https://api.github.com/repos/apache/brpc/issues/1241","id":2143792989,"node_id":"IC_kwDOBhmkcs5_x69d","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-02T10:34:37Z","updated_at":"2024-06-02T10:34:37Z","author_association":"CONTRIBUTOR","body":"vx：chao10001，求拉谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2143792989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144584435","html_url":"https://github.com/apache/brpc/pull/2610#issuecomment-2144584435","issue_url":"https://api.github.com/repos/apache/brpc/issues/2610","id":2144584435,"node_id":"IC_kwDOBhmkcs5_08Lz","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:24:07Z","updated_at":"2024-06-03T08:24:07Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144584435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144591854","html_url":"https://github.com/apache/brpc/issues/2652#issuecomment-2144591854","issue_url":"https://api.github.com/repos/apache/brpc/issues/2652","id":2144591854,"node_id":"IC_kwDOBhmkcs5_09_u","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:27:47Z","updated_at":"2024-06-03T08:27:47Z","author_association":"CONTRIBUTOR","body":"可以考虑抽象出一个存储接口，默认提供leveldb实现，如果用户有需要可以自己实现这个接口。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144591854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144615693","html_url":"https://github.com/apache/brpc/issues/2656#issuecomment-2144615693","issue_url":"https://api.github.com/repos/apache/brpc/issues/2656","id":2144615693,"node_id":"IC_kwDOBhmkcs5_1D0N","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:37:25Z","updated_at":"2024-06-03T08:37:25Z","author_association":"CONTRIBUTOR","body":"这些变量应该是框架设置的，用户不需要设置。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144615693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144621453","html_url":"https://github.com/apache/brpc/issues/2658#issuecomment-2144621453","issue_url":"https://api.github.com/repos/apache/brpc/issues/2658","id":2144621453,"node_id":"IC_kwDOBhmkcs5_1FON","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:40:16Z","updated_at":"2024-06-03T08:40:16Z","author_association":"CONTRIBUTOR","body":"这是tcmalloc库的行为，tcmalloc在启动时读取TCMALLOC_SAMPLE_PARAMETER环境变量，即使你后面修改了这个环境变量，也是不生效的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144621453/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144632657","html_url":"https://github.com/apache/brpc/issues/2657#issuecomment-2144632657","issue_url":"https://api.github.com/repos/apache/brpc/issues/2657","id":2144632657,"node_id":"IC_kwDOBhmkcs5_1H9R","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:45:44Z","updated_at":"2024-06-03T08:45:44Z","author_association":"CONTRIBUTOR","body":"你通过future.get()的方式本质上还是阻塞当前线程来等待结果，那么使用异步接口就意义不大了。你可以不使用future.get()，而是在TRITONSERVER_InferenceRequestSetResponseCallback 设置的callback函数中调用done->Run()来发送回复。\r\n这样的话，使用bthread_start_background来启动新线程也是没有必要的，因为新线程里只是发起了一个异步请求。所以，可以直接在SayHello里面同步调用process_thread方法。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144632657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144635581","html_url":"https://github.com/apache/brpc/pull/2574#issuecomment-2144635581","issue_url":"https://api.github.com/repos/apache/brpc/issues/2574","id":2144635581,"node_id":"IC_kwDOBhmkcs5_1Iq9","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:47:09Z","updated_at":"2024-06-03T08:47:09Z","author_association":"CONTRIBUTOR","body":"@chenBright 又冲突了。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144635581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144642932","html_url":"https://github.com/apache/brpc/pull/2629#issuecomment-2144642932","issue_url":"https://api.github.com/repos/apache/brpc/issues/2629","id":2144642932,"node_id":"IC_kwDOBhmkcs5_1Kd0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T08:50:47Z","updated_at":"2024-06-03T08:50:47Z","author_association":"CONTRIBUTOR","body":"@chenBright 这个也冲突了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144642932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144667481","html_url":"https://github.com/apache/brpc/issues/2657#issuecomment-2144667481","issue_url":"https://api.github.com/repos/apache/brpc/issues/2657","id":2144667481,"node_id":"IC_kwDOBhmkcs5_1QdZ","user":{"login":"zhangyachen","id":14103319,"node_id":"MDQ6VXNlcjE0MTAzMzE5","avatar_url":"https://avatars.githubusercontent.com/u/14103319?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangyachen","html_url":"https://github.com/zhangyachen","followers_url":"https://api.github.com/users/zhangyachen/followers","following_url":"https://api.github.com/users/zhangyachen/following{/other_user}","gists_url":"https://api.github.com/users/zhangyachen/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangyachen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangyachen/subscriptions","organizations_url":"https://api.github.com/users/zhangyachen/orgs","repos_url":"https://api.github.com/users/zhangyachen/repos","events_url":"https://api.github.com/users/zhangyachen/events{/privacy}","received_events_url":"https://api.github.com/users/zhangyachen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T09:02:37Z","updated_at":"2024-06-03T09:02:37Z","author_association":"NONE","body":"好的，我想再确认一下您的建议：\r\n1. SayHello中**直接调用** process_thread函数。\r\n2. process_thread中也没有必要进行promise和future的操作。\r\n3. TRITONSERVER_InferenceRequestSetResponseCallback中**捕获done，**，callback收到response后在done->Run()。\r\n\r\n期待您的回复。 ^_^","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144667481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144818861","html_url":"https://github.com/apache/brpc/issues/2652#issuecomment-2144818861","issue_url":"https://api.github.com/repos/apache/brpc/issues/2652","id":2144818861,"node_id":"IC_kwDOBhmkcs5_11at","user":{"login":"corznoc","id":63059433,"node_id":"MDQ6VXNlcjYzMDU5NDMz","avatar_url":"https://avatars.githubusercontent.com/u/63059433?v=4","gravatar_id":"","url":"https://api.github.com/users/corznoc","html_url":"https://github.com/corznoc","followers_url":"https://api.github.com/users/corznoc/followers","following_url":"https://api.github.com/users/corznoc/following{/other_user}","gists_url":"https://api.github.com/users/corznoc/gists{/gist_id}","starred_url":"https://api.github.com/users/corznoc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/corznoc/subscriptions","organizations_url":"https://api.github.com/users/corznoc/orgs","repos_url":"https://api.github.com/users/corznoc/repos","events_url":"https://api.github.com/users/corznoc/events{/privacy}","received_events_url":"https://api.github.com/users/corznoc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T10:14:55Z","updated_at":"2024-06-03T10:14:55Z","author_association":"NONE","body":"好的，多谢。发自我的荣耀手机","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144818861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144999473","html_url":"https://github.com/apache/brpc/issues/2658#issuecomment-2144999473","issue_url":"https://api.github.com/repos/apache/brpc/issues/2658","id":2144999473,"node_id":"IC_kwDOBhmkcs5_2hgx","user":{"login":"promoon","id":11702251,"node_id":"MDQ6VXNlcjExNzAyMjUx","avatar_url":"https://avatars.githubusercontent.com/u/11702251?v=4","gravatar_id":"","url":"https://api.github.com/users/promoon","html_url":"https://github.com/promoon","followers_url":"https://api.github.com/users/promoon/followers","following_url":"https://api.github.com/users/promoon/following{/other_user}","gists_url":"https://api.github.com/users/promoon/gists{/gist_id}","starred_url":"https://api.github.com/users/promoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/promoon/subscriptions","organizations_url":"https://api.github.com/users/promoon/orgs","repos_url":"https://api.github.com/users/promoon/repos","events_url":"https://api.github.com/users/promoon/events{/privacy}","received_events_url":"https://api.github.com/users/promoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T11:52:26Z","updated_at":"2024-06-03T11:52:26Z","author_association":"NONE","body":"@wwbmmm 明白了，看了下gperftools源码中是不支持动态设置的 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2144999473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2145298662","html_url":"https://github.com/apache/brpc/issues/2657#issuecomment-2145298662","issue_url":"https://api.github.com/repos/apache/brpc/issues/2657","id":2145298662,"node_id":"IC_kwDOBhmkcs5_3qjm","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T14:07:42Z","updated_at":"2024-06-03T14:07:42Z","author_association":"CONTRIBUTOR","body":"> 好的，我想再确认一下您的建议：\r\n> \r\n> 1. SayHello中**直接调用** process_thread函数。\r\n> 2. process_thread中也没有必要进行promise和future的操作。\r\n> 3. TRITONSERVER_InferenceRequestSetResponseCallback中**捕获done，**，callback收到response后在done->Run()。\r\n> \r\n> 期待您的回复。 ^_^\r\n\r\n是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2145298662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2145380495","html_url":"https://github.com/apache/brpc/issues/2656#issuecomment-2145380495","issue_url":"https://api.github.com/repos/apache/brpc/issues/2656","id":2145380495,"node_id":"IC_kwDOBhmkcs5_3-iP","user":{"login":"RagdollNoone","id":38310859,"node_id":"MDQ6VXNlcjM4MzEwODU5","avatar_url":"https://avatars.githubusercontent.com/u/38310859?v=4","gravatar_id":"","url":"https://api.github.com/users/RagdollNoone","html_url":"https://github.com/RagdollNoone","followers_url":"https://api.github.com/users/RagdollNoone/followers","following_url":"https://api.github.com/users/RagdollNoone/following{/other_user}","gists_url":"https://api.github.com/users/RagdollNoone/gists{/gist_id}","starred_url":"https://api.github.com/users/RagdollNoone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RagdollNoone/subscriptions","organizations_url":"https://api.github.com/users/RagdollNoone/orgs","repos_url":"https://api.github.com/users/RagdollNoone/repos","events_url":"https://api.github.com/users/RagdollNoone/events{/privacy}","received_events_url":"https://api.github.com/users/RagdollNoone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T14:40:56Z","updated_at":"2024-06-03T14:40:56Z","author_association":"NONE","body":"不太理解你说的意思 traceid等应该由第三方链路追踪框架生成 但是brpc和java进行分布式调用 需要传递这些值 这样链路追踪中间件才能收集信息 并且展示正确\n\n---- 回复的原邮件 ----\n| 发件人 | Weibing ***@***.***> |\n| 发送日期 | 2024年06月03日 16:37 |\n| 收件人 | apache/brpc ***@***.***> |\n| 抄送人 | RagdollNoone ***@***.***>,\nAuthor ***@***.***> |\n| 主题 | Re: [apache/brpc] 如何在requestMeta当中设置 traceId， parentSpanId， spanId？ (Issue #2656) |\n\n这些变量应该是框架设置的，用户不需要设置。\n\n—\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2145380495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2145399067","html_url":"https://github.com/apache/brpc/issues/2656#issuecomment-2145399067","issue_url":"https://api.github.com/repos/apache/brpc/issues/2656","id":2145399067,"node_id":"IC_kwDOBhmkcs5_4DEb","user":{"login":"RagdollNoone","id":38310859,"node_id":"MDQ6VXNlcjM4MzEwODU5","avatar_url":"https://avatars.githubusercontent.com/u/38310859?v=4","gravatar_id":"","url":"https://api.github.com/users/RagdollNoone","html_url":"https://github.com/RagdollNoone","followers_url":"https://api.github.com/users/RagdollNoone/followers","following_url":"https://api.github.com/users/RagdollNoone/following{/other_user}","gists_url":"https://api.github.com/users/RagdollNoone/gists{/gist_id}","starred_url":"https://api.github.com/users/RagdollNoone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RagdollNoone/subscriptions","organizations_url":"https://api.github.com/users/RagdollNoone/orgs","repos_url":"https://api.github.com/users/RagdollNoone/repos","events_url":"https://api.github.com/users/RagdollNoone/events{/privacy}","received_events_url":"https://api.github.com/users/RagdollNoone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-03T14:48:41Z","updated_at":"2024-06-03T14:48:41Z","author_association":"NONE","body":"目前的话 starlight框架 我读了些源码后 有了一定的思路 就是通过spi机制 创建新的filter 在filter当中 修改request的attachmentkv这个map 填充第三方生成的traceid spanid parentspanid 但是brpc框架该怎么操作？ cpp不太会… 然后还有一点比较难受得是 traceid等字段在元数据当中的定义成long类型的 但是一般第三方的id都是string 不知道有没有不改源码就能兼容的方式？\n\n---- 回复的原邮件 ----\n| 发件人 | Weibing ***@***.***> |\n| 发送日期 | 2024年06月03日 16:37 |\n| 收件人 | apache/brpc ***@***.***> |\n| 抄送人 | RagdollNoone ***@***.***>,\nAuthor ***@***.***> |\n| 主题 | Re: [apache/brpc] 如何在requestMeta当中设置 traceId， parentSpanId， spanId？ (Issue #2656) |\n\n这些变量应该是框架设置的，用户不需要设置。\n\n—\nReply to this email directly, view it on GitHub, or unsubscribe.\nYou are receiving this because you authored the thread.Message ID: ***@***.***>","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2145399067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2149942899","html_url":"https://github.com/apache/brpc/issues/2648#issuecomment-2149942899","issue_url":"https://api.github.com/repos/apache/brpc/issues/2648","id":2149942899,"node_id":"IC_kwDOBhmkcs6AJYZz","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-05T13:31:54Z","updated_at":"2024-06-05T13:31:54Z","author_association":"CONTRIBUTOR","body":"fixed by #2651 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2149942899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2157374309","html_url":"https://github.com/apache/brpc/issues/2656#issuecomment-2157374309","issue_url":"https://api.github.com/repos/apache/brpc/issues/2656","id":2157374309,"node_id":"IC_kwDOBhmkcs6Alutl","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-10T06:13:36Z","updated_at":"2024-06-10T06:13:36Z","author_association":"CONTRIBUTOR","body":"brpc并没有暴露给用户修改RequestMeta中的traceid/spanid/parentspanid的方法，而且如你所说，brpc std协议中定义的这几个id都是long型，可能不能满足需求。\r\n但也可以考虑通过其它字段来传递这几个id。比如std协议在这个PR https://github.com/apache/brpc/pull/2406 之后提供了自定义扩展字段，用户可以通过这种方式来传递这些id。或者使用其它协议比如http协议，用户可以通过请求的header来设置这些id。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2157374309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2157454749","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2157454749","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2157454749,"node_id":"IC_kwDOBhmkcs6AmCWd","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-10T06:44:28Z","updated_at":"2024-06-10T06:44:28Z","author_association":"CONTRIBUTOR","body":"对这个场景有点疑问，如果bthread生命周期很短，为什么还要使用bthread_local变量呢，用pthread local、局部变量或者通过函数参数传递不行吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2157454749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159668492","html_url":"https://github.com/apache/brpc/issues/2660#issuecomment-2159668492","issue_url":"https://api.github.com/repos/apache/brpc/issues/2660","id":2159668492,"node_id":"IC_kwDOBhmkcs6Aue0M","user":{"login":"renzhong","id":1164327,"node_id":"MDQ6VXNlcjExNjQzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1164327?v=4","gravatar_id":"","url":"https://api.github.com/users/renzhong","html_url":"https://github.com/renzhong","followers_url":"https://api.github.com/users/renzhong/followers","following_url":"https://api.github.com/users/renzhong/following{/other_user}","gists_url":"https://api.github.com/users/renzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/renzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renzhong/subscriptions","organizations_url":"https://api.github.com/users/renzhong/orgs","repos_url":"https://api.github.com/users/renzhong/repos","events_url":"https://api.github.com/users/renzhong/events{/privacy}","received_events_url":"https://api.github.com/users/renzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-11T02:47:55Z","updated_at":"2024-06-11T02:47:55Z","author_association":"CONTRIBUTOR","body":"我准备修复这个问题，有两个方案，一个是参考 bvar，拆分名字。一个是把平均耗时改成 service_latency{valid=\"false\",quantile='avg'} 0\r\n这两种方案，哪种更好一些？ @wwbmmm ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159668492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159676339","html_url":"https://github.com/apache/brpc/pull/2629#issuecomment-2159676339","issue_url":"https://api.github.com/repos/apache/brpc/issues/2629","id":2159676339,"node_id":"IC_kwDOBhmkcs6Auguz","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-11T02:54:16Z","updated_at":"2024-06-11T03:51:37Z","author_association":"CONTRIBUTOR","body":"@wwbmmm done，rebase解决冲突。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159676339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159705777","html_url":"https://github.com/apache/brpc/issues/2405#issuecomment-2159705777","issue_url":"https://api.github.com/repos/apache/brpc/issues/2405","id":2159705777,"node_id":"IC_kwDOBhmkcs6Aun6x","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-11T03:20:35Z","updated_at":"2024-06-11T03:24:49Z","author_association":"CONTRIBUTOR","body":"嗯嗯，网关只转发baidu协议请求的话，是不需要json、pb互转的。\r\n\r\n扩展一下，网关要支持多语言（php、nodejs、python等）接入baidu协议的brpc服务的话，client的payload一般使用json，网关负责服务发现和转发payload，brpc服务需要支持json、pb互转的能力。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159705777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159708781","html_url":"https://github.com/apache/brpc/issues/2405#issuecomment-2159708781","issue_url":"https://api.github.com/repos/apache/brpc/issues/2405","id":2159708781,"node_id":"IC_kwDOBhmkcs6Auopt","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-11T03:24:57Z","updated_at":"2024-06-11T03:24:57Z","author_association":"CONTRIBUTOR","body":"稍微修改了一下原来的描述。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159708781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159878088","html_url":"https://github.com/apache/brpc/pull/2574#issuecomment-2159878088","issue_url":"https://api.github.com/repos/apache/brpc/issues/2574","id":2159878088,"node_id":"IC_kwDOBhmkcs6AvR_I","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-11T06:14:45Z","updated_at":"2024-06-11T06:14:45Z","author_association":"CONTRIBUTOR","body":"@wwbmmm done，rebase解决冲突。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2159878088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2161206047","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2161206047","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2161206047,"node_id":"IC_kwDOBhmkcs6A0WMf","user":{"login":"MJY-HUST","id":52315061,"node_id":"MDQ6VXNlcjUyMzE1MDYx","avatar_url":"https://avatars.githubusercontent.com/u/52315061?v=4","gravatar_id":"","url":"https://api.github.com/users/MJY-HUST","html_url":"https://github.com/MJY-HUST","followers_url":"https://api.github.com/users/MJY-HUST/followers","following_url":"https://api.github.com/users/MJY-HUST/following{/other_user}","gists_url":"https://api.github.com/users/MJY-HUST/gists{/gist_id}","starred_url":"https://api.github.com/users/MJY-HUST/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MJY-HUST/subscriptions","organizations_url":"https://api.github.com/users/MJY-HUST/orgs","repos_url":"https://api.github.com/users/MJY-HUST/repos","events_url":"https://api.github.com/users/MJY-HUST/events{/privacy}","received_events_url":"https://api.github.com/users/MJY-HUST/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-11T16:48:03Z","updated_at":"2024-06-11T17:01:35Z","author_association":"CONTRIBUTOR","body":"> 对这个场景有点疑问，如果bthread生命周期很短，为什么还要使用bthread_local变量呢，用pthread local、局部变量或者通过函数参数传递不行吗\r\n\r\n场景是：使用brpc框架通信，server下面接着一个数据库。使用bthread pool用于处理数据库的查询请求，数据库内部的实现使用了bthread级别的锁和tls来避免阻塞线程。数据库内部需要使用一些thread_local变量（bthread_local）来保证其一致性并减少重复创建。\r\n并不是所有的条件下bthread的生命周期都会很短，但是在一些场景下，如果数据都在缓存中，那么一个bthread的生命周期就会很短，此时单链表结构的keytable pool管理模式就会出现瓶颈。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2161206047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164211696","html_url":"https://github.com/apache/brpc/pull/2661#issuecomment-2164211696","issue_url":"https://api.github.com/repos/apache/brpc/issues/2661","id":2164211696,"node_id":"IC_kwDOBhmkcs6A_z_w","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T02:01:24Z","updated_at":"2024-06-13T02:01:24Z","author_association":"CONTRIBUTOR","body":"@chenBright ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164211696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164225012","html_url":"https://github.com/apache/brpc/pull/2661#issuecomment-2164225012","issue_url":"https://api.github.com/repos/apache/brpc/issues/2661","id":2164225012,"node_id":"IC_kwDOBhmkcs6A_3P0","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T02:16:40Z","updated_at":"2024-06-13T02:16:40Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 合下？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164225012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164228545","html_url":"https://github.com/apache/brpc/pull/2661#issuecomment-2164228545","issue_url":"https://api.github.com/repos/apache/brpc/issues/2661","id":2164228545,"node_id":"IC_kwDOBhmkcs6A_4HB","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T02:20:57Z","updated_at":"2024-06-13T02:20:57Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164228545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164287507","html_url":"https://github.com/apache/brpc/issues/2653#issuecomment-2164287507","issue_url":"https://api.github.com/repos/apache/brpc/issues/2653","id":2164287507,"node_id":"IC_kwDOBhmkcs6BAGgT","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T03:25:17Z","updated_at":"2024-06-13T03:48:11Z","author_association":"CONTRIBUTOR","body":"> 你好，咨询一下 PassiveStatusstd::string 设计初衷是什么呢，或者针对哪些场景？ 根据 [bvar::PassiveStatus<std::string>](https://github.com/apache/brpc/blob/master/docs/cn/bvar_c%2B%2B.md#bvarpassivestatus) 文档，process_username 不能作为指标暴露出去，这个特化模板正确使用方法是什么呢？\r\n\r\n文档中描述的场景比较清楚。不能暴露的原因，如上面所说，因为系统默认已经有一个process_username对应的bvar了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164287507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164288552","html_url":"https://github.com/apache/brpc/issues/2653#issuecomment-2164288552","issue_url":"https://api.github.com/repos/apache/brpc/issues/2653","id":2164288552,"node_id":"IC_kwDOBhmkcs6BAGwo","user":{"login":"j05070415","id":7128724,"node_id":"MDQ6VXNlcjcxMjg3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7128724?v=4","gravatar_id":"","url":"https://api.github.com/users/j05070415","html_url":"https://github.com/j05070415","followers_url":"https://api.github.com/users/j05070415/followers","following_url":"https://api.github.com/users/j05070415/following{/other_user}","gists_url":"https://api.github.com/users/j05070415/gists{/gist_id}","starred_url":"https://api.github.com/users/j05070415/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j05070415/subscriptions","organizations_url":"https://api.github.com/users/j05070415/orgs","repos_url":"https://api.github.com/users/j05070415/repos","events_url":"https://api.github.com/users/j05070415/events{/privacy}","received_events_url":"https://api.github.com/users/j05070415/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T03:26:23Z","updated_at":"2024-06-13T03:26:23Z","author_association":"NONE","body":"谢谢，您的邮件我已收到！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164288552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164340496","html_url":"https://github.com/apache/brpc/issues/2660#issuecomment-2164340496","issue_url":"https://api.github.com/repos/apache/brpc/issues/2660","id":2164340496,"node_id":"IC_kwDOBhmkcs6BATcQ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T04:22:47Z","updated_at":"2024-06-13T04:22:47Z","author_association":"CONTRIBUTOR","body":"百度内部好像是用的 service_latency{valid=\"false\",quantile=\"avg\"}","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164340496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164345475","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2164345475","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2164345475,"node_id":"IC_kwDOBhmkcs6BAUqD","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-13T04:26:15Z","updated_at":"2024-06-13T04:26:15Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2164345475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2169182296","html_url":"https://github.com/apache/brpc/pull/2663#issuecomment-2169182296","issue_url":"https://api.github.com/repos/apache/brpc/issues/2663","id":2169182296,"node_id":"IC_kwDOBhmkcs6BSxhY","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-15T07:35:29Z","updated_at":"2024-06-15T07:35:29Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2169182296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2173629429","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2173629429","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2173629429,"node_id":"IC_kwDOBhmkcs6BjvP1","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-17T14:51:36Z","updated_at":"2024-06-17T14:51:36Z","author_association":"CONTRIBUTOR","body":"有这个日志吗？\r\nhttps://github.com/apache/brpc/blob/2e183187bcbccc39c7da8dde2a98d02a7a031279/src/brpc/socket.cpp#L2564-L2567","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2173629429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2173630016","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2173630016","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2173630016,"node_id":"IC_kwDOBhmkcs6BjvZA","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-17T14:51:50Z","updated_at":"2024-06-17T14:51:50Z","author_association":"CONTRIBUTOR","body":"CLOSE_WAIT状态持续很久吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2173630016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2174727365","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2174727365","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2174727365,"node_id":"IC_kwDOBhmkcs6Bn7TF","user":{"login":"icexin","id":2713364,"node_id":"MDQ6VXNlcjI3MTMzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2713364?v=4","gravatar_id":"","url":"https://api.github.com/users/icexin","html_url":"https://github.com/icexin","followers_url":"https://api.github.com/users/icexin/followers","following_url":"https://api.github.com/users/icexin/following{/other_user}","gists_url":"https://api.github.com/users/icexin/gists{/gist_id}","starred_url":"https://api.github.com/users/icexin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icexin/subscriptions","organizations_url":"https://api.github.com/users/icexin/orgs","repos_url":"https://api.github.com/users/icexin/repos","events_url":"https://api.github.com/users/icexin/events{/privacy}","received_events_url":"https://api.github.com/users/icexin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-18T01:20:30Z","updated_at":"2024-06-18T01:20:30Z","author_association":"CONTRIBUTOR","body":"对，在我们手动重启之前一直是CLOSE_WAIT状态","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2174727365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2174800981","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2174800981","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2174800981,"node_id":"IC_kwDOBhmkcs6BoNRV","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-18T02:20:19Z","updated_at":"2024-06-18T02:20:19Z","author_association":"CONTRIBUTOR","body":"看着像是是还有rpc没有结束。框架内部要等到连接上全部rpc结束了，才会close fd，然后进行健康检查。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2174800981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2174803799","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2174803799","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2174803799,"node_id":"IC_kwDOBhmkcs6BoN9X","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-18T02:20:47Z","updated_at":"2024-06-18T02:20:47Z","author_association":"CONTRIBUTOR","body":"另外，服务端没起来，健康检查也不会成功吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2174803799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2175883103","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2175883103","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2175883103,"node_id":"IC_kwDOBhmkcs6BsVdf","user":{"login":"icexin","id":2713364,"node_id":"MDQ6VXNlcjI3MTMzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2713364?v=4","gravatar_id":"","url":"https://api.github.com/users/icexin","html_url":"https://github.com/icexin","followers_url":"https://api.github.com/users/icexin/followers","following_url":"https://api.github.com/users/icexin/following{/other_user}","gists_url":"https://api.github.com/users/icexin/gists{/gist_id}","starred_url":"https://api.github.com/users/icexin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icexin/subscriptions","organizations_url":"https://api.github.com/users/icexin/orgs","repos_url":"https://api.github.com/users/icexin/repos","events_url":"https://api.github.com/users/icexin/events{/privacy}","received_events_url":"https://api.github.com/users/icexin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-18T11:35:16Z","updated_at":"2024-06-18T11:35:16Z","author_association":"CONTRIBUTOR","body":"这边是客户端处于close_wait状态，我们用的是同步rpc，应该rpc很快就处理完了。服务端后来起来后，客户端也因为这个状态一直健康检查失败","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2175883103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177375145","html_url":"https://github.com/apache/brpc/issues/2665#issuecomment-2177375145","issue_url":"https://api.github.com/repos/apache/brpc/issues/2665","id":2177375145,"node_id":"IC_kwDOBhmkcs6ByBup","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T01:55:38Z","updated_at":"2024-06-19T01:55:38Z","author_association":"CONTRIBUTOR","body":"client 也是brpc写的吗，正常流程是你发送kill之后，server拒绝接受新的连接，同时为后续所有的rpc都返回ELOGOFF这个错误，brpc的client在收到这个错误之后会把对应socket摘除。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177375145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177413389","html_url":"https://github.com/apache/brpc/issues/2665#issuecomment-2177413389","issue_url":"https://api.github.com/repos/apache/brpc/issues/2665","id":2177413389,"node_id":"IC_kwDOBhmkcs6ByLEN","user":{"login":"zhangyachen","id":14103319,"node_id":"MDQ6VXNlcjE0MTAzMzE5","avatar_url":"https://avatars.githubusercontent.com/u/14103319?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangyachen","html_url":"https://github.com/zhangyachen","followers_url":"https://api.github.com/users/zhangyachen/followers","following_url":"https://api.github.com/users/zhangyachen/following{/other_user}","gists_url":"https://api.github.com/users/zhangyachen/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangyachen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangyachen/subscriptions","organizations_url":"https://api.github.com/users/zhangyachen/orgs","repos_url":"https://api.github.com/users/zhangyachen/repos","events_url":"https://api.github.com/users/zhangyachen/events{/privacy}","received_events_url":"https://api.github.com/users/zhangyachen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T02:20:25Z","updated_at":"2024-06-19T02:20:25Z","author_association":"NONE","body":"> client 也是brpc写的吗，正常流程是你发送kill之后，server拒绝接受新的连接，同时为后续所有的rpc都返回ELOGOFF这个错误，brpc的client在收到这个错误之后会把对应socket摘除。\r\n\r\nclient是百度的java版brpc，https://github.com/baidu/starlight","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177413389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177428882","html_url":"https://github.com/apache/brpc/issues/2665#issuecomment-2177428882","issue_url":"https://api.github.com/repos/apache/brpc/issues/2665","id":2177428882,"node_id":"IC_kwDOBhmkcs6ByO2S","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T02:36:47Z","updated_at":"2024-06-19T02:36:47Z","author_association":"CONTRIBUTOR","body":"\r\n> client是百度的java版brpc，https://github.com/baidu/starlight\r\n\r\njava的这个版本不太熟，搜了一下代码只找到一个ELOGOFF的错误码定义，似乎没有对它有特别的处理。可以给他们提issue，或者在client的客户代码里自己处理这个错误（应该是能拿到的，这会儿手里没环境不太方便测试)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177428882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177455475","html_url":"https://github.com/apache/brpc/issues/2665#issuecomment-2177455475","issue_url":"https://api.github.com/repos/apache/brpc/issues/2665","id":2177455475,"node_id":"IC_kwDOBhmkcs6ByVVz","user":{"login":"zhangyachen","id":14103319,"node_id":"MDQ6VXNlcjE0MTAzMzE5","avatar_url":"https://avatars.githubusercontent.com/u/14103319?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangyachen","html_url":"https://github.com/zhangyachen","followers_url":"https://api.github.com/users/zhangyachen/followers","following_url":"https://api.github.com/users/zhangyachen/following{/other_user}","gists_url":"https://api.github.com/users/zhangyachen/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangyachen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangyachen/subscriptions","organizations_url":"https://api.github.com/users/zhangyachen/orgs","repos_url":"https://api.github.com/users/zhangyachen/repos","events_url":"https://api.github.com/users/zhangyachen/events{/privacy}","received_events_url":"https://api.github.com/users/zhangyachen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T03:03:07Z","updated_at":"2024-06-19T03:03:16Z","author_association":"NONE","body":"> > client是百度的java版brpc，https://github.com/baidu/starlight\r\n> \r\n> java的这个版本不太熟，搜了一下代码只找到一个ELOGOFF的错误码定义，似乎没有对它有特别的处理。可以给他们提issue，或者在client的客户代码里自己处理这个错误（应该是能拿到的，这会儿手里没环境不太方便测试)\r\n\r\n假如上游不是brpc，而是grpc框架，也会出现这种情况吗？还是说grpc框架会处理这种ELOGOFF","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177455475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177469559","html_url":"https://github.com/apache/brpc/issues/2665#issuecomment-2177469559","issue_url":"https://api.github.com/repos/apache/brpc/issues/2665","id":2177469559,"node_id":"IC_kwDOBhmkcs6ByYx3","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T03:20:24Z","updated_at":"2024-06-19T03:20:24Z","author_association":"CONTRIBUTOR","body":"> 假如上游不是brpc，而是grpc框架，也会出现这种情况吗？还是说grpc框架会处理这种ELOGOFF\r\n\r\n如果使用的协议是 grpc，brpc server 会把 ELOGOFF 错误转换为 http2 的 connection_goaway， 一般来说 grpc client 是能处理这种错误的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177469559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177939503","html_url":"https://github.com/apache/brpc/issues/2662#issuecomment-2177939503","issue_url":"https://api.github.com/repos/apache/brpc/issues/2662","id":2177939503,"node_id":"IC_kwDOBhmkcs6B0Lgv","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T07:23:18Z","updated_at":"2024-08-01T11:34:09Z","author_association":"CONTRIBUTOR","body":"如果长时间处于CLOSE_WAIT状态，应该是某处持有了socket的引用，导致一直没有close fd和健康检查。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2177939503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2178104545","html_url":"https://github.com/apache/brpc/pull/2398#issuecomment-2178104545","issue_url":"https://api.github.com/repos/apache/brpc/issues/2398","id":2178104545,"node_id":"IC_kwDOBhmkcs6B0zzh","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T08:41:50Z","updated_at":"2024-06-19T08:41:50Z","author_association":"CONTRIBUTOR","body":"> 针对 worker 唤醒，做的改动就是记录在 parkinglot 上等待的 worker num，只有有 worker 等待时才 signal_task；另外就是 steal_task 时让 worker 在 wait 在 parking lot 之前 busy poll 一小段时间，不那么频繁地 wait。\r\n\r\n@MrGuin 这个改动上线稳定运行了吗？可否推进一下合到社区。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2178104545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2178123557","html_url":"https://github.com/apache/brpc/issues/2667#issuecomment-2178123557","issue_url":"https://api.github.com/repos/apache/brpc/issues/2667","id":2178123557,"node_id":"IC_kwDOBhmkcs6B04cl","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T08:49:23Z","updated_at":"2024-06-19T08:49:23Z","author_association":"CONTRIBUTOR","body":"Related PR：#2398","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2178123557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2178134226","html_url":"https://github.com/apache/brpc/issues/2666#issuecomment-2178134226","issue_url":"https://api.github.com/repos/apache/brpc/issues/2666","id":2178134226,"node_id":"IC_kwDOBhmkcs6B07DS","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-19T08:54:33Z","updated_at":"2024-06-19T08:54:33Z","author_association":"CONTRIBUTOR","body":"Use domain name with lb, like `channel.Init(\"http://baidu.com\", \"rr\", &opts)`. DomainNamingService will periodically query DNS to get the latest IP.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2178134226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2179757517","html_url":"https://github.com/apache/brpc/issues/2668#issuecomment-2179757517","issue_url":"https://api.github.com/repos/apache/brpc/issues/2668","id":2179757517,"node_id":"IC_kwDOBhmkcs6B7HXN","user":{"login":"xiaoma2015","id":10593758,"node_id":"MDQ6VXNlcjEwNTkzNzU4","avatar_url":"https://avatars.githubusercontent.com/u/10593758?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoma2015","html_url":"https://github.com/xiaoma2015","followers_url":"https://api.github.com/users/xiaoma2015/followers","following_url":"https://api.github.com/users/xiaoma2015/following{/other_user}","gists_url":"https://api.github.com/users/xiaoma2015/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoma2015/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoma2015/subscriptions","organizations_url":"https://api.github.com/users/xiaoma2015/orgs","repos_url":"https://api.github.com/users/xiaoma2015/repos","events_url":"https://api.github.com/users/xiaoma2015/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoma2015/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-20T03:54:28Z","updated_at":"2024-06-20T03:54:28Z","author_association":"CONTRIBUTOR","body":"我们是对backuprequest做了优化处理，只允许x%的请求发起backuprequest，并且backuprequest的阈值不是固定值，而是跟随延时的P99或者P95一起波动","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2179757517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2180293383","html_url":"https://github.com/apache/brpc/pull/2398#issuecomment-2180293383","issue_url":"https://api.github.com/repos/apache/brpc/issues/2398","id":2180293383,"node_id":"IC_kwDOBhmkcs6B9KMH","user":{"login":"MrGuin","id":26199910,"node_id":"MDQ6VXNlcjI2MTk5OTEw","avatar_url":"https://avatars.githubusercontent.com/u/26199910?v=4","gravatar_id":"","url":"https://api.github.com/users/MrGuin","html_url":"https://github.com/MrGuin","followers_url":"https://api.github.com/users/MrGuin/followers","following_url":"https://api.github.com/users/MrGuin/following{/other_user}","gists_url":"https://api.github.com/users/MrGuin/gists{/gist_id}","starred_url":"https://api.github.com/users/MrGuin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrGuin/subscriptions","organizations_url":"https://api.github.com/users/MrGuin/orgs","repos_url":"https://api.github.com/users/MrGuin/repos","events_url":"https://api.github.com/users/MrGuin/events{/privacy}","received_events_url":"https://api.github.com/users/MrGuin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-20T10:01:41Z","updated_at":"2024-06-20T10:01:41Z","author_association":"CONTRIBUTOR","body":"> > 针对 worker 唤醒，做的改动就是记录在 parkinglot 上等待的 worker num，只有有 worker 等待时才 signal_task；另外就是 steal_task 时让 worker 在 wait 在 parking lot 之前 busy poll 一小段时间，不那么频繁地 wait。\r\n> \r\n> @MrGuin 这个改动上线稳定运行了吗？可否推进一下合到社区。\r\n\r\n好的，我抽空针对这个提个 PR。我们内部一直在用，目前还算稳定。c7g.16xlarge 机型下四五十个 worker 线程可以达到两三百万的 qps，性能可以正常随着 worker 数 scale，不会雪崩了。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2180293383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2183792154","html_url":"https://github.com/apache/brpc/issues/2654#issuecomment-2183792154","issue_url":"https://api.github.com/repos/apache/brpc/issues/2654","id":2183792154,"node_id":"IC_kwDOBhmkcs6CKgYa","user":{"login":"oathdruid","id":17508029,"node_id":"MDQ6VXNlcjE3NTA4MDI5","avatar_url":"https://avatars.githubusercontent.com/u/17508029?v=4","gravatar_id":"","url":"https://api.github.com/users/oathdruid","html_url":"https://github.com/oathdruid","followers_url":"https://api.github.com/users/oathdruid/followers","following_url":"https://api.github.com/users/oathdruid/following{/other_user}","gists_url":"https://api.github.com/users/oathdruid/gists{/gist_id}","starred_url":"https://api.github.com/users/oathdruid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oathdruid/subscriptions","organizations_url":"https://api.github.com/users/oathdruid/orgs","repos_url":"https://api.github.com/users/oathdruid/repos","events_url":"https://api.github.com/users/oathdruid/events{/privacy}","received_events_url":"https://api.github.com/users/oathdruid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-22T04:49:58Z","updated_at":"2024-06-24T03:16:24Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/brpc/pull/2670\r\n@lorinlee @chenBright ry to make one. is there some one could help to review it?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2183792154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2185473446","html_url":"https://github.com/apache/brpc/issues/2665#issuecomment-2185473446","issue_url":"https://api.github.com/repos/apache/brpc/issues/2665","id":2185473446,"node_id":"IC_kwDOBhmkcs6CQ62m","user":{"login":"zhangyachen","id":14103319,"node_id":"MDQ6VXNlcjE0MTAzMzE5","avatar_url":"https://avatars.githubusercontent.com/u/14103319?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangyachen","html_url":"https://github.com/zhangyachen","followers_url":"https://api.github.com/users/zhangyachen/followers","following_url":"https://api.github.com/users/zhangyachen/following{/other_user}","gists_url":"https://api.github.com/users/zhangyachen/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangyachen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangyachen/subscriptions","organizations_url":"https://api.github.com/users/zhangyachen/orgs","repos_url":"https://api.github.com/users/zhangyachen/repos","events_url":"https://api.github.com/users/zhangyachen/events{/privacy}","received_events_url":"https://api.github.com/users/zhangyachen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-24T02:30:24Z","updated_at":"2024-06-24T02:30:24Z","author_association":"NONE","body":"这个问题解决了，当我把上游换成grpc框架时，还是会出现不能退出的问题，确定是我代码写的有问题。后来从[server.md](https://github.com/apache/brpc/blob/master/docs/cn/server.md#%E5%81%9C%E6%AD%A2)中找到了答案，这里面提到：\r\n> 如果你的server“退不掉”，很有可能是由于某个检索线程没结束或忘记调用done了。\r\n\r\n我的brpc server代码是调用一个异步函数，这个异步函数在程序退出时会返回error。伪代码是：\r\n```c++\r\nvoid InferenceServiceImpl::ModelInfer(google::protobuf::RpcController* cntl_base,\r\n                      const inference::ModelInferRequest* request,\r\n                      inference::ModelInferResponse* response,\r\n                      google::protobuf::Closure* done) {\r\n      brpc::ClosureGuard done_guard(done);\r\n      brpc::Controller* cntl = static_cast<brpc::Controller*>(cntl_base);\r\n      TRITONSERVER_Error* err = nullptr;\r\n\r\n      //将done保存起来，在回调函数中使用\r\n      State* state = StateNew(done, response, cntl);\r\n      // 回调函数\r\n     err = TRITONSERVER_InferenceRequestSetResponseCallback(\r\n            irequest, allocator_,\r\n            &state->alloc_payload_ /* response_allocator_userp */,\r\n            InferResponseComplete, reinterpret_cast<void*>(state));\r\n      // 异步函数\r\n      if (err == nullptr) {\r\n        err = TRITONSERVER_ServerInferAsync(tritonserver_.get(), irequest, nullptr);\r\n      }\r\n      if (err != nullptr) {\r\n        int brpc_status;\r\n        BrpcStatusUtil::Create(&brpc_status, err);\r\n        std::string error_msg = berror(brpc_status);\r\n        cntl->SetFailed(brpc_status, \"%s\", error_msg.c_str());\r\n        TRITONSERVER_ErrorDelete(err);\r\n        \r\n        // 新添加的\r\n        return;\r\n      }\r\n\r\n      done_guard.release();\r\n}\r\n```\r\n\r\n当异步函数TRITONSERVER_ServerInferAsync报错时，没有return导致brpc::ClosureGuard没有调用done->Run();","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2185473446/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2185814847","html_url":"https://github.com/apache/brpc/issues/2654#issuecomment-2185814847","issue_url":"https://api.github.com/repos/apache/brpc/issues/2654","id":2185814847,"node_id":"IC_kwDOBhmkcs6CSOM_","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-24T07:36:24Z","updated_at":"2024-06-24T07:36:24Z","author_association":"CONTRIBUTOR","body":"Sorry, I'm not familiar with bazel.\r\n\r\n@wwbmmm Is there anyone familiar with bazel who can review it?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2185814847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2187932377","html_url":"https://github.com/apache/brpc/pull/2670#issuecomment-2187932377","issue_url":"https://api.github.com/repos/apache/brpc/issues/2670","id":2187932377,"node_id":"IC_kwDOBhmkcs6CaTLZ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-25T04:08:13Z","updated_at":"2024-06-25T04:08:13Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2187932377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2187935393","html_url":"https://github.com/apache/brpc/pull/2670#issuecomment-2187935393","issue_url":"https://api.github.com/repos/apache/brpc/issues/2670","id":2187935393,"node_id":"IC_kwDOBhmkcs6CaT6h","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-25T04:11:43Z","updated_at":"2024-06-25T04:11:43Z","author_association":"CONTRIBUTOR","body":"@zyearn 有空也看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2187935393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2192909416","html_url":"https://github.com/apache/brpc/pull/2672#issuecomment-2192909416","issue_url":"https://api.github.com/repos/apache/brpc/issues/2672","id":2192909416,"node_id":"IC_kwDOBhmkcs6CtSRo","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-27T02:00:00Z","updated_at":"2024-06-27T02:00:00Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2192909416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2193901741","html_url":"https://github.com/apache/brpc/issues/1107#issuecomment-2193901741","issue_url":"https://api.github.com/repos/apache/brpc/issues/1107","id":2193901741,"node_id":"IC_kwDOBhmkcs6CxEit","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-27T06:29:33Z","updated_at":"2024-06-27T06:29:33Z","author_association":"CONTRIBUTOR","body":"在Socket::StartWrite之前，Socket::Write会判断已经_overcrowded就返回了，内存应该不会无限制增加吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2193901741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2205038609","html_url":"https://github.com/apache/brpc/issues/2668#issuecomment-2205038609","issue_url":"https://api.github.com/repos/apache/brpc/issues/2668","id":2205038609,"node_id":"IC_kwDOBhmkcs6DbjgR","user":{"login":"icexin","id":2713364,"node_id":"MDQ6VXNlcjI3MTMzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2713364?v=4","gravatar_id":"","url":"https://api.github.com/users/icexin","html_url":"https://github.com/icexin","followers_url":"https://api.github.com/users/icexin/followers","following_url":"https://api.github.com/users/icexin/following{/other_user}","gists_url":"https://api.github.com/users/icexin/gists{/gist_id}","starred_url":"https://api.github.com/users/icexin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icexin/subscriptions","organizations_url":"https://api.github.com/users/icexin/orgs","repos_url":"https://api.github.com/users/icexin/repos","events_url":"https://api.github.com/users/icexin/events{/privacy}","received_events_url":"https://api.github.com/users/icexin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-03T03:55:22Z","updated_at":"2024-07-03T03:55:22Z","author_association":"CONTRIBUTOR","body":"> 我们是对backuprequest做了优化处理，只允许x%的请求发起backuprequest，并且backuprequest的阈值不是固定值，而是跟随延时的P99或者P95一起波动\r\n\r\n有代码吗？这个需求挺常见的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2205038609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2207975487","html_url":"https://github.com/apache/brpc/pull/2678#issuecomment-2207975487","issue_url":"https://api.github.com/repos/apache/brpc/issues/2678","id":2207975487,"node_id":"IC_kwDOBhmkcs6Dmwg_","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-04T03:15:46Z","updated_at":"2024-07-04T03:15:46Z","author_association":"CONTRIBUTOR","body":"UT failed：\r\n\r\n```\r\nbrpc_streaming_rpc_unittest.cpp:254: Failure\r\nExpected equality of these values:\r\n  0\r\n  brpc::StreamWrite(request_stream, out)\r\n    Which is: 11\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2207975487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2208233520","html_url":"https://github.com/apache/brpc/issues/2410#issuecomment-2208233520","issue_url":"https://api.github.com/repos/apache/brpc/issues/2410","id":2208233520,"node_id":"IC_kwDOBhmkcs6Dnvgw","user":{"login":"joke-lee","id":20007497,"node_id":"MDQ6VXNlcjIwMDA3NDk3","avatar_url":"https://avatars.githubusercontent.com/u/20007497?v=4","gravatar_id":"","url":"https://api.github.com/users/joke-lee","html_url":"https://github.com/joke-lee","followers_url":"https://api.github.com/users/joke-lee/followers","following_url":"https://api.github.com/users/joke-lee/following{/other_user}","gists_url":"https://api.github.com/users/joke-lee/gists{/gist_id}","starred_url":"https://api.github.com/users/joke-lee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joke-lee/subscriptions","organizations_url":"https://api.github.com/users/joke-lee/orgs","repos_url":"https://api.github.com/users/joke-lee/repos","events_url":"https://api.github.com/users/joke-lee/events{/privacy}","received_events_url":"https://api.github.com/users/joke-lee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-04T06:43:00Z","updated_at":"2024-07-04T06:43:00Z","author_association":"NONE","body":"this spec work\r\n```\r\n%define debug_package %{nil}\r\n%define _unpackaged_files_terminate_build 0\r\nName: braft\r\nVersion: 1.1.2\r\nRelease: 1%{?dist}\r\nSummary: accesser\r\nLicense: Apache-2.0\r\nGroup: Development/Languages/Other\r\nURL: http://gitlab.cmss.com/eos/accesser/accesser-src.git\r\nSource0: braft-1.1.2.tar.gz\r\nProvides: libbraft.so()(64bit)\r\n# https://access.redhat.com/solutions/519993\r\n%global  _filter_GLIBC_PRIVATE 1\r\n%global __filter_GLIBC_PRIVATE 1\r\n\r\n%if 0%{?fedora} >= 15 || 0%{?rhel} >= 8\r\n%global use_devtoolset 0\r\n%else\r\n%global use_devtoolset 1\r\n%endif\r\n\r\n%if 0%{?use_devtoolset}\r\nBuildRequires: devtoolset-8-gcc-c++\r\n%define __strip /opt/rh/devtoolset-8/root/usr/bin/strip\r\n%endif\r\n\r\nBuildRequires:  cmake\r\nBuildRequires:  gcc\r\nBuildRequires:  gcc-c++\r\nBuildRequires:  gflags-devel >= 2.1\r\nBuildRequires:  protobuf-devel >= 2.4\r\nBuildRequires:  leveldb-devel\r\nBuildRequires:  openssl-devel\r\n\r\n%description\r\n\r\n\r\n%package -n libbraft\r\nSummary: libbraft\r\n%description -n libbraft\r\n\r\n\r\n%prep\r\n%setup -q\r\n%build\r\n%if 0%{?use_devtoolset}\r\n. /opt/rh/devtoolset-8/enable\r\n%endif\r\n\r\ncd /yly/braft-1.1.2/build\r\n\r\nmake -C ./ DESTDIR=%{buildroot} install\r\n\r\n%post -n libbraft\r\necho \"/usr/local/lib\" > /etc/ld.so.conf.d/usr_local_accesser.conf\r\necho \"/usr/local/lib64\" >> /etc/ld.so.conf.d/usr_local_accesser.conf\r\n/sbin/ldconfig &> /dev/null\r\n\r\n%postun -n libbraft\r\n\r\n%define __spec_install_pre %{nil}\r\n%files -n libbraft\r\n/usr/local/include/braft/builtin_service.pb.h\r\n/usr/local/include/braft/cli.pb.h\r\n/usr/local/include/braft/enum.pb.h\r\n/usr/local/include/braft/errno.pb.h\r\n/usr/local/include/braft/file_service.pb.h\r\n/usr/local/include/braft/local_file_meta.pb.h\r\n/usr/local/include/braft/local_storage.pb.h\r\n/usr/local/include/braft/raft.pb.h\r\n/usr/local/include/braft/ballot.h\r\n/usr/local/include/braft/ballot_box.h\r\n/usr/local/include/braft/builtin_service_impl.h\r\n/usr/local/include/braft/cli.h\r\n/usr/local/include/braft/cli_service.h\r\n/usr/local/include/braft/closure_helper.h\r\n/usr/local/include/braft/closure_queue.h\r\n/usr/local/include/braft/configuration.h\r\n/usr/local/include/braft/configuration_manager.h\r\n/usr/local/include/braft/file_reader.h\r\n/usr/local/include/braft/file_service.h\r\n/usr/local/include/braft/file_system_adaptor.h\r\n/usr/local/include/braft/fsm_caller.h\r\n/usr/local/include/braft/fsync.h\r\n/usr/local/include/braft/lease.h\r\n/usr/local/include/braft/log.h\r\n/usr/local/include/braft/log_entry.h\r\n/usr/local/include/braft/log_manager.h\r\n/usr/local/include/braft/macros.h\r\n/usr/local/include/braft/memory_log.h\r\n/usr/local/include/braft/node.h\r\n/usr/local/include/braft/node_manager.h\r\n/usr/local/include/braft/protobuf_file.h\r\n/usr/local/include/braft/raft.h\r\n/usr/local/include/braft/raft_meta.h\r\n/usr/local/include/braft/raft_service.h\r\n/usr/local/include/braft/remote_file_copier.h\r\n/usr/local/include/braft/repeated_timer_task.h\r\n/usr/local/include/braft/replicator.h\r\n/usr/local/include/braft/route_table.h\r\n/usr/local/include/braft/snapshot.h\r\n/usr/local/include/braft/snapshot_executor.h\r\n/usr/local/include/braft/snapshot_throttle.h\r\n/usr/local/include/braft/storage.h\r\n/usr/local/include/braft/util.h\r\n/usr/local/lib/libbraft.a\r\n/usr/local/lib/libbraft.so\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2208233520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2208385094","html_url":"https://github.com/apache/brpc/issues/945#issuecomment-2208385094","issue_url":"https://api.github.com/repos/apache/brpc/issues/945","id":2208385094,"node_id":"IC_kwDOBhmkcs6DoUhG","user":{"login":"yangkangka","id":78491464,"node_id":"MDQ6VXNlcjc4NDkxNDY0","avatar_url":"https://avatars.githubusercontent.com/u/78491464?v=4","gravatar_id":"","url":"https://api.github.com/users/yangkangka","html_url":"https://github.com/yangkangka","followers_url":"https://api.github.com/users/yangkangka/followers","following_url":"https://api.github.com/users/yangkangka/following{/other_user}","gists_url":"https://api.github.com/users/yangkangka/gists{/gist_id}","starred_url":"https://api.github.com/users/yangkangka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yangkangka/subscriptions","organizations_url":"https://api.github.com/users/yangkangka/orgs","repos_url":"https://api.github.com/users/yangkangka/repos","events_url":"https://api.github.com/users/yangkangka/events{/privacy}","received_events_url":"https://api.github.com/users/yangkangka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-04T08:19:00Z","updated_at":"2024-07-04T08:19:00Z","author_association":"NONE","body":"请求了10个sub_req，有1个触发重试，返回了11个sub_res","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2208385094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2208702573","html_url":"https://github.com/apache/brpc/issues/2680#issuecomment-2208702573","issue_url":"https://api.github.com/repos/apache/brpc/issues/2680","id":2208702573,"node_id":"IC_kwDOBhmkcs6DpiBt","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-04T11:05:49Z","updated_at":"2024-07-04T11:05:49Z","author_association":"CONTRIBUTOR","body":"@chenBright @wwbmmm 大佬~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2208702573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2209903783","html_url":"https://github.com/apache/brpc/pull/2678#issuecomment-2209903783","issue_url":"https://api.github.com/repos/apache/brpc/issues/2678","id":2209903783,"node_id":"IC_kwDOBhmkcs6DuHSn","user":{"login":"howarlii","id":63032487,"node_id":"MDQ6VXNlcjYzMDMyNDg3","avatar_url":"https://avatars.githubusercontent.com/u/63032487?v=4","gravatar_id":"","url":"https://api.github.com/users/howarlii","html_url":"https://github.com/howarlii","followers_url":"https://api.github.com/users/howarlii/followers","following_url":"https://api.github.com/users/howarlii/following{/other_user}","gists_url":"https://api.github.com/users/howarlii/gists{/gist_id}","starred_url":"https://api.github.com/users/howarlii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howarlii/subscriptions","organizations_url":"https://api.github.com/users/howarlii/orgs","repos_url":"https://api.github.com/users/howarlii/repos","events_url":"https://api.github.com/users/howarlii/events{/privacy}","received_events_url":"https://api.github.com/users/howarlii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-05T02:57:51Z","updated_at":"2024-07-05T02:57:51Z","author_association":"CONTRIBUTOR","body":"这个似乎是UT的概率fail问题，main上的UT也是fail的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2209903783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2210516950","html_url":"https://github.com/apache/brpc/issues/2680#issuecomment-2210516950","issue_url":"https://api.github.com/repos/apache/brpc/issues/2680","id":2210516950,"node_id":"IC_kwDOBhmkcs6Dwc_W","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-05T09:18:57Z","updated_at":"2024-07-05T09:18:57Z","author_association":"CONTRIBUTOR","body":"@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2210516950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2210814523","html_url":"https://github.com/apache/brpc/issues/2682#issuecomment-2210814523","issue_url":"https://api.github.com/repos/apache/brpc/issues/2682","id":2210814523,"node_id":"IC_kwDOBhmkcs6Dxlo7","user":{"login":"icexin","id":2713364,"node_id":"MDQ6VXNlcjI3MTMzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2713364?v=4","gravatar_id":"","url":"https://api.github.com/users/icexin","html_url":"https://github.com/icexin","followers_url":"https://api.github.com/users/icexin/followers","following_url":"https://api.github.com/users/icexin/following{/other_user}","gists_url":"https://api.github.com/users/icexin/gists{/gist_id}","starred_url":"https://api.github.com/users/icexin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icexin/subscriptions","organizations_url":"https://api.github.com/users/icexin/orgs","repos_url":"https://api.github.com/users/icexin/repos","events_url":"https://api.github.com/users/icexin/events{/privacy}","received_events_url":"https://api.github.com/users/icexin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-05T12:45:00Z","updated_at":"2024-07-05T12:45:00Z","author_association":"CONTRIBUTOR","body":"其中多维度指标的大概代码类似 \r\n```\r\nMultiDimension<bvar::Adder<uint64_t>> buckets_(\"ns\", \"name\", {\"le\"})\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2210814523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211589472","html_url":"https://github.com/apache/brpc/issues/2679#issuecomment-2211589472","issue_url":"https://api.github.com/repos/apache/brpc/issues/2679","id":2211589472,"node_id":"IC_kwDOBhmkcs6D0i1g","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-06T02:18:20Z","updated_at":"2024-07-06T02:18:20Z","author_association":"MEMBER","body":"gflags 2.1 中有一处 namespace 的问题，在 2.2 中修复了，可以升级下\r\n\r\nhttps://github.com/gflags/gflags/commit/408061b46974cc8377a8a794a048ecae359ad887","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211589472/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211691354","html_url":"https://github.com/apache/brpc/pull/2678#issuecomment-2211691354","issue_url":"https://api.github.com/repos/apache/brpc/issues/2678","id":2211691354,"node_id":"IC_kwDOBhmkcs6D07ta","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-06T07:22:18Z","updated_at":"2024-07-06T07:22:18Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211691354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211784543","html_url":"https://github.com/apache/brpc/issues/2680#issuecomment-2211784543","issue_url":"https://api.github.com/repos/apache/brpc/issues/2680","id":2211784543,"node_id":"IC_kwDOBhmkcs6D1Sdf","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-06T14:35:25Z","updated_at":"2024-07-06T14:35:25Z","author_association":"CONTRIBUTOR","body":"StreamWrite没有返回网络错误，一直返回EAGAIN的话，应该是client挂了，但是server并没有感知到tcp连接断开，发送的数据没有收到client的ack，随后写不进去内核缓冲区后，就一直返回EAGAIN。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211784543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211789986","html_url":"https://github.com/apache/brpc/issues/2668#issuecomment-2211789986","issue_url":"https://api.github.com/repos/apache/brpc/issues/2668","id":2211789986,"node_id":"IC_kwDOBhmkcs6D1Tyi","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-06T14:57:59Z","updated_at":"2024-07-06T14:57:59Z","author_association":"CONTRIBUTOR","body":"容灾方面是不是可以全面一点？\r\n（周期或者滑动窗口）统计请求的成功率，根据成功率可以做以下策略：\r\n1. lb选实例时，减少访问可用性弱的实例；\r\n2. 减少重试（包括backup request）。\r\n3. 其他，待补充。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211789986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211811304","html_url":"https://github.com/apache/brpc/issues/2681#issuecomment-2211811304","issue_url":"https://api.github.com/repos/apache/brpc/issues/2681","id":2211811304,"node_id":"IC_kwDOBhmkcs6D1Y_o","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-06T16:21:56Z","updated_at":"2024-07-06T16:21:56Z","author_association":"CONTRIBUTOR","body":"In this case, the connection will be closed until all rpc requests are completed. Idle timeout mechanism only release the additional reference.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2211811304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212296577","html_url":"https://github.com/apache/brpc/pull/2670#issuecomment-2212296577","issue_url":"https://api.github.com/repos/apache/brpc/issues/2670","id":2212296577,"node_id":"IC_kwDOBhmkcs6D3PeB","user":{"login":"oathdruid","id":17508029,"node_id":"MDQ6VXNlcjE3NTA4MDI5","avatar_url":"https://avatars.githubusercontent.com/u/17508029?v=4","gravatar_id":"","url":"https://api.github.com/users/oathdruid","html_url":"https://github.com/oathdruid","followers_url":"https://api.github.com/users/oathdruid/followers","following_url":"https://api.github.com/users/oathdruid/following{/other_user}","gists_url":"https://api.github.com/users/oathdruid/gists{/gist_id}","starred_url":"https://api.github.com/users/oathdruid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oathdruid/subscriptions","organizations_url":"https://api.github.com/users/oathdruid/orgs","repos_url":"https://api.github.com/users/oathdruid/repos","events_url":"https://api.github.com/users/oathdruid/events{/privacy}","received_events_url":"https://api.github.com/users/oathdruid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T02:41:36Z","updated_at":"2024-07-07T02:41:36Z","author_association":"CONTRIBUTOR","body":"any suggestion?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212296577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212300609","html_url":"https://github.com/apache/brpc/issues/2680#issuecomment-2212300609","issue_url":"https://api.github.com/repos/apache/brpc/issues/2680","id":2212300609,"node_id":"IC_kwDOBhmkcs6D3QdB","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T03:00:19Z","updated_at":"2024-07-07T03:02:41Z","author_association":"CONTRIBUTOR","body":"有道理，这样的话，一定时期内都是EAGAIN，while里就可以判定连接断开，然后return结束，避免hang在这里。\r\n但是server的连接资源怎么释放？如果sever配置了ServerOptions.idle_timeout_sec=100, 那么超过100s后，server会把该连接释放吗？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212300609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212310641","html_url":"https://github.com/apache/brpc/issues/2674#issuecomment-2212310641","issue_url":"https://api.github.com/repos/apache/brpc/issues/2674","id":2212310641,"node_id":"IC_kwDOBhmkcs6D3S5x","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T03:47:04Z","updated_at":"2024-07-07T03:47:04Z","author_association":"CONTRIBUTOR","body":"编译的时候加了-g么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212310641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212311550","html_url":"https://github.com/apache/brpc/pull/2673#issuecomment-2212311550","issue_url":"https://api.github.com/repos/apache/brpc/issues/2673","id":2212311550,"node_id":"IC_kwDOBhmkcs6D3TH-","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T03:52:11Z","updated_at":"2024-07-07T03:52:11Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212311550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212314895","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2212314895","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2212314895,"node_id":"IC_kwDOBhmkcs6D3T8P","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T04:07:26Z","updated_at":"2024-07-07T04:07:26Z","author_association":"CONTRIBUTOR","body":"请问下按照这样做了设计之后，有具体的性能测试报告么？能够直观的显示这种改造在特定场景下带来的性能提升","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212314895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212317073","html_url":"https://github.com/apache/brpc/issues/2682#issuecomment-2212317073","issue_url":"https://api.github.com/repos/apache/brpc/issues/2682","id":2212317073,"node_id":"IC_kwDOBhmkcs6D3UeR","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T04:19:56Z","updated_at":"2024-07-07T04:19:56Z","author_association":"CONTRIBUTOR","body":"@serverglen 这个帅哥有空看下\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212317073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212394912","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2212394912","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2212394912,"node_id":"IC_kwDOBhmkcs6D3neg","user":{"login":"MJY-HUST","id":52315061,"node_id":"MDQ6VXNlcjUyMzE1MDYx","avatar_url":"https://avatars.githubusercontent.com/u/52315061?v=4","gravatar_id":"","url":"https://api.github.com/users/MJY-HUST","html_url":"https://github.com/MJY-HUST","followers_url":"https://api.github.com/users/MJY-HUST/followers","following_url":"https://api.github.com/users/MJY-HUST/following{/other_user}","gists_url":"https://api.github.com/users/MJY-HUST/gists{/gist_id}","starred_url":"https://api.github.com/users/MJY-HUST/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MJY-HUST/subscriptions","organizations_url":"https://api.github.com/users/MJY-HUST/orgs","repos_url":"https://api.github.com/users/MJY-HUST/repos","events_url":"https://api.github.com/users/MJY-HUST/events{/privacy}","received_events_url":"https://api.github.com/users/MJY-HUST/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T10:05:30Z","updated_at":"2024-07-07T10:09:55Z","author_association":"CONTRIBUTOR","body":"> 请问下按照这样做了设计之后，有具体的性能测试报告么？能够直观的显示这种改造在特定场景下带来的性能提升\r\n\r\n修改前：\r\n![image](https://github.com/apache/brpc/assets/52315061/a768eaf1-c245-4ea6-b618-b0f86bcaaf59)\r\n![image](https://github.com/apache/brpc/assets/52315061/62cb1acf-db75-4649-a1ed-0761984d3015)\r\n![image](https://github.com/apache/brpc/assets/52315061/880aa151-730e-462e-9031-1c9b3d3b6f50)\r\n\r\n\r\n修改后：\r\n![image](https://github.com/apache/brpc/assets/52315061/ff286c26-a807-48f6-a5e6-d2f39516e63e)\r\n![image](https://github.com/apache/brpc/assets/52315061/fa75079c-b122-4d06-a461-f959bc3fa619)\r\n![image](https://github.com/apache/brpc/assets/52315061/35cee657-7d7d-410e-9350-23fe7aec5b6b)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212394912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212397182","html_url":"https://github.com/apache/brpc/pull/2645#issuecomment-2212397182","issue_url":"https://api.github.com/repos/apache/brpc/issues/2645","id":2212397182,"node_id":"IC_kwDOBhmkcs6D3oB-","user":{"login":"MJY-HUST","id":52315061,"node_id":"MDQ6VXNlcjUyMzE1MDYx","avatar_url":"https://avatars.githubusercontent.com/u/52315061?v=4","gravatar_id":"","url":"https://api.github.com/users/MJY-HUST","html_url":"https://github.com/MJY-HUST","followers_url":"https://api.github.com/users/MJY-HUST/followers","following_url":"https://api.github.com/users/MJY-HUST/following{/other_user}","gists_url":"https://api.github.com/users/MJY-HUST/gists{/gist_id}","starred_url":"https://api.github.com/users/MJY-HUST/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MJY-HUST/subscriptions","organizations_url":"https://api.github.com/users/MJY-HUST/orgs","repos_url":"https://api.github.com/users/MJY-HUST/repos","events_url":"https://api.github.com/users/MJY-HUST/events{/privacy}","received_events_url":"https://api.github.com/users/MJY-HUST/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-07T10:13:29Z","updated_at":"2024-07-07T10:13:29Z","author_association":"CONTRIBUTOR","body":"> 请问下按照这样做了设计之后，有具体的性能测试报告么？能够直观的显示这种改造在特定场景下带来的性能提升\r\n\r\n相同的负载下，修改前单链表维护的keytable，锁成为瓶颈。cpu被打满，sy时间占比高；\r\n修改后，解除了锁的瓶颈，cpu利用率降低，QPS提升了一倍。火焰图上和加锁/解锁操作对应的futex_wait\\futex_wake耗时部分消失","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212397182/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212953955","html_url":"https://github.com/apache/brpc/issues/2679#issuecomment-2212953955","issue_url":"https://api.github.com/repos/apache/brpc/issues/2679","id":2212953955,"node_id":"IC_kwDOBhmkcs6D5v9j","user":{"login":"skyflower","id":5895849,"node_id":"MDQ6VXNlcjU4OTU4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/5895849?v=4","gravatar_id":"","url":"https://api.github.com/users/skyflower","html_url":"https://github.com/skyflower","followers_url":"https://api.github.com/users/skyflower/followers","following_url":"https://api.github.com/users/skyflower/following{/other_user}","gists_url":"https://api.github.com/users/skyflower/gists{/gist_id}","starred_url":"https://api.github.com/users/skyflower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skyflower/subscriptions","organizations_url":"https://api.github.com/users/skyflower/orgs","repos_url":"https://api.github.com/users/skyflower/repos","events_url":"https://api.github.com/users/skyflower/events{/privacy}","received_events_url":"https://api.github.com/users/skyflower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-08T03:53:04Z","updated_at":"2024-07-08T03:53:04Z","author_association":"NONE","body":"ok, I'll try it. Thank you for your help.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2212953955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2213126321","html_url":"https://github.com/apache/brpc/pull/2669#issuecomment-2213126321","issue_url":"https://api.github.com/repos/apache/brpc/issues/2669","id":2213126321,"node_id":"IC_kwDOBhmkcs6D6aCx","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-08T06:22:28Z","updated_at":"2024-07-08T06:22:28Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2213126321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2213364819","html_url":"https://github.com/apache/brpc/issues/2676#issuecomment-2213364819","issue_url":"https://api.github.com/repos/apache/brpc/issues/2676","id":2213364819,"node_id":"IC_kwDOBhmkcs6D7URT","user":{"login":"dashjay","id":45532257,"node_id":"MDQ6VXNlcjQ1NTMyMjU3","avatar_url":"https://avatars.githubusercontent.com/u/45532257?v=4","gravatar_id":"","url":"https://api.github.com/users/dashjay","html_url":"https://github.com/dashjay","followers_url":"https://api.github.com/users/dashjay/followers","following_url":"https://api.github.com/users/dashjay/following{/other_user}","gists_url":"https://api.github.com/users/dashjay/gists{/gist_id}","starred_url":"https://api.github.com/users/dashjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dashjay/subscriptions","organizations_url":"https://api.github.com/users/dashjay/orgs","repos_url":"https://api.github.com/users/dashjay/repos","events_url":"https://api.github.com/users/dashjay/events{/privacy}","received_events_url":"https://api.github.com/users/dashjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-08T08:31:47Z","updated_at":"2024-07-08T08:31:47Z","author_association":"NONE","body":"You can easily use command like this to access BRPC server with http proto\r\n```\r\ndd if=/dev/random of=/tmp/test bs=4M count=1\r\necho \"{\\\"message\\\": \\\"$(cat /tmp/test | base64)\\\"}\" > test.1\r\ncurl -H 'Content-Type: application/json' --data-binary \"@./test.1\" 0.0.0.0:8000/EchoService/Echo > /tmp/test.2\r\n\r\n```\r\n\r\nBut you can not use grpc client to do this.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2213364819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]