[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768443391","html_url":"https://github.com/apache/pulsar/issues/9324#issuecomment-768443391","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9324","id":768443391,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODQ0MzM5MQ==","user":{"login":"MarvinCai","id":13480084,"node_id":"MDQ6VXNlcjEzNDgwMDg0","avatar_url":"https://avatars.githubusercontent.com/u/13480084?v=4","gravatar_id":"","url":"https://api.github.com/users/MarvinCai","html_url":"https://github.com/MarvinCai","followers_url":"https://api.github.com/users/MarvinCai/followers","following_url":"https://api.github.com/users/MarvinCai/following{/other_user}","gists_url":"https://api.github.com/users/MarvinCai/gists{/gist_id}","starred_url":"https://api.github.com/users/MarvinCai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarvinCai/subscriptions","organizations_url":"https://api.github.com/users/MarvinCai/orgs","repos_url":"https://api.github.com/users/MarvinCai/repos","events_url":"https://api.github.com/users/MarvinCai/events{/privacy}","received_events_url":"https://api.github.com/users/MarvinCai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T17:22:40Z","updated_at":"2021-01-27T17:22:40Z","author_association":"CONTRIBUTOR","body":"Spring repo is already removed: https://github.com/apache/pulsar/pull/9280, please rebase on the latest master.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768443391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768528518","html_url":"https://github.com/apache/pulsar/issues/9267#issuecomment-768528518","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9267","id":768528518,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODUyODUxOA==","user":{"login":"alexanderursu99","id":30787801,"node_id":"MDQ6VXNlcjMwNzg3ODAx","avatar_url":"https://avatars.githubusercontent.com/u/30787801?v=4","gravatar_id":"","url":"https://api.github.com/users/alexanderursu99","html_url":"https://github.com/alexanderursu99","followers_url":"https://api.github.com/users/alexanderursu99/followers","following_url":"https://api.github.com/users/alexanderursu99/following{/other_user}","gists_url":"https://api.github.com/users/alexanderursu99/gists{/gist_id}","starred_url":"https://api.github.com/users/alexanderursu99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexanderursu99/subscriptions","organizations_url":"https://api.github.com/users/alexanderursu99/orgs","repos_url":"https://api.github.com/users/alexanderursu99/repos","events_url":"https://api.github.com/users/alexanderursu99/events{/privacy}","received_events_url":"https://api.github.com/users/alexanderursu99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T19:38:39Z","updated_at":"2021-01-27T19:38:39Z","author_association":"NONE","body":"I learned about that just recently, but I believe it doesn't quite fit what I was aiming for. I was hoping there could be some similar setting at the topic-level, or even for individual subscriptions, because I believe that setting is applied to an entire namespace.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768528518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768542514","html_url":"https://github.com/apache/pulsar/issues/6734#issuecomment-768542514","issue_url":"https://api.github.com/repos/apache/pulsar/issues/6734","id":768542514,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODU0MjUxNA==","user":{"login":"pointearth","id":1859919,"node_id":"MDQ6VXNlcjE4NTk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/1859919?v=4","gravatar_id":"","url":"https://api.github.com/users/pointearth","html_url":"https://github.com/pointearth","followers_url":"https://api.github.com/users/pointearth/followers","following_url":"https://api.github.com/users/pointearth/following{/other_user}","gists_url":"https://api.github.com/users/pointearth/gists{/gist_id}","starred_url":"https://api.github.com/users/pointearth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pointearth/subscriptions","organizations_url":"https://api.github.com/users/pointearth/orgs","repos_url":"https://api.github.com/users/pointearth/repos","events_url":"https://api.github.com/users/pointearth/events{/privacy}","received_events_url":"https://api.github.com/users/pointearth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T20:03:17Z","updated_at":"2021-01-27T20:03:17Z","author_association":"CONTRIBUTOR","body":"Can you guys open this ticket and finish it or move it to a suitable appointment? appreciate!\r\n[Add readCompact option #7461](https://github.com/apache/pulsar/pull/7461 )","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768542514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768580828","html_url":"https://github.com/apache/pulsar/pull/9338#issuecomment-768580828","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9338","id":768580828,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODU4MDgyOA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T21:13:14Z","updated_at":"2021-01-27T21:13:14Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768580828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768657251","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768657251","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768657251,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY1NzI1MQ==","user":{"login":"fayce66","id":60093074,"node_id":"MDQ6VXNlcjYwMDkzMDc0","avatar_url":"https://avatars.githubusercontent.com/u/60093074?v=4","gravatar_id":"","url":"https://api.github.com/users/fayce66","html_url":"https://github.com/fayce66","followers_url":"https://api.github.com/users/fayce66/followers","following_url":"https://api.github.com/users/fayce66/following{/other_user}","gists_url":"https://api.github.com/users/fayce66/gists{/gist_id}","starred_url":"https://api.github.com/users/fayce66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayce66/subscriptions","organizations_url":"https://api.github.com/users/fayce66/orgs","repos_url":"https://api.github.com/users/fayce66/repos","events_url":"https://api.github.com/users/fayce66/events{/privacy}","received_events_url":"https://api.github.com/users/fayce66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T23:57:06Z","updated_at":"2021-01-28T01:24:13Z","author_association":"NONE","body":"it still does not work for me, I tried to simplify my code to get closer to your example and I even hard-coded the partition key, but it still does not work. I run the producer for 1 or 2 mins to produce few messages then I launch the consumer expecting only the last message but I get:\r\n\r\n```\r\nPM|9827|9839|09:47:07.429047|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429175|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429206|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429228|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429256|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429277|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429296|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\nPM|9827|9839|09:47:07.429322|INFO|[pm.calib.sub]: new message from [stsd.local] on topic [persistent://xyz/foo/calib]: partition key:[test_key]\r\n```\r\nAlso, if I stop the producer and let the consumer receive all the messages, then restart just the consumer with the same subscription to receive the last message with the partition key = 'test_key', I get no messages at all, like I would for a subscription with no topic compaction...(btw, you are using  conf.setSubscriptionInitialPosition(InitialPositionEarliest); does that mean that for topic compaction subscription, it's absolutely necessary to set this configuration to receive the last message of my partition key?)\r\n\r\nDid you use a newer version of pulsar than 2.7.0? This is the version that I am using now.\r\n\r\nI noticed that you are using:  `result = producer.send(msg, id);` which does not exist in pulsar c++ 2.7.0\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768657251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768672320","html_url":"https://github.com/apache/pulsar/pull/9323#issuecomment-768672320","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9323","id":768672320,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY3MjMyMA==","user":{"login":"Renkai","id":3381789,"node_id":"MDQ6VXNlcjMzODE3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/3381789?v=4","gravatar_id":"","url":"https://api.github.com/users/Renkai","html_url":"https://github.com/Renkai","followers_url":"https://api.github.com/users/Renkai/followers","following_url":"https://api.github.com/users/Renkai/following{/other_user}","gists_url":"https://api.github.com/users/Renkai/gists{/gist_id}","starred_url":"https://api.github.com/users/Renkai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Renkai/subscriptions","organizations_url":"https://api.github.com/users/Renkai/orgs","repos_url":"https://api.github.com/users/Renkai/repos","events_url":"https://api.github.com/users/Renkai/events{/privacy}","received_events_url":"https://api.github.com/users/Renkai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T00:37:03Z","updated_at":"2021-01-28T00:37:03Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768672320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768676817","html_url":"https://github.com/apache/pulsar/pull/9321#issuecomment-768676817","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9321","id":768676817,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY3NjgxNw==","user":{"login":"RobertIndie","id":16974619,"node_id":"MDQ6VXNlcjE2OTc0NjE5","avatar_url":"https://avatars.githubusercontent.com/u/16974619?v=4","gravatar_id":"","url":"https://api.github.com/users/RobertIndie","html_url":"https://github.com/RobertIndie","followers_url":"https://api.github.com/users/RobertIndie/followers","following_url":"https://api.github.com/users/RobertIndie/following{/other_user}","gists_url":"https://api.github.com/users/RobertIndie/gists{/gist_id}","starred_url":"https://api.github.com/users/RobertIndie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RobertIndie/subscriptions","organizations_url":"https://api.github.com/users/RobertIndie/orgs","repos_url":"https://api.github.com/users/RobertIndie/repos","events_url":"https://api.github.com/users/RobertIndie/events{/privacy}","received_events_url":"https://api.github.com/users/RobertIndie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T00:49:13Z","updated_at":"2021-01-28T00:49:13Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768676817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768679642","html_url":"https://github.com/apache/pulsar/pull/9342#issuecomment-768679642","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9342","id":768679642,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY3OTY0Mg==","user":{"login":"zymap","id":24502569,"node_id":"MDQ6VXNlcjI0NTAyNTY5","avatar_url":"https://avatars.githubusercontent.com/u/24502569?v=4","gravatar_id":"","url":"https://api.github.com/users/zymap","html_url":"https://github.com/zymap","followers_url":"https://api.github.com/users/zymap/followers","following_url":"https://api.github.com/users/zymap/following{/other_user}","gists_url":"https://api.github.com/users/zymap/gists{/gist_id}","starred_url":"https://api.github.com/users/zymap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zymap/subscriptions","organizations_url":"https://api.github.com/users/zymap/orgs","repos_url":"https://api.github.com/users/zymap/repos","events_url":"https://api.github.com/users/zymap/events{/privacy}","received_events_url":"https://api.github.com/users/zymap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T00:57:06Z","updated_at":"2021-01-28T00:57:06Z","author_association":"MEMBER","body":"> By the way, when a AdminResource was created with a full topic name, the internal topicName would be initialized with a wrong name. eg for persistent://public/default/my-topic, the internal topicName is persistent://public /default/persistent://public/default/my-topic. This wrong behavior should be fixed.\r\n\r\nI am curious about this, when will this behavior happen? As I know, the rest API is defined as `tenant/namespace/topicname`. So that means this case will happen when you name your topic name as `persistent://public /default/topic` explicitly.\r\n\r\n> Currently creating a partition of an existed partitioned topic was created doesn't throw any exception. However it should be an invalid behavior. The reason is that when a non partitioned topic was created, it only checks whether the number of partitions is positive. However, no matter the topic doesn't exist or the topic is an existed partition, the number of partitions is 0. This PR is to distinguish these two cases and throw a RestException when the non-partitioned topic is an existed partition.\r\n\r\nAbout this issue, I am using master code to test and it shows I can't create a non-partitioned topic with a name that contains the `-partition-`\r\n\r\n```\r\n bin/pulsar-admin topics create persistent://public/default/tttest-partition-0\r\n08:46:49.633 [AsyncHttpClient-7-1] WARN  org.apache.pulsar.client.admin.internal.BaseResource - [http://localhost:8080/admin/v2/persistent/public/default/tttest-partition-0] Failed to perform http put request: javax.ws.rs.ClientErrorException: HTTP 412 Precondition Failed\r\nCan't create topic tttest-partition-0 with \"-partition-\" followed by numeric value if there isn't a partitioned topic tttest created.\r\n\r\nReason: Can't create topic tttest-partition-0 with \"-partition-\" followed by numeric value if there isn't a partitioned topic tttest created.\r\n```\r\n\r\nSo could you please give me more information about this case?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768679642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768680533","html_url":"https://github.com/apache/pulsar/pull/9246#issuecomment-768680533","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9246","id":768680533,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY4MDUzMw==","user":{"login":"freeznet","id":1381618,"node_id":"MDQ6VXNlcjEzODE2MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1381618?v=4","gravatar_id":"","url":"https://api.github.com/users/freeznet","html_url":"https://github.com/freeznet","followers_url":"https://api.github.com/users/freeznet/followers","following_url":"https://api.github.com/users/freeznet/following{/other_user}","gists_url":"https://api.github.com/users/freeznet/gists{/gist_id}","starred_url":"https://api.github.com/users/freeznet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freeznet/subscriptions","organizations_url":"https://api.github.com/users/freeznet/orgs","repos_url":"https://api.github.com/users/freeznet/repos","events_url":"https://api.github.com/users/freeznet/events{/privacy}","received_events_url":"https://api.github.com/users/freeznet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T00:59:38Z","updated_at":"2021-01-28T00:59:38Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768680533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768680940","html_url":"https://github.com/apache/pulsar/pull/9299#issuecomment-768680940","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9299","id":768680940,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY4MDk0MA==","user":{"login":"freeznet","id":1381618,"node_id":"MDQ6VXNlcjEzODE2MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1381618?v=4","gravatar_id":"","url":"https://api.github.com/users/freeznet","html_url":"https://github.com/freeznet","followers_url":"https://api.github.com/users/freeznet/followers","following_url":"https://api.github.com/users/freeznet/following{/other_user}","gists_url":"https://api.github.com/users/freeznet/gists{/gist_id}","starred_url":"https://api.github.com/users/freeznet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freeznet/subscriptions","organizations_url":"https://api.github.com/users/freeznet/orgs","repos_url":"https://api.github.com/users/freeznet/repos","events_url":"https://api.github.com/users/freeznet/events{/privacy}","received_events_url":"https://api.github.com/users/freeznet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:00:49Z","updated_at":"2021-01-28T01:00:49Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768680940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768681024","html_url":"https://github.com/apache/pulsar/pull/9318#issuecomment-768681024","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9318","id":768681024,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY4MTAyNA==","user":{"login":"freeznet","id":1381618,"node_id":"MDQ6VXNlcjEzODE2MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1381618?v=4","gravatar_id":"","url":"https://api.github.com/users/freeznet","html_url":"https://github.com/freeznet","followers_url":"https://api.github.com/users/freeznet/followers","following_url":"https://api.github.com/users/freeznet/following{/other_user}","gists_url":"https://api.github.com/users/freeznet/gists{/gist_id}","starred_url":"https://api.github.com/users/freeznet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freeznet/subscriptions","organizations_url":"https://api.github.com/users/freeznet/orgs","repos_url":"https://api.github.com/users/freeznet/repos","events_url":"https://api.github.com/users/freeznet/events{/privacy}","received_events_url":"https://api.github.com/users/freeznet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:01:04Z","updated_at":"2021-01-28T01:01:04Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768681024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768683901","html_url":"https://github.com/apache/pulsar/pull/9302#issuecomment-768683901","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9302","id":768683901,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY4MzkwMQ==","user":{"login":"MarvinCai","id":13480084,"node_id":"MDQ6VXNlcjEzNDgwMDg0","avatar_url":"https://avatars.githubusercontent.com/u/13480084?v=4","gravatar_id":"","url":"https://api.github.com/users/MarvinCai","html_url":"https://github.com/MarvinCai","followers_url":"https://api.github.com/users/MarvinCai/followers","following_url":"https://api.github.com/users/MarvinCai/following{/other_user}","gists_url":"https://api.github.com/users/MarvinCai/gists{/gist_id}","starred_url":"https://api.github.com/users/MarvinCai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarvinCai/subscriptions","organizations_url":"https://api.github.com/users/MarvinCai/orgs","repos_url":"https://api.github.com/users/MarvinCai/repos","events_url":"https://api.github.com/users/MarvinCai/events{/privacy}","received_events_url":"https://api.github.com/users/MarvinCai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:09:12Z","updated_at":"2021-01-28T01:09:12Z","author_association":"CONTRIBUTOR","body":"@zymap can you take another look","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768683901/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768687398","html_url":"https://github.com/apache/pulsar/pull/9163#issuecomment-768687398","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9163","id":768687398,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY4NzM5OA==","user":{"login":"MarvinCai","id":13480084,"node_id":"MDQ6VXNlcjEzNDgwMDg0","avatar_url":"https://avatars.githubusercontent.com/u/13480084?v=4","gravatar_id":"","url":"https://api.github.com/users/MarvinCai","html_url":"https://github.com/MarvinCai","followers_url":"https://api.github.com/users/MarvinCai/followers","following_url":"https://api.github.com/users/MarvinCai/following{/other_user}","gists_url":"https://api.github.com/users/MarvinCai/gists{/gist_id}","starred_url":"https://api.github.com/users/MarvinCai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarvinCai/subscriptions","organizations_url":"https://api.github.com/users/MarvinCai/orgs","repos_url":"https://api.github.com/users/MarvinCai/repos","events_url":"https://api.github.com/users/MarvinCai/events{/privacy}","received_events_url":"https://api.github.com/users/MarvinCai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:18:25Z","updated_at":"2021-01-28T01:18:25Z","author_association":"CONTRIBUTOR","body":"Now ConsumerImpl constructor will throw exception when client try to directly construct a Consumer with Key_Shared subscription type and DeadLetterTopic. Same to all subclass like ZeroQueueCosumer, RawReader...., this shouldn't affect existing logic using ConsumerBuilder to create consumer as builder will check and make sure there's no DLQ set for Key_Shared sub type. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768687398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768697191","html_url":"https://github.com/apache/pulsar/pull/9342#issuecomment-768697191","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9342","id":768697191,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODY5NzE5MQ==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:28:25Z","updated_at":"2021-01-28T01:28:35Z","author_association":"CONTRIBUTOR","body":"@zymap You're right for the 1st issue. It only affects my tests code:\r\n\r\n```java\r\n        final String partitionName = TopicName.get(topicName).getPartition(0).toString();\r\n        try {\r\n            persistentTopics.createNonPartitionedTopic(testTenant, testNamespace, partitionName, false);\r\n```\r\n\r\nI should use the local name in tests instead of in the `validateTopicName`.\r\n\r\nFor the 2nd issue, the intention for creating non-partitioned topic with `-partition-` suffix is to create missed partitions. So you should first create a partitioned topic.\r\n\r\nHere's an example:\r\n\r\n```bash\r\n# 1. A partition was somehow deleted or not created successfully\r\n$ ./bin/pulsar-admin topics create-partitioned-topic xyz -p 3\r\n$ ./bin/pulsar-admin topics delete xyz-partition-0\r\n$ ./bin/pulsar-admin topics list public/default              \r\n\"persistent://public/default/xyz-partition-2\"\r\n\"persistent://public/default/xyz-partition-1\"\r\n# 2. Then we can create a non-partitioned topic to create missed partitions\r\n$ ./bin/pulsar-admin topics create xyz-partition-0           \r\n$ ./bin/pulsar-admin topics list public/default   \r\n\"persistent://public/default/xyz-partition-2\"\r\n\"persistent://public/default/xyz-partition-0\"\r\n\"persistent://public/default/xyz-partition-1\"\r\n# 3. However, if you create a existed partition, there's no error, this is what I want to fix\r\n$ ./bin/pulsar-admin topics create xyz-partition-2\r\n```\r\n\r\nThe rule is from https://github.com/apache/pulsar/pull/5148.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768697191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768709957","html_url":"https://github.com/apache/pulsar/pull/9342#issuecomment-768709957","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9342","id":768709957,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODcwOTk1Nw==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:36:04Z","updated_at":"2021-01-28T01:36:04Z","author_association":"CONTRIBUTOR","body":"The test is now broken, I'll fix it first.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768709957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768728921","html_url":"https://github.com/apache/pulsar/pull/9335#issuecomment-768728921","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9335","id":768728921,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODcyODkyMQ==","user":{"login":"zymap","id":24502569,"node_id":"MDQ6VXNlcjI0NTAyNTY5","avatar_url":"https://avatars.githubusercontent.com/u/24502569?v=4","gravatar_id":"","url":"https://api.github.com/users/zymap","html_url":"https://github.com/zymap","followers_url":"https://api.github.com/users/zymap/followers","following_url":"https://api.github.com/users/zymap/following{/other_user}","gists_url":"https://api.github.com/users/zymap/gists{/gist_id}","starred_url":"https://api.github.com/users/zymap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zymap/subscriptions","organizations_url":"https://api.github.com/users/zymap/orgs","repos_url":"https://api.github.com/users/zymap/repos","events_url":"https://api.github.com/users/zymap/events{/privacy}","received_events_url":"https://api.github.com/users/zymap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:47:20Z","updated_at":"2021-01-28T01:47:20Z","author_association":"MEMBER","body":"```\r\nError:  Failures: \r\n1476\r\nError:  org.apache.pulsar.broker.stats.PrometheusMetricsTest.testAuthMetrics(org.apache.pulsar.broker.stats.PrometheusMetricsTest)\r\n1477\r\n[INFO]   Run 1: PASS\r\n1478\r\nError:    Run 2: PrometheusMetricsTest.testAuthMetrics:764 expected [token] but found [tls]\r\n1479\r\n[INFO] \r\n1480\r\nError:  org.apache.pulsar.broker.transaction.buffer.TransactionStablePositionTest.abortTxnTest(org.apache.pulsar.broker.transaction.buffer.TransactionStablePositionTest)\r\n1481\r\n[INFO]   Run 1: PASS\r\n1482\r\nError:    Run 2: TransactionStablePositionTest.abortTxnTest:140 ? Execution org.apache.pulsar.c...\r\n1483\r\n[INFO] \r\n1484\r\nError:  org.apache.pulsar.broker.transaction.coordinator.TransactionCoordinatorClientTest.testCommitAndAbort(org.apache.pulsar.broker.transaction.coordinator.TransactionCoordinatorClientTest)\r\n1485\r\n[INFO]   Run 1: PASS\r\n1486\r\nError:    Run 2: TransactionCoordinatorClientTest.testCommitAndAbort:89 ? CoordinatorNotFound T...\r\n1487\r\n[INFO] \r\n1488\r\nError:  org.apache.pulsar.broker.transaction.coordinator.TransactionCoordinatorClientTest.testNewTxn(org.apache.pulsar.broker.transaction.coordinator.TransactionCoordinatorClientTest)\r\n1489\r\n[INFO]   Run 1: PASS\r\n1490\r\nError:    Run 2: TransactionCoordinatorClientTest.testNewTxn:82 ? CoordinatorNotFound Transacti...\r\n1491\r\n[INFO] \r\n1492\r\n[INFO] \r\n1493\r\nError:  Tests run: 503, Failures: 4, Errors: 0, Skipped: 0\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768728921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768741683","html_url":"https://github.com/apache/pulsar/pull/9334#issuecomment-768741683","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9334","id":768741683,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc0MTY4Mw==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T01:58:58Z","updated_at":"2021-01-28T01:58:58Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768741683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768748293","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768748293","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768748293,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc0ODI5Mw==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T02:17:16Z","updated_at":"2021-01-28T02:17:16Z","author_association":"CONTRIBUTOR","body":"@fayce66 Sorry it's a new API. For the old client, you can use\r\n\r\n```c++\r\n        result = producer.send(msg);\r\n        if (result == ResultOk) {\r\n            LOG_INFO(\"Send \" << msg << \" to \" << msg.getMessageId());\r\n```\r\n\r\nIn addition, I suspect it's not a client side problem but just your compaction failed. You can run a Java consumer to see whether it works. Could you check your broker logs when you did the topic compaction? Here's my logs:\r\n\r\n```\r\n10:12:07.084 [pulsar-web-67-12] INFO  org.apache.pulsar.broker.admin.impl.PersistentTopicsBase - [null] Trigger compaction on topic persistent://public/default/xyz-topic\r\n10:12:07.095 [ForkJoinPool.commonPool-worker-4] INFO  org.apache.pulsar.client.impl.ConsumerStatsRecorderImpl - Starting Pulsar consumer status recorder with config:\r\n// ...\r\n10:12:07.103 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650]] Connected to server\r\n10:12:07.099 [ForkJoinPool.commonPool-worker-4] INFO  org.apache.pulsar.client.impl.ConsumerStatsRecorderImpl - Pulsar client config: {\r\n// ...\r\n10:12:07.103 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650]] Connected to server\r\n10:12:07.106 [ForkJoinPool.commonPool-worker-4] INFO  org.eclipse.jetty.server.RequestLog - 127.0.0.1 - - [28/一月/2021:10:12:07 +0800] \"PUT /admin/v2/persistent/public/default/xyz-topic/compaction HTTP/1.1\" 204 0 \"-\" \"Pulsar-Java-v2.8.0-SNAPSHOT\" 24\r\n10:12:07.106 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - New connection from /127.0.0.1:50650\r\n10:12:07.108 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Subscribing to topic on cnx [id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650], consumerId 0\r\n10:12:07.108 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Subscribing on topic persistent://public/default/xyz-topic / __compaction\r\n10:12:07.108 [pulsar-io-50-12] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic] Cursor __compaction recovered to position 22:9\r\n10:12:07.109 [pulsar-io-50-12] INFO  org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl - [public/default/persistent/xyz-topic] Creating ledger, metadata: {component=[109, 97, 110, 97, 103, 101, 100, 45, 108, 101, 100, 103, 101, 114], pulsar/managed-ledger=[112, 117, 98, 108, 105, 99, 47, 100, 101, 102, 97, 117, 108, 116, 47, 112, 101, 114, 115, 105, 115, 116, 101, 110, 116, 47, 120, 121, 122, 45, 116, 111, 112, 105, 99], pulsar/cursor=[95, 95, 99, 111, 109, 112, 97, 99, 116, 105, 111, 110], application=[112, 117, 108, 115, 97, 114]} - metadata ops timeout : 60 seconds\r\n10:12:07.112 [main-EventThread] INFO  org.apache.bookkeeper.client.LedgerCreateOp - Ensemble: [127.0.0.1:3181] for ledger: 23\r\n10:12:07.118 [BookKeeperClientWorker-OrderedExecutor-11-0] INFO  org.apache.bookkeeper.mledger.impl.MetaStoreImpl - [public/default/persistent/xyz-topic] [__compaction] Updating cursor info ledgerId=23 mark-delete=22:9\r\n10:12:07.119 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic] Updated cursor __compaction with ledger id 23 md-position=22:9 rd-position=22:10\r\n10:12:07.119 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl - [public/default/persistent/xyz-topic] Opened new cursor: ManagedCursorImpl{ledger=public/default/persistent/xyz-topic, name=__compaction, ackPos=22:9, readPos=22:10}\r\n10:12:07.120 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic-__compaction] Rewind from 22:10 to 22:10\r\n10:12:07.120 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://public/default/xyz-topic] There are no replicated subscriptions on the topic\r\n10:12:07.120 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://public/default/xyz-topic][__compaction] Created new subscription for 0\r\n10:12:07.120 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Created subscription on topic persistent://public/default/xyz-topic / __compaction\r\n10:12:07.121 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Subscribed to topic on localhost/127.0.0.1:6650 -- consumer: 0\r\n10:12:07.123 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Seek subscription to message id -1:-1:-1\r\n10:12:07.125 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.Consumer - Disconnecting consumer: Consumer{subscription=CompactorSubscription{topic=persistent://public/default/xyz-topic, name=__compaction}, consumerId=0, consumerName=3ee4e, address=/127.0.0.1:50650}\r\n10:12:07.125 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.AbstractDispatcherSingleActiveConsumer - Removing consumer Consumer{subscription=CompactorSubscription{topic=persistent://public/default/xyz-topic, name=__compaction}, consumerId=0, consumerName=3ee4e, address=/127.0.0.1:50650}\r\n10:12:07.126 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.persistent.PersistentSubscription - [persistent://public/default/xyz-topic][__compaction] Successfully disconnected consumers from subscription, proceeding with cursor reset\r\n10:12:07.126 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic] Initiate reset position to 22:-1 on cursor __compaction\r\n10:12:07.127 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [localhost/127.0.0.1:6650] Broker notification of Closed consumer: 0\r\n10:12:07.127 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://public/default/xyz-topic] [__compaction] Closed connection [id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650] -- Will try again in 0.1 s\r\n10:12:07.130 [BookKeeperClientWorker-OrderedExecutor-11-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic] reset position to 22:-1 before current read position 22:10 on cursor __compaction\r\n10:12:07.132 [BookKeeperClientWorker-OrderedExecutor-11-0] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] [persistent://public/default/xyz-topic][__compaction] Reset subscription to message id -1:-1\r\n10:12:07.133 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Successfully reset subscription to message id -1:-1:-1\r\n10:12:07.228 [pulsar-timer-99-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://public/default/xyz-topic] [__compaction] Reconnecting after timeout\r\n10:12:07.230 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Subscribing to topic on cnx [id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650], consumerId 0\r\n10:12:07.230 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Subscribing on topic persistent://public/default/xyz-topic / __compaction\r\n10:12:07.231 [pulsar-io-50-12] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic-__compaction] Rewind from 22:-1 to 22:0\r\n10:12:07.231 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://public/default/xyz-topic] There are no replicated subscriptions on the topic\r\n10:12:07.231 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://public/default/xyz-topic][__compaction] Created new subscription for 0\r\n10:12:07.231 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Created subscription on topic persistent://public/default/xyz-topic / __compaction\r\n10:12:07.231 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Subscribed to topic on localhost/127.0.0.1:6650 -- consumer: 0\r\n10:12:07.239 [pulsar-external-listener-97-1] WARN  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic] [__compaction] Could not get connection while getLastMessageId -- Will try again in 100 ms\r\n10:12:07.240 [pulsar-external-listener-97-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Get topic last message Id\r\n10:12:07.243 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Successfully getLastMessageId 22:9\r\n10:12:07.243 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Get topic last message Id\r\n10:12:07.244 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Successfully getLastMessageId 22:9\r\n10:12:07.245 [pulsar-client-io-96-1] INFO  org.apache.pulsar.compaction.TwoPhaseCompactor - Commencing phase one of compaction for persistent://public/default/xyz-topic, reading to 22:9:-1:0\r\n10:12:07.256 [main-EventThread] INFO  org.apache.bookkeeper.client.LedgerCreateOp - Ensemble: [127.0.0.1:3181] for ledger: 24\r\n10:12:07.256 [main-EventThread] INFO  org.apache.pulsar.compaction.TwoPhaseCompactor - Commencing phase two of compaction for persistent://public/default/xyz-topic, from 22:0:-1:-1 to 22:9:-1:-1, compacting 1 keys to ledger 24\r\n10:12:07.258 [main-EventThread] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Seek subscription to message id 22:0:-1:-1\r\n10:12:07.259 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.Consumer - Disconnecting consumer: Consumer{subscription=CompactorSubscription{topic=persistent://public/default/xyz-topic, name=__compaction}, consumerId=0, consumerName=3ee4e, address=/127.0.0.1:50650}\r\n10:12:07.259 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.AbstractDispatcherSingleActiveConsumer - Removing consumer Consumer{subscription=CompactorSubscription{topic=persistent://public/default/xyz-topic, name=__compaction}, consumerId=0, consumerName=3ee4e, address=/127.0.0.1:50650}\r\n10:12:07.259 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.persistent.PersistentSubscription - [persistent://public/default/xyz-topic][__compaction] Successfully disconnected consumers from subscription, proceeding with cursor reset\r\n10:12:07.259 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [localhost/127.0.0.1:6650] Broker notification of Closed consumer: 0\r\n10:12:07.259 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://public/default/xyz-topic] [__compaction] Closed connection [id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650] -- Will try again in 0.1 s\r\n10:12:07.259 [bookkeeper-ml-workers-OrderedExecutor-3-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic] Initiate reset position to 22:0 on cursor __compaction\r\n10:12:07.261 [BookKeeperClientWorker-OrderedExecutor-11-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic] reset position to 22:0 before current read position 22:10 on cursor __compaction\r\n10:12:07.261 [BookKeeperClientWorker-OrderedExecutor-11-0] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] [persistent://public/default/xyz-topic][__compaction] Reset subscription to message id 22:0\r\n10:12:07.261 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Successfully reset subscription to message id 22:0:-1:-1\r\n10:12:07.360 [pulsar-timer-99-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://public/default/xyz-topic] [__compaction] Reconnecting after timeout\r\n10:12:07.361 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Subscribing to topic on cnx [id: 0xebd955fb, L:/127.0.0.1:50650 - R:localhost/127.0.0.1:6650], consumerId 0\r\n10:12:07.361 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Subscribing on topic persistent://public/default/xyz-topic / __compaction\r\n10:12:07.362 [pulsar-io-50-12] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [public/default/persistent/xyz-topic-__compaction] Rewind from 22:0 to 22:0\r\n10:12:07.362 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://public/default/xyz-topic] There are no replicated subscriptions on the topic\r\n10:12:07.362 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://public/default/xyz-topic][__compaction] Created new subscription for 0\r\n10:12:07.362 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Created subscription on topic persistent://public/default/xyz-topic / __compaction\r\n10:12:07.362 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic][__compaction] Subscribed to topic on localhost/127.0.0.1:6650 -- consumer: 0\r\n10:12:07.382 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Closing consumer: consumerId=0\r\n10:12:07.382 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.AbstractDispatcherSingleActiveConsumer - Removing consumer Consumer{subscription=CompactorSubscription{topic=persistent://public/default/xyz-topic, name=__compaction}, consumerId=0, consumerName=3ee4e, address=/127.0.0.1:50650}\r\n10:12:07.382 [pulsar-io-50-12] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:50650] Closed consumer, consumerId=0\r\n10:12:07.383 [pulsar-client-io-96-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://public/default/xyz-topic] [__compaction] Closed consumer\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768748293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768758668","html_url":"https://github.com/apache/pulsar/pull/9334#issuecomment-768758668","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9334","id":768758668,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc1ODY2OA==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T02:48:00Z","updated_at":"2021-01-28T02:48:00Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768758668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768766609","html_url":"https://github.com/apache/pulsar/pull/9300#issuecomment-768766609","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9300","id":768766609,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc2NjYwOQ==","user":{"login":"gaoran10","id":15029908,"node_id":"MDQ6VXNlcjE1MDI5OTA4","avatar_url":"https://avatars.githubusercontent.com/u/15029908?v=4","gravatar_id":"","url":"https://api.github.com/users/gaoran10","html_url":"https://github.com/gaoran10","followers_url":"https://api.github.com/users/gaoran10/followers","following_url":"https://api.github.com/users/gaoran10/following{/other_user}","gists_url":"https://api.github.com/users/gaoran10/gists{/gist_id}","starred_url":"https://api.github.com/users/gaoran10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaoran10/subscriptions","organizations_url":"https://api.github.com/users/gaoran10/orgs","repos_url":"https://api.github.com/users/gaoran10/repos","events_url":"https://api.github.com/users/gaoran10/events{/privacy}","received_events_url":"https://api.github.com/users/gaoran10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:09:17Z","updated_at":"2021-01-28T03:09:17Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768766609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768766864","html_url":"https://github.com/apache/pulsar/issues/9347#issuecomment-768766864","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9347","id":768766864,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc2Njg2NA==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:10:09Z","updated_at":"2021-01-28T03:10:09Z","author_association":"CONTRIBUTOR","body":"@GLouMcK I think there are a couple of CVE related fixes in the master branch. Could you please check if the problem still in the master branch?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768766864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768770287","html_url":"https://github.com/apache/pulsar/pull/9342#issuecomment-768770287","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9342","id":768770287,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc3MDI4Nw==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:20:32Z","updated_at":"2021-01-28T03:20:32Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768770287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768774231","html_url":"https://github.com/apache/pulsar/pull/8422#issuecomment-768774231","issue_url":"https://api.github.com/repos/apache/pulsar/issues/8422","id":768774231,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc3NDIzMQ==","user":{"login":"jiazhai","id":6348208,"node_id":"MDQ6VXNlcjYzNDgyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/6348208?v=4","gravatar_id":"","url":"https://api.github.com/users/jiazhai","html_url":"https://github.com/jiazhai","followers_url":"https://api.github.com/users/jiazhai/followers","following_url":"https://api.github.com/users/jiazhai/following{/other_user}","gists_url":"https://api.github.com/users/jiazhai/gists{/gist_id}","starred_url":"https://api.github.com/users/jiazhai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiazhai/subscriptions","organizations_url":"https://api.github.com/users/jiazhai/orgs","repos_url":"https://api.github.com/users/jiazhai/repos","events_url":"https://api.github.com/users/jiazhai/events{/privacy}","received_events_url":"https://api.github.com/users/jiazhai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:31:18Z","updated_at":"2021-01-28T03:31:18Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768774231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768775090","html_url":"https://github.com/apache/pulsar/issues/9174#issuecomment-768775090","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9174","id":768775090,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc3NTA5MA==","user":{"login":"Anonymitaet","id":50226895,"node_id":"MDQ6VXNlcjUwMjI2ODk1","avatar_url":"https://avatars.githubusercontent.com/u/50226895?v=4","gravatar_id":"","url":"https://api.github.com/users/Anonymitaet","html_url":"https://github.com/Anonymitaet","followers_url":"https://api.github.com/users/Anonymitaet/followers","following_url":"https://api.github.com/users/Anonymitaet/following{/other_user}","gists_url":"https://api.github.com/users/Anonymitaet/gists{/gist_id}","starred_url":"https://api.github.com/users/Anonymitaet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Anonymitaet/subscriptions","organizations_url":"https://api.github.com/users/Anonymitaet/orgs","repos_url":"https://api.github.com/users/Anonymitaet/repos","events_url":"https://api.github.com/users/Anonymitaet/events{/privacy}","received_events_url":"https://api.github.com/users/Anonymitaet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:33:16Z","updated_at":"2021-01-28T03:33:16Z","author_association":"MEMBER","body":"@eolivelli would you like to add docs for this change?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768775090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768779558","html_url":"https://github.com/apache/pulsar/issues/9344#issuecomment-768779558","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9344","id":768779558,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc3OTU1OA==","user":{"login":"congbobo184","id":39078850,"node_id":"MDQ6VXNlcjM5MDc4ODUw","avatar_url":"https://avatars.githubusercontent.com/u/39078850?v=4","gravatar_id":"","url":"https://api.github.com/users/congbobo184","html_url":"https://github.com/congbobo184","followers_url":"https://api.github.com/users/congbobo184/followers","following_url":"https://api.github.com/users/congbobo184/following{/other_user}","gists_url":"https://api.github.com/users/congbobo184/gists{/gist_id}","starred_url":"https://api.github.com/users/congbobo184/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/congbobo184/subscriptions","organizations_url":"https://api.github.com/users/congbobo184/orgs","repos_url":"https://api.github.com/users/congbobo184/repos","events_url":"https://api.github.com/users/congbobo184/events{/privacy}","received_events_url":"https://api.github.com/users/congbobo184/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:46:38Z","updated_at":"2021-01-28T03:46:38Z","author_association":"CONTRIBUTOR","body":"This is a bug for ack receipt, are you interested in fixing it?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768779558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768783067","html_url":"https://github.com/apache/pulsar/issues/9084#issuecomment-768783067","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9084","id":768783067,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODc4MzA2Nw==","user":{"login":"Anonymitaet","id":50226895,"node_id":"MDQ6VXNlcjUwMjI2ODk1","avatar_url":"https://avatars.githubusercontent.com/u/50226895?v=4","gravatar_id":"","url":"https://api.github.com/users/Anonymitaet","html_url":"https://github.com/Anonymitaet","followers_url":"https://api.github.com/users/Anonymitaet/followers","following_url":"https://api.github.com/users/Anonymitaet/following{/other_user}","gists_url":"https://api.github.com/users/Anonymitaet/gists{/gist_id}","starred_url":"https://api.github.com/users/Anonymitaet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Anonymitaet/subscriptions","organizations_url":"https://api.github.com/users/Anonymitaet/orgs","repos_url":"https://api.github.com/users/Anonymitaet/repos","events_url":"https://api.github.com/users/Anonymitaet/events{/privacy}","received_events_url":"https://api.github.com/users/Anonymitaet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T03:58:58Z","updated_at":"2021-01-28T03:58:58Z","author_association":"MEMBER","body":"Confirmed w/ @Renkai, it might take some time to solve this issue, but now I can add the workaround to docs to make users clear.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768783067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768804665","html_url":"https://github.com/apache/pulsar/pull/9342#issuecomment-768804665","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9342","id":768804665,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgwNDY2NQ==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:14:20Z","updated_at":"2021-01-28T05:14:20Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768804665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768806280","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-768806280","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":768806280,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgwNjI4MA==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:19:20Z","updated_at":"2021-01-28T05:19:20Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768806280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768808066","html_url":"https://github.com/apache/pulsar/issues/9297#issuecomment-768808066","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9297","id":768808066,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgwODA2Ng==","user":{"login":"congbobo184","id":39078850,"node_id":"MDQ6VXNlcjM5MDc4ODUw","avatar_url":"https://avatars.githubusercontent.com/u/39078850?v=4","gravatar_id":"","url":"https://api.github.com/users/congbobo184","html_url":"https://github.com/congbobo184","followers_url":"https://api.github.com/users/congbobo184/followers","following_url":"https://api.github.com/users/congbobo184/following{/other_user}","gists_url":"https://api.github.com/users/congbobo184/gists{/gist_id}","starred_url":"https://api.github.com/users/congbobo184/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/congbobo184/subscriptions","organizations_url":"https://api.github.com/users/congbobo184/orgs","repos_url":"https://api.github.com/users/congbobo184/repos","events_url":"https://api.github.com/users/congbobo184/events{/privacy}","received_events_url":"https://api.github.com/users/congbobo184/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:24:48Z","updated_at":"2021-01-28T05:32:58Z","author_association":"CONTRIBUTOR","body":"@wuYin in the certain case, if we close the broker graceful shutdown, we don't need to wait the zk session timeout. you can look https://github.com/apache/pulsar-helm-chart/pull/59 and upgrade the helm chart to 2.6.1-2 or hight version. Sorry I still haven't reproduced the flaky case.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768808066/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768808491","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-768808491","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":768808491,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgwODQ5MQ==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:25:57Z","updated_at":"2021-01-28T05:25:57Z","author_association":"MEMBER","body":"Thanks @eolivelli work for this, please fix the License header error:\r\n\r\n```\r\nError:  COMPILATION ERROR : \r\nError:  /home/runner/work/pulsar/pulsar/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java:[1317,13] admin has private access in org.apache.pulsar.admin.cli.CmdBase\r\nError:  /home/runner/work/pulsar/pulsar/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdNamespaces.java:[1109,13] admin has private access in org.apache.pulsar.admin.cli.CmdBase\r\nError:  Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project pulsar-client-tools: Compilation failure: Compilation failure: \r\nError:  /home/runner/work/pulsar/pulsar/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdTopics.java:[1317,13] admin has private access in org.apache.pulsar.admin.cli.CmdBase\r\nError:  /home/runner/work/pulsar/pulsar/pulsar-client-tools/src/main/java/org/apache/pulsar/admin/cli/CmdNamespaces.java:[1109,13] admin has private access in org.apache.pulsar.admin.cli.CmdBase\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768808491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768809856","html_url":"https://github.com/apache/pulsar/pull/9316#issuecomment-768809856","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9316","id":768809856,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgwOTg1Ng==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:29:57Z","updated_at":"2021-01-28T05:29:57Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768809856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768811948","html_url":"https://github.com/apache/pulsar/pull/9318#issuecomment-768811948","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9318","id":768811948,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgxMTk0OA==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:36:05Z","updated_at":"2021-01-28T05:36:05Z","author_association":"MEMBER","body":"Hello @freeznet Thanks you work on this, I agree with @zymap's point of view, it seems that it is more reasonable for us to use metricsPort as a field of InstanceConfig. Of course, there is no problem with your current implementation.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768811948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768812497","html_url":"https://github.com/apache/pulsar/pull/9325#issuecomment-768812497","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9325","id":768812497,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgxMjQ5Nw==","user":{"login":"wolfstudy","id":20965307,"node_id":"MDQ6VXNlcjIwOTY1MzA3","avatar_url":"https://avatars.githubusercontent.com/u/20965307?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfstudy","html_url":"https://github.com/wolfstudy","followers_url":"https://api.github.com/users/wolfstudy/followers","following_url":"https://api.github.com/users/wolfstudy/following{/other_user}","gists_url":"https://api.github.com/users/wolfstudy/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfstudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfstudy/subscriptions","organizations_url":"https://api.github.com/users/wolfstudy/orgs","repos_url":"https://api.github.com/users/wolfstudy/repos","events_url":"https://api.github.com/users/wolfstudy/events{/privacy}","received_events_url":"https://api.github.com/users/wolfstudy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T05:37:40Z","updated_at":"2021-01-28T05:37:40Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768812497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768825172","html_url":"https://github.com/apache/pulsar/pull/9316#issuecomment-768825172","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9316","id":768825172,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgyNTE3Mg==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:12:55Z","updated_at":"2021-01-28T06:12:55Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768825172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768825257","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-768825257","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":768825257,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgyNTI1Nw==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:13:09Z","updated_at":"2021-01-28T06:13:09Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768825257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768825581","html_url":"https://github.com/apache/pulsar/pull/9320#issuecomment-768825581","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9320","id":768825581,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgyNTU4MQ==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:14:04Z","updated_at":"2021-01-28T06:14:04Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768825581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768826385","html_url":"https://github.com/apache/pulsar/pull/9323#issuecomment-768826385","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9323","id":768826385,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgyNjM4NQ==","user":{"login":"315157973","id":9758905,"node_id":"MDQ6VXNlcjk3NTg5MDU=","avatar_url":"https://avatars.githubusercontent.com/u/9758905?v=4","gravatar_id":"","url":"https://api.github.com/users/315157973","html_url":"https://github.com/315157973","followers_url":"https://api.github.com/users/315157973/followers","following_url":"https://api.github.com/users/315157973/following{/other_user}","gists_url":"https://api.github.com/users/315157973/gists{/gist_id}","starred_url":"https://api.github.com/users/315157973/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/315157973/subscriptions","organizations_url":"https://api.github.com/users/315157973/orgs","repos_url":"https://api.github.com/users/315157973/repos","events_url":"https://api.github.com/users/315157973/events{/privacy}","received_events_url":"https://api.github.com/users/315157973/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:16:10Z","updated_at":"2021-01-28T06:16:10Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768826385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768827000","html_url":"https://github.com/apache/pulsar/pull/9320#issuecomment-768827000","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9320","id":768827000,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgyNzAwMA==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:17:46Z","updated_at":"2021-01-28T06:17:46Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768827000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768828752","html_url":"https://github.com/apache/pulsar/issues/9311#issuecomment-768828752","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9311","id":768828752,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgyODc1Mg==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:22:13Z","updated_at":"2021-01-28T06:22:13Z","author_association":"CONTRIBUTOR","body":"Thanks @rodrigoreis ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768828752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768834484","html_url":"https://github.com/apache/pulsar/pull/9350#issuecomment-768834484","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9350","id":768834484,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgzNDQ4NA==","user":{"login":"Renkai","id":3381789,"node_id":"MDQ6VXNlcjMzODE3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/3381789?v=4","gravatar_id":"","url":"https://api.github.com/users/Renkai","html_url":"https://github.com/Renkai","followers_url":"https://api.github.com/users/Renkai/followers","following_url":"https://api.github.com/users/Renkai/following{/other_user}","gists_url":"https://api.github.com/users/Renkai/gists{/gist_id}","starred_url":"https://api.github.com/users/Renkai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Renkai/subscriptions","organizations_url":"https://api.github.com/users/Renkai/orgs","repos_url":"https://api.github.com/users/Renkai/repos","events_url":"https://api.github.com/users/Renkai/events{/privacy}","received_events_url":"https://api.github.com/users/Renkai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:37:15Z","updated_at":"2021-01-28T06:37:15Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768834484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768836252","html_url":"https://github.com/apache/pulsar/pull/9300#issuecomment-768836252","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9300","id":768836252,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODgzNjI1Mg==","user":{"login":"gaoran10","id":15029908,"node_id":"MDQ6VXNlcjE1MDI5OTA4","avatar_url":"https://avatars.githubusercontent.com/u/15029908?v=4","gravatar_id":"","url":"https://api.github.com/users/gaoran10","html_url":"https://github.com/gaoran10","followers_url":"https://api.github.com/users/gaoran10/followers","following_url":"https://api.github.com/users/gaoran10/following{/other_user}","gists_url":"https://api.github.com/users/gaoran10/gists{/gist_id}","starred_url":"https://api.github.com/users/gaoran10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaoran10/subscriptions","organizations_url":"https://api.github.com/users/gaoran10/orgs","repos_url":"https://api.github.com/users/gaoran10/repos","events_url":"https://api.github.com/users/gaoran10/events{/privacy}","received_events_url":"https://api.github.com/users/gaoran10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:41:52Z","updated_at":"2021-01-28T06:41:52Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768836252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768841443","html_url":"https://github.com/apache/pulsar/issues/9271#issuecomment-768841443","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9271","id":768841443,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg0MTQ0Mw==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:53:11Z","updated_at":"2021-01-28T06:53:11Z","author_association":"CONTRIBUTOR","body":"@MarvinCai Thanks, one thing I want to add is the ledger been removed does not means the disk's resource will be released. It's related to the bookkeeper side. Bookkeeper will remove the data from the disk after the compaction task triggered or all of ledgers of an entry log been deleted. So @lichuan6 It's better to produce more data and make sure the ledger rollovered and wait for a while.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768841443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768841987","html_url":"https://github.com/apache/pulsar/issues/9267#issuecomment-768841987","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9267","id":768841987,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg0MTk4Nw==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:54:26Z","updated_at":"2021-01-28T06:54:26Z","author_association":"CONTRIBUTOR","body":"@Alxander64 The topic level policy is supported a 2.7.0 but not able for individual subscriptions.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768841987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768842245","html_url":"https://github.com/apache/pulsar/issues/9266#issuecomment-768842245","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9266","id":768842245,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg0MjI0NQ==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T06:55:01Z","updated_at":"2021-01-28T06:55:01Z","author_association":"CONTRIBUTOR","body":"Thanks @Renkai \r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768842245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768844957","html_url":"https://github.com/apache/pulsar/issues/8815#issuecomment-768844957","issue_url":"https://api.github.com/repos/apache/pulsar/issues/8815","id":768844957,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg0NDk1Nw==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:01:02Z","updated_at":"2021-01-28T07:01:02Z","author_association":"CONTRIBUTOR","body":"Cool @fmiguelez Would you please push a PR to enable this great plugin? Also, this should be check in the CI to avoid introduce some known CVE issues.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768844957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768846451","html_url":"https://github.com/apache/pulsar/issues/9330#issuecomment-768846451","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9330","id":768846451,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg0NjQ1MQ==","user":{"login":"zymap","id":24502569,"node_id":"MDQ6VXNlcjI0NTAyNTY5","avatar_url":"https://avatars.githubusercontent.com/u/24502569?v=4","gravatar_id":"","url":"https://api.github.com/users/zymap","html_url":"https://github.com/zymap","followers_url":"https://api.github.com/users/zymap/followers","following_url":"https://api.github.com/users/zymap/following{/other_user}","gists_url":"https://api.github.com/users/zymap/gists{/gist_id}","starred_url":"https://api.github.com/users/zymap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zymap/subscriptions","organizations_url":"https://api.github.com/users/zymap/orgs","repos_url":"https://api.github.com/users/zymap/repos","events_url":"https://api.github.com/users/zymap/events{/privacy}","received_events_url":"https://api.github.com/users/zymap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:04:10Z","updated_at":"2021-01-28T07:04:10Z","author_association":"MEMBER","body":"@maimom1924 Looks like this issue already addressed by this PR https://github.com/apache/pulsar/pull/6362. You can try with 2.5.1 or higher version to test it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768846451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768846704","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768846704","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768846704,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg0NjcwNA==","user":{"login":"fayce66","id":60093074,"node_id":"MDQ6VXNlcjYwMDkzMDc0","avatar_url":"https://avatars.githubusercontent.com/u/60093074?v=4","gravatar_id":"","url":"https://api.github.com/users/fayce66","html_url":"https://github.com/fayce66","followers_url":"https://api.github.com/users/fayce66/followers","following_url":"https://api.github.com/users/fayce66/following{/other_user}","gists_url":"https://api.github.com/users/fayce66/gists{/gist_id}","starred_url":"https://api.github.com/users/fayce66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayce66/subscriptions","organizations_url":"https://api.github.com/users/fayce66/orgs","repos_url":"https://api.github.com/users/fayce66/repos","events_url":"https://api.github.com/users/fayce66/events{/privacy}","received_events_url":"https://api.github.com/users/fayce66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:04:44Z","updated_at":"2021-01-28T07:04:44Z","author_association":"NONE","body":"I don't see any option to start the bin/pulsar-client with topic compaction...am i wrong? I tried to test it this way but the help message does not say how to set the read compacted to true:\r\n\r\n```\r\nbin/pulsar-client --url \"pulsar://marianas1:6650\" consume \"persistent://marianas/alphatrader/wing-calibration\" -s \"fek.sts\" -n 0\r\n\r\n17:01:45.245 [pulsar-client-io-1-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0xdf0a36c1, L:/10.0.3.6:48808 - R:marianas1/10.108.12.141:6650]] Connected to server\r\n17:01:45.809 [pulsar-client-io-1-1] INFO  org.apache.pulsar.client.impl.ConsumerStatsRecorderImpl - Starting Pulsar consumer status recorder with config: {\r\n  \"topicNames\" : [ \"persistent://marianas/alphatrader/wing-calibration\" ],\r\n  \"topicsPattern\" : null,\r\n  \"subscriptionName\" : \"fek.sts\",\r\n  \"subscriptionType\" : \"Exclusive\",\r\n  \"subscriptionMode\" : \"Durable\",\r\n  \"receiverQueueSize\" : 1000,\r\n  \"acknowledgementsGroupTimeMicros\" : 100000,\r\n  \"negativeAckRedeliveryDelayMicros\" : 60000000,\r\n  \"maxTotalReceiverQueueSizeAcrossPartitions\" : 50000,\r\n  \"consumerName\" : null,\r\n  \"ackTimeoutMillis\" : 0,\r\n  \"tickDurationMillis\" : 1000,\r\n  \"priorityLevel\" : 0,\r\n  \"maxPendingChuckedMessage\" : 10,\r\n  \"autoAckOldestChunkedMessageOnQueueFull\" : false,\r\n  \"expireTimeOfIncompleteChunkedMessageMillis\" : 60000,\r\n  \"cryptoFailureAction\" : \"FAIL\",\r\n  \"properties\" : { },\r\n  \"readCompacted\" : false,\r\n  \"subscriptionInitialPosition\" : \"Latest\",\r\n  \"patternAutoDiscoveryPeriod\" : 60,\r\n  \"regexSubscriptionMode\" : \"PersistentOnly\",\r\n  \"deadLetterPolicy\" : null,\r\n  \"retryEnable\" : false,\r\n  \"autoUpdatePartitions\" : true,\r\n  \"autoUpdatePartitionsIntervalSeconds\" : 60,\r\n  \"replicateSubscriptionState\" : false,\r\n  \"resetIncludeHead\" : false,\r\n  \"keySharedPolicy\" : null,\r\n  \"batchIndexAckEnabled\" : false\r\n}\r\n17:01:45.814 [pulsar-client-io-1-1] INFO  org.apache.pulsar.client.impl.ConsumerStatsRecorderImpl - Pulsar client config: {\r\n  \"serviceUrl\" : \"pulsar://marianas1:6650\",\r\n  \"authPluginClassName\" : null,\r\n  \"operationTimeoutMs\" : 30000,\r\n  \"statsIntervalSeconds\" : 60,\r\n  \"numIoThreads\" : 1,\r\n  \"numListenerThreads\" : 1,\r\n  \"connectionsPerBroker\" : 1,\r\n  \"useTcpNoDelay\" : true,\r\n  \"useTls\" : false,\r\n  \"tlsTrustCertsFilePath\" : \"\",\r\n  \"tlsAllowInsecureConnection\" : false,\r\n  \"tlsHostnameVerificationEnable\" : false,\r\n  \"concurrentLookupRequest\" : 5000,\r\n  \"maxLookupRequest\" : 50000,\r\n  \"maxLookupRedirects\" : 20,\r\n  \"maxNumberOfRejectedRequestPerConnection\" : 50,\r\n  \"keepAliveIntervalSeconds\" : 30,\r\n  \"connectionTimeoutMs\" : 10000,\r\n  \"requestTimeoutMs\" : 60000,\r\n  \"initialBackoffIntervalNanos\" : 100000000,\r\n  \"maxBackoffIntervalNanos\" : 60000000000,\r\n  \"listenerName\" : null,\r\n  \"useKeyStoreTls\" : false,\r\n  \"sslProvider\" : null,\r\n  \"tlsTrustStoreType\" : \"JKS\",\r\n  \"tlsTrustStorePath\" : \"\",\r\n  \"tlsTrustStorePassword\" : \"\",\r\n  \"tlsCiphers\" : [ ],\r\n  \"tlsProtocols\" : [ ],\r\n  \"proxyServiceUrl\" : null,\r\n  \"proxyProtocol\" : null,\r\n  \"enableTransaction\" : false\r\n}\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768846704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768855610","html_url":"https://github.com/apache/pulsar/pull/9334#issuecomment-768855610","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9334","id":768855610,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg1NTYxMA==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:24:21Z","updated_at":"2021-01-28T07:24:21Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768855610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768856896","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768856896","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768856896,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg1Njg5Ng==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:26:46Z","updated_at":"2021-01-28T07:27:09Z","author_association":"CONTRIBUTOR","body":"My description before might be a little confused.\r\n\r\nThe logs I showed before was from broker side with the compaction command `bin/pulsar-admin topics compact xyz-topic`. The broker itself uses an internal `ConsumerImpl` to consume messages and then do compaction. I just want you to check if your topic compaction was performed. The steps:\r\n\r\n1. Run a pulsar standalone in front end: `bin/pulsar standalone`, then you can see the output directly.\r\n2. Open a new terminal and run a producer to send some messages to `xyz-topic`.\r\n3. Run `bin/pulsar-admin topics compact xyz-topic`, see the output of standalone to check if the compaction was performed.\r\n\r\nAs for \r\n> You can run a Java consumer to see whether it works.\r\n\r\nI just mean if you're sure that the compaction was done in broker side, you can run a Java client application (`pulsar-client` seems not to provide the option to enable `readCompacted`) to check if Java client could only read 1 message while C++ client reads all messages.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768856896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768859529","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-768859529","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":768859529,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg1OTUyOQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:31:28Z","updated_at":"2021-01-28T07:31:28Z","author_association":"CONTRIBUTOR","body":"@wolfstudy  thank you for the heads up, I have to rebase on master, probably some other changes went in.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768859529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768859816","html_url":"https://github.com/apache/pulsar/pull/9292#issuecomment-768859816","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9292","id":768859816,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg1OTgxNg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:31:59Z","updated_at":"2021-01-28T07:31:59Z","author_association":"CONTRIBUTOR","body":"@codelipenghui \r\nthis improvement serializes long-array to protobuf directly which should not cost cpu, and managed-ledger has a cap on max entries per ledger so, that will make sure to have a limit on size of long array. encoded 150 long shouldn't be a problem in terms of size and cpu as broker persist into bookie into a separate non-io background thread. we can also control size with `managedLedgerMaxUnackedRangesToPersist` config.\r\n\r\n>  I think we should to add a flag for enabling or disabling this enhancement.\r\n\r\nSure, let me add the flag.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768859816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768861343","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768861343","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768861343,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg2MTM0Mw==","user":{"login":"fayce66","id":60093074,"node_id":"MDQ6VXNlcjYwMDkzMDc0","avatar_url":"https://avatars.githubusercontent.com/u/60093074?v=4","gravatar_id":"","url":"https://api.github.com/users/fayce66","html_url":"https://github.com/fayce66","followers_url":"https://api.github.com/users/fayce66/followers","following_url":"https://api.github.com/users/fayce66/following{/other_user}","gists_url":"https://api.github.com/users/fayce66/gists{/gist_id}","starred_url":"https://api.github.com/users/fayce66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayce66/subscriptions","organizations_url":"https://api.github.com/users/fayce66/orgs","repos_url":"https://api.github.com/users/fayce66/repos","events_url":"https://api.github.com/users/fayce66/events{/privacy}","received_events_url":"https://api.github.com/users/fayce66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:34:55Z","updated_at":"2021-01-28T07:37:26Z","author_association":"NONE","body":"OK, I rerun the pulsar-admin topics compact commands and effectively I can see some __compaction messages in the log now, and I restarted my client and it looks like it is working now. I did that 2 times yesterday and it did not work, that is strange. FYI, I stop and restart the pulsar-daemon every morning. Are the configurations saved or do I have to re-run the topics commands all the time I restart the broker??\r\n\r\nHere is my log, I think the compaction is working now, but I'm gonna keep on testing some more to make sure it's OK now:\r\n\r\n```\r\n16:14:05.400 [pulsar-web-68-12] INFO  org.apache.pulsar.broker.admin.impl.PersistentTopicsBase - [null] Trigger compaction on topic persistent://marianas/alphatrader/wing-calibration\r\n16:14:05.421 [ForkJoinPool.commonPool-worker-29] INFO  org.apache.pulsar.client.impl.ConsumerStatsRecorderImpl - Starting Pulsar consumer status recorder with config: {\r\n  \"topicNames\" : [ \"persistent://marianas/alphatrader/wing-calibration\" ],\r\n  \"topicsPattern\" : null,\r\n  \"subscriptionName\" : \"__compaction\",\r\n  \"subscriptionType\" : \"Exclusive\",\r\n  \"subscriptionMode\" : \"Durable\",\r\n  \"receiverQueueSize\" : 1000,\r\n  \"acknowledgementsGroupTimeMicros\" : 100000,\r\n  \"negativeAckRedeliveryDelayMicros\" : 60000000,\r\n  \"maxTotalReceiverQueueSizeAcrossPartitions\" : 50000,\r\n  \"consumerName\" : null,\r\n  \"ackTimeoutMillis\" : 0,\r\n  \"tickDurationMillis\" : 1000,\r\n  \"priorityLevel\" : 0,\r\n  \"maxPendingChuckedMessage\" : 10,\r\n  \"autoAckOldestChunkedMessageOnQueueFull\" : false,\r\n  \"expireTimeOfIncompleteChunkedMessageMillis\" : 60000,\r\n  \"cryptoFailureAction\" : \"FAIL\",\r\n  \"properties\" : { },\r\n  \"readCompacted\" : true,\r\n  \"subscriptionInitialPosition\" : \"Latest\",\r\n  \"patternAutoDiscoveryPeriod\" : 60,\r\n  \"regexSubscriptionMode\" : \"PersistentOnly\",\r\n  \"deadLetterPolicy\" : null,\r\n  \"retryEnable\" : false,\r\n  \"autoUpdatePartitions\" : true,\r\n  \"autoUpdatePartitionsIntervalSeconds\" : 60,\r\n  \"replicateSubscriptionState\" : false,\r\n  \"resetIncludeHead\" : false,\r\n  \"keySharedPolicy\" : null,\r\n  \"batchIndexAckEnabled\" : false\r\n}\r\n16:14:05.425 [ForkJoinPool.commonPool-worker-29] INFO  org.apache.pulsar.client.impl.ConsumerStatsRecorderImpl - Pulsar client config: {\r\n  \"serviceUrl\" : \"pulsar://localhost:6650\",\r\n  \"authPluginClassName\" : \"org.apache.pulsar.client.impl.auth.AuthenticationDisabled\",\r\n  \"operationTimeoutMs\" : 30000,\r\n  \"statsIntervalSeconds\" : 60,\r\n  \"numIoThreads\" : 1,\r\n  \"numListenerThreads\" : 1,\r\n  \"connectionsPerBroker\" : 1,\r\n  \"useTcpNoDelay\" : true,\r\n  \"useTls\" : false,\r\n  \"tlsTrustCertsFilePath\" : null,\r\n  \"tlsAllowInsecureConnection\" : false,\r\n  \"tlsHostnameVerificationEnable\" : false,\r\n  \"concurrentLookupRequest\" : 5000,\r\n  \"maxLookupRequest\" : 50000,\r\n  \"maxLookupRedirects\" : 20,\r\n  \"maxNumberOfRejectedRequestPerConnection\" : 50,\r\n  \"keepAliveIntervalSeconds\" : 30,\r\n  \"connectionTimeoutMs\" : 10000,\r\n  \"requestTimeoutMs\" : 60000,\r\n  \"initialBackoffIntervalNanos\" : 100000000,\r\n  \"maxBackoffIntervalNanos\" : 60000000000,\r\n  \"listenerName\" : null,\r\n  \"useKeyStoreTls\" : false,\r\n  \"sslProvider\" : null,\r\n  \"tlsTrustStoreType\" : \"JKS\",\r\n  \"tlsTrustStorePath\" : null,\r\n  \"tlsTrustStorePassword\" : null,\r\n  \"tlsCiphers\" : [ ],\r\n  \"tlsProtocols\" : [ ],\r\n  \"proxyServiceUrl\" : null,\r\n  \"proxyProtocol\" : null,\r\n  \"enableTransaction\" : false\r\n}\r\n16:14:05.432 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConnectionPool - [[id: 0x977756f3, L:/127.0.0.1:42032 - R:localhost/127.0.0.1:6650]] Connected to server\r\n16:14:05.432 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - New connection from /127.0.0.1:42032\r\n16:14:05.436 [ForkJoinPool.commonPool-worker-29] INFO  org.eclipse.jetty.server.RequestLog - 127.0.0.1 - - [28/Jan/2021:16:14:05 +0900] \"PUT /admin/v2/persistent/marianas/alphatrader/wing-calibration/compaction HTTP/1.1\" 204 0 \"-\" \"Pulsar-Java-v2.7.0\" 38\r\n16:14:05.437 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Subscribing to topic on cnx [id: 0x977756f3, L:/127.0.0.1:42032 - R:localhost/127.0.0.1:6650], consumerId 0\r\n16:14:05.437 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] Subscribing on topic persistent://marianas/alphatrader/wing-calibration / __compaction\r\n16:14:05.437 [pulsar-io-50-41] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration-__compaction] Rewind from 13911:132 to 13911:132\r\n16:14:05.437 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://marianas/alphatrader/wing-calibration] There are no replicated subscriptions on the topic\r\n16:14:05.437 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://marianas/alphatrader/wing-calibration][__compaction] Created new subscription for 0\r\n16:14:05.437 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] Created subscription on topic persistent://marianas/alphatrader/wing-calibration / __compaction\r\n16:14:05.438 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Subscribed to topic on localhost/127.0.0.1:6650 -- consumer: 0\r\n16:14:05.442 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Seek subscription to message id -1:-1:-1\r\n16:14:05.443 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.Consumer - Disconnecting consumer: Consumer{subscription=CompactorSubscription{topic=persistent://marianas/alphatrader/wing-calibration, name=__compaction}, consumerId=0, consumerName=99cae, address=/127.0.0.1:42032}\r\n16:14:05.443 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.AbstractDispatcherSingleActiveConsumer - Removing consumer Consumer{subscription=CompactorSubscription{topic=persistent://marianas/alphatrader/wing-calibration, name=__compaction}, consumerId=0, consumerName=99cae, address=/127.0.0.1:42032}\r\n16:14:05.444 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentSubscription - [persistent://marianas/alphatrader/wing-calibration][__compaction] Successfully disconnected consumers from subscription, proceeding with cursor reset\r\n16:14:05.444 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [localhost/127.0.0.1:6650] Broker notification of Closed consumer: 0\r\n16:14:05.444 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://marianas/alphatrader/wing-calibration] [__compaction] Closed connection [id: 0x977756f3, L:/127.0.0.1:42032 - R:localhost/127.0.0.1:6650] -- Will try again in 0.1 s\r\n16:14:05.446 [bookkeeper-ml-workers-OrderedExecutor-0-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration] Initiate reset position to 12028:-1 on cursor __compaction\r\n16:14:05.448 [bookkeeper-ml-workers-OrderedExecutor-0-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedLedgerImpl - [marianas/alphatrader/persistent/wing-calibration] Creating ledger, metadata: {component=[109, 97, 110, 97, 103, 101, 100, 45, 108, 101, 100, 103, 101, 114], pulsar/managed-ledger=[109, 97, 114, 105, 97, 110, 97, 115, 47, 97, 108, 112, 104, 97, 116, 114, 97, 100, 101, 114, 47, 112, 101, 114, 115, 105, 115, 116, 101, 110, 116, 47, 119, 105, 110, 103, 45, 99, 97, 108, 105, 98, 114, 97, 116, 105, 111, 110], pulsar/cursor=[95, 95, 99, 111, 109, 112, 97, 99, 116, 105, 111, 110], application=[112, 117, 108, 115, 97, 114]} - metadata ops timeout : 60 seconds\r\n16:14:05.465 [main-EventThread] INFO  org.apache.bookkeeper.client.LedgerCreateOp - Ensemble: [127.0.0.1:3181] for ledger: 19142\r\n16:14:05.475 [BookKeeperClientWorker-OrderedExecutor-14-0] INFO  org.apache.bookkeeper.mledger.impl.MetaStoreImpl - [marianas/alphatrader/persistent/wing-calibration] [__compaction] Updating cursor info ledgerId=19142 mark-delete=13911:131\r\n16:14:05.481 [bookkeeper-ml-workers-OrderedExecutor-0-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration] Updated cursor __compaction with ledger id 19142 md-position=13911:131 rd-position=13911:132\r\n16:14:05.484 [BookKeeperClientWorker-OrderedExecutor-14-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration] reset position to 12028:-1 before current read position 13911:132 on cursor __compaction\r\n16:14:05.487 [BookKeeperClientWorker-OrderedExecutor-14-0] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] [persistent://marianas/alphatrader/wing-calibration][__compaction] Reset subscription to message id -1:-1\r\n16:14:05.487 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Successfully reset subscription to message id -1:-1:-1\r\n16:14:05.546 [pulsar-timer-104-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://marianas/alphatrader/wing-calibration] [__compaction] Reconnecting after timeout\r\n16:14:05.548 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Subscribing to topic on cnx [id: 0x977756f3, L:/127.0.0.1:42032 - R:localhost/127.0.0.1:6650], consumerId 0\r\n16:14:05.548 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] Subscribing on topic persistent://marianas/alphatrader/wing-calibration / __compaction\r\n16:14:05.548 [pulsar-io-50-41] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration-__compaction] Rewind from 12028:-1 to 12028:0\r\n16:14:05.549 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://marianas/alphatrader/wing-calibration] There are no replicated subscriptions on the topic\r\n16:14:05.549 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://marianas/alphatrader/wing-calibration][__compaction] Created new subscription for 0\r\n16:14:05.549 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] Created subscription on topic persistent://marianas/alphatrader/wing-calibration / __compaction\r\n16:14:05.549 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Subscribed to topic on localhost/127.0.0.1:6650 -- consumer: 0\r\n16:14:05.590 [pulsar-external-listener-102-1] WARN  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration] [__compaction] Could not get connection while getLastMessageId -- Will try again in 100 ms\r\n16:14:05.592 [pulsar-external-listener-102-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Get topic last message Id\r\n16:14:05.614 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Successfully getLastMessageId 18970:696\r\n16:14:05.614 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Get topic last message Id\r\n16:14:05.618 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Successfully getLastMessageId 18970:696\r\n16:14:05.618 [pulsar-client-io-101-1] INFO  org.apache.pulsar.compaction.TwoPhaseCompactor - Commencing phase one of compaction for persistent://marianas/alphatrader/wing-calibration, reading to 18970:696:-1\r\n16:14:06.037 [io-write-scheduler-OrderedScheduler-0-0] INFO  org.apache.bookkeeper.statelib.impl.kv.RocksdbKVStore - Checkpoint local state store 000000000000000000/000000000000000000/000000000000000000 at revision -1\r\n16:14:06.037 [io-checkpoint-scheduler-OrderedScheduler-0-0] INFO  org.apache.bookkeeper.statelib.impl.rocksdb.checkpoint.RocksdbCheckpointTask - Create a local checkpoint of state store 000000000000000000/000000000000000000/000000000000000000 at /home/faycal/Tools/apache-pulsar-2.7.0/data/standalone/bookkeeper/ranges/data/ranges/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85\r\n16:14:06.175 [main-EventThread] INFO  org.apache.bookkeeper.client.LedgerCreateOp - Ensemble: [127.0.0.1:3181] for ledger: 19143\r\n16:14:06.176 [main-EventThread] INFO  org.apache.pulsar.compaction.TwoPhaseCompactor - Commencing phase two of compaction for persistent://marianas/alphatrader/wing-calibration, from 13911:130:-1:-1 to 18970:696:-1:-1, compacting 2 keys to ledger 19143\r\n16:14:06.178 [main-EventThread] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Seek subscription to message id 13911:130:-1:-1\r\n16:14:06.179 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.Consumer - Disconnecting consumer: Consumer{subscription=CompactorSubscription{topic=persistent://marianas/alphatrader/wing-calibration, name=__compaction}, consumerId=0, consumerName=99cae, address=/127.0.0.1:42032}\r\n16:14:06.179 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.AbstractDispatcherSingleActiveConsumer - Removing consumer Consumer{subscription=CompactorSubscription{topic=persistent://marianas/alphatrader/wing-calibration, name=__compaction}, consumerId=0, consumerName=99cae, address=/127.0.0.1:42032}\r\n16:14:06.179 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentSubscription - [persistent://marianas/alphatrader/wing-calibration][__compaction] Successfully disconnected consumers from subscription, proceeding with cursor reset\r\n16:14:06.179 [bookkeeper-ml-workers-OrderedExecutor-0-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration] Initiate reset position to 13911:130 on cursor __compaction\r\n16:14:06.179 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ClientCnx - [localhost/127.0.0.1:6650] Broker notification of Closed consumer: 0\r\n16:14:06.179 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://marianas/alphatrader/wing-calibration] [__compaction] Closed connection [id: 0x977756f3, L:/127.0.0.1:42032 - R:localhost/127.0.0.1:6650] -- Will try again in 0.1 s\r\n16:14:06.181 [BookKeeperClientWorker-OrderedExecutor-14-0] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration] reset position to 13911:130 before current read position 18970:697 on cursor __compaction\r\n16:14:06.181 [BookKeeperClientWorker-OrderedExecutor-14-0] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] [persistent://marianas/alphatrader/wing-calibration][__compaction] Reset subscription to message id 13911:130\r\n16:14:06.181 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Successfully reset subscription to message id 13911:130:-1:-1\r\n16:14:06.222 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator for /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved version from -1 to 0.\r\n16:14:06.226 [main-EventThread] INFO  org.apache.distributedlog.BKLogWriteHandler - Initiating Recovery For 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default> : []\r\n16:14:06.227 [io-checkpoint-scheduler-OrderedScheduler-0-0] INFO  org.apache.distributedlog.BKLogWriteHandler - Initiating Recovery For 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default> : []\r\n16:14:06.231 [DLM-/stream/storage-OrderedScheduler-0-0] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved to phase ALLOCATING : version = 0.\r\n16:14:06.245 [DLM-/stream/storage-OrderedScheduler-3-0-EventThread] INFO  org.apache.bookkeeper.client.LedgerCreateOp - Ensemble: [127.0.0.1:3181] for ledger: 19144\r\n16:14:06.261 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator for /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved version from 0 to 1.\r\n16:14:06.261 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved to phase ALLOCATED : version = 1.\r\n16:14:06.261 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved to phase HANDING_OVER : version = 1.\r\n16:14:06.261 [main-EventThread] INFO  org.apache.distributedlog.BKLogWriteHandler - No max ledger sequence number found while creating log segment 1 for 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default>.\r\n16:14:06.269 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved to phase HANDED_OVER : version = 1.\r\n16:14:06.269 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator for /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved version from 1 to 2.\r\n16:14:06.269 [main-EventThread] INFO  org.apache.distributedlog.bk.SimpleLedgerAllocator - Ledger allocator /stream/storage/000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017/<default>/allocation moved to phase ALLOCATING : version = 2.\r\n16:14:06.269 [main-EventThread] INFO  org.apache.distributedlog.logsegment.PerStreamLogSegmentCache - 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017 added log segment (inprogress_000000000000000001 : [LogSegmentId:19144, firstTxId:202, lastTxId:-999, version:VERSION_V5_SEQUENCE_ID, completionTime:0, recordCount:0, regionId:0, status:0, logSegmentSequenceNumber:1, lastEntryId:-1, lastSlotId:-1, inprogress:true, minActiveDLSN:DLSN{logSegmentSequenceNo=1, entryId=0, slotId=0}, startSequenceId:-1]) to cache.\r\n16:14:06.277 [main-EventThread] INFO  org.apache.distributedlog.BKLogWriteHandler - Deleting log segments older than 1611558846272 for 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default> : []\r\n16:14:06.278 [DLM-/stream/storage-OrderedScheduler-13-0] INFO  org.apache.distributedlog.BKLogSegmentWriter - Flushing before closing log segment 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default>:inprogress_000000000000000001\r\n16:14:06.280 [pulsar-timer-104-1] INFO  org.apache.pulsar.client.impl.ConnectionHandler - [persistent://marianas/alphatrader/wing-calibration] [__compaction] Reconnecting after timeout\r\n16:14:06.280 [BookKeeperClientWorker-OrderedExecutor-0-0] INFO  org.apache.distributedlog.BKLogSegmentWriter - Closing BKPerStreamLogWriter (abort=false) for 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default>:inprogress_000000000000000001 : lastDLSN = DLSN{logSegmentSequenceNo=1, entryId=0, slotId=0} outstandingTransmits = 1 writesPendingTransmit = 0\r\n16:14:06.280 [BookKeeperClientWorker-OrderedExecutor-0-0] INFO  org.apache.distributedlog.BKLogSegmentWriter - Stream 000000000000000000/000000000000000000/000000000000000000/checkpoints/90356abe-2479-421d-a67b-fcd874fdcd85/MANIFEST-000017:<default>:inprogress_000000000000000001 aborted 0 writes\r\n16:14:06.281 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Subscribing to topic on cnx [id: 0x977756f3, L:/127.0.0.1:42032 - R:localhost/127.0.0.1:6650], consumerId 0\r\n16:14:06.282 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] Subscribing on topic persistent://marianas/alphatrader/wing-calibration / __compaction\r\n16:14:06.282 [pulsar-io-50-41] INFO  org.apache.bookkeeper.mledger.impl.ManagedCursorImpl - [marianas/alphatrader/persistent/wing-calibration-__compaction] Rewind from 13911:130 to 13911:130\r\n16:14:06.282 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://marianas/alphatrader/wing-calibration] There are no replicated subscriptions on the topic\r\n16:14:06.282 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.persistent.PersistentTopic - [persistent://marianas/alphatrader/wing-calibration][__compaction] Created new subscription for 0\r\n16:14:06.282 [pulsar-io-50-41] INFO  org.apache.pulsar.broker.service.ServerCnx - [/127.0.0.1:42032] Created subscription on topic persistent://marianas/alphatrader/wing-calibration / __compaction\r\n16:14:06.282 [pulsar-client-io-101-1] INFO  org.apache.pulsar.client.impl.ConsumerImpl - [persistent://marianas/alphatrader/wing-calibration][__compaction] Subscribed to topic on localhost/127.0.0.1:6650 -- consumer: 0\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768861343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768862781","html_url":"https://github.com/apache/pulsar/issues/7242#issuecomment-768862781","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7242","id":768862781,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg2Mjc4MQ==","user":{"login":"zymap","id":24502569,"node_id":"MDQ6VXNlcjI0NTAyNTY5","avatar_url":"https://avatars.githubusercontent.com/u/24502569?v=4","gravatar_id":"","url":"https://api.github.com/users/zymap","html_url":"https://github.com/zymap","followers_url":"https://api.github.com/users/zymap/followers","following_url":"https://api.github.com/users/zymap/following{/other_user}","gists_url":"https://api.github.com/users/zymap/gists{/gist_id}","starred_url":"https://api.github.com/users/zymap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zymap/subscriptions","organizations_url":"https://api.github.com/users/zymap/orgs","repos_url":"https://api.github.com/users/zymap/repos","events_url":"https://api.github.com/users/zymap/events{/privacy}","received_events_url":"https://api.github.com/users/zymap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:37:57Z","updated_at":"2021-01-28T07:37:57Z","author_association":"MEMBER","body":"@Jennifer88huang @Anonymitaet Could you please help me to update the example to here: http://pulsar.apache.org/docs/en/2.2.1/reference-configuration/#log4j","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768862781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768864991","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-768864991","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":768864991,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg2NDk5MQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:43:05Z","updated_at":"2021-01-28T07:43:05Z","author_association":"CONTRIBUTOR","body":"@wolfstudy I have update this patch, thanks PTAL","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768864991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768866446","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768866446","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768866446,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg2NjQ0Ng==","user":{"login":"fayce66","id":60093074,"node_id":"MDQ6VXNlcjYwMDkzMDc0","avatar_url":"https://avatars.githubusercontent.com/u/60093074?v=4","gravatar_id":"","url":"https://api.github.com/users/fayce66","html_url":"https://github.com/fayce66","followers_url":"https://api.github.com/users/fayce66/followers","following_url":"https://api.github.com/users/fayce66/following{/other_user}","gists_url":"https://api.github.com/users/fayce66/gists{/gist_id}","starred_url":"https://api.github.com/users/fayce66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayce66/subscriptions","organizations_url":"https://api.github.com/users/fayce66/orgs","repos_url":"https://api.github.com/users/fayce66/repos","events_url":"https://api.github.com/users/fayce66/events{/privacy}","received_events_url":"https://api.github.com/users/fayce66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:46:29Z","updated_at":"2021-01-28T07:46:29Z","author_association":"NONE","body":"OK, what I have noticed is the following: if my producer produces more messages while my consumer is not started, the first time I start the consumer, it will receive all missed messages for the subscription. If I stop/restart the consumer with the same subscription, it will receive only the last message/key. Is that a normal behavior? In your test, your producer does not produce more messages before the second subscription new-sub is started...","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768866446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768870753","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768870753","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768870753,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg3MDc1Mw==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:55:46Z","updated_at":"2021-01-28T07:55:46Z","author_association":"CONTRIBUTOR","body":"I just did another test:\r\n\r\n1. Produce 10 messages.\r\n2. Compact the topic.\r\n3. Run consumer with `sub1`, only 1 message was received:\r\n\r\n```\r\n2021-01-28 15:53:32.400 INFO  [0x1031aedc0] SampleConsumer:49 | Receive: my-key => msg-9 from (10,9,-1,0)\r\n```\r\n \r\n4. Produce another 10 messages.\r\n5. Run consumer with `sub2`, 11 messages were received:\r\n\r\n```\r\n2021-01-28 15:54:06.022 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-9 from (10,9,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-0 from (10,10,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-1 from (10,11,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-2 from (10,12,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-3 from (10,13,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-4 from (10,14,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-5 from (10,15,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-6 from (10,16,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-7 from (10,17,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-8 from (10,18,-1,0)\r\n2021-01-28 15:54:06.025 INFO  [0x110a19dc0] SampleConsumer:49 | Receive: my-key => msg-9 from (10,19,-1,0)\r\n```\r\n\r\nI think the behavior is normal. Or did I just misunderstand?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768870753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768871076","html_url":"https://github.com/apache/pulsar/pull/9343#issuecomment-768871076","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9343","id":768871076,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg3MTA3Ng==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T07:56:31Z","updated_at":"2021-01-28T07:56:31Z","author_association":"CONTRIBUTOR","body":"> When we design Pulsar schema, we don't want to invent yet another type system.\r\n\r\n@sijie\r\nIn Kafka Connect we see this great abstraction of [Schema](https://kafka.apache.org/11/javadoc/org/apache/kafka/connect/data/Schema.html)\r\nand this makes it very easy to implement Connectors (especially Sinks) in a way that is not dependant on the serialization mechanism.\r\n\r\nTherefore in Pulsar IO we do not allow the function implementation to access the underlying Avro libraries, I like this fact and I would like not to change it.\r\n\r\nSo my thinking is that we need our way to describe a Schema with a Pulsar API.\r\nI would like also to follow up in order to add to the Pulsar Schema API all of the data types that are missing, like Arrays and Maps.\r\n\r\nIn my opinion without these features Pulsar IO won't be able to compete with Kafka Connect, and also to \"port\" existing Kafka Connect workflows to the Pulsar Ecosystem   ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768871076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768876195","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768876195","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768876195,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg3NjE5NQ==","user":{"login":"fayce66","id":60093074,"node_id":"MDQ6VXNlcjYwMDkzMDc0","avatar_url":"https://avatars.githubusercontent.com/u/60093074?v=4","gravatar_id":"","url":"https://api.github.com/users/fayce66","html_url":"https://github.com/fayce66","followers_url":"https://api.github.com/users/fayce66/followers","following_url":"https://api.github.com/users/fayce66/following{/other_user}","gists_url":"https://api.github.com/users/fayce66/gists{/gist_id}","starred_url":"https://api.github.com/users/fayce66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayce66/subscriptions","organizations_url":"https://api.github.com/users/fayce66/orgs","repos_url":"https://api.github.com/users/fayce66/repos","events_url":"https://api.github.com/users/fayce66/events{/privacy}","received_events_url":"https://api.github.com/users/fayce66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T08:07:31Z","updated_at":"2021-01-28T08:17:38Z","author_association":"NONE","body":"What do you mean by 'compact the topic' after producing 10 messages? you mean you run the pulsar-admin compact command again? if you started sub2 after the last 10 messages were produced, why is sub2 receiving everything if there's topic compaction?\r\n\r\nMaybe my mistake but I don't understand the topic compaction as functioning like this. My understanding is that it should always return the last message/key, even if more messages have been produced in the meantime, that is the whole point. The consumer is not interested in past messages, only the last values, like a last-value queue...it defeats the purpose of topic compaction if we have to receive all messages the first time, and then only the last one the second time...what do you think? Can you try to restart consumer sub2 a second time without producing more messages? you should receive only last message now...\r\n\r\nThe way it is working now it's like the compaction stops for a given subscription at the last message produced while the subscription is alive. When new messages are produced, it's like to topic compaction feature stays at the same messageId for that subscription, so that the subscription gets all the delta when restarted, and then the topic compaction is updated again...","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768876195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768882909","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768882909","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768882909,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg4MjkwOQ==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T08:21:22Z","updated_at":"2021-01-28T08:22:30Z","author_association":"CONTRIBUTOR","body":"> What do you mean by 'compact the topic' after producing 10 messages? you mean you run the pulsar-admin compact command again?\r\n\r\nYeah, the command is just a manual compaction for old messages. A manual compaction is just compacting the existed messages but not compact all old messages when a new message arrive, which is inefficient. Topic compaction's purpose is mainly for reducing storage.\r\n\r\nIf you have a consumer that subscribes a topic, even if no compaction was done, the consumer will always read the latest message because each time a message is acknowledged, the consume position will be persisted as a **cursor**. However, for some scenarios like what you said, once a newer message has been read, the old messages are no longer meaningful. We needn't store these messages any more so we can compact the topic. Then these messages are useless for new subscription.\r\n\r\nSee http://pulsar.apache.org/docs/en/concepts-topic-compaction/, There're two ways to do topic compaction:\r\n\r\n> Triggered automatically when the backlog reaches a certain size or can be triggered manually via the command line. See the Topic compaction cookbook\r\n\r\nThe command, is just triggering compaction manually. I think what you want is doing the compaction for each message arrived. It's unnecessary except you never acknowledge any message and restart consuming or use a new subscription frequently.\r\n\r\nA suggestion is to use namespace policy or topic level policy for topic compaction.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768882909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768889040","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768889040","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768889040,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg4OTA0MA==","user":{"login":"fayce66","id":60093074,"node_id":"MDQ6VXNlcjYwMDkzMDc0","avatar_url":"https://avatars.githubusercontent.com/u/60093074?v=4","gravatar_id":"","url":"https://api.github.com/users/fayce66","html_url":"https://github.com/fayce66","followers_url":"https://api.github.com/users/fayce66/followers","following_url":"https://api.github.com/users/fayce66/following{/other_user}","gists_url":"https://api.github.com/users/fayce66/gists{/gist_id}","starred_url":"https://api.github.com/users/fayce66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fayce66/subscriptions","organizations_url":"https://api.github.com/users/fayce66/orgs","repos_url":"https://api.github.com/users/fayce66/repos","events_url":"https://api.github.com/users/fayce66/events{/privacy}","received_events_url":"https://api.github.com/users/fayce66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T08:32:51Z","updated_at":"2021-01-28T08:35:55Z","author_association":"NONE","body":"OK, so basically when I restart my consumers, the best thing to do is to trigger topic compaction manually before I restarted them so that I get only the last message/key correct? if at least it works like this, then it is fine, but the documentation is confusing. I thought the compaction was done automatically behind the scenes when new messages are produced.\r\n\r\n> When you run compaction on a topic, Pulsar goes through a topic's backlog and removes messages that are obscured by later messages, i.e. it goes through the topic on a per-key basis and leaves only the most recent message associated with that key.\r\n\r\nThe doc should say \"when you run manual compaction on a topic\" that would be more clear.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768889040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768896124","html_url":"https://github.com/apache/pulsar/issues/7242#issuecomment-768896124","issue_url":"https://api.github.com/repos/apache/pulsar/issues/7242","id":768896124,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg5NjEyNA==","user":{"login":"Jennifer88huang-zz","id":47805623,"node_id":"MDQ6VXNlcjQ3ODA1NjIz","avatar_url":"https://avatars.githubusercontent.com/u/47805623?v=4","gravatar_id":"","url":"https://api.github.com/users/Jennifer88huang-zz","html_url":"https://github.com/Jennifer88huang-zz","followers_url":"https://api.github.com/users/Jennifer88huang-zz/followers","following_url":"https://api.github.com/users/Jennifer88huang-zz/following{/other_user}","gists_url":"https://api.github.com/users/Jennifer88huang-zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Jennifer88huang-zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jennifer88huang-zz/subscriptions","organizations_url":"https://api.github.com/users/Jennifer88huang-zz/orgs","repos_url":"https://api.github.com/users/Jennifer88huang-zz/repos","events_url":"https://api.github.com/users/Jennifer88huang-zz/events{/privacy}","received_events_url":"https://api.github.com/users/Jennifer88huang-zz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T08:45:57Z","updated_at":"2021-01-28T08:45:57Z","author_association":"CONTRIBUTOR","body":"@zymap sure, we're more than glad to do that.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768896124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768897901","html_url":"https://github.com/apache/pulsar/pull/9202#issuecomment-768897901","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9202","id":768897901,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODg5NzkwMQ==","user":{"login":"Renkai","id":3381789,"node_id":"MDQ6VXNlcjMzODE3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/3381789?v=4","gravatar_id":"","url":"https://api.github.com/users/Renkai","html_url":"https://github.com/Renkai","followers_url":"https://api.github.com/users/Renkai/followers","following_url":"https://api.github.com/users/Renkai/following{/other_user}","gists_url":"https://api.github.com/users/Renkai/gists{/gist_id}","starred_url":"https://api.github.com/users/Renkai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Renkai/subscriptions","organizations_url":"https://api.github.com/users/Renkai/orgs","repos_url":"https://api.github.com/users/Renkai/repos","events_url":"https://api.github.com/users/Renkai/events{/privacy}","received_events_url":"https://api.github.com/users/Renkai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T08:49:09Z","updated_at":"2021-01-28T08:49:09Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768897901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768910477","html_url":"https://github.com/apache/pulsar/issues/9341#issuecomment-768910477","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9341","id":768910477,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODkxMDQ3Nw==","user":{"login":"jack-tristan","id":19679570,"node_id":"MDQ6VXNlcjE5Njc5NTcw","avatar_url":"https://avatars.githubusercontent.com/u/19679570?v=4","gravatar_id":"","url":"https://api.github.com/users/jack-tristan","html_url":"https://github.com/jack-tristan","followers_url":"https://api.github.com/users/jack-tristan/followers","following_url":"https://api.github.com/users/jack-tristan/following{/other_user}","gists_url":"https://api.github.com/users/jack-tristan/gists{/gist_id}","starred_url":"https://api.github.com/users/jack-tristan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jack-tristan/subscriptions","organizations_url":"https://api.github.com/users/jack-tristan/orgs","repos_url":"https://api.github.com/users/jack-tristan/repos","events_url":"https://api.github.com/users/jack-tristan/events{/privacy}","received_events_url":"https://api.github.com/users/jack-tristan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T09:09:32Z","updated_at":"2021-01-28T09:09:32Z","author_association":"NONE","body":"Separate topic partition stats :\r\n# bin/pulsar-admin topics stats test-replicate/test-sub/pt-str-dev-v3-partition-2\r\n{\r\n  \"msgRateIn\" : 0.0,\r\n  \"msgThroughputIn\" : 0.0,\r\n  \"msgRateOut\" : 0.0,\r\n  \"msgThroughputOut\" : 0.0,\r\n  \"bytesInCounter\" : 147714,\r\n  \"msgInCounter\" : 1470,\r\n  \"bytesOutCounter\" : 0,\r\n  \"msgOutCounter\" : 0,\r\n  \"averageMsgSize\" : 0.0,\r\n  \"msgChunkPublished\" : false,\r\n  \"storageSize\" : 147714,\r\n  \"backlogSize\" : 0,\r\n  \"publishers\" : [ ],\r\n  \"subscriptions\" : { },\r\n  \"replication\" : {\r\n    \"pulsar-cluster-b\" : {\r\n      \"msgRateIn\" : 0.0,\r\n      \"msgThroughputIn\" : 0.0,\r\n      \"msgRateOut\" : 0.0,\r\n      \"msgThroughputOut\" : 0.0,\r\n      \"msgRateExpired\" : 0.0,\r\n      \"replicationBacklog\" : 0,\r\n      \"connected\" : true,\r\n      \"replicationDelayInSeconds\" : 0,\r\n      \"outboundConnection\" : \"[id: 0xc7ac7091, L:/10.200.12.163:52584 - R:10.200.19.35/10.200.19.35:6650]\",\r\n      \"outboundConnectedSince\" : \"2021-01-22T17:54:35.013+08:00\"\r\n    }\r\n  },\r\n  \"deduplicationStatus\" : \"Disabled\"\r\n}","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768910477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768914361","html_url":"https://github.com/apache/pulsar/issues/9317#issuecomment-768914361","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9317","id":768914361,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODkxNDM2MQ==","user":{"login":"BewareMyPower","id":18204803,"node_id":"MDQ6VXNlcjE4MjA0ODAz","avatar_url":"https://avatars.githubusercontent.com/u/18204803?v=4","gravatar_id":"","url":"https://api.github.com/users/BewareMyPower","html_url":"https://github.com/BewareMyPower","followers_url":"https://api.github.com/users/BewareMyPower/followers","following_url":"https://api.github.com/users/BewareMyPower/following{/other_user}","gists_url":"https://api.github.com/users/BewareMyPower/gists{/gist_id}","starred_url":"https://api.github.com/users/BewareMyPower/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BewareMyPower/subscriptions","organizations_url":"https://api.github.com/users/BewareMyPower/orgs","repos_url":"https://api.github.com/users/BewareMyPower/repos","events_url":"https://api.github.com/users/BewareMyPower/events{/privacy}","received_events_url":"https://api.github.com/users/BewareMyPower/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T09:16:22Z","updated_at":"2021-01-28T09:16:22Z","author_association":"CONTRIBUTOR","body":"> OK, so basically when I restart my consumers, the best thing to do is to trigger topic compaction manually before I restarted them so that I get only the last message/key correct?\r\n\r\nYes.\r\n\r\n> The doc should say \"when you run manual compaction on a topic\" that would be more clear.\r\n\r\nI think `manual` is redundant, because the automatic compaction does the same as the manual compaction. IMO, it should be emphasized that compaction here should be treated as an action that could be triggered. However, topic compaction is also a feature that is applied to a topic. So `run compaction on a topic` might be misunderstood as **applying this feature on a topic**.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768914361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768921716","html_url":"https://github.com/apache/pulsar/pull/9321#issuecomment-768921716","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9321","id":768921716,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODkyMTcxNg==","user":{"login":"RobertIndie","id":16974619,"node_id":"MDQ6VXNlcjE2OTc0NjE5","avatar_url":"https://avatars.githubusercontent.com/u/16974619?v=4","gravatar_id":"","url":"https://api.github.com/users/RobertIndie","html_url":"https://github.com/RobertIndie","followers_url":"https://api.github.com/users/RobertIndie/followers","following_url":"https://api.github.com/users/RobertIndie/following{/other_user}","gists_url":"https://api.github.com/users/RobertIndie/gists{/gist_id}","starred_url":"https://api.github.com/users/RobertIndie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RobertIndie/subscriptions","organizations_url":"https://api.github.com/users/RobertIndie/orgs","repos_url":"https://api.github.com/users/RobertIndie/repos","events_url":"https://api.github.com/users/RobertIndie/events{/privacy}","received_events_url":"https://api.github.com/users/RobertIndie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T09:28:55Z","updated_at":"2021-01-28T09:28:55Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768921716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768927771","html_url":"https://github.com/apache/pulsar/issues/9297#issuecomment-768927771","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9297","id":768927771,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODkyNzc3MQ==","user":{"login":"wuYin","id":24536920,"node_id":"MDQ6VXNlcjI0NTM2OTIw","avatar_url":"https://avatars.githubusercontent.com/u/24536920?v=4","gravatar_id":"","url":"https://api.github.com/users/wuYin","html_url":"https://github.com/wuYin","followers_url":"https://api.github.com/users/wuYin/followers","following_url":"https://api.github.com/users/wuYin/following{/other_user}","gists_url":"https://api.github.com/users/wuYin/gists{/gist_id}","starred_url":"https://api.github.com/users/wuYin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuYin/subscriptions","organizations_url":"https://api.github.com/users/wuYin/orgs","repos_url":"https://api.github.com/users/wuYin/repos","events_url":"https://api.github.com/users/wuYin/events{/privacy}","received_events_url":"https://api.github.com/users/wuYin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T09:39:33Z","updated_at":"2021-01-28T09:39:33Z","author_association":"NONE","body":"> @wuYin in the certain case, if we close the broker graceful shutdown, we don't need to wait the zk session timeout. you can look [apache/pulsar-helm-chart#59](https://github.com/apache/pulsar-helm-chart/pull/59) and upgrade the helm chart to 2.6.1-2 or hight version. Sorry I still haven't reproduced the flaky case.\r\n\r\nThanks for finding this detail. I really didn't noticed, I'll use release which contains this feature. \r\nTo avoid unavailability caused by flaky case, I implemented serious timeout degradation for my application.\r\nIf it happen again and steadily, I'll reopen this issue and add more context.\r\nThank you for helping.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768927771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768990538","html_url":"https://github.com/apache/pulsar/pull/9343#issuecomment-768990538","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9343","id":768990538,"node_id":"MDEyOklzc3VlQ29tbWVudDc2ODk5MDUzOA==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T11:29:49Z","updated_at":"2021-01-28T11:29:49Z","author_association":"MEMBER","body":"@eolivelli \r\n\r\nThere are two questions here. Let's not couple them together.\r\n\r\n1) Whether we want to introduce a type system or not? If we want to introduce a type system what would be the approach.\r\n2) How connector can access the schema information?\r\n\r\nFor the first one, I have a really strong different opinion on introducing a type system. I have seen problems with converting types between different systems. AVRO is already an open-standard that all the existing computing engines support. If we are introducing another type of system, we introduce a lot of troubles when integrating with other computing engines. That's something I would avoid. If you want to do that, let's think carefully. It is not just about connectors. Pulsar has a broader set of integrations that relies on schema. We can't afford to maintain different type systems and different approaches for different integrations. You end up need to maintain a lot of converters between Pulsar schemas with many other systems. It is going to be a nightmare. \r\n\r\nFor the second one, we should just let users access the underlying libraries. AVRO, JSON, and PROTOBUF have different type systems. Let's use their existing tools and not reinvent one.\r\n\r\n> without these features Pulsar IO won't be able to compete with Kafka Connect, and also to \"port\" existing Kafka Connect workflows to the Pulsar Ecosystem\r\n\r\nFirst of all, Pulsar I/O doesn't compete with Kafka Connect. Pulsar I/O is an extension of the Pulsar ecosystem. Kafka Connect is the extension to Kafka. They might share similar goals. But they don't compete with each other. \r\n\r\nSecondly, we embrace the Kafka ecosystem by providing a fully compatible wrapper to run existing Kafka connectors without introducing a type system. The key for this to work is using an open standard like ARVO. \r\n\r\n```\r\nKafka Schema -> [ Open Standards: AVRO ] -> Pulsar Schema \r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/768990538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769023886","html_url":"https://github.com/apache/pulsar/pull/9334#issuecomment-769023886","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9334","id":769023886,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTAyMzg4Ng==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T12:35:15Z","updated_at":"2021-01-28T12:35:15Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769023886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769029870","html_url":"https://github.com/apache/pulsar/pull/9349#issuecomment-769029870","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9349","id":769029870,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTAyOTg3MA==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T12:47:49Z","updated_at":"2021-01-28T12:47:49Z","author_association":"CONTRIBUTOR","body":"@nlu90 Please also help review this PR","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769029870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769039539","html_url":"https://github.com/apache/pulsar/pull/8590#issuecomment-769039539","issue_url":"https://api.github.com/repos/apache/pulsar/issues/8590","id":769039539,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTAzOTUzOQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T13:05:57Z","updated_at":"2021-01-28T13:05:57Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769039539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769059583","html_url":"https://github.com/apache/pulsar/pull/9357#issuecomment-769059583","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9357","id":769059583,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTA1OTU4Mw==","user":{"login":"lhotari","id":66864,"node_id":"MDQ6VXNlcjY2ODY0","avatar_url":"https://avatars.githubusercontent.com/u/66864?v=4","gravatar_id":"","url":"https://api.github.com/users/lhotari","html_url":"https://github.com/lhotari","followers_url":"https://api.github.com/users/lhotari/followers","following_url":"https://api.github.com/users/lhotari/following{/other_user}","gists_url":"https://api.github.com/users/lhotari/gists{/gist_id}","starred_url":"https://api.github.com/users/lhotari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhotari/subscriptions","organizations_url":"https://api.github.com/users/lhotari/orgs","repos_url":"https://api.github.com/users/lhotari/repos","events_url":"https://api.github.com/users/lhotari/events{/privacy}","received_events_url":"https://api.github.com/users/lhotari/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T13:40:49Z","updated_at":"2021-01-28T13:40:49Z","author_association":"MEMBER","body":"Adding some description about the background:\r\nThe \"Cancelling duplicates\" workflow jobs are piling up in the Actions runner queue as can be seen in https://github.com/apache/pulsar/actions?query=workflow%3A%22Cancelling+Duplicates%22 . Each PR update will cause 26 of these \"Cancelling duplicates\" jobs being added to the Actions runner queue.\r\n\r\nThe workflow that creates these jobs was introduced by PR https://github.com/apache/pulsar/pull/9159 . \r\nThe reason why it was needed was due to the previous cancellation solution introduced in #8393 getting possibly unintentionally removed by #9069. Since the solution was removed it possibly lead to the issue #9154 .\r\n\r\nThis PR will bring back a solution which is similar to #8393, however using a more advanced Github Action implementation. ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769059583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769061418","html_url":"https://github.com/apache/pulsar/pull/9357#issuecomment-769061418","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9357","id":769061418,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTA2MTQxOA==","user":{"login":"zymap","id":24502569,"node_id":"MDQ6VXNlcjI0NTAyNTY5","avatar_url":"https://avatars.githubusercontent.com/u/24502569?v=4","gravatar_id":"","url":"https://api.github.com/users/zymap","html_url":"https://github.com/zymap","followers_url":"https://api.github.com/users/zymap/followers","following_url":"https://api.github.com/users/zymap/following{/other_user}","gists_url":"https://api.github.com/users/zymap/gists{/gist_id}","starred_url":"https://api.github.com/users/zymap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zymap/subscriptions","organizations_url":"https://api.github.com/users/zymap/orgs","repos_url":"https://api.github.com/users/zymap/repos","events_url":"https://api.github.com/users/zymap/events{/privacy}","received_events_url":"https://api.github.com/users/zymap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T13:43:53Z","updated_at":"2021-01-28T13:43:53Z","author_association":"MEMBER","body":"@lhotari Thank you for the more information about this!","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769061418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769072135","html_url":"https://github.com/apache/pulsar/pull/9318#issuecomment-769072135","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9318","id":769072135,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTA3MjEzNQ==","user":{"login":"freeznet","id":1381618,"node_id":"MDQ6VXNlcjEzODE2MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1381618?v=4","gravatar_id":"","url":"https://api.github.com/users/freeznet","html_url":"https://github.com/freeznet","followers_url":"https://api.github.com/users/freeznet/followers","following_url":"https://api.github.com/users/freeznet/following{/other_user}","gists_url":"https://api.github.com/users/freeznet/gists{/gist_id}","starred_url":"https://api.github.com/users/freeznet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freeznet/subscriptions","organizations_url":"https://api.github.com/users/freeznet/orgs","repos_url":"https://api.github.com/users/freeznet/repos","events_url":"https://api.github.com/users/freeznet/events{/privacy}","received_events_url":"https://api.github.com/users/freeznet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T13:59:59Z","updated_at":"2021-01-28T13:59:59Z","author_association":"CONTRIBUTOR","body":"@wolfstudy thanks for review. I will go for @zymap and your advice. But this will affect java and python's code, should I put `metricsPort` into `InstanceConfig` in an individual pull-request?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769072135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769079148","html_url":"https://github.com/apache/pulsar/issues/9266#issuecomment-769079148","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9266","id":769079148,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTA3OTE0OA==","user":{"login":"frankjkelly","id":62910985,"node_id":"MDQ6VXNlcjYyOTEwOTg1","avatar_url":"https://avatars.githubusercontent.com/u/62910985?v=4","gravatar_id":"","url":"https://api.github.com/users/frankjkelly","html_url":"https://github.com/frankjkelly","followers_url":"https://api.github.com/users/frankjkelly/followers","following_url":"https://api.github.com/users/frankjkelly/following{/other_user}","gists_url":"https://api.github.com/users/frankjkelly/gists{/gist_id}","starred_url":"https://api.github.com/users/frankjkelly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frankjkelly/subscriptions","organizations_url":"https://api.github.com/users/frankjkelly/orgs","repos_url":"https://api.github.com/users/frankjkelly/repos","events_url":"https://api.github.com/users/frankjkelly/events{/privacy}","received_events_url":"https://api.github.com/users/frankjkelly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T14:10:47Z","updated_at":"2021-01-28T14:10:47Z","author_association":"CONTRIBUTOR","body":"Thanks indeed - we are using Pulsar 2.6.1 - is there any chance this could be back ported to the next maintenance release (2.6.4?)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769079148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769087662","html_url":"https://github.com/apache/pulsar/issues/9266#issuecomment-769087662","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9266","id":769087662,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTA4NzY2Mg==","user":{"login":"codelipenghui","id":12592133,"node_id":"MDQ6VXNlcjEyNTkyMTMz","avatar_url":"https://avatars.githubusercontent.com/u/12592133?v=4","gravatar_id":"","url":"https://api.github.com/users/codelipenghui","html_url":"https://github.com/codelipenghui","followers_url":"https://api.github.com/users/codelipenghui/followers","following_url":"https://api.github.com/users/codelipenghui/following{/other_user}","gists_url":"https://api.github.com/users/codelipenghui/gists{/gist_id}","starred_url":"https://api.github.com/users/codelipenghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codelipenghui/subscriptions","organizations_url":"https://api.github.com/users/codelipenghui/orgs","repos_url":"https://api.github.com/users/codelipenghui/repos","events_url":"https://api.github.com/users/codelipenghui/events{/privacy}","received_events_url":"https://api.github.com/users/codelipenghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T14:22:59Z","updated_at":"2021-01-28T14:22:59Z","author_association":"CONTRIBUTOR","body":"Hi, @frankjkelly. Sorry, the next release version is 2.7.1 and we do not have a plan to release 2.6.x. If you want to apply this patch, we can help to cherry-pick this fix to the branch-2.6 and you can build it by yourself. \r\n\r\nAnd the streamnative.io have a weekly release at https://github.com/streamnative/pulsar/releases, https://hub.docker.com/r/streamnative/pulsar/tags?page=1&ordering=last_updated. This release is based on the official branch. We can start a quick release for 2.6.3.x with this path well.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769087662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769198159","html_url":"https://github.com/apache/pulsar/pull/9349#issuecomment-769198159","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9349","id":769198159,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTE5ODE1OQ==","user":{"login":"csthomas1","id":70978249,"node_id":"MDQ6VXNlcjcwOTc4MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/70978249?v=4","gravatar_id":"","url":"https://api.github.com/users/csthomas1","html_url":"https://github.com/csthomas1","followers_url":"https://api.github.com/users/csthomas1/followers","following_url":"https://api.github.com/users/csthomas1/following{/other_user}","gists_url":"https://api.github.com/users/csthomas1/gists{/gist_id}","starred_url":"https://api.github.com/users/csthomas1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/csthomas1/subscriptions","organizations_url":"https://api.github.com/users/csthomas1/orgs","repos_url":"https://api.github.com/users/csthomas1/repos","events_url":"https://api.github.com/users/csthomas1/events{/privacy}","received_events_url":"https://api.github.com/users/csthomas1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T16:17:41Z","updated_at":"2021-01-28T16:17:41Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769198159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769229882","html_url":"https://github.com/apache/pulsar/pull/9302#issuecomment-769229882","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9302","id":769229882,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTIyOTg4Mg==","user":{"login":"MarvinCai","id":13480084,"node_id":"MDQ6VXNlcjEzNDgwMDg0","avatar_url":"https://avatars.githubusercontent.com/u/13480084?v=4","gravatar_id":"","url":"https://api.github.com/users/MarvinCai","html_url":"https://github.com/MarvinCai","followers_url":"https://api.github.com/users/MarvinCai/followers","following_url":"https://api.github.com/users/MarvinCai/following{/other_user}","gists_url":"https://api.github.com/users/MarvinCai/gists{/gist_id}","starred_url":"https://api.github.com/users/MarvinCai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarvinCai/subscriptions","organizations_url":"https://api.github.com/users/MarvinCai/orgs","repos_url":"https://api.github.com/users/MarvinCai/repos","events_url":"https://api.github.com/users/MarvinCai/events{/privacy}","received_events_url":"https://api.github.com/users/MarvinCai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T17:04:44Z","updated_at":"2021-01-28T17:04:44Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769229882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769242902","html_url":"https://github.com/apache/pulsar/pull/9159#issuecomment-769242902","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9159","id":769242902,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI0MjkwMg==","user":{"login":"lhotari","id":66864,"node_id":"MDQ6VXNlcjY2ODY0","avatar_url":"https://avatars.githubusercontent.com/u/66864?v=4","gravatar_id":"","url":"https://api.github.com/users/lhotari","html_url":"https://github.com/lhotari","followers_url":"https://api.github.com/users/lhotari/followers","following_url":"https://api.github.com/users/lhotari/following{/other_user}","gists_url":"https://api.github.com/users/lhotari/gists{/gist_id}","starred_url":"https://api.github.com/users/lhotari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lhotari/subscriptions","organizations_url":"https://api.github.com/users/lhotari/orgs","repos_url":"https://api.github.com/users/lhotari/repos","events_url":"https://api.github.com/users/lhotari/events{/privacy}","received_events_url":"https://api.github.com/users/lhotari/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T17:20:16Z","updated_at":"2021-01-28T17:20:16Z","author_association":"MEMBER","body":"Hi @potiuk @zymap @sijie,\r\n\r\nI have started a draft PIP (Pulsar Improvement Proposal) discussion on the dev@pulsar.apache.org mailing list to address the Github Actions Runner resource consumption issues that currently exist in the Pulsar Github Actions workflows:\r\nhttps://lists.apache.org/thread.html/ra2fcf7b973448bb51e00aceaeed06433e8d886270b0f0db0c80d4e0c%40%3Cdev.pulsar.apache.org%3E\r\n\r\nPlease participate in the discussion on the dev@pulsar.apache.org mailing list or place comments / editing suggestions directly on the Google doc: \r\nhttps://docs.google.com/document/d/1FNEWD3COdnNGMiryO9qBUW_83qtzAhqjDI5wwmPD-YE/edit?usp=sharing\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769242902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769273931","html_url":"https://github.com/apache/pulsar/pull/9320#issuecomment-769273931","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9320","id":769273931,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI3MzkzMQ==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:08:54Z","updated_at":"2021-01-28T18:08:54Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769273931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769274084","html_url":"https://github.com/apache/pulsar/pull/9316#issuecomment-769274084","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9316","id":769274084,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI3NDA4NA==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:09:09Z","updated_at":"2021-01-28T18:09:09Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769274084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769280591","html_url":"https://github.com/apache/pulsar/pull/9334#issuecomment-769280591","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9334","id":769280591,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI4MDU5MQ==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:19:36Z","updated_at":"2021-01-28T18:19:36Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769280591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769288414","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-769288414","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":769288414,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI4ODQxNA==","user":{"login":"pkumar-singh","id":65131575,"node_id":"MDQ6VXNlcjY1MTMxNTc1","avatar_url":"https://avatars.githubusercontent.com/u/65131575?v=4","gravatar_id":"","url":"https://api.github.com/users/pkumar-singh","html_url":"https://github.com/pkumar-singh","followers_url":"https://api.github.com/users/pkumar-singh/followers","following_url":"https://api.github.com/users/pkumar-singh/following{/other_user}","gists_url":"https://api.github.com/users/pkumar-singh/gists{/gist_id}","starred_url":"https://api.github.com/users/pkumar-singh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkumar-singh/subscriptions","organizations_url":"https://api.github.com/users/pkumar-singh/orgs","repos_url":"https://api.github.com/users/pkumar-singh/repos","events_url":"https://api.github.com/users/pkumar-singh/events{/privacy}","received_events_url":"https://api.github.com/users/pkumar-singh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:33:10Z","updated_at":"2021-01-28T18:33:10Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769288414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769291889","html_url":"https://github.com/apache/pulsar/pull/8927#issuecomment-769291889","issue_url":"https://api.github.com/repos/apache/pulsar/issues/8927","id":769291889,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI5MTg4OQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:39:40Z","updated_at":"2021-01-28T18:39:40Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769291889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769298061","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-769298061","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":769298061,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI5ODA2MQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:51:01Z","updated_at":"2021-01-28T18:51:01Z","author_association":"CONTRIBUTOR","body":"This patch is good to go","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769298061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769298533","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-769298533","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":769298533,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTI5ODUzMw==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T18:51:55Z","updated_at":"2021-01-28T18:51:55Z","author_association":"CONTRIBUTOR","body":"I would be interested in sending a backport for 2.7\r\nwould it be accepted ?\r\nI guess 2.7.x will stay for quite a log time, having a faster pulsar-admin would be cool","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769298533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769307905","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-769307905","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":769307905,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMwNzkwNQ==","user":{"login":"sijie","id":1217863,"node_id":"MDQ6VXNlcjEyMTc4NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1217863?v=4","gravatar_id":"","url":"https://api.github.com/users/sijie","html_url":"https://github.com/sijie","followers_url":"https://api.github.com/users/sijie/followers","following_url":"https://api.github.com/users/sijie/following{/other_user}","gists_url":"https://api.github.com/users/sijie/gists{/gist_id}","starred_url":"https://api.github.com/users/sijie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sijie/subscriptions","organizations_url":"https://api.github.com/users/sijie/orgs","repos_url":"https://api.github.com/users/sijie/repos","events_url":"https://api.github.com/users/sijie/events{/privacy}","received_events_url":"https://api.github.com/users/sijie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:08:17Z","updated_at":"2021-01-28T19:08:17Z","author_association":"MEMBER","body":"@eolivelli I would suggest leaving this change in master for now. We can backport it when it becomes a challenge when cherry-picking changes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769307905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769309735","html_url":"https://github.com/apache/pulsar/pull/9312#issuecomment-769309735","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9312","id":769309735,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMwOTczNQ==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:11:41Z","updated_at":"2021-01-28T19:11:41Z","author_association":"CONTRIBUTOR","body":"Good point. No need to pick it to 2.7","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769309735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769314488","html_url":"https://github.com/apache/pulsar/pull/9316#issuecomment-769314488","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9316","id":769314488,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMxNDQ4OA==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:19:59Z","updated_at":"2021-01-28T19:19:59Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769314488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769315081","html_url":"https://github.com/apache/pulsar/pull/9320#issuecomment-769315081","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9320","id":769315081,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMxNTA4MQ==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:20:53Z","updated_at":"2021-01-28T19:20:53Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769315081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769315154","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-769315154","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":769315154,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMxNTE1NA==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:21:01Z","updated_at":"2021-01-28T19:21:01Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769315154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769315960","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-769315960","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":769315960,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMxNTk2MA==","user":{"login":"pkumar-singh","id":65131575,"node_id":"MDQ6VXNlcjY1MTMxNTc1","avatar_url":"https://avatars.githubusercontent.com/u/65131575?v=4","gravatar_id":"","url":"https://api.github.com/users/pkumar-singh","html_url":"https://github.com/pkumar-singh","followers_url":"https://api.github.com/users/pkumar-singh/followers","following_url":"https://api.github.com/users/pkumar-singh/following{/other_user}","gists_url":"https://api.github.com/users/pkumar-singh/gists{/gist_id}","starred_url":"https://api.github.com/users/pkumar-singh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkumar-singh/subscriptions","organizations_url":"https://api.github.com/users/pkumar-singh/orgs","repos_url":"https://api.github.com/users/pkumar-singh/repos","events_url":"https://api.github.com/users/pkumar-singh/events{/privacy}","received_events_url":"https://api.github.com/users/pkumar-singh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:22:26Z","updated_at":"2021-01-28T19:24:09Z","author_association":"MEMBER","body":"@eolivelli I agree. As I mentioned in the Modification section in the PR. \r\n\"Delete the table in non blocking way and do not wait for operation to be completed.\" And I agree that it makes table deletion unpredictable and best effort. Intention was to make table deletion not necessarily unpredictable but best effort. \r\n\r\nTalking about tests. I am not sure we have test coverage for this class and I mentioned the same in PR message.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769315960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769319662","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-769319662","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":769319662,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMxOTY2Mg==","user":{"login":"eolivelli","id":9469110,"node_id":"MDQ6VXNlcjk0NjkxMTA=","avatar_url":"https://avatars.githubusercontent.com/u/9469110?v=4","gravatar_id":"","url":"https://api.github.com/users/eolivelli","html_url":"https://github.com/eolivelli","followers_url":"https://api.github.com/users/eolivelli/followers","following_url":"https://api.github.com/users/eolivelli/following{/other_user}","gists_url":"https://api.github.com/users/eolivelli/gists{/gist_id}","starred_url":"https://api.github.com/users/eolivelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eolivelli/subscriptions","organizations_url":"https://api.github.com/users/eolivelli/orgs","repos_url":"https://api.github.com/users/eolivelli/repos","events_url":"https://api.github.com/users/eolivelli/events{/privacy}","received_events_url":"https://api.github.com/users/eolivelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:28:40Z","updated_at":"2021-01-28T19:28:40Z","author_association":"CONTRIBUTOR","body":"Probably other tests use this function, and if we do not have tests then it is the good time to add them :)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769319662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769330837","html_url":"https://github.com/apache/pulsar/pull/9159#issuecomment-769330837","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9159","id":769330837,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMzMDgzNw==","user":{"login":"potiuk","id":595491,"node_id":"MDQ6VXNlcjU5NTQ5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/595491?v=4","gravatar_id":"","url":"https://api.github.com/users/potiuk","html_url":"https://github.com/potiuk","followers_url":"https://api.github.com/users/potiuk/followers","following_url":"https://api.github.com/users/potiuk/following{/other_user}","gists_url":"https://api.github.com/users/potiuk/gists{/gist_id}","starred_url":"https://api.github.com/users/potiuk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/potiuk/subscriptions","organizations_url":"https://api.github.com/users/potiuk/orgs","repos_url":"https://api.github.com/users/potiuk/repos","events_url":"https://api.github.com/users/potiuk/events{/privacy}","received_events_url":"https://api.github.com/users/potiuk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:45:16Z","updated_at":"2021-01-28T19:45:27Z","author_association":"MEMBER","body":"I will take a look tomorrow. I'v been swamped by some company matters but tomorrow is the day I start going back to life :)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769330837/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769332919","html_url":"https://github.com/apache/pulsar/pull/9334#issuecomment-769332919","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9334","id":769332919,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTMzMjkxOQ==","user":{"login":"aloyszhang","id":48062889,"node_id":"MDQ6VXNlcjQ4MDYyODg5","avatar_url":"https://avatars.githubusercontent.com/u/48062889?v=4","gravatar_id":"","url":"https://api.github.com/users/aloyszhang","html_url":"https://github.com/aloyszhang","followers_url":"https://api.github.com/users/aloyszhang/followers","following_url":"https://api.github.com/users/aloyszhang/following{/other_user}","gists_url":"https://api.github.com/users/aloyszhang/gists{/gist_id}","starred_url":"https://api.github.com/users/aloyszhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aloyszhang/subscriptions","organizations_url":"https://api.github.com/users/aloyszhang/orgs","repos_url":"https://api.github.com/users/aloyszhang/repos","events_url":"https://api.github.com/users/aloyszhang/events{/privacy}","received_events_url":"https://api.github.com/users/aloyszhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:48:01Z","updated_at":"2021-01-28T19:48:01Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769332919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769341829","html_url":"https://github.com/apache/pulsar/pull/9346#issuecomment-769341829","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9346","id":769341829,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM0MTgyOQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T19:59:29Z","updated_at":"2021-01-28T19:59:29Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769341829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769354344","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-769354344","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":769354344,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM1NDM0NA==","user":{"login":"pkumar-singh","id":65131575,"node_id":"MDQ6VXNlcjY1MTMxNTc1","avatar_url":"https://avatars.githubusercontent.com/u/65131575?v=4","gravatar_id":"","url":"https://api.github.com/users/pkumar-singh","html_url":"https://github.com/pkumar-singh","followers_url":"https://api.github.com/users/pkumar-singh/followers","following_url":"https://api.github.com/users/pkumar-singh/following{/other_user}","gists_url":"https://api.github.com/users/pkumar-singh/gists{/gist_id}","starred_url":"https://api.github.com/users/pkumar-singh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkumar-singh/subscriptions","organizations_url":"https://api.github.com/users/pkumar-singh/orgs","repos_url":"https://api.github.com/users/pkumar-singh/repos","events_url":"https://api.github.com/users/pkumar-singh/events{/privacy}","received_events_url":"https://api.github.com/users/pkumar-singh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T20:15:16Z","updated_at":"2021-01-28T20:15:16Z","author_association":"MEMBER","body":"Yeah other tests certainly use the method `deregisterFunction`. But for tests `worker().getStateStoreAdminClient()` I think is null. ( I will confirm again). Therefore it never executed table deletion code before. And when I made the change Its again behind the same null check therefore it would not execute it now. `StorageAdminClient adminClient = worker().getStateStoreAdminClient();` I agree writing tests to cover these scenarios would be good. But that being said as far as test is concerned this PR does not have any bearing on existing tests.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769354344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769357085","html_url":"https://github.com/apache/pulsar/pull/9292#issuecomment-769357085","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9292","id":769357085,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM1NzA4NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T20:18:27Z","updated_at":"2021-01-28T20:18:27Z","author_association":"CONTRIBUTOR","body":"> what happens if I upgrade my broker to a new version and then I rollback to the previous version in case of problems ? IIUC we are going to write data that would not be understood by the old version. does it lead to some bad state of the system ? like having consumers that receive again the same messages ?\r\n\r\nno, it will not cause bad state in broker. broker understands both the format as it has separate buckets for each. broker recovers unack message ranges based on which ever bucket has ranges and later persist ranges in only new bucket. Broker rollback will not be able to recover unack messages from new bucket and in that case it will redeliver messages newer markDeleteMessageOffset.\r\n\r\n>  It is an improvement and doesn't solve all the problems.\r\n\r\nYes, I shared my point of view in email regarding having unack message management. However, regardless abstraction changes, I think we can proceed with this PR as this can be used with existing default unack message implementation. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769357085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769395457","html_url":"https://github.com/apache/pulsar/pull/9348#issuecomment-769395457","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9348","id":769395457,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTM5NTQ1Nw==","user":{"login":"pkumar-singh","id":65131575,"node_id":"MDQ6VXNlcjY1MTMxNTc1","avatar_url":"https://avatars.githubusercontent.com/u/65131575?v=4","gravatar_id":"","url":"https://api.github.com/users/pkumar-singh","html_url":"https://github.com/pkumar-singh","followers_url":"https://api.github.com/users/pkumar-singh/followers","following_url":"https://api.github.com/users/pkumar-singh/following{/other_user}","gists_url":"https://api.github.com/users/pkumar-singh/gists{/gist_id}","starred_url":"https://api.github.com/users/pkumar-singh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkumar-singh/subscriptions","organizations_url":"https://api.github.com/users/pkumar-singh/orgs","repos_url":"https://api.github.com/users/pkumar-singh/repos","events_url":"https://api.github.com/users/pkumar-singh/events{/privacy}","received_events_url":"https://api.github.com/users/pkumar-singh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T21:08:13Z","updated_at":"2021-01-28T21:08:13Z","author_association":"MEMBER","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769395457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769448177","html_url":"https://github.com/apache/pulsar/pull/9320#issuecomment-769448177","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9320","id":769448177,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQ0ODE3Nw==","user":{"login":"jerrypeng","id":3613359,"node_id":"MDQ6VXNlcjM2MTMzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/3613359?v=4","gravatar_id":"","url":"https://api.github.com/users/jerrypeng","html_url":"https://github.com/jerrypeng","followers_url":"https://api.github.com/users/jerrypeng/followers","following_url":"https://api.github.com/users/jerrypeng/following{/other_user}","gists_url":"https://api.github.com/users/jerrypeng/gists{/gist_id}","starred_url":"https://api.github.com/users/jerrypeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerrypeng/subscriptions","organizations_url":"https://api.github.com/users/jerrypeng/orgs","repos_url":"https://api.github.com/users/jerrypeng/repos","events_url":"https://api.github.com/users/jerrypeng/events{/privacy}","received_events_url":"https://api.github.com/users/jerrypeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T22:43:33Z","updated_at":"2021-01-28T22:43:33Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769448177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769472285","html_url":"https://github.com/apache/pulsar/pull/9302#issuecomment-769472285","issue_url":"https://api.github.com/repos/apache/pulsar/issues/9302","id":769472285,"node_id":"MDEyOklzc3VlQ29tbWVudDc2OTQ3MjI4NQ==","user":{"login":"MarvinCai","id":13480084,"node_id":"MDQ6VXNlcjEzNDgwMDg0","avatar_url":"https://avatars.githubusercontent.com/u/13480084?v=4","gravatar_id":"","url":"https://api.github.com/users/MarvinCai","html_url":"https://github.com/MarvinCai","followers_url":"https://api.github.com/users/MarvinCai/followers","following_url":"https://api.github.com/users/MarvinCai/following{/other_user}","gists_url":"https://api.github.com/users/MarvinCai/gists{/gist_id}","starred_url":"https://api.github.com/users/MarvinCai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarvinCai/subscriptions","organizations_url":"https://api.github.com/users/MarvinCai/orgs","repos_url":"https://api.github.com/users/MarvinCai/repos","events_url":"https://api.github.com/users/MarvinCai/events{/privacy}","received_events_url":"https://api.github.com/users/MarvinCai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-28T23:43:36Z","updated_at":"2021-01-28T23:43:36Z","author_association":"CONTRIBUTOR","body":"/pulsarbot run-failure-checks","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/769472285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]