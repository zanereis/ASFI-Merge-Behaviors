[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424922201","html_url":"https://github.com/apache/brpc/issues/492#issuecomment-424922201","issue_url":"https://api.github.com/repos/apache/brpc/issues/492","id":424922201,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDkyMjIwMQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T01:15:15Z","updated_at":"2018-09-27T01:15:15Z","author_association":"CONTRIBUTOR","body":"@gtarcoder 请教一下，这个bug目前造成的影响是什么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424922201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424922841","html_url":"https://github.com/apache/brpc/issues/492#issuecomment-424922841","issue_url":"https://api.github.com/repos/apache/brpc/issues/492","id":424922841,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDkyMjg0MQ==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T01:19:18Z","updated_at":"2018-09-27T01:19:18Z","author_association":"NONE","body":"@gydong  bvar监控服务的时延； 以及brpc 服务的好多用到timer的地方，只要用了 cpu_wide_time， 那么就不准确。一方面影响了很多依赖time的逻辑，比如redis 超时；另外也对我们对服务优化带来很大干扰。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424922841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424948979","html_url":"https://github.com/apache/brpc/issues/511#issuecomment-424948979","issue_url":"https://api.github.com/repos/apache/brpc/issues/511","id":424948979,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDk0ODk3OQ==","user":{"login":"tjxduck","id":176129,"node_id":"MDQ6VXNlcjE3NjEyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/176129?v=4","gravatar_id":"","url":"https://api.github.com/users/tjxduck","html_url":"https://github.com/tjxduck","followers_url":"https://api.github.com/users/tjxduck/followers","following_url":"https://api.github.com/users/tjxduck/following{/other_user}","gists_url":"https://api.github.com/users/tjxduck/gists{/gist_id}","starred_url":"https://api.github.com/users/tjxduck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjxduck/subscriptions","organizations_url":"https://api.github.com/users/tjxduck/orgs","repos_url":"https://api.github.com/users/tjxduck/repos","events_url":"https://api.github.com/users/tjxduck/events{/privacy}","received_events_url":"https://api.github.com/users/tjxduck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T03:44:31Z","updated_at":"2018-09-27T03:44:31Z","author_association":"NONE","body":"自己实现一个LoadBalancer 来做会不会很麻烦？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424948979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424963964","html_url":"https://github.com/apache/brpc/issues/511#issuecomment-424963964","issue_url":"https://api.github.com/repos/apache/brpc/issues/511","id":424963964,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDk2Mzk2NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T05:31:33Z","updated_at":"2018-09-27T05:31:33Z","author_association":"CONTRIBUTOR","body":"@tjxduck 会有不少细节工作，#465 就是类似的rich client","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424963964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424964845","html_url":"https://github.com/apache/brpc/issues/486#issuecomment-424964845","issue_url":"https://api.github.com/repos/apache/brpc/issues/486","id":424964845,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDk2NDg0NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T05:37:08Z","updated_at":"2018-09-27T05:37:08Z","author_association":"CONTRIBUTOR","body":"压缩这部分的代码brpc基本上是统一处理的，不知道是不是sofa-pbrpc对这块的理解有所不同，有更多细节么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424964845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424980724","html_url":"https://github.com/apache/brpc/issues/492#issuecomment-424980724","issue_url":"https://api.github.com/repos/apache/brpc/issues/492","id":424980724,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNDk4MDcyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T07:02:06Z","updated_at":"2018-09-27T07:02:06Z","author_association":"CONTRIBUTOR","body":"@gtarcoder 你觉得 #497 能解决你目前的问题么？如果方便的话请帮忙测试一下。你自己提的 #494 是基于bogomips的，和cpu型号关系密切，现在看起来也不是很合适的解决方法。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/424980724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425013824","html_url":"https://github.com/apache/brpc/issues/492#issuecomment-425013824","issue_url":"https://api.github.com/repos/apache/brpc/issues/492","id":425013824,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTAxMzgyNA==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T08:57:09Z","updated_at":"2018-09-27T08:57:09Z","author_association":"NONE","body":"@jamesge  我觉得这个是可以解决我们的问题。我觉得这个改动，只需要进行单测就可以。 我可以帮忙在我们机器上测试下。\r\n\r\nbtw，这种使用tsc的方法，对cpu型号依赖很大，做到通用性不容易。另外，我们自己用的时候，对brpc代码进行了稍微的修改，所有使用 tsc的地方，都使用 clock_getime。之前单独测试  tsc 和 clock_gettime，发现二者几乎没有性能上的差别。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425013824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425025497","html_url":"https://github.com/apache/brpc/issues/492#issuecomment-425025497","issue_url":"https://api.github.com/repos/apache/brpc/issues/492","id":425025497,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTAyNTQ5Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T09:34:55Z","updated_at":"2018-09-27T09:34:55Z","author_association":"CONTRIBUTOR","body":"新版本glibc中确实能观察到gettimeofday和CLOCK_REALTIME/MONOTONIC的性能都不错，未来可以考虑brpc完全不使用rdtsc。\r\n你也可以在自己机器上编译下test目录，并运行./test_butil --gtest_filter=BaiduTimeTest.*  运行结果可以在这里贴一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425025497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425029891","html_url":"https://github.com/apache/brpc/issues/505#issuecomment-425029891","issue_url":"https://api.github.com/repos/apache/brpc/issues/505","id":425029891,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTAyOTg5MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T09:49:39Z","updated_at":"2018-09-27T09:49:39Z","author_association":"CONTRIBUTOR","body":"@ipconfigme \r\n> 1. RpcMeta中增加trace_flags，比如强制下游进行sample\r\n\r\n目前上游开启rpcz，下游会自动开启。完成类似功能的flag已经传递了。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425029891/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425030856","html_url":"https://github.com/apache/brpc/pull/494#issuecomment-425030856","issue_url":"https://api.github.com/repos/apache/brpc/issues/494","id":425030856,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTAzMDg1Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-27T09:53:03Z","updated_at":"2018-09-27T09:53:03Z","author_association":"CONTRIBUTOR","body":"bogomips主要是为评估不同cpu的指标，和频率并无直接关联，目前几代的intel cpu的系数都是2，但以后未必，所以这个pr目前还不适合解决tsc的问题，先关闭了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425030856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425304886","html_url":"https://github.com/apache/brpc/issues/475#issuecomment-425304886","issue_url":"https://api.github.com/repos/apache/brpc/issues/475","id":425304886,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMwNDg4Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-28T02:53:59Z","updated_at":"2018-09-28T02:53:59Z","author_association":"MEMBER","body":"我本地High Sierra Version 10.13.5，clang版本和你一样，没有复现相同的问题。看你的错误表象是编译器C++11相关的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425304886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425314273","html_url":"https://github.com/apache/brpc/issues/496#issuecomment-425314273","issue_url":"https://api.github.com/repos/apache/brpc/issues/496","id":425314273,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTMxNDI3Mw==","user":{"login":"gethinzhang","id":5329492,"node_id":"MDQ6VXNlcjUzMjk0OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5329492?v=4","gravatar_id":"","url":"https://api.github.com/users/gethinzhang","html_url":"https://github.com/gethinzhang","followers_url":"https://api.github.com/users/gethinzhang/followers","following_url":"https://api.github.com/users/gethinzhang/following{/other_user}","gists_url":"https://api.github.com/users/gethinzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/gethinzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gethinzhang/subscriptions","organizations_url":"https://api.github.com/users/gethinzhang/orgs","repos_url":"https://api.github.com/users/gethinzhang/repos","events_url":"https://api.github.com/users/gethinzhang/events{/privacy}","received_events_url":"https://api.github.com/users/gethinzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-28T04:01:20Z","updated_at":"2018-09-28T04:01:20Z","author_association":"NONE","body":"建议先看下 #492 先确认是不是计时有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425314273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425345795","html_url":"https://github.com/apache/brpc/issues/492#issuecomment-425345795","issue_url":"https://api.github.com/repos/apache/brpc/issues/492","id":425345795,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTM0NTc5NQ==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-28T07:20:45Z","updated_at":"2018-09-28T07:20:45Z","author_association":"NONE","body":"@jamesge   测试了  #497  的实现，在intel cpu的机器上，拿到的时钟是准确的。比较了 sleep 相同的时间的情况下， clock_gettime 和 cpu_wide_time 两种方式的计时，差别很小。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425345795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425617373","html_url":"https://github.com/apache/brpc/issues/192#issuecomment-425617373","issue_url":"https://api.github.com/repos/apache/brpc/issues/192","id":425617373,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTYxNzM3Mw==","user":{"login":"tomzhang","id":541236,"node_id":"MDQ6VXNlcjU0MTIzNg==","avatar_url":"https://avatars.githubusercontent.com/u/541236?v=4","gravatar_id":"","url":"https://api.github.com/users/tomzhang","html_url":"https://github.com/tomzhang","followers_url":"https://api.github.com/users/tomzhang/followers","following_url":"https://api.github.com/users/tomzhang/following{/other_user}","gists_url":"https://api.github.com/users/tomzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/tomzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomzhang/subscriptions","organizations_url":"https://api.github.com/users/tomzhang/orgs","repos_url":"https://api.github.com/users/tomzhang/repos","events_url":"https://api.github.com/users/tomzhang/events{/privacy}","received_events_url":"https://api.github.com/users/tomzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T05:26:30Z","updated_at":"2018-09-29T05:26:30Z","author_association":"NONE","body":"期待","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425617373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425629320","html_url":"https://github.com/apache/brpc/issues/514#issuecomment-425629320","issue_url":"https://api.github.com/repos/apache/brpc/issues/514","id":425629320,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTYyOTMyMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T09:00:47Z","updated_at":"2018-09-29T09:10:10Z","author_association":"CONTRIBUTOR","body":"你说的io是指什么？磁盘一般是看ioutil，网络一般是[tracing](https://github.com/brpc/brpc/blob/master/docs/cn/rpcz.md)。tracing的做法可以延伸和细化到函数级别，也就是可以分析函数的调用时间，但那需要在函数的prolog和epilog中插入特殊代码，一般要修改gcc，不太通用。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425629320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425634256","html_url":"https://github.com/apache/brpc/pull/519#issuecomment-425634256","issue_url":"https://api.github.com/repos/apache/brpc/issues/519","id":425634256,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTYzNDI1Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T10:23:22Z","updated_at":"2018-09-29T10:23:22Z","author_association":"MEMBER","body":"https://github.com/brpc/brpc/issues/490","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425634256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425635206","html_url":"https://github.com/apache/brpc/issues/514#issuecomment-425635206","issue_url":"https://api.github.com/repos/apache/brpc/issues/514","id":425635206,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTYzNTIwNg==","user":{"login":"yitian134","id":8611425,"node_id":"MDQ6VXNlcjg2MTE0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8611425?v=4","gravatar_id":"","url":"https://api.github.com/users/yitian134","html_url":"https://github.com/yitian134","followers_url":"https://api.github.com/users/yitian134/followers","following_url":"https://api.github.com/users/yitian134/following{/other_user}","gists_url":"https://api.github.com/users/yitian134/gists{/gist_id}","starred_url":"https://api.github.com/users/yitian134/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitian134/subscriptions","organizations_url":"https://api.github.com/users/yitian134/orgs","repos_url":"https://api.github.com/users/yitian134/repos","events_url":"https://api.github.com/users/yitian134/events{/privacy}","received_events_url":"https://api.github.com/users/yitian134/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T10:39:36Z","updated_at":"2018-09-29T10:39:36Z","author_association":"NONE","body":"对，是类似函数级tracing这样的。\r\n其实期望的工具就是能分析【函数调用时间】的占比，类似cpu profile的那种图，这样可以直接判断出瓶颈函数在哪，就不用多个工具切换来排查了。加上tracing可能比较影响性能，感觉现有的cpp世界并不支持这种工具。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425635206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425639890","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-425639890","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":425639890,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTYzOTg5MA==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T12:05:45Z","updated_at":"2018-09-29T12:11:45Z","author_association":"CONTRIBUTOR","body":"> 用Master head有问题么？\r\n\r\nmaster head是指什么\r\n有没有可能是bthread在执行过程中意外终止了或者上下文切换后没有继续执行\r\n@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425639890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425645280","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-425645280","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":425645280,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTY0NTI4MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T13:27:41Z","updated_at":"2018-09-29T13:27:41Z","author_association":"CONTRIBUTOR","body":"master head就是master分支上的最新版。bthread本身不会意外终止或卡住，如果server逻辑是异步的，检查下是不是总能终止。并发控制这块没有报过这类bug，一般认为就是对应的逻辑没有结束。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425645280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425655520","html_url":"https://github.com/apache/brpc/pull/519#issuecomment-425655520","issue_url":"https://api.github.com/repos/apache/brpc/issues/519","id":425655520,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTY1NTUyMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T15:58:43Z","updated_at":"2018-09-29T15:58:43Z","author_association":"CONTRIBUTOR","body":"这个改法也只是对齐了brpc内部对LOG宏的使用，并不能确保用户应用从默认的logging切换到glog完全没错。鉴于那些glog没有宏都比较生僻，这块就先不要动了。DVLOG_IF只有一处用到了，就是 #491 中改的那处，就按那个pr来改吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425655520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425658203","html_url":"https://github.com/apache/brpc/issues/514#issuecomment-425658203","issue_url":"https://api.github.com/repos/apache/brpc/issues/514","id":425658203,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTY1ODIwMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-29T16:37:51Z","updated_at":"2018-09-29T16:40:05Z","author_association":"CONTRIBUTOR","body":"支持的可能性是完全ok的，具体做法以前都考虑过，我称之为Path profiler。实现方法有两个极端:\r\n* 一个极端是修改gcc，在主要的函数的开头(prolog)和末尾(epilog)加上收集代码。缺点是所有函数都要加，overhead太大。\r\n* 另一个极端是提供一个RAII对象（类似unique_lock那种），让用户手动选择一些函数插入进去。构造和析构时会调用收集代码。缺点是很繁琐。\r\n\r\n一个折衷是提供RAII对象，然后写一个预处理脚本，在每次编译前预处理下所有的函数，对于比较长的且还没有插入那个RAII对象的函数，插入那个对象。预处理过的源代码可以拷贝到独立的目录，且尽量做到没修改的就不更新，以加快编译速度。\r\n\r\n至于怎么让收集代码overhead尽量低，怎么做profiler，怎么展示结果，就是另外一回事了。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425658203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425690375","html_url":"https://github.com/apache/brpc/issues/470#issuecomment-425690375","issue_url":"https://api.github.com/repos/apache/brpc/issues/470","id":425690375,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTY5MDM3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T03:03:25Z","updated_at":"2018-09-30T03:03:25Z","author_association":"CONTRIBUTOR","body":"后续更新在 #505 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425690375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425691094","html_url":"https://github.com/apache/brpc/issues/514#issuecomment-425691094","issue_url":"https://api.github.com/repos/apache/brpc/issues/514","id":425691094,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTY5MTA5NA==","user":{"login":"yitian134","id":8611425,"node_id":"MDQ6VXNlcjg2MTE0MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8611425?v=4","gravatar_id":"","url":"https://api.github.com/users/yitian134","html_url":"https://github.com/yitian134","followers_url":"https://api.github.com/users/yitian134/followers","following_url":"https://api.github.com/users/yitian134/following{/other_user}","gists_url":"https://api.github.com/users/yitian134/gists{/gist_id}","starred_url":"https://api.github.com/users/yitian134/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yitian134/subscriptions","organizations_url":"https://api.github.com/users/yitian134/orgs","repos_url":"https://api.github.com/users/yitian134/repos","events_url":"https://api.github.com/users/yitian134/events{/privacy}","received_events_url":"https://api.github.com/users/yitian134/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T03:21:54Z","updated_at":"2018-09-30T03:21:54Z","author_association":"NONE","body":"学习了~  后来找到了个韩国小哥写的工具 [uftrace](https://github.com/namhyung/uftrace)，貌似是参考ftrace的思想。感觉可以满足基本需求了，就是稍微有点慢。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425691094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425693597","html_url":"https://github.com/apache/brpc/issues/505#issuecomment-425693597","issue_url":"https://api.github.com/repos/apache/brpc/issues/505","id":425693597,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTY5MzU5Nw==","user":{"login":"Redfriday","id":10103260,"node_id":"MDQ6VXNlcjEwMTAzMjYw","avatar_url":"https://avatars.githubusercontent.com/u/10103260?v=4","gravatar_id":"","url":"https://api.github.com/users/Redfriday","html_url":"https://github.com/Redfriday","followers_url":"https://api.github.com/users/Redfriday/followers","following_url":"https://api.github.com/users/Redfriday/following{/other_user}","gists_url":"https://api.github.com/users/Redfriday/gists{/gist_id}","starred_url":"https://api.github.com/users/Redfriday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Redfriday/subscriptions","organizations_url":"https://api.github.com/users/Redfriday/orgs","repos_url":"https://api.github.com/users/Redfriday/repos","events_url":"https://api.github.com/users/Redfriday/events{/privacy}","received_events_url":"https://api.github.com/users/Redfriday/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T04:21:27Z","updated_at":"2018-09-30T04:21:27Z","author_association":"NONE","body":"把expose log to leveldb封装成一个接口，可以供外部定制化是不是就ok了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425693597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425708030","html_url":"https://github.com/apache/brpc/issues/481#issuecomment-425708030","issue_url":"https://api.github.com/repos/apache/brpc/issues/481","id":425708030,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTcwODAzMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T09:39:50Z","updated_at":"2018-09-30T09:39:50Z","author_association":"CONTRIBUTOR","body":"主干已支持grpc, client端协议设置为\"h2:grpc\"即可，server端无需设置。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425708030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425708111","html_url":"https://github.com/apache/brpc/issues/512#issuecomment-425708111","issue_url":"https://api.github.com/repos/apache/brpc/issues/512","id":425708111,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTcwODExMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T09:41:27Z","updated_at":"2018-09-30T09:41:27Z","author_association":"CONTRIBUTOR","body":"和 #203 重合了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425708111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425708189","html_url":"https://github.com/apache/brpc/issues/192#issuecomment-425708189","issue_url":"https://api.github.com/repos/apache/brpc/issues/192","id":425708189,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTcwODE4OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T09:42:46Z","updated_at":"2018-09-30T09:42:46Z","author_association":"CONTRIBUTOR","body":"主干已支持grpc, client端协议设置为\"h2:grpc\"即可，server端无需设置。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425708189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425711378","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-425711378","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":425711378,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTcxMTM3OA==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T10:40:58Z","updated_at":"2018-09-30T10:41:35Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/8623385/46256628-d0861780-c4df-11e8-80fc-56e107bcac20.png)\r\n@jamesge  又出问题了。。。 ，300多G内存在运行状态出现core dump了，与profiling有关系么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425711378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425715941","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-425715941","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":425715941,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTcxNTk0MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T12:01:17Z","updated_at":"2018-09-30T12:01:17Z","author_association":"CONTRIBUTOR","body":"看一下具体的coredump内容吧，也建议你们的服务跑一下gcc自带的address sanitizer","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425715941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425726255","html_url":"https://github.com/apache/brpc/issues/524#issuecomment-425726255","issue_url":"https://api.github.com/repos/apache/brpc/issues/524","id":425726255,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTcyNjI1NQ==","user":{"login":"dingtao1985","id":5869261,"node_id":"MDQ6VXNlcjU4NjkyNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5869261?v=4","gravatar_id":"","url":"https://api.github.com/users/dingtao1985","html_url":"https://github.com/dingtao1985","followers_url":"https://api.github.com/users/dingtao1985/followers","following_url":"https://api.github.com/users/dingtao1985/following{/other_user}","gists_url":"https://api.github.com/users/dingtao1985/gists{/gist_id}","starred_url":"https://api.github.com/users/dingtao1985/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dingtao1985/subscriptions","organizations_url":"https://api.github.com/users/dingtao1985/orgs","repos_url":"https://api.github.com/users/dingtao1985/repos","events_url":"https://api.github.com/users/dingtao1985/events{/privacy}","received_events_url":"https://api.github.com/users/dingtao1985/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-30T14:50:31Z","updated_at":"2018-09-30T14:50:31Z","author_association":"NONE","body":"去掉--with_glog=true后，解决了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425726255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425835955","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-425835955","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":425835955,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTgzNTk1NQ==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-01T08:58:45Z","updated_at":"2018-10-01T08:58:45Z","author_association":"NONE","body":"> 看一下具体的coredump内容吧，也建议你们的服务跑一下gcc自带的address sanitizer\r\n\r\ncore被截断了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425835955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425857568","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-425857568","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":425857568,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTg1NzU2OA==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-01T10:17:26Z","updated_at":"2018-10-01T10:18:18Z","author_association":"NONE","body":"> master head就是master分支上的最新版。bthread本身不会意外终止或卡住，如果server逻辑是异步的，检查下是不是总能终止。并发控制这块没有报过这类bug，一般认为就是对应的逻辑没有结束。\r\n\r\n![image](https://user-images.githubusercontent.com/8623385/46283165-363cd700-c5a6-11e8-8445-c1c7685ff35d.png)\r\n\r\n我在公司环境又跑出问题了 @jamesge ,能够提供一些思路么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425857568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425928919","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-425928919","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":425928919,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTkyODkxOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-01T14:29:53Z","updated_at":"2018-10-01T14:29:53Z","author_association":"CONTRIBUTOR","body":"你可以自己给同时调用的service数做原子计数，看看是不是真的某些调用卡住了，这个计数可以逐渐细化，直到定位到对应的函数。这个也可以用bvar::Adder<int>做，找到一些有嫌疑的函数，写一个helper类，构造函数里给对应的bvar+1，析构函数里-1，最后看哪些函数的计数没有归0。另外上面提到的/vars/rpc_controller_count也可以看一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425928919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425931740","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-425931740","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":425931740,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNTkzMTc0MA==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-01T14:37:47Z","updated_at":"2018-10-01T14:37:47Z","author_association":"CONTRIBUTOR","body":"<img width=\"1201\" alt=\"wechatimg2744\" src=\"https://user-images.githubusercontent.com/6183996/46295402-8ded3980-c5ca-11e8-9d02-9a51e72926ae.png\">\r\n@jamesge 复现出一个core来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/425931740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426121793","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-426121793","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":426121793,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjEyMTc5Mw==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-02T02:01:42Z","updated_at":"2018-10-02T02:04:34Z","author_association":"NONE","body":"> <img alt=\"wechatimg2744\" width=\"1201\" src=\"https://user-images.githubusercontent.com/6183996/46295402-8ded3980-c5ca-11e8-9d02-9a51e72926ae.png\">\r\n> \r\n> @jamesge 复现出一个core来\r\n\r\nbrpc这个core和 并发计数器给我们的客户带来的损失太大了，让我们不得不质疑brpc的质量问题，我已经复现一次问题了\r\n![image](https://user-images.githubusercontent.com/8623385/46325248-00413680-c62a-11e8-8fc4-45e9956285fb.png)\r\n但是这个不是core ，所以排查很困难，而且复现也是偶发的，所以麻烦@jamesge check一下代码","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426121793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426122835","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-426122835","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":426122835,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjEyMjgzNQ==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-02T02:08:11Z","updated_at":"2018-10-02T02:08:19Z","author_association":"NONE","body":"> 1. 个\r\n\r\n单根开发(mono-repo) ，如果出现了bug, 但是也没有在修复列表中，都没法知道当时出问题的版本代码，怎么排查？而且 brpc能够保证新版本不影响老版本么，我反而觉得加tag只是对单根开发(mono-repo)一个很好的补充\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426122835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426132062","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-426132062","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":426132062,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjEzMjA2Mg==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-02T03:01:55Z","updated_at":"2018-10-02T03:01:55Z","author_association":"NONE","body":"> 你可以自己给同时调用的service数做原子计数，看看是不是真的某些调用卡住了，这个计数可以逐渐细化，直到定位到对应的函数。这个也可以用bvar::Adder做，找到一些有嫌疑的函数，写一个helper类，构造函数里给对应的bvar+1，析构函数里-1，最后看哪些函数的计数没有归0。另外上面提到的/vars/rpc_controller_count也可以看一下\r\n\r\nen 多谢 我继续排查，有问题再请教","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426132062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426550245","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-426550245","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":426550245,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjU1MDI0NQ==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-03T08:16:43Z","updated_at":"2018-10-03T08:16:43Z","author_association":"NONE","body":"> 你可以自己给同时调用的service数做原子计数，看看是不是真的某些调用卡住了，这个计数可以逐渐细化，直到定位到对应的函数。这个也可以用bvar::Adder做，找到一些有嫌疑的函数，写一个helper类，构造函数里给对应的bvar+1，析构函数里-1，最后看哪些函数的计数没有归0。另外上面提到的/vars/rpc_controller_count也可以看一下\r\n\r\n![image](https://user-images.githubusercontent.com/8623385/46398418-a7f05e80-c727-11e8-924a-1c90984922fe.png)\r\n\r\nrpc_controller_count为8 这个能说明说明勒？ @jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426550245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426554663","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-426554663","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":426554663,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjU1NDY2Mw==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-03T08:33:01Z","updated_at":"2018-10-03T08:33:01Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/8623385/46399246-c8b9b380-c729-11e8-89ef-17373745526c.png)\r\n我发现有些线程出现这样卡主问题，brpc的mutex 与 pthread的mutex结合使用有问题？\r\n@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426554663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426856354","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-426856354","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":426856354,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjg1NjM1NA==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-04T01:32:00Z","updated_at":"2018-10-04T01:32:34Z","author_association":"NONE","body":"我们使用了tcmalloc 然而bthread 调用了系统的backtrace接口，一下是tcmalloc说明\r\n>he gory details: The underlying problem is in the backtrace()\r\nfunction, which is a built-in function in libc.\r\nBacktracing is fairly straightforward in the normal case, but can run\r\ninto problems when having to backtrace across a signal frame.\r\nUnfortunately, the cpu-profiler uses signals in order to register a\r\nprofiling event, so every backtrace that the profiler does crosses a\r\nsignal frame.\r\nIn our experience, the only time there is trouble is when the signal\r\nfires in the middle of pthread_mutex_lock.  pthread_mutex_lock is\r\ncalled quite a bit from system libraries, particularly at program\r\nstartup and when creating a new thread.\r\nThe solution: The dwarf debugging format has support for 'cfi\r\nannotations', which make it easy to recognize a signal frame.  Some OS\r\ndistributions, such as Fedora and gentoo 2007.0, already have added\r\ncfi annotations to their libc.  A future version of libunwind should\r\nrecognize these annotations; these systems should not see any\r\ncrashses.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426856354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426860970","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-426860970","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":426860970,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjg2MDk3MA==","user":{"login":"imotai","id":8623385,"node_id":"MDQ6VXNlcjg2MjMzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8623385?v=4","gravatar_id":"","url":"https://api.github.com/users/imotai","html_url":"https://github.com/imotai","followers_url":"https://api.github.com/users/imotai/followers","following_url":"https://api.github.com/users/imotai/following{/other_user}","gists_url":"https://api.github.com/users/imotai/gists{/gist_id}","starred_url":"https://api.github.com/users/imotai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imotai/subscriptions","organizations_url":"https://api.github.com/users/imotai/orgs","repos_url":"https://api.github.com/users/imotai/repos","events_url":"https://api.github.com/users/imotai/events{/privacy}","received_events_url":"https://api.github.com/users/imotai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-04T02:03:08Z","updated_at":"2018-10-04T02:03:08Z","author_association":"NONE","body":"最终定位一个bug, bthread_mutex_unlock的时候没有判断g_cp变量，导致每次unlock的时候都会调用backtrace\r\n\r\n![image](https://user-images.githubusercontent.com/8623385/46449061-91e0ad80-c7bc-11e8-92f0-4cf15f959c78.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426860970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426875441","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-426875441","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":426875441,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNjg3NTQ0MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-04T03:43:34Z","updated_at":"2018-10-04T03:43:34Z","author_association":"CONTRIBUTOR","body":"@imotai 不会每次都调用的，没有lock的话上面的is_contention_site_valid会是false，而且这部分代码是contention profiler的，不打开就没什么关联。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/426875441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427238428","html_url":"https://github.com/apache/brpc/issues/480#issuecomment-427238428","issue_url":"https://api.github.com/repos/apache/brpc/issues/480","id":427238428,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzIzODQyOA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-05T03:53:15Z","updated_at":"2018-10-05T03:53:15Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427238428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427735251","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-427735251","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":427735251,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzczNTI1MQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-08T06:49:02Z","updated_at":"2018-10-08T06:49:02Z","author_association":"NONE","body":"赞h2c/grpc的支持,  请问下这里有grpc stream 方式的支持计划么?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427735251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427771427","html_url":"https://github.com/apache/brpc/issues/506#issuecomment-427771427","issue_url":"https://api.github.com/repos/apache/brpc/issues/506","id":427771427,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzc3MTQyNw==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-08T09:28:18Z","updated_at":"2018-10-08T09:44:08Z","author_association":"CONTRIBUTOR","body":"开发方案描述：\r\n1. 类Socket中增加_rpc_count表示上面请求的rpc个数，用于表示负载。\r\n    GetSocket()时_rpc_count加一，ReturnSocket()时_rpc_count减一。\r\n\r\n2. gflag max_connection_multiple_size表示最多可创建的connection\r\n\r\n3. gflag gap_threshold_for_switch_multiple_connection 表示当两个连接上的_rpc_count的差值大于这个数时，将选择负载较轻的连接。\r\n\r\n- 所以当gap_threshold_for_switch_multiple_connection为0时，类似于pooled的方式，每次都尽量选择负载为0的连接，不同是，当连接创建满时，复用现有的负载最轻的连接。\r\n- 当gap_threshold_for_switch_multiple_connection设置为无限大时，就是single的方式。\r\n\r\n4. 类SocketMultiple（类似SocketPooled，会共同继承一个抽象类SocketGroup）用来管理multiple connection。\r\n- SocketMultiple::_lightest_sid：当前负载最轻连接（和gap_threshold_for_switch_multiple_connection值相关），每个连接 GetSocket()和ReturnSocket()时都会和当前的_lightest_sid比较，如果_lightest_sid负载减去当前连接负载的差值超过gap_threshold_for_switch_multiple_connection。则替换_lightest_sid。\r\n- SocketMultiple::_free：一个数组，用来记录当前负载为0的连接。记录的原因是负载为0的不会再更新负载了，需要记录下来。\r\n- SocketMultiple::GetSocket()：选择一个连接，方式如下：先选择_lightest_sid，如果其负载_rpc_count\r\n <= gap_threshold_for_switch_multiple_connection 则选择成功，否则如果_free非空，pop一个出来使用，否则如果连接未创建满，则创建一个新的连接，否则保持选择当前的_lightest_sid。新选择的连接不是当前_lightest_sid需要更新_lightest_sid。\r\n-  SocketMultiple::ReturnSocket()：如果负载比当前_lightest_sid轻（差值大于gap_threshold_for_switch_multiple_connection ）则更新_lightest_sid，如果负载为0，则push_back到_free中去。\r\n\r\n5. SocketMultiple::_free的更新需要加锁，其他原子变量更新。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427771427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427773252","html_url":"https://github.com/apache/brpc/issues/506#issuecomment-427773252","issue_url":"https://api.github.com/repos/apache/brpc/issues/506","id":427773252,"node_id":"MDEyOklzc3VlQ29tbWVudDQyNzc3MzI1Mg==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-08T09:34:51Z","updated_at":"2018-10-08T09:34:51Z","author_association":"CONTRIBUTOR","body":"@jamesge 帮忙看下上面的方案描述","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/427773252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428048962","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-428048962","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":428048962,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODA0ODk2Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-09T03:39:45Z","updated_at":"2018-10-09T03:39:45Z","author_association":"CONTRIBUTOR","body":"这里面的ProgressiveReader和ProgressiveAttachment是二进制流层面的，是更加基础的功能，http1也支持（但是不同流要不同连接）。grpc stream要在其之上再封装一层，如果你有需求可以建一个单独的issue。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428048962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428052263","html_url":"https://github.com/apache/brpc/issues/520#issuecomment-428052263","issue_url":"https://api.github.com/repos/apache/brpc/issues/520","id":428052263,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODA1MjI2Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-09T04:03:02Z","updated_at":"2018-10-09T04:03:02Z","author_association":"CONTRIBUTOR","body":"确实有误，感谢汇报。master已修复，同时删除了基本无用的process_memory_library/dirty","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428052263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428430255","html_url":"https://github.com/apache/brpc/issues/506#issuecomment-428430255","issue_url":"https://api.github.com/repos/apache/brpc/issues/506","id":428430255,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODQzMDI1NQ==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-10T04:00:55Z","updated_at":"2018-10-10T04:00:55Z","author_association":"CONTRIBUTOR","body":"伪码实现：\r\n```{r eval=FALSE}\r\nclass  SocketMultiple : public SocketGroup {\r\npublic:\r\n    explicit SocketMultiple(const SocketOptions& opt);\r\n    virtual ~SocketMultiple();\r\n    virtual int GetSocket(SocketUniquePtr* ptr);\r\n    virtual void ReturnSocket(Socket* sock);\r\nprivate:\r\n    butil::atomic<uint64_t>  _rpc_count;     // 总请求数\r\n    butil::atomic<size_t> _num_created;      //创建的连接数\r\n    butil::atomic<int> _num_free;               //负载为0的连接数\r\n    butil::atomic<SocketId> _lightest_sid;   //负载最轻的连接\r\n    butil::Mutex _mutex;\r\n    std::vector<SocketId> _free;                 //负载为0的连接\r\n    std::vector<SocketId> _multiple;          // 所有已创建连接\r\n};\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428430255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428432015","html_url":"https://github.com/apache/brpc/issues/506#issuecomment-428432015","issue_url":"https://api.github.com/repos/apache/brpc/issues/506","id":428432015,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODQzMjAxNQ==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-10T04:14:34Z","updated_at":"2018-10-10T04:14:34Z","author_association":"CONTRIBUTOR","body":"选择连接：\r\n```{r eval=FALSE}\r\nint SocketMultiple::GetSocket(SocketUniquePtr* ptr) {\r\n    _rpc_count.fetch_add(1, butil::memory_order_relaxed);\r\n    SocketId lsid = _lightest_sid.load(butil::memory_order_acquire);\r\n    SocketUniquePtr lptr;\r\n    const uint32_t threshold = FLAGS_gap_threshold_for_multiple_connections;\r\n   // 先检查_lightest_sid的负载是否小于threshold，如果小于保持在_lightest_sid发送请求\r\n    if (Socket::Address(lsid, &lptr) == 0) {\r\n        if ( lptr->_rpc_count.fetch_add(1, butil::memory_order_relaxed) < threshold) {\r\n            ptr->reset(lptr.release());\r\n            return 0;\r\n        }\r\n    }\r\n    // 如果有负载为0的连接，弹出一个使用\r\n    if (_num_free.fetch_sub(1, butil::memory_order_relaxed) > 0) {\r\n        SocketId sid;\r\n        {\r\n            BAIDU_SCOPED_LOCK(_mutex);\r\n            CHECK(!_free.empty()) << \"No free multiple socket found\";\r\n            sid = _free.back();\r\n            _free.pop_back();\r\n        }\r\n\t\t\t\t....\r\n        // 更新当前_lightest_sid\r\n        _lightest_sid.compare_exchange_strong(lsid, sid, butil::memory_order_relaxed);\r\n        return 0;\r\n    } else {\r\n        _num_free.fetch_add(1, butil::memory_order_relaxed);\r\n    }\r\n    // 如果连接未建满，创建一个新的连接\r\n    if (_num_created.fetch_add(1, butil::memory_order_relaxed) < FLAGS_max_connection_multiple_size) {\r\n        Create(opt, &sid);\r\n\t\t\t  Socket::Address(sid, ptr);\r\n\t\t    ....\r\n        (*ptr)->_rpc_count.fetch_add(1, butil::memory_order_acquire);\r\n        //更新_lightest_sid\r\n        _lightest_sid.compare_exchange_strong(lsid, sid, butil::memory_order_relaxed);\r\n        BAIDU_SCOPED_LOCK(_mutex);\r\n        _multiple.emplace(sid);\r\n        return 0;\r\n    } else {\r\n        _num_created.fetch_sub(1, butil::memory_order_relaxed);\r\n    }\r\n    // 保持在_lightest_sid上发送请求，在burst的情况下，瞬间可能有多个连接在上面发送。\r\n    // 可以比较当前的rpc_count均值来避免连接过大。\r\n    if (lptr) {\r\n        load = lptr->_rpc_count.load(butil::memory_order_relaxed);\r\n        // _lightest_sid的负载超过2 * Av_load+threshold(平均负载的2倍加threshold)\r\n        // 这边条件应该较严格，防止经常跑进这个逻辑\r\n        if ((load - threshold) * _num_created > 2*_rpc_count ) {\r\n             // 随机遍历选择一个小于平均负载的sid\r\n             SocketUniquePtr rand_ptr;\r\n             {\r\n                 BAIDU_SCOPED_LOCK(_mutex);\r\n                 for( sid : _multiple) {\r\n                      Socketid sid;\r\n                 }\r\n             }\r\n            // 更新_lightest_sid\r\n            do {\r\n                if (Socket::Address(lsid, &new_lptr) == 0) {\r\n                    if (new_lptr->_rpc_count.load(butil::memory_order_relaxed) \r\n                        < rand_ptr->_rpc_count.load(butil::memory_order_relaxed) ) {\r\n                        ptr->reset(new_lptr.release());\r\n                        return 0;\r\n                    }\r\n                }\r\n            } while (! _lightest_sid.compare_exchange_strong(lsid, rand_sid, butil::memory_order_relaxed);)\r\n            ptr->reset(rand_ptr.release());\r\n            return 0;\r\n        } else {  // 否则保持_lightest_sid\r\n            ptr->reset(lptr.release());\r\n            return 0;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428432015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428432110","html_url":"https://github.com/apache/brpc/issues/506#issuecomment-428432110","issue_url":"https://api.github.com/repos/apache/brpc/issues/506","id":428432110,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODQzMjExMA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-10T04:15:18Z","updated_at":"2018-10-10T04:15:18Z","author_association":"CONTRIBUTOR","body":"返还连接：\r\n```{r eval=FALSE}\r\nvoid SocketMultiple::ReturnSocket(Socket* sock) {\r\n    // 总rpc_cout减一\r\n     _rpc_count.fetch_sub(1, butil::memory_order_relaxed);\r\n    // 当前连接的rpc_cout减一\r\n    uint32_t load = sock->_rpc_count.fetch_sub(1, butil::memory_order_acquire);\r\n    --load;\r\n    SocketId min_sid = _lightest_sid.load(butil::memory_order_relaxed);\r\n    if (id == min_sid) {\r\n        return;\r\n    }\r\n    // 如果该连接的rpc_cout 与_lightest_sid的差值大于threshold 则更新_lightest_sid。\r\n    // 目的防止颠簸，没有必要负载小于就更新\r\n    for(;;) {\r\n        SocketUniquePtr ptr;\r\n        if (Socket::Address(min_sid, &ptr) != 0) {\r\n            break;\r\n        }\r\n        if (id == min_sid) {\r\n            return;\r\n        }\r\n        if (load + threshold>= ptr->_rpc_count.load(butil::memory_order_acquire)) {\r\n            break;\r\n        }\r\n        if (_lightest_sid.compare_exchange_strong(\r\n            min_sid, id, butil::memory_order_relaxed)) {\r\n            return;\r\n        }\r\n    }\r\n    // 如果没有更新成功，且负载为0，保存到free队列中去。 \r\n    if (load == 0) {\r\n        _num_free.fetch_add(1, butil::memory_order_relaxed);\r\n        BAIDU_SCOPED_LOCK(_mutex);\r\n        _free.push_back(id);\r\n    }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428432110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428450875","html_url":"https://github.com/apache/brpc/pull/497#issuecomment-428450875","issue_url":"https://api.github.com/repos/apache/brpc/issues/497","id":428450875,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODQ1MDg3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-10T06:16:01Z","updated_at":"2018-10-10T06:16:01Z","author_association":"CONTRIBUTOR","body":"这个实现在我的虚机上有问题，现象是单测里的Timer延时明显高估导致失败。\r\ncpuinfo片段如下：\r\n```\r\nmodel name\t: Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz\r\ncpu MHz\t\t: 1800.002\r\n```\r\n实际应该是1800但是取了model name上的1600。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428450875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428536874","html_url":"https://github.com/apache/brpc/pull/497#issuecomment-428536874","issue_url":"https://api.github.com/repos/apache/brpc/issues/497","id":428536874,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODUzNjg3NA==","user":{"login":"PeterRK","id":4464013,"node_id":"MDQ6VXNlcjQ0NjQwMTM=","avatar_url":"https://avatars.githubusercontent.com/u/4464013?v=4","gravatar_id":"","url":"https://api.github.com/users/PeterRK","html_url":"https://github.com/PeterRK","followers_url":"https://api.github.com/users/PeterRK/followers","following_url":"https://api.github.com/users/PeterRK/following{/other_user}","gists_url":"https://api.github.com/users/PeterRK/gists{/gist_id}","starred_url":"https://api.github.com/users/PeterRK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PeterRK/subscriptions","organizations_url":"https://api.github.com/users/PeterRK/orgs","repos_url":"https://api.github.com/users/PeterRK/repos","events_url":"https://api.github.com/users/PeterRK/events{/privacy}","received_events_url":"https://api.github.com/users/PeterRK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-10T11:28:10Z","updated_at":"2018-10-10T11:28:10Z","author_association":"NONE","body":"> 这个实现在我的虚机上有问题，现象是单测里的Timer延时明显高估导致失败。\r\n> cpuinfo片段如下：\r\n> \r\n> ```\r\n> model name\t: Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz\r\n> cpu MHz\t\t: 1800.002\r\n> ```\r\n> 实际应该是1800但是取了model name上的1600。\r\n\r\n走了read_cpu_frequency_by_cpuid？\r\nread_cpu_frequency_by_cpuid是Intel文档提供的标准解决方法，但是要比较新的处理器才支持。\r\nread_cpu_frequency_from_brand_string的做法不是100%靠谱的，仅作备用。\r\n\r\n能提供一下i5-8250U下read_cpu_frequency_by_cpuid的结果吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428536874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428634402","html_url":"https://github.com/apache/brpc/pull/497#issuecomment-428634402","issue_url":"https://api.github.com/repos/apache/brpc/issues/497","id":428634402,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODYzNDQwMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-10T16:12:32Z","updated_at":"2018-10-10T16:12:32Z","author_association":"CONTRIBUTOR","body":"读不到cpu-id，在另一台机器的另一个vm里试了下也读不到，现在master的cpuwide_time已经改成总是monotonic-time了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428634402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428776011","html_url":"https://github.com/apache/brpc/pull/497#issuecomment-428776011","issue_url":"https://api.github.com/repos/apache/brpc/issues/497","id":428776011,"node_id":"MDEyOklzc3VlQ29tbWVudDQyODc3NjAxMQ==","user":{"login":"PeterRK","id":4464013,"node_id":"MDQ6VXNlcjQ0NjQwMTM=","avatar_url":"https://avatars.githubusercontent.com/u/4464013?v=4","gravatar_id":"","url":"https://api.github.com/users/PeterRK","html_url":"https://github.com/PeterRK","followers_url":"https://api.github.com/users/PeterRK/followers","following_url":"https://api.github.com/users/PeterRK/following{/other_user}","gists_url":"https://api.github.com/users/PeterRK/gists{/gist_id}","starred_url":"https://api.github.com/users/PeterRK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PeterRK/subscriptions","organizations_url":"https://api.github.com/users/PeterRK/orgs","repos_url":"https://api.github.com/users/PeterRK/repos","events_url":"https://api.github.com/users/PeterRK/events{/privacy}","received_events_url":"https://api.github.com/users/PeterRK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-11T00:22:57Z","updated_at":"2018-10-11T00:22:57Z","author_association":"NONE","body":"> 读不到cpu-id，在另一台机器的另一个vm里试了下也读不到，现在master的cpuwide_time已经改成总是monotonic-time了。\r\n\r\n“读不到cpuid”指read_cpu_frequency_by_cpuid返回0吗？\r\n\r\n通过clock_gettime拿时间可能比自己算要合适","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/428776011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/429194071","html_url":"https://github.com/apache/brpc/issues/505#issuecomment-429194071","issue_url":"https://api.github.com/repos/apache/brpc/issues/505","id":429194071,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTE5NDA3MQ==","user":{"login":"weimzh","id":1220443,"node_id":"MDQ6VXNlcjEyMjA0NDM=","avatar_url":"https://avatars.githubusercontent.com/u/1220443?v=4","gravatar_id":"","url":"https://api.github.com/users/weimzh","html_url":"https://github.com/weimzh","followers_url":"https://api.github.com/users/weimzh/followers","following_url":"https://api.github.com/users/weimzh/following{/other_user}","gists_url":"https://api.github.com/users/weimzh/gists{/gist_id}","starred_url":"https://api.github.com/users/weimzh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weimzh/subscriptions","organizations_url":"https://api.github.com/users/weimzh/orgs","repos_url":"https://api.github.com/users/weimzh/repos","events_url":"https://api.github.com/users/weimzh/events{/privacy}","received_events_url":"https://api.github.com/users/weimzh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-12T03:38:14Z","updated_at":"2018-10-12T03:38:14Z","author_association":"CONTRIBUTOR","body":"span上下文 这个大概可以如何传递呢，需要在RequestMeta加字段吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/429194071/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/429361831","html_url":"https://github.com/apache/brpc/pull/487#issuecomment-429361831","issue_url":"https://api.github.com/repos/apache/brpc/issues/487","id":429361831,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTM2MTgzMQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-12T15:18:25Z","updated_at":"2018-10-12T15:18:25Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/429361831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/430604681","html_url":"https://github.com/apache/brpc/issues/505#issuecomment-430604681","issue_url":"https://api.github.com/repos/apache/brpc/issues/505","id":430604681,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMDYwNDY4MQ==","user":{"login":"iamdajiejie","id":33272372,"node_id":"MDQ6VXNlcjMzMjcyMzcy","avatar_url":"https://avatars.githubusercontent.com/u/33272372?v=4","gravatar_id":"","url":"https://api.github.com/users/iamdajiejie","html_url":"https://github.com/iamdajiejie","followers_url":"https://api.github.com/users/iamdajiejie/followers","following_url":"https://api.github.com/users/iamdajiejie/following{/other_user}","gists_url":"https://api.github.com/users/iamdajiejie/gists{/gist_id}","starred_url":"https://api.github.com/users/iamdajiejie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamdajiejie/subscriptions","organizations_url":"https://api.github.com/users/iamdajiejie/orgs","repos_url":"https://api.github.com/users/iamdajiejie/repos","events_url":"https://api.github.com/users/iamdajiejie/events{/privacy}","received_events_url":"https://api.github.com/users/iamdajiejie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-17T12:16:05Z","updated_at":"2018-10-17T12:16:32Z","author_association":"NONE","body":"> span上下文 这个大概可以如何传递呢，需要在RequestMeta加字段吗\r\n**同问，能否增加一个通用字段允许用户传递自定义的上下文**","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/430604681/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432110149","html_url":"https://github.com/apache/brpc/issues/475#issuecomment-432110149","issue_url":"https://api.github.com/repos/apache/brpc/issues/475","id":432110149,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjExMDE0OQ==","user":{"login":"iamtianyuan","id":1343671,"node_id":"MDQ6VXNlcjEzNDM2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/1343671?v=4","gravatar_id":"","url":"https://api.github.com/users/iamtianyuan","html_url":"https://github.com/iamtianyuan","followers_url":"https://api.github.com/users/iamtianyuan/followers","following_url":"https://api.github.com/users/iamtianyuan/following{/other_user}","gists_url":"https://api.github.com/users/iamtianyuan/gists{/gist_id}","starred_url":"https://api.github.com/users/iamtianyuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamtianyuan/subscriptions","organizations_url":"https://api.github.com/users/iamtianyuan/orgs","repos_url":"https://api.github.com/users/iamtianyuan/repos","events_url":"https://api.github.com/users/iamtianyuan/events{/privacy}","received_events_url":"https://api.github.com/users/iamtianyuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-23T06:26:06Z","updated_at":"2018-10-23T06:26:06Z","author_association":"NONE","body":"我也碰到了这个问题，我把config.mk中的 `CXX=clang++`改成了`CXX=clang++ -std=c++11`，期待更好的办法","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432110149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432592227","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-432592227","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":432592227,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjU5MjIyNw==","user":{"login":"ccy4fun","id":37200344,"node_id":"MDQ6VXNlcjM3MjAwMzQ0","avatar_url":"https://avatars.githubusercontent.com/u/37200344?v=4","gravatar_id":"","url":"https://api.github.com/users/ccy4fun","html_url":"https://github.com/ccy4fun","followers_url":"https://api.github.com/users/ccy4fun/followers","following_url":"https://api.github.com/users/ccy4fun/following{/other_user}","gists_url":"https://api.github.com/users/ccy4fun/gists{/gist_id}","starred_url":"https://api.github.com/users/ccy4fun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccy4fun/subscriptions","organizations_url":"https://api.github.com/users/ccy4fun/orgs","repos_url":"https://api.github.com/users/ccy4fun/repos","events_url":"https://api.github.com/users/ccy4fun/events{/privacy}","received_events_url":"https://api.github.com/users/ccy4fun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T09:54:06Z","updated_at":"2018-10-24T09:54:06Z","author_association":"NONE","body":"@gtarcoder 我们也遇到了死锁情况，你是怎么解决的？有伪代码解释吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432592227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432611806","html_url":"https://github.com/apache/brpc/issues/412#issuecomment-432611806","issue_url":"https://api.github.com/repos/apache/brpc/issues/412","id":432611806,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjYxMTgwNg==","user":{"login":"gtarcoder","id":11898942,"node_id":"MDQ6VXNlcjExODk4OTQy","avatar_url":"https://avatars.githubusercontent.com/u/11898942?v=4","gravatar_id":"","url":"https://api.github.com/users/gtarcoder","html_url":"https://github.com/gtarcoder","followers_url":"https://api.github.com/users/gtarcoder/followers","following_url":"https://api.github.com/users/gtarcoder/following{/other_user}","gists_url":"https://api.github.com/users/gtarcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/gtarcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gtarcoder/subscriptions","organizations_url":"https://api.github.com/users/gtarcoder/orgs","repos_url":"https://api.github.com/users/gtarcoder/repos","events_url":"https://api.github.com/users/gtarcoder/events{/privacy}","received_events_url":"https://api.github.com/users/gtarcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T11:02:34Z","updated_at":"2018-10-24T11:02:34Z","author_association":"NONE","body":"@ccy4fun  不确定你遇到的问题是否和我们是相同的原因。我之前死锁的原因是： 使用了 brpc里面的 doublybuffereddata，bthread A （位于pthread X上）使用 ScopedPtr 去读取 doublybuffereddata 里面的数据时候(此时获取 pthread local lock)，Scope的范围内部 执行了一个 IO 操作，IO 操作导致 bthread 线程切换； 此时 bthread B （也位于 pthread X上），执行同样的 读取 doublybuffereddata 操作，也获取 pthread local lock, 这样就导致 一个pthread 上，两次获取 thread local lock，从而死锁。\r\n\r\n当时的解决方案就是，在 ScopedPtr 内部不要进行 IO 操作（以及其他一些可能导致bthread 发生切换的操作）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432611806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432628115","html_url":"https://github.com/apache/brpc/pull/541#issuecomment-432628115","issue_url":"https://api.github.com/repos/apache/brpc/issues/541","id":432628115,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjYyODExNQ==","user":{"login":"yichenluan","id":5328290,"node_id":"MDQ6VXNlcjUzMjgyOTA=","avatar_url":"https://avatars.githubusercontent.com/u/5328290?v=4","gravatar_id":"","url":"https://api.github.com/users/yichenluan","html_url":"https://github.com/yichenluan","followers_url":"https://api.github.com/users/yichenluan/followers","following_url":"https://api.github.com/users/yichenluan/following{/other_user}","gists_url":"https://api.github.com/users/yichenluan/gists{/gist_id}","starred_url":"https://api.github.com/users/yichenluan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yichenluan/subscriptions","organizations_url":"https://api.github.com/users/yichenluan/orgs","repos_url":"https://api.github.com/users/yichenluan/repos","events_url":"https://api.github.com/users/yichenluan/events{/privacy}","received_events_url":"https://api.github.com/users/yichenluan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T12:04:36Z","updated_at":"2018-10-24T12:04:55Z","author_association":"CONTRIBUTOR","body":"我在阅读代码的时候，还发现了一些类似的注释拼写问题，还有未统一 (int \\*foo) 和 (int\\* foo）代码风格上的问题，不知道 @jamesge 是否欢迎这种 PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432628115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432634431","html_url":"https://github.com/apache/brpc/issues/306#issuecomment-432634431","issue_url":"https://api.github.com/repos/apache/brpc/issues/306","id":432634431,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjYzNDQzMQ==","user":{"login":"ccy4fun","id":37200344,"node_id":"MDQ6VXNlcjM3MjAwMzQ0","avatar_url":"https://avatars.githubusercontent.com/u/37200344?v=4","gravatar_id":"","url":"https://api.github.com/users/ccy4fun","html_url":"https://github.com/ccy4fun","followers_url":"https://api.github.com/users/ccy4fun/followers","following_url":"https://api.github.com/users/ccy4fun/following{/other_user}","gists_url":"https://api.github.com/users/ccy4fun/gists{/gist_id}","starred_url":"https://api.github.com/users/ccy4fun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ccy4fun/subscriptions","organizations_url":"https://api.github.com/users/ccy4fun/orgs","repos_url":"https://api.github.com/users/ccy4fun/repos","events_url":"https://api.github.com/users/ccy4fun/events{/privacy}","received_events_url":"https://api.github.com/users/ccy4fun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-24T12:26:55Z","updated_at":"2018-10-24T12:26:55Z","author_association":"NONE","body":"没有找到文档，能给个链接吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432634431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432910514","html_url":"https://github.com/apache/brpc/issues/543#issuecomment-432910514","issue_url":"https://api.github.com/repos/apache/brpc/issues/543","id":432910514,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjkxMDUxNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-25T04:27:19Z","updated_at":"2018-10-26T01:30:14Z","author_association":"CONTRIBUTOR","body":"不setfailed，设置status_code为200-300以外的，此时body由用户决定。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432910514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432920107","html_url":"https://github.com/apache/brpc/issues/543#issuecomment-432920107","issue_url":"https://api.github.com/repos/apache/brpc/issues/543","id":432920107,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMjkyMDEwNw==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-25T05:31:59Z","updated_at":"2018-10-25T05:31:59Z","author_association":"MEMBER","body":"> if (encoding != NULL && *encoding == common->GZIP) {\r\n                TRACEPRINTF(\"Decompressing request=%lu\",\r\n                            (unsigned long)req_body.size());\r\n                butil::IOBuf uncompressed;\r\n                if (!policy::GzipDecompress(req_body, &uncompressed)) {\r\n                    cntl->SetFailed(EREQUEST, \"Fail to un-gzip request body\");\r\n                    return SendHttpResponse(cntl.release(), server, method_status, msg->received_us());\r\n                }\r\n                req_body.swap(uncompressed);\r\n            }\r\n\r\nsetfailed 由框架内部设置，该如何定制返回内容呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/432920107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433256737","html_url":"https://github.com/apache/brpc/issues/546#issuecomment-433256737","issue_url":"https://api.github.com/repos/apache/brpc/issues/546","id":433256737,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI1NjczNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T01:28:42Z","updated_at":"2018-10-26T01:28:42Z","author_association":"CONTRIBUTOR","body":"编译打开-pedantic了么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433256737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433256928","html_url":"https://github.com/apache/brpc/issues/543#issuecomment-433256928","issue_url":"https://api.github.com/repos/apache/brpc/issues/543","id":433256928,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI1NjkyOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T01:29:56Z","updated_at":"2018-10-26T01:29:56Z","author_association":"CONTRIBUTOR","body":"看上面的回复。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433256928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433262569","html_url":"https://github.com/apache/brpc/issues/543#issuecomment-433262569","issue_url":"https://api.github.com/repos/apache/brpc/issues/543","id":433262569,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI2MjU2OQ==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T02:07:11Z","updated_at":"2018-10-26T02:07:11Z","author_association":"MEMBER","body":"@jamesge 看了 ，我是说在 brpc::ProcessHttpRequest 函数内部出错，还没到用户自定义的接口函数，就被框架设置set failed， 比如 Fail to un-gzip request body。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433262569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433271951","html_url":"https://github.com/apache/brpc/issues/543#issuecomment-433271951","issue_url":"https://api.github.com/repos/apache/brpc/issues/543","id":433271951,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI3MTk1MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T03:08:37Z","updated_at":"2018-10-26T03:08:37Z","author_association":"CONTRIBUTOR","body":"这种无法自定义","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433271951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433273410","html_url":"https://github.com/apache/brpc/issues/546#issuecomment-433273410","issue_url":"https://api.github.com/repos/apache/brpc/issues/546","id":433273410,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI3MzQxMA==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T03:18:22Z","updated_at":"2018-10-26T03:18:22Z","author_association":"CONTRIBUTOR","body":"打开 -pedantic 报了更多的编译警报，比如这种：\r\n```\r\nbrpc/include/butil/containers/hash_tables.h:187:41: error: extra ';' [-Werror=pedantic]\r\n DEFINE_32BIT_PAIR_HASH(int16_t, int16_t);\r\n                                         ^\r\nbrpc/include/butil/containers/hash_tables.h:188:42: error: extra ';' [-Werror=pedantic]\r\n DEFINE_32BIT_PAIR_HASH(int16_t, uint16_t);\r\n                                          ^\r\nbrpc/include/butil/containers/hash_tables.h:189:41: error: extra ';' [-Werror=pedantic]\r\n DEFINE_32BIT_PAIR_HASH(int16_t, int32_t);\r\n                                         ^\r\nbrpc/include/butil/containers/hash_tables.h:190:42: error: extra ';' [-Werror=pedantic]\r\n DEFINE_32BIT_PAIR_HASH(int16_t, uint32_t);\r\n                                          ^\r\nbrpc/include/butil/containers/hash_tables.h:191:42: error: extra ';' [-Werror=pedantic]\r\n DEFINE_32BIT_PAIR_HASH(uint16_t, int16_t);\r\n                                          ^\r\nbrpc/include/butil/containers/hash_tables.h:192:43: error: extra ';' [-Werror=pedantic]\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433273410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433274757","html_url":"https://github.com/apache/brpc/issues/546#issuecomment-433274757","issue_url":"https://api.github.com/repos/apache/brpc/issues/546","id":433274757,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI3NDc1Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T03:27:55Z","updated_at":"2018-10-26T03:27:55Z","author_association":"CONTRIBUTOR","body":"-pedantic是不用加的，这是以更严格的标准来检查代码。我是确认下没加。这儿的warning看起来确实是正确的warning，但在C++0x下没报，我们会看一下c++14和c++1y下的编译问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433274757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433277092","html_url":"https://github.com/apache/brpc/issues/542#issuecomment-433277092","issue_url":"https://api.github.com/repos/apache/brpc/issues/542","id":433277092,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI3NzA5Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T03:46:14Z","updated_at":"2018-10-26T03:46:14Z","author_association":"CONTRIBUTOR","body":"这个可能和流量都倾斜到一台机器上有关","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433277092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433277239","html_url":"https://github.com/apache/brpc/issues/539#issuecomment-433277239","issue_url":"https://api.github.com/repos/apache/brpc/issues/539","id":433277239,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI3NzIzOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T03:47:20Z","updated_at":"2018-10-26T03:47:20Z","author_association":"CONTRIBUTOR","body":"所有的condition都是这么工作的，mutex确保（非原子的）条件失败时等待，这个过程是原子的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433277239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433282752","html_url":"https://github.com/apache/brpc/issues/548#issuecomment-433282752","issue_url":"https://api.github.com/repos/apache/brpc/issues/548","id":433282752,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI4Mjc1Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T04:28:13Z","updated_at":"2018-10-26T04:28:13Z","author_association":"CONTRIBUTOR","body":"严格地来说这里应该抛出std::system_error，目前的实现可以改进。不过实践中不判pthread_mutex_lock的返回值的情况也确实非常多，对这个问题的重视度会低一点","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433282752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433306157","html_url":"https://github.com/apache/brpc/issues/546#issuecomment-433306157","issue_url":"https://api.github.com/repos/apache/brpc/issues/546","id":433306157,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzMwNjE1Nw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T06:54:38Z","updated_at":"2018-10-26T06:55:06Z","author_association":"MEMBER","body":"@choleraehyq  你们的g++自己改过么，开了你的option，试了g++4.8和g++7，只有在显式delete有non-virtual-dtor的基类指针的时候，才会报上面的warning，而brpc里面没有显式的delete你帖出来的StreamCreator和StreamUserData的基类指针，所以在我本地就没有报warning\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433306157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433331045","html_url":"https://github.com/apache/brpc/issues/548#issuecomment-433331045","issue_url":"https://api.github.com/repos/apache/brpc/issues/548","id":433331045,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzMzMTA0NQ==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T08:31:52Z","updated_at":"2018-10-26T08:31:52Z","author_association":"NONE","body":"> 严格地来说这里应该抛出std::system_error，目前的实现可以改进。不过实践中不判pthread_mutex_lock的返回值的情况也确实非常多，对这个问题的重视度会低一点\r\n\r\n嗯，那请问当前如果直接用bthread::Mutex::lock，会不会有坑，比如不是拿到锁的锁主，函数也可能会返回？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433331045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433333586","html_url":"https://github.com/apache/brpc/issues/546#issuecomment-433333586","issue_url":"https://api.github.com/repos/apache/brpc/issues/546","id":433333586,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzMzMzU4Ng==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T08:41:03Z","updated_at":"2018-10-26T08:41:51Z","author_association":"CONTRIBUTOR","body":"@zyearn \r\n是 4.9.2，不过是 debian 维护的 g++ 包\r\n```\r\ng++ (Debian 4.9.2-10) 4.9.2\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433333586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433579258","html_url":"https://github.com/apache/brpc/issues/464#issuecomment-433579258","issue_url":"https://api.github.com/repos/apache/brpc/issues/464","id":433579258,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzU3OTI1OA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-27T01:14:49Z","updated_at":"2018-10-27T01:14:49Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433579258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433593947","html_url":"https://github.com/apache/brpc/issues/486#issuecomment-433593947","issue_url":"https://api.github.com/repos/apache/brpc/issues/486","id":433593947,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzU5Mzk0Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-27T05:56:42Z","updated_at":"2018-10-27T05:56:42Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433593947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433607167","html_url":"https://github.com/apache/brpc/pull/501#issuecomment-433607167","issue_url":"https://api.github.com/repos/apache/brpc/issues/501","id":433607167,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzYwNzE2Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-27T09:56:39Z","updated_at":"2018-10-27T09:56:39Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433607167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433610687","html_url":"https://github.com/apache/brpc/issues/500#issuecomment-433610687","issue_url":"https://api.github.com/repos/apache/brpc/issues/500","id":433610687,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzYxMDY4Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-27T10:56:42Z","updated_at":"2018-10-27T10:56:42Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433610687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433674690","html_url":"https://github.com/apache/brpc/issues/496#issuecomment-433674690","issue_url":"https://api.github.com/repos/apache/brpc/issues/496","id":433674690,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzY3NDY5MA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-10-28T04:06:27Z","updated_at":"2018-10-28T04:06:27Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433674690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433692832","html_url":"https://github.com/apache/brpc/issues/526#issuecomment-433692832","issue_url":"https://api.github.com/repos/apache/brpc/issues/526","id":433692832,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzY5MjgzMg==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-28T10:28:19Z","updated_at":"2018-10-28T10:28:19Z","author_association":"CONTRIBUTOR","body":"麻烦问一下这个有完成的预期时间表吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433692832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433707682","html_url":"https://github.com/apache/brpc/issues/526#issuecomment-433707682","issue_url":"https://api.github.com/repos/apache/brpc/issues/526","id":433707682,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzcwNzY4Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-28T13:59:03Z","updated_at":"2018-10-28T13:59:03Z","author_association":"CONTRIBUTOR","body":"这类功能是nice to have，不会有明确时间表","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433707682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433829488","html_url":"https://github.com/apache/brpc/issues/518#issuecomment-433829488","issue_url":"https://api.github.com/repos/apache/brpc/issues/518","id":433829488,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzgyOTQ4OA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-29T08:43:59Z","updated_at":"2018-10-29T08:43:59Z","author_association":"CONTRIBUTOR","body":" 负载均衡支持参数 这个有支持计划？ 想把一致性的hash的 replicas数量，作为参数传入。\r\n目前是gflag控制的：\r\n\r\n// TODO: or 160?\r\nDEFINE_int32(chash_num_replicas, 100, \r\n             \"default number of replicas per server in chash\");","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/433829488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434162992","html_url":"https://github.com/apache/brpc/issues/555#issuecomment-434162992","issue_url":"https://api.github.com/repos/apache/brpc/issues/555","id":434162992,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDE2Mjk5Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T03:54:18Z","updated_at":"2018-10-30T03:54:18Z","author_association":"CONTRIBUTOR","body":"已修复，感谢报告 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434162992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434164146","html_url":"https://github.com/apache/brpc/issues/554#issuecomment-434164146","issue_url":"https://api.github.com/repos/apache/brpc/issues/554","id":434164146,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDE2NDE0Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T04:01:49Z","updated_at":"2018-10-30T04:01:49Z","author_association":"CONTRIBUTOR","body":"grpc-go的性能还可以，你主要是用在什么场景中？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434164146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434165934","html_url":"https://github.com/apache/brpc/issues/552#issuecomment-434165934","issue_url":"https://api.github.com/repos/apache/brpc/issues/552","id":434165934,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDE2NTkzNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T04:13:40Z","updated_at":"2018-10-30T04:13:40Z","author_association":"CONTRIBUTOR","body":"已发布0.9.5","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434165934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434351582","html_url":"https://github.com/apache/brpc/issues/557#issuecomment-434351582","issue_url":"https://api.github.com/repos/apache/brpc/issues/557","id":434351582,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDM1MTU4Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T15:38:43Z","updated_at":"2018-10-30T15:38:43Z","author_association":"CONTRIBUTOR","body":"这里有两种理解，一种是错误要递给用户回调(ProcessThriftFramedRequest)处理，以允许定制化错误的传回方式；另一种是协议本身规定了传递错误的方式，就无需访问到用户回调了。thrift应该两者皆可，我倾向于后者。这里这么写的原因大概是因为代码修改自nshead_service，这个协议是一定要传递给回调的。你可以考虑提一个pr。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434351582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434351980","html_url":"https://github.com/apache/brpc/issues/556#issuecomment-434351980","issue_url":"https://api.github.com/repos/apache/brpc/issues/556","id":434351980,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDM1MTk4MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T15:39:39Z","updated_at":"2018-10-30T15:39:39Z","author_association":"CONTRIBUTOR","body":"本身编译结果中不是就有libbrpc.a么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434351980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434354124","html_url":"https://github.com/apache/brpc/issues/518#issuecomment-434354124","issue_url":"https://api.github.com/repos/apache/brpc/issues/518","id":434354124,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDM1NDEyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-30T15:44:44Z","updated_at":"2018-10-30T15:44:44Z","author_association":"CONTRIBUTOR","body":"这个主要是要参数一路传递下来，你可以直接看看修改难度大否","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434354124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434536096","html_url":"https://github.com/apache/brpc/issues/557#issuecomment-434536096","issue_url":"https://api.github.com/repos/apache/brpc/issues/557","id":434536096,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDUzNjA5Ng==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-31T02:10:39Z","updated_at":"2018-10-31T02:10:39Z","author_association":"NONE","body":"> 这里有两种理解，一种是错误要递给用户回调(ProcessThriftFramedRequest)处理，以允许定制化错误的传回方式；另一种是协议本身规定了传递错误的方式，就无需访问到用户回调了。thrift应该两者皆可，我倾向于后者。这里这么写的原因大概是因为代码修改自nshead_service，这个协议是一定要传递给回调的。你可以考虑提一个pr。\r\n\r\n大概理解，不过这里的错误，我认为不太需要给用户回调处理加定制化了，都是框架级别的标准错误","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434536096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434914205","html_url":"https://github.com/apache/brpc/issues/507#issuecomment-434914205","issue_url":"https://api.github.com/repos/apache/brpc/issues/507","id":434914205,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDkxNDIwNQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-11-01T02:55:17Z","updated_at":"2018-11-01T02:55:17Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/434914205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/435013495","html_url":"https://github.com/apache/brpc/issues/206#issuecomment-435013495","issue_url":"https://api.github.com/repos/apache/brpc/issues/206","id":435013495,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTAxMzQ5NQ==","user":{"login":"E-HERO","id":15317336,"node_id":"MDQ6VXNlcjE1MzE3MzM2","avatar_url":"https://avatars.githubusercontent.com/u/15317336?v=4","gravatar_id":"","url":"https://api.github.com/users/E-HERO","html_url":"https://github.com/E-HERO","followers_url":"https://api.github.com/users/E-HERO/followers","following_url":"https://api.github.com/users/E-HERO/following{/other_user}","gists_url":"https://api.github.com/users/E-HERO/gists{/gist_id}","starred_url":"https://api.github.com/users/E-HERO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/E-HERO/subscriptions","organizations_url":"https://api.github.com/users/E-HERO/orgs","repos_url":"https://api.github.com/users/E-HERO/repos","events_url":"https://api.github.com/users/E-HERO/events{/privacy}","received_events_url":"https://api.github.com/users/E-HERO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-01T11:33:17Z","updated_at":"2018-11-01T11:33:17Z","author_association":"NONE","body":"这个logid是需要怎么打，是指一个请求框架打一条NOTICE日志带logid？还是框架打出的每一条日志都带这个logid，能描述详细一些么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/435013495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/435564575","html_url":"https://github.com/apache/brpc/issues/499#issuecomment-435564575","issue_url":"https://api.github.com/repos/apache/brpc/issues/499","id":435564575,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTU2NDU3NQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-11-03T06:29:21Z","updated_at":"2018-11-03T06:29:21Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/435564575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/435848390","html_url":"https://github.com/apache/brpc/issues/505#issuecomment-435848390","issue_url":"https://api.github.com/repos/apache/brpc/issues/505","id":435848390,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTg0ODM5MA==","user":{"login":"cjtest222","id":17874082,"node_id":"MDQ6VXNlcjE3ODc0MDgy","avatar_url":"https://avatars.githubusercontent.com/u/17874082?v=4","gravatar_id":"","url":"https://api.github.com/users/cjtest222","html_url":"https://github.com/cjtest222","followers_url":"https://api.github.com/users/cjtest222/followers","following_url":"https://api.github.com/users/cjtest222/following{/other_user}","gists_url":"https://api.github.com/users/cjtest222/gists{/gist_id}","starred_url":"https://api.github.com/users/cjtest222/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjtest222/subscriptions","organizations_url":"https://api.github.com/users/cjtest222/orgs","repos_url":"https://api.github.com/users/cjtest222/repos","events_url":"https://api.github.com/users/cjtest222/events{/privacy}","received_events_url":"https://api.github.com/users/cjtest222/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-05T11:52:17Z","updated_at":"2018-11-05T11:52:17Z","author_association":"NONE","body":"@jamesge 目前对跨越线程的支持是否有具体开发计划？我们team正考虑使用rpcz做tracing，一个方案是做一个patch添加跨线程的功能，但不确定在线程之间传递span_id会不会显著增加性能的损耗。另一个方案是修改跟踪的机制，使用log_id来做记录，然后根据LOG的信息来还原request/response的调用链条，但不知道能不能够做到准确跟踪。哪一个更加可行？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/435848390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436569428","html_url":"https://github.com/apache/brpc/pull/562#issuecomment-436569428","issue_url":"https://api.github.com/repos/apache/brpc/issues/562","id":436569428,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjU2OTQyOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-07T09:58:42Z","updated_at":"2018-11-07T09:58:42Z","author_association":"CONTRIBUTOR","body":"改名解决了什么问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436569428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436630596","html_url":"https://github.com/apache/brpc/issues/546#issuecomment-436630596","issue_url":"https://api.github.com/repos/apache/brpc/issues/546","id":436630596,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjYzMDU5Ng==","user":{"login":"ibyte2011","id":1227019,"node_id":"MDQ6VXNlcjEyMjcwMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1227019?v=4","gravatar_id":"","url":"https://api.github.com/users/ibyte2011","html_url":"https://github.com/ibyte2011","followers_url":"https://api.github.com/users/ibyte2011/followers","following_url":"https://api.github.com/users/ibyte2011/following{/other_user}","gists_url":"https://api.github.com/users/ibyte2011/gists{/gist_id}","starred_url":"https://api.github.com/users/ibyte2011/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ibyte2011/subscriptions","organizations_url":"https://api.github.com/users/ibyte2011/orgs","repos_url":"https://api.github.com/users/ibyte2011/repos","events_url":"https://api.github.com/users/ibyte2011/events{/privacy}","received_events_url":"https://api.github.com/users/ibyte2011/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-07T13:56:48Z","updated_at":"2018-11-07T13:56:48Z","author_association":"CONTRIBUTOR","body":"这个问题有解决办法了吗？Centos-7.4.1708   g++4.8  std=c++11 编译遇到同样的问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436630596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436857484","html_url":"https://github.com/apache/brpc/pull/562#issuecomment-436857484","issue_url":"https://api.github.com/repos/apache/brpc/issues/562","id":436857484,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjg1NzQ4NA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-08T03:05:22Z","updated_at":"2018-11-08T03:05:22Z","author_association":"MEMBER","body":"应该是mac的文件系统HFS+和APFS都有case insensitive的版本，mkdir build的时候和bazel的BUILD冲突了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436857484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436877965","html_url":"https://github.com/apache/brpc/issues/563#issuecomment-436877965","issue_url":"https://api.github.com/repos/apache/brpc/issues/563","id":436877965,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNjg3Nzk2NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-08T05:28:38Z","updated_at":"2018-11-08T05:28:38Z","author_association":"CONTRIBUTOR","body":"“大量”是多少？负载不高时steal占比较高是ok的，负载高时会下来。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/436877965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]