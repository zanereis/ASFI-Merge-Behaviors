[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1421980426","html_url":"https://github.com/apache/brpc/issues/1992#issuecomment-1421980426","issue_url":"https://api.github.com/repos/apache/brpc/issues/1992","id":1421980426,"node_id":"IC_kwDOBhmkcs5UwbMK","user":{"login":"kevincai","id":771299,"node_id":"MDQ6VXNlcjc3MTI5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/771299?v=4","gravatar_id":"","url":"https://api.github.com/users/kevincai","html_url":"https://github.com/kevincai","followers_url":"https://api.github.com/users/kevincai/followers","following_url":"https://api.github.com/users/kevincai/following{/other_user}","gists_url":"https://api.github.com/users/kevincai/gists{/gist_id}","starred_url":"https://api.github.com/users/kevincai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevincai/subscriptions","organizations_url":"https://api.github.com/users/kevincai/orgs","repos_url":"https://api.github.com/users/kevincai/repos","events_url":"https://api.github.com/users/kevincai/events{/privacy}","received_events_url":"https://api.github.com/users/kevincai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-08T04:24:17Z","updated_at":"2023-02-08T04:24:17Z","author_association":"NONE","body":"thx","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1421980426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422020881","html_url":"https://github.com/apache/brpc/pull/2111#issuecomment-1422020881","issue_url":"https://api.github.com/repos/apache/brpc/issues/2111","id":1422020881,"node_id":"IC_kwDOBhmkcs5UwlER","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-08T05:06:13Z","updated_at":"2023-02-08T05:06:13Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422020881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422344818","html_url":"https://github.com/apache/brpc/issues/2114#issuecomment-1422344818","issue_url":"https://api.github.com/repos/apache/brpc/issues/2114","id":1422344818,"node_id":"IC_kwDOBhmkcs5Ux0Jy","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-08T10:08:13Z","updated_at":"2023-02-08T10:08:13Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n代码中是怎么使用的呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422344818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422463188","html_url":"https://github.com/apache/brpc/issues/2114#issuecomment-1422463188","issue_url":"https://api.github.com/repos/apache/brpc/issues/2114","id":1422463188,"node_id":"IC_kwDOBhmkcs5UyRDU","user":{"login":"luffyhwl","id":5255709,"node_id":"MDQ6VXNlcjUyNTU3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5255709?v=4","gravatar_id":"","url":"https://api.github.com/users/luffyhwl","html_url":"https://github.com/luffyhwl","followers_url":"https://api.github.com/users/luffyhwl/followers","following_url":"https://api.github.com/users/luffyhwl/following{/other_user}","gists_url":"https://api.github.com/users/luffyhwl/gists{/gist_id}","starred_url":"https://api.github.com/users/luffyhwl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luffyhwl/subscriptions","organizations_url":"https://api.github.com/users/luffyhwl/orgs","repos_url":"https://api.github.com/users/luffyhwl/repos","events_url":"https://api.github.com/users/luffyhwl/events{/privacy}","received_events_url":"https://api.github.com/users/luffyhwl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-08T11:43:01Z","updated_at":"2023-02-08T11:43:01Z","author_association":"NONE","body":"> > \r\n> \r\n> 代码中是怎么使用的呢？\r\n\r\n最基本的使用方式，已更新到问题中。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422463188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422855822","html_url":"https://github.com/apache/brpc/pull/2115#issuecomment-1422855822","issue_url":"https://api.github.com/repos/apache/brpc/issues/2115","id":1422855822,"node_id":"IC_kwDOBhmkcs5Uzw6O","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-08T16:02:16Z","updated_at":"2023-02-08T16:02:16Z","author_association":"MEMBER","body":"预览可以看这里： https://github.com/apache/brpc/blob/7e8ca11ccfe7d10cbfc4088683f46c84d42530b8/community/release_cn.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1422855822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423552896","html_url":"https://github.com/apache/brpc/issues/2113#issuecomment-1423552896","issue_url":"https://api.github.com/repos/apache/brpc/issues/2113","id":1423552896,"node_id":"IC_kwDOBhmkcs5U2bGA","user":{"login":"xiaoyuxee","id":2851934,"node_id":"MDQ6VXNlcjI4NTE5MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/2851934?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyuxee","html_url":"https://github.com/xiaoyuxee","followers_url":"https://api.github.com/users/xiaoyuxee/followers","following_url":"https://api.github.com/users/xiaoyuxee/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyuxee/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyuxee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyuxee/subscriptions","organizations_url":"https://api.github.com/users/xiaoyuxee/orgs","repos_url":"https://api.github.com/users/xiaoyuxee/repos","events_url":"https://api.github.com/users/xiaoyuxee/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyuxee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T03:01:44Z","updated_at":"2023-02-09T03:01:44Z","author_association":"NONE","body":"@982945902 请问找到填充 matadata 的办法了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423552896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423556546","html_url":"https://github.com/apache/brpc/issues/2113#issuecomment-1423556546","issue_url":"https://api.github.com/repos/apache/brpc/issues/2113","id":1423556546,"node_id":"IC_kwDOBhmkcs5U2b_C","user":{"login":"982945902","id":49055103,"node_id":"MDQ6VXNlcjQ5MDU1MTAz","avatar_url":"https://avatars.githubusercontent.com/u/49055103?v=4","gravatar_id":"","url":"https://api.github.com/users/982945902","html_url":"https://github.com/982945902","followers_url":"https://api.github.com/users/982945902/followers","following_url":"https://api.github.com/users/982945902/following{/other_user}","gists_url":"https://api.github.com/users/982945902/gists{/gist_id}","starred_url":"https://api.github.com/users/982945902/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/982945902/subscriptions","organizations_url":"https://api.github.com/users/982945902/orgs","repos_url":"https://api.github.com/users/982945902/repos","events_url":"https://api.github.com/users/982945902/events{/privacy}","received_events_url":"https://api.github.com/users/982945902/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T03:04:52Z","updated_at":"2023-02-09T03:04:52Z","author_association":"CONTRIBUTOR","body":"> @982945902 请问找到填充 matadata 的办法了吗\r\n\r\nclient:\r\ncntl.http_request().SetHeader(\"test\",\"111\")\r\n\r\nserver:\r\nbrpc::Controller *cntl =\r\n            static_cast<brpc::Controller *>(controller);\r\nauto ptest = cntl->http_request().GetHeader(\"test\")","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423556546/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423574014","html_url":"https://github.com/apache/brpc/issues/2113#issuecomment-1423574014","issue_url":"https://api.github.com/repos/apache/brpc/issues/2113","id":1423574014,"node_id":"IC_kwDOBhmkcs5U2gP-","user":{"login":"xiaoyuxee","id":2851934,"node_id":"MDQ6VXNlcjI4NTE5MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/2851934?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyuxee","html_url":"https://github.com/xiaoyuxee","followers_url":"https://api.github.com/users/xiaoyuxee/followers","following_url":"https://api.github.com/users/xiaoyuxee/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyuxee/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyuxee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyuxee/subscriptions","organizations_url":"https://api.github.com/users/xiaoyuxee/orgs","repos_url":"https://api.github.com/users/xiaoyuxee/repos","events_url":"https://api.github.com/users/xiaoyuxee/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyuxee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T03:32:59Z","updated_at":"2023-02-09T03:43:13Z","author_association":"NONE","body":"> > @982945902 请问找到填充 matadata 的办法了吗\r\n> \r\n> client: cntl.http_request().SetHeader(\"test\",\"111\")\r\n> \r\n> server: brpc::Controller *cntl = static_cast<brpc::Controller *>(controller); auto ptest = cntl->http_request().GetHeader(\"test\")\r\n\r\nThx，我刚刚也这么测试work 了。因为 grpc 协议中 metadata 是解析于 http 中 header。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423574014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423645048","html_url":"https://github.com/apache/brpc/issues/2116#issuecomment-1423645048","issue_url":"https://api.github.com/repos/apache/brpc/issues/2116","id":1423645048,"node_id":"IC_kwDOBhmkcs5U2xl4","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T05:11:09Z","updated_at":"2023-02-09T05:11:09Z","author_association":"CONTRIBUTOR","body":"related: #2012 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423645048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423694243","html_url":"https://github.com/apache/brpc/issues/2114#issuecomment-1423694243","issue_url":"https://api.github.com/repos/apache/brpc/issues/2114","id":1423694243,"node_id":"IC_kwDOBhmkcs5U29mj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T06:16:16Z","updated_at":"2023-02-09T06:16:16Z","author_association":"CONTRIBUTOR","body":"用到ipv6或UDS功能了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423694243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423695883","html_url":"https://github.com/apache/brpc/pull/2115#issuecomment-1423695883","issue_url":"https://api.github.com/repos/apache/brpc/issues/2115","id":1423695883,"node_id":"IC_kwDOBhmkcs5U2-AL","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T06:18:49Z","updated_at":"2023-02-09T06:18:49Z","author_association":"CONTRIBUTOR","body":"LGTM\r\n英文版流程也要同步更新","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423695883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423696762","html_url":"https://github.com/apache/brpc/issues/2116#issuecomment-1423696762","issue_url":"https://api.github.com/repos/apache/brpc/issues/2116","id":1423696762,"node_id":"IC_kwDOBhmkcs5U2-N6","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T06:20:12Z","updated_at":"2023-02-09T06:20:12Z","author_association":"CONTRIBUTOR","body":"试试PR #2024","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423696762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423730175","html_url":"https://github.com/apache/brpc/issues/2114#issuecomment-1423730175","issue_url":"https://api.github.com/repos/apache/brpc/issues/2114","id":1423730175,"node_id":"IC_kwDOBhmkcs5U3GX_","user":{"login":"luffyhwl","id":5255709,"node_id":"MDQ6VXNlcjUyNTU3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5255709?v=4","gravatar_id":"","url":"https://api.github.com/users/luffyhwl","html_url":"https://github.com/luffyhwl","followers_url":"https://api.github.com/users/luffyhwl/followers","following_url":"https://api.github.com/users/luffyhwl/following{/other_user}","gists_url":"https://api.github.com/users/luffyhwl/gists{/gist_id}","starred_url":"https://api.github.com/users/luffyhwl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luffyhwl/subscriptions","organizations_url":"https://api.github.com/users/luffyhwl/orgs","repos_url":"https://api.github.com/users/luffyhwl/repos","events_url":"https://api.github.com/users/luffyhwl/events{/privacy}","received_events_url":"https://api.github.com/users/luffyhwl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T07:05:51Z","updated_at":"2023-02-09T07:05:51Z","author_association":"NONE","body":"> 用到ipv6或UDS功能了吗？\r\n\r\n用了ipv6","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423730175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423737815","html_url":"https://github.com/apache/brpc/issues/2114#issuecomment-1423737815","issue_url":"https://api.github.com/repos/apache/brpc/issues/2114","id":1423737815,"node_id":"IC_kwDOBhmkcs5U3IPX","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T07:12:38Z","updated_at":"2023-02-09T07:12:38Z","author_association":"CONTRIBUTOR","body":"感觉可能是内存问题，建议跑一下asan看一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423737815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423738968","html_url":"https://github.com/apache/brpc/issues/2114#issuecomment-1423738968","issue_url":"https://api.github.com/repos/apache/brpc/issues/2114","id":1423738968,"node_id":"IC_kwDOBhmkcs5U3IhY","user":{"login":"luffyhwl","id":5255709,"node_id":"MDQ6VXNlcjUyNTU3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/5255709?v=4","gravatar_id":"","url":"https://api.github.com/users/luffyhwl","html_url":"https://github.com/luffyhwl","followers_url":"https://api.github.com/users/luffyhwl/followers","following_url":"https://api.github.com/users/luffyhwl/following{/other_user}","gists_url":"https://api.github.com/users/luffyhwl/gists{/gist_id}","starred_url":"https://api.github.com/users/luffyhwl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luffyhwl/subscriptions","organizations_url":"https://api.github.com/users/luffyhwl/orgs","repos_url":"https://api.github.com/users/luffyhwl/repos","events_url":"https://api.github.com/users/luffyhwl/events{/privacy}","received_events_url":"https://api.github.com/users/luffyhwl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T07:14:05Z","updated_at":"2023-02-09T07:14:05Z","author_association":"NONE","body":"> 感觉可能是内存问题，建议跑一下asan看一下\r\n\r\n好的，感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423738968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423808440","html_url":"https://github.com/apache/brpc/pull/2112#issuecomment-1423808440","issue_url":"https://api.github.com/repos/apache/brpc/issues/2112","id":1423808440,"node_id":"IC_kwDOBhmkcs5U3Ze4","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T08:27:00Z","updated_at":"2023-02-09T08:27:00Z","author_association":"CONTRIBUTOR","body":"建议补充对应单测","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423808440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423815075","html_url":"https://github.com/apache/brpc/pull/2102#issuecomment-1423815075","issue_url":"https://api.github.com/repos/apache/brpc/issues/2102","id":1423815075,"node_id":"IC_kwDOBhmkcs5U3bGj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T08:33:01Z","updated_at":"2023-02-09T08:33:01Z","author_association":"CONTRIBUTOR","body":"UT编译失败了：\r\nbrpc_ssl_unittest.cpp:342:66: error: too few arguments to function call, expected 5, have 4\r\n                                         brpc::SSLOptions(), NULL);","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423815075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423871826","html_url":"https://github.com/apache/brpc/pull/2115#issuecomment-1423871826","issue_url":"https://api.github.com/repos/apache/brpc/issues/2115","id":1423871826,"node_id":"IC_kwDOBhmkcs5U3o9S","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T09:19:49Z","updated_at":"2023-02-09T09:19:49Z","author_association":"MEMBER","body":"> LGTM 英文版流程也要同步更新\r\n\r\nOK，中文没问题的话我再更新下英文的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1423871826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1424044469","html_url":"https://github.com/apache/brpc/issues/1323#issuecomment-1424044469","issue_url":"https://api.github.com/repos/apache/brpc/issues/1323","id":1424044469,"node_id":"IC_kwDOBhmkcs5U4TG1","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-09T11:33:54Z","updated_at":"2023-02-09T11:33:54Z","author_association":"NONE","body":"请问最终找到解决方案了么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1424044469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425063433","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425063433","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425063433,"node_id":"IC_kwDOBhmkcs5U8L4J","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T01:45:30Z","updated_at":"2023-02-10T01:45:30Z","author_association":"CONTRIBUTOR","body":"增加event_dispatcher_num试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425063433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425081796","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425081796","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425081796,"node_id":"IC_kwDOBhmkcs5U8QXE","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T02:13:06Z","updated_at":"2023-02-10T02:13:06Z","author_association":"NONE","body":"> 增加event_dispatcher_num试试\r\n\r\n多谢提醒，这个已经增加过了，也是没有用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425081796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425127668","html_url":"https://github.com/apache/brpc/issues/2081#issuecomment-1425127668","issue_url":"https://api.github.com/repos/apache/brpc/issues/2081","id":1425127668,"node_id":"IC_kwDOBhmkcs5U8bj0","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T03:33:29Z","updated_at":"2023-02-10T03:33:29Z","author_association":"NONE","body":"> 可能是业务代码把内存写坏了，这个问题好复现不，建议开ASAN复现下。\r\n\r\n定位了下， 是业务代码导致， 很容易复现，example中的echo server中throw 就可以复现。 但是这种定位core太不友好了 @wwbmmm 不知道是否可以改进下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425127668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425139020","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425139020","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425139020,"node_id":"IC_kwDOBhmkcs5U8eVM","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T03:56:23Z","updated_at":"2023-02-10T03:56:23Z","author_association":"MEMBER","body":"@zc08291161 最大吞吐的server数量和numa node数量一致么？ ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425139020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425263401","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425263401","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425263401,"node_id":"IC_kwDOBhmkcs5U88sp","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:41:37Z","updated_at":"2023-02-10T06:41:37Z","author_association":"CONTRIBUTOR","body":"可以看看IOBuf的append_user_data函数","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425263401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425265853","html_url":"https://github.com/apache/brpc/issues/2118#issuecomment-1425265853","issue_url":"https://api.github.com/repos/apache/brpc/issues/2118","id":1425265853,"node_id":"IC_kwDOBhmkcs5U89S9","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:45:36Z","updated_at":"2023-02-10T06:45:36Z","author_association":"CONTRIBUTOR","body":"现在用户态tcp的实现还没有合入到brpc。多进程理论上是可以支持，但是支持的方法会和网卡型号有关。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425265853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425266847","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425266847","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425266847,"node_id":"IC_kwDOBhmkcs5U89if","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:47:04Z","updated_at":"2023-02-10T06:47:04Z","author_association":"CONTRIBUTOR","body":"你使用的server本身带宽多少呢？2.5GB/s基本上接近25G带宽了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425266847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425267883","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425267883","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425267883,"node_id":"IC_kwDOBhmkcs5U89yr","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:48:25Z","updated_at":"2023-02-10T06:48:25Z","author_association":"NONE","body":"> 你使用的server本身带宽多少呢？2.5GB/s基本上接近25G带宽了。\r\n\r\n我是双25GE网卡bond4绑定，实测可以达到6GB/s","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425267883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425270138","html_url":"https://github.com/apache/brpc/issues/2117#issuecomment-1425270138","issue_url":"https://api.github.com/repos/apache/brpc/issues/2117","id":1425270138,"node_id":"IC_kwDOBhmkcs5U8-V6","user":{"login":"cooper-zhzhang","id":16239579,"node_id":"MDQ6VXNlcjE2MjM5NTc5","avatar_url":"https://avatars.githubusercontent.com/u/16239579?v=4","gravatar_id":"","url":"https://api.github.com/users/cooper-zhzhang","html_url":"https://github.com/cooper-zhzhang","followers_url":"https://api.github.com/users/cooper-zhzhang/followers","following_url":"https://api.github.com/users/cooper-zhzhang/following{/other_user}","gists_url":"https://api.github.com/users/cooper-zhzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/cooper-zhzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooper-zhzhang/subscriptions","organizations_url":"https://api.github.com/users/cooper-zhzhang/orgs","repos_url":"https://api.github.com/users/cooper-zhzhang/repos","events_url":"https://api.github.com/users/cooper-zhzhang/events{/privacy}","received_events_url":"https://api.github.com/users/cooper-zhzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:49:31Z","updated_at":"2023-02-10T06:49:31Z","author_association":"NONE","body":"从字面上看是远端处理不及时或者是远端缓存区较小。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425270138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425271699","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425271699","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425271699,"node_id":"IC_kwDOBhmkcs5U8-uT","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:50:12Z","updated_at":"2023-02-10T06:50:12Z","author_association":"CONTRIBUTOR","body":"2.5GB/s是单连接还是多连接？connection_type设置为pooled看看呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425271699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425271829","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425271829","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425271829,"node_id":"IC_kwDOBhmkcs5U8-wV","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:50:19Z","updated_at":"2023-02-10T06:50:19Z","author_association":"NONE","body":"> numa node\r\n\r\n没有太理解您的问题，我就是单台server，多个client进行压测，server只有一台，就这台server的最大入口带宽就是2.5GB/s","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425271829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425272923","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425272923","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425272923,"node_id":"IC_kwDOBhmkcs5U8_Bb","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:51:56Z","updated_at":"2023-02-10T06:51:56Z","author_association":"NONE","body":"> 2.5GB/s是单连接还是多连接？connection_type设置为pooled看看呢？\r\n是有多个client，所以总的链接个数肯定是多个，不过每个链接都是single类型的，这种和pooled应该是类似的吧。无论增加多少个client，最大带宽都不会上升了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425272923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425274298","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1425274298","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1425274298,"node_id":"IC_kwDOBhmkcs5U8_W6","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T06:54:01Z","updated_at":"2023-02-10T06:54:01Z","author_association":"NONE","body":"> 2.5GB/s是单连接还是多连接？connection_type设置为pooled看看呢？\r\n\r\n实测还发现一个现象，我们利用sofa-rpc进行测试，最大带宽可以打到5GB/s左右，我现在怀疑是brpc的dispatch调度机制的问题，就是总是把自己让出来去接收消息，再由空闲的worker去调度dispatch线程，而sofa则是始终有一个dispatch线程工作。会不会是brpc的dipatch线程工作不充分导致的。（增加dipstach线程个数也试过，也没用）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425274298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425407611","html_url":"https://github.com/apache/brpc/issues/2104#issuecomment-1425407611","issue_url":"https://api.github.com/repos/apache/brpc/issues/2104","id":1425407611,"node_id":"IC_kwDOBhmkcs5U9f57","user":{"login":"SongGuyang","id":26714159,"node_id":"MDQ6VXNlcjI2NzE0MTU5","avatar_url":"https://avatars.githubusercontent.com/u/26714159?v=4","gravatar_id":"","url":"https://api.github.com/users/SongGuyang","html_url":"https://github.com/SongGuyang","followers_url":"https://api.github.com/users/SongGuyang/followers","following_url":"https://api.github.com/users/SongGuyang/following{/other_user}","gists_url":"https://api.github.com/users/SongGuyang/gists{/gist_id}","starred_url":"https://api.github.com/users/SongGuyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SongGuyang/subscriptions","organizations_url":"https://api.github.com/users/SongGuyang/orgs","repos_url":"https://api.github.com/users/SongGuyang/repos","events_url":"https://api.github.com/users/SongGuyang/events{/privacy}","received_events_url":"https://api.github.com/users/SongGuyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T08:28:09Z","updated_at":"2023-02-10T08:28:09Z","author_association":"NONE","body":"Nice! Thanks.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425407611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425536427","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425536427","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425536427,"node_id":"IC_kwDOBhmkcs5U9_Wr","user":{"login":"WingsGo","id":22497357,"node_id":"MDQ6VXNlcjIyNDk3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/22497357?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsGo","html_url":"https://github.com/WingsGo","followers_url":"https://api.github.com/users/WingsGo/followers","following_url":"https://api.github.com/users/WingsGo/following{/other_user}","gists_url":"https://api.github.com/users/WingsGo/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsGo/subscriptions","organizations_url":"https://api.github.com/users/WingsGo/orgs","repos_url":"https://api.github.com/users/WingsGo/repos","events_url":"https://api.github.com/users/WingsGo/events{/privacy}","received_events_url":"https://api.github.com/users/WingsGo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T09:53:42Z","updated_at":"2023-02-10T09:53:42Z","author_association":"NONE","body":"> 可以看看IOBuf的append_user_data函数\r\n\r\n我在数据发送端通过append_user_data避免了发送端的数据拷贝，但是在接收端拿到的就是IOBuf，从网络拿到的数据放到IOBuf这一步已经是不连续的内存了，这里接收端能保证接收到连续的内存来避免拷贝吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425536427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425545991","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425545991","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425545991,"node_id":"IC_kwDOBhmkcs5U-BsH","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T10:01:00Z","updated_at":"2023-02-10T10:01:00Z","author_association":"CONTRIBUTOR","body":"IOBufAsZeroCopyOutputStream可以满足需求吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425545991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425655728","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425655728","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425655728,"node_id":"IC_kwDOBhmkcs5U-cew","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T11:18:16Z","updated_at":"2023-02-10T11:18:16Z","author_association":"CONTRIBUTOR","body":"> > 可以看看IOBuf的append_user_data函数\r\n> \r\n> 我在数据发送端通过append_user_data避免了发送端的数据拷贝，但是在接收端拿到的就是IOBuf，从网络拿到的数据放到IOBuf这一步已经是不连续的内存了，这里接收端能保证接收到连续的内存来避免拷贝吗\r\n\r\n如果要接收端能拿到连续的buf，意味着接收端在接收body之前，需要从协议头里获取body的长度，然后分配出相应长度的内存，再用这段内存来接收网络数据。这个逻辑应该是协议相关的，需要修改协议的实现，仅仅改IOBuf是不够的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425655728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425664477","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425664477","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425664477,"node_id":"IC_kwDOBhmkcs5U-end","user":{"login":"WingsGo","id":22497357,"node_id":"MDQ6VXNlcjIyNDk3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/22497357?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsGo","html_url":"https://github.com/WingsGo","followers_url":"https://api.github.com/users/WingsGo/followers","following_url":"https://api.github.com/users/WingsGo/following{/other_user}","gists_url":"https://api.github.com/users/WingsGo/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsGo/subscriptions","organizations_url":"https://api.github.com/users/WingsGo/orgs","repos_url":"https://api.github.com/users/WingsGo/repos","events_url":"https://api.github.com/users/WingsGo/events{/privacy}","received_events_url":"https://api.github.com/users/WingsGo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T11:27:08Z","updated_at":"2023-02-10T11:27:08Z","author_association":"NONE","body":"> > > 可以看看IOBuf的append_user_data函数\r\n> > \r\n> > \r\n> > 我在数据发送端通过append_user_data避免了发送端的数据拷贝，但是在接收端拿到的就是IOBuf，从网络拿到的数据放到IOBuf这一步已经是不连续的内存了，这里接收端能保证接收到连续的内存来避免拷贝吗\r\n> \r\n> 如果要接收端能拿到连续的buf，意味着接收端在接收body之前，需要从协议头里获取body的长度，然后分配出相应长度的内存，再用这段内存来接收网络数据。这个逻辑应该是协议相关的，需要修改协议的实现，仅仅改IOBuf是不够的\r\n\r\n请问一下这一块是需要在哪里进行修改呢，我理解这一层在自定义协议是没法完成的，因为自定义协议的接口都是基于IOBuf，理论上是否是需要修改OnNewMessages这个函数的实现，例如申请一块连续内存，然后通过append_user_data保证接收端接收到的内存是连续的?这个问题的背景是因为在高性能计算的场景下，向量化的计算需要保证内存是连续的，现在其实多了一层内存拷贝的开销，这在大数据量的场景下其实有比较大的性能损耗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425664477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425668163","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425668163","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425668163,"node_id":"IC_kwDOBhmkcs5U-fhD","user":{"login":"WingsGo","id":22497357,"node_id":"MDQ6VXNlcjIyNDk3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/22497357?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsGo","html_url":"https://github.com/WingsGo","followers_url":"https://api.github.com/users/WingsGo/followers","following_url":"https://api.github.com/users/WingsGo/following{/other_user}","gists_url":"https://api.github.com/users/WingsGo/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsGo/subscriptions","organizations_url":"https://api.github.com/users/WingsGo/orgs","repos_url":"https://api.github.com/users/WingsGo/repos","events_url":"https://api.github.com/users/WingsGo/events{/privacy}","received_events_url":"https://api.github.com/users/WingsGo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T11:29:31Z","updated_at":"2023-02-10T11:29:31Z","author_association":"NONE","body":"> IOBufAsZeroCopyOutputStream可以满足需求吗\r\n\r\n不太能满足，IOBufAsZeroCopyOutputStream只是在逻辑上wrap了一下，但是其实物理内存还是不连续的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425668163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425713937","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1425713937","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1425713937,"node_id":"IC_kwDOBhmkcs5U-qsR","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-10T12:00:40Z","updated_at":"2023-02-10T12:02:22Z","author_association":"CONTRIBUTOR","body":"> \r\n> 请问一下这一块是需要在哪里进行修改呢，我理解这一层在自定义协议是没法完成的，因为自定义协议的接口都是基于IOBuf，理论上是否是需要修改OnNewMessages这个函数的实现，例如申请一块连续内存，然后通过append_user_data保证接收端接收到的内存是连续的?这个问题的背景是因为在高性能计算的场景下，向量化的计算需要保证内存是连续的，现在其实多了一层内存拷贝的开销，这在大数据量的场景下其实有比较大的性能损耗\r\n\r\n可能需要大改，包括IOBuf、Socket、InputMessenger、协议\r\n这里还有个麻烦就是brpc支持多协议，所以一开始不知道要准备多大的buf，只能先随便读一段数据再尝试逐个协议解析，这时候可能已经读进来一部分body了，那么后续再读就不连续了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1425713937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1426613075","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1426613075","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1426613075,"node_id":"IC_kwDOBhmkcs5VCGNT","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-11T04:41:52Z","updated_at":"2023-02-11T04:41:52Z","author_association":"CONTRIBUTOR","body":"如果任何一个cpu都没有100%，那应该不是dispatch的问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1426613075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1426724675","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1426724675","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1426724675,"node_id":"IC_kwDOBhmkcs5VChdD","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-11T12:06:31Z","updated_at":"2023-02-11T12:06:31Z","author_association":"NONE","body":"@wwbmmm 我想尝试给brpc加上cluster支持, 您有哪些方面的指导, 建议 或注意的点么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1426724675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1426955912","html_url":"https://github.com/apache/brpc/pull/2112#issuecomment-1426955912","issue_url":"https://api.github.com/repos/apache/brpc/issues/2112","id":1426955912,"node_id":"IC_kwDOBhmkcs5VDZ6I","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-12T06:42:07Z","updated_at":"2023-02-12T06:42:07Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\ndone","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1426955912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427238335","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1427238335","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1427238335,"node_id":"IC_kwDOBhmkcs5VEe2_","user":{"login":"zc08291161","id":34310804,"node_id":"MDQ6VXNlcjM0MzEwODA0","avatar_url":"https://avatars.githubusercontent.com/u/34310804?v=4","gravatar_id":"","url":"https://api.github.com/users/zc08291161","html_url":"https://github.com/zc08291161","followers_url":"https://api.github.com/users/zc08291161/followers","following_url":"https://api.github.com/users/zc08291161/following{/other_user}","gists_url":"https://api.github.com/users/zc08291161/gists{/gist_id}","starred_url":"https://api.github.com/users/zc08291161/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zc08291161/subscriptions","organizations_url":"https://api.github.com/users/zc08291161/orgs","repos_url":"https://api.github.com/users/zc08291161/repos","events_url":"https://api.github.com/users/zc08291161/events{/privacy}","received_events_url":"https://api.github.com/users/zc08291161/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T02:28:29Z","updated_at":"2023-02-13T02:28:29Z","author_association":"NONE","body":"> 如果任何一个cpu都没有100%，那应该不是dispatch的问题。\r\n\r\n那请问还是否了解为何brpc单个server有带宽瓶颈么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427238335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427253760","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1427253760","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1427253760,"node_id":"IC_kwDOBhmkcs5VEioA","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T02:49:16Z","updated_at":"2023-02-13T02:50:47Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm 我想尝试给brpc加上cluster支持, 您有哪些方面的指导, 建议 或注意的点么\r\n\r\nredis cluster要求客户端处理MOVED和ASK指令，需要换ip port发送请求。可以考虑复用controller的重试流程，但不能占用原来的重试次数。\r\n客户端还需要缓存slot对应的ip、port，这块和LB有耦合，可能需要实现一个redis专属LB，通过Feedback接口反馈slot对应ip、port的信息\r\n建议可以先提交一个draft，交流下大致的实现思路，没问题再进行具体的编码","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427253760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427263222","html_url":"https://github.com/apache/brpc/issues/2118#issuecomment-1427263222","issue_url":"https://api.github.com/repos/apache/brpc/issues/2118","id":1427263222,"node_id":"IC_kwDOBhmkcs5VEk72","user":{"login":"jialei-jialei","id":13553842,"node_id":"MDQ6VXNlcjEzNTUzODQy","avatar_url":"https://avatars.githubusercontent.com/u/13553842?v=4","gravatar_id":"","url":"https://api.github.com/users/jialei-jialei","html_url":"https://github.com/jialei-jialei","followers_url":"https://api.github.com/users/jialei-jialei/followers","following_url":"https://api.github.com/users/jialei-jialei/following{/other_user}","gists_url":"https://api.github.com/users/jialei-jialei/gists{/gist_id}","starred_url":"https://api.github.com/users/jialei-jialei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jialei-jialei/subscriptions","organizations_url":"https://api.github.com/users/jialei-jialei/orgs","repos_url":"https://api.github.com/users/jialei-jialei/repos","events_url":"https://api.github.com/users/jialei-jialei/events{/privacy}","received_events_url":"https://api.github.com/users/jialei-jialei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T03:02:13Z","updated_at":"2023-02-13T03:02:13Z","author_association":"NONE","body":"> 现在用户态tcp的实现还没有合入到brpc。多进程理论上是可以支持，但是支持的方法会和网卡型号有关。\r\n\r\n多谢大佬解惑，还想再问一个问题，就是目前商用的用户态tcp用的是多进程还是单进程，比如阿里的盘古","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427263222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427508808","html_url":"https://github.com/apache/brpc/issues/2110#issuecomment-1427508808","issue_url":"https://api.github.com/repos/apache/brpc/issues/2110","id":1427508808,"node_id":"IC_kwDOBhmkcs5VFg5I","user":{"login":"liangjchen","id":93311032,"node_id":"U_kgDOBY_QOA","avatar_url":"https://avatars.githubusercontent.com/u/93311032?v=4","gravatar_id":"","url":"https://api.github.com/users/liangjchen","html_url":"https://github.com/liangjchen","followers_url":"https://api.github.com/users/liangjchen/followers","following_url":"https://api.github.com/users/liangjchen/following{/other_user}","gists_url":"https://api.github.com/users/liangjchen/gists{/gist_id}","starred_url":"https://api.github.com/users/liangjchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liangjchen/subscriptions","organizations_url":"https://api.github.com/users/liangjchen/orgs","repos_url":"https://api.github.com/users/liangjchen/repos","events_url":"https://api.github.com/users/liangjchen/events{/privacy}","received_events_url":"https://api.github.com/users/liangjchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T08:07:05Z","updated_at":"2023-02-13T08:07:05Z","author_association":"NONE","body":"thanks. This answers my question. ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427508808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427598640","html_url":"https://github.com/apache/brpc/pull/2112#issuecomment-1427598640","issue_url":"https://api.github.com/repos/apache/brpc/issues/2112","id":1427598640,"node_id":"IC_kwDOBhmkcs5VF20w","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T09:18:28Z","updated_at":"2023-02-13T09:18:28Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427598640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427877896","html_url":"https://github.com/apache/brpc/issues/2119#issuecomment-1427877896","issue_url":"https://api.github.com/repos/apache/brpc/issues/2119","id":1427877896,"node_id":"IC_kwDOBhmkcs5VG7AI","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T12:42:13Z","updated_at":"2023-02-13T12:42:13Z","author_association":"CONTRIBUTOR","body":"你说的这个带宽瓶颈我这里测试没有发现","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427877896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427878672","html_url":"https://github.com/apache/brpc/issues/2118#issuecomment-1427878672","issue_url":"https://api.github.com/repos/apache/brpc/issues/2118","id":1427878672,"node_id":"IC_kwDOBhmkcs5VG7MQ","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-13T12:42:56Z","updated_at":"2023-02-13T12:42:56Z","author_association":"CONTRIBUTOR","body":"什么叫『商用的用户态TCP』呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1427878672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1428982196","html_url":"https://github.com/apache/brpc/pull/2123#issuecomment-1428982196","issue_url":"https://api.github.com/repos/apache/brpc/issues/2123","id":1428982196,"node_id":"IC_kwDOBhmkcs5VLIm0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T01:44:19Z","updated_at":"2023-02-14T01:44:19Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1428982196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1429914105","html_url":"https://github.com/apache/brpc/issues/2081#issuecomment-1429914105","issue_url":"https://api.github.com/repos/apache/brpc/issues/2081","id":1429914105,"node_id":"IC_kwDOBhmkcs5VOsH5","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-14T15:17:31Z","updated_at":"2023-02-14T15:17:31Z","author_association":"MEMBER","body":"@jiangdongzi 自己给函数加noexcept声明即可，可以避免业务代码的异常抛到框架中。\r\n\r\n比如service接口的函数:\r\n```cpp\r\n    virtual void Echo(google::protobuf::RpcController* cntl_base,\r\n                      const EchoRequest* request,\r\n                      EchoResponse* response,\r\n                      google::protobuf::Closure* done) noexcept {\r\n   }\r\n```\r\n以及这个接口所调用的各种函数。你觉得可能抛异常的都加上。\r\nC++在异常抛出的链路上遇到首个noexcept声明的地方，就会立刻停止继续往上抛异常，保留此时的栈信息。所以noexcept离实际core的位置越近越准。这个bRPC使用者自己把握即可。兜底的方式是给service接口自行加上noexcept声明。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1429914105/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430645090","html_url":"https://github.com/apache/brpc/pull/2123#issuecomment-1430645090","issue_url":"https://api.github.com/repos/apache/brpc/issues/2123","id":1430645090,"node_id":"IC_kwDOBhmkcs5VReli","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-15T02:00:52Z","updated_at":"2023-02-15T02:00:52Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430645090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430856030","html_url":"https://github.com/apache/brpc/issues/2118#issuecomment-1430856030","issue_url":"https://api.github.com/repos/apache/brpc/issues/2118","id":1430856030,"node_id":"IC_kwDOBhmkcs5VSSFe","user":{"login":"jialei-jialei","id":13553842,"node_id":"MDQ6VXNlcjEzNTUzODQy","avatar_url":"https://avatars.githubusercontent.com/u/13553842?v=4","gravatar_id":"","url":"https://api.github.com/users/jialei-jialei","html_url":"https://github.com/jialei-jialei","followers_url":"https://api.github.com/users/jialei-jialei/followers","following_url":"https://api.github.com/users/jialei-jialei/following{/other_user}","gists_url":"https://api.github.com/users/jialei-jialei/gists{/gist_id}","starred_url":"https://api.github.com/users/jialei-jialei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jialei-jialei/subscriptions","organizations_url":"https://api.github.com/users/jialei-jialei/orgs","repos_url":"https://api.github.com/users/jialei-jialei/repos","events_url":"https://api.github.com/users/jialei-jialei/events{/privacy}","received_events_url":"https://api.github.com/users/jialei-jialei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-15T07:06:15Z","updated_at":"2023-02-15T07:06:15Z","author_association":"NONE","body":"就是已经用在生产系统中，已经产品化了的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430856030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430923990","html_url":"https://github.com/apache/brpc/issues/2125#issuecomment-1430923990","issue_url":"https://api.github.com/repos/apache/brpc/issues/2125","id":1430923990,"node_id":"IC_kwDOBhmkcs5VSirW","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-15T08:19:09Z","updated_at":"2023-02-15T08:19:09Z","author_association":"CONTRIBUTOR","body":"是的。\r\nhttps://github.com/apache/brpc/blob/3d4db04303736903f5345be2187a7842cf4a11f7/src/brpc/server.cpp#L146-L148\r\n\r\n这里会初始化为 cpu 个数 + 1。\r\nhttps://github.com/apache/brpc/blob/3d4db04303736903f5345be2187a7842cf4a11f7/src/brpc/server.cpp#L960-L968\r\n\r\n这里会增加 worker 数量。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430923990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430927749","html_url":"https://github.com/apache/brpc/issues/2125#issuecomment-1430927749","issue_url":"https://api.github.com/repos/apache/brpc/issues/2125","id":1430927749,"node_id":"IC_kwDOBhmkcs5VSjmF","user":{"login":"cmdmspaint","id":50624748,"node_id":"MDQ6VXNlcjUwNjI0NzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50624748?v=4","gravatar_id":"","url":"https://api.github.com/users/cmdmspaint","html_url":"https://github.com/cmdmspaint","followers_url":"https://api.github.com/users/cmdmspaint/followers","following_url":"https://api.github.com/users/cmdmspaint/following{/other_user}","gists_url":"https://api.github.com/users/cmdmspaint/gists{/gist_id}","starred_url":"https://api.github.com/users/cmdmspaint/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmdmspaint/subscriptions","organizations_url":"https://api.github.com/users/cmdmspaint/orgs","repos_url":"https://api.github.com/users/cmdmspaint/repos","events_url":"https://api.github.com/users/cmdmspaint/events{/privacy}","received_events_url":"https://api.github.com/users/cmdmspaint/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-15T08:22:48Z","updated_at":"2023-02-15T08:22:48Z","author_association":"NONE","body":"> 是的。\r\n> \r\n> https://github.com/apache/brpc/blob/3d4db04303736903f5345be2187a7842cf4a11f7/src/brpc/server.cpp#L146-L148\r\n> \r\n> 这里会初始化为 cpu 个数 + 1。\r\n> \r\n> https://github.com/apache/brpc/blob/3d4db04303736903f5345be2187a7842cf4a11f7/src/brpc/server.cpp#L960-L968\r\n> \r\n> 这里会增加 worker 数量。\r\n\r\n好的，多谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1430927749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1431313392","html_url":"https://github.com/apache/brpc/issues/2118#issuecomment-1431313392","issue_url":"https://api.github.com/repos/apache/brpc/issues/2118","id":1431313392,"node_id":"IC_kwDOBhmkcs5VUBvw","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-15T12:45:58Z","updated_at":"2023-02-15T12:45:58Z","author_association":"CONTRIBUTOR","body":"我们可以就具体的开源项目或针对bRPC用户态具体的需求、实现方式进行讨论。其他非开源或非开放的信息，我们这里不具备讨论基础。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1431313392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432360444","html_url":"https://github.com/apache/brpc/issues/880#issuecomment-1432360444","issue_url":"https://api.github.com/repos/apache/brpc/issues/880","id":1432360444,"node_id":"IC_kwDOBhmkcs5VYBX8","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-16T01:58:39Z","updated_at":"2023-02-16T01:58:39Z","author_association":"CONTRIBUTOR","body":"暂时没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432360444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432360679","html_url":"https://github.com/apache/brpc/issues/60#issuecomment-1432360679","issue_url":"https://api.github.com/repos/apache/brpc/issues/60","id":1432360679,"node_id":"IC_kwDOBhmkcs5VYBbn","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-16T01:58:58Z","updated_at":"2023-02-16T01:58:58Z","author_association":"CONTRIBUTOR","body":"暂时没有计划","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432360679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432669493","html_url":"https://github.com/apache/brpc/issues/300#issuecomment-1432669493","issue_url":"https://api.github.com/repos/apache/brpc/issues/300","id":1432669493,"node_id":"IC_kwDOBhmkcs5VZM01","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-16T07:59:38Z","updated_at":"2023-02-16T07:59:38Z","author_association":"MEMBER","body":"I think the issues still exist, though they are not fatal problems.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432669493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432884818","html_url":"https://github.com/apache/brpc/pull/2126#issuecomment-1432884818","issue_url":"https://api.github.com/repos/apache/brpc/issues/2126","id":1432884818,"node_id":"IC_kwDOBhmkcs5VaBZS","user":{"login":"renzhong","id":1164327,"node_id":"MDQ6VXNlcjExNjQzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1164327?v=4","gravatar_id":"","url":"https://api.github.com/users/renzhong","html_url":"https://github.com/renzhong","followers_url":"https://api.github.com/users/renzhong/followers","following_url":"https://api.github.com/users/renzhong/following{/other_user}","gists_url":"https://api.github.com/users/renzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/renzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renzhong/subscriptions","organizations_url":"https://api.github.com/users/renzhong/orgs","repos_url":"https://api.github.com/users/renzhong/repos","events_url":"https://api.github.com/users/renzhong/events{/privacy}","received_events_url":"https://api.github.com/users/renzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-16T10:45:15Z","updated_at":"2023-02-16T10:45:29Z","author_association":"CONTRIBUTOR","body":"整理了代码格式，chekc 有些没有过，看错误是网络原因，这个怎么 rerun 呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432884818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432988081","html_url":"https://github.com/apache/brpc/issues/2127#issuecomment-1432988081","issue_url":"https://api.github.com/repos/apache/brpc/issues/2127","id":1432988081,"node_id":"IC_kwDOBhmkcs5Vaamx","user":{"login":"zhouwei-zhcy","id":124946342,"node_id":"U_kgDOB3KHpg","avatar_url":"https://avatars.githubusercontent.com/u/124946342?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouwei-zhcy","html_url":"https://github.com/zhouwei-zhcy","followers_url":"https://api.github.com/users/zhouwei-zhcy/followers","following_url":"https://api.github.com/users/zhouwei-zhcy/following{/other_user}","gists_url":"https://api.github.com/users/zhouwei-zhcy/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouwei-zhcy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouwei-zhcy/subscriptions","organizations_url":"https://api.github.com/users/zhouwei-zhcy/orgs","repos_url":"https://api.github.com/users/zhouwei-zhcy/repos","events_url":"https://api.github.com/users/zhouwei-zhcy/events{/privacy}","received_events_url":"https://api.github.com/users/zhouwei-zhcy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-16T12:06:40Z","updated_at":"2023-02-16T12:06:40Z","author_association":"NONE","body":"小问题已解决-_-||","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1432988081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1433074418","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1433074418","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1433074418,"node_id":"IC_kwDOBhmkcs5Vavry","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-16T13:16:32Z","updated_at":"2023-02-16T13:16:32Z","author_association":"NONE","body":"> > @wwbmmm 我想尝试给brpc加上cluster支持, 您有哪些方面的指导, 建议 或注意的点么\r\n> \r\n> redis cluster要求客户端处理MOVED和ASK指令，需要换ip port发送请求。可以考虑复用controller的重试流程，但不能占用原来的重试次数。 客户端还需要缓存slot对应的ip、port，这块和LB有耦合，可能需要实现一个redis专属LB，通过Feedback接口反馈slot对应ip、port的信息 建议可以先提交一个draft，交流下大致的实现思路，没问题再进行具体的编码\r\n\r\n多谢, 好的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1433074418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1433980592","html_url":"https://github.com/apache/brpc/pull/2126#issuecomment-1433980592","issue_url":"https://api.github.com/repos/apache/brpc/issues/2126","id":1433980592,"node_id":"IC_kwDOBhmkcs5VeM6w","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T01:46:58Z","updated_at":"2023-02-17T01:46:58Z","author_association":"CONTRIBUTOR","body":"PR看起来没问题，但是不明白为什么原来要那么写","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1433980592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434018364","html_url":"https://github.com/apache/brpc/pull/2126#issuecomment-1434018364","issue_url":"https://api.github.com/repos/apache/brpc/issues/2126","id":1434018364,"node_id":"IC_kwDOBhmkcs5VeWI8","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T02:44:07Z","updated_at":"2023-02-17T02:44:07Z","author_association":"MEMBER","body":"看起来是之前c++03以及gcc3.4.5的一些兼容代码。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434018364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434019020","html_url":"https://github.com/apache/brpc/pull/2121#issuecomment-1434019020","issue_url":"https://api.github.com/repos/apache/brpc/issues/2121","id":1434019020,"node_id":"IC_kwDOBhmkcs5VeWTM","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T02:45:10Z","updated_at":"2023-02-17T02:45:10Z","author_association":"MEMBER","body":"@wwbmmm 你可以加一个文档大概说一下实现原理和使用方式么(和当前直接用bthread的区别和注意事项)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434019020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434026036","html_url":"https://github.com/apache/brpc/pull/2121#issuecomment-1434026036","issue_url":"https://api.github.com/repos/apache/brpc/issues/2121","id":1434026036,"node_id":"IC_kwDOBhmkcs5VeYA0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T02:56:51Z","updated_at":"2023-02-17T02:56:51Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm 你可以加一个文档大概说一下实现原理和使用方式么(和当前直接用bthread的区别和注意事项)\r\n\r\n好的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434026036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434034077","html_url":"https://github.com/apache/brpc/pull/2126#issuecomment-1434034077","issue_url":"https://api.github.com/repos/apache/brpc/issues/2126","id":1434034077,"node_id":"IC_kwDOBhmkcs5VeZ-d","user":{"login":"renzhong","id":1164327,"node_id":"MDQ6VXNlcjExNjQzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1164327?v=4","gravatar_id":"","url":"https://api.github.com/users/renzhong","html_url":"https://github.com/renzhong","followers_url":"https://api.github.com/users/renzhong/followers","following_url":"https://api.github.com/users/renzhong/following{/other_user}","gists_url":"https://api.github.com/users/renzhong/gists{/gist_id}","starred_url":"https://api.github.com/users/renzhong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renzhong/subscriptions","organizations_url":"https://api.github.com/users/renzhong/orgs","repos_url":"https://api.github.com/users/renzhong/repos","events_url":"https://api.github.com/users/renzhong/events{/privacy}","received_events_url":"https://api.github.com/users/renzhong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T03:07:40Z","updated_at":"2023-02-17T03:07:40Z","author_association":"CONTRIBUTOR","body":"> 看起来是之前c++03以及gcc3.4.5的一些兼容代码。\r\n有个宏控制，只有开了 C++11 才会执行这部分代码，和 gcc3.4.5 可能有关系。我主要还是想请教下疑问，感觉代码区别也不大，我是不是可以关闭这个 mr 了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434034077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434056903","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1434056903","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1434056903,"node_id":"IC_kwDOBhmkcs5VefjH","user":{"login":"WingsGo","id":22497357,"node_id":"MDQ6VXNlcjIyNDk3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/22497357?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsGo","html_url":"https://github.com/WingsGo","followers_url":"https://api.github.com/users/WingsGo/followers","following_url":"https://api.github.com/users/WingsGo/following{/other_user}","gists_url":"https://api.github.com/users/WingsGo/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsGo/subscriptions","organizations_url":"https://api.github.com/users/WingsGo/orgs","repos_url":"https://api.github.com/users/WingsGo/repos","events_url":"https://api.github.com/users/WingsGo/events{/privacy}","received_events_url":"https://api.github.com/users/WingsGo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T03:48:14Z","updated_at":"2023-02-17T03:48:14Z","author_association":"NONE","body":"> > 请问一下这一块是需要在哪里进行修改呢，我理解这一层在自定义协议是没法完成的，因为自定义协议的接口都是基于IOBuf，理论上是否是需要修改OnNewMessages这个函数的实现，例如申请一块连续内存，然后通过append_user_data保证接收端接收到的内存是连续的?这个问题的背景是因为在高性能计算的场景下，向量化的计算需要保证内存是连续的，现在其实多了一层内存拷贝的开销，这在大数据量的场景下其实有比较大的性能损耗\r\n> \r\n> 可能需要大改，包括IOBuf、Socket、InputMessenger、协议 这里还有个麻烦就是brpc支持多协议，所以一开始不知道要准备多大的buf，只能先随便读一段数据再尝试逐个协议解析，这时候可能已经读进来一部分body了，那么后续再读就不连续了\r\n\r\n协议解析的时候需要的应该只是一小部分body吧，例如brpc的协议其实只需要前12个字节就可以确认了，后续的内存可以先申请，然后把前12个字节的数据重新set一下就可以了吧，不知道这个理解是否正确?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434056903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434124115","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1434124115","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1434124115,"node_id":"IC_kwDOBhmkcs5Vev9T","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T05:31:01Z","updated_at":"2023-02-17T05:31:01Z","author_association":"CONTRIBUTOR","body":"> \r\n> 协议解析的时候需要的应该只是一小部分body吧，例如brpc的协议其实只需要前12个字节就可以确认了，后续的内存可以先申请，然后把前12个字节的数据重新set一下就可以了吧，不知道这个理解是否正确?\r\n\r\n不是把前12个字节的数据重新set一下，是要把提前读到的部分body先吐出来，然后写入一段连续的内存，再用这段连续内存进行后续的写入","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434124115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434305917","html_url":"https://github.com/apache/brpc/pull/2121#issuecomment-1434305917","issue_url":"https://api.github.com/repos/apache/brpc/issues/2121","id":1434305917,"node_id":"IC_kwDOBhmkcs5VfcV9","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-17T08:42:41Z","updated_at":"2023-02-17T08:42:41Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm 你可以加一个文档大概说一下实现原理和使用方式么(和当前直接用bthread的区别和注意事项)\r\n\r\n已补充文档","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1434305917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1435953217","html_url":"https://github.com/apache/brpc/issues/1271#issuecomment-1435953217","issue_url":"https://api.github.com/repos/apache/brpc/issues/1271","id":1435953217,"node_id":"IC_kwDOBhmkcs5VluhB","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T10:42:24Z","updated_at":"2023-02-19T10:42:24Z","author_association":"MEMBER","body":"这个问题的应该是使用bRPC自带的压测工具（rpc_replay、rpc_press)自身存在的bug导致，仅影响压测，线上正常服务应该不会出现问题。原因是压测工具随着时间推移，qps变得不均匀，导致瞬时qps远超过设定值。该问题在2022年已经被FIX。参考：\r\n#1763 \r\n#1910 \r\n如果有其他bRPC使用者在压测时也遇到类似问题，可以更新到最新版的rpc_replay和rpc_press。\r\n若遇到在正常线上服务时，出现同样qps一开始能正常服务，但经过一段时间后服务出现异常，可以再建新的issue讨论。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1435953217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1435953619","html_url":"https://github.com/apache/brpc/issues/210#issuecomment-1435953619","issue_url":"https://api.github.com/repos/apache/brpc/issues/210","id":1435953619,"node_id":"IC_kwDOBhmkcs5VlunT","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-19T10:44:15Z","updated_at":"2023-02-22T14:38:42Z","author_association":"CONTRIBUTOR","body":"> 不支持纯异步接口。每个地址都要占用一个bthread（的内存），而这些bthread大部分时候在sleep，应该用纯异步降低开销。\r\n\r\n@jamesge 纯异步接口是指不起bthread，直接在NamingServiceThread::Start里发起异步调用请求下游节点信息，然后在回调函数更新lb吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1435953619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436225270","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1436225270","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1436225270,"node_id":"IC_kwDOBhmkcs5Vmw72","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T02:40:12Z","updated_at":"2023-02-20T02:40:12Z","author_association":"MEMBER","body":"@WingsGo 请问下你这里大数据量指的是单个rpc payload很大还是qps很高.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436225270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436226954","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1436226954","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1436226954,"node_id":"IC_kwDOBhmkcs5VmxWK","user":{"login":"WingsGo","id":22497357,"node_id":"MDQ6VXNlcjIyNDk3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/22497357?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsGo","html_url":"https://github.com/WingsGo","followers_url":"https://api.github.com/users/WingsGo/followers","following_url":"https://api.github.com/users/WingsGo/following{/other_user}","gists_url":"https://api.github.com/users/WingsGo/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsGo/subscriptions","organizations_url":"https://api.github.com/users/WingsGo/orgs","repos_url":"https://api.github.com/users/WingsGo/repos","events_url":"https://api.github.com/users/WingsGo/events{/privacy}","received_events_url":"https://api.github.com/users/WingsGo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T02:42:06Z","updated_at":"2023-02-20T02:42:06Z","author_association":"NONE","body":"> @WingsGo 请问下你这里大数据量指的是单个rpc payload很大还是qps很高.\r\n单个RPC的payload比较大\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436226954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436228824","html_url":"https://github.com/apache/brpc/pull/2123#issuecomment-1436228824","issue_url":"https://api.github.com/repos/apache/brpc/issues/2123","id":1436228824,"node_id":"IC_kwDOBhmkcs5VmxzY","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T02:44:17Z","updated_at":"2023-02-20T02:44:17Z","author_association":"CONTRIBUTOR","body":"@wwbmmm @serverglen\r\n   之前理解错了，ConsulNamingService其实不是PeriodicNamingService，不是简单的轮询，而是[长轮询](https://brpc.incubator.apache.org/zh/docs/client/basics/#consulservice-name)，每次rpc成功后，立即发起下一次长轮询。只有失败了，才会sleep。\r\n   [Blocking Queries](https://developer.hashicorp.com/consul/api-docs/features/blocking)：\r\n   > Many endpoints in Consul support a feature known as \"blocking queries\". A blocking query is used to wait for a potential change using long polling.\r\n  \r\n   这个pr可能需要回退一下或者重新提一个pr将ConsulNamingService改回去。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436228824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436229573","html_url":"https://github.com/apache/brpc/pull/2123#issuecomment-1436229573","issue_url":"https://api.github.com/repos/apache/brpc/issues/2123","id":1436229573,"node_id":"IC_kwDOBhmkcs5Vmx_F","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T02:45:14Z","updated_at":"2023-02-20T02:45:14Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm @serverglen 之前理解错了，ConsulNamingService其实不是PeriodicNamingService，不是简单的轮询，而是[长轮询](https://brpc.incubator.apache.org/zh/docs/client/basics/#consulservice-name)，每次rpc成功后，立即发起下一次长轮询。只有失败了，才会sleep。 [Blocking Queries](https://developer.hashicorp.com/consul/api-docs/features/blocking)：\r\n> \r\n> > Many endpoints in Consul support a feature known as \"blocking queries\". A blocking query is used to wait for a potential change using long polling.\r\n> \r\n> 这个pr可能需要回退一下或者重新提一个pr将ConsulNamingService改回去。\r\n\r\n要不重新提一个pr把ConsulNamingService改回去？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436229573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436230963","html_url":"https://github.com/apache/brpc/pull/2123#issuecomment-1436230963","issue_url":"https://api.github.com/repos/apache/brpc/issues/2123","id":1436230963,"node_id":"IC_kwDOBhmkcs5VmyUz","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T02:47:07Z","updated_at":"2023-02-20T02:47:07Z","author_association":"CONTRIBUTOR","body":"> > @wwbmmm @serverglen 之前理解错了，ConsulNamingService其实不是PeriodicNamingService，不是简单的轮询，而是[长轮询](https://brpc.incubator.apache.org/zh/docs/client/basics/#consulservice-name)，每次rpc成功后，立即发起下一次长轮询。只有失败了，才会sleep。 [Blocking Queries](https://developer.hashicorp.com/consul/api-docs/features/blocking)：\r\n> > > Many endpoints in Consul support a feature known as \"blocking queries\". A blocking query is used to wait for a potential change using long polling.\r\n> > \r\n> > \r\n> > 这个pr可能需要回退一下或者重新提一个pr将ConsulNamingService改回去。\r\n> \r\n> 要不重新提一个pr把ConsulNamingService改回去？\r\n\r\n好的，我今天改一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436230963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436604646","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1436604646","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1436604646,"node_id":"IC_kwDOBhmkcs5VoNjm","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T09:17:54Z","updated_at":"2023-02-20T09:38:45Z","author_association":"CONTRIBUTOR","body":"> 子进程启动过程中，父子进程通过一个Unix Domain Socket，以同步的方式无损迁移旧进程的监听文件描述符listenfds和长连接文件描述符connfds；\r\n\r\n某些长连接文件描述符connfds应该不好迁移，例如开了ssl的连接，stream rpc连接、rtmp连接，这些连接好像不能只迁移一个fd吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436604646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436635072","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1436635072","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1436635072,"node_id":"IC_kwDOBhmkcs5VoU_A","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T09:39:43Z","updated_at":"2023-02-20T09:39:43Z","author_association":"CONTRIBUTOR","body":"> > \r\n> \r\n> 嗯嗯，类似nginx 的reload方式，还有Envoy的那种hot restart方式。\r\n\r\nnginx和envoy好像只迁移了linstfd而已吧，没有迁移connfds。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436635072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436692268","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1436692268","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1436692268,"node_id":"IC_kwDOBhmkcs5Voi8s","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-20T10:17:45Z","updated_at":"2023-02-20T10:17:45Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n嗯嗯，这两个不支持长连接，ssl的话还需要迁移tls context，长连接的迁移场景比较复杂","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1436692268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1437832648","html_url":"https://github.com/apache/brpc/pull/2129#issuecomment-1437832648","issue_url":"https://api.github.com/repos/apache/brpc/issues/2129","id":1437832648,"node_id":"IC_kwDOBhmkcs5Vs5XI","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T04:07:41Z","updated_at":"2023-02-21T04:07:41Z","author_association":"CONTRIBUTOR","body":"CI重试之后还是失败，看起来和代码改动无关","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1437832648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438072650","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1438072650","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1438072650,"node_id":"IC_kwDOBhmkcs5Vtz9K","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T08:48:43Z","updated_at":"2023-02-21T08:48:43Z","author_association":"MEMBER","body":"\r\n\r\n\r\n> > 协议解析的时候需要的应该只是一小部分body吧，例如brpc的协议其实只需要前12个字节就可以确认了，后续的内存可以先申请，然后把前12个字节的数据重新set一下就可以了吧，不知道这个理解是否正确?\r\n> \r\n> 不是把前12个字节的数据重新set一下，是要把提前读到的部分body先吐出来，然后写入一段连续的内存，再用这段连续内存进行后续的写入\r\n\r\n@wwbmmm 如果考虑做一些特殊处理的话，是可以放弃多协议的支持去实现这个模式的？ ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438072650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438081272","html_url":"https://github.com/apache/brpc/pull/2129#issuecomment-1438081272","issue_url":"https://api.github.com/repos/apache/brpc/issues/2129","id":1438081272,"node_id":"IC_kwDOBhmkcs5Vt2D4","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T08:52:33Z","updated_at":"2023-02-21T08:52:33Z","author_association":"CONTRIBUTOR","body":"master修复了CI失败，可以rebase一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438081272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438081737","html_url":"https://github.com/apache/brpc/pull/2130#issuecomment-1438081737","issue_url":"https://api.github.com/repos/apache/brpc/issues/2130","id":1438081737,"node_id":"IC_kwDOBhmkcs5Vt2LJ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T08:52:45Z","updated_at":"2023-02-21T08:52:45Z","author_association":"CONTRIBUTOR","body":"master修复了CI失败，可以rebase一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438081737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438085363","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1438085363","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1438085363,"node_id":"IC_kwDOBhmkcs5Vt3Dz","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T08:54:29Z","updated_at":"2023-02-21T08:54:29Z","author_association":"CONTRIBUTOR","body":"\r\n> @wwbmmm 如果考虑做一些特殊处理的话，是可以放弃多协议的支持去实现这个模式的？\r\n\r\n应该是可以的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438085363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438335751","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1438335751","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1438335751,"node_id":"IC_kwDOBhmkcs5Vu0MH","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T11:42:44Z","updated_at":"2023-02-21T11:42:44Z","author_association":"CONTRIBUTOR","body":"是不是可以先实现一版，只迁移listenfd？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438335751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438350373","html_url":"https://github.com/apache/brpc/pull/2129#issuecomment-1438350373","issue_url":"https://api.github.com/repos/apache/brpc/issues/2129","id":1438350373,"node_id":"IC_kwDOBhmkcs5Vu3wl","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T11:55:09Z","updated_at":"2023-02-21T11:55:24Z","author_association":"CONTRIBUTOR","body":"CI是不是还有问题？我本地跑是可以过的，但是CI跑了几次，都是core在这个地方。\r\n> [ RUN      ] NamingServiceTest.consul_with_backup_file\r\ntemp_file_e34bq7\r\nSegmentation fault (core dumped)\r\ncorefile=./core.brpc_naming_ser.12853 prog=brpc_naming_service_unittest\r\n./run_tests.sh: 42: gdb: not found","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438350373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438386480","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1438386480","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1438386480,"node_id":"IC_kwDOBhmkcs5VvAkw","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T12:19:28Z","updated_at":"2023-02-21T12:19:28Z","author_association":"CONTRIBUTOR","body":"厂内已经有了实现版本但是还没有经过业务验证，当前的热升级实现在常见的存在守护进程的业务场景下会产生冲突。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438386480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438391917","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1438391917","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1438391917,"node_id":"IC_kwDOBhmkcs5VvB5t","user":{"login":"WingsGo","id":22497357,"node_id":"MDQ6VXNlcjIyNDk3MzU3","avatar_url":"https://avatars.githubusercontent.com/u/22497357?v=4","gravatar_id":"","url":"https://api.github.com/users/WingsGo","html_url":"https://github.com/WingsGo","followers_url":"https://api.github.com/users/WingsGo/followers","following_url":"https://api.github.com/users/WingsGo/following{/other_user}","gists_url":"https://api.github.com/users/WingsGo/gists{/gist_id}","starred_url":"https://api.github.com/users/WingsGo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WingsGo/subscriptions","organizations_url":"https://api.github.com/users/WingsGo/orgs","repos_url":"https://api.github.com/users/WingsGo/repos","events_url":"https://api.github.com/users/WingsGo/events{/privacy}","received_events_url":"https://api.github.com/users/WingsGo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T12:23:36Z","updated_at":"2023-02-21T12:23:36Z","author_association":"NONE","body":"@chenzhangyi @wwbmmm  \r\n我理解对于baidu_rpc协议来说，meta和payload的length是在协议头就已经确定好了的，这样可以修改append_from_file_descriptor，在从socket的fd读取数据的时候，将allocate内存的方法提供给用户，然后通过append_user_data就可以在recever端减少这一次拷贝了吧？我可以提一个PR来实现一下，不知道这样的方案是否可行?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438391917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438549715","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1438549715","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1438549715,"node_id":"IC_kwDOBhmkcs5VvobT","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T14:03:43Z","updated_at":"2023-02-21T14:03:43Z","author_association":"CONTRIBUTOR","body":"> 厂内已经有了实现版本但是还没有经过业务验证，当前的热升级实现在常见的存在守护进程的业务场景下会产生冲突。\r\n\r\n目前是怎么实现ssl session迁移的呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438549715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438558461","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1438558461","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1438558461,"node_id":"IC_kwDOBhmkcs5Vvqj9","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-21T14:09:05Z","updated_at":"2023-02-21T14:09:05Z","author_association":"CONTRIBUTOR","body":"对于baidu这种多发多收的协议，应该需要将存量的回包也迁移到新进程，让新进程来发这些回包，避免新旧进程同时写同一个连接，导致串包的问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1438558461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439324347","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439324347","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439324347,"node_id":"IC_kwDOBhmkcs5Vyli7","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T01:50:39Z","updated_at":"2023-02-22T01:50:39Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n目前没有支持长连接迁移对ssl的支持，对于短链接迁移listenfd不需要关心这个","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439324347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439327813","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439327813","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439327813,"node_id":"IC_kwDOBhmkcs5VymZF","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T01:56:17Z","updated_at":"2023-02-22T01:56:17Z","author_association":"CONTRIBUTOR","body":"> 对于baidu这种多发多收的协议，应该需要将存量的回包也迁移到新进程，让新进程来发这些回包，避免新旧进程同时写同一个连接，导致串包的问题。\r\n\r\n对于短链接，迁移listenfd之后，存量回包会在旧进程处理，新进程只接收新的connection；长连接connfds会迁移，回包还会继续在相应的connfd回复吧，应该不存在新旧进程同时写一个connfd的问题，长连接迁移的场景比较复杂，目前只支持了简单场景。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439327813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439334606","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439334606","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439334606,"node_id":"IC_kwDOBhmkcs5VyoDO","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T02:05:34Z","updated_at":"2023-02-22T02:06:16Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n\r\n\r\n> > 对于baidu这种多发多收的协议，应该需要将存量的回包也迁移到新进程，让新进程来发这些回包，避免新旧进程同时写同一个连接，导致串包的问题。\r\n> \r\n> 对于短链接，迁移listenfd之后，存量回包会在旧进程处理，新进程只接收新的connection；长连接connfds会迁移，回包还会继续在相应的connfd回复吧，应该不存在新旧进程同时写一个connfd的问题，长连接迁移的场景比较复杂，目前只支持了简单场景。\r\n\r\n长连接场景下，在connfd迁移到了新进程时，旧进程还有存量请求处理，而同时新进程已经收到了请求并处理完了，此时新旧进程同时回包，就会有问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439334606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439346667","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439346667","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439346667,"node_id":"IC_kwDOBhmkcs5Vyq_r","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T02:24:06Z","updated_at":"2023-02-22T02:24:06Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n哦哦是这样，现在的实现逻辑是，先停止当前connfd接受新的请求，然后处理存量回包，再进行connfd的迁移","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439346667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439361639","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439361639","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439361639,"node_id":"IC_kwDOBhmkcs5Vyupn","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T02:45:58Z","updated_at":"2023-02-22T02:45:58Z","author_association":"CONTRIBUTOR","body":"> > \r\n> \r\n> 哦哦是这样，现在的实现逻辑是，先停止当前connfd接受新的请求，然后处理存量回包，再进行connfd的迁移\r\n\r\n这样，对于处理存量回包这个过程中，发过来的请求不友好吧。如果存量的请求处理时间比较长，没有接受的那些请求可能都超时了。\r\n\r\n将回包也迁移的方案可行吗？\r\n1. 旧进程先停止当前connfd接受新的请求，然后迁移connfd，而存量回包并行处理。\r\n2. 新进程收到connfd后，通知旧进程将回包迁移过来，同时新进程接收新的请求并处理，但是暂时不写回包。\r\n3. 旧进程收到通知后，置一个标志位flag（=true），表示connfd已经迁移。如果此时在写回包，看到了flag被置为true，则将当前队头的回包写完，后面的回包或者后续调Write的回包会被迁移到新进程写。\r\n4. 新进程收到迁移的第一个回包，则开始允许写回包，接收到的新请求的回包也可以开始写了。为了避免旧进程刚好没有回包或者队头只有一个回包，没有要迁移到新进程的回包，导致新进程迟迟不能写回包的问题，旧进程收到通知后，写一个空包，用于触发新进程写回包。\r\n这个方案会导致迁移过程中回包的顺序被打乱，对于有时序要求的业务，不适用。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439361639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439378211","html_url":"https://github.com/apache/brpc/pull/2129#issuecomment-1439378211","issue_url":"https://api.github.com/repos/apache/brpc/issues/2129","id":1439378211,"node_id":"IC_kwDOBhmkcs5Vyysj","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T03:13:01Z","updated_at":"2023-02-22T03:13:01Z","author_association":"CONTRIBUTOR","body":"> CI是不是还有问题？我本地跑是可以过的，但是CI跑了几次，都是core在这个地方。\r\n> \r\n> > [ RUN      ] NamingServiceTest.consul_with_backup_file\r\n> > temp_file_e34bq7\r\n> > Segmentation fault (core dumped)\r\n> > corefile=./core.brpc_naming_ser.12853 prog=brpc_naming_service_unittest\r\n> > ./run_tests.sh: 42: gdb: not found\r\n\r\n看上去似乎和改动有关","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439378211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439504825","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1439504825","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1439504825,"node_id":"IC_kwDOBhmkcs5VzRm5","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T06:30:32Z","updated_at":"2023-02-22T06:30:32Z","author_association":"CONTRIBUTOR","body":"> @chenzhangyi @wwbmmm 我理解对于baidu_rpc协议来说，meta和payload的length是在协议头就已经确定好了的，这样可以修改append_from_file_descriptor，在从socket的fd读取数据的时候，将allocate内存的方法提供给用户，然后通过append_user_data就可以在recever端减少这一次拷贝了吧？我可以提一个PR来实现一下，不知道这样的方案是否可行?\r\n\r\n可以考虑给iobuf加个reserve_continuous_buffer(int size)方法，然后由协议来控制预留buffer的大小","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439504825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439526782","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439526782","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439526782,"node_id":"IC_kwDOBhmkcs5VzW9-","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T07:00:46Z","updated_at":"2023-02-22T07:00:46Z","author_association":"CONTRIBUTOR","body":"> > > \r\n> > \r\n> > \r\n> > 哦哦是这样，现在的实现逻辑是，先停止当前connfd接受新的请求，然后处理存量回包，再进行connfd的迁移\r\n> \r\n> 这样，对于处理存量回包这个过程中，发过来的请求不友好吧。如果存量的请求处理时间比较长，没有接受的那些请求可能都超时了。\r\n> \r\n> 将回包也迁移的方案可行吗？\r\n> \r\n> 1. 旧进程先停止当前connfd接受新的请求，然后迁移connfd，而存量回包并行处理。\r\n> 2. 新进程收到connfd后，通知旧进程将回包迁移过来，同时新进程接收新的请求并处理，但是暂时不写回包。\r\n> 3. 旧进程收到通知后，置一个标志位flag（=true），表示connfd已经迁移。如果此时在写回包，看到了flag被置为true，则将当前队头的回包写完，后面的回包或者后续调Write的回包会被迁移到新进程写。\r\n> 4. 新进程收到迁移的第一个回包，则开始允许写回包，接收到的新请求的回包也可以开始写了。为了避免旧进程刚好没有回包或者队头只有一个回包，没有要迁移到新进程的回包，导致新进程迟迟不能写回包的问题，旧进程收到通知后，写一个空包，用于触发新进程写回包。\r\n>    这个方案会导致迁移过程中回包的顺序被打乱，对于有时序要求的业务，不适用。\r\n\r\n超时的情况可能存在，可以依赖上层业务重试策略缓解？回包迁移的方案可以在真正设计的时候在详细设计一下，但是实现起来可能会很复杂。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439526782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439534191","html_url":"https://github.com/apache/brpc/issues/1662#issuecomment-1439534191","issue_url":"https://api.github.com/repos/apache/brpc/issues/1662","id":1439534191,"node_id":"IC_kwDOBhmkcs5VzYxv","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-22T07:10:57Z","updated_at":"2023-02-22T07:10:57Z","author_association":"CONTRIBUTOR","body":"> > > > \r\n> > > \r\n> > > \r\n> > > 哦哦是这样，现在的实现逻辑是，先停止当前connfd接受新的请求，然后处理存量回包，再进行connfd的迁移\r\n> > \r\n> > \r\n> > 这样，对于处理存量回包这个过程中，发过来的请求不友好吧。如果存量的请求处理时间比较长，没有接受的那些请求可能都超时了。\r\n> > 将回包也迁移的方案可行吗？\r\n> > \r\n> > 1. 旧进程先停止当前connfd接受新的请求，然后迁移connfd，而存量回包并行处理。\r\n> > 2. 新进程收到connfd后，通知旧进程将回包迁移过来，同时新进程接收新的请求并处理，但是暂时不写回包。\r\n> > 3. 旧进程收到通知后，置一个标志位flag（=true），表示connfd已经迁移。如果此时在写回包，看到了flag被置为true，则将当前队头的回包写完，后面的回包或者后续调Write的回包会被迁移到新进程写。\r\n> > 4. 新进程收到迁移的第一个回包，则开始允许写回包，接收到的新请求的回包也可以开始写了。为了避免旧进程刚好没有回包或者队头只有一个回包，没有要迁移到新进程的回包，导致新进程迟迟不能写回包的问题，旧进程收到通知后，写一个空包，用于触发新进程写回包。\r\n> >    这个方案会导致迁移过程中回包的顺序被打乱，对于有时序要求的业务，不适用。\r\n> \r\n> 超时的情况可能存在，可以依赖上层业务重试策略缓解？回包迁移的方案可以在真正设计的时候在详细设计一下，但是实现起来可能会很复杂。。\r\n\r\n嗯嗯，实现比较复杂。\r\n上层业务不一定可以rpc超时重试。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1439534191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]