[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681274343","html_url":"https://github.com/apache/accumulo/pull/3702#issuecomment-1681274343","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3702","id":1681274343,"node_id":"IC_kwDOACaFSM5kNjXn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T21:09:00Z","updated_at":"2023-08-16T21:09:00Z","author_association":"MEMBER","body":"I'll also update the website because the location/name of the script changed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681274343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681295842","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1681295842","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1681295842,"node_id":"IC_kwDOACaFSM5kNoni","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T21:29:57Z","updated_at":"2023-08-16T21:29:57Z","author_association":"CONTRIBUTOR","body":"So, I abandoned the notion of a cross-language solution. I also did **not** go down the route of an SPI. What I have at [1] is a replacement for the existing CompactionCoordinator <-> Compactor Thrift APIs. The replacement is a generic TaskManager <-> TaskWorker APi (see tasks.thrift at [1]). If a complex type needs to be passed across the API, then it is of the Thrift type `Task` which contains a `messageType` and a `message`.  The `messageType` is one of the values from the enum `TaskMessageType` and the `message` is a serialized JSON object (see `TaskMessage.toThriftTask` and `TaskMessage.fromThriftTask`). The serialized JSON objects are subclasses of `TaskMessage` and they can contain Thrift objects that are currently used by the code (see CompactionTask). These Thrift objects are serialized using the TBinaryProtocol (see ThriftSerializers) and then Base64 encoded when the java object is serialized to JSON.\r\n\r\nI have created duplicate methods in Compactor and CompactionCoordinator for the generic API and I think my next step will be to remove the compaction specific methods. I should be able to prove pretty quickly that this can work using the existing ITs. I think the overall design here would be:\r\n\r\n1. A `TaskWorker` (aka Compactor) would call `getTask` on the `TaskManager` (aka CompactionCoordinator)\r\n2. The `TaskManager` retrieves the highest priority task from its Top-N PriorityQueue of work\r\n3. The `TaskWorker` executes that task (just like compactions are executed today)\r\n\r\nThis would allow any `TaskWorker` to get any Task, but I think we want to shape that a little with the resource groups. I need to think about that further.\r\n\r\n[1] https://github.com/apache/accumulo/compare/elasticity...dlmarion:accumulo:generic-task-api?expand=1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681295842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681551271","html_url":"https://github.com/apache/accumulo/pull/3673#issuecomment-1681551271","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3673","id":1681551271,"node_id":"IC_kwDOACaFSM5kOm-n","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T03:21:35Z","updated_at":"2023-08-17T03:21:35Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #3705 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681551271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681559358","html_url":"https://github.com/apache/accumulo/pull/3705#issuecomment-1681559358","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3705","id":1681559358,"node_id":"IC_kwDOACaFSM5kOo8-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T03:33:38Z","updated_at":"2023-08-17T03:33:38Z","author_association":"CONTRIBUTOR","body":"Below are manager logs from running the new IT that adds 1 million tablets and then reads and writes around 100 of them. These are selected log events from when the test was scanning random tablets.  Can see the following in these logs.\r\n\r\n * The periodic full scan of all metadata happens and takes 7.39 seconds because there are 1 million tablets.  This scan happens every 5 seconds in the ITs.\r\n * See multiple tablet hosting request that trigger a partial scan of metadata that usually takes almost zero seconds.  This shows that an entire scan of the metadata table is avoided to host a single ondemand tablet.\r\n\r\n```\r\n2023-08-16T18:35:35,516 [manager.EventCoordinator] DEBUG: Tablet hosting requested for 1 tablets in 1\r\n2023-08-16T18:35:35,545 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.12 seconds for 1 ranges\r\n2023-08-16T18:35:35,551 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:35,565 [manager.EventCoordinator] DEBUG: tablet 1;0000000100< was loaded on host1:34225\r\n2023-08-16T18:35:35,571 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:39,073 [manager.Manager] DEBUG: [Normal Tablets]: full scan time 7.39 seconds\r\n2023-08-16T18:35:39,567 [manager.EventCoordinator] DEBUG: Tablet hosting requested for 1 tablets in 1\r\n2023-08-16T18:35:39,574 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.01 seconds for 1 ranges\r\n2023-08-16T18:35:39,589 [manager.EventCoordinator] DEBUG: tablet 1;0010101100;0010101000 was loaded on host1:34841\r\n2023-08-16T18:35:39,593 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:39,729 [manager.EventCoordinator] DEBUG: Tablet hosting requested for 1 tablets in 1\r\n2023-08-16T18:35:39,734 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:39,740 [manager.EventCoordinator] DEBUG: tablet 1;0027272800;0027272700 was loaded on host1:34225\r\n2023-08-16T18:35:39,743 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:39,871 [manager.EventCoordinator] DEBUG: Tablet hosting requested for 1 tablets in 1\r\n2023-08-16T18:35:39,877 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:40,008 [manager.EventCoordinator] DEBUG: Tablet hosting requested for 1 tablets in 1\r\n2023-08-16T18:35:40,015 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.01 seconds for 1 ranges\r\n2023-08-16T18:35:40,136 [manager.EventCoordinator] DEBUG: Tablet hosting requested for 1 tablets in 1\r\n2023-08-16T18:35:40,142 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:40,590 [manager.EventCoordinator] DEBUG: tablet 1;0051234800;0051234700 was loaded on host1:34841\r\n2023-08-16T18:35:40,591 [manager.EventCoordinator] DEBUG: tablet 1<;0099999900 was loaded on host1:34841\r\n2023-08-16T18:35:40,597 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.01 seconds for 1 ranges\r\n2023-08-16T18:35:40,600 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n2023-08-16T18:35:40,741 [manager.EventCoordinator] DEBUG: tablet 1;0089777800;0089777700 was loaded on host1:34225\r\n2023-08-16T18:35:40,747 [manager.Manager] DEBUG: [Normal Tablets]: partial scan time 0.00 seconds for 1 ranges\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1681559358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682830183","html_url":"https://github.com/apache/accumulo/pull/3702#issuecomment-1682830183","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3702","id":1682830183,"node_id":"IC_kwDOACaFSM5kTfNn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T19:18:06Z","updated_at":"2023-08-17T19:18:06Z","author_association":"MEMBER","body":"The ITs didn't have any trouble building without that missing minicluster.properties file, so it definitely was vestigial. Looking in the history, it looks like it was added as an example, but never actually used anywhere.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682830183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682910378","html_url":"https://github.com/apache/accumulo/pull/3640#issuecomment-1682910378","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3640","id":1682910378,"node_id":"IC_kwDOACaFSM5kTyyq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T20:11:13Z","updated_at":"2023-08-17T20:13:08Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I had 2 questions about this that I figured you might be able to help answer when reviewing since the TabletGroupWatcher class and Manager code in general is pretty new to me still.\r\n\r\n1. My current PR currently detects the previous tablet while processing files to figure out row boundaries for fencing by just tracking the KeyExtents that have been since as we iterate. I was thinking it could be better to use the prev row column for each tablet instead since we track the previous row there already but since that column sorts last I didn't use it as I don't think we could read or see it before seeing the file metadata columns that would need to know the information but wanted to get your thoughts on that.\r\n2. I'm still a bit new to the Manager and how the TabletGroupWatcher is processing changes so I'm not 100% sure yet on the consistency guarantees with the system.  The manager is doing the metadata updates for the merge inside of TabletGroupWatcher and I am wondering is it possible for the table or tablets being modified to be split concurrently during the merge or compactions to happen? I am just curious if anything else would interfere and cause a race condition that would invalidate while iterating and merging the metadata. Or do the metadata changes from other events (like splits) get processed in order since the TabletGroupWatcher has a thread that processes events off a queue?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682910378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682911604","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1682911604","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1682911604,"node_id":"IC_kwDOACaFSM5kTzF0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T20:12:13Z","updated_at":"2023-08-17T20:12:13Z","author_association":"CONTRIBUTOR","body":"@cshannon  re caching. If this code is called really frequently then a cache that only keeps the configuration objects for a short period of time (like a 10 second expiration time for the cache) could possibly improve performance w/o impacting correctness.  Not sure how frequently this code is hit.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682911604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682928335","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1682928335","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1682928335,"node_id":"IC_kwDOACaFSM5kT3LP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T20:27:08Z","updated_at":"2023-08-17T20:28:48Z","author_association":"CONTRIBUTOR","body":"I think adding a cache in a follow-on PR would be a good thing for users who end up using the volume override properties. Those users will still end up hitting the synchronization issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682928335/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682982101","html_url":"https://github.com/apache/accumulo/pull/3704#issuecomment-1682982101","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3704","id":1682982101,"node_id":"IC_kwDOACaFSM5kUETV","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T21:06:09Z","updated_at":"2023-08-17T21:06:09Z","author_association":"CONTRIBUTOR","body":"> I added my code review suggestions as a commit to this PR. I think it's good to go.\r\n\r\nI like the cleaner logic changes and general cleanup of the Test class.\r\nI'll go ahead and merge this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682982101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682998430","html_url":"https://github.com/apache/accumulo/issues/3694#issuecomment-1682998430","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3694","id":1682998430,"node_id":"IC_kwDOACaFSM5kUISe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T21:22:16Z","updated_at":"2023-08-17T21:25:17Z","author_association":"CONTRIBUTOR","body":"I was reviewing some of the 2.1 Rfile code today and I realized this issue happened in 1.10.  That made me diff the 1.10 and 2.1 code and I found that the fixes (#3622 and #3623) for #3617 are not in 1.10.  Not sure if that matters, but just recording the finding.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1682998430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683078348","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1683078348","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1683078348,"node_id":"IC_kwDOACaFSM5kUbzM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T22:51:25Z","updated_at":"2023-08-17T22:51:25Z","author_association":"CONTRIBUTOR","body":"> I think we could probably cache the result after constructing the new configuration object, and keep using it unless the overrides change. Alternatively, just cache it for a fixed period of time\r\n\r\nI think the latter might be the better option. It will make the code much cleaner than trying to compare the properties in the cached configuration to properties in the current configuration.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683078348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683156059","html_url":"https://github.com/apache/accumulo/pull/3640#issuecomment-1683156059","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3640","id":1683156059,"node_id":"IC_kwDOACaFSM5kUuxb","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T00:33:25Z","updated_at":"2023-08-18T00:33:58Z","author_association":"CONTRIBUTOR","body":"> I was thinking it could be better to use the prev row column for each tablet instead since we track the previous row\r\n\r\nThat probably would be cleaner.  That is what happens when using Ample it buffers the entire row and uses that column to constuct the extent for the tablet.   Ample can also optionally check the linking of tablets when reading them.\r\n\r\n>  The manager is doing the metadata updates for the merge inside of TabletGroupWatcher and I am wondering is it possible for the table or tablets being modified to be split concurrently during the merge or compactions to happen? \r\n\r\nThere should not be anything else writing to the tablets metadata because of the following combination of factors.\r\n\r\n 1. When a tablet is hosted, only the tablet server its assigned to will update its metadata\r\n 2. When a tablet is not hosted or assigned, only the manager will update its metadata\r\n 3. The merge operation unassigns the tablets before updating them, so tablet servers should not longer be doing any updates\r\n 4. The merge operation gets a write lock on the table that prevent any other operations from running in the manager that would update the tablets.\r\n\r\nThese are some basics of Accumulo's current concurrency model.  Its very different in the elasticity branch.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683156059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683224555","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1683224555","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1683224555,"node_id":"IC_kwDOACaFSM5kU_fr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T02:01:53Z","updated_at":"2023-08-18T02:01:53Z","author_association":"CONTRIBUTOR","body":"I looked at the linked changes and the following are some things I was thinking about while looking.\r\n\r\nNot every Task will have a corresponding fate op.  Noticed TaskMessage had a fate tx id.\r\n\r\nMay not want to assume a TaskRunner will only run one task at a time.  For example a single TaskRunner process to works on finding split points could work on finding many split points concurrently.  A task runner could request multiple task at a time and report on multiple task.  Compactors would probably just run one task at a time still, but maybe not other task runners.\r\n\r\nWhat is the field Task.taskManager expected to contain?\r\n\r\nWondering what the advantages and disadvantages of using the thrift enum type for the Task.messageType field.\r\n\r\nWondering if the Task thrift struct should have a string taskId field.  Assuming this would be a uuid if following the compactor model where every task has a uuid.\r\n\r\nWondering if a class like CompactionTask could have a CompactionTask(Task task) constructor that knows how to deser that Task.  When a compactor request a task, it knows what type it request and could directly call that constructor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683224555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683271548","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1683271548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1683271548,"node_id":"IC_kwDOACaFSM5kVK98","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T03:07:25Z","updated_at":"2023-08-18T03:07:25Z","author_association":"MEMBER","body":"I've been thinking about this issue, and wondering about its scope. As written, this issue describes a \"generic distributed job execution service\". I would caution against being so generic that this capability subsumes Accumulo's purpose as a scalable database, or reinvents the wheel. We don't want Accumulo to sit alongside other distributed job frameworks, as though it were one of them. This server type should focus on performing Accumulo maintenance tasks, specifically, rather than generic jobs from anywhere (like fate is currently narrowly scoped to maintenance tasks, or how iterators are not general purpose execution services, but specifically process data in Accumulo). I'm sure the implementation is headed in the direction of serving Accumulo specifically, but I wanted to raise the point, just to check the scope of this. I think it's worth some caution and occasionally pressing the brakes on this, to keep the scope from being too broad.\r\n\r\nI still think maybe it's worth writing a simple SPI for executing Accumulo maintenance tasks. Users could configure them to be run in a different service, but by default would use our own executor service implementation. I think that's how external compactions should have been written earlier, as well. I think generalizing that service allows us to revisit that idea of having this be pluggable, before it's finalized in another major release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683271548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683792861","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1683792861","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1683792861,"node_id":"IC_kwDOACaFSM5kXKPd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T11:39:58Z","updated_at":"2023-08-18T11:39:58Z","author_association":"CONTRIBUTOR","body":"@ctubbsii said:\r\n\r\n> I've been thinking about this issue, and wondering about its scope. As written, this issue describes a \"generic distributed job execution service\". I would caution against being so generic that this capability subsumes Accumulo's purpose as a scalable database, or reinvents the wheel. We don't want Accumulo to sit alongside other distributed job frameworks, as though it were one of them. This server type should focus on performing Accumulo maintenance tasks, specifically, rather than generic jobs from anywhere (like fate is currently narrowly scoped to maintenance tasks, or how iterators are not general purpose execution services, but specifically process data in Accumulo). I'm sure the implementation is headed in the direction of serving Accumulo specifically, but I wanted to raise the point, just to check the scope of this. I think it's worth some caution and occasionally pressing the brakes on this, to keep the scope from being too broad.\r\n\r\nAgreed, the intention here is to create a more generic API for running Accumulo maintenance tasks.\r\n\r\n> I still think maybe it's worth writing a simple SPI for executing Accumulo maintenance tasks. Users could configure them to be run in a different service, but by default would use our own executor service implementation. I think that's how external compactions should have been written earlier, as well. I think generalizing that service allows us to revisit that idea of having this be pluggable, before it's finalized in another major release.\r\n\r\nI tried to wrap my head around how to do this / where to even start and couldn't come up with anything. It's possible that it's too early in the development stage to do this as the api is not stable. I'm punting on this for now. If someone else wants to take a crack at it, go for it.\r\n\r\n@keith-turner said:\r\n\r\n> May not want to assume a TaskRunner will only run one task at a time. For example a single TaskRunner process to works on finding split points could work on finding many split points concurrently. A task runner could request multiple task at a time and report on multiple task. Compactors would probably just run one task at a time still, but maybe not other task runners.\r\n\r\nI don't think this design precludes that, but I'm wondering how that works in a partial failure scenario. I think for now it might make sense to punt on this and continue down the current path and see where that leads us. For the partial failure scenario, we might want to think about the task containing multiple instructions and they either all succeed or all fail as a unit of work.\r\n\r\n> What is the field Task.taskManager expected to contain?\r\n\r\nThe address of the TaskManager (CompactionCoordinator)\r\n\r\n> Wondering what the advantages and disadvantages of using the thrift enum type for the Task.messageType field.\r\n\r\nSo, I looked at this. We can create an enum for the message type, but then we can't build logic into the enum like I have done for TaskMessageType. What I have now is a generic api for passing units of work, but a tight coupling on the message type and message body. When a `Task` thrift object is received, then `TaskMessage.fromThiftTask` is called to deserialize the message. The message class is derived from the message type, there is a tight coupling there for type enforcement.\r\n\r\n> Wondering if the Task thrift struct should have a string taskId field. Assuming this would be a uuid if following the compactor model where every task has a uuid.\r\n\r\nEasy change to make.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683792861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683809578","html_url":"https://github.com/apache/accumulo/issues/3483#issuecomment-1683809578","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3483","id":1683809578,"node_id":"IC_kwDOACaFSM5kXOUq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T11:54:53Z","updated_at":"2023-08-18T11:54:53Z","author_association":"CONTRIBUTOR","body":"Closed by #3629 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683809578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683838224","html_url":"https://github.com/apache/accumulo/pull/3640#issuecomment-1683838224","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3640","id":1683838224,"node_id":"IC_kwDOACaFSM5kXVUQ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T12:20:35Z","updated_at":"2023-08-18T13:02:09Z","author_association":"CONTRIBUTOR","body":"> > The manager is doing the metadata updates for the merge inside of TabletGroupWatcher and I am wondering is it possible for the table or tablets being modified to be split concurrently during the merge or compactions to happen?\r\n> \r\n> There should not be anything else writing to the tablets metadata because of the following combination of factors.\r\n> \r\n> 1. When a tablet is hosted, only the tablet server its assigned to will update its metadata\r\n> 2. When a tablet is not hosted or assigned, only the manager will update its metadata\r\n> 3. The merge operation unassigns the tablets before updating them, so tablet servers should not longer be doing any updates\r\n> 4. The merge operation gets a write lock on the table that prevent any other operations from running in the manager that would update the tablets.\r\n> \r\n> These are some basics of Accumulo's current concurrency model. Its very different in the elasticity branch.\r\n\r\nThanks for explaining that concurrent model better, I assumed it was safe (otherwise merge wouldn't work at all) but was trying to figure out why because I kept thinking \"what happens if a Tablet server mutates the metadata for this tablet while the Manager is running merge\" and obviously the fact that the tablets are unassigned is the key part. I knew they were unassigned (I see it happening in the code and saw it when testing) but for some reason my brain wasn't connecting that part when thinking about race conditions and concurrency issues. Obviously if the tablet is not hosted and if only the Manager is doing things it is safe since there's a write lock and it's the only process doing things.\r\n\r\nFor elasticity that will be interesting since we should be able to merge offline tablets that are on demand (currently you can't merge offline tables). And there will be multiple managers, etc so we will have to see how it works out I guess.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683838224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683894315","html_url":"https://github.com/apache/accumulo/pull/3640#issuecomment-1683894315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3640","id":1683894315,"node_id":"IC_kwDOACaFSM5kXjAr","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T13:06:35Z","updated_at":"2023-08-18T13:07:04Z","author_association":"CONTRIBUTOR","body":"> > I was thinking it could be better to use the prev row column for each tablet instead since we track the previous row\r\n> \r\n> That probably would be cleaner. That is what happens when using Ample it buffers the entire row and uses that column to constuct the extent for the tablet. Ample can also optionally check the linking of tablets when reading them.\r\n> \r\n\r\nThat makes sense, maybe it would be better to re-write the mergeMetadataRecords() method to use Ample to do the updates? I wonder if that should be done first in another PR into main. There's other places in TabletGroupWatcher like deleteTables() that could also use Ample I guess but not sure how big of a scope to make the change.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1683894315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684039669","html_url":"https://github.com/apache/accumulo/pull/3640#issuecomment-1684039669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3640","id":1684039669,"node_id":"IC_kwDOACaFSM5kYGf1","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T14:54:25Z","updated_at":"2023-08-18T14:54:25Z","author_association":"CONTRIBUTOR","body":"> That makes sense, maybe it would be better to re-write the mergeMetadataRecords() method to use Ample to do the updates? I wonder if that should be done first in another PR into main. There's other places in TabletGroupWatcher like deleteTables() that could also use Ample I guess but not sure how big of a scope to make the change.\r\n\r\nIn the elasticity branch I would like to eventually move all this merge code from TGW into fate steps.  Also will need to make the code use conditional mutations.  Would probably use Ample for these changes.  I am avoiding doing those changes until this work is done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684039669/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684062595","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684062595","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684062595,"node_id":"IC_kwDOACaFSM5kYMGD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T15:12:01Z","updated_at":"2023-08-18T15:12:01Z","author_association":"CONTRIBUTOR","body":"> > I think we could probably cache the result after constructing the new configuration object, and keep using it unless the overrides change. Alternatively, just cache it for a fixed period of time\r\n> \r\n> I think the latter might be the better option. It will make the code much cleaner than trying to compare the properties in the cached configuration to properties in the current configuration.\r\n\r\nSo, I went back and forth on this in e5a8b7e. I ended up being concerned about caching for a fixed-period. If the period is long, then that may introduce issues. If the period is short, then you end up recreating the Configuration object and creating a synchronization point when you might not need to. So, I opted to cache for a longer period of time and recreate the Configuration if the overrides changed before that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684062595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684113419","html_url":"https://github.com/apache/accumulo/pull/3640#issuecomment-1684113419","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3640","id":1684113419,"node_id":"IC_kwDOACaFSM5kYYgL","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T15:52:29Z","updated_at":"2023-08-18T15:52:29Z","author_association":"CONTRIBUTOR","body":"> > That makes sense, maybe it would be better to re-write the mergeMetadataRecords() method to use Ample to do the updates? I wonder if that should be done first in another PR into main. There's other places in TabletGroupWatcher like deleteTables() that could also use Ample I guess but not sure how big of a scope to make the change.\r\n> \r\n> In the elasticity branch I would like to eventually move all this merge code from TGW into fate steps. Also will need to make the code use conditional mutations. Would probably use Ample for these changes. I am avoiding doing those changes until this work is done.\r\n\r\nI think we can avoid using Ample for now as I can get the last end row by iterating like I'm doing now so we can target the change in Elasticity since it's much more work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684113419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684124718","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1684124718","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1684124718,"node_id":"IC_kwDOACaFSM5kYbQu","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T16:01:42Z","updated_at":"2023-08-18T16:01:42Z","author_association":"CONTRIBUTOR","body":"> I would caution against being so generic that this capability subsumes Accumulo's purpose as a scalable database, or reinvents the wheel. \r\n\r\nYeah I would agree we do not want solve more uses cases than we need.  The goal of this work is support a limited set of known internal use cases and share code within Accumulo.  So it only needs to be generic enough to support these known internal use cases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684124718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684132577","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1684132577","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1684132577,"node_id":"IC_kwDOACaFSM5kYdLh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T16:08:02Z","updated_at":"2023-08-18T16:08:02Z","author_association":"CONTRIBUTOR","body":"> I still think maybe it's worth writing a simple SPI for executing Accumulo maintenance tasks\r\n\r\n External compactions and log sort both farm out work to different processes and use completely different internal implementation to do this.  Getting those to use the same internal code and getting new elasticity use cases to use this new internal common code is going to be a learning experience.  Creating an SPI (if its ever done) would be best defered until we learn more from creating this internal implementation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684132577/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684145497","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1684145497","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1684145497,"node_id":"IC_kwDOACaFSM5kYgVZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T16:18:28Z","updated_at":"2023-08-18T16:18:28Z","author_association":"CONTRIBUTOR","body":">  I think that's how external compactions should have been written earlier, as well.\r\n\r\nI think it turned out best that this was not done.  That proposed SPI would have been tightly fitted to how Accumulo used to work for compaction and the SPI would have probably needed a major overhaul to adjust to the large changes in how compactions work now in elasticity.  The SPIs for compactions that just do thing like select what files to compact in what queue and do not care how or where that is actually done have turned out to be fairly resilient to the changes and will only need slight modifications.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684145497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684153601","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684153601","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684153601,"node_id":"IC_kwDOACaFSM5kYiUB","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T16:25:22Z","updated_at":"2023-08-18T16:25:22Z","author_association":"CONTRIBUTOR","body":"Also, as a side note, if the map is used as the key we need to make sure the map implementation properly implements hashcode/equals to do a deep comparison of the entries. This is the same for the current PR though, as the current version is doing a comparsion of the cached map with a new map that is created from the prefix configs on each call to getVolumeManagerConfiguration().\r\n\r\nThe change here is using an ImmutableMap from ImmutableCollections so I think this already does a proper hashcodes/equals deep comparsion but need to double check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684153601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684188607","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684188607","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684188607,"node_id":"IC_kwDOACaFSM5kYq2_","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T16:57:05Z","updated_at":"2023-08-18T16:57:50Z","author_association":"CONTRIBUTOR","body":"Thinking the following two things taken together could simplify the caching and avoid the check to see if things in the cache changed the code is currently doing. A short timeout plus the fact that the props are not even expected to change makes me think we could avoid checking if things changed.  The short timeout means if the assumption about instance props not changing is no longer true int he future that the code would be  still be resilient to changes.\r\n\r\n * instance props are not ZK mutable, so unless Accumulo periodically reloads the site file these props should be stable for the lifetime of the process.\r\n * I suspect the cache timeout could be much shorter than 6 hours.  A timeout of a few seconds should give a really nice amortized cost for the case where there are many thousands of accesses per second.  For example if the timeout is 10 seconds and if the cache is accessed 10K times per a second on average then it would only be recomputed on every 100K access on average which I suspect will not impact performance noticeably ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684188607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684192835","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684192835","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684192835,"node_id":"IC_kwDOACaFSM5kYr5D","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T17:01:01Z","updated_at":"2023-08-18T17:01:01Z","author_association":"CONTRIBUTOR","body":"Also thinking if we shorten the timeout and assume instance props do not change that using the URI for the cache key like the code is currently doing should be ok.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684192835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684203212","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684203212","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684203212,"node_id":"IC_kwDOACaFSM5kYubM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T17:10:37Z","updated_at":"2023-08-18T17:16:50Z","author_association":"CONTRIBUTOR","body":"> instance props are not ZK mutable\r\n\r\nI forgot about this. It would be great if this was part of the Property declarations. If this is the case, then:\r\n\r\n  * we just need to create a new Configuration for each volume that has overrides once, for the duration of the process.\r\n  * the filesystem URI as the key should suffice, as the override map will never change.\r\n  * I don't need to check for property changes in the method\r\n  \r\nI would advocate for a long cache timeout if things are not expected to change. That will reduce the probability of a synchronization point between threads.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684203212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684204187","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684204187","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684204187,"node_id":"IC_kwDOACaFSM5kYuqb","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T17:11:33Z","updated_at":"2023-08-18T17:14:25Z","author_association":"CONTRIBUTOR","body":"Could the timeout be based on the gc run frequency?  Say 1/4 or 1/2 of the `GC_CYCLE_DELAY` - that should enforce that on each run the config is checked / cached and should not need to be renewed frequently.\r\n\r\nIf the timeout is based on last access, then using 1/4 of `GC_CYCLE_DELAY` should expire after the run completes (and config no longer accessed) but before the next run will be scheduled.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684204187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684206236","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684206236","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684206236,"node_id":"IC_kwDOACaFSM5kYvKc","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T17:13:33Z","updated_at":"2023-08-18T17:13:33Z","author_association":"CONTRIBUTOR","body":"> Could the timeout be based on the gc run frequency? Say 1/4 or 1/2 of the `GC_CYCLE_DELAY` - that should enforce that on each run the config is checked / cached and should not need to be renewed frequently.\r\n\r\n`VolumeManager.get` and `VolumeManager.getFileSystemByPath` are called in many other places, it's not just GC.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684206236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684266005","html_url":"https://github.com/apache/accumulo/issues/3658#issuecomment-1684266005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3658","id":1684266005,"node_id":"IC_kwDOACaFSM5kY9wV","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T18:12:37Z","updated_at":"2023-08-18T18:12:37Z","author_association":"MEMBER","body":"> Creating an SPI (if its ever done) would be best defered until we learn more from creating this internal implementation.\r\n\r\nI'm definitely supportive of holding off on an SPI until we flesh out what we would even need it to contain. Mostly I just wanted to plant the seed, so it could be considered as the work progresses. Thinking about modularizing well enough to support an eventual SPI throughout the development is a great way to inject some discipline into our internal APIs and can result in a better code base in the end, I think.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684266005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684268912","html_url":"https://github.com/apache/accumulo/pull/3703#issuecomment-1684268912","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3703","id":1684268912,"node_id":"IC_kwDOACaFSM5kY-dw","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T18:15:31Z","updated_at":"2023-08-18T18:15:31Z","author_association":"MEMBER","body":"Just mentioning that this is a mitigation for #608 (would like that to be noted in the eventual git commit when this gets merged).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684268912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684277414","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1684277414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1684277414,"node_id":"IC_kwDOACaFSM5kZAim","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T18:24:29Z","updated_at":"2023-08-18T18:24:29Z","author_association":"MEMBER","body":"Some insight into this issue was recently discovered. It seems that under some extremely rare circumstances (that may be related to hardware failures and HDFS handling of it), the reading of one locality group, where file entries exist, fails, but reading the prev row, which is used for validating the metadata was fully traversed, succeeds. This results in missing some file entries that are still in use. Eventually, the scan comes back normal, but until then, the gc can delete the candidate it believes is not in use.\r\n\r\nSeveral issues were created to try to detect or mitigate this:\r\n\r\n* #3693 can help by removing candidates that still have references, so they aren't so aggressively checked (it can also help with performance).\r\n* #3694 is the core issue that could help fix this bug. #3695 is a sub-task of that one.\r\n* #3696 is for adding checks in the GC to attempt to verify the metadata is fully retrieved.\r\n* #3698 is for adding internal integrity checks to the RFile file format.\r\n* #3699 adds general integrity checks for the metadata in the schema.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684277414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684333798","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684333798","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684333798,"node_id":"IC_kwDOACaFSM5kZOTm","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T19:12:13Z","updated_at":"2023-08-18T19:12:13Z","author_association":"CONTRIBUTOR","body":"Confirmed that property will not change, removed logic for handling that in c8a5715. That made the implementation much simpler. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684333798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684408992","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684408992","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684408992,"node_id":"IC_kwDOACaFSM5kZgqg","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T20:34:25Z","updated_at":"2023-08-18T20:34:25Z","author_association":"MEMBER","body":"I'm still reviewing this and had some suggestions, but my review keeps changing, because the updates are causing me to refresh. Just letting you know, in case you wanted to wait until I wrap up my review. It shouldn't be long.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684408992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684413158","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684413158","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684413158,"node_id":"IC_kwDOACaFSM5kZhrm","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T20:38:49Z","updated_at":"2023-08-18T20:38:49Z","author_association":"CONTRIBUTOR","body":"I'll wait.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684413158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684465882","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684465882","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684465882,"node_id":"IC_kwDOACaFSM5kZuja","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T21:46:16Z","updated_at":"2023-08-18T21:46:16Z","author_association":"CONTRIBUTOR","body":"LGTM. I'll merge on Monday assuming no other suggestions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684465882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684470246","html_url":"https://github.com/apache/accumulo/issues/3707#issuecomment-1684470246","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3707","id":1684470246,"node_id":"IC_kwDOACaFSM5kZvnm","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T21:52:40Z","updated_at":"2023-08-18T21:52:40Z","author_association":"MEMBER","body":"This is included in the #3706 PR now, so this can be closed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684470246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684480531","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684480531","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684480531,"node_id":"IC_kwDOACaFSM5kZyIT","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T22:07:24Z","updated_at":"2023-08-18T22:07:24Z","author_association":"CONTRIBUTOR","body":"I saw the comment about the performance of blocking the get() when the new cache entry is computed due to the performance of building the map inside of that function since it will be executed under a lock.\r\n\r\nIf this becomes an issue of contention we can solve this by using an async cache. https://github.com/ben-manes/caffeine/wiki/Population#asynchronous-manual\r\n\r\nThe get() would return a future and it wouldn't block access by other threads while computing. I think the main downside would be maybe creating the same object more than once if multiple threads hit it but once it's cached then won't be an issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684480531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684493306","html_url":"https://github.com/apache/accumulo/pull/3710#issuecomment-1684493306","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3710","id":1684493306,"node_id":"IC_kwDOACaFSM5kZ1P6","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T22:26:10Z","updated_at":"2023-08-18T22:26:10Z","author_association":"CONTRIBUTOR","body":"This fixes an edge case that caused disjoint metadata to show up when running multiple merges/splits with no-chop merge as shown here: https://github.com/apache/accumulo/pull/3640#discussion_r1298545382","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684493306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684497970","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1684497970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1684497970,"node_id":"IC_kwDOACaFSM5kZ2Yy","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T22:33:23Z","updated_at":"2023-08-18T22:33:23Z","author_association":"MEMBER","body":"Here are some screenshots showing the new cone icon and how it propagates with different states:\r\n![Screenshot from 2023-08-18 18-31-12](https://github.com/apache/accumulo/assets/47725857/8bd31345-18da-44ba-b214-f6aacb99fc31)\r\n![Screenshot from 2023-08-18 18-31-03](https://github.com/apache/accumulo/assets/47725857/948c3b97-6018-4d4d-b63b-bd6fb7a3bb3b)\r\n![Screenshot from 2023-08-18 18-30-58](https://github.com/apache/accumulo/assets/47725857/2a3bbc8f-7835-4723-afe8-6a107ff4fef2)\r\n![Screenshot from 2023-08-18 18-30-26](https://github.com/apache/accumulo/assets/47725857/16c02ea0-4c85-4414-a386-7946db2a3a59)\r\n![Screenshot from 2023-08-18 18-30-04](https://github.com/apache/accumulo/assets/47725857/2342ceb9-1219-4e59-a317-714c1c529145)\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684497970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684499949","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1684499949","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1684499949,"node_id":"IC_kwDOACaFSM5kZ23t","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T22:36:42Z","updated_at":"2023-08-18T22:36:42Z","author_association":"MEMBER","body":"This is still marked as draft because I see a few places for some minor cleanup and also for some reason the hover styling for the manager server dropdown item is different for the rest and i need to figure out whats going on there and fix it.\r\n\r\nAside from those small things which ill get to on monday, everything is working as intended.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684499949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684623382","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684623382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684623382,"node_id":"IC_kwDOACaFSM5kaVAW","user":{"login":"ben-manes","id":378614,"node_id":"MDQ6VXNlcjM3ODYxNA==","avatar_url":"https://avatars.githubusercontent.com/u/378614?v=4","gravatar_id":"","url":"https://api.github.com/users/ben-manes","html_url":"https://github.com/ben-manes","followers_url":"https://api.github.com/users/ben-manes/followers","following_url":"https://api.github.com/users/ben-manes/following{/other_user}","gists_url":"https://api.github.com/users/ben-manes/gists{/gist_id}","starred_url":"https://api.github.com/users/ben-manes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ben-manes/subscriptions","organizations_url":"https://api.github.com/users/ben-manes/orgs","repos_url":"https://api.github.com/users/ben-manes/repos","events_url":"https://api.github.com/users/ben-manes/events{/privacy}","received_events_url":"https://api.github.com/users/ben-manes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-19T00:58:29Z","updated_at":"2023-08-20T05:31:27Z","author_association":"CONTRIBUTOR","body":"@cshannon That's a good approach for decoupling the computation from the map. The mapping to create the future is performed atomically, so you won't observe a get-load-put race when multiple threads try to memoize. The main drawback is that the future's work is dispatched onto an executor, so if simply blocking then a bit wasteful until virtual threads arrive. That can be mitigated using JCiP style memoizer (putIfAbsent with a future), but is more manual code. If not a problem, then you can use the `synchronous()` view to trivially swap over while keeping the code otherwise the same. \r\n\r\nA simpler trick is to increase the `initialCapacity` of the underlying ConcurrentHashMap. It determines the number of lock stripes by the table size, so a small map has a higher chance of hash collisions by concurrent writes. A larger table does not waste much and allocates more locks, so the likelihood reduces. The expectation is that the map's write rate likely correlates to its size, as locks are dynamically added when the table grows, but if that is not the case then setting the initial capacity is a pretty simple workaround.\r\n\r\nThe [FAQ](https://github.com/ben-manes/caffeine/wiki/Faq) touches on some of these topics.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684623382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684919066","html_url":"https://github.com/apache/accumulo/pull/3706#issuecomment-1684919066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3706","id":1684919066,"node_id":"IC_kwDOACaFSM5kbdMa","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-19T11:01:59Z","updated_at":"2023-08-19T11:02:24Z","author_association":"CONTRIBUTOR","body":"> @cshannon That's a good approach for decoupling the computation from the map. The mapping to create the future is performed atomically, so you won't observe a get-load-put race when multiple threads try to memoize. The main drawback is that the future's work is dispatched onto an executor, so if simply blocking then a bit wasteful until virtual threads arrive. That can be mitigated using JCiP style memoizer (putIfAbsent with a future), but is more manual code. If not a problem, then you can use the `synchronous()` view to trivially swap over while keeping the otherwise code.\r\n> \r\n> A simpler trick is to increase the `initialCapacity` of the underlying ConcurrentHashMap. It determines the number of lock stripes by the table size, so a small map has a higher chance of hash collisions by concurrent writes. A larger table does not waste much and allocates more locks, so the likelihood reduces. The expectation is that the map's write write likely correlates to its size, as locks are dynamically added when the table grows, but if that is not the case then setting the initial capacity is a pretty simple workaround.\r\n> \r\n> The [FAQ](https://github.com/ben-manes/caffeine/wiki/Faq) touches on some of these topics.\r\n\r\n@ben-manes - that is very helpful information and some nice tips, thanks for taking the time to respond and explain in more detail about how the async cache handles the computation. It's always great to hear from the creator of a library when you have a question about how something works. :)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1684919066/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686368957","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1686368957","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1686368957,"node_id":"IC_kwDOACaFSM5kg_K9","user":{"login":"Taher-Ghaleb","id":25190974,"node_id":"MDQ6VXNlcjI1MTkwOTc0","avatar_url":"https://avatars.githubusercontent.com/u/25190974?v=4","gravatar_id":"","url":"https://api.github.com/users/Taher-Ghaleb","html_url":"https://github.com/Taher-Ghaleb","followers_url":"https://api.github.com/users/Taher-Ghaleb/followers","following_url":"https://api.github.com/users/Taher-Ghaleb/following{/other_user}","gists_url":"https://api.github.com/users/Taher-Ghaleb/gists{/gist_id}","starred_url":"https://api.github.com/users/Taher-Ghaleb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Taher-Ghaleb/subscriptions","organizations_url":"https://api.github.com/users/Taher-Ghaleb/orgs","repos_url":"https://api.github.com/users/Taher-Ghaleb/repos","events_url":"https://api.github.com/users/Taher-Ghaleb/events{/privacy}","received_events_url":"https://api.github.com/users/Taher-Ghaleb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T13:49:36Z","updated_at":"2023-08-21T13:49:36Z","author_association":"CONTRIBUTOR","body":"Sorry for failing the build, but I don't get why it complains about \"Imports are not sorted\", while they look fine. Please advise. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686368957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686377871","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1686377871","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1686377871,"node_id":"IC_kwDOACaFSM5khBWP","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T13:52:38Z","updated_at":"2023-08-21T13:52:38Z","author_association":"MEMBER","body":"> Sorry for failing the build, but I don't get why it complains about \"Imports are not sorted\", while they look fine. Please advise. Thanks.\r\n\r\nRunning `mvn clean package -DskipTests` should sort the imports and make sure the code is properly formatted. After running that, you should be able to push the changes and have that build error go away.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686377871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686401567","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1686401567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1686401567,"node_id":"IC_kwDOACaFSM5khHIf","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T14:06:00Z","updated_at":"2023-08-21T14:06:00Z","author_association":"CONTRIBUTOR","body":"You can run the following locally to run the same checks:\r\n```\r\nmvn clean verify package javadoc:jar -Perrorprone -DskipITs=true -DskipTests=true \r\n```\r\n\r\nBut, I think the issue may be that this import is not needed:\r\n```\r\nimport static org.junit.jupiter.api.Assertions.assertTrue;\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686401567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686413417","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1686413417","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1686413417,"node_id":"IC_kwDOACaFSM5khKBp","user":{"login":"Taher-Ghaleb","id":25190974,"node_id":"MDQ6VXNlcjI1MTkwOTc0","avatar_url":"https://avatars.githubusercontent.com/u/25190974?v=4","gravatar_id":"","url":"https://api.github.com/users/Taher-Ghaleb","html_url":"https://github.com/Taher-Ghaleb","followers_url":"https://api.github.com/users/Taher-Ghaleb/followers","following_url":"https://api.github.com/users/Taher-Ghaleb/following{/other_user}","gists_url":"https://api.github.com/users/Taher-Ghaleb/gists{/gist_id}","starred_url":"https://api.github.com/users/Taher-Ghaleb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Taher-Ghaleb/subscriptions","organizations_url":"https://api.github.com/users/Taher-Ghaleb/orgs","repos_url":"https://api.github.com/users/Taher-Ghaleb/repos","events_url":"https://api.github.com/users/Taher-Ghaleb/events{/privacy}","received_events_url":"https://api.github.com/users/Taher-Ghaleb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T14:12:42Z","updated_at":"2023-08-21T14:12:42Z","author_association":"CONTRIBUTOR","body":"Thanks for your responses. I assumed I have already sorted the imports manually, but will also check locally. I removed the unneeded import for now.\r\n\r\nWhat is your opinion about the changes made in this pull request, please? I would appreciate your feedback for my research work. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686413417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686617488","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1686617488","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1686617488,"node_id":"IC_kwDOACaFSM5kh72Q","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T16:09:57Z","updated_at":"2023-08-21T16:11:58Z","author_association":"MEMBER","body":"Since my last comment I ironed out the minor inconsistencies I was seeing and centralized the svgs into a new file so their path does not have to be duplicated each time we want to use the icons. It looks like there are two other svgs that are used in the monitor that could be moved into this new file too so I might include that in this PR.\r\n\r\nAlso, if anyone has suggestions or requests for other icons (instead of or in addition to the cone) let me know. I got the cone and the dot svgs from the [bootstrap icons website](https://icons.getbootstrap.com/) and can easily substitute the cone for something else.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686617488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686904222","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1686904222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1686904222,"node_id":"IC_kwDOACaFSM5kjB2e","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T19:19:25Z","updated_at":"2023-08-21T19:19:25Z","author_association":"CONTRIBUTOR","body":"The use of `assertNotEquals` instead of `assertTrue..!= ...!0` seems fine.  I am not sure about usefulness of the explanatory messages in all cases.  The premise that the message adds clarify might not always be true.\r\n\r\nWhen an assert fails, it provides the line as well as the actual / expected value.  So\r\n```\r\nassertNotNull(report, \"The report should not be null\");\r\n```\r\nIs not adding much to the failure message.  The same with\r\n```\r\nassertNotEquals(0, report.getReportTime(), \"Report time should not be 0\");\r\n```\r\nIf will fail with a value not equal to 0 and show expected / received value.  The fact that now it would include that it was report time in the message? Might help, but it is pretty obvious from the code and would need to examine the code anyway, so it does not seem like it adds much.\r\n\r\nThe case of \r\n```\r\nassertEquals(Map.of(), report.getStatusCounts(), \"Status counts should be empty\");\r\n```\r\nis not  clear cut.  One, it is expecting an empty map - so it might be more accurate to state that `Status counts should be an empty map - but that is also redundant with the assertEquals, so again may not be adding clarity.\r\n\r\nUsing the message when it adds clarity seems like something to keep in mind and should be encouraged.  When it is just repeating the obvious that something was null, not null or equal / not equal, well, it may marginally make the reported test failure easier to read \"foo was not null\"... if you only read the test output, but to understand the error in context, you still need to go to the code and then the extra text is not really adding much and is now one more thing to keep in sync / correct for something that is rather self documenting in the first place.\r\n\r\nJust my opinion.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686904222/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686960503","html_url":"https://github.com/apache/accumulo/pull/3671#issuecomment-1686960503","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3671","id":1686960503,"node_id":"IC_kwDOACaFSM5kjPl3","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T20:00:41Z","updated_at":"2023-08-21T20:00:41Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  I am not sure of the actual change you are suggesting.  Would you mind pusing a commit or making a code suggestion?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686960503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686964490","html_url":"https://github.com/apache/accumulo/pull/3671#issuecomment-1686964490","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3671","id":1686964490,"node_id":"IC_kwDOACaFSM5kjQkK","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T20:03:33Z","updated_at":"2023-08-21T20:03:33Z","author_association":"CONTRIBUTOR","body":"@ctubbsii actually I think I understand what you are suggesting, I can try to make that change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686964490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686977210","html_url":"https://github.com/apache/accumulo/pull/3671#issuecomment-1686977210","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3671","id":1686977210,"node_id":"IC_kwDOACaFSM5kjTq6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T20:12:21Z","updated_at":"2023-08-21T20:14:50Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  all three try blocks currently can only throw RuntimeException.   Two of the methods containing the try blocks throw IOException.  So if I change the catch blocks to RuntimeException then its possible that someone in the future could call a method that throws IOException and it will compile but not be logged.  Because of this I would prefer to leave the code as catching Exception.  Your suggestion makes sense for the case where the methods are not throwing checked exceptions already.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686977210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686989152","html_url":"https://github.com/apache/accumulo/pull/3671#issuecomment-1686989152","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3671","id":1686989152,"node_id":"IC_kwDOACaFSM5kjWlg","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T20:21:42Z","updated_at":"2023-08-21T20:22:19Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I experimented with adding a new checked exception to the code to see what would happen and it did not compile.  Below is an example.\r\n\r\n```java\r\nvoid method1() throws IOException {\r\n   // some code that throws IOException\r\n   try{\r\n       // if  new code is added that throws a new checked exception that is not IOException then \r\n       // this code will not compile because the \"throw e\" later in the code can not compile.  For \r\n       // example the following will not compile\r\n     if(true) throw new AccumuloException();\r\n   } catch(Exception e) {\r\n       log.error(e);\r\n      throw e;\r\n   }\r\n    \r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1686989152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1687022619","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1687022619","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1687022619,"node_id":"IC_kwDOACaFSM5kjewb","user":{"login":"Taher-Ghaleb","id":25190974,"node_id":"MDQ6VXNlcjI1MTkwOTc0","avatar_url":"https://avatars.githubusercontent.com/u/25190974?v=4","gravatar_id":"","url":"https://api.github.com/users/Taher-Ghaleb","html_url":"https://github.com/Taher-Ghaleb","followers_url":"https://api.github.com/users/Taher-Ghaleb/followers","following_url":"https://api.github.com/users/Taher-Ghaleb/following{/other_user}","gists_url":"https://api.github.com/users/Taher-Ghaleb/gists{/gist_id}","starred_url":"https://api.github.com/users/Taher-Ghaleb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Taher-Ghaleb/subscriptions","organizations_url":"https://api.github.com/users/Taher-Ghaleb/orgs","repos_url":"https://api.github.com/users/Taher-Ghaleb/repos","events_url":"https://api.github.com/users/Taher-Ghaleb/events{/privacy}","received_events_url":"https://api.github.com/users/Taher-Ghaleb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T20:48:12Z","updated_at":"2023-08-21T20:49:29Z","author_association":"CONTRIBUTOR","body":"Thanks, @EdColeman and @ctubbsii, for your feedback. \r\n\r\nI have removed the assertion messages as suggested. I wanted to raise the point on having multiple assert statements in a single test method, which is known in the research literature as a test smell called _ Assertion Roulette_. One of the suggested refactoring of such practice was to add explanatory messages to the assertions. I understand that my messages were not informative enough, but I just wanted to get your opinion about the refactoring approach itself, whether you usually do it in practice or if you have other better alternatives, or if you only do it occasionally when necessary.\r\n\r\nThank you again for your input.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1687022619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1687050243","html_url":"https://github.com/apache/accumulo/pull/3712#issuecomment-1687050243","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3712","id":1687050243,"node_id":"IC_kwDOACaFSM5kjlgD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-21T21:11:50Z","updated_at":"2023-08-21T21:16:24Z","author_association":"MEMBER","body":"> Thanks, @EdColeman and @ctubbsii, for your feedback.\r\n> \r\n> I have removed the assertion messages as suggested. I wanted to raise the point on having multiple assert statements in a single test method, which is known in the research literature as a test smell called _ Assertion Roulette_.\r\n\r\nI'm not familiar with that literature, but after a quick Google search, I understand it to be not about multiple assertions themselves, but multiple assertions without sufficient description to identify which of the assertions failed for a given test. However, the general concerns about that are already addressed by using a test framework like JUnit, where the assertion failures already identify the specific line in the code where the assertion failed.\r\n\r\nFor example, the following would be an example of Assertion Roulette:\r\n\r\n```java\r\n  public boolean testMethodAssertionRouletteBadSmall() {\r\n    if (condition1) {\r\n      return true;\r\n    }\r\n    if (condition1) {\r\n      return true;\r\n    }\r\n    if (condition2) {\r\n      return true;\r\n    }\r\n    if (condition3) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  \r\n  public static void main(String[] args) {\r\n    if (!testMethodAssertionRouletteBadSmall()) {\r\n      throw new AssertionError();\r\n    }\r\n  }\r\n```\r\n\r\nBut, the following would not be, because JUnit adds sufficient information about which specific assertion failed and for what reason:\r\n\r\n```java\r\n  @Test\r\n  public void testMethodIsOkay() {\r\n    assertThat(condition1);\r\n    assertThat(condition2);\r\n    assertThat(condition3);\r\n  }\r\n```\r\n\r\nWe can add more details in JUnit's API, but often, we don't need to, because it's already implied by the choice of which assertion method to use from JUnit.\r\n\r\nSo, I don't think our code is a good example of Assertion Roulette.\r\n\r\nThere are some places in our code that might be, though, where we do something like:\r\n\r\n```java\r\n  public void testMethodAssertionRouletteBadSmall() {\r\n    manyConditions.forEach(condition -> assertThat(condition));\r\n  }\r\n```\r\n\r\nThese are probably better off with something more like:\r\n\r\n```java\r\n  public void testMethodAssertionRouletteIsBetter() {\r\n    manyConditions.forEach(condition -> assertThat(condition, condition.description()));\r\n  }\r\n```\r\n\r\nBut even then, we don't do that kind of thing very often, and if something does fail in a loop like that, it's still plenty valuable enough to track down the problem, without needing to bloat the test code with more complexity to avoid the bad smell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1687050243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1687671376","html_url":"https://github.com/apache/accumulo/issues/3714#issuecomment-1687671376","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3714","id":1687671376,"node_id":"IC_kwDOACaFSM5kl9JQ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T07:59:11Z","updated_at":"2023-08-22T07:59:11Z","author_association":"MEMBER","body":"I can't really complete the uploading of the javadoc and server properties, until the website is redesigned to accommodate the 3.x documentation, which starts to diverge from the 2.x docs. That redesign is somewhat substantial, and can't be done as a simple website update for the release, because there is a Jekyll plugin written in ruby that writes the links to the documentation, and changing that is non-trivial.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1687671376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688152176","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1688152176","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1688152176,"node_id":"IC_kwDOACaFSM5knyhw","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:06:11Z","updated_at":"2023-08-22T13:06:11Z","author_association":"CONTRIBUTOR","body":"I guess my only comment here is that I would love to see this system status thing in the title bar without having to pull down the menu.  That way I can glance at the page, not matter which one I have selected, and see that something is going on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688152176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688159877","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1688159877","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1688159877,"node_id":"IC_kwDOACaFSM5kn0aF","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:10:02Z","updated_at":"2023-08-22T13:10:02Z","author_association":"MEMBER","body":"> I guess my only comment here is that I would love to see this system status thing in the title bar without having to pull down the menu. That way I can glance at the page, not matter which one I have selected, and see that something is going on.\r\n\r\nBy system status thing do you mean the new icon? If so, that new icon will be visible (when the manager is in a non-normal state) in the navbar regardless of what page you are on. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688159877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688169056","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1688169056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1688169056,"node_id":"IC_kwDOACaFSM5kn2pg","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:15:39Z","updated_at":"2023-08-22T13:15:39Z","author_association":"CONTRIBUTOR","body":"> > I guess my only comment here is that I would love to see this system status thing in the title bar without having to pull down the menu. That way I can glance at the page, not matter which one I have selected, and see that something is going on.\r\n> \r\n> By system status thing do you mean the new icon? If so, that new icon will be visible (when the manager is in a non-normal state) in the navbar regardless of what page you are on.\r\n\r\nBut the images suggest I need to click on the menu to see it.....   so it is not readily visible unless you click on something.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688169056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688179612","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1688179612","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1688179612,"node_id":"IC_kwDOACaFSM5kn5Oc","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:22:01Z","updated_at":"2023-08-22T13:22:01Z","author_association":"CONTRIBUTOR","body":"OK, so yesterday we had a very long day.  In the end this is what happened.  The metadata table had a tserver that minor compacted and the root metadata got updated but in-memory did not for many metadata tablets on that tserver.  Subsequently, when the metadata tablets migrated many hours later, the mutations came back into play, which resulted in many non-metadata tablets having the same issue of inconsistency between what was in-memory and what was in the metadata.  At this point we decided that we needed to restart accumulo, which we did and then we had legions of missing files--those which had been, correctly, GC'd before.  It took us all afternoon and evening to figure out what actually happened.  I now think this issue of in-memory inconsistency needs to be addressed immediately.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688179612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688182741","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1688182741","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1688182741,"node_id":"IC_kwDOACaFSM5kn5_V","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:23:54Z","updated_at":"2023-08-22T13:23:54Z","author_association":"MEMBER","body":"> > > I guess my only comment here is that I would love to see this system status thing in the title bar without having to pull down the menu. That way I can glance at the page, not matter which one I have selected, and see that something is going on.\r\n> > \r\n> > \r\n> > By system status thing do you mean the new icon? If so, that new icon will be visible (when the manager is in a non-normal state) in the navbar regardless of what page you are on.\r\n> \r\n> But the images suggest I need to click on the menu to see it..... so it is not readily visible unless you click on something.\r\n\r\nI forgot to include screenshots of these changes present with the server dropdown collapsed. I switched pages in between changing the manager state to show how they should be visible regardless of the page you are on.\r\n\r\nManager state: `CLEAN_STOP`\r\n![Screenshot from 2023-08-22 09-18-35](https://github.com/apache/accumulo/assets/47725857/766d9d69-2de7-4605-bc41-33c607d21453)\r\n\r\n`NORMAL`\r\n![Screenshot from 2023-08-22 09-18-11](https://github.com/apache/accumulo/assets/47725857/2ce876d5-31e3-4290-81cb-6971bdd3416f)\r\n\r\n`SAFE_MODE`\r\n![Screenshot from 2023-08-22 09-17-39](https://github.com/apache/accumulo/assets/47725857/99e6f650-ae86-4db0-b52a-e08d07201edc)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688182741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688186331","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1688186331","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1688186331,"node_id":"IC_kwDOACaFSM5kn63b","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:26:01Z","updated_at":"2023-08-22T13:26:01Z","author_association":"CONTRIBUTOR","body":"Here is a thought.  As soon as metadata and in-memory are determined to be out of sync, the tablet is unloaded or in the extreme the tserver is halted.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688186331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688203653","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1688203653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1688203653,"node_id":"IC_kwDOACaFSM5kn_GF","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:35:27Z","updated_at":"2023-08-22T13:35:27Z","author_association":"CONTRIBUTOR","body":"That looks execellent.  Good job Dominic!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688203653/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688212518","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1688212518","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1688212518,"node_id":"IC_kwDOACaFSM5koBQm","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T13:40:42Z","updated_at":"2023-08-22T13:40:42Z","author_association":"CONTRIBUTOR","body":"The issue is seen with  #3396, #3392, #3386 and #2567 running","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688212518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688423702","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1688423702","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1688423702,"node_id":"IC_kwDOACaFSM5ko00W","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T15:26:06Z","updated_at":"2023-08-22T15:26:06Z","author_association":"MEMBER","body":"In 5aec433 I replaced the comments in the svg sprite sheet with `<title>` tags. This change allowed for captions to appear while hovering over the icons:\r\n\r\n![Screenshot from 2023-08-22 11-16-58](https://github.com/apache/accumulo/assets/47725857/00a39357-b761-46a2-b40e-bef8f4c59f4a)\r\n![Screenshot from 2023-08-22 11-16-30](https://github.com/apache/accumulo/assets/47725857/cdce0c91-eb96-483a-8528-2b4f04d302c7)\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688423702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688501829","html_url":"https://github.com/apache/accumulo/pull/3671#issuecomment-1688501829","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3671","id":1688501829,"node_id":"IC_kwDOACaFSM5kpH5F","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-22T16:07:16Z","updated_at":"2023-08-22T16:07:16Z","author_association":"CONTRIBUTOR","body":"> Wouldn't these get logged elsewhere as well? I suppose in this case, redundant logging isn't important.\r\n\r\nIts not guaranteed. I can't remember where, but there was some code in Accumulo that was scheduling futures on an execturor and never checking the result of the future.  This type of situation would silently drop any exceptions.  Also we can analyze all of Accumulo's code for exception handling, but anytime we pass control off to external code its possible it could drop an exception.  So for this case like you said the redundant logging is not too big of an issue, want to make sure we see the problem.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1688501829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689092193","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1689092193","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1689092193,"node_id":"IC_kwDOACaFSM5krYBh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T00:30:27Z","updated_at":"2023-08-23T00:38:48Z","author_association":"CONTRIBUTOR","body":"I chatted with @ivakegg about this issue and the following is a summary of what I learned.\r\n\r\n 1. metadata tablet major compaction creates file A1 (adding entry to the root tablet)\r\n 2. root tablet flushes\r\n 3. metadata tablet minor compaction creates file F2 (adding entry to root tablet)\r\n 4. metadata tablet major compaction deletes files F2,A1 and adds file A3 (single mutation to root tablet)\r\n 5. File F2 is still visible when scanning root tablet and file A1 is not.  The consistency check sees this because F2 is no longer in the tablets in memory set of files.\r\n 6. Tablet server serving metadata tablet dies\r\n 7. Metadata tablet reloads and now sees file F2, which bring back some deleted data. \r\n 8. metadata tablet major compacts F2 and some other files.  This successfully deletes the tablets F2 entry from the root tablet\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689092193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689878976","html_url":"https://github.com/apache/accumulo/issues/3716#issuecomment-1689878976","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3716","id":1689878976,"node_id":"IC_kwDOACaFSM5kuYHA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T12:31:46Z","updated_at":"2023-08-23T12:31:46Z","author_association":"MEMBER","body":"We attempted to fix a similar issue in #2990. I think maybe we skipped a spot. The code shouldn't be checking fateRef directly, but rather through the fate() method created in #2990, which blocks for a small period of time while we wait for the fate object to be ready. I'll open a PR for this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689878976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689950386","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1689950386","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1689950386,"node_id":"IC_kwDOACaFSM5kupiy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T13:17:53Z","updated_at":"2023-08-23T13:17:53Z","author_association":"MEMBER","body":"Just for comparison, do you have an example when the manager is fine, but the tservers have an issue? I think that's the main thing we need from this. We need to make sure that what propagates up for the manager in the exceptional case is different from what propagates from the tservers in a normal case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689950386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689975230","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1689975230","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1689975230,"node_id":"IC_kwDOACaFSM5kuvm-","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T13:33:14Z","updated_at":"2023-08-23T13:33:14Z","author_association":"MEMBER","body":"@DomGarguilo Are you able to test this? I'm curious if you'll be able to reproduce what you saw, or if this fixes it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689975230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689979056","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1689979056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1689979056,"node_id":"IC_kwDOACaFSM5kuwiw","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T13:35:28Z","updated_at":"2023-08-23T13:35:28Z","author_association":"MEMBER","body":"> @DomGarguilo Are you able to test this? I'm curious if you'll be able to reproduce what you saw, or if this fixes it.\r\n\r\nJust tested this out and I am still seeing error after switching the goal state from safe mode to normal","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689979056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689982038","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1689982038","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1689982038,"node_id":"IC_kwDOACaFSM5kuxRW","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T13:37:22Z","updated_at":"2023-08-23T13:37:22Z","author_association":"MEMBER","body":"> > @DomGarguilo Are you able to test this? I'm curious if you'll be able to reproduce what you saw, or if this fixes it.\r\n> \r\n> Just tested this out and I am still seeing error after switching the goal state from safe mode to normal\r\n\r\nIt didn't block? Did it change the error message at least? Are you seeing the notice about blocking, or the same message you had before?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689982038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689994183","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1689994183","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1689994183,"node_id":"IC_kwDOACaFSM5ku0PH","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T13:44:56Z","updated_at":"2023-08-23T13:47:29Z","author_association":"MEMBER","body":"> > > @DomGarguilo Are you able to test this? I'm curious if you'll be able to reproduce what you saw, or if this fixes it.\r\n> > \r\n> > \r\n> > Just tested this out and I am still seeing error after switching the goal state from safe mode to normal\r\n> \r\n> It didn't block? Did it change the error message at least? Are you seeing the notice about blocking, or the same message you had before?\r\n\r\nI am seeing the same thing as before:\r\n```\r\n2023-08-23T09:42:14,932 [manager.EventCoordinator] INFO : State changed from NORMAL to SAFE_MODE\r\n2023-08-23T09:42:14,959 [balancer.TableLoadBalancer] INFO : Loaded class org.apache.accumulo.core.spi.balancer.SimpleLoadBalancer for table +rep\r\n2023-08-23T09:42:15,046 [manager.EventCoordinator] INFO : [Metadata Tablets]: 2 tablets are HOSTED\r\n2023-08-23T09:42:15,048 [manager.EventCoordinator] INFO : [Normal Tablets]: 1 tablets are UNASSIGNED\r\n2023-08-23T09:43:00,229 [manager.EventCoordinator] INFO : State changed from SAFE_MODE to NORMAL\r\n2023-08-23T09:43:00,229 [manager.Manager] ERROR: Error occurred reading / switching manager goal state. Will continue with attempt to update status\r\njava.lang.IllegalStateException: Access to Fate should not have been initialized prior to the Manager finishing upgrades. Please save all logs and file a bug.\r\n\tat org.apache.accumulo.manager.Manager.setManagerState(Manager.java:309) ~[accumulo-manager-2.1.3-SNAPSHOT.jar:2.1.3-SNAPSHOT]\r\n\tat org.apache.accumulo.manager.Manager$StatusThread.run(Manager.java:769) ~[accumulo-manager-2.1.3-SNAPSHOT.jar:2.1.3-SNAPSHOT]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.3-SNAPSHOT.jar:2.1.3-SNAPSHOT]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\n```\r\n\r\nAlso, looking at the logs I see this happened:\r\n```\r\n2023-08-23T09:42:01,969 [manager.EventCoordinator] INFO : State changed from HAVE_LOCK to NORMAL\r\n2023-08-23T09:42:02,001 [manager.Manager] INFO : New servers: [localhost:10003[1000068e9f70008], localhost:10000[1000068e9f70006], localhost:9997[1000068e9f70007]]\r\n2023-08-23T09:42:02,012 [manager.EventCoordinator] INFO : There are now 3 tablet servers\r\n2023-08-23T09:42:02,013 [manager.Manager] INFO : tserver availability check disabled, continuing with-3 servers. To enable, set manager.startup.tserver.avail.min.count\r\n2023-08-23T09:42:02,048 [manager.Manager] ERROR: Error occurred reading / switching manager goal state. Will continue with attempt to update status\r\njava.lang.IllegalStateException: Access to Fate should not have been initialized prior to the Manager finishing upgrades. Please save all logs and file a bug.\r\n\tat org.apache.accumulo.manager.Manager.setManagerState(Manager.java:309) ~[accumulo-manager-2.1.3-SNAPSHOT.jar:2.1.3-SNAPSHOT]\r\n\tat org.apache.accumulo.manager.Manager$StatusThread.run(Manager.java:769) ~[accumulo-manager-2.1.3-SNAPSHOT.jar:2.1.3-SNAPSHOT]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.3-SNAPSHOT.jar:2.1.3-SNAPSHOT]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\n```\r\nWhich was before the portion above and before I manually changed the manager goal state.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1689994183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690020633","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1690020633","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1690020633,"node_id":"IC_kwDOACaFSM5ku6sZ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T14:00:34Z","updated_at":"2023-08-23T14:00:34Z","author_association":"MEMBER","body":"Oh, I see. I misread the code. It's assuming that the transition to NORMAL only occurs once, so it is expected that the fateRef *is* null at this point. The error message occurs only if fateRef is *not* null. All I've done in this change is ensure it definitely is *not* null, so the error message is guaranteed to appear after blocking until it is non-null.\r\n\r\nI'm not sure if we can do anything to avoid the error message now... I think you're just going to see that if you manually change it to safe mode after fate has started, and then back to normal, because of course fate would be running, since it was previously in a normal mode. We could shut down fate when going into safe mode, and then bring it back after going back to normal... but I don't think that's a great idea.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690020633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690039968","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1690039968","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1690039968,"node_id":"IC_kwDOACaFSM5ku_ag","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T14:11:50Z","updated_at":"2023-08-23T14:11:50Z","author_association":"CONTRIBUTOR","body":"`We could shut down fate when going into safe mode` - that would prevent using SAFE_MODE in an emergency if you wanted to prevent additional damage, but needed things up to troubleshoot / fix.\r\n\r\nCould adding a check to see if the upgrade code actually needs to run before the fate check matter?  If the code is already the correct version, having FATE running may not matter.  I believe that FATE check is to protect from upgrading with outstanding operation that may have different serializations.  If an upgrade *IS NOT* required - then there should not be a serialization concern - so having FATE initialized may not matter.\r\n\r\nHowever, there may be reasons not to have FATEs running in SAFE_MODE because they could be doing things that SAFE_MODE is trying to prevent.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690039968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690075324","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1690075324","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1690075324,"node_id":"IC_kwDOACaFSM5kvIC8","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T14:31:45Z","updated_at":"2023-08-23T14:31:45Z","author_association":"MEMBER","body":"> Just for comparison, do you have an example when the manager is fine, but the tservers have an issue? I think that's the main thing we need from this. We need to make sure that what propagates up for the manager in the exceptional case is different from what propagates from the tservers in a normal case.\r\n\r\n![Screenshot from 2023-08-23 10-29-13](https://github.com/apache/accumulo/assets/47725857/1565af3b-d184-4a51-b7cd-fee414ebd502)\r\n![Screenshot from 2023-08-23 10-27-42](https://github.com/apache/accumulo/assets/47725857/63a7d88b-970e-4616-a532-fed7e82878bc)\r\n\r\nAlso this is an interesting case:\r\n![image](https://github.com/apache/accumulo/assets/47725857/d8c6381d-a7bf-401e-8bc8-c4a2b63459fe)\r\n\r\nNot sure if this is how we want things to behave or if the servers icon should be a red circle in this case","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690075324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690098509","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1690098509","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1690098509,"node_id":"IC_kwDOACaFSM5kvNtN","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T14:45:21Z","updated_at":"2023-08-23T14:45:21Z","author_association":"MEMBER","body":"I pushed up a different change. This one avoids the error message if it transitions to NORMAL after the upgrade is complete. However, I think there could be a race condition in this implementation...  there's a small window of time where fate could be running while the upgrade is not complete, but this implementation won't notice because by the time it checks, the upgrade completes. I think that's probably okay, though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690098509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690243063","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1690243063","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1690243063,"node_id":"IC_kwDOACaFSM5kvw_3","user":{"login":"hlgp","id":31748527,"node_id":"MDQ6VXNlcjMxNzQ4NTI3","avatar_url":"https://avatars.githubusercontent.com/u/31748527?v=4","gravatar_id":"","url":"https://api.github.com/users/hlgp","html_url":"https://github.com/hlgp","followers_url":"https://api.github.com/users/hlgp/followers","following_url":"https://api.github.com/users/hlgp/following{/other_user}","gists_url":"https://api.github.com/users/hlgp/gists{/gist_id}","starred_url":"https://api.github.com/users/hlgp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlgp/subscriptions","organizations_url":"https://api.github.com/users/hlgp/orgs","repos_url":"https://api.github.com/users/hlgp/repos","events_url":"https://api.github.com/users/hlgp/events{/privacy}","received_events_url":"https://api.github.com/users/hlgp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T16:10:58Z","updated_at":"2023-08-23T16:10:58Z","author_association":"NONE","body":"Not sure if it's worth noting, but the creation of F2 and the compaction of F2 and A1 occurred in rapid succession.  They had the same timestamp in the log.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1690243063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691129100","html_url":"https://github.com/apache/accumulo/issues/3713#issuecomment-1691129100","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3713","id":1691129100,"node_id":"IC_kwDOACaFSM5kzJUM","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T07:10:36Z","updated_at":"2023-08-24T07:10:36Z","author_association":"MEMBER","body":"Can't use TweetDeck anymore to post announcements on Twitter, so those actions can't be checked off. I'll probably remove them from this issue template.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691129100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691130697","html_url":"https://github.com/apache/accumulo/issues/3714#issuecomment-1691130697","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3714","id":1691130697,"node_id":"IC_kwDOACaFSM5kzJtJ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T07:12:03Z","updated_at":"2023-08-24T07:12:03Z","author_association":"MEMBER","body":"Can't use TweetDeck anymore to post announcements on Twitter, so those actions can't be checked off. I'll probably remove them from this issue template.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691130697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691164260","html_url":"https://github.com/apache/accumulo/issues/3714#issuecomment-1691164260","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3714","id":1691164260,"node_id":"IC_kwDOACaFSM5kzR5k","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T07:36:10Z","updated_at":"2023-08-24T07:36:10Z","author_association":"MEMBER","body":"I did upload the javadoc and properties config, but I had to manually edit some of them to get them to make sense in the 2.x-centric docs. The site still needs a redesign to accommodate the docs better across major releases, but this is good enough for now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691164260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691166564","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1691166564","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1691166564,"node_id":"IC_kwDOACaFSM5kzSdk","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T07:37:44Z","updated_at":"2023-08-24T07:37:44Z","author_association":"MEMBER","body":"@DomGarguilo Would appreciate it if you were able to try to reproduce with the latest change in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691166564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691945563","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1691945563","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1691945563,"node_id":"IC_kwDOACaFSM5k2Qpb","user":{"login":"hlgp","id":31748527,"node_id":"MDQ6VXNlcjMxNzQ4NTI3","avatar_url":"https://avatars.githubusercontent.com/u/31748527?v=4","gravatar_id":"","url":"https://api.github.com/users/hlgp","html_url":"https://github.com/hlgp","followers_url":"https://api.github.com/users/hlgp/followers","following_url":"https://api.github.com/users/hlgp/following{/other_user}","gists_url":"https://api.github.com/users/hlgp/gists{/gist_id}","starred_url":"https://api.github.com/users/hlgp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hlgp/subscriptions","organizations_url":"https://api.github.com/users/hlgp/orgs","repos_url":"https://api.github.com/users/hlgp/repos","events_url":"https://api.github.com/users/hlgp/events{/privacy}","received_events_url":"https://api.github.com/users/hlgp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T15:46:26Z","updated_at":"2023-08-24T15:46:26Z","author_association":"NONE","body":"I traced through 6 or 7 instances of this phenomenon and they all have the same pattern regardless of whether its a metadata or non-metadata tablet affected.\r\n\r\n1.  Files are added to the tablet via import, minc, or majc.\r\n2.  The corresponding metadata tablet is flushed.\r\n3.  A new file is added via import or minc and IMMEDIATELY (same timestamp) major compacted along with some files created in 1.\r\n4.  The tserver reports the inconsistency 2 to 15 minutes later\r\n5.  The corresponding metadata tablet is flushed.\r\n\r\nIt is always the file added immediately before the major compaction with the inconsistency and never any of the files added prior.\r\nEvery file that has become inconsistent I've looked at follows this pattern; However, there are files that follow this pattern that do not become inconsistent.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1691945563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692008759","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1692008759","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1692008759,"node_id":"IC_kwDOACaFSM5k2gE3","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T16:17:33Z","updated_at":"2023-08-24T16:17:33Z","author_association":"MEMBER","body":"Created #3719 as an alternative approach to this PR. The difference being the use of a unicode character for the icon as opposed to an svg like in this PR. This PR can be closed as superseded by that one if it seems like a unicode character will suffice here. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692008759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692137336","html_url":"https://github.com/apache/accumulo/issues/3573#issuecomment-1692137336","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3573","id":1692137336,"node_id":"IC_kwDOACaFSM5k2_d4","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T17:31:37Z","updated_at":"2023-08-24T17:31:37Z","author_association":"CONTRIBUTOR","body":"#3721 is a possible cause for this, that was opened based on a chat with @hlgp.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692137336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692138460","html_url":"https://github.com/apache/accumulo/pull/3719#issuecomment-1692138460","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3719","id":1692138460,"node_id":"IC_kwDOACaFSM5k2_vc","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T17:32:32Z","updated_at":"2023-08-24T17:32:32Z","author_association":"CONTRIBUTOR","body":"I like the triangle with the exclamation mark the best.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692138460/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692218219","html_url":"https://github.com/apache/accumulo/pull/3719#issuecomment-1692218219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3719","id":1692218219,"node_id":"IC_kwDOACaFSM5k3TNr","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T18:35:12Z","updated_at":"2023-08-24T18:36:59Z","author_association":"CONTRIBUTOR","body":"SO.... the whole point of the original ticket is to see that the system is being shutdown.  I see that the Manager shows as being green when this is the case unless that is getting changed.  Hence this whole icon thing is actually not going to do me any good.  Also to reiterate we almost always have some tserver down, that that will alway be yellow for us.  This is another reason that this icon may not actually be helping us.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692218219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692232532","html_url":"https://github.com/apache/accumulo/pull/3719#issuecomment-1692232532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3719","id":1692232532,"node_id":"IC_kwDOACaFSM5k3WtU","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T18:45:49Z","updated_at":"2023-08-24T18:45:49Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nI see that the icon is an indication of the master state, and the color is a combination of the states.  So I guess this actually works.  I still want text but I will have to add that in our fork.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692232532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692241290","html_url":"https://github.com/apache/accumulo/issues/3688#issuecomment-1692241290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3688","id":1692241290,"node_id":"IC_kwDOACaFSM5k3Y2K","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T18:52:44Z","updated_at":"2023-08-24T18:52:44Z","author_association":"CONTRIBUTOR","body":"I like the icon being added in #3719, however I emphasize that I would like some text in the navbar to denote what the current state of the system is when not normal.  Manager green, tservers yellow, and gc gree is a normal state for us as there are almost always tservers that are down for maintainance etc.  However when the manager is down, or GC is not running I would love a banner on the navbar.  When the system is being shutdown I would love a banner on the navbar.  The whole point is that people are used to watching the monitor and it should always be readily apparent in those conditions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692241290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692291320","html_url":"https://github.com/apache/accumulo/pull/3720#issuecomment-1692291320","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3720","id":1692291320,"node_id":"IC_kwDOACaFSM5k3lD4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T19:30:52Z","updated_at":"2023-08-24T19:30:52Z","author_association":"MEMBER","body":"There was some discussion about changing the default maxWait interval being something longer than 5 seconds. I'm not so sure about that, but if that changes, it can be done in a separate change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692291320/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692300998","html_url":"https://github.com/apache/accumulo/issues/3688#issuecomment-1692300998","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3688","id":1692300998,"node_id":"IC_kwDOACaFSM5k3nbG","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T19:38:29Z","updated_at":"2023-08-24T19:38:29Z","author_association":"MEMBER","body":"> I like the icon being added in #3719, however I emphasize that I would like some text in the navbar to denote what the current state of the system is when not normal. Manager green, tservers yellow, and gc gree is a normal state for us as there are almost always tservers that are down for maintainance etc. However when the manager is down, or GC is not running I would love a banner on the navbar. When the system is being shutdown I would love a banner on the navbar. The whole point is that people are used to watching the monitor and it should always be readily apparent in those conditions.\r\n\r\nThere's no room for text in the nav bar. The icon solution was an attempt to achieve the same visual distinction, but without cluttering the nav bar. I don't know how we can accommodate the request to add text there, without mangling the layout. The icon solution was the best idea I could think of.\r\n\r\nIf we want to add text instead, we could add a section in the main page layout for system messages, and those system messages could come from anywhere, even when not on the manager page. If that solution is reasonable to you, then I think we should abandon the distinct icons idea, since that was merely an attempt to achieve a compromise for the text you had wanted. Shutting down, or safe mode are reasonable system messages. Are there any others?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692300998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692330345","html_url":"https://github.com/apache/accumulo/issues/3688#issuecomment-1692330345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3688","id":1692330345,"node_id":"IC_kwDOACaFSM5k3ulp","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T20:01:51Z","updated_at":"2023-08-24T20:01:51Z","author_association":"MEMBER","body":"We could also just have a single alert icon (like an exclamation point in a triangle) in the nav bar, and that could be clickable and open a modal window with the detailed system message.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692330345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692338464","html_url":"https://github.com/apache/accumulo/pull/3719#issuecomment-1692338464","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3719","id":1692338464,"node_id":"IC_kwDOACaFSM5k3wkg","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T20:08:30Z","updated_at":"2023-08-24T20:08:30Z","author_association":"MEMBER","body":"> > \r\n> \r\n> I see that the icon is an indication of the master state, and the color is a combination of the states. So I guess this actually works. I still want text but I will have to add that in our fork.\r\n\r\nI don't think you need to maintain a text solution in your fork. There's a good chance that if you find a particular set of information useful to display, others will too. I think we can come to consensus on a general solution with a little more work. I proposed some more ideas on #3688. I think what you're asking for is a little different than server statuses... I think maybe it'd be useful to tease apart the concept of server statuses (the color dot icon), and have a separate alert icon for system messages. On #3688, I proposed a separate icon in the nav bar to show that there is a system message, and opens a modal window with the system message when clicked. System messages could be \"Manager reported that it is in safe mode\", or \"There are no (managers|gc|tservers) running\", or \"System is shutting down\", etc. If we keep these separate from the server statuses, I think it might achieve what you're looking for.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692338464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692348000","html_url":"https://github.com/apache/accumulo/pull/3711#issuecomment-1692348000","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3711","id":1692348000,"node_id":"IC_kwDOACaFSM5k3y5g","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T20:15:44Z","updated_at":"2023-08-24T20:15:44Z","author_association":"MEMBER","body":"> Created #3719 as an alternative approach to this PR. The difference being the use of a unicode character for the icon as opposed to an svg like in this PR. This PR can be closed as superseded by that one if it seems like a unicode character will suffice here.\r\n\r\nYeah, I think the other solution is better. Though the discussion is still ongoing, I think we can close this one in favor of that one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692348000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692359234","html_url":"https://github.com/apache/accumulo/issues/3721#issuecomment-1692359234","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3721","id":1692359234,"node_id":"IC_kwDOACaFSM5k31pC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T20:25:28Z","updated_at":"2023-08-24T20:25:28Z","author_association":"MEMBER","body":"Would it be possible to track the state of the previous RPCs in a list of Futures and only send the session close RPC once the others are all completed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692359234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692364046","html_url":"https://github.com/apache/accumulo/pull/3720#issuecomment-1692364046","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3720","id":1692364046,"node_id":"IC_kwDOACaFSM5k320O","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T20:29:17Z","updated_at":"2023-08-24T20:29:26Z","author_association":"CONTRIBUTOR","body":"Created #3723 to increase the max wait time.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692364046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692365264","html_url":"https://github.com/apache/accumulo/pull/3717#issuecomment-1692365264","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3717","id":1692365264,"node_id":"IC_kwDOACaFSM5k33HQ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T20:30:17Z","updated_at":"2023-08-24T20:30:17Z","author_association":"MEMBER","body":"@keith-turner I think this is ready to merge, but was wondering if you had thoughts on the race condition that might get overlooked if the fate object is created while it is still upgrading, but the upgrade finishes before we check it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692365264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692479231","html_url":"https://github.com/apache/accumulo/pull/3719#issuecomment-1692479231","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3719","id":1692479231,"node_id":"IC_kwDOACaFSM5k4S7_","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T22:09:07Z","updated_at":"2023-08-24T22:09:07Z","author_association":"CONTRIBUTOR","body":"What if GOAL_STATE was treated as a process?  The pull-down could look like \r\n\r\n- GOAL_STATE (Green - Normal. Yellow - SAFE_MODE, Red SHUTDOWN)\r\n- Manager(s) (Green expected running, Yellow - on or more expected not available, Red, all down)\r\n- TSERVERS (Green is n > x% available, Yellow if y < n < x, available, Red n < y. \r\n- GC (Green normal, Yellow slow, Red not run since ?)\r\n\r\nThe roll-up goal would be to show - GOAL_STATE or if something needed attention.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692479231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692483294","html_url":"https://github.com/apache/accumulo/pull/3723#issuecomment-1692483294","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3723","id":1692483294,"node_id":"IC_kwDOACaFSM5k4T7e","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-24T22:13:39Z","updated_at":"2023-08-24T22:13:39Z","author_association":"CONTRIBUTOR","body":"It may be desirable to have the MAX_WAIT default to something greater than 2x the client timeout - that way the client timeout should trigger and propitiate before the MAX_WAIT is reached.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1692483294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]